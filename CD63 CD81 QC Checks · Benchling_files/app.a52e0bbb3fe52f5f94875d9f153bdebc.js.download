(()=>{"use strict"
var e,t,n,a,i,r={422199:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(531041),i=n(232606),r=n(99312),s=n(260929)
let o=r.isBrowser
if(o)try{window.localStorage.setItem("__testcanstore","1")
window.localStorage.removeItem("__testcanstore")}catch(e){console.warn("Disabling localStorage")
o=!1}const kb=e=>`${(2*e/1024).toFixed(2)} KB`
const l={enabled:()=>o,setItem:function setItem(e,t,n={}){if(o)try{return window.localStorage.setItem(e,t)}catch(i){o=!1
if(n.reraise)throw i
!function logDump(e,t,n){if("NS_ERROR_FILE_CORRUPTED"===n.name)return
let i
try{var r,o
let l=0
const c=[]
for(let e=0;e<window.localStorage.length;e++){const t=window.localStorage.key(e),{length:n}=window.localStorage.getItem(window.localStorage.key(e))
l+=n
c.push([t,n])}const d=(0,a.default)(c).chain().sortBy((([e,t])=>-t)).slice(0,10).map((([e,t])=>[e,kb(t)])).object().value()
i=kb(l)
s.w1(n,{level:s.Pm,extra:{totalKB:i,lsKeyKB:d,newKB:{[e]:kb(t.length)}},fingerprint:["benchling","localStorage","logDump",`key:${e}`,`name:${null!=(r=n.name)?r:"unknownName"}`,`code:${null!=(o=n.code)?o:"unknownCode"}`]})}catch(e){i=-1
s.w1(n,{level:s.Pm})}console.warn(`Disabling localStorage (used: ${i})`)}(e,t,i)
return}},getItem:function getItem(e){return o?window.localStorage.getItem(e):void 0},removeItem:function removeItem(e){o&&window.localStorage.removeItem(e)},json:{setItem:(e,t)=>l.setItem(e,JSON.stringify(t)),getItem(e){const t=l.getItem(e)
if(null==t)return t
try{return JSON.parse(t)}catch(e){(0,i.Gp)(!1,`Invalid JSON saved in localstorage: ${e.message}`,{jsonValue:t})
return}}},__enable(){o=!0},__disable(){o=!1}},c=l},614392:(e,t,n)=>{n.d(t,{GI:()=>Popup,I4:()=>Confirm})
var a=n(440281),i=n.n(a),r=n(250965),s=n.n(r),o=n(683245),l=n.n(o),c=n(474541),d=n(531041),u=n(20835),m=n(847867),p=n(877484)
class Confirm extends i().View{static initClass(){this.prototype.tagName="div"
this.prototype.className="modal js-popup-modal"
this.prototype.attributes={tabindex:-1}
this.prototype.template=m.Z}events(){return{keydown:"handleKey"}}handleKey(e){if(this.hideOnSubmit&&13===e.which){const t=this.$el.find(".modal-footer").find(".btn-af-primary, .btn-af-success")
if(1===t.length){e.stopPropagation()
return t.click()}}}toggleButtonsEnabled(e){const t=this.$el.find(".modal-footer").find(".btn-af-primary, .btn-af-success")
if(e){t.removeClass("disabled")
t.attr("disabled",!1)}else{t.addClass("disabled")
t.attr("disabled",!0)}}initialize(e){let t,n
this.choices=[]
this.cancelHandler=function(){};({msg:t,title:n,classes:this.classes,view:this.view,initialValidate:this.initialValidate}=e)
this.body=t
this.title=l().sanitize((0,c.TU)(n))
d.default.defaults(e,{hideOnSubmit:!0,closeable:!0,validators:[]});({hideOnSubmit:this.hideOnSubmit,closeable:this.closeable,validators:this.validators,noPadding:this.noPadding}=e)
this.$el.on("hidden.bs.modal",(()=>null!=this.view?this.view.remove():void 0))
const a=d.default.result(this,"events")
if(null!=this.validators)for(var[i,r]of Array.from(d.default.pairs(this.validators)))(e=>{function wrapped(){this.$el.find(".modal-footer").find(".btn-af-primary, .btn-af-success")
const t=e.apply(this,arguments)
return this.toggleButtonsEnabled(t)}if(null!=a[i]){let e=a[i]
d.default.isFunction(e)||(e=this[e])
return a[i]=function(){e.apply(this,arguments)
return wrapped.apply(this,arguments)}}a[i]=wrapped})(r)
return this.events=a}cancel(e){this.cancelHandler=e
return this}linkChoice(e,t,n,a){null==a&&(a=!0)
this.choices.push([e,t,n,a,"a"])
return this}choice(e,t,n,a,i={}){null==a&&(a=!0)
this.choices.push([e,t,n,a,"button",i])
return this}show(){let e
this.render()
s()(".modal-container").before(this.$el)
e=this.closeable?{}:{backdrop:"static",keyboard:!1}
this.$el.modal(e)
return this.$el.modal("show")}close(){this.$el.modal("hide")}callHandler(e){return e.call(this)}render(){this.$el.html(this.template({title:this.title,closeable:this.closeable}))
this.$el.find(".modal-dialog").addClass(this.classes)
this.$el.find(".modal-body").html(this.body)
this.noPadding&&this.$el.find(".modal-body").css("padding-top",0)
const e=this.$el.find(".modal-footer")
for(const n of Array.from(this.choices)){var t=d.default.bind(this.callHandler,this)
!function([n,a,i,r,o,l],c){o=o||"button"
const d=s()(`<${o}>${n}</${o}>`).attr({type:"button","data-loading-text":"Working..."}).addClass("btn").addClass(a).click((()=>{if(null!=i)return t(i)}));(0,u.Z)(d,l)
r?"a"===o?d.click((()=>c.modal("hide"))):d.attr("data-dismiss","modal"):d.click((function(){return s()(this).button("loading")}))
e.append(d)}(n,this.$el)}if(null!=this.initialValidate){const e=this.initialValidate()
this.toggleButtonsEnabled(e)}this.$el.on("hidden.bs.modal",d.default.bind(this.remove,this));(0,u.Z)(this.$el,this.getDataTestAttrs())
return this}getDataTestAttrs(){return null}}Confirm.initClass()
class Button extends i().View{static initClass(){this.prototype.tagName="button"}initialize(e){this.type=e.type||"button"
this.text=e.text||""
this.style=e.style||null
this.dataTestAttrs=e.dataTestAttrs
return this.action=e.action||("cancel"===this.type?this.cancel:null)}enabled(e){this.$el.toggleClass("disabled",!e)
return this.$el.attr("disabled",!e)}render(){const e=(()=>{switch(this.style){case"red":return"btn-af-danger"
case"blue":return"btn-af-primary"
case"green":return"btn-af-success"
case"grey":return"btn-af-default"
default:return"submit"===this.type?"btn-af-success":"btn-af-default"}})()
this.$el.text(d.default.result(this,"text")).attr({type:"submit"===this.type?"submit":"button","data-loading-text":"Working..."}).addClass("btn").addClass(e).addClass(`js-popup-${this.type}`).click((()=>{this.$el.button("loading")
return"function"==typeof this.action?this.action():void 0}));(0,u.Z)(this.$el,this.dataTestAttrs)
return this}}Button.initClass()
const h="modal js-popup-modal"
class Popup extends i().View{static initClass(){this.prototype.tagName="div"
this.prototype.className=h
this.className=h
this.prototype.attributes={tabindex:-1}
this.prototype._template=p.Z}choice(e){const t=new Button(e)
this.$footer.append(t.render().el)
this.buttons.push(t)
return this}close(){return this.$el.modal("hide")}form(){}doSubmit(e){e.preventDefault()
if(this.validate())return this.submit()}submit(){return this.close()}cancel(){return this.close()}validate(){return!0}focus(){}check(){let e
return this.validate()?(()=>{const t=[]
for(e of Array.from(this.buttons))"cancel"!==e.type?t.push(e.enabled(!0)):t.push(void 0)
return t})():(()=>{const t=[]
for(e of Array.from(this.buttons))"cancel"!==e.type?t.push(e.enabled(!1)):t.push(void 0)
return t})()}show(){this.render()
s()(".modal-container").before(this.$el)
this.$el.modal(this.modalOptions)
this.$el.modal("show")
this.check()
return this.focus()}renderTemplate(){return this._template({title:d.default.result(this,"title")})}render(){const e=s()(this.renderTemplate())
this.$footer=e.find(".modal-footer")
this.$body=e.find(".modal-body")
this.buttons=[]
this.form()
this.$el.html(e)
this.$el.on("hidden.bs.modal",(()=>this.remove()));(0,u.Z)(this.$el,this.getDataTestAttrs())
const t=d.default.defaults(d.default.result(this,"events")||{},{"submit form.popup-form":"doSubmit","click .js-popup-cancel":"cancel"})
this.delegateEvents(t)
return this}getDataTestAttrs(){return null}reenableForm(){for(const e of Array.from(this.buttons))e.$el.button("reset")
return this.check()}}Popup.initClass()},271350:(e,t,n)=>{n.d(t,{$d:()=>getReferrals,A$:()=>createInboundRequest,Hv:()=>loadOrgs,P5:()=>rejectOutboundRequest,Tx:()=>getOrMakePublicReferralId,Zq:()=>loadMetadata,j8:()=>acceptOutboundRequest,oq:()=>dismissAllOrgInvites,zc:()=>loadOrgRequests})
var a=n(848640),i=n(787004),r=n(465428),s=n(947730),o=n(771398),l=n(974913),c=n(788836)
function loadOrgs(){s.Z.dispatch({actionType:i.gdE})
r.tf().done((e=>{s.Z.dispatch({actionType:i.aGr,entityId:c.Z.currentUser().id,orgs:e})})).fail((e=>{s.Z.dispatch({actionType:i.sM6,error:e})}))}function loadOrgRequests(){r.TP().done((e=>{s.Z.dispatch({actionType:i.ej8,entityId:c.Z.currentUser().id,userOrgsInboundRequests:e.userOrgsInboundRequests,currentUserInboundRequests:e.currentUserInboundRequests,pendingOrgInvites:e.pendingInvites,currentUserOutboundRequests:e.currentUserOutboundRequests})})).fail(l.ZP.notifyError)}function dismissAllOrgInvites(){const e=c.Z.currentUser().id,t=c.Z.getEntity(e).pendingOrgInvites
s.Z.dispatch({actionType:i.btk,userId:e})
o.v_({url:"/1/api/users/me/actions/dismiss-organization-invites"}).fail((()=>{s.Z.dispatch({actionType:i.V_R,originalPendingInvites:t,userId:e})})).fail(l.ZP.notifyError)}function createInboundRequest(e){r.A$(e).fail(l.ZP.notifyError)}function acceptOutboundRequest(e){const t=c.Z.getEntity(e)
s.Z.dispatch({actionType:i.W$E,organizationId:e,userId:c.Z.currentUser().id})
r.j8(e).done((()=>{a.HY()
l.ZP.success(`Successfully joined ${t.name}.`)})).fail(l.ZP.notifyError)}function rejectOutboundRequest(e){const t=c.Z.getEntity(e)
s.Z.dispatch({actionType:i.k4d,organizationId:e,userId:c.Z.currentUser().id})
r.P5(e).done((()=>{l.ZP.success(`Successfully rejected ${t.name}'s invite.`)})).fail(l.ZP.notifyError)}function getReferrals(){r.$d().done((({data:e})=>{s.Z.dispatch({actionType:i.dSz,userId:c.Z.currentUser().id,referrals:e})}))}function getOrMakePublicReferralId(e){r.RA(e).done((({referralLinkId:t})=>{s.Z.dispatch({actionType:i.WIq,referralLinkId:t,email:e})})).fail((()=>{r.pe(e).done((({referralLinkId:t})=>{s.Z.dispatch({actionType:i.WIq,referralLinkId:t,email:e})}))}))}function loadMetadata(){r.sd().done((e=>{s.Z.dispatch({actionType:i.qHw,userId:c.Z.currentUser().id,metadata:e})}))}},770188:(e,t,n)=>{n.r(t)
n.d(t,{Assembly:()=>Assembly,__Assemblies:()=>Assemblies,__Fragment:()=>Fragment,assemblies:()=>y})
var a=n(440281),i=n.n(a),r=n(85758),s=n.n(r),o=n(531041),l=n(232606),c=n(468943),d=n(598317),u=n(146238),m=n(47984),p=n(171471),h=n(87209),E=n(974913),S=n(432128),T=n(771398),g=n(132814),f=n(973606)
const{ASSEMBLY_TYPE:I}=m,A=u.ZP.getCommonEnzymes()
class Fragment extends i().Model{static initClass(){this.prototype.urlRoot="/1/api/fragments/"}defaults(){return{sequenceID:null,active:!1,reverse:!1,startEnzymeID:null,endEnzymeID:null,sequenceMetadata:null,start:null,end:null}}startEnzymeID(){return this.get("startEnzymeID")}endEnzymeID(){return this.get("endEnzymeID")}enzymeIDs(){return null!=this.startEnzymeID()&&null!=this.endEnzymeID()?[this.startEnzymeID(),this.endEnzymeID()]:null}start(){return this.get("start")}end(){return this.get("end")}sequenceID(){return this.get("sequenceID")}reverse(){return this.get("reverse")}sequenceMetadata(){return this.get("sequenceMetadata")}initialize(){this.sequences=n(699418).ZP.get()}length(){return g.length(this.start(),this.end(),this.getSequence().length())}isValid(e){const t=this.getSequence()
if(!t.circular()&&g.isWrap(this.start(),this.end()))return!1
if(this.start()>=t.length()||this.end()>=t.length())return!1
if(null!=this.enzymeIDs()){if(null==this.getSelectedFragmentFromSequence(t,{raiseOnNotFound:!1}))return!1}return!0}getSequence(){const e=this.sequenceID()
if(null==e)return null
const t=this.sequences.get(e)
return null==t?null:t.get("sequence")}getEnzymes(){if(null!=this.enzymeIDs()){const e=this.getSequence()
return this.enzymeIDs().map((t=>{const n=e.get("enzymes").get(t)
return{color:s().rgb(n.color()).darker(.5).toString(),name:n.name(),offset:n.offset()}}))}return null}getSelectedFragmentFromSequence(e,{raiseOnNotFound:t=!0}={}){const n=this.enzymeIDs(),a=e.getFragments(n),i=this.getSelectedFragment(a)
t&&(0,l.hu)(null!=i,"Expected a fragment to be selected",{enzymeIds:n,seqFragments:a.map((e=>({start:e.get("start"),end:e.get("end")}))),sequenceId:e.id})
return i}getSelectedFragment(e){let t
const n=this.start(),a=this.end(),i=this.getSequence(),r=i.get("_sequence"),s=e.find((e=>e.get("start")===n)),o=e.find((e=>e.get("end")===a))
if(null==s||null==o)return null
let l=s.get("start")
const c=s.get("offset5")
l=c>0?l:l+c
l=g.mod(l,i.length())
let d=o.get("end")
const u=o.get("offset3")
d=u<0?d:d+u
d=g.mod(d,i.length())
const m={annotations:!0,notcontained:!0}
if(n===a){let e
l=g.mod(n+c,i.length())
if(c>0){t=r.clone()
t.opReindex({current:n,desired:0})
t.set({circular:!1})
e=r.residueSlice(a,l,!0)
t.opInsert({pos:t.length(),bases:e})}else{t=r.clone()
t.opReindex({current:l,desired:0})
t.set({circular:!1})
e=r.residueSlice(l,a,!0)
t.opInsert({pos:t.length(),bases:e})}}else t=r.createFromIndices(l,d,m)
t.set({offset5:c,offset3:u,_cutter5:s.get("_cutter5"),_cutter3:o.get("_cutter3"),start:n,end:a})
return t}open(){const e=this.getSequence(),t=e._sequence().slice(this.start(),this.end())
t.set({start:this.start(),end:this.end()})
n(699418).ZP.get().selectFragment(e,t)}parse(e,t){e=o.default.extend(e,{sequenceID:e.sequence_id,startEnzymeID:e.start_enzyme_id,endEnzymeID:e.end_enzyme_id,sequenceMetadata:e.sequence_metadata})
return o.default.omit(e,"sequence_id","start_enzyme_id","end_enzyme_id")}toJSON(){const e=super.toJSON(...arguments)
o.default.extend(e,{sequence_id:e.sequenceID,start_enzyme_id:e.startEnzymeID,end_enzyme_id:e.endEnzymeID})
return o.default.omit(e,"sequenceID","startEnzymeID","endEnzymeID","sequenceMetadata")}}Fragment.initClass()
class Fragments extends i().Collection{static initClass(){this.prototype.model=Fragment}}Fragments.initClass()
class AssemblySlot extends i().Model{static initClass(){this.prototype.urlRoot="/1/api/slots/"}defaults(){return{name:null,type:null,index:null,fragments:new Fragments,method:null,active:!1,warnings:[],errors:[]}}initialize(){this.listenTo(this.fragments(),"add remove",(function(e,t,n){return this.trigger("slotChange",n)}))
this.listenTo(this.fragments(),"change",(function(e,t){return this.trigger("slotChange",t)}))
this.listenTo(this.fragments(),"reset",(function(e,t){return this.trigger("slotChange",t)}))}active(){return this.get("active")}errors(){return this.get("errors")}fragments(){return this.get("fragments")}index(){return this.get("index")}isEmpty(){return 0===this.fragments().length}method(){return this.get("method")}name(){return this.get("name")}displayName(){return this.name()?this.name():this.isSpacer()?"Spacer":0===this.index()?"Backbone":"Insert"}type(){return this.get("type")}isSpacer(){return null!=this.get("spacer")}spacer(){return this.get("spacer")}warnings(){return this.get("warnings")}singleFragment(){if(1!==this.fragments().length)throw new Error(`Unexpected number of fragments: ${this.fragments().length}`)
return this.fragments().at(0)}setSingleFragment(e){let t
if(this.isEmpty())t=this.fragments().add(e)
else{t=this.singleFragment()
t.set(e)}t.set({slot_id:this.get("id")})
return t.save(null,{patch:!0}).done((()=>{const e=this.index()
0===e?c.j("assembly","set_backbone",{product:p.XC.MOLBIO,actionCategory:p.Jw.WRITE}):c.j("assembly","set_insert",{product:p.XC.MOLBIO,actionCategory:p.Jw.WRITE,slotIndex:e})})).fail((()=>t.destroy({error(){(0,l.Gp)(!1,"fragment.destroy() failed")}})))}shiftLeft(){return this._shift(-1)}shiftRight(){return this._shift(1)}_shift(e){const t=this.index()+e,{collection:n}=this
if(!(t<0||t>=n.length)){n.remove(this,{skipCheck:!0})
n.add(this,{at:t})
n.saveOrder()}}parse(e,t){const n=this.fragments()||new Fragments
n.reset(e.fragments,{parse:!0})
e.fragments=n
return e}toJSON(){const e=super.toJSON(...arguments)
return o.default.omit(e,"active","prevFragment","nextFragment","sequenceFragment","thisFragment")}}AssemblySlot.initClass()
class AssemblySlots extends i().Collection{static initClass(){this.prototype.model=AssemblySlot
this.prototype.comparator="index"}initialize(e,t){null==t&&(t={})
const{assemblyID:n}=t
this.assemblyID=n
this.on("add remove",this.reorder)}add(e,t){e=o.default.isArray(e)?e:[e]
if(null!=(null!=t?t.at:void 0)){this.each((n=>{n.index()>=t.at&&n.set({index:n.index()+e.length})}))
o.default.each(e,((e,n)=>{e.set({index:t.at+n})}))}return super.add(e,t)}addSlot(e,t=null){const n=new AssemblySlot(e)
n.set({assembly_id:this.assemblyID})
null!=t&&n.set({index:t})
null==t&&(t=this.length)
return n.save().done((e=>{this.add(n,{at:t})
this.each((e=>e.set({active:e===n})))}))}saveOrder(){T.ty({url:`/1/api/assemblies/${this.assemblyID}/actions/reorder`,data:{order:this.map((e=>e.id))}}).fail(E.ZP.notifyError)}reorder(){this.each(((e,t)=>e.set({index:t})))}withoutSpacers(){return this.filter((e=>!e.isSpacer()))}getSpacers(){const e=n(812651),t=this.map((e=>e.isSpacer()?{name:e.displayName(),bases:e.spacer()}:null))
t.reverse()
const a=[]
let i=[]
for(const e of Array.from(t))if(null!=e)i.push(e)
else{i.reverse()
a.push(i)
i=[]}a.reverse();(0,l.hu)(0===i.length,"spacersWithNulls did not start with a null, not all items accounted for");(0,l.hu)(a.length===this.withoutSpacers().length,"preFlattenSpacers does not match up to non-spacer slots")
return o.default.map(a,(t=>{if(0===t.length)return null
const n=new e.Sequence,a=n.annotations()
for(const{name:e,bases:i}of Array.from(t)){const t=n.length()
n.insertBases(t,i)
i.length>0&&a.add({start:t,end:0,strand:0,name:e})}return n}))}}AssemblySlots.initClass()
class Assembly extends i().Model{static initClass(){this.prototype.urlRoot="/1/api/assemblies/"}defaults(){return{name:"Untitled Assembly",active:!1,slots:new AssemblySlots,method:null,warnings:[],errors:[],parameters:{},provider:S.Z.get(f.n$.PROVIDER)}}active(){return this.get("active")}method(){return this.get("method")}name(){return this.get("name")}parameters(){return this.get("parameters")}slots(){return this.get("slots")}allFragments(){return this.slots().chain().map((e=>e.fragments().models)).flatten().value()}warnings(){return this.get("warnings")}errors(){return this.get("errors")}canCreate(){return!this.allFragments().some((e=>null==e.id))&&(0===this.get("errors").length||this.get("canCreateWithErrors"))}initialize(){this.listenTo(this.slots(),"reset",((e,t)=>this.check(t)))
this.listenTo(this.slots(),"add remove",((e,t,n)=>this.check(n)))
this.listenTo(this.slots(),"slotChange",(e=>this.check(e)))
this.on("change:parameters",(function(e,t,n){this.check(n)
this.setEnzymes()}))}clone(){return T.v_({url:`${this.urlRoot}${this.get("id")}/actions/clone`}).then((e=>new Assembly(e,{parse:!0})))}check(e){null==e&&(e={})
if(e.skipCheck)return
const t=n(901369).Z,{canCreateWithErrors:a,errors:i,warnings:r}=t.for(this.method()).checkAssembly(this)
this.set({canCreateWithErrors:a,errors:i,warnings:r})
this.trigger("resize")}enzyme(){return A.get(this.parameters().enzymeID)}setEnzymes(){if(this.method()!==I.GOLDEN_GATE)return
const e=this.previous("parameters").enzymeID,{enzymeID:t}=this.parameters(),a=n(699418).ZP.get()
for(const n of Array.from(a.getOpenSequences())){const a=n.get("enzymes")
a.get(t).set({active:!0})
if(null!=e&&e!==t){a.get(e).set({active:!1})}}}parse(e,t){let n
if(!1===t.parse)return null
const a=this.slots()
if(a){n=a
n.assemblyID=e.id}else n=new AssemblySlots([],{assemblyID:e.id})
n.reset(e.slots,{parse:!0})
e.slots=n
return e}toJSON(){const e=super.toJSON(...arguments)
return o.default.omit(e,"active")}}Assembly.initClass()
class Assemblies extends d.Z{static initClass(){this.prototype.url="/1/api/assemblies/"}initialize(){this._isFetching=!1
this._loaded=!1}fetch(e){this._isFetching=!0
return super.fetch(e).always((()=>{this._isFetching=!1})).done((()=>{this._loaded=!0
this.trigger("finishedFetch")})).fail(E.ZP.notifyError)}isFetching(){return this._isFetching}isLoaded(){return this._loaded}parse(e,t){return e.map((e=>new Assembly(e,{parse:!0})))}toggleActive(e,t){this.each((n=>{const a=n===e&&!e.active()
n.set({active:a},t)}))}activateAssembly(e){if(e.active())return
const t=n(901369).Z,a=n(699418).ZP.get(),i=e.allFragments().filter((e=>null==e.sequenceID()))
for(const e of Array.from(i))e.destroy({error(){(0,l.Gp)(!1,"fragment.destroy() failed")}})
const r=e.allFragments().filter((e=>null==a.get(e.sequenceID())))
let s=null
if(t.for(e.method()).shouldOpenSequenceFiles()&&r.length>0){const t=e.slots().find((e=>!e.isEmpty())).fragments().at(0).sequenceID()
h.$Z()
const n=r.map((e=>{const t=a.openFolderItem(e.sequenceID(),{open:!1})
t.fail((t=>{404===t.status&&e.destroy({error(){(0,l.Gp)(!1,"fragment.destroy() failed")}})}))
return t}))
s=Promise.allSettled(n)
s.then((e=>{h.Cp()
a.openFolderItem(t)
o.default.any(e,(e=>"rejected"===e.state))&&E.ZP.warn("Some sequences used by this assembly could not be found, so their fragments have been reset")}))}Promise.resolve(s).finally((()=>{e.allFragments().forEach((t=>{t.isValid(e.method())||t.destroy({skipCheck:!0})}))
e.check()
this.toggleActive(e)
c.j("assembly","opened_wizard",{product:p.XC.MOLBIO,actionCategory:p.Jw.WRITE,assemblyID:e.get("id")})}))}}Assemblies.initClass()
const y=new Assemblies},344991:(e,t,n)=>{n.d(t,{Js:()=>getMeasurementColumnsError,ZR:()=>getOutputColumnsError,s:()=>getInputColumnsError})
var a=n(372721),i=n(939092)
function getInputColumnsError(e,t){const n=e.filter((({type:e})=>a.xR.includes(e)))
if(n.length>1||t&&0===n.length)return"There must be exactly one source entity or container (by barcode or by well location in plate) column specified."
const r=i.r6(e,[[a.BA.INPUT_GRID_BARCODE,a.BA.INPUT_GRID_COORDINATES]])
return r||null}function getOutputColumnsError(e,t){const n=e.filter((({type:e})=>a.Ej.includes(e)))
if(n.length>1||t&&0===n.length)return"There must be exactly one destination container (by barcode or by well location in plate) column specified."
const r=i.r6(e,[[a.BA.OUTPUT_GRID_BARCODE,a.BA.OUTPUT_GRID_COORDINATES]])
return r||null}function getMeasurementColumnsError(e,t){const n=i.r6(e,[a.HJ,a.Mk])
if(n)return n
const r=e.some((({type:e})=>[a.BA.INPUT_BIOENTITY_LABEL,a.BA.INPUT_BATCH_NAME].includes(e))),s=e.some((({type:e})=>a.HJ.includes(e)))
return t&&!r&&s?"Input concentration can only be specified if input supports concentrations.":null}},662909:(e,t,n)=>{n.r(t)
n.d(t,{create:()=>create,fetchInputFiles:()=>fetchInputFiles,reset:()=>reset,update:()=>update})
var a=n(232606),i=n(787004),r=n(826478),s=n(497790),o=n(776065),l=n(551705),c=n(947730),d=n(924768),u=n(782649),m=n(974913),p=n(75804),h=n(659623),E=n(728115),S=n(982899)
function _getTagSchema(e){const t=p.Z.getTagSchemaById(e);(0,a.hu)(t,"Tag schema in bulk antibody was not found in `TagSchemaStore`")
return t}function update(e){c.Z.dispatch({actionType:i.wnG,updates:e})
!function _setAntibodyNamePrefixOnUpdate(e){e.tagSchemaId&&c.Z.dispatch({actionType:i.wnG,updates:{antibodyNamePrefix:_getTagSchema(e.tagSchemaId).prefix}})}(e)
!function _setBioentityLinkSpecsOnUpdate(e){if(!e.tagSchemaId&&!e.inputFiles)return
const t=S.BN.update(E.Z.getBulkAntibody(),e)
if(!t.tagSchemaId)return
const n=_getTagSchema(t.tagSchemaId).fields.filter((e=>e.fieldType===s.FIELD_TYPES.BIOENTITY_LINK.type&&e.requiredLink.tagSchema)).map((e=>S.kd(e,t.inputFiles)))
c.Z.dispatch({actionType:i.wnG,updates:{bioentityLinkSpecs:n}})}(e)}function fetchInputFiles(e){const t=1e3
update({inputFilesLoading:!0})
l.Z.listFiles(e,{sort:{limit:t}}).done((e=>{(0,a.Gp)(e.total<=t,`Bulk antibody input folder has ${e.total} files, we only fetched 1000`)
update({inputFiles:e.files})})).fail(m.ZP.notifyError).always((()=>{update({inputFilesLoading:!1})}))}function create(){const e=E.Z.getBulkAntibody();(0,a.hu)(!e.inputFilesLoading,"Expected files in bulk antibody to already be loaded");(0,a.hu)(!e.isCreating,"Expected bulk antibody to not already be creating")
c.Z.dispatch({actionType:i.wnG,updates:{isCreating:!0}})
h.U(e).done((()=>{u.M({type:r.pC.INFO,message:"Bulk antibody creation completed.",actionText:"Open",duration:0,onActionClick(){d.RM()
o.Z.openFile(e.outputFolderId)}})})).fail(m.ZP.notifyError).always((()=>{c.Z.dispatch({actionType:i.wnG,updates:{isCreating:!1}})}))}function reset(){update(S.tD())}},20921:(e,t,n)=>{n.d(t,{BN:()=>r,CC:()=>createTranslationSpec,FU:()=>getErrors,Qt:()=>getProteinNames,kb:()=>createBulkTranslation})
var a=n(767807),i=n.n(a)
function createBulkTranslation(){return{sequenceTagSchemaId:null,selectedIds:[],translationSpecs:[],outputFolderId:null,sequences:[],sequencesLoading:!1,isRunning:!1,errors:[]}}function createTranslationSpec(e){return{tagSchemaField:e,firstCodonAnnotationName:"",firstCodonOffset:0}}const r={update:(e,t)=>i()(e,{$merge:t}),updateTranslationSpec:(e,t,n)=>i()(e,{translationSpecs:{[t]:{$merge:n}}})}
function getErrors(e){const t=[]
e.sequenceTagSchemaId||t.push("A sequence schema is required")
e.outputFolderId||t.push("A target folder is required")
return t.concat(e.errors)}function getProteinNames(e){const t=[]
e.sequences.forEach((n=>{e.translationSpecs.filter((e=>e.firstCodonAnnotationName.length>0)).forEach((e=>{t.push(`${n.name}-${e.tagSchemaField.name}`)}))}))
return t}},292132:(e,t,n)=>{n.d(t,{DO:()=>DigestAnalysis,sp:()=>AlignmentAnalysis,ud:()=>Analysis,xR:()=>Analyses})
var a=n(440281),i=n.n(a),r=n(884155),s=n(531041),o=n(232606),l=n(812651),c=n(955836),d=n(763661),u=n(968653),m=n(875091),p=n(279785),h=n(730216),E=n(432128),S=n(132814),T=n(48047),g=n(926025),f=n(973606),I=n(467607)
function ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class Analysis extends i().Model{defaults(){return{created_at:(new Date).toISOString(),type:"analyses"}}static parseAnalysis(e){switch(e.analysis_type){case"digest":return new DigestAnalysis(e,{parse:!0})
case"alignment":return new AlignmentAnalysis(e,{parse:!0})
case"trace":return new TraceAnalysis(e,{parse:!0})
default:throw new Error(`Unsupported analysis type: ${e.analysis_type}`)}}parse(e){throw new Error("Generic analysis cannot parse response")}omitted(){return[]}toJSON(){return s.default.omit(this.attributes,...Array.from(this.omitted()))}}class DigestAnalysis extends Analysis{defaults(){return s.default.extend(super.defaults(),{analysis_type:m.Nu,provider:E.Z.get(f.n$.PROVIDER)})}provider(){return p.p_(this.get("enzymes"),this.get("provider"))}omitted(){return["fragments"]}parse(e){null!=e.fragments&&delete e.fragments
return e}}class TraceAnalysis extends Analysis{defaults(){return s.default.extend(super.defaults(),{analysis_type:m.je})}parse(e){return e}}class AlignmentAnalysis extends Analysis{isReallyBig(){return this.get("alignments").length>30}defaults(){return s.default.extend(super.defaults(),{analysis_type:m.xy,alignmentType:null,alignments:null,attachments:[],versionId:null,name:null,shouldRealign:!1,alignmentComments:null})}omitted(){return["alignmentComments","attached_file_count"]}name(){return this.get("name")}static insertGaps(e,t){return new l.GapSequence(e.toJSON(),{alignedBases:t})}initialize(e,t){this.registerListeners()}registerListeners(){const addListener=()=>{this.listenTo(this.get("alignments"),"update",(function(e){if(null==e||"consensus"!==e.get("type"))return this.set({shouldRealign:!0})}))
this.listenTo(this.get("alignments"),"sequenceVersionUpdate",((e,t)=>{(0,o.hu)(null!=t.versionId,"sequenceVersionUpdate triggered without versionId")
this.set({versionId:t.versionId})}))}
this.listenTo(this,"change:alignments",addListener)
null!=this.get("alignments")&&addListener()}getMasterSequence(){return this.get("alignments").findWhere({type:this.get("alignmentType")}).get("sequence")}clustalFormat(){let e=""
const addLine=t=>e+=`${t}\n`
addLine(`CLUSTALW ${this.name()}`)
addLine("")
const t=this.get("alignments").filter((e=>"consensus"!==e.get("type")))
if(0===t.length)return""
const n=3+s.default.max(s.default.map(t,(e=>e.get("sequence").name().length))),a=this.get("alignments").seqLength()
for(var i=0,r=i,o=a/60,l=0<=o;l?i<o:i>o;l?i++:i--,r=i){var c,d,u=60*r,m=Math.min(u+60,a)
s.default.each(t,(e=>{const t=e.get("sequence"),a=t.name().replace(" ","_")
return addLine(`${a+Array(1+n-a.length).join(" ")+t.bases().slice(u,m)} ${m}`)}))
let e=""
for(r=u,c=u<=(d=m);c?r<d:r>d;c?r++:r--)1===s.default.unique(s.default.map(t,(e=>e.get("sequence").bases()[r].toLowerCase()))).length?e+="*":e+=" "
addLine(Array(1+n).join(" ")+e)
addLine("")}return e}fastaFormat(){let e=""
const addLine=t=>e+=`${t}\n`,t=this.get("alignments").filter((e=>"consensus"!==e.get("type"))),n=this.get("alignments").seqLength()
for(const e of Array.from(t)){const t=e.get("sequence").bases()
addLine(`>${e.get("sequence").name()}`)
for(let e=0,a=n/80,i=0<=a;i?e<a:e>a;i?e++:e--){const a=80*e,i=Math.min(a+80,n)
addLine(t.slice(a,i))}}return e}setVotes(e,t){const n=t.findWhere({type:e}),a=s.default.without(t.models,n),i=Array.from(a).map((e=>e.get("sequence")))
return n.set({votes:new VoteData({sequence:n.get("sequence"),voterSequences:i})})}parse(e,t){if(t&&null!=t.parse&&!t.parse)return null
if(null!=e.alignments){e.alignments=new AlignmentCollection(Array.from(e.alignments).map((e=>new Alignment(e,{parse:!0}))))
this.setVotes(e.alignmentType,e.alignments)}e.alignmentComments=new d.R(e.alignment_comments||[],{analysisID:e.id})
delete e.alignment_comments
return e}unload(){this.stopAllListeners()}getUpdateJSONURL(){return`${this.url()}/json`}toJSON({patch:e,pickSequenceFields:t,url:n}){const a=super.toJSON()
if(n===this.getUpdateJSONURL())return s.default.omit(a,"analysis_type","created_at","id","name","sequence_id")
if(null==t){a.patch_json=!1
return a}(0,o.hu)(e)
let i=a.alignments.toJSON()
i=(()=>{const e=[]
for(let n of Array.from(i)){n=s.default.pick(n,"sequence")
n.sequence=s.default.pick(n.sequence.toJSON(),...Array.from(t))
e.push(n)}return e})()
const r={alignments:i}
r.patch_json=null!=t
return r}toHistoryState(){return(0,r.fromJS)((0,h.Z)(this.toJSON({})))}stopAllListeners(){this.stopListening()
__guard__(this.get("alignments"),(e=>e.stopAllListeners()))}}class Alignment extends i().Model{defaults(){return{trimStart:null,trimEnd:null,sequence:null,trace:null,votes:null,type:null,existingSequence:null}}stopAllListeners(){this.stopListening()
this.get("sequence").stopAllListeners()}initialize(e,t){this.listenTo(this.get("sequence"),"sequenceVersionUpdate",(function(...e){return this.trigger("sequenceVersionUpdate",this,...Array.from(e))}))
this.listenTo(this.get("sequence"),"insert",(function(...e){return this.trigger("insert",this,...Array.from(e))}))
this.listenTo(this.get("sequence"),"delete",(function(...e){return this.trigger("delete",this,...Array.from(e))}))
this.listenTo(this.get("sequence"),"replace",(function(...e){return this.trigger("replace",this,...Array.from(e))}))
this.listenTo(this.get("sequence"),"toggleCase",(function(...e){return this.trigger("toggleCase",this,...Array.from(e))}))
this.listenTo(this.get("sequence"),"save",(function(){return this.collection.trigger("save")}))
return this.listenTo(this.get("sequence"),"updateTrim",(function(e,t){this.set({trimStart:e,trimEnd:t})
return this.trigger("debouncedUpdate")}))}parse(e){e.sequence.translations=null!=e.sequence.translations?e.sequence.translations.filter((({end:e})=>null!=e)):void 0
if(null==e.sequence.bases&&e.sequence.parts.length>0){(0,o.Gp)(!1,`Received an alignment (sequence name=${e.sequence.name}) with parts but no bases`)
e.sequence.bases=e.sequence.parts.map((e=>e.raw_bases)).join("")}const t=_objectSpread(_objectSpread({},e.sequence),{},{type:e.sequence.sequence_type,nucleotideType:e.sequence.sequence_type===I.uS.DOUBLE_STRANDED?c.Wy.DNA:c.Wy.RNA})
e.sequence=new l.GapSequence(t,{parse:!0})
const{sequence:n}=e
null!=e.trace&&(e.trace.alignedSequence=e.sequence)
e.trace=null!=e.trace?new TraceData(e.trace):void 0
return e}hasDataAt(e){return this.get("sequence").bases()[e]!==c.P8||__guard__(this.get("trace"),(t=>t.hasDataAt(e)))}toJSON(){return s.default.omit(this.attributes,"alignmentComments","votes")}}class AlignmentCollection extends i().Collection{static initClass(){this.prototype.model=Alignment}initialize(e){this.listenTo(this,"delete",this.handleDelete)
this.listenTo(this,"insert",this.handleInsert)
this.listenTo(this,"replace",this.handleReplace)
this.listenTo(this,"toggleCase",this.handleToggleCase)
this.listenTo(this,"destroy",this.handleAlignmentDeletion)
this.debouncedUpdate=(0,g.D)(s.default.bind(this.update,this),400)
this.listenTo(this,"debouncedUpdate",this.debouncedUpdate)}stopAllListeners(){this.stopListening()
this.each((e=>e.stopAllListeners()))}update(e){this.trigger("update")
return null!=e?e.trigger("updateRow"):void 0}invalidateLineRanges(){return Array.from(this.models).map((e=>e.get("sequence").trigger("invalidateLineRanges")))}renderLineRanges(e){if(["consensus","template"].includes(e.get("type")))return(()=>{const t=[]
for(const n of Array.from(this.models))n!==e?t.push(n.get("sequence").trigger("renderLineRanges")):t.push(void 0)
return t})()}handleAlignmentDeletion(e){this._handleRemovingGaps(0,this.seqLength())
return e.get("sequence").trigger("delete",e.get("sequence"))}seqLength(){return this.at(0).get("sequence").bases().length}handleToggleCase(e,t,n,a,i){null==i&&(i={})
e.get("sequence").changeCase(t,n,a)
return this.update(e)}handleInsert(e,t,n,a){null==a&&(a={})
this.invalidateLineRanges()
this._handleInsert(e,t,n,a)
e.get("sequence").trigger("revote")
return this.update(e)}handleDelete(e,t,n,a){null==a&&(a={})
this.invalidateLineRanges()
this._handleDelete(e,t,n)
this._handleRemovingGaps(t,n)
this.renderLineRanges(e)
e.get("sequence").trigger("revote")
return this.update(e)}handleReplace(e,t,n,a,i){null==i&&(i={})
this.invalidateLineRanges()
this.without(e)
const r=e.get("sequence").bases().length,s=S.length(t,n,r)
if(a.length===s){this._handleStrictReplace(e,t,n,a,i)
this.renderLineRanges(e)}else if(a.length<s){const s=S.mod(t+a.length,r)
this._handleStrictReplace(e,t,s,a,i)
this._handleDelete(e,s,n)}else{this._handleStrictReplace(e,t,n,a.slice(0,s),i)
this._handleInsert(e,t+s,a.slice(s),i)}e.get("sequence").trigger("revote")
return this.update(e)}_handleInsert(e,t,n,a){null==a&&(a={})
const i=this.without(e),r=Array(n.length+1).join("-")
s.default.each(i,(e=>{e.get("sequence").insertBases(t,r)
__guard__(e.get("trace"),(e=>e.insert(t,r)))
return e.get("sequence").trigger("inserted",t,n)}))
const o=e.get("sequence")
o.insertBases(t,n,a)
o.trigger("inserted",t,n)
return __guard__(e.get("trace"),(e=>e.insert(t,n)))}_handleDelete(e,t,n){const a=e.get("sequence"),i=S.length(t,n,a.bases().length),r=Array(i+1).join("-")
return a.replaceBases(t,n,r)}_handleStrictReplace(e,t,n,a,i){null==i&&(i={})
const r=e.get("sequence"),s=r.length();(0,o.hu)(S.length(t,n,s)===a.length,`handle strict replace lengths must be equal: ${t}, ${n}, ${r.length()}, ${a}`)
return r.replaceBases(t,n,a)}_handleRemovingGaps(e,t){const n=this.seqLength()
let a=e
e>=t&&(t+=n)
let i=[]
for(;a<t;){this.every((e=>!e.hasDataAt(a)))&&i.push(a)
a++}i=s.default.sortBy(i,(e=>-e))
return Array.from(i).map((e=>this.each((t=>{t.get("sequence").deleteBases(e,e+1)
__guard__(t.get("trace"),(t=>t.deleteIndex(e)))
return t.get("sequence").trigger("deleted",e,e+1)}))))}}AlignmentCollection.initClass()
class VoteData extends i().Model{defaults(){return{votes:null,sequence:null,voterSequences:[]}}initialize(e,t){this._calcVotes()
const{length:n}=this.get("sequence").bases()
for(var a of Array.from(this.get("voterSequences")))(0,o.hu)(a.bases().length===n,"All sequences must be of the same length!")
for(a of Array.from(this.get("voterSequences"))){this.listenTo(a,"revote",this._calcVotes)
this.listenTo(a,"delete",this.handleDeleteSequence)}return this.listenTo(this.get("sequence"),"revote",this._calcVotes)}handleDeleteSequence(e){this.set("voterSequences",s.default.without(this.get("voterSequences"),e))
return this._calcVotes()}_calcVotes(){const e=[],t=this.get("sequence"),n=t.bases()
for(let a=0;a<n.length;a++){const i=n[a]
let r=0
for(const e of Array.from(this.get("voterSequences"))){let n=e.bases()[a]
const s=t.get("nucleotideType")
s&&(n=(0,T.sanitize)(n,s))
n.toLowerCase()===i.toLowerCase()&&r++}e.push(r)}this.set({votes:e})
return this.trigger("change")}}class TraceData extends i().Model{defaults(){return{baseToColor:null,qualityScores:null,peakLocations:null,alignedSequence:null}}insert(e,t){let n,a
const i=this.get("baseToColor")
for(const r in i){const s=i[r]
n=(()=>{let e,n
const i=[]
for(a=0,n=t.length,e=0<=n;e?a<n:a>n;e?a++:a--)i.push([])
return i})()
s.splice(e,0,...Array.from(n))}n=(()=>{let e,n
const i=[]
for(a=0,n=t.length,e=0<=n;e?a<n:a>n;e?a++:a--)i.push(null)
return i})()
this.get("peakLocations").splice(e,0,...Array.from(n))
n=(()=>{let e,n
const i=[]
for(a=0,n=t.length,e=0<=n;e?a<n:a>n;e?a++:a--)i.push(null)
return i})()
return this.get("qualityScores").splice(e,0,...Array.from(n))}deleteIndex(e){let t=null
s.default.each(this.get("baseToColor"),(n=>t=n.splice(e,1)[0]))
this.get("qualityScores").splice(e,1)
this.get("peakLocations").splice(e,1)
return __range__(e,this.get("peakLocations").length,!1).map((e=>this.get("peakLocations")[e]-=t.length))}deleteIndices(e,t){const n=this.get("qualityScores").slice(e,t)
if(s.default.compact(n).length>0){const t=n.map(((e,t)=>({value:e,index:t}))).filter((e=>null!=e.value)),a=t[0].index+e,i=t[t.length-1].index+e
s.default.compact(this.get("qualityScores").slice(0,a)).length,s.default.compact(this.get("qualityScores").slice(0,i)).length}let a=null
s.default.each(this.get("baseToColor"),(n=>a=n.splice(e,t-e)))
this.get("qualityScores").splice(e,t-e)
this.get("peakLocations").splice(e,t-e)
const{length:i}=s.default.flatten(a)
return __range__(e,this.get("peakLocations").length,!1).map((e=>this.get("peakLocations")[e]-=i))}hasDataAt(e){return s.default.some(this.get("baseToColor"),(t=>t[e].length>0))}cloneWithoutGaps(){const e={}
for(const t in this.get("baseToColor"))e[t]=s.default.clone(this.get("baseToColor")[t])
const t=new TraceData({baseToColor:e,qualityScores:s.default.clone(this.get("qualityScores")),peakLocations:s.default.clone(this.get("peakLocations"))})
let n=0,a=0
for(;;){const e=this.get("alignedSequence").bases().slice(n).match(`${c.P8}+`)
if(null==e)break
a+=e.index
n=e.index+n+e[0].length
t.deleteIndices(a,a+e[0].length)}return t}toJSON(){return s.default.omit(this.attributes,"alignmentComments","alignedSequence")}}class Analyses extends u.ZP{static initClass(){this.prototype.model=Analysis
this.prototype.attributeName="analyses"}}Analyses.initClass()
function __guard__(e,t){return null!=e?t(e):void 0}function __range__(e,t,n){const a=[],i=e<t,r=n?i?t+1:t-1:t
for(let t=e;i?t<r:t>r;i?t++:t--)a.push(t)
return a}},259222:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(85758),i=n.n(a),r=n(531041),s=n(489174),o=n(921554)
class ColorPicker extends s.Z{static initClass(){this.prototype.className="color-picker"
this.prototype.events={"click .selector":"_changePalette"}}initialize(e){super.initialize({closeOnScroll:!0})
e&&({multiple:this.multiple}=e)
null!=this.model&&this.multiple&&this.listenTo(this.model,"closeColorPicker",this.hide)
this.coloredItem=void 0
this.colorPalette=o.C2
this._render(i().select(this.el))
const t=i().select(this.el)
t.on("mousedown",(()=>{i().event.stopPropagation()}))
t.append("input").attr("type","checkbox").property("checked",!0).on("click.color-picker",(()=>{i().event.stopPropagation()})).on("change.color-picker",(()=>{i().event.target.checked?this.colorPalette=o.C2:this.colorPalette=o.Cj
this._render(i().select(this.el))}))
return t.append("span").attr("class","new-palette").text("use new palette")}die(){this.stopListening()
this.undelegateEvents()
i().select(this.el).select("input").on(".color-picker",null)}_render(e){const t=r.default.chain(this.colorPalette).groupBy(((e,t)=>Math.floor(t/4))).values().value(),n=i().select(this.el).selectAll("div.row").data(t)
n.exit().remove()
n.enter().append("div").attr("class","row")
const css=(e,t)=>{let n,a
null!=this.coloredItem&&(n=i().rgb(e).toString()===i().rgb(this.coloredItem.get("color")).toString())
a=n?2:"mouseover"===t?1:0
return`background-color: ${e}; border: 2px solid ${i().rgb(e).darker(a).toString()}`},a=n.selectAll("div.col").data((e=>e))
a.enter().append("div").attr("class","col col-md-3")
a.exit().remove()
return a.attr("data-color",(e=>e)).attr("style",(e=>css(e))).on("click",(e=>{i().event.stopPropagation()
this.$target.trigger("change",e)
null!=this.coloredItem&&this.coloredItem.set({color:e})
null!=this.coloredItem&&this.coloredItem.trigger("colorPickerChange")
return null!=this.model?this.model.trigger("colorPickerChange",i().event,e):void 0})).on("mouseover",(function(e){return i().select(this).attr("style",(e=>css(e,"mouseover")))})).on("mouseleave",(function(e){return i().select(this).attr("style",(e=>css(e,"mouseleave")))}))}open(){this.multiple&&null!=this.model&&this.model.trigger("closeColorPicker")
super.open()
this.$target.before(this.overlay)
return this.el}close(e){null==e&&(e=!0)
super.close()
if(e)return this.$target.popover("hide")}update(e){this.coloredItem=e
return this._render(this.el)}attach(e,t,n,a){null==n&&(n=!1)
null==a&&(a="left")
e.popover({title:"Select Color",trigger:t,content:r.default.bind(this.open,this),placement:a,html:!0,container:n}).on("hide.bs.popover",r.default.bind(this.close,this,!1))
return this.$target=e}}ColorPicker.initClass()
const l=ColorPicker},15655:(e,t,n)=>{n.d(t,{C6:()=>StatusBarState,IW:()=>setState,Lh:()=>TemplateStatusBarState,Ls:()=>BulkAssemblyStatusBarState,PM:()=>SingleBufferStatusBarState,TH:()=>MixtureStatusBarState,Ve:()=>GridStatusBarState,Y$:()=>SequenceStatusBarState,Yz:()=>ProtocolStatusBarState,Z5:()=>setSelection,cj:()=>setNumBases,nJ:()=>hideOverlayMessage,o0:()=>MoleculeStatusBarState,ou:()=>SubtemplateStatusBarState,qu:()=>showOverlayMessage,tW:()=>EntryStatusBarState,v8:()=>setTimeoutMessage,vo:()=>ContainerStatusBarState,yG:()=>BasicFolderItemStatusBarState})
var a=n(440281),i=n.n(a)
function ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class StatusBarState extends i().Model{defaults(){return{splitWorkspace:!0,overlayMessage:null,timeoutMessage:null,numBuffers:2}}isWorkspaceSplit(){return this.get("splitWorkspace")}}class SingleBufferStatusBarState extends StatusBarState{defaults(){return{splitWorkspace:!1,numBuffers:1}}}class SequenceStatusBarState extends StatusBarState{defaults(){return _objectSpread(_objectSpread({},super.defaults()),{},{numBases:"--",meltingTemp:null})}}class ProtocolStatusBarState extends SingleBufferStatusBarState{}class EntryStatusBarState extends StatusBarState{}class TemplateStatusBarState extends StatusBarState{}class SubtemplateStatusBarState extends StatusBarState{}class BasicFolderItemStatusBarState extends StatusBarState{}class MixtureStatusBarState extends StatusBarState{}class MoleculeStatusBarState extends StatusBarState{}class BulkAssemblyStatusBarState extends StatusBarState{}class ContainerStatusBarState extends StatusBarState{defaults(){return _objectSpread(_objectSpread({},super.defaults()),{},{splitWorkspace:!0,numBuffers:2})}}class GridStatusBarState extends StatusBarState{defaults(){return _objectSpread(_objectSpread({},super.defaults()),{},{splitWorkspace:!0,numBuffers:2})}}let r=null
function setState(e){r=e
return r}function setSelection(e,t,n,a,i){return null!=r?r.set({selectionStart:e,selectionEnd:t,selectionLength:n,selectionGC:a,selectionMeltingTmp:i}):void 0}function showOverlayMessage(e){return null!=r?r.set({overlayMessage:e}):void 0}function hideOverlayMessage(){return null!=r?r.unset("overlayMessage"):void 0}function setTimeoutMessage(e){hideOverlayMessage()
null!=r&&r.unset("timeoutMessage",{silent:!0}).set({timeoutMessage:e})}function setNumBases(e){return null!=r?r.set("numBases",e):void 0}},820039:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(440281),i=n.n(a),r=n(250965),s=n.n(r)
class Tag extends i().Model{static initClass(){this.prototype._urlregex=/(https?:\/\/[^\s]+)/
this.prototype._doiregex=/\b(?:doi:)(10[.][0-9]{4,}(?:[.][0-9]+)*\/(?:(?!["&\'])\S)+)\b/i
this.prototype._pmidregex=/\bpmid:(\d{4,})\b/i}defaults(){return{name:null,value:null}}display(){return null!=this.get("value")?`${this.get("name")}:${this.get("value")}`:this.get("name")}renderValue(e){const t=this.get("value")
if(null!=t){let n,a
if(this._urlregex.test(t)){n=s()("<a>").text(t).attr("href",t).attr("rel","nofollow")
e.html(n)}else if(null!==(a=t.match(this._doiregex))){n=s()("<a>").text(t).attr("href",`http://dx.doi.org/${a[1]}`)
e.html(n)}else if(null!==(a=t.match(this._pmidregex))){n=s()("<a>").text(t).attr("href",`http://pubmed.org/${a[1]}`)
e.html(n)}else e.text(t)}return this}}Tag.initClass()
const o=Tag},712257:(e,t,n)=>{n.r(t)
n.d(t,{ExternalFileOptionsView:()=>ExternalFileOptionsView,ExternalFileTabState:()=>ExternalFileTabState,ExternalFileTabView:()=>ExternalFileTabView})
var a=n(440281),i=n.n(a),r=n(989526),s=n(573961),o=n(531041),l=n(766455),c=n(974913),d=n(676276),u=n(911525),m=n(342459),p=n(977774)
class ExternalFileTabState extends l.Xh{defaults(){return o.default.extend(super.defaults(),{title:"Preview",closeable:!1,externalFile:null,printOptions:[],preferenceKey:"external-file"})}externalFile(){return this.get("externalFile")}previewFile(){return this.get("previewFile")}printOptions(){return this.get("printOptions")}printHandler(){throw new Error("External files that are not entry protocols should not be printable")}updatePreviewType(e){this.externalFile().save({previewType:e},{patch:!0}).fail(c.ZP.notifyError)}}class ExternalFileOptionsView extends i().View{initialize(){this.listenTo(this.model.externalFile(),"change:previewType change:url",this.render)}render(){let e,t
if(null!=this.model.updateName){e=this.model.get("title")
t=e=>{this.model.set({title:e})
this.model.updateName(e)}}else{e=null
t=null}(0,d.A9)(r.createElement(p.Z,{availablePreviewTypes:this.model.externalFile().availablePreviewTypes(),name:e,previewType:this.model.externalFile().previewType(),updateName:t,updatePreviewType:e=>this.model.updatePreviewType(e),generateDownloadUrl:async e=>await(0,u.V)(this.model.externalFile().externalFileId(),this.model.externalFile().externalFileURL(),this.model.owningEntityApiId()),printHandler:this.model.printHandler.bind(this.model),printOptions:this.model.printOptions()}),this.el)
return this}remove(){s.unmountComponentAtNode(this.el)
return super.remove()}}class ExternalFileTabView extends i().View{static initClass(){this.prototype.className="external-file-wrapper buffer-tab buffer-tab--no-padding"}initialize(){this.listenTo(this.model.externalFile(),"change:previewType change:url",this.render)}render(){let e,t,n
if(null!=this.model.previewFile()){({url:t}=this.model.previewFile());({id:n}=this.model.previewFile());({previewType:e}=this.model.previewFile())}else{t=this.model.externalFile().externalFileURL()
n=this.model.externalFile().externalFileId()
e=this.model.externalFile().previewType()}const a=this.model.owningEntityApiId();(0,d.A9)(r.createElement(m.Z,{url:t,externalFileId:n,previewType:e,owningEntityApiId:a}),this.el)
return this}remove(){s.unmountComponentAtNode(this.el)
return super.remove()}}ExternalFileTabView.initClass()},123758:(e,t,n)=>{n.d(t,{F:()=>TourView,O:()=>Tour})
var a=n(440281),i=n.n(a),r=n(250965),s=n.n(r),o=n(683245),l=n.n(o),c=n(474541),d=n(531041),u=n(232606),m=(n(348920),n(974913)),p=(n(432128),n(468943))
n(17844)
function notifyTutorialEnd(){m.ZP.info("End the tutorial to start using Benchling.",{id:"tutorial-end"})}class Step extends i().Model{defaults(){return{include:!0,events:{},showNext:!1,before:null,clickBefore:null,showSequenceMap:!1,showGoldenGatePrimers:!1,showNotes:!1,showNewEntryProtocol:!1,modal:null,animation:!0,wait:null,start:null,overlay:!1,overlayed:[],overlayPaddingLeft:0,overlayPaddingRight:0,overlayPaddingTop:0,overlayPaddingBottom:0,includeTargetMargin:!0,scrollTo:null,scrollPaddingTop:100,overlayColor:null,scrollDelay:1e3,forceHome:!1,preventEarlyEnd:!1,clearOverlay:!1,title:null}}include(){const e=this.get("include")
return d.default.isFunction(e)?e():e}renderContent(){const e=(0,d.default)(this.attributes).result("content")
return l().sanitize((0,c.TU)(e))}}class Tour extends i().Collection{static initClass(){this.prototype.model=Step}initialize(){return this.stepNum=0}next(e){let t
t=null!=e?this.indexOf(this.get(e))+1:0
for(let e=t;e<this.length;e++){const t=this.at(e)
this.stepNum++
if(t.include())return t}return null}}Tour.initClass()
class TourView extends i().View{static initClass(){this.prototype.el="body"}initialize({showRevisitMessage:e,onFinish:t}){this.showRevisitMessage=e
this.onFinish=t
this.handleBackBtn=this.handleBackBtn.bind(this)
this.defaultEvents={"click .js-help-exit-early":"kill","click .js-help-done":"finish"}
this.stepTotal=this.collection.length
this.alive=!0
this.step=null
this.showRevisitMessage=this.showRevisitMessage||!1
window.addEventListener("popstate",this.handleBackBtn)}handleBackBtn(){this.kill()}next(){this.removeOldState();(null!=this.step?this.step.has("next"):void 0)&&this.step.get("next").apply(this)
null!=this.step&&p.j("onboarding_tour","advanced",{tour:"navigation",tourOrigin:"checklist_sidepanel",numberOfSteps:6,stepNumber:this.step.get("forceCount")+1,stepTitle:this.step.get("title"),object:"button",objectText:this.step.get("showNext")?"Next":"Get Started!",eventLastModified:"FY21_Q1a2"})
this.step=this.collection.next(null!=this.step?this.step.cid:void 0)
this.undelegateEvents()
if(null!=this.step){null!=this.step.get("start")&&this.step.get("start").apply(this)
const openStep=()=>{let e,t,a
null!=this.step.get("before")&&this.step.get("before").apply(this)
if(this.step.has("scrollTo")){if(0===s()(this.step.get("scrollTo")).length){(0,u.Gp)(!1,`Tutorial step failed: ${this.step.get("content")}`)
return}a=s()(this.step.get("scrollTo")).offset().top-this.step.get("scrollPaddingTop")
s()("body").stop(!0).animate({scrollTop:a},this.step.get("scrollDelay"))}if(null!=this.step.get("options")){const e=d.default.find(this.step.get("options"),(e=>null!=s()(e.target)[0]))
this.step.set("target",e.target)
this.step.set("content",(0,d.default)(e).result("content"))}e=this.step.get("html")?this.step.get("content"):s()("<p>").html(this.step.renderContent())
const i=s()("<div>").addClass("help-popover").append(e),r=this.step.get("forceCount")||this.collection.stepNum,o=this.step.get("forceTotal")||this.stepTotal
let l,c
const m=s()("<div>").addClass("u-vertical-center-items u-lr-split"),p=s()("<div>")
if(!this.step.get("introStep"))for(let e=1;e<o+1;e++){const t=s()("<div>").addClass("navTour-dot")
e===r&&t.addClass("is-active")
p.append(t)}m.append(p)
if(r===o){l="button button--medium button--primary js-help-done"
c="Get Started!"}else{l="button button--medium button--primary continue"
c=0===r?"Let's Go!":"Next"}const h=s()('<button type="button">').addClass(l).text(c)
m.append(h)
i.append(m)
const E=d.default.clone(this.defaultEvents)
this.delegateEvents(d.default.extend(E,this.step.get("events")))
this.step.get("showNext")&&r!==o&&(E["click .continue"]="next")
this.delegateEvents(E)
let S=null
const T=n(699418).ZP
if(this.step.get("showSequenceMap"))S=n(893424).Z
else if(this.step.get("showGoldenGatePrimers")){S=n(920119).Z}else if(this.step.get("showNotes")){S=n(707870).Z}else S=this.step.get("showNewEntryProtocol")?n(95018).NewEntryProtocolTabState:null
if(null!=S){let e
const n=s()("#statusbar button.split")
n.hasClass("active")||n.click()
const a=T.get().findWhere({active:!0}),i=a.findTab(S)
if(null==i){(0,u.Gp)(!1,`Tutorial step failed: ${this.step.get("content")}`)
return}i.set({active:!0})
if(a.buffers().at(0).tabs().contains(i)){t="right"
e=1}else{t="left"
e=2}this.target=s()(`.buffer-container:nth-child(${e})`)}else{this.target=this.$el.find(this.step.get("target"))
null!=this.step.get("first")&&(this.target=this.target.first())
t=this.step.get("placement")}i.toggleClass("kill-on-split",null!=S)
if(this.step.get("overlay")){const e=this.target
if(0===e.length){(0,u.Gp)(!1,`Tutorial step failed: ${this.step.get("content")}`)
return}this.step.createOverlays=d.default.bind((function(){let t,n,i,r
s()(`.${this.cid}`).remove()
const o=s()(document).width(),l=s()(document).height()
i=window.test_user?[[0,0,o,l,"transparent"]]:[]
let c=o,m=0,p=l,h=0
const E=d.default.map(this.get("overlayed"),(e=>s()(e))),S=this.get("includeTargetMargin")
for(const i of Array.from(E.concat([e]))){const e=i.offset();(0,u.hu)(null!=e,`Tutorial step failed: ${this.get("content")} ($target.offset() undefined)`);({top:a}=e);({left:n}=e)
r=i.outerWidth(S)
t=i.outerHeight(S)
c=Math.min(c,n)
m=Math.max(m,n+r)
p=Math.min(p,a)
h=Math.max(h,a+t)}c-=this.get("overlayPaddingLeft")
m+=this.get("overlayPaddingRight")
p-=this.get("overlayPaddingTop")
h+=this.get("overlayPaddingBottom")
i=i.concat([[0,0,o,p,this.get("overlayColor")],[p,0,c,h-p,this.get("overlayColor")],[p,m,o-m,h-p,this.get("overlayColor")],[h,0,o,l-h,this.get("overlayColor")]])
this.get("clearOverlay")&&i.push([p,c,m-c,h-p,null,0])
return(()=>{const e=[]
for(const t of Array.from(i)){const[n,a,i,r,o,l]=Array.from(t),c=s()("<div>").addClass("overlay").addClass(this.cid).click((e=>{e.stopPropagation()
notifyTutorialEnd()}))
c.css({position:"absolute",top:n,left:a,width:i,height:r})
null!=o&&c.css("background-color",o)
null!=l&&c.css("opacity",l)
e.push(s()("body").prepend(c))}return e})()}),this.step)
this.step.createOverlays()
s()(window).on("resize",this.step.createOverlays)
s()(document).on(`keydown.${this.step.cid}`,(()=>{notifyTutorialEnd()
return!1}))}return d.default.defer((()=>{let e
const n=this.step.get("modal"),showPopover=n=>{const a=null!=n?n:"body"
this.target.popover({placement:t,content:s()("<div>").html(i).html(),html:!0,trigger:"manual",container:a,title:null!=(e=this.step.get("title"))?e:`Step ${r} of ${o}`,animation:this.step.get("animation"),template:(()=>{const e=`popover js-tutorial-popover navTour ${this.step.get("extraPopoverClass")}`,t=r===o?"js-help-done":"js-help-exit-early"
return`<div class='${e}' role='tooltip'>\n  ${this.step.get("hideArrow")?"<div></div>":'<div class="arrow"></div>'}\n  <div class='navTour-header u-lr-split'>\n    ${this.step.get("hideTitle")?"<div></div>":'<div class="popover-title navTour-title"></div>'}\n    <div class='navTour-close ${t}'>\n      <svg class="navTour-close-svgIcon">\n        <use\n          xmlns:xlink="http://www.w3.org/1999/xlink"\n          xlink:href="#close_00bb7a61634e1d067e6c089c38aaad07"\n        >\n        </use>\n      </svg>\n    </div>\n  </div>\n  <div class='popover-content navTour-content'></div>\n</div>`})()})
this.target.popover("show")
if(null!=n)return s()(n).find(".popover").css("z-index",1060)}
null!=n?showPopover(n):showPopover()
this.step.has("top")&&s()(".popover").css({top:this.step.get("top")})
this.step.has("left")&&s()(".popover").css({left:this.step.get("left")})
if(this.step.has("class"))return s()(".popover").addClass(this.step.get("class"))}))}
return this.step.has("wait")?s()(this.step.get("wait")).promise().done(openStep):this.step.has("waitPromise")?this.step.get("waitPromise")().done(openStep):openStep()}return this.remove()}removeOldState(){if(null!=this.step){this.target.popover("destroy")
this.target.data("bs.popover",null)
if(this.step.get("overlay")){s()(`.${this.step.cid}`).remove()
this.step.createOverlays&&s()(window).off("resize",this.step.createOverlays)
return s()(document).off(`keydown.${this.step.cid}`)}}}finish(){"function"==typeof this.onFinish&&this.onFinish()
this.kill()
null!=this.step&&p.j("onboarding_tour","advanced",{tour:"navigation",tourOrigin:"checklist_sidepanel",numberOfSteps:6,stepNumber:this.step.get("forceCount")+1,stepTitle:this.step.get("title"),object:"button",objectText:this.step.get("showNext")?"Next":"Get Started!",eventLastModified:"FY21_Q1a2"})}kill(e=!0){(null!=this.step?this.step.has("kill"):void 0)&&this.step.get("kill").apply(this)
e&&p.j("onboarding_tour","closed",{tour:"navigation",tourOrigin:"checklist_sidepanel",numberOfSteps:6,stepNumber:this.step.get("forceCount")+1,stepTitle:this.step.get("title"),object:"button",objectText:"X",eventLastModified:"FY21_Q1a2"})
this.removeOldState()
this.showRevisitMessage&&m.ZP.info("If you'd like to revisit a tutorial, you can find it by opening the help page from the top right corner.")
this.undelegateEvents()
this.remove()
return this.alive=!1}remove(){this.stopListening()
window.removeEventListener("popstate",this.handleBackBtn)
return this}}TourView.initClass()},161540:(e,t,n)=>{n.d(t,{M1:()=>BroadSetInstitutionModal,Q$:()=>BroadInfoLink,TY:()=>BroadGoogleAuthModal})
var a=n(205986),i=n(602652),r=n.n(i),s=n(989526),o=n(206305),l=n(465428),c=n(629656),d=n(675649),u=n(902323),m=n(788836),p=n(87209),h=n(974913),E=n(432128),S=n(757389)
function dismissModal(e){c.xv(e)
E.Z.set(u.Qp.DISMISSED_BROAD_INSTITUTION_MODAL,(new Date).toISOString())}function BroadBasicModalInfo(){return s.createElement("div",null,s.createElement("div",{className:"text-center institution-modal-header-image"},s.createElement("img",{src:(0,S.Z)("/static/img/institution/broad-institute.png"),height:48,className:"u-spacing-right"}),s.createElement("img",{src:(0,S.Z)("/static/img/benchling-wordmark.svg"),height:48,className:"u-spacing-left"})),s.createElement("p",null,"The Broad Institute has partnered with Benchling to provide a more"," ",s.createElement("strong",null,"integrated, secure experience")," for its scientists."),s.createElement("p",null,"Verified Broad accounts use Benchling within the security and backup requirements of the Broad Institute by gaining the following benefits:"),s.createElement("ul",null,s.createElement("li",null,"Projects will ",s.createElement("strong",null,"automatically be backed up")," to Broad servers, eliminating the need for periodic data exports"),s.createElement("li",null,"Direct login through ",s.createElement("strong",null,"Google authentication")," with a Broad email is enforced"),s.createElement("li",null,"Basic information about scientist accounts (email address, organizations, activity) will be periodically sent to the Broad Institute to ensure quality of Benchling experience")))}function BroadBaseModal(e){return s.createElement(a.ZP,{enableRedesign:!1,title:"Broad Institute",buttons:e.buttons,closeable:!1},s.createElement(BroadBasicModalInfo,null),e.children)}BroadBaseModal.propTypes={buttons:r().array.isRequired,children:r().node}
function BroadSettingsModal(){return s.createElement(BroadBaseModal,{buttons:[{text:"OK",style:"default",onClick:()=>c.xv(u.mu)}]})}function BroadGoogleAuthModal(){return s.createElement(BroadBaseModal,{buttons:[{text:"Link Broad Account",style:"primary",onClick:()=>d.Fr(u.zl)},{text:"I am a Guest",style:"default",onClick:()=>{dismissModal(u.To.BROAD_GOOGLE_AUTH_MODAL_KEY)}}]},s.createElement("div",null,"If you are a member of the Broad institute, link your Broad account as your Google email."))}function BroadSetInstitutionModal(){return s.createElement(BroadBaseModal,{buttons:[{text:"Join Broad",style:"primary",onClick:()=>function setInstitution(e,t){p.$Z()
o.F(m.Z.currentUser().id,e).done((e=>{h.ZP.success(`You have been added to ${e.name}.`)
l.zz(m.Z.currentUserId)
c.xv(t)})).fail(h.ZP.notifyError).always((()=>p.Cp()))}(u.zl,u.To.BROAD_SET_INSTITUTION_MODAL_KEY)},{text:"Not now",style:"default",onClick:()=>{dismissModal(u.To.BROAD_SET_INSTITUTION_MODAL_KEY)}}]},s.createElement("div",null,"To get started, connect your account to the Broad institute."))}function BroadInfoLink(){return s.createElement("div",null,s.createElement("p",null,"As a member of the Broad Institute, you have special"," ",s.createElement("a",{onClick:()=>c.bA(u.mu,s.createElement(BroadSettingsModal,null))},"security and privacy features")," ","enabled on your account."))}},508085:(e,t,n)=>{n.d(t,{RN:()=>updateIntercomOnRouteChange,_9:()=>clearIntercomUser,sW:()=>registerIntercomHandlers})
var a=n(250965),i=n.n(a),r=n(531041),s=n(408783),o=n(232606),l=n(787004),c=n(947730)
function clearIntercomUser(){window.Intercom&&window.Intercom("shutdown")}function updateIntercomOnRouteChange(){window.Intercom&&window.Intercom("update")
if("#end-session"===window.location.hash){!function _restartIntercom(){r.default.delay((()=>{clearIntercomUser()
window.Intercom&&window.Intercom("boot",window.intercomSettings)}),2e3)}()
window.location.hash=""}i()(".sign-out").click(clearIntercomUser)}function registerIntercomHandlers(){if((0,o.Gp)(window.Intercom,"Expected Intercom to already be initialized.")){window.Intercom("onShow",(()=>{c.Z.dispatch({actionType:l.hQf})}))
window.Intercom("onUnreadCountChange",(e=>{c.Z.dispatch({actionType:l._JT,unreadCount:e})}))
window.Intercom("onHide",(()=>{s.nu()}))}}},399980:(e,t,n)=>{n.r(t)
n.d(t,{EmptyEntryOptionsView:()=>u,EmptyEntryTabState:()=>EmptyEntryTabState,EmptyEntryTabView:()=>EmptyEntryTabView})
var a=n(440281),i=n.n(a),r=n(250965),s=n.n(r),o=n(989526),l=n(531041),c=n(766455)
const{DOM:d}=o
class EmptyEntryTabState extends c.Xh{defaults(){return l.default.extend(super.defaults(),{title:"No Protocols",closeable:!1,options:!1,showInNavBar:!1,preferenceKey:"empty-entry"})}}class EmptyEntryTabView extends i().View{static initClass(){this.prototype.className="buffer-tab"}render(){this.$el.empty().append(s()("<div>").addClass("buffer-tab-emptyEntryText").text("The entry has no protocols."))
return this}}EmptyEntryTabView.initClass()
const u=null},537073:(e,t,n)=>{n.r(t)
n.d(t,{ExternalEntryProtocolOptionsView:()=>o,ExternalEntryProtocolTabState:()=>ExternalEntryProtocolTabState,ExternalEntryProtocolTabView:()=>s})
var a=n(356147),i=n(712257),r=n(138232)
const{ExternalFileTabView:s,ExternalFileOptionsView:o}=i
class ExternalEntryProtocolTabState extends r.Z{initialize(){super.initialize(...arguments)
this.set({externalFile:new a.Z(this.protocol().externalFile),owningEntityApiId:this.file().id})
this.listenTo(this.file(),"change",this.syncFromStore)
this.on("change:protocolCid",this.syncFromStore)}externalFile(){return this.get("externalFile")}previewFile(){return null}owningEntityApiId(){return this.get("owningEntityApiId")}updateName(e){this.updateProtocol({$merge:{name:e}})}updatePreviewType(e){this.updateProtocol({externalFile:{$merge:{previewType:e}}})}syncFromStore(){this.externalFile().set(function __guard__(e,t){return null!=e?t(e):void 0}(this.protocol(),(e=>e.externalFile)))}}},95018:(e,t,n)=>{n.r(t)
n.d(t,{NewEntryProtocolOptionsView:()=>D,NewEntryProtocolTabState:()=>NewEntryProtocolTabState,NewEntryProtocolTabView:()=>NewEntryProtocolTabView})
var a=n(440281),i=n.n(a),r=n(764403),s=n.n(r),o=n(531041),l=n(848640),c=n(468943),d=n(459830),u=n(922633),m=n(750962),p=n(343748),h=n(602652),E=n.n(h),S=n(345619),T=n(989526),g=n(573961),f=n(36424),I=n(205986),A=n(215564),y=n(629656),_=n(676276),C=n(766455),R=n(974913),N=n(443626),O=n(788836),b=n(191193),v=n(926025),P=n(64558)
function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class NewEntryProtocolTabState extends C.Xh{defaults(){return o.default.extend(super.defaults(),{title:"Add Protocol",closeable:!1,options:!0,showInNavBar:!0,draggable:!1,preferenceKey:"new-entry-protocol"})}file(){return this.get("file")}addProtocol(e){return this.file().addProtocol(e)}}class FileUploadModal extends T.Component{render(){return T.createElement(I.ZP,{title:"Import protocols from file",onRequestClose:this.props.onRequestClose,onRequestSubmit:()=>{this.refs.fileInput.handleUpload({uploadComplete:P.ZT,allComplete:this.props.onRequestClose})},buttons:[{text:"Import",submit:!0}]},T.createElement(A.Z,{upload:this.props.fileHandler,ref:"fileInput"}))}}_defineProperty(FileUploadModal,"propTypes",{fileHandler:E().func.isRequired,onRequestClose:E().func})
const L="FileUploadModal"
class ProtocolSearchResult extends T.Component{render(){const{result:e}=this.props
return T.createElement("div",{className:"u-pointer new-entry-protocol-result",onClick:t=>this.props.itemClickHandler(t,e)},T.createElement("div",null,T.createElement("span",{className:"pull-right u-small-text new-entry-protocol-result-date"},T.createElement("strong",null,(0,b.Z)(e.modified_at,{days:7,showTime:!1}))),T.createElement(f.Z,{icon:d.PROTOCOL,className:"u-small-spacing-right"}),T.createElement("strong",null,e.name||"Untitled")),T.createElement("div",{className:"u-small-spacing-top u-small-text new-entry-protocol-description"},T.createElement(f.Z,{icon:"user",className:"u-tiny-spacing-right"}),T.createElement("span",null,null!=e.creator?(0,N.a)(e.creator):void 0)))}}_defineProperty(ProtocolSearchResult,"propTypes",{result:E().object.isRequired,itemClickHandler:E().func.isRequired})
class NewEntryProtocolTab extends T.Component{constructor(...e){super(...e)
_defineProperty(this,"state",{query:"",loading:!0,results:[]})
_defineProperty(this,"openFileUploadModal",(()=>{y.bA(L,T.createElement(FileUploadModal,{fileHandler:this.props.fileHandler,onRequestClose:()=>{y.xv(L)}}))}))
_defineProperty(this,"handleQueryChange",(e=>{this.setState({query:e.target.value,loading:!0})
this.searchDebounced()}))
_defineProperty(this,"search",(()=>{const e={q:this.state.query,filter:d.PROTOCOL}
p.yC(e,"newEntryProtocolTab").done((({data:e})=>{this._isMounted&&this.setState({loading:!1,results:e})})).fail((e=>{R.ZP.notifyError(e)
this._isMounted&&this.setState({loading:!1})}))}))
_defineProperty(this,"searchDebounced",(0,v.D)((()=>{this.search()}),250))}componentDidMount(){this._isMounted=!0
this.search()}componentWillUnmount(){this._isMounted=!1}render(){return T.createElement("div",null,T.createElement("div",{className:"text-center"},T.createElement("h4",{className:"new-protocol-header"},"Click on a protocol to add it to your entry or ",T.createElement("button",{onClick:this.openFileUploadModal,type:"button",className:"btn btn-af-primary"},"Import from File"))),T.createElement("div",null,T.createElement("input",{className:"new-entry-protocol-query u-width-full",value:this.state.query,onChange:this.handleQueryChange,placeholder:"Search your protocols"}),T.createElement("div",{className:s()({"is-searching":this.state.loading,"new-entry-protocol-results-wrapper":!0,"scrollbar-override":!0})},this.state.results.length?Array.from(this.state.results).map((e=>T.createElement(ProtocolSearchResult,{result:e,itemClickHandler:this.props.itemClickHandler,key:e.id}))):T.createElement("div",{className:"text-center faded u-spacing-top"},"No matching protocols found."))))}}_defineProperty(NewEntryProtocolTab,"propTypes",{fileHandler:E().func.isRequired,itemClickHandler:E().func.isRequired})
class NewEntryProtocolTabView extends i().View{static initClass(){this.prototype.className="new-entry-protocol buffer-tab buffer-tab--no-padding"}itemClickHandler(e,{id:t}){e.preventDefault()
S.Z.get(t).done((e=>{this.model.addProtocol(e)
c.j("lab_notebook","attached_protocol",{entry_id:this.model.file().id,protocol_id:e.id,user_created_protocol:e.creator.id===(t=O.Z.currentUser(),n=e=>e.id,null!=t?n(t):void 0),is_uploaded_protocol:!1})
var t,n
l.OZ(u.ZP.MODULES.ENTRY,u.ZP.ATTACH_PROTOCOL)})).fail(R.ZP.notifyError)}fileHandler(e){return m.cT(e).done((e=>{this.model.addProtocol({externalFile:e})
c.j("lab_notebook","attached_protocol",{entry_id:this.model.file().id,protocol_id:e.id,user_created_protocol:!0,is_uploaded_protocol:!0})
l.OZ(u.ZP.MODULES.ENTRY,u.ZP.ATTACH_PROTOCOL)})).fail(R.ZP.notifyError)}render(){(0,_.A9)(T.createElement(NewEntryProtocolTab,{user:O.Z.currentUser(),itemClickHandler:this.itemClickHandler.bind(this),fileHandler:this.fileHandler.bind(this)}),this.el)
return this}remove(){g.unmountComponentAtNode(this.el)
return super.remove()}}NewEntryProtocolTabView.initClass()
const D=null},344984:(e,t,n)=>{n.d(t,{WP:()=>P,fF:()=>EntryNoteView,j3:()=>TemplateNoteView,xU:()=>SubtemplateNoteView})
var a,i=n(602652),r=n.n(i),s=n(989526),o=n(531041),l=n(841996),c=n(967911),d=n(909410),u=n(56063),m=n(468991),p=n(858060),h=n(561887),E=n(52145),S=n(990658),T=(n(352858),n(713869)),g=n(318577),f=n(680259),I=n(751693),A=n(57985),y=n(356304),_=n(154378),C=n(785718),R=n(567284),N=n(212300),O=n(102385),b=n(901113),v=n(593382)
function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}const P=(0,N.$j)((function mapStateToProps(e,t){return(0,v.n)(e,t.fileId)}))((a=class NoteView extends s.PureComponent{constructor(...e){super(...e)
_defineProperty(this,"state",{cid:o.default.uniqueId("note-editor")})
_defineProperty(this,"getBannerMessage",(()=>{let e=this.props.banner
null==e&&this.props.documentEditorLock&&(0,v.Y)(this.props.documentEditorLock)&&(e=s.createElement(p.Z,{userId:this.props.documentEditorLock.userId}))
return e}))}componentDidMount(){if(null!=this.props.note){var e,t
null==(e=(t=this.props).onLoad)||e.call(t)}}componentDidUpdate(e,t){if(null!=this.props.note&&null==e.note){var n,a
null==(n=(a=this.props).onLoad)||n.call(a)}this.props.historyResetCount!==e.historyResetCount&&this.props.historyManager.reset()}render(){const e=!!this.props.documentEditorLock&&(0,v.Y)(this.props.documentEditorLock),t=this.props.locked||e
return null==this.props.note?s.createElement("div",null,"Loading..."):s.createElement(h.Z,{historyManager:this.props.historyManager,currentVersion:{note:this.props.note,structuredTableMappings:this.props.structuredTableMappings,title:this.props.title},restoreStateAndSelection:this.props.restoreStateAndSelection,renderWith:({metadataForRestore:e,storeState:n,restoreState:a,requestSelection:i,undoStoreState:r})=>s.createElement(T.Z,{afterEntry:this.props.afterEntry,banner:this.getBannerMessage(),beforeEntry:this.props.beforeEntry,cid:this.state.cid,cidIdMap:this.props.cidIdMap,printHandler:this.props.printHandler,title:this.props.title,titleBadge:this.props.titleBadge,hideTitle:null==this.props.title,updateTitle:this.props.updateTitle,note:this.props.note,registerObjects:this.props.registerObjects,getIdFromCid:this.props.getIdFromCid,updateNote:this.props.updateNote,fileId:this.props.fileId,humanId:this.props.humanId,templateId:this.props.templateId,fileType:this.props.fileType,fullScreen:this.props.fullScreen,minimalToolbar:this.props.minimalToolbar,locked:t,dirty:this.props.dirty,lockedFromExternalChange:this.props.lockedFromExternalChange,parentType:this.props.parentType,printOptions:this.props.printOptions,disableFormatting:this.props.disableFormatting,disableMaximizedTables:this.props.disableMaximizedTables,preview:this.props.preview,displayOptions:this.props.displayOptions,showTimestamps:this.props.showTimestamps,spellCheck:this.props.spellCheck,printLayout:this.props.printLayout,showTableOfContents:this.props.showTableOfContents,showPrintMargins:this.props.showPrintMargins,collaboratorIds:this.props.collaboratorIds,indexSlice:this.props.indexSlice,viewer:this.props.viewer,permissions:this.props.permissions,isConfig:this.props.isConfig,storeState:n,undoStoreState:r,restoreState:a,requestSelection:i,metadataForRestore:e})})}},_defineProperty(a,"propTypes",{afterEntry:r().node,beforeEntry:r().node,cidIdMap:r().object,note:r().object.isRequired,historyManager:r().object.isRequired,historyResetCount:r().number,title:r().string,titleBadge:r().node,updateTitle:r().func,dirty:r().bool,locked:r().bool.isRequired,fileId:r().string.isRequired,humanId:r().string,templateId:r().string,fileType:r().string.isRequired,fullScreen:r().bool.isRequired,onLoad:r().func,restoreStateAndSelection:r().func.isRequired,printOptions:r().array.isRequired,disableFormatting:r().bool,disableMaximizedTables:r().bool,preview:r().object,displayOptions:r().object,showTableOfContents:r().bool.isRequired,showTimestamps:r().bool.isRequired,spellCheck:r().bool.isRequired,printLayout:r().bool.isRequired,showPrintMargins:r().bool.isRequired,collaboratorIds:r().arrayOf(r().string),indexSlice:r().shape({start:r().number.isRequired,end:r().number.isRequired}),permissions:u.OD.isRequired,lockedFromExternalChange:r().bool,minimalToolbar:r().bool,isConfig:r().bool}),_defineProperty(a,"defaultProps",{fullScreen:!0}),a))
class EntryNoteView extends s.PureComponent{constructor(...e){super(...e)
_defineProperty(this,"state",{cid:o.default.uniqueId("note-editor"),historyManager:new S.Z})
_defineProperty(this,"restoreStateAndSelection",(({note:e,structuredTableMappings:t,title:n},a)=>{l.Z.revert(this.props.fileId,{note:e,structuredTableMappings:t,name:n},a)}))
_defineProperty(this,"printHandler",((e,t)=>{null==t&&(t=null)
switch(e){case d.dF.NOTE:l.Z.print(this.props.fileId,{showNote:!0,protocolCids:[],showTimestamps:this.props.showTimestamps})
break
case d.dF.ENTRY:l.Z.print(this.props.fileId,{showNote:!0,showTimestamps:this.props.showTimestamps})
break
case d.dF.SELECTION:l.Z.print(this.props.fileId,{showNote:!0,protocolCids:[],indexSlice:t,showTimestamps:this.props.showTimestamps})
break
default:throw new Error(`Unexpected print handler type ${(0,b.vE)(e)}`)}}))
_defineProperty(this,"updateNote",((e,t,n)=>{l.Z.updateNote(this.props.fileId,e,t,n)}))
_defineProperty(this,"registerObjects",(e=>{l.Z.registerObjects(this.props.fileId,e)}))
_defineProperty(this,"getIdFromCid",(e=>c.Z.getIdFromCid(this.props.fileId,e)))
_defineProperty(this,"updateTitle",(e=>{l.Z.setName(this.props.fileId,e)}))
_defineProperty(this,"_getTitleBadge",(()=>O.Z.hasEnterprisePlan()?s.createElement(f.ZP,{className:"noteEditor-reviewBadge",entryId:this.props.fileId,authors:this.props.authors,enableReviewLifecycle:(0,E.yR)()}):null))}render(){const e=!this.props.isLatest||!this.props.allowEdits
return s.createElement(P,o.default.defaults({beforeEntry:s.createElement(g.ZP,{entryId:this.props.fileId,locked:e,viewer:!1}),getIdFromCid:this.getIdFromCid,printHandler:this.printHandler,registerObjects:this.registerObjects,updateNote:this.updateNote,updateTitle:this.updateTitle,historyManager:this.state.historyManager,locked:e,restoreStateAndSelection:this.restoreStateAndSelection,printOptions:this.props.printOptions,collaboratorIds:this.props.collaboratorIds,titleBadge:this._getTitleBadge(),permissions:this.props.permissions},this.props))}}_defineProperty(EntryNoteView,"propTypes",{banner:r().string,fileId:r().string.isRequired,humanId:r().string,templateId:r().string,isLatest:r().bool.isRequired,allowEdits:r().bool.isRequired,printOptions:r().arrayOf(r().string),collaboratorIds:r().arrayOf(r().string).isRequired,permissions:u.OD,lockedFromExternalChange:r().bool.isRequired,authors:r().arrayOf(m.OP.isRequired)})
_defineProperty(EntryNoteView,"PRINT_OPTIONS",[d.dF.NOTE,d.dF.ENTRY,d.dF.SELECTION])
_defineProperty(EntryNoteView,"PRINT_OPTIONS_WITHOUT_PROTOCOLS",[d.dF.NOTE,d.dF.SELECTION])
class TemplateNoteView extends s.PureComponent{constructor(...e){super(...e)
_defineProperty(this,"state",{cid:o.default.uniqueId("note-editor"),historyManager:new S.Z})
_defineProperty(this,"restoreStateAndSelection",(({note:e,structuredTableMappings:t,title:n},a)=>{I.Z.revert(this.props.fileId,_objectSpread({name:{$set:n}},y.Z.entryVersionUpdate({$merge:{note:e,structuredTableMappings:t}})),a)}))
_defineProperty(this,"printHandler",((e,t)=>{null==t&&(t=null)
switch(e){case d.dF.NOTE:I.Z.print(this.props.fileId,{showNote:!0,protocolCids:[],showTimestamps:this.props.showTimestamps})
break
case d.dF.TEMPLATE:I.Z.print(this.props.fileId,{showNote:!0,showTimestamps:this.props.showTimestamps})
break
case d.dF.SELECTION:I.Z.print(this.props.fileId,{showNote:!0,protocolCids:[],indexSlice:t,showTimestamps:this.props.showTimestamps})
break
default:throw new Error(`Unexpected print handler type ${(0,b.vE)(e)}`)}}))
_defineProperty(this,"registerObjects",(e=>{I.Z.registerObjects(this.props.fileId,e)}))
_defineProperty(this,"getIdFromCid",(e=>A.Z.getIdFromCid(this.props.fileId,e)))
_defineProperty(this,"updateNote",((e,t,n)=>{I.Z.updateNote(this.props.fileId,e,n)}))
_defineProperty(this,"updateTitle",(e=>{I.Z.setName(this.props.fileId,e)}))}render(){return s.createElement(P,o.default.extend({},this.props,{getIdFromCid:this.getIdFromCid,printHandler:this.printHandler,registerObjects:this.registerObjects,updateNote:this.updateNote,updateTitle:this.updateTitle,historyManager:this.state.historyManager,locked:!this.props.isLatest||!this.props.allowEdits,lockedFromExternalChange:this.props.lockedFromExternalChange,restoreStateAndSelection:this.restoreStateAndSelection,printOptions:this.props.printOptions}))}}_defineProperty(TemplateNoteView,"propTypes",{banner:r().string,fileId:r().string.isRequired,isLatest:r().bool.isRequired,allowEdits:r().bool.isRequired,printOptions:r().arrayOf(r().string),lockedFromExternalChange:r().bool.isRequired,showTimestamps:r().bool.isRequired})
_defineProperty(TemplateNoteView,"PRINT_OPTIONS",[d.dF.NOTE,d.dF.TEMPLATE,d.dF.SELECTION])
_defineProperty(TemplateNoteView,"PRINT_OPTIONS_WITHOUT_PROTOCOLS",[d.dF.NOTE,d.dF.SELECTION])
class SubtemplateNoteView extends s.PureComponent{constructor(...e){super(...e)
_defineProperty(this,"state",{cid:o.default.uniqueId("note-editor"),historyManager:new S.Z})
_defineProperty(this,"restoreStateAndSelection",(({note:e,title:t},n)=>{_.Z.revert(this.props.fileId,_objectSpread({name:{$set:t}},R.Z.noteVersionUpdate({$merge:e})),n)}))
_defineProperty(this,"printHandler",((e,t)=>{null==t&&(t=null)
switch(e){case d.dF.NOTE:_.Z.print(this.props.fileId,{showNote:!0,protocolCids:[],showTimestamps:this.props.showTimestamps})
break
case d.dF.SELECTION:_.Z.print(this.props.fileId,{showNote:!0,protocolCids:[],indexSlice:t,showTimestamps:this.props.showTimestamps})
break
default:throw new Error(`Unexpected print handler type ${(0,b.vE)(e)}`)}}))
_defineProperty(this,"registerObjects",(e=>{_.Z.registerObjects(this.props.fileId,e)}))
_defineProperty(this,"getIdFromCid",(e=>C.Z.getIdFromCid(this.props.fileId,e)))
_defineProperty(this,"updateNote",((e,t)=>{_.Z.updateNote(this.props.fileId,e)}))
_defineProperty(this,"updateTitle",(e=>{_.Z.setName(this.props.fileId,e)}))}render(){return s.createElement(P,_extends({},this.props,{getIdFromCid:this.getIdFromCid,printHandler:this.printHandler,registerObjects:this.registerObjects,updateNote:this.updateNote,updateTitle:this.updateTitle,historyManager:this.state.historyManager,locked:!this.props.isLatest||!this.props.allowEdits,lockedFromExternalChange:this.props.lockedFromExternalChange,restoreStateAndSelection:this.restoreStateAndSelection,printOptions:this.props.printOptions}))}}_defineProperty(SubtemplateNoteView,"propTypes",{banner:r().string,fileId:r().string.isRequired,isLatest:r().bool.isRequired,allowEdits:r().bool.isRequired,printOptions:r().arrayOf(r().string),lockedFromExternalChange:r().bool.isRequired,showTimestamps:r().bool.isRequired})
_defineProperty(SubtemplateNoteView,"PRINT_OPTIONS",[d.dF.NOTE,d.dF.SELECTION])},259219:(e,t,n)=>{n.d(t,{Nc:()=>showScreen,ZS:()=>showStartingScreen,nD:()=>setOrganization,pd:()=>createRegistry,wt:()=>setIsLoading,zF:()=>completeRegistryActivation})
var a=n(468943),i=n(787004),r=n(294120),s=n(343748),o=n(947730),l=n(924768),c=n(408783),d=n(974913),u=n(468011),m=n(432128),p=n(2272),h=n(537076)
function showScreen(e){l.Nc(e)}function setIsLoading(){o.Z.dispatch({actionType:i.m5L})}function showStartingScreen(e){showScreen(u.o6)
a.j("registry_activation","began_flow",{origin:e})}function setOrganization(e){o.Z.dispatch({actionType:i.Zg0,organization:e})}function completeRegistryActivation(e){a.j("registry_activation","activation_completed",{existing_registry:e})
m.Z.set(h.RegistryPreferences.REGISTRY_ACTIVATION_COMPLETE,!0)}function createRegistry(e){p.Ue(e).done((()=>{s.tP().done((e=>{const t=e.data
o.Z.dispatch({actionType:i.Rio,sources:t})
completeRegistryActivation(!1)
c.GS(r.SA.REGISTRIES)})).fail((e=>{d.ZP.notifyError(e)}))})).fail((e=>{d.ZP.notifyError(e)}))}},319977:(e,t,n)=>{n.d(t,{HU:()=>isTeam,Ph:()=>getOrgIdsWithUserJoinRequest,V$:()=>getTeamSchemaAdminSettingsCopy,XC:()=>hasSentRequestForOrg})
var a=n(232606),i=n(459830),r=n(788836),s=n(379346),o=n(348920),l=n(323539),c=n(814099)
function getOrgIdsWithUserJoinRequest(){return r.Z.currentUser()&&r.Z.currentUser().currentUserOutboundRequests?r.Z.currentUser().currentUserOutboundRequests.map((e=>e.organizationId)):[]}function hasSentRequestForOrg(e){return getOrgIdsWithUserJoinRequest().includes(e)}function isTeam(e){const t=s.ZP.apiIdToType(e)
if(t===i.TEAM)return!0;(0,a.hu)(t===i.ENTITY,`Unexpected entity id: ${t}`)
return!1}function addSchemaTypes(e){let t=""
const n=e.pop()
e.length>1?t+=`${e.join(", ")}, and `:1===e.length&&(t+=`${e[0]} and `)
return`${t}${n} schemas`}function getTeamSchemaAdminSettingsCopy(){const e=["automation","result","request"],t=["request"]
if((0,l.cr)({feature:c.gx.PROCESSES_ADMIN})){e.push("workflow")
t.push("workflow")}o.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_PERMISSIONS||t.push("automation","result")
return e.length===t.length?`Team members can create and update ${addSchemaTypes(e)}`:`Team members can create ${addSchemaTypes(e)}; team members can update ${addSchemaTypes(t)}`}},29363:(e,t,n)=>{n.d(t,{O:()=>filterChangesToUpdatesOnly,Z:()=>parseChanges})
var a=n(615439),i=n.n(a),r=n(94222),s=n(586874),o=n(379346),l=n(49885)
function didNotMove(e,{parentStorable:t,gridCell:n}){return t&&e.parentStorableId===t.id&&i()(e.gridCell,n)}function formatContainerGridPosition(e,{rowIndex:t,columnIndex:n}){const a=o.ZP.apiIdToType(e.id)
return(0,r.vZ)({gridType:a,rowIndex:t,columnIndex:n,width:e.storableSchema.width,includeNoun:!0})}function nestedSet(e,t,n,a){e.hasOwnProperty(t)||(e[t]={})
e[t][n]=a}function filterChangesToUpdatesOnly(e){return e.filter((e=>null!=e.previous&&!didNotMove(e.container,e.previous)))}function parseChanges(e,t){const n={},a={moveOut:0,create:0,moveIn:0,reposition:0,noChange:0},i=[]
t.forEach((t=>{const{container:s}=t
if(function wasMovedOut(e){return!e.gridCell}(s)){i.push(t)
return}let o,c
if(t.previous)if(didNotMove(s,t.previous))o="noChange"
else{const{parentStorable:n,gridCell:a}=t.previous,i=formatContainerGridPosition(e,s.gridCell)
if(function wasMovedIn(e,t){return!e||e.id!==t.id}(n,e)){o="moveIn"
c=`from ${function formatContainerParentStorable(e,t){return e?(0,r.h)(e.id)?`${formatContainerGridPosition(e,t)} of ${e.barcode}`:e.barcode:"root"}(n,a)} to ${i}`}else{o="reposition"
c=`from ${formatContainerGridPosition(e,a)} to ${i}`}}else o="create"
const d={tooltipTitle:`${l.Z9[o].name}: ${s.barcode}`,innerClassName:l.Z9[o].gridCellClassName,dataTestAttrs:l.Z9[o].dataTestAttrs}
c&&(d.tooltipTitle+=` ${c}`)
a[o]+=1
const{rowIndex:u,columnIndex:m}=t.container.gridCell
nestedSet(n,u,m,d)}))
i.forEach((e=>{const{rowIndex:t,columnIndex:a}=e.previous.gridCell,i=`${l.Z9.moveOut.name}: ${e.container.barcode}`,r=l.Z9.moveOut.gridCellClassName,o={key:s.Z.EMPTY_MOVE_OUT}
if(n.hasOwnProperty(t)&&n[t].hasOwnProperty(a)){const e=n[t][a]
e.tooltipTitle+=`\n${i}`
e.innerClassName+=` ${r}`
e.dataTestAttrs={key:(0,s.a)(e.dataTestAttrs.key)}}else nestedSet(n,t,a,{tooltipTitle:i,innerClassName:r,dataTestAttrs:o})}))
a.moveOut=i.length
return{gridCellProps:n,changeStats:a}}},26481:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(787004),i=n(947730)
const r={open:function(){i.Z.dispatch({actionType:a.wXQ})},openSection:function(e){i.Z.dispatch({actionType:a.wXQ,section:e})},openSectionForFileType:function(e){i.Z.dispatch({actionType:a.GSq,fileType:e})},close:function(){i.Z.dispatch({actionType:a.zSv})}},s=r},675649:(e,t,n)=>{n.d(t,{$5:()=>decodeJQueryParam,Dp:()=>getLocationOrigin,Dv:()=>setURLParams,FK:()=>getLocationHash,Fr:()=>redirectToLinkGoogleAccount,Gh:()=>asyncThrottle,Gn:()=>isSimpleClick,IJ:()=>E,Jf:()=>shouldSuppressNotification,QW:()=>getRelativeURL,Sm:()=>sum,UT:()=>T,Ud:()=>p,V5:()=>isMac,Vx:()=>resizeThrottler,YW:()=>fullPath,_6:()=>pluralize,_w:()=>setWindowTitle,a1:()=>h,bO:()=>redirectToTimeout,bk:()=>contactBenchlingViaIntercomOrEmail,c4:()=>navigate,cF:()=>repeat,e9:()=>m,gG:()=>redirectForDownload,he:()=>parseUri,jp:()=>pathToURL,kv:()=>kv,oN:()=>setLocationHash,ov:()=>clearLocationHash,px:()=>abbreviateList,rP:()=>redirectToSignin,rx:()=>hideIntercomWindow,tP:()=>requestFinishedOrTimedOut,w7:()=>prependAOrAn,yL:()=>S})
var a=n(250965),i=n.n(a),r=(n(782279),n(483819)),s=n(531041),o=n(232606),l=n(145007),c=n(99312),d=n(138966)
const u={origin:""}
const m=c.isBrowser&&null!=window.chrome,p=c.isBrowser&&-1!==navigator.userAgent.indexOf("Firefox"),h=c.isBrowser&&"Safari"===(new r.UAParser).getBrowser().name,E=c.isBrowser&&navigator.mimeTypes&&null!=navigator.mimeTypes["application/x-shockwave-flash"],S=c.isBrowser&&document.implementation.hasFeature("http://w3.org/TR/SVG11/feature#Extensibility","1.1"),T=c.isBrowser&&navigator?navigator.language:null,isMac=()=>c.isBrowser&&navigator.userAgent.indexOf("Mac OS X")>-1,g="/session-expired",isSimpleClick=e=>!(0!==e.button||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)
function redirectForDownload(e){window.location.href=e}function navigate(e,t){if(null==e||isSimpleClick(e)){e&&e.preventDefault()
null==t&&(t=i()(e.currentTarget).attr("href"))
if(null==t)throw new Error("No URL found in navigate call");(0,d.ZP)(t)}}function shouldSuppressNotification(e,t){return Boolean(e&&e.__suppress_notification||t&&t.__suppress_notification)}const f={},I={}
function requestFinishedOrTimedOut(e){const t=i().Deferred()
setTimeout(t.reject,12e4)
e.then(t.resolve,t.reject)
return t.promise()}function _throttleDoCallback(e){(0,o.hu)(null==f[e],"Invalid request namespace")
const t=I[e]
if(null==t)return
delete I[e]
const n=t()
if(null==n.always)throw new Error("asyncThrottle was passed a request that does not return an XHR")
f[e]=n
requestFinishedOrTimedOut(n).always((()=>{delete f[e]
_throttleDoCallback(e)}))}function asyncThrottle(e,t){I[e]=t
null==f[e]&&_throttleDoCallback(e)}const A=["a","e","i","o","u"]
function pluralize(e,t,n){if(1===e)return t
if(null!=n)return n
const a=t.charAt(t.length-1).toLowerCase(),i=t.charAt(t.length-2).toLowerCase()
return"i"===i&&"s"===a?`${t.slice(0,t.length-2)}es`:["x","s"].includes(a)||"h"===a&&["c","s"].includes(i)?`${t}es`:"y"!==a||A.includes(i)?`${t}s`:`${t.slice(0,-1)}ies`}function prependAOrAn(e){if(""===e)return""
const t=e.toLowerCase().charAt(0)
return A.includes(t)?`an ${e}`:`a ${e}`}function sum(e,t,n){if(!t&&s.default.isEmpty(e))return 0
let a=0
if(!t&&s.default.isArray(e)){for(let t=e.length-1;t>=0;t--)a+=e[t]
return a}s.default.each(e,((e,i,r)=>{const s=t?t.call(n,e,i,r):e
a+=s}))
return a}function repeat(e,t){let n=e.slice(0,0)
for(let a=0;a<t;a++)n=n.concat(e)
return n}function parseUri(e){const t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),a={}
let i=14
for(;i--;)a[t.key[i]]=n[i]||""
a[t.q.name]={}
a[t.key[12]].replace(t.q.parser,((e,n,i)=>{n&&(a[t.q.name][n]=i)}))
return a}function setURLParams(e,t,n={}){const{path:a,uriQueryKey:r}=parseUri(e),o=s.default.object(s.default.map(s.default.pairs(r),(([e,t])=>[e,decodeURIComponent(t)]))),l=s.default.pairs(t)
for(let e=0;e<l.length;e++){const[t,a]=l[e]
null==a||n[t]===a?delete o[t]:o[t]=a}let c
c=s.default.isEmpty(o)?"":`?${i().param(o)}`
return a+c}const decodeJQueryParam=e=>decodeURIComponent(e.replace(/\+/g," ")),fullPath=()=>window.location.pathname+window.location.search+window.location.hash
function getLocationOrigin(){return c.isBrowser||c.isNodeTesting?window.location.origin:u.origin}function pathToURL(e){return`${getLocationOrigin()}${e}`}function getLocationHash(){return window.location.hash.slice(1)}function setLocationHash(e){window.history.replaceState(null,"",window.location.pathname+window.location.search+(null==e?"":`#${e}`))}function clearLocationHash(){setLocationHash(null)}function getRelativeURL(e){const{host:t,port:n,relative:a}=parseUri(e),{host:i,port:r}=parseUri(getLocationOrigin())
return t===i&&n===r?a:null}function setWindowTitle(e){s.default.isEmpty(e)?window.document.title="Benchling":window.document.title=`${e}  Benchling`}function redirectToSignin(){window.location.href=setURLParams("/signin",{next:fullPath()})}function redirectToTimeout(){if(window.location.pathname!==g){i()(window).off("beforeunload")
window.location.href=g}}function redirectToLinkGoogleAccount(e){window.location.href=setURLParams("/ext/google-oauth/link",{next:fullPath(),institution:e})}const kv=(e,t)=>s.default.object([e],[t])
function contactBenchlingViaIntercomOrEmail({showNewMessage:e}={}){null==e&&(e=!0)
if(null!=window.Intercom)e?window.Intercom("showNewMessage"):window.Intercom("show")
else{const e="mailto:support@benchling.com"
window.open(e)}}function hideIntercomWindow(){null!=window.Intercom&&window.Intercom("hide")}function resizeThrottler(e){return(0,l.Z)((()=>{s.default.defer(e)}),16)}function abbreviateList(e,t,n="and"){(0,o.hu)(t>=2,"abbreviateList: maxItemsToDisplay must be at least 2")
return 0===e.length?"":e.length>t+1?`${e.slice(0,t).join(", ")} ${n} ${e.length-t} others`:e.length>1?`${e.slice(0,-1).join(", ")} ${n} ${e[e.length-1]}`:`${e[0]}`}},812651:(e,t,n)=>{n.r(t)
n.d(t,{Annotation:()=>i.Hn,AnnotationCollection:()=>i.FE,FragmentResult:()=>r.Hn,FragmentResultCollection:()=>r.FE,GapSequence:()=>u.Z,MIN_PRIMER_LENGTH:()=>l.uV,Part:()=>c.Hn,PartCollection:()=>c.FE,PrimerPair:()=>d.H,PrimerPairCollection:()=>d.F,SearchPrimerCollection:()=>l.EV,Sequence:()=>o.Hn,SequenceCollection:()=>o.FE,SequencePrimer:()=>l.Hn,SequencePrimerCollection:()=>l.FE,Translation:()=>s.Hn,TranslationCollection:()=>s.FE,util:()=>a})
var a=n(48047),i=n(947216),r=n(873488),s=n(348979),o=n(183367),l=n(407161),c=n(883751),d=n(957787),u=n(98969)},699418:(e,t,n)=>{n.d(t,{Au:()=>DisplaySequenceFileState,T0:()=>ProxyFileState,ZP:()=>ct,m6:()=>ProteinFileState,x$:()=>SequenceFileState})
var a=n(440281),i=n.n(a),r=n(250965),s=n.n(r),o=n(531041),l=n(379346),c=n(920995),d=n(848640),u=n(426178),m=n(504544),p=n(205155),h=n(468943),E=n(901369),S=n(232606),T=n(713255),g=n(95537),f=n(56137),I=n(348920),A=n(675649),y=n(955836),_=n(143885),C=n(146238),R=n(773055),N=n(15655),O=n(663117),b=n(103171),v=n(129187),P=n(3472),L=n(459830),D=n(294120),M=n(875091),w=n(973606),F=n(279785),k=n(806326),U=n(776065),x=n(372617),B=n(286291),Z=n(518352),q=n(312656),G=n(227887),V=n(884273),H=n(514927),W=n(807577),Y=n(189042),$=n(273887),K=n(921554),z=n(87209),Q=n(422199),j=n(241500),J=n(532386),X=n(124510),ee=n(961199),te=n(194119),ne=n(618762),ae=n(408783),ie=n(392113),re=n(87636),se=n(655725),oe=n(138232),le=n(399980),ce=n(944512),de=n(537073),ue=n(95018),me=n(287799),pe=n(707870),he=n(471167),Ee=n(48835),Se=n(523670),Te=n(902680),ge=n(974913),fe=n(320176),Ie=n(744240),Ae=n(432128),ye=n(687357),_e=n(885964),Ce=n(473287),Re=n(816558),Ne=n(231017),Oe=n(166459),be=n(115564),ve=n(107507),Pe=n(563636),Le=n(575209),De=n(575877),Me=n(560109),we=n(405329),Fe=n(546307),ke=n(649593),Ue=n(276281),xe=n(938454),Be=n(305487),Ze=n(788836),qe=n(285290),Ge=n(102385),Ve=n(519963),He=n(971279),We=n(502633),Ye=n(669050),$e=n(738813),Ke=n(816856),ze=n(864870),Qe=n(256155),je=n(615270),Je=n(485271),Xe=n(808763),et=n(381794),tt=n(456445),nt=n(30445),at=n(76804),it=n(453445),rt=n(501695)
const{EmptyEntryTabState:st}=le,{NewEntryProtocolTabState:ot}=ue,{ExternalEntryProtocolTabState:lt}=de
class BasicInformationPanelState extends i().Model{}class FeaturePanelState extends i().Model{defaults(){return{sidebarOpen:!1,activeSubPanel:qe.NK}}createAnnotation(e,t){(0,Oe.getStore)().dispatch(te.ml(e))
this.set({activeSubPanel:qe.NK})}createTranslation(e,t){(0,Oe.getStore)().dispatch(te.$d(e,t))
this.set({activeSubPanel:qe.t})}}class EditVersionState extends i().Model{defaults(){return{version:null,cloneName:"",active:!1}}}class HistoryPanelState extends i().Model{defaults(){return{editState:new EditVersionState,activeSubPanel:qe._R}}}class InProgressAlignment extends i().Model{defaults(){return{algorithm:null,created:new Date,numSequences:0}}}class AlignmentPanelState extends i().Model{defaults(){return{alignmentsInProgress:new(i().Collection)([],{model:InProgressAlignment})}}async withAlignmentPending(e,t){const n=new InProgressAlignment(t),a=this.get("alignmentsInProgress")
a.add(n)
try{return await e}finally{a.remove(n)}}registerAlignmentXhr(e,t){const n=new InProgressAlignment(t),a=this.get("alignmentsInProgress")
a.add(n)
e.always((()=>a.remove(n)))}}class PrimerPanelState extends i().Model{defaults(){return{activeSubPanel:qe.R,activePrimer:null,overhang:"",newPrimer:null,newPrimerLibraryId:-1,meltingTemperature:null}}}class RestrictionPanelState extends i().Model{defaults(){return{activeSubPanel:qe.n,selectedEnzymes:new C.ZP,search:"",viewEnzymes:Ae.Z.get(w.n$.VIEW_ENZYMES),enzymeListId:Ae.Z.get(w.n$.ENZYME_LIST_ID),enzymesProvider:Ae.Z.get(w.n$.PROVIDER),highlightCompatible:!1,cutRegion:"anywhere"}}initialize(){this.changeViewEnzyme=this.changeViewEnzyme.bind(this)}registerListeners(){s()(window).bind("storage",o.default.bind((e=>this.updateActiveEnzymes(e)),this))
s()(window).bind("storage",o.default.bind((()=>{this.updateHighlightCompatible()}),this))
this.listenTo(this.get("selectedEnzymes"),"add remove reset",(()=>{this.setLocalStorage()}))
this.listenTo(this.get("sequence").get("enzymes"),"change:active",this.enzymeActiveChange)
this.listenTo(this.get("sequence").get("enzymes"),"change:cutPositions change:active change:color",this.changeViewEnzyme)
this.on("change:highlightCompatible",(()=>{this.setHighlightCompatible()}))}updateHighlightCompatible(){const e=Ae.Z.get(G.yT.HIGHLIGHT_COMPATIBLE)
this.set({highlightCompatible:null!=e})}setHighlightCompatible(){"storage"!==(null!=window.event?window.event.type:void 0)&&(this.get("highlightCompatible")?Ae.Z.set(G.yT.HIGHLIGHT_COMPATIBLE,!0):Ae.Z.unset(G.yT.HIGHLIGHT_COMPATIBLE))}setLocalStorage(){"storage"!==(null!=window.event?window.event.type:void 0)&&C.ZP.setLocalStorageActives(this.get("selectedEnzymes"))}enzymeActiveChange(e,t,n){const a=null==n||!o.default.has(n,"trigger")||n.trigger
if(t){if(!e.has("color")){let t,n=null
for(const t of Array.from(F.Eu(e.id))){n=this.get("sequence").get("enzymes").get(t).color()
if(null!=n)break}if(null==n){const e=this.get("selectedEnzymes").map((e=>e.color()))
for(t of Array.from(K.vx))if(-1===e.indexOf(t)){n=t
break}}e.set({color:n},{trigger:a})}this.get("selectedEnzymes").add(e)}else{e.unset("color")
this.get("selectedEnzymes").remove(e)}this.changeViewEnzyme(e,null,{trigger:a})}updateActiveEnzymes(e){const t=Q.Z.getItem("active-enzymes"),n=this.get("sequence").get("enzymes")
n.each((e=>e.set({active:!1,color:null})))
if(null!=t){const e=JSON.parse(t)
return(()=>{const t=[]
for(const a in e){const i=e[a],r=n.get(a)
null!=r&&t.push(r.set({active:!0,color:i}))}return t})()}}changeViewEnzyme(e,t,n){const a=null==n||!o.default.has(n,"trigger")||n.trigger,i=this.get("viewEnzymes")
e.forceVisible()?e.set("visible",!0,{trigger:a}):F.H5(this.get("enzymeListId"),e.id)?e.updateVisibleByCuts(i):e.set("visible",!1,{trigger:a})}}class InformationPanelState extends i().Model{defaults(){return{activeSubPanel:qe.D3}}}class GenomeEngineeringPanelState extends i().Model{}class SequenceToolbarState extends i().Model{defaults(){return{featurePanelState:new FeaturePanelState,restrictionPanelState:new RestrictionPanelState,historyPanelState:new HistoryPanelState,primerPanelState:new PrimerPanelState,informationPanelState:new InformationPanelState,alignmentPanelState:new AlignmentPanelState,genomeEngineeringPanelState:new GenomeEngineeringPanelState}}}class ProtocolHistoryPanelState extends i().Model{}class ProtocolToolbarState extends i().Model{defaults(){return{protocolHistoryPanelState:new ProtocolHistoryPanelState,protocolInformationPanelState:new BasicInformationPanelState}}}class ProteinAnnotationsPanelState extends i().Model{}class ProteinHistoryPanelState extends i().Model{}class ProteinAlignmentPanelState extends i().Model{}class ProteinToolbarState extends i().Model{defaults(){return{proteinAnnotationsPanelState:new ProteinAnnotationsPanelState,proteinHistoryPanelState:new ProteinHistoryPanelState,proteinInformationPanelState:new BasicInformationPanelState,proteinAlignmentPanelState:new ProteinAlignmentPanelState}}}class EntryHistoryPanelState extends i().Model{}class EntryToolbarState extends i().Model{defaults(){return{entryInformationPanelState:new BasicInformationPanelState,entryHistoryPanelState:new EntryHistoryPanelState}}}class SubtemplateHistoryPanelState extends i().Model{}class SubtemplateToolbarState extends i().Model{defaults(){return{subtemplateInformationPanelState:new BasicInformationPanelState,subtemplateHistoryPanelState:new SubtemplateHistoryPanelState}}}class TemplateHistoryPanelState extends i().Model{}class TemplateToolbarState extends i().Model{defaults(){return{templateInformationPanelState:new BasicInformationPanelState,templateHistoryPanelState:new TemplateHistoryPanelState}}}class ComplexPolymerHistoryPanelState extends i().Model{}class BasicFolderItemToolbarState extends i().Model{defaults(){return{basicFolderItemInformationPanelState:new BasicInformationPanelState,complexPolymerHistoryPanelState:new ComplexPolymerHistoryPanelState}}}class MixtureToolbarState extends i().Model{defaults(){return{mixtureInformationPanelState:new BasicInformationPanelState}}}class StageEntryHistoryPanelState extends i().Model{}class StageEntryToolbarState extends i().Model{defaults(){return{stageEntryInformationPanelState:new BasicInformationPanelState,stageEntryHistoryPanelState:new StageEntryHistoryPanelState}}}function trackFileUse(e,t,n,a,i){if(null==a)return
const r=l.ZP.apiIdToType(t),s=`${e}_${r}`,o={...i,is_modified_oligo:r===L.SEQUENCE&&n.model().modifiedNucleotides().length>0,source:a}
o[`${r}_api_id`]=t
h.j("editor",s,o)}class ProxyFileState extends H.Z{hasUnsavedChanges(){return this.model().get("savedVersion")!==this.model().get("openVersion")}handleModelChanges(){const e=this.model()
this.set({name:e.name()})
this.listenTo(e,`change:${e.proxiedField}`,(()=>this.set({name:e.name(),tagSchema:e.tagSchema()})))}initialize(e,t){super.initialize(e,t)
this.listenTo(this.model(),`change:${this.model().proxiedField} change:isLatest change:dirty`,(()=>{this.model().setBanner()}))}registerTitleAndURLSync(){this.on("change:name",(()=>{this.syncTitleAndURL()}))
this.listenTo(this.model(),`change:${this.model().proxiedField}`,(()=>{this.syncTitleAndURL()}))}open(e){null==e&&(e={})
let{open:t,versionId:n}=e
null==t&&(t=!0)
return t&&null!=n&&n!==this.model().openVersionId()?this.model().fetch({versionId:n}).then((()=>{FileStates.get().activate(this)
return this})):super.open(...arguments)}}class FileStateWithEntryVersion extends ProxyFileState{static initClass(){this.prototype.hasNote=!1}_protocolTabState(e){const t={file:this.model(),protocolCid:e.cid}
return e.externalFile?new lt(t):new ce.Z(t)}handleLeftBufferLock(){const e=this.model().allowEdits()
this.buffers().at(0).tabs().each((t=>{t instanceof oe.Z&&t.set({closeable:e,draggable:e})}))}handleSplitWorkspaceChange(){if(!this.get("statusbar").get("splitWorkspace")){const e=this.buffers().getTabByClass(pe.Z)
null!=e&&e.set({active:!0})}}shouldAddReviewTab(){return null==this.findTab(Se.Z)&&(!!Te.m0(this.fileType())||null!=this.model().proxied().review)}initialize(e,t){super.initialize(e,t)
const n=this.model(),a=n.entryProtocols()
this.shouldConsiderAddingResultStatusTab()&&(this._reduxUnsubscribe=new Pe.Z({entryFile:n,addResultStatusTab:()=>{this.addResultStatusTab()}}).init())
for(const e of Array.from(a)){const t=this._protocolTabState(e)
t.set({title:e.name})
this.buffers().addTab(t,{side:"left"})}I.ZP.ENABLE_PROTOCOLS_IN_ENTRIES&&(n.allowEdits()?this.buffers().addTab(new ot({file:n}),{side:"left"}):this.buffers().addTab(new st,{side:"left"}))
this.shouldAddReviewTab()&&this.addReviewTab()
!function __guard__(e,t){return null!=e?t(e):void 0}(this.buffers().at(0).tabs().at(0),(e=>e.set({active:!0})))
let i=new pe.Z({model:n})
this.buffers().at(1).add(i)
i.set({active:!0})
null!=this.metadataTab&&this.buffers().at(1).add(this.metadataTab)
this.addRelevantItemTab()
const r=this.shouldAddReviewTab()&&null!=this.model().proxied().review,s=Ae.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null!=s?s:r)
this.listenTo(this.buffers().at(0).tabs(),"add remove reset",(()=>{this.handleLeftBufferLock()}))
this.listenTo(n,"change",(()=>{this.handleLeftBufferLock()}))
this.handleLeftBufferLock()
this.listenTo(this.buffers().at(0),"reorderTabs",(()=>{const e=this.buffers().at(0).tabs().chain().filter((e=>e instanceof oe.Z)).map((e=>e.get("protocolCid"))).value()
this.model().allowEdits()&&this.model().reorderProtocols(e)}))
this.listenTo(n,`change:${this.model().proxiedField} change:isLatest`,(()=>{this.updateOnModelChange()}))}shouldConsiderAddingResultStatusTab(){return null==this.findTab(Le.Z)&&this.hasResults()&&this.fileType()!==L.TEMPLATE}addResultStatusTab(){if(null==this.findTab(Le.Z)){const e=new Le.Z({model:this.model()})
this.buffers().addTab(e,{side:"left",active:!1})}}updateOnModelChange(){const e=this.model()
let t
const n=this.buffers().at(0).tabs(),a=n.find((e=>e instanceof ot||e instanceof st))
I.ZP.ENABLE_PROTOCOLS_IN_ENTRIES&&(t=e.allowEdits()?a instanceof ot?a:new ot({file:e}):0===e.entryProtocols().length?a instanceof st?a:new st:null)
const i=n.find((e=>e instanceof pe.Z)),r=n.find((e=>e instanceof j.Z)),s=n.find((e=>e instanceof Se.Z)),l=n.find((e=>e instanceof Le.Z)),c=n.filter((e=>e instanceof oe.Z)),d=n.find((e=>e instanceof be.Z)),u=o.default.indexBy(c,(e=>e.get("protocolCid")))
let m=t
const p=[]
for(const t of Array.from(e.entryProtocols())){t.cid in u||(u[t.cid]=m=this._protocolTabState(t))
u[t.cid].set({title:t.name})
p.push(u[t.cid])}null!=t&&p.push(t)
null!=a&&c.push(a)
if(o.default.all(o.default.zip(p,c),(([e,t])=>e===t)))return
null!=i&&p.push(i)
null!=r&&p.push(r)
null!=d&&p.push(d)
null!=s&&p.push(s)
null!=l&&p.push(l)
const h=(null!=t?t.get("active"):void 0)||!o.default.any(p,(e=>e.get("active")))
n.reset(p)
this.shouldAddReviewTab()&&this.addReviewTab()
h&&null!=m&&m.set({active:!0})}addReviewTab(){if(!Ge.Z.hasLicense("LICENSE_REVIEWS"))return
const e=new Se.Z({model:this.model()})
this.buffers().addTab(e,{side:"left"})}cleanUp(){super.cleanUp()
this._reduxUnsubscribe&&this._reduxUnsubscribe()}}FileStateWithEntryVersion.initClass()
class EntryFileState extends FileStateWithEntryVersion{static initClass(){this.fileType=L.ENTRY
this.Model=se.Z}open(e){null==e&&(e={})
let{open:t,versionId:n}=e
null==t&&(t=!0)
return t&&!n&&this.model().isStale()?this.model().fetch().then((()=>{FileStates.get().activate(this)
return this})):super.open(...arguments)}defaults(){return{...super.defaults(),statusbar:new N.tW,toolbar:new EntryToolbarState,entry:null}}}EntryFileState.initClass()
class StageEntryFileState extends FileStateWithEntryVersion{static initClass(){this.fileType=L.STAGE_ENTRY
this.Model=Ve.Z}hasMetadata(){return I.ZP.ENABLE_ENTRY_SCHEMAS}isFolderItem(){return!1}defaults(){return{...super.defaults(),statusbar:new N.C6,toolbar:new StageEntryToolbarState,template:null}}}StageEntryFileState.initClass()
class TemplateFileState extends FileStateWithEntryVersion{static initClass(){this.fileType=L.TEMPLATE
this.Model=me.Z}hasMetadata(){return I.ZP.ENABLE_ENTRY_SCHEMAS}isFolderItem(){return!1}defaults(){return{...super.defaults(),statusbar:new N.Lh,toolbar:new TemplateToolbarState,template:null}}}TemplateFileState.initClass()
class SubtemplateFileState extends ProxyFileState{static initClass(){this.fileType=L.SUBTEMPLATE
this.Model=Qe.Z
this.prototype.hasNote=!1}hasMetadata(){return!1}isFolderItem(){return!1}defaults(){return{...super.defaults(),statusbar:new N.ou,toolbar:new SubtemplateToolbarState,subtemplate:null}}initialize(e,t){super.initialize(e,t)
let n=new pe.Z({model:this.model()})
this.buffers().at(0).add(n)
n.set({active:!0})
const a=Ae.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null!=a&&a)}}SubtemplateFileState.initClass()
class BasicFolderItemFileState extends H.Z{static initClass(){this.fileType=L.BASIC_FOLDER_ITEM
this.Model=f.Z}hasMetadata(){return!0}defaults(){return{...super.defaults(),toolbar:new BasicFolderItemToolbarState,statusbar:new N.yG}}initialize(e,t){var n
super.initialize(e,t);(0,re.Z)(this.buffers(),this.metadataTab,this.noteTab,this.resultsTab,this.storageTab,this.childEntityTabs,this.embeddedDashboardTab,this.relevantItemsTab)
const a=Ae.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null==a||a)
if(I.ZP.MODBIO_ENABLE_COMPOSITE_ENTITIES&&null!=(null===(n=e.complexPolymerData)||void 0===n?void 0:n.complexPolymerSchemaConfiguration)){const e=new tt.Z({complexPolymerId:this.model().id})
this.buffers().at(0).add(e)
const t=new et.Z({complexPolymerId:this.model().id,isEditable:this.model().permissions().writable})
this.buffers().at(1).add(t)}}isRegistryItem(){return!0}}BasicFolderItemFileState.initClass()
class MixtureFileState extends H.Z{static initClass(){this.fileType=L.MIXTURE
this.Model=V.Z}hasMetadata(){return!0}defaults(){return{...super.defaults(),toolbar:new MixtureToolbarState,statusbar:new N.TH}}initialize(e,t){super.initialize(e,t);(0,re.Z)(this.buffers(),this.metadataTab,this.noteTab,this.resultsTab,this.storageTab,this.childEntityTabs,this.embeddedDashboardTab,this.relevantItemsTab)
const n=Ae.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null==n||n)}isRegistryItem(){return!0}}MixtureFileState.initClass()
class ProtocolFileState extends ProxyFileState{static initClass(){this.fileType=L.PROTOCOL
this.Model=he.Z
this.prototype.hasNote=!1}defaults(){return{...super.defaults(),statusbar:new N.Yz,toolbar:new ProtocolToolbarState}}initialize(e,t){super.initialize(e,t)
const n=new Ee.Z({protocol:this.model()})
this.buffers().at(0).add(n)
n.set({active:!0})
if(null!=this.metadataTab){this.buffers().at(1).add(this.metadataTab)
this.metadataTab.set({active:!0})}this.addRelevantItemTab()}}ProtocolFileState.initClass()
class ProteinFileState extends ProxyFileState{static initClass(){this.fileType=L.PROTEIN
this.Model=Ne.Z
this.prototype.hasNote=!0}defaults(){return o.default.extend(super.defaults(),{toolbar:new ProteinToolbarState})}initialize(e,t){super.initialize(e,t)
this.setupTabs(e.assemblyHistoryData)
const n=Ae.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null==n||n)}setupTabs(e){this._setupPrimaryBufferTab()
this._setupSecondaryBufferTabs(e)}_setupPrimaryBufferTab(){const e=new v.Z({protein:this.model()})
this.buffers().at(0).add(e)
e.set({active:!0})}_setupSecondaryBufferTabs(e){const t=new Ce.N({polymer:this.model(),strand:1,codonTranslationTable:y.hR.STANDARD})
this.buffers().at(1).add(t)
I.ZP.MOLBIO_ENABLE_ALPHAFOLD_GA&&this.buffers().addTab(new Re.Z({polymer:this.model()}),{side:"right"})
this.buffers().at(1).add(this.noteTab)
null!=this.metadataTab&&this.buffers().at(1).add(this.metadataTab)
this.addRelevantItemTab()
null!=this.resultsTab&&this.buffers().at(1).add(this.resultsTab)
null!=this.storageTab&&this.buffers().at(1).add(this.storageTab)
const n=(0,Je.nI)(this.model(),e)
null!=n&&this.buffers().at(1).add(n)
this.addChildEntityTabs();(0,Y.h)(this.buffers(),this.embeddedDashboardTab)
t.set({active:!0})}schemaValidationState(){return this.model().get("protein").schemaValidationState}isRegistryItem(){return!0}}ProteinFileState.initClass()
class SequenceFileState extends H.Z{static initClass(){this.fileType=L.SEQUENCE
this.Model=R.Sequence}defaults(){return o.default.extend(super.defaults(),{sequence:null,topologyMap:null})}cleanUp(){super.cleanUp()
const e=this.get("sequence")
e.supportsChemicalMods()&&(0,Oe.getStore)().dispatch(ee.Z9(e.get("id")))
e.isOligo()||(0,Oe.getStore)().dispatch(te.Z9(e.get("id")))}initialize(e,t){super.initialize(e,t)
const n=this.get("sequence").get("_sequence")
this._bindRawChangesListener(n)
this._setupToolbar()
this.setupTabs(e.assemblyHistoryData)
const a=Ae.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null==a||a);(I.ZP.ENABLE_NUE_MODULES||I.ZP.ENABLE_GETTING_STARTED_FLOW)&&d.HY()}_bindRawChangesListener(e){this.set({name:e.get("name")})
this.listenTo(e,"change:name",(()=>this.set({name:e.get("name")})))
this.set({tagSchema:e.get("tagSchema")})
this.listenTo(e,"change:tagSchema",(()=>this.set({tagSchema:e.get("tagSchema")})))}_setupToolbar(){const e=this.get("sequence")
this.set("toolbar",new SequenceToolbarState)
const t=qe.bH[e.subtype()]
for(const e of t)this._PANEL_SETUP_FNS().hasOwnProperty(e)&&this._PANEL_SETUP_FNS()[e]()}_setupPrimaryBufferTab(){const e=this.get("sequence"),t=new(0,k.pz[e.subtype()])({sequence:e,buffers:this.buffers()})
this.buffers().at(0).add(t)
t.set({active:!0})}_setupSecondaryBufferTabs(e){const t=this.get("sequence"),n=t.get("_sequence")
let a,i,r
if(!t.isOligo()){a=new(k.dO[t.subtype()])({sequence:t})
this.set({miniMap:a})}if(n.get("circular")){i=new b.Z({sequence:t})
this.set({topologyMap:i})}else t.isOligo()||this.set({topologyMap:a})
if(t.supportsChemicalMods()){(0,Oe.getStore)().dispatch(ee.iQ(t.get("id")))
r=new X.Z({sequence:t,buffers:this.buffers()})}const s=(0,Je.nI)(t,e),o=[a,i,this.noteTab,this.metadataTab,this.relevantItemsTab,this.resultsTab,this.storageTab,r,s].filter((e=>null!=e))
this.buffers().at(1).add(o)
this.addChildEntityTabs();(0,Y.h)(this.buffers(),this.embeddedDashboardTab)
if(this.get("topologyMap")){this.get("topologyMap").set({active:!0})}else this.noteTab.set({active:!0})
E.Z.of(n).attachTabs(t,this.buffers().at(1))
this._registerTopologyListener()}_setupFeaturePanel(){this.get("toolbar").get("featurePanelState").set({buffers:this.buffers()})}_setupRestrictionPanel(){this.get("toolbar").get("restrictionPanelState").set("buffers",this.buffers())
this.get("sequence").listenToRestrictionPanelState()
const e=this.get("toolbar").get("restrictionPanelState")
e.set({sequence:this.get("sequence")})
e.registerListeners()
this.updateColoredEnzymes()
this.listenTo(this.buffers(),"change:digest",(()=>{this.updateVirtualDigest()}))}_setupPrimerPanel(){this.get("toolbar").get("primerPanelState").set("buffers",this.buffers())
const e=this.get("sequence").sequencePrimers(),t=this.get("toolbar").get("primerPanelState")
this.listenTo(e,"change:selected",((n,a)=>{n=1===(a=e.where({selected:!0})).length?a[0]:null
t.set("activePrimer",n)}))}_setupInformationPanel(){this.get("toolbar").get("informationPanelState").set("buffers",this.buffers())}_setupAlignmentPanel(){this.get("toolbar").get("alignmentPanelState").set("buffers",this.buffers())}_setupGenomeEngineeringPanel(){this.get("toolbar").get("genomeEngineeringPanelState").set({buffers:this.buffers()})}_PANEL_SETUP_FNS(){return{featurePanel:this._setupFeaturePanel.bind(this),restrictionPanel:this._setupRestrictionPanel.bind(this),primerPanel:this._setupPrimerPanel.bind(this),informationPanel:this._setupInformationPanel.bind(this),historyPanel:()=>{},alignmentPanel:this._setupAlignmentPanel.bind(this),genomeEngineeringPanel:this._setupGenomeEngineeringPanel.bind(this)}}_registerTopologyListener(){const e=this.get("sequence")
this.listenTo(e.get("_sequence"),"change:circular",((t,n)=>{const a=this.get("topologyMap").collection
if(this.get("topologyMap")instanceof b.Z){if(!this.get("sequence").circular()){a.remove(this.get("topologyMap"))
this.set("topologyMap",this.get("miniMap"))}}else if(this.get("sequence").circular()){const t=new b.Z({sequence:e})
a.add(t)
this.set("topologyMap",t)}this.get("topologyMap").set({active:!0})}))}setupTabs(e){this._setupPrimaryBufferTab()
this._setupSecondaryBufferTabs(e)}handleSplitWorkspaceChange(){const e=this.model(),t=e.selection()
e.trigger("jump",t.start(),t.end())
e.trigger("splitWorkspace")}open(e){null==e&&(e={})
let{open:t}=e
null==t&&(t=!0)
t&&this.get("sequence").get("_sequence").parts().length&&this.get("sequence").fetch().then((()=>{this.get("sequence").selection().clampToSequence()}))
return super.open(...arguments)}updateColoredEnzymes(){if(this.get("sequence").isOligo()||this.get("sequence").isRNASequence())return
const e=this.get("toolbar").get("restrictionPanelState")
e.updateActiveEnzymes()
e.updateHighlightCompatible()
const t=this.get("sequence").get("enzymes").filter((e=>e.get("active")))
e.get("selectedEnzymes").reset(t)}updateVirtualDigest(){const e=u.Z.get(),t=this.buffers().chain().map((e=>e.tabs().models)).flatten().filter((e=>function __guardMethod__(e,t,n){return null!=e&&"function"==typeof e[t]?n(e,t):void 0}(e.get("analysis"),"get",(e=>e.get("analysis_type")))===M.Nu)).value()
e.remove(e.filter((e=>e.get("sequence").id===this.id)))
e.add(t)
let n=this.findTab(p.Z)
if(0===t.length&&null!=n){this.buffers().find((e=>e.tabs().contains(n))).tabs().remove(n)}else if(null==n){n=new p.Z({digests:e,sequence:this.get("sequence")})
const t=this.buffers().where({active:!0})
t[t.length-1].tabs().add(n)}}findAlignmentTab(e){return this.findTab(O.Z,(t=>t.get("alignmentId")===e.get("apiId")))}openTranslationTabView(){let e=this.buffers().getTabByClass(m.Z)
if(null!=e)e.set({active:!0})
else{e=new m.Z({sequence:this.get("sequence")})
this.buffers().addTab(e)}}isRegistryItem(){return!0}}SequenceFileState.initClass()
class DisplaySequenceFileState extends SequenceFileState{static initClass(){this.fileType=L.SEQUENCE
this.Model=R.Sequence
this.prototype.hasNote=!1}hasBatches(){return!1}hasResults(){return!1}hasStorage(){return!1}hasMetadata(){return!1}hasChildEntityTabs(){return!1}hasUnsavedChanges(){return!1}hasRelevantItemsTab(){return!1}setupTabs(){}initialize(e,t){super.initialize(e,t)
const n=this.get("sequence")
this.get("toolbar").get("restrictionPanelState").stopListening()
const a=n.get("_sequence"),i={canOpenSelectionContextMenu:!1,writable:!1,permissions:{...a.get("permissions"),polymerFeaturesEditable:!1,polymerResiduesEditable:!1,writable:!1,appendable:!1,admin:!1}}
a.set(i)}}DisplaySequenceFileState.initClass()
class FileStates extends c.d{static initClass(){this.ProxyFileState=ProxyFileState
this._TemplateFileState=TemplateFileState
this._EntryFileState=EntryFileState
this._ProtocolFileState=ProtocolFileState
this._SequenceFileState=SequenceFileState
this._BasicFolderItemFileState=BasicFolderItemFileState
this._StageEntryFileState=StageEntryFileState
this._ContainerFileState=Me.Z
this._PlateFileState=ke.Z
this.FOLDER_ITEM_STATES=[SequenceFileState,EntryFileState,ProtocolFileState,BasicFolderItemFileState,it.ZP,rt.ZP,at.ZP,ProteinFileState,MixtureFileState,_e.ZP,_.ZP,je.ZP,Xe.ZP]
this.STORAGE_ITEM_STATES=[we.Z,Me.Z,Fe.Z,ke.Z,nt.Z]
this.WORKSPACE_ITEM_STATES=[...this.FOLDER_ITEM_STATES,He.Z,W.Z,Ye.Z,J.ZP,$e.Z,ve.Z,De.Z,StageEntryFileState,ye.Z,Ke.Z,ze.ZP,...this.STORAGE_ITEM_STATES]
this.WORKSPACE_ITEM_TYPES=this.WORKSPACE_ITEM_STATES.map((e=>e.fileType))
this.NON_WORKSPACE_ITEM_STATES=[TemplateFileState,SubtemplateFileState]
this.ITEM_STATES=this.WORKSPACE_ITEM_STATES.concat(this.NON_WORKSPACE_ITEM_STATES)}initialize(e,t){this.openFileXHRs={}}isWorkspaceItem(e){return FileStates.WORKSPACE_ITEM_STATES.includes(e.constructor)}activate(e){var t
if(!e.get("active")){this.each((e=>e.set("active",!1)))
e.beforeActivate()
e.set("active",!0)
e.trigger("open",e)}if(!e.collection)return
const n=A.QW(window.location.href),a=null!==(t=window.location.search)&&void 0!==t?t:"",i=null==n?void 0:n.substr(0,-a.length),r=e.editURL(),s="/editor"===document.location.pathname||r===i
e.syncTitleAndURL(null,{replace:s})}openFolderItem(e,t){var a
null==t&&(t={})
let{item:i,open:r,source:s,versionId:c}=t
const d=null!==(a=t.analyticsMetadata)&&void 0!==a?a:{},u=n(556957).Z
null==r&&(r=!0)
if(r&&u.getIsExpanded()){ae.Fd({autoOpenFile:!1})
null==Ze.Z.currentUser()&&ae.GS(D.SA.HOME)}const m=this.get(e)
if(null!=m){trackFileUse("switch",e,m,s,d)
return m.open({open:r,versionId:c})}const p=l.ZP.apiIdToType(e),h=o.default.findWhere(FileStates.ITEM_STATES,{fileType:p});(0,S.hu)(null!=h,`Couldn't find filestate with fileType \`${p}\``)
Array.from(FileStates.WORKSPACE_ITEM_STATES).includes(h)&&U.Z.addToWorkspace(e,i)
if(e in this.openFileXHRs)return this.openFileXHRs[e]
const E=h;(0,fe.R_)(Ie.Hk,{fileId:e,fileType:E.fileType,isFirstLoad:!this.any((e=>e.get("active")))})
const T=E.openFile(e,{versionId:c}).fail((t=>{const n=(0,g.N7)(t)
if(n){(0,g.qg)(n)?(0,g.do)(n):ge.ZP.error(P.INACCESSIBLE_MESSAGE)
U.Z.removeFromWorkspace(e)
if(r){const e=this.findWhere({active:!0})
e&&e.syncTitleAndURL()}}else ge.ZP.notifyError(t)})).then((t=>{if(!Array.from(FileStates.WORKSPACE_ITEM_STATES).includes(h)||B.Z.findInWorkspace(e,Be.Z.getState().workspaceItems)){t.layoutWorkspace()
t.get("buffers").loadLayout(p)
this.add(t)
r&&this.activate(t)
trackFileUse("open",e,t,s,d);(0,fe.R_)(Ie.sZ,{fileId:e})
return t}"function"==typeof(null==t?void 0:t.cleanUp)&&t.cleanUp()}))
this.openFileXHRs[e]=T
T.always((()=>delete this.openFileXHRs[e]))
return T}openLocationExpandedSearch(e){z.$Z()
Ue.$r()
Ue.uz()
Ue.tj()
Ue.Yd()
Ue.zU()
U.Z.fetchSources().done((()=>{xe.openLocationExpandedSearch(e)})).fail((e=>{ge.ZP.notifyError(e)})).always((()=>{z.Cp()}))}openFolder(e,t,n){null==n&&(n={})
!async function openFolderListing(e,t){var n,a
z.$Z()
const i=await(0,ne.Mq)(e,t),r=i.folder
if("openProjectSettings"in t){const t=(await T.$([e]))[e];(0,S.hu)(null!=(null===(n=null==r?void 0:r.source)||void 0===n?void 0:n.id),"Expected folder to have source id if openProjectSettings queryKey");(0,We.Z)(q.M,{sourceId:null===(a=null==r?void 0:r.source)||void 0===a?void 0:a.id,permissions:t})}(0,Oe.getStore)().dispatch(ie.listFolder(r,i.searchParams))
ae.jn()
z.Cp()}(e,n)}openFolderItems(e,t){let n
null==t&&(t={})
let{open:a,source:i}=t
null==a&&(a=!0)
let r=null
for(const t of Array.from(e)){n=this.openFolderItem(t,{open:a&&null==r,source:i})
null==r&&(r=n)}return null!=r?r:s().Deferred().resolve().promise()}selectFragment(e,t,n){null==n&&(n=!1)
const a=e.fileState()
if(a.get("active")||n)e.selectFragment(t)
else{this.activate(a)
o.default.defer((()=>e.selectFragment(t)))}}getOpenSequences(){return(()=>{const e=[]
for(const t of Array.from(this.models))t instanceof SequenceFileState&&e.push(t.get("sequence"))
return e})()}closeAll(e){o.default.chain(e).sortBy((e=>e.get("active"))).forEach((e=>{this.remove(e)
"function"==typeof e.cleanUp&&e.cleanUp()}))}cleanUpInactiveNonWorkspaceItems(){const e=this.filter((e=>!e.get("active")&&FileStates.NON_WORKSPACE_ITEM_STATES.some((t=>e instanceof t))))
this.remove(e)
e.forEach((e=>{"function"==typeof e.cleanUp&&e.cleanUp()}))}updateSequenceVersions(e,t){const n=e.map((e=>this.get(e))).filter((e=>e))
return Promise.all(n.map((e=>e.model().fetch()))).then((()=>{n.forEach((e=>e.model().updateVersions(t)))}))}}FileStates.initClass()
const ct=FileStates,dt=FileStates.get()
Z.Z.listenToFileStates(dt)
x.Z.setFileStates(dt)
$.Z.setFileStates(dt)
Be.Z.listenToFileStates(dt)},788927:(e,t,n)=>{n.d(t,{A$:()=>getActiveShareLinkItemId,Kq:()=>createShareAccessApolloLink,L0:()=>shareAccessSetter,vV:()=>getActiveShareLinkShareId})
var a=n(869108)
const{shareAccessIdentifier:i}=window,r="X-Share-Access-Identifier"
function shareAccessSetter(e,t){null!=i&&(/^(PUT|DELETE|HEAD|OPTIONS|TRACE)$/i.test(t.type)||this.crossDomain||e.setRequestHeader(r,i))}function createShareAccessApolloLink(){return new a.i(((e,t)=>{null!=i&&e.setContext({headers:{[r]:i}})
return t(e)}))}function getActiveShareLinkItemId(){const{shareAccessIdentifier:e}=window
return null==e?null:e.split(":")[1]}function getActiveShareLinkShareId(){const{shareAccessIdentifier:e}=window
return null==e?null:e.split(":")[0]}},848640:(e,t,n)=>{n.d(t,{HY:()=>fetchOnboardingTasks,JU:()=>openSampleEntry,LW:()=>toggleCollapsedNUEModule,OZ:()=>completeOnboardingTask,PW:()=>acknowledgeCompletedModule,hE:()=>openSampleSequence,k4:()=>dismissNUEModule,lm:()=>restoreNUEModule,pS:()=>inviteUsers,t5:()=>setNUEModuleOpenIndex,uI:()=>externalInviteUsers})
var a=n(250965),i=n.n(a),r=n(271350),s=n(232606),o=n(787004),l=n(239070),c=n(922633),d=n(389747),u=n(776065),m=n(781995),p=n(947730),h=n(763089),E=n(974913),S=(n(432128),n(788836)),T=n(102385),g=n(808844)
function fetchOnboardingTasks(){d.Z.fetchOnboardingTasks().done((e=>{p.Z.dispatch({actionType:o.aUc,gettingStarted:e})}))}function completeOnboardingTask(e,t){if(null==S.Z.currentUser())return
let n=!1
const a=m.Z.getNUEModuleState(e)
if(null!=a&&a.tasks){if(a.tasks.some((e=>e.key===t&&e.completed)))return
const e=a.tasks.filter((e=>!e.completed))
n=!a.completed&&1===e.length&&e[0].key===t}d.Z.completeOnboardingTask(e,t).done((a=>{if(!1===(null==a?void 0:a.markedComplete))return
if(n&&!T.Z.hasEnterprisePlan()){const t=c.ZP.READABLE_MODULES[e],n=(0,g.td)(c.ZP.SPACE_ADDITION_SIZES.ONBOARDING[e])
E.ZP.success(`You've successfully completed all ${t} tasks\n                               and earned an additional ${n} of free space!`)}p.Z.dispatch({actionType:o.UR7,module:e,key:t})
const i=m.Z.getNUEModuleState(e)
if(null==i)return
const r=i.tasks.findIndex((e=>e.key===t));(0,s.hu)(r>=0,`Invalid onboarding task with module=${i} and key=${t}`)
i.openIndex===r&&setTimeout((()=>{var t;(null===(t=m.Z.getNUEModuleState(e))||void 0===t?void 0:t.openIndex)===r&&setNUEModuleOpenIndex(e,r+1)}),500)}))}function inviteUsers({emails:e,recaptcha:t}){d.Z.inviteUsers({emails:e,recaptcha:t}).done((e=>{E.ZP.success(e.message)
r.$d()})).fail(E.ZP.notifyError)}function externalInviteUsers({emails:e,inviter:t,recaptcha:n}){d.Z.externalInviteUsers({emails:e,inviter:t,recaptcha:n}).done((e=>{E.ZP.success(e.message)})).fail(E.ZP.notifyError)}function openSampleEntry(){i()("#fileLoading").removeClass("hidden")
d.Z.getOrCreateSampleEntry().done((e=>{const{id:t,folder:n}=e
u.Z.openFile(t);(0,h.Z)(n,l.$.NOTEBOOK)})).always((()=>i()("#fileLoading").addClass("hidden"))).fail(E.ZP.notifyError)}function openSampleSequence(){i()("#fileLoading").removeClass("hidden")
d.Z.getOrCreateSampleSequence().done((e=>{const{id:t,folder:n}=e
u.Z.openFile(t);(0,h.Z)(n,l.$.INVENTORY)})).always((()=>i()("#fileLoading").addClass("hidden"))).fail(E.ZP.notifyError)}function acknowledgeCompletedModule(e){p.Z.dispatch({actionType:o.HVn,module:e})}function toggleCollapsedNUEModule(e,t){p.Z.dispatch({actionType:o.nvv,module:e,collapsed:t})}function setNUEModuleOpenIndex(e,t){p.Z.dispatch({actionType:o.NtZ,module:e,openIndex:t})}function dismissNUEModule(e){p.Z.dispatch({actionType:o.C3_,module:e})}function restoreNUEModule(e){p.Z.dispatch({actionType:o.pdk,module:e})}},441116:(e,t,n)=>{n.d(t,{$M:()=>openUserPage,Ah:()=>removeMember,Bt:()=>cancelInvite,Cm:()=>createTeam,FH:()=>setInitials,Hh:()=>resetSearchOrgModalState,Hu:()=>updateOrganizationAvatar,Ik:()=>openCreateTeamPage,KT:()=>acceptInboundRequest,LI:()=>tombstoneOrganization,Lt:()=>addTeamMember,Mv:()=>fetchMembers,Mz:()=>deleteOrganization,PR:()=>shareProjectsWithOrganization,R2:()=>inviteUser,Se:()=>rejectInboundRequest,Ue:()=>create,Vx:()=>update,Wd:()=>updateMemberPermission,bl:()=>fetchProjects,fC:()=>deleteTeam,fZ:()=>addMember,fq:()=>openCreateOrganizationPage,fs:()=>updateTeam,iq:()=>openOrganizationPage,q4:()=>updateTeamAvatar,rY:()=>createWithInfo,vB:()=>openTeamPage,wc:()=>updateActiveTab})
var a=n(531041),i=n(271350),r=n(232606),s=n(609630),o=n(348920),l=n(675649),c=n(787004),d=n(741522),u=n(579807),m=n(947730),p=n(138966),h=n(924768),E=n(974913),S=n(263174),T=n(777599),g=n(319977),f=n(93619),I=n(443626),A=n(569535),y=n(788836)
function create({name:e,handle:t,labId:n,redirectOnSuccess:a}){m.Z.dispatch({actionType:c.m2L})
T.Z.create({name:e,handle:t,lab:n}).done((e=>{a&&(0,p.ZP)(`/organizations/${e.url_identifier}/settings`)
m.Z.dispatch({actionType:c.K7y,organization:e})})).fail((()=>{m.Z.dispatch({actionType:c.Sxe})})).fail(E.ZP.notifyError)}function createTeam(e){f.Ue(e).done((e=>{(0,p.ZP)(`/teams/${e.id}/settings`)})).fail(E.ZP.notifyError)}function setInitials(e,{orgInitials:t,initialsByUserId:n},a=!0){T.Z.setInitials(e,{orgInitials:t,initialsByUserId:n}).done((()=>{m.Z.dispatch({actionType:c.HUf,orgId:e,orgInitials:t,initialsByUserId:n})
a&&E.ZP.success("Initials updated")})).fail((e=>{m.Z.dispatch({actionType:c.XH_})
E.ZP.notifyError(e)}))}function resetSearchOrgModalState(){m.Z.dispatch({actionType:c.KVX})}async function fetchProjects(e){let t
t=g.HU(e)?c.RWx:c.HSV
const{projects:n}=await(g.HU(e)?f.bl(e):T.Z.fetchProjects(e))
m.Z.dispatch({actionType:t,projects:n})}function fetchMembers(e){(g.HU(e)?f.Zw(e,{getMemberInfo:!1}):T.Z.fetchMembers(e)).done((t=>{m.Z.dispatch({actionType:c.rd,members:t.members,permissions:t.permissions,entityId:e})})).fail(E.ZP.notifyError)}function fetchTeams(e){T.Z.fetchTeams(e).done((e=>{m.Z.dispatch({actionType:c.Z63,organizationTeams:e.teams})})).fail(E.ZP.notifyError)}function fetchInfoForMembersTab(e){(()=>{if(g.HU(e)){const t=y.Z.getEntity(e),n=y.Z.getEntity(t.organizationId).member
return f.Zw(e,{getMemberInfo:n})}fetchTeams(e)
return T.Z.fetchInfoForMembersTab(e)})().done((({members:t,permissions:n,userIdToMemberInfo:i,invites:r,requests:s})=>{m.Z.dispatch({actionType:c.WgK,members:t,permissions:n,entityId:e,userIdToMemberInfo:a.default.mapObject(i,(e=>Object.assign(e,{loading:!1}))),organizationMemberInvites:r||[],organizationMemberRequests:s||[]})})).fail(E.ZP.notifyError)}function cancelInvite(e,t){m.Z.dispatch({actionType:c.mjF,organizationId:e,email:t})
T.Z.cancelInvite(e,t).done((()=>{E.ZP.success(`Canceled invite for ${t}`)})).fail(E.ZP.notifyError).always((()=>{fetchInfoForMembersTab(e)}))}function updateActiveTab(e,t){switch(t){case S.CALENDAR_TAB:fetchMembers(e)
break
case S.PROJECTS_TAB:fetchProjects(e)
break
case S.MEMBERS_TAB:case S.APPS_TAB:fetchInfoForMembersTab(e)
break
case S.TEAMS_TAB:fetchTeams(e)}m.Z.dispatch({actionType:c.YIY,activeTab:t})}function _getActiveTab(e,t,n=S.PROJECTS_TAB){const a=t[e];(0,r.Gp)(null==e||null!=a,`Organization page received an invalid section: ${e}`)
return a||n}function openOrganizationPage(e,t){h.Cl()
m.Z.dispatch({actionType:c.GKJ})
T.Z.get(e).done((e=>{const n=_getActiveTab(t,S.ORGANIZATION_PAGE_SECTION_URL_PARAM_TO_TAB)
m.Z.dispatch({actionType:c.XXO,organization:e,activeTab:n})
h.Nc(S.ORGANIZATION_SCREEN)
updateActiveTab(e.id,n)})).fail((()=>{E.ZP.error("There was an error loading the organization page")
m.Z.dispatch({actionType:c.ayz})
h.RM()}))}async function openTeamPage(e,t){async function completeOpenTeamPage(e){const n=y.Z.getEntity(e.organizationId)
let a
a=null==n?await(0,A.g)(e.organizationId):n;(0,r.hu)(null!=a,"Organization not found.")
const i=_getActiveTab(t,S.TEAM_PAGE_SECTION_URL_PARAM_TO_TAB)
m.Z.dispatch({actionType:c.JBY,team:e,organization:a,activeTab:i})
h.Nc(S.TEAM_SCREEN)
updateActiveTab(e.id,i)}h.Cl()
m.Z.dispatch({actionType:c.LlY})
const n=y.Z.getEntity(e)
n?await completeOpenTeamPage(n):f.U2(e).done((e=>{completeOpenTeamPage(e)})).fail((()=>{E.ZP.error("There was an error loading the team page.")
m.Z.dispatch({actionType:c.fmb})
h.RM()}))}function openUserPage(e,t){const n=_getActiveTab(t,S.USER_PAGE_SECTION_URL_PARAM_TO_TAB,S.SETTINGS_TAB)
m.Z.dispatch({actionType:c.ZMm,userId:e,activeTab:n})
h.Nc(S.USER_SCREEN)}function inviteUser(e,t){const n=y.Z.getEntity(e)
T.Z.inviteUser(e,t).done((()=>{i.$d()
E.ZP.success(`Invited ${t} to join ${n.name}`)
fetchInfoForMembersTab(e)})).fail(E.ZP.notifyError)}async function addMember(e,t){await T.Z.addMember(e,t.id)
E.ZP.success(`Added ${(0,I.a)(t)} to organization`)
fetchInfoForMembersTab(e)}function addTeamMember(e,t){f.fZ(e,t.id).done((()=>{const n=y.Z.getEntity(e)
E.ZP.success(`Added ${(0,I.a)(t)} to ${n.name}`)
fetchInfoForMembersTab(e)})).fail(E.ZP.notifyError)}function acceptInboundRequest(e,t){const n=y.Z.getEntity(t),a=y.Z.getEntity(e)
m.Z.dispatch({actionType:c.ynf,organizationId:e,userId:t})
T.Z.acceptInboundRequest(e,t).done((()=>{E.ZP.success(`Added ${n.name} to ${a.name}.`)
fetchInfoForMembersTab(e)})).fail(E.ZP.notifyError)}function rejectInboundRequest(e,t){const n=y.Z.getEntity(t),a=y.Z.getEntity(e)
m.Z.dispatch({actionType:c.Mg7,organizationId:e,userId:t})
T.Z.rejectInboundRequest(e,t).done((()=>{E.ZP.success(`Rejected ${n.name}'s request to join ${a.name}.`)
fetchInfoForMembersTab(e)})).fail(E.ZP.notifyError)}function openCreateOrganizationPage(e){h.Cl()
m.Z.dispatch({actionType:c.I7c,organization:e})
u.Z.closeSearchOrgModal()
h.Nc(S.CREATE_ORGANIZATION_SCREEN)}function openCreateTeamPage(e){h.Cl()
T.Z.get(e).done((e=>{m.Z.dispatch({actionType:c.wIz,organization:e})
h.Nc(S.CREATE_TEAM_SCREEN)})).fail((e=>{E.ZP.error("There was an error loading the create team page.")
m.Z.dispatch({actionType:c.$Ti});(0,p.ZP)("/editor")
h.RM()}))}function createWithInfo(e,t,n){m.Z.dispatch({actionType:c.m2L})
Promise.resolve(T.Z.create(e)).then((t=>e.avatar?Promise.resolve(T.Z.updateOrganizationAvatar(t.id,e.avatar)).then((()=>t)):t)).then((e=>{(t.length||n.length)&&T.Z.inviteUsers(e.id,t,n)
return e})).then((e=>{m.Z.dispatch({actionType:c.K7y,organization:e})
h.Nc(S.SHARE_PROJECTS_SCREEN)})).catch((e=>{E.ZP.notifyError(e)
m.Z.dispatch({actionType:c.Sxe})}))}function shareProjectsWithOrganization(e,t,n){const onShareProjectsCompleted=()=>{m.Z.dispatch({actionType:c.BQc})
h.Nc(S.ORGANIZATION_SCREEN)
updateActiveTab(n,S.PROJECTS_TAB)}
if(a.default.isEmpty(e)){m.Z.dispatch({actionType:c.vav})
onShareProjectsCompleted()}else(0,s.Kz)({changeSummary:`${e.length} ${(0,l._6)(e.length,"project")} will be modified`,onRequestClose:()=>{},onRequestSubmit:()=>{m.Z.dispatch({actionType:c.vav})
d.Z.setCollaboratorForSources({entityId:n,sourceIds:e,dataPolicyIds:t}).then(onShareProjectsCompleted).catch((e=>{E.ZP.notifyError(e)
m.Z.dispatch({actionType:c.ruY})}))}},o.ZP.PROJECT_FOLDER_ENABLE_DATA_MODIFICATIONS,{module:"PROJECT_FOLDER",actionOrigin:"organization_create_flow",modifiedAction:"MODIFY",numModifiedTotalItems:e.length,entryId:null})}function update(e,t){m.Z.dispatch({actionType:c.QBG,entityId:e})
T.Z.update(e,t).done((e=>{E.ZP.success("Organization updated successfully.")
m.Z.dispatch({actionType:c.SY9,organization:e})})).fail((t=>{E.ZP.notifyError(t)
m.Z.dispatch({actionType:c.wSp,entityId:e})}))}function updateTeam(e,t){m.Z.dispatch({actionType:c.f5C,entityId:e})
f.Vx(e,t).done((e=>{E.ZP.success("Team updated successfully.")
m.Z.dispatch({actionType:c.f65,team:e})})).fail((t=>{E.ZP.notifyError(t)
m.Z.dispatch({actionType:c.idK,entityId:e})}))}async function tombstoneOrganization(e){await T.Z.tombstone(e)
E.ZP.success("Deleted organization successfully.")
window.location.href="/editor"}function deleteOrganization(e){T.Z.delete_(e).done((()=>{E.ZP.success("Deleted organization successfully.")
window.location.href="/editor"})).fail(E.ZP.notifyError)}function updateOrganizationAvatar(e,t){m.Z.dispatch({actionType:c.QBG})
T.Z.updateOrganizationAvatar(e,t).done((e=>{E.ZP.success("Avatar updated successfully.")
m.Z.dispatch({actionType:c.SY9,organization:e})})).fail((e=>{E.ZP.notifyError(e)
m.Z.dispatch({actionType:c.wSp})}))}function updateTeamAvatar(e,t){m.Z.dispatch({actionType:c.f5C})
f.q4(e,t).done((e=>{E.ZP.success("Avatar updated successfully.")
m.Z.dispatch({actionType:c.f65,team:e})})).fail((e=>{E.ZP.notifyError(e)
m.Z.dispatch({actionType:c.idK})}))}function updateMemberPermission(e,t,n){m.Z.dispatch({actionType:c.Eop,userId:t});(g.HU(e)?f.Yv(e,t,{role:n}):T.Z.updateOrganizationPermission(e,t,{memberLevel:n})).done((()=>{E.ZP.success("Permissions updated successfully.")
m.Z.dispatch({actionType:c.DIw,entityId:e,userId:t,role:n})})).fail((e=>{E.ZP.notifyError(e)
m.Z.dispatch({actionType:c.YqW,userId:t})}))}function removeMember(e,t){const n=g.HU(e),a=n?f.Ah(e,t):T.Z.removeMember(e,t)
m.Z.dispatch({actionType:c.WHe,userId:t})
a.done((()=>{E.ZP.success(`Successfully removed ${n?"team":"organization"} member.`)
m.Z.dispatch({actionType:c.sBt,entityId:e,userId:t})})).fail((e=>{E.ZP.notifyError(e)
m.Z.dispatch({actionType:c.T8U,userId:t})}))}function deleteTeam(e){f.fC(e).done((()=>{E.ZP.success("Deleted team successfully.")
window.location.href="/editor"})).fail(E.ZP.notifyError)}},936091:(e,t,n)=>{n.d(t,{_2:()=>addAndRunAnalysisStep,Ug:()=>archiveAnalysis,TN:()=>AnalysisActions_createAnalysis,UF:()=>deleteAnalysisSteps,C7:()=>unarchiveAnalysis,vP:()=>updateAnalysisOptimistically,W8:()=>updateAndRunAnalysisStep})
var a=n(294120),i=n(776065),r=n(681896),s=n(669063),o=n(932876),l=n(458573),c=n(166459),d=n(627259),u=n(771398)
var m=n(631999),p=n(353785)
function forceRefreshSearch(){(0,c.getStore)().dispatch(d.f(a.$0.ANALYTICS));(0,c.getStore)().dispatch(d.f(a.$0.SEARCH))}async function AnalysisActions_createAnalysis(e){const t=await function createAnalysis(e){return u.s0({url:"/1/api/analyses",data:e})}(e)
i.Z.openFile(t.analysisId)
forceRefreshSearch()
return t}function writeAnalysisToCache(e){(0,r.writeFragmentsToCache)(o.m,[e])}async function updateAnalysisOptimistically(e,t){await(0,s.Y)({persistData:()=>function updateAnalysis(e,t){return u.Ry({url:`/1/api/analyses/${e}`,data:t})}(e.id,t).then((()=>(0,p.Z)(e.id))),writeDataToCache:writeAnalysisToCache,optimisticData:{...e,...t},revertData:e})}async function addAndRunAnalysisStep(e,t){const{stepId:n}=await l.gn(e,t),a=await(0,p.Z)(e)
return(0,m.ZP)(a,n)}async function deleteAnalysisSteps(e,t){await l.hH(e,t)
await(0,p.Z)(e)}async function updateAndRunAnalysisStep(e,t){await l.A(e,t)
const n=await(0,p.Z)(e)
return(0,m.ZP)(n,t.stepId)}async function archiveAnalysis(e,t){const n=await l.Oz([e],t)
await(0,p.Z)(e)
forceRefreshSearch()
return n}async function unarchiveAnalysis(e){const t=await l.dM([e])
await(0,p.Z)(e)
forceRefreshSearch()
return t}},624034:(e,t,n)=>{n.d(t,{A3:()=>m,CQ:()=>o,C_:()=>l,KT:()=>i,L_:()=>c,V$:()=>d,aq:()=>u,hW:()=>r,xT:()=>s})
var a=n(271359)
const i={PROJECT_ID:"analysisTool.projectId"},r=12,s={borderRadius:4,boxShadow:"0px 0px 4px rgb(92, 124, 131, 20%)",display:"flex",flexDirection:"column",margin:r,maxHeight:`calc(100% - ${2*r}px)`},o={marginLeft:8,padding:2,":hover":{borderRadius:4,background:a.bs}}
var l
!function(e){e.BLANK="BLANK"
e.PARAMETER_OPTIMIZATION="PARAMETER_OPTIMIZATION"}(l||(l={}))
const c={[l.BLANK]:"Blank",[l.PARAMETER_OPTIMIZATION]:"Parameter optimization"},d="Editing is disabled on archived analyses",u=`${d}.`,m="Cannot modify this table since it is already used elsewhere in this analysis"},631999:(e,t,n)=>{n.d(t,{LH:()=>getNullableStepFromAnalysis,ZP:()=>getStepFromAnalysis,wL:()=>analysisHasStep})
var a=n(232606)
function getStepFromAnalysis(e,t){const n=getNullableStepFromAnalysis(e,t);(0,a.hu)(null!=n,"Could not find step",{stepId:t})
return n}function getNullableStepFromAnalysis(e,t){var n
return null!==(n=e.execution.steps.find((e=>e.id===t)))&&void 0!==n?n:null}function analysisHasStep(e,t){return null!=getNullableStepFromAnalysis(e,t)}},694582:(e,t,n)=>{n.d(t,{J:()=>o,h:()=>s})
var a=n(769784),i=n(91092),r=n(932876)
const s=a.ZP`
  query GetAnalysis($analysisId: StrictString!) @skipAudit @engComponent(name: ANALYSIS_TOOL) {
    analysis(id: $analysisId) {
      ... on AnalysisNode {
        id
        permissions {
          writable
          archivable
          unarchivable
        }
      }
      ... on PipelineInterface {
        ...PipelineFragment
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${r.m.fragment}
  ${(0,i.f)("InaccessibleInfo").fragment}
`,o=a.ZP`
  query GetAnalysisModifiedAt($analysisId: StrictString!) @skipAudit @engComponent(name: ANALYSIS_TOOL) {
    analysis(id: $analysisId) {
      ... on PipelineInterface {
        id
        modifiedAt
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("InaccessibleInfo").fragment}
`},353785:(e,t,n)=>{n.d(t,{Z:()=>refreshAnalysis})
var a=n(232606),i=n(18526),r=n(697134),s=n(694582)
async function refreshAnalysis(e){const t=await(0,i.W)().query({query:s.h,variables:{analysisId:e},fetchPolicy:"network-only"});(0,a.hu)(!(0,r.CZ)(t.data.analysis),"Tried to refresh an inaccessible analysis")
return t.data.analysis}},301288:(e,t,n)=>{n.d(t,{M:()=>createJellyfish,e:()=>updateJellyfish})
var a=n(188663),i=n(581210),r=n(771398)
function createJellyfish(e){const t=[e]
return(0,r.s0)({url:(0,i.Kq)(a.J.JELLYFISH),data:{creates:t}})}function updateJellyfish(e){const t=[e]
return(0,r.Ry)({url:`${(0,i.Kq)(a.J.JELLYFISH)}`,data:{updates:t}})}},421426:(e,t,n)=>{n.d(t,{V:()=>A,Z:()=>JellyfishView})
var a=n(769784),i=n(989526),r=n(714529),s=n(459830),o=n(751512),l=n(91092),c=n(697134),d=n(476604),u=n(692013),m=n(301288),p=n(581210),h=n(351319),E=n(620080),S=n(402360),T=n(367780),g=n(876831),f=n(263137)
function JellyfishNameEditor({name:e,handleUpdateName:t}){const n=(0,i.useRef)(null)
return i.createElement("div",{className:"metadata-header-section",...(0,f.Z)({component:"JellyfishNameEditor",element:"root"})},i.createElement(g.Z,{ref:n,initialAlias:e,isFullWidth:!1,isHeader:!0,isWritable:!0,complete:t,placeholder:"Name"}))}function DetailsRow({title:e,children:t}){return i.createElement("div",{className:"metadata-section"},i.createElement("div",{className:"metadata-header"},e),t)}function TentacleRow({isParentArchived:e,tentacle:t,reload:n}){const{name:a,archiveData:r}=t,{archived:s}=r
return i.createElement("li",{className:(0,u.iv)(I.marginBottom)},i.createElement("div",{className:(0,u.iv)(I.flexCenter)},i.createElement("div",{className:(0,u.iv)(I.archiveStatus)},`${a} | ${s?"Archived":"Not archived"}`),i.createElement(T.Z,{item:t,isArchivable:Boolean(t.permissions.archivable),isUnarchivable:!e&&Boolean(t.permissions.unarchivable),onArchive:n,onUnarchive:n})))}function JellyfishDetails({jellyfish:e,reload:t}){const{id:n,name:a,tentacles:r,archiveData:s,star:o}=e,{archived:l}=s,c=(null==o?void 0:o.isStarred)||!1
return i.createElement("div",{className:"react-tab-container",...(0,f.Z)({component:"JellyfishDetails",element:"root"})},i.createElement(JellyfishNameEditor,{name:a,handleUpdateName:async function handleUpdateName(e){await async function updateJellyfishName(e,t){await(0,m.e)({id:e,name:t})}(n,e)
t()}}),i.createElement(DetailsRow,{title:"Starred"},c?"Starred ":"Not starred ",i.createElement(h.ZP,{item:(0,p.yC)(e),isStarred:c})),i.createElement(DetailsRow,{title:"Archived"},i.createElement("div",{className:(0,u.iv)(I.flexCenter),...(0,f.Z)({component:"JellyfishDetails",element:"archiveDetailsRow"})},i.createElement("div",{className:(0,u.iv)(I.archiveStatus),...(0,f.Z)({component:"JellyfishDetails",element:"archiveStatus"})},l?"Archived":"Not archived",i.createElement(S.Z,{item:e})),i.createElement(T.Z,{item:e,onArchive:E.ap,onUnarchive:E.yg,isArchivable:Boolean(e.permissions.archivable),isUnarchivable:Boolean(e.permissions.unarchivable)}))),i.createElement(DetailsRow,{title:"Tentacles"},i.createElement("ul",null,r.map((e=>i.createElement(TentacleRow,{key:e.id,tentacle:e,isParentArchived:l,reload:t}))))))}const I=u.mM.create({marginBottom:{marginBottom:8},flexCenter:{display:"flex",alignItems:"center"},archiveStatus:{marginRight:8}}),A=a.Ps`
  query JellyfishViewQuery($id: StrictString!) @skipAudit @engComponent(name: CORE_OBJECT) {
    jellyfish(id: $id) {
      ...JellyfishFileStateGraphQL
      ...StarrableGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,l.f)("JellyfishFileState").fragment}
  ${(0,l.f)("Starrable").fragment}
  ${(0,l.f)("InaccessibleInfo").fragment}
`
function JellyfishView({id:e}){const t=(0,o.IJ)(A,{variables:{id:e}})
if(t.type===o.NI.PENDING)return i.createElement(d.b,null)
if(t.type===o.NI.SUCCESS){const{data:n}=t
if((0,c.CZ)(n.jellyfish))return i.createElement(r.Z,{inaccessibleInfo:n.jellyfish,modelType:s.JELLYFISH})
{const reload=()=>{t.refetch({id:e})}
return i.createElement(JellyfishDetails,{jellyfish:n.jellyfish,reload})}}return null}},311950:(e,t,n)=>{n.d(t,{b:()=>s,l:()=>r})
var a=n(459830),i=n(188663)
const r={[i.J.AA_SEQUENCE]:a.PROTEIN,[i.J.BOX]:a.BOX,[i.J.CONTAINER]:a.CONTAINER,[i.J.CUSTOM_ENTITY]:a.BASIC_FOLDER_ITEM,[i.J.CUSTOM_SCHEMA_INTERFACE]:a.SCHEMA_INTERFACE,[i.J.DATASET]:a.DATASET,[i.J.DNA_OLIGO]:a.SequenceSubtype.DNA_OLIGO,[i.J.DNA_SEQUENCE]:a.SequenceSubtype.SEQUENCE,[i.J.DOCUMENT]:a.DOCUMENT,[i.J.ENTITY_SCHEMA]:a.SchemaType.TAG_SCHEMA,[i.J.ENTRY]:a.ENTRY,[i.J.FEATURE_LIBRARY]:a.FEATURE_LIBRARY,[i.J.FILE]:a.FILE,[i.J.FOLDER]:a.FOLDER,[i.J.JELLYFISH]:a.JELLYFISH,[i.J.MIXTURE]:a.MIXTURE,[i.J.MOLECULE]:a.MOLECULE,[i.J.PLATE]:a.PLATE,[i.J.PROCEDURE_BATCH]:a.PROCEDURE_BATCH,[i.J.PROCEDURE_FLOWCHART_VERSION]:a.PROCEDURE_FLOWCHART_VERSION,[i.J.PROCEDURE_FLOWCHART]:a.PROCEDURE_FLOWCHART,[i.J.PROCEDURE_METHOD_DEFINITION_VERSION]:a.PROCEDURE_METHOD_DEFINITION_VERSION,[i.J.PROCEDURE_METHOD_DEFINITION]:a.PROCEDURE_METHOD_DEFINITION,[i.J.PROCEDURE_METHOD_EXECUTION_INSTANCE]:a.PROCEDURE_METHOD_EXECUTION_INSTANCE,[i.J.PROCEDURE_PARAMETER]:a.PROCEDURE_PARAMETER,[i.J.PROCEDURE_PARAMETER_CONFIRMATION_VALUE]:a.PROCEDURE_PARAMETER_CONFIRMATION_VALUE,[i.J.PROCEDURE_PARAMETER_VERSION]:a.PROCEDURE_PARAMETER_VERSION,[i.J.PROCEDURE_PLAN]:a.PROCEDURE_PLAN,[i.J.PROCEDURE_RUN]:a.PROCEDURE_RUN,[i.J.PROCEDURE_STEP_DEFINITION_VERSION]:a.PROCEDURE_STEP_DEFINITION_VERSION,[i.J.PROCEDURE_STEP_EXECUTION_INSTANCE]:a.PROCEDURE_STEP_EXECUTION_INSTANCE,[i.J.PROCEDURE]:a.PROCEDURE,[i.J.PROJECT]:a.PROJECT,[i.J.QUANTITY]:a.QUANTITY,[i.J.REGISTRY]:a.REGISTRY,[i.J.REQUEST_SCHEMA]:a.REQUEST_SCHEMA,[i.J.RESULT_SCHEMA]:a.RESULT_SCHEMA,[i.J.RESULT]:a.ASSAY_RESULT,[i.J.RNA_OLIGO]:a.SequenceSubtype.RNA_OLIGO,[i.J.RNA_SEQUENCE]:a.SequenceSubtype.RNA_SEQUENCE,[i.J.RUN_SCHEMA]:a.RUN_SCHEMA,[i.J.STAGE_ENTRY]:a.STAGE_ENTRY,[i.J.STAR]:a.STAR,[i.J.STUDY]:a.STUDY,[i.J.SYSTEM_SCHEMA_INTERFACE]:a.SYSTEM_SCHEMA_INTERFACE,[i.J.TEMPLATE_COLLECTION]:a.TEMPLATE_COLLECTION,[i.J.TENTACLE]:a.TENTACLE,[i.J.UNIT]:a.UNIT,[i.J.USER]:a.USER,[i.J.WORKFLOW_TASK]:a.PROCESS_TASK,[i.J.WORKFLOW_OUTPUT]:a.PROCESS_OUTPUT,[i.J.WORKFLOW_OUTPUT_SCHEMA]:a.PROCESS_OUTPUT_SCHEMA,[i.J.WORKFLOW_TASK_SCHEMA]:a.PROCESS_TASK_SCHEMA,[i.J.WORKFLOW_TASK_GROUP]:a.PROCESS,[i.J.WORKLIST]:a.WORKLIST,[i.J.WORKSHEET]:a.WORKSHEET},s=Object.fromEntries(Object.entries(r).map((([e,t])=>[t,e])))},442058:(e,t,n)=>{n.d(t,{Ac:()=>s,C1:()=>i})
var a=n(64558)
const i={AA_SEQUENCE:"AA_SEQUENCE",BOX:"BOX",CONTAINER:"CONTAINER",CUSTOM_ENTITY:"CUSTOM_ENTITY",CUSTOM_SCHEMA_INTERFACE:"CUSTOM_SCHEMA_INTERFACE",DATASET:"DATASET",DNA_OLIGO:"DNA_OLIGO",DNA_SEQUENCE:"DNA_SEQUENCE",DOCUMENT:"DOCUMENT",ENTITY_SCHEMA:"ENTITY_SCHEMA",ENTRY:"ENTRY",FEATURE_LIBRARY:"FEATURE_LIBRARY",FILE:"FILE",FOLDER:"FOLDER",JELLYFISH:"JELLYFISH",MIXTURE:"MIXTURE",MOLECULE:"MOLECULE",PLATE:"PLATE",PROCEDURE:"PROCEDURE",PROCEDURE_BATCH:"PROCEDURE_BATCH",PROCEDURE_FLOWCHART:"PROCEDURE_FLOWCHART",PROCEDURE_FLOWCHART_VERSION:"PROCEDURE_FLOWCHART_VERSION",PROCEDURE_METHOD_DEFINITION:"PROCEDURE_METHOD_DEFINITION",PROCEDURE_METHOD_DEFINITION_VERSION:"PROCEDURE_METHOD_DEFINITION_VERSION",PROCEDURE_METHOD_EXECUTION_INSTANCE:"PROCEDURE_METHOD_EXECUTION_INSTANCE",PROCEDURE_PARAMETER:"PROCEDURE_PARAMETER",PROCEDURE_PARAMETER_CONFIRMATION_VALUE:"PROCEDURE_PARAMETER_CONFIRMATION_VALUE",PROCEDURE_PARAMETER_VERSION:"PROCEDURE_PARAMETER_VERSION",PROCEDURE_PLAN:"PROCEDURE_PLAN",PROCEDURE_RUN:"PROCEDURE_RUN",PROCEDURE_STEP_DEFINITION_VERSION:"PROCEDURE_STEP_DEFINITION_VERSION",PROCEDURE_STEP_EXECUTION_INSTANCE:"PROCEDURE_STEP_EXECUTION_INSTANCE",PROJECT:"PROJECT",QUANTITY:"QUANTITY",REGISTRY:"REGISTRY",REQUEST_SCHEMA:"REQUEST_SCHEMA",RESULT:"RESULT",RESULT_SCHEMA:"RESULT_SCHEMA",RNA_OLIGO:"RNA_OLIGO",RNA_SEQUENCE:"RNA_SEQUENCE",RUN_SCHEMA:"RUN_SCHEMA",STAGE_ENTRY:"STAGE_ENTRY",STAR:"STAR",STUDY:"STUDY",SYSTEM_SCHEMA_INTERFACE:"SYSTEM_SCHEMA_INTERFACE",TEMPLATE_COLLECTION:"TEMPLATE_COLLECTION",TENTACLE:"TENTACLE",UNIT:"UNIT",USER:"USER",WORKFLOW_OUTPUT:"WORKFLOW_OUTPUT",WORKFLOW_OUTPUT_SCHEMA:"WORKFLOW_OUTPUT_SCHEMA",WORKFLOW_TASK:"WORKFLOW_TASK",WORKFLOW_TASK_GROUP:"WORKFLOW_TASK_GROUP",WORKFLOW_TASK_SCHEMA:"WORKFLOW_TASK_SCHEMA",WORKLIST:"WORKLIST",WORKSHEET:"WORKSHEET"},r=[["assaysch",new Set([i.REQUEST_SCHEMA,i.RESULT_SCHEMA,i.RUN_SCHEMA])],["bfi",new Set([i.CUSTOM_ENTITY])],["box",new Set([i.BOX])],["con",new Set([i.CONTAINER])],["dataset",new Set([i.DATASET])],["doc",new Set([i.DOCUMENT])],["ent",new Set([i.USER])],["etr",new Set([i.ENTRY])],["featlib",new Set([i.FEATURE_LIBRARY])],["file",new Set([i.FILE])],["intrfc",new Set([i.CUSTOM_SCHEMA_INTERFACE])],["jly",new Set([i.JELLYFISH])],["lib",new Set([i.FOLDER])],["mol",new Set([i.MOLECULE])],["mxt",new Set([i.MIXTURE])],["pc",new Set([i.PROCEDURE])],["pcb",new Set([i.PROCEDURE_BATCH])],["pcfc",new Set([i.PROCEDURE_FLOWCHART])],["pcfcv",new Set([i.PROCEDURE_FLOWCHART_VERSION])],["pcmd",new Set([i.PROCEDURE_METHOD_DEFINITION])],["pcmdv",new Set([i.PROCEDURE_METHOD_DEFINITION_VERSION])],["pcmei",new Set([i.PROCEDURE_METHOD_EXECUTION_INSTANCE])],["pcp",new Set([i.PROCEDURE_PLAN])],["pcparam",new Set([i.PROCEDURE_PARAMETER])],["pcparamval",new Set([i.PROCEDURE_PARAMETER_CONFIRMATION_VALUE])],["pcparamver",new Set([i.PROCEDURE_PARAMETER_VERSION])],["pcr",new Set([i.PROCEDURE_RUN])],["pcsdv",new Set([i.PROCEDURE_STEP_DEFINITION_VERSION])],["pcsei",new Set([i.PROCEDURE_STEP_EXECUTION_INSTANCE])],["plt",new Set([i.PLATE])],["prs",new Set([i.WORKFLOW_TASK_GROUP])],["prsosch",new Set([i.WORKFLOW_OUTPUT_SCHEMA])],["prstsch",new Set([i.WORKFLOW_TASK_SCHEMA])],["prtn",new Set([i.AA_SEQUENCE])],["qnty",new Set([i.QUANTITY])],["result",new Set([i.RESULT])],["seq",new Set([i.DNA_OLIGO,i.DNA_SEQUENCE,i.RNA_OLIGO,i.RNA_SEQUENCE])],["src",new Set([i.PROJECT,i.REGISTRY])],["ssi",new Set([i.SYSTEM_SCHEMA_INTERFACE])],["star",new Set([i.STAR])],["stdy",new Set([i.STUDY])],["stgentr",new Set([i.STAGE_ENTRY])],["tmplcol",new Set([i.TEMPLATE_COLLECTION])],["tntcl",new Set([i.TENTACLE])],["ts",new Set([i.ENTITY_SCHEMA])],["unit",new Set([i.UNIT])],["wfout",new Set([i.WORKFLOW_OUTPUT])],["wftask",new Set([i.WORKFLOW_TASK])],["wkl",new Set([i.WORKLIST])],["wks",new Set([i.WORKSHEET])]],s=(0,a.m8)(r)},358630:(e,t,n)=>{n.d(t,{z:()=>a})
const a={CAN_EDIT_WORKFLOW_SCHEMA_FIELD_VALUES:"CAN_EDIT_WORKFLOW_SCHEMA_FIELD_VALUES",COLLABORATABLE:"COLLABORATABLE",CORE_OBJECT_ARCHIVABLE:"CORE_OBJECT_ARCHIVABLE",DATA_CATALOG_ITEM:"DATA_CATALOG_ITEM",HAS_CUSTOM_FIELDS:"HAS_CUSTOM_FIELDS",STARRABLE:"STARRABLE",STUDYABLE:"STUDYABLE"}},236522:(e,t,n)=>{n.d(t,{X9:()=>coreObjectArchiveAction,j5:()=>coreObjectUnarchiveAction})
var a=n(769784),i=n(188663),r=n(581210),s=n(347246),o=n(650821),l=n(232606),c=n(787004),d=n(681896),u=n(91092),m=n(697134),p=n(947730),h=n(974913)
const E=a.Ps`
  query CoreObjectArchivableItemsQuery($ids: [StrictString!]!) @skipAudit @engComponent(name: CORE_OBJECT) {
    coreObjectArchivableItems(ids: $ids) {
      ...CoreObjectArchivableGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,u.f)("CoreObjectArchivable").fragment}
  ${(0,u.f)("InaccessibleInfo").fragment}
`
async function doCoreObjectArchivableQuery(e){return(await(0,d.doQuerySafe)({query:E},{variables:{ids:e},fetchPolicy:"network-only"})).coreObjectArchivableItems}function getPermissionsById(e){return Object.fromEntries(e.map((e=>{(0,l.hu)(!(0,m.CZ)(e),"CoreObjectArchivableItem must be accessible");(0,l.hu)("permissions"in e,"CoreObjectArchivableItem item must implement HasPermissionsInterface")
return[e.id,e.permissions]})))}async function coreObjectArchiveAction(e,t){const n=(0,r.uB)(e.map((e=>({id:e}))),i.i.CORE_OBJECT_ARCHIVABLE).map((({id:e})=>e))
if(n.length>0){const e=await o.o2(n,t)
h.ZP.success("Items successfully archived.")
!async function refreshCoreObjectFileStatesAndDispatchEventArchived(e,t){const n=getPermissionsById(await doCoreObjectArchivableQuery(e))
p.Z.dispatch({actionType:c.RXe,itemIds:e,permissionsByItemId:n,archiveRecordsByItemId:Object.fromEntries(e.map((e=>[e,{purpose:t}])))})}(e.updatedIds,t);(0,s.Z)()}}async function coreObjectUnarchiveAction(e){const t=(0,r.uB)(e.map((e=>({id:e}))),i.i.CORE_OBJECT_ARCHIVABLE).map((({id:e})=>e))
if(t.length>0){const e=await o.TL(t)
h.ZP.success("Items successfully unarchived.")
!async function refreshCoreObjectFileStatesAndDispatchEventUnarchived(e){const t=getPermissionsById(await doCoreObjectArchivableQuery(e))
p.Z.dispatch({actionType:c.GaI,itemIds:e,permissionsByItemId:t})}(e.updatedIds);(0,s.Z)()}}},351319:(e,t,n)=>{n.d(t,{Ox:()=>S,ZP:()=>CoreObjectStarIconRenderer,fH:()=>useStarredItemsQuery,sf:()=>handleToggleStar})
var a=n(769784),i=n(64558),r=n(989526),s=n(188663),o=n(581210),l=n(347246),c=n(112526),d=n(681896),u=n(751512),m=n(91092),p=n(697134),h=n(470755),E=n(788836)
const S=a.Ps`
  query StarrableItemsQuery($ids: [StrictString!]!) @skipAudit @engComponent(name: CORE_OBJECT) {
    starrableItems(ids: $ids) {
      ...StarrableGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,m.f)("Starrable").fragment}
  ${(0,m.f)("InaccessibleInfo").fragment}
`
function useStarredItemsQuery(e){const t=(0,o.uB)(e,s.i.STARRABLE).map((({id:e})=>e)),n=(0,u.A4)(S,{skip:0===t.length||!E.Z.currentUser(),variables:{ids:t},renderCachedDataWhenRefetching:!0}),a={type:n.type}
return n.type===u.NI.PENDING||n.type===u.NI.ERROR||n.type===u.NI.SKIPPED?{...a,starredItemsByObjectId:{}}:{...a,starredItemsByObjectId:(0,i.m8)((0,p.mj)(n.data.starrableItems).map((e=>{var t
return[e.id,(null===(t=e.star)||void 0===t?void 0:t.isStarred)||!1]})))}}async function handleToggleStar({item:e,isStarred:t}){const n=t?c.R:c.t
await n([e])
await(0,d.doQuerySafe)({query:S},{variables:{ids:[e.id]},fetchPolicy:"network-only"});(0,l.Z)()}function CoreObjectStarIcon({item:e,isStarred:t}){return r.createElement(h.Z,{onClick:()=>{handleToggleStar({item:e,isStarred:t})},starred:t})}function CoreObjectStarIconRenderer({item:e,isStarred:t}){return E.Z.currentUser()&&r.createElement(CoreObjectStarIcon,{item:e,isStarred:t})}},620080:(e,t,n)=>{n.d(t,{$K:()=>bulkArchiveTagSchemas,$k:()=>bulkUnarchiveSourcesWithDataMods,Af:()=>bulkArchiveStorableSchemas,At:()=>bulkArchiveStorablesWithDataMods,CV:()=>bulkUnarchiveConnections,FI:()=>bulkUnarchiveTemplateCollections,JT:()=>bulkArchiveSchemaFieldSelectors,Jb:()=>bulkUnarchiveAnalyses,Jv:()=>bulkArchiveRegistries,KT:()=>bulkArchiveTemplateCollections,Q0:()=>bulkUnarchiveSchemaFieldSelectors,QR:()=>bulkUnarchiveStorableSchemas,Qv:()=>j,R0:()=>overridePurpose,RH:()=>bulkUnarchiveAssaySchemas,RS:()=>bulkUnarchiveTagSchemas,WL:()=>bulkArchiveProcessManagement,YK:()=>bulkUnarchiveProcessManagement,Zn:()=>J,_B:()=>bulkArchiveConnections,ap:()=>bulkArchiveFilesWithDataMods,do:()=>bulkArchiveAnalyses,i$:()=>bulkArchiveAssaySchemas,iA:()=>bulkUnarchiveStorablesWithDataMods,lU:()=>bulkUnarchiveAssayRuns,pw:()=>bulkArchiveRequestTaskSchemas,xn:()=>bulkArchiveAssayRuns,yg:()=>bulkUnarchiveFilesWithDataMods,z2:()=>bulkUnarchiveRequestTaskSchemas,zP:()=>bulkArchiveSourcesWithDataMods})
var a=n(769784),i=n(64558),r=n(188663),s=n(581210),o=n(236522),l=n(764677),c=n(157530),d=n(232606),u=n(609630),m=n(348920),p=n(787004),h=n(459830),E=n(343748),S=n(518352),T=n(741522),g=n(390462),f=n(681896),I=n(161592),A=n(408446),y=n(947730),_=n(138966),C=n(669063),R=n(579635),N=n(974913),O=n(458573),b=n(609133),v=n(166459),P=n(839810),L=n(2272),D=n(785085),M=n(944082),w=n(837127),F=n(930113),k=n(276637),U=n(53433),x=n(162617),B=(n(944572),n(386382)),Z=n(532275),q=n(508340),G=n(684503),V=n(938722),H=n(87209),W=n(379346),Y=n(883026)
const $={__typename:"ArchiveRecordNode",purpose:l.Fj}
function archiveSuccess(e,t,n={}){N.ZP.success("Items successfully archived.")
y.Z.dispatch({actionType:t,itemIds:e.archivedItemIds,...n})}function unarchiveSuccess(e,t,n={}){N.ZP.success("Items successfully unarchived.")
y.Z.dispatch({actionType:t,itemIds:e.unarchivedItemIds,...n})}function overridePurpose(e,t){return c.Ri(t)?e:l.Fj}function _invalidateFolders(e){e.filter((e=>W.ZP.isFolder(e))).forEach((e=>{S.Z.invalidateFolder(e)
for(const t in g.O)if(g.Z.get(g.O[t])===e){g.Z.unset(g.O[t])
break}}))}async function bulkArchiveAssaySchemas(e,t){const n=await(0,Y.jI)(k.uc(e,overridePurpose(t,e)),"Archiving..."),{archiveRecordsByItemId:a}=n
archiveSuccess(n,p.F$I,{archiveRecordsByItemId:a});(0,v.getStore)().dispatch(M.r9(n.archivedItemIds,a))}async function bulkUnarchiveAssaySchemas(e){const t=await k.Re(e)
unarchiveSuccess(t,p.N80);(0,v.getStore)().dispatch(M.UV(t.unarchivedItemIds))}function bulkArchiveRequestTaskSchemas(e,t){return async n=>{const a=await(0,Y.jI)(w.uc(e,overridePurpose(t,e)),"Archiving...")
n(F.iO(a.archivedItemIds,a.archiveRecordsByItemId))}}function bulkUnarchiveRequestTaskSchemas(e){return async t=>{const n=await w.Re(e)
t(F.$(n.unarchivedItemIds))}}async function bulkArchiveStorablesWithDataMods(e,t,{shouldRemoveBarcodes:n,shouldArchiveContainedSamples:a}){const i=e.some((e=>[h.BOX,h.LOCATION,h.PLATE].includes(W.ZP.apiIdToType(e))))
await(0,u.GE)({changeSummary:(0,B.P_)({apiIds:e,action:B.wV.ARCHIVE,modifyContainedSamples:null!=a&&a,modifyContainedStorables:i}),onRequestClose:()=>{},onRequestSubmit:async()=>{await async function bulkArchiveStorables(e,t,{shouldRemoveBarcodes:n,shouldArchiveContainedSamples:a}){H.$Z("Archiving...")
await(0,C.Y)({persistData:async()=>await Z.uc(e,overridePurpose(t,e),{shouldRemoveBarcodes:n,shouldArchiveContainedSamples:a}).done((n=>{archiveSuccess(n,p.giy)
refreshChipsArchiveStatus(n.archivedItemIds.filter((t=>!e.includes(t))),t)})),optimisticData:{ids:e,purpose:t},revertData:{ids:e,purpose:null},writeDataToCache:({purpose:t})=>{refreshChipsArchiveStatus(e,t)}}).catch(N.ZP.notifyError).finally((()=>{H.Cp()}))}(e,t,{shouldRemoveBarcodes:n,shouldArchiveContainedSamples:null!=a&&a})}},m.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:B.wV.ARCHIVE,numModifiedTotalItems:e.length,entryId:null})}const K={fragment:a.Ps`
    fragment StorableArchiveRecordFragment on StorableInterface {
      __typename
      id
      archiveRecord {
        purpose
      }
    }
  `,fragmentName:"StorableArchiveRecordFragment"},z={fragment:a.Ps`
    fragment BioentityArchiveRecordFragment on RegistryItemInterface {
      __typename
      id
      archiveRecord {
        purpose
      }
    }
  `,fragmentName:"BioentityArchiveRecordFragment"}
function refreshChipsArchiveStatus(e,t){const n=[],a=[],i=[]
for(const t of e)W.ZP.isStorable(t)?n.push(t):W.ZP.isBiologicalEntity(t)?a.push(t):i.push(t);(0,d.Gp)(0===i.length,`refreshChipsArchiveStatus expected only storable and bioentity ids but also received: ${JSON.stringify(i)}`)
const r=(0,I.Lo)()
n.length>0&&(0,f.writeFragmentsToCache)(K,n.map((e=>({__typename:r.getTypenameFromID(e),id:e,archiveRecord:t?{...$,purpose:t}:null}))))
if(a.length>0){const e=t?{__typename:"ArchiveRecordNode",purpose:t}:null;(0,f.writeFragmentsToCache)(z,a.map((t=>({__typename:r.getTypenameFromID(t),id:t,archiveRecord:e}))))}(a.length>0||n.length>0)&&(0,V.R8)()}async function bulkArchiveProcessManagement(e,t,n){try{const a=await(0,Y.jI)(b.uc(e,t,overridePurpose(n,t)),"Archiving..."),i=Object.fromEntries(t.map((e=>[e,{purpose:n}])))
archiveSuccess(a,p.bYo,{archiveRecordsByItemId:i})
return a}catch(e){N.ZP.notifyError(e)}}async function bulkUnarchiveProcessManagement(e,t){try{const n=await(0,Y.jI)(b.Re(e,t),"Unarchiving...")
unarchiveSuccess(n,p.P_e)
return n}catch(e){N.ZP.notifyError(e)}}async function bulkArchiveConnections(e,t){try{archiveSuccess(await(0,Y.jI)(A.uc(e,overridePurpose(t,e)),"Archiving..."),p._sH)}catch(e){N.ZP.notifyError(e)}}async function bulkUnarchiveConnections(e){try{unarchiveSuccess(await(0,Y.jI)(A.Re(e),"Unarchiving..."),p.D2i)}catch(e){N.ZP.notifyError(e)}}async function bulkArchiveTemplateCollections(e,t,n,a){try{archiveSuccess(await(0,Y.jI)(R.Z.bulkArchive(e,overridePurpose(t,e)),"Archiving..."),p.dNY)
null!=a&&a()}catch(e){N.ZP.notifyError(e)}}async function bulkUnarchiveTemplateCollections(e,t,n){try{unarchiveSuccess(await(0,Y.jI)(R.Z.bulkUnarchive(e),"Unarchiving..."),p.T0Q)
n&&n()}catch(e){N.ZP.notifyError(e)}}async function bulkArchiveAnalyses(e,t){try{archiveSuccess(await(0,Y.jI)(O.Oz(e,t),"Archiving..."),p.eVR)}catch(e){N.ZP.notifyError(e)}}async function bulkUnarchiveAnalyses(e){try{unarchiveSuccess(await(0,Y.jI)(O.dM(e),"Unarchiving..."),p.$4p)}catch(e){N.ZP.notifyError(e)}}function getBulkArchiveFilesTrackingModule(e){return e?"SAMPLES":"REGISTRY"}function bulkArchiveFilesWithDataMods(e,t,n,a){const l=e.filter((e=>W.ZP.isBiologicalEntity(e))),c=e.filter((e=>W.ZP.isStorable(e))),d=e.filter((e=>W.ZP.isFolder(e))),S=c.some((e=>[h.BOX,h.LOCATION,h.PLATE].includes(W.ZP.apiIdToType(e)))),T=d.length>0,g=n.hasRegisteredItems||c.length>0,f=m.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS||m.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,I=T||g,A=[...l,...c,...d];(0,u.Kz)({changeSummary:I?(0,B.P_)({apiIds:A,action:B.wV.ARCHIVE,modifyContainedStorables:S,modifyContainedSamples:n.shouldArchiveContainedSamples}):"",onRequestClose:()=>{},onRequestSubmit:()=>{!function bulkArchiveFiles(e,t,n,a){const[l,c]=(0,i.uK)(e,(e=>(0,s.Dj)({id:e},r.i.CORE_OBJECT_ARCHIVABLE)))
!function legacyBulkArchiveFiles(e,t,{shouldRemoveShortcuts:n,shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,parentFolderIds:r,shouldRemoveBarcodes:s,shouldArchiveContainedSamples:o,resultPurpose:l},c){if(0===e.length)return
H.$Z("Archiving...")
E.uc(e,overridePurpose(t,e),{shouldRemoveShortcuts:n,shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,shouldRemoveBarcodes:s,shouldArchiveContainedSamples:o,resultPurpose:l}).done((e=>{archiveSuccess(e,p.RXe,{permissionsByItemId:e.permissionsByItemId,archiveRecordsByItemId:e.archiveRecordsByItemId})
null!=c&&c()
_invalidateFolders(e.archivedItemIds)
a&&null!=i&&P.Z.dispatchForUnregister(Object.values(e.unregisterDataByItemId),i,r,e.permissionsByItemId);(0,U.BU)(e.archiveRecordsByItemId)
refreshChipsArchiveStatus(e.archivedItemIds.filter((e=>W.ZP.isBiologicalEntity(e))),t)})).fail(N.ZP.notifyError).always((()=>{H.Cp()}))}(c,t,n,a)
o.X9(l,t)}(e,t,n,a)}},f&&I,{module:getBulkArchiveFilesTrackingModule(c.length>0),actionOrigin:"inventory_registry_search_ui",modifiedAction:B.wV.ARCHIVE,numModifiedTotalItems:A.length,entryId:null})}function bulkArchiveSourcesWithDataMods(e,t,{shouldRemoveShortcuts:n,shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,parentFolderIds:r}){(0,u.Kz)({changeSummary:(0,B.P_)({apiIds:e,action:B.wV.ARCHIVE,modifyContainedSamples:!0,modifyContainedStorables:!0}),onRequestClose:()=>{},onRequestSubmit:()=>{!function bulkArchiveSources(e,t,{shouldRemoveShortcuts:n,shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,parentFolderIds:r}){H.$Z("Archiving...")
T.Z.bulkArchive(e,overridePurpose(t,e),{shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,shouldRemoveShortcuts:n}).done((e=>{_invalidateFolders(e.archivedItemIds)
archiveSuccess(e,p.Iyg,{permissionsByItemId:e.permissionsByItemId,archiveRecordsByItemId:e.archiveRecordsByItemId});(0,d.Gp)(!a||null!=i,"Expected 'unregisteredBioentitiesFolderId' to be present if shouldUnregisterBioentities is true")
a&&null!=i&&P.Z.dispatchForUnregister(Object.values(e.unregisterDataByItemId),i,r,e.permissionsByItemId)})).fail(N.ZP.notifyError).always((()=>{H.Cp()}))}(e,t,{shouldRemoveShortcuts:n,shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,parentFolderIds:r})}},m.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS||m.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,{module:"NAVIGATION",actionOrigin:"inventory_registry_search_ui",modifiedAction:B.wV.ARCHIVE,numModifiedTotalItems:e.length,entryId:null})}function bulkArchiveRegistries(e,t){(0,d.hu)(1===e.length,"Currently only archiving a single registry is supported")
H.$Z("Archiving...")
L.uc(e,overridePurpose(t,e)).done((t=>{archiveSuccess(t,p.ydO,{registryId:e[0]});(0,_.ZP)("/editor")})).fail(N.ZP.notifyError).always((()=>{H.Cp()}))}function bulkArchiveTagSchemas(e,t){H.$Z("Archiving...")
G.uc(e,overridePurpose(t,e)).done((e=>{archiveSuccess(e,p.bix,{archiveRecordsByItemId:e.archiveRecordsByItemId})})).fail(N.ZP.notifyError).always((()=>{H.Cp()}))}function bulkArchiveStorableSchemas(e,t){H.$Z("Archiving...")
q.uc(e,overridePurpose(t,e)).done((e=>{archiveSuccess(e,p.AG_,{archiveRecordsByItemId:e.archiveRecordsByItemId})})).fail(N.ZP.notifyError).always((()=>{H.Cp()}))}function bulkArchiveSchemaFieldSelectors(e,t){H.$Z("Archiving...")
D.Z.bulkArchive(e,overridePurpose(t,e)).done((e=>{archiveSuccess(e,p.XhU,{archiveRecordsByItemId:e.archiveRecordsByItemId})})).fail(N.ZP.notifyError).always((()=>{H.Cp()}))}async function bulkUnarchiveStorablesWithDataMods(e){const t=e.some((e=>[h.BOX,h.LOCATION,h.PLATE].includes(W.ZP.apiIdToType(e))))
await(0,u.GE)({changeSummary:(0,B.P_)({apiIds:e,action:B.wV.UNARCHIVE,modifyContainedStorables:t}),onRequestClose:()=>{},onRequestSubmit:async()=>{await async function bulkUnarchiveStorables(e){await Z.Re(e).done((e=>{unarchiveSuccess(e,p.vNk)})).fail(N.ZP.notifyError)}(e)}},m.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:B.wV.UNARCHIVE,numModifiedTotalItems:e.length,entryId:null})}function bulkUnarchiveFilesWithDataMods(e,{hasRegisteredItems:t}={},n){const a=e.filter((e=>W.ZP.isBiologicalEntity(e))),l=e.filter((e=>W.ZP.isStorable(e))),c=e.filter((e=>W.ZP.isFolder(e))),d=l.some((e=>[h.BOX,h.LOCATION,h.PLATE].includes(W.ZP.apiIdToType(e)))),S=c.length>0,T=t||l.length>0,g=[...a,...l,...c],f=m.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS||m.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,I=S||T;(0,u.Kz)({changeSummary:I?(0,B.P_)({apiIds:g,action:B.wV.UNARCHIVE,modifyContainedStorables:d}):"",onRequestClose:()=>{},onRequestSubmit:()=>{!function bulkUnarchiveFiles(e,t){const[n,a]=(0,i.uK)(e,(e=>(0,s.Dj)({id:e},r.i.CORE_OBJECT_ARCHIVABLE)))
!function legacyBulkUnarchiveFiles(e,t){if(0===e.length)return
E.Re(e).done((e=>{_invalidateFolders(e.unarchivedItemIds)
t&&t()
refreshChipsArchiveStatus(e.unarchivedItemIds.filter((e=>W.ZP.isBiologicalEntity(e))),null)
unarchiveSuccess(e,p.GaI,{permissionsByItemId:e.permissionsByItemId})})).fail(N.ZP.notifyError)}(a,t)
o.j5(n)}(e,n)}},f&&I,{module:getBulkArchiveFilesTrackingModule(l.length>0),actionOrigin:"inventory_registry_search_ui",modifiedAction:B.wV.UNARCHIVE,numModifiedTotalItems:g.length,entryId:null})}function bulkUnarchiveSourcesWithDataMods(e){(0,u.Kz)({changeSummary:(0,B.P_)({apiIds:e,action:B.wV.UNARCHIVE,modifyContainedSamples:!0,modifyContainedStorables:!0}),onRequestClose:()=>{},onRequestSubmit:()=>{!function bulkUnarchiveSources(e){T.Z.bulkUnarchive(e).done((e=>{_invalidateFolders(e.unarchivedItemIds)
unarchiveSuccess(e,p.WKo,{permissionsByItemId:e.permissionsByItemId})})).fail(N.ZP.notifyError)}(e)}},m.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS||m.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,{module:"NAVIGATION",actionOrigin:"inventory_registry_search_ui",modifiedAction:B.wV.UNARCHIVE,numModifiedTotalItems:e.length,entryId:null})}function bulkUnarchiveTagSchemas(e){G.Re(e).done((e=>{unarchiveSuccess(e,p.vK4)})).fail(N.ZP.notifyError)}function bulkUnarchiveStorableSchemas(e){q.Re(e).done((e=>{unarchiveSuccess(e,p.Seb)})).fail(N.ZP.notifyError)}function bulkUnarchiveSchemaFieldSelectors(e){D.Z.bulkUnarchive(e).done((e=>{unarchiveSuccess(e,p.$pu)})).fail(N.ZP.notifyError)}var Q
!function(e){e.ARCHIVE_RUNS_COMPLETED="ARCHIVE_RUNS_COMPLETED"
e.UNARCHIVE_RUNS_COMPLETED="UNARCHIVE_RUNS_COMPLETED"}(Q||(Q={}))
const j="ARCHIVE_RUNS_COMPLETED"
const J="UNARCHIVE_RUNS_COMPLETED"
function bulkArchiveAssayRuns(e,t){return async n=>{const{archivedItemIds:a}=await x.cZ(e,t)
n(function assayRunsArchiveSuccess(e,t){return{type:Q.ARCHIVE_RUNS_COMPLETED,ids:e,purpose:t}}(a,t))}}function bulkUnarchiveAssayRuns(e){return async t=>{const{unarchivedItemIds:n}=await x.Ve(e)
t(function assayRunsUnarchiveSuccess(e){return{type:Q.UNARCHIVE_RUNS_COMPLETED,ids:e}}(n))}}},804589:(e,t,n)=>{n.d(t,{cI:()=>getUnarchiveAction,ng:()=>getArchiveActionInfoFromModelTypes,np:()=>getArchiveAction})
var a=n(188663),i=n(581210),r=n(236522),s=n(459830),o=n(379346),l=n(620080)
const c=Array.from((0,i.$S)(a.i.CORE_OBJECT_ARCHIVABLE)).map((e=>(0,i.Mx)(e))),d=[...s.STORABLE_ITEMS,s.BASIC_FOLDER_ITEM,s.BATCH,s.BULK_ASSEMBLY,s.ENTRY,s.FOLDER,s.FORM_DEFINITION,s.MIXTURE,s.MOLECULE,s.PROCESS,s.PROCESS_OUTPUT,s.PROCESS_TASK,s.PROTEIN,s.PROTOCOL,s.SEQUENCE,s.STUDY,s.SUBTEMPLATE,s.TEMPLATE],u=[{modelTypes:[s.SOURCE],archive:l.zP,unarchive:l.$k},{modelTypes:d,archive:l.ap,unarchive:l.yg},{modelTypes:[s.CONNECTION],archive:l._B,unarchive:l.CV},{modelTypes:[s.TEMPLATE_COLLECTION],archive:l.KT,unarchive:l.FI},{modelTypes:[s.ANALYSIS],archive:l.do,unarchive:l.Jb},{modelTypes:c,archive:r.X9,unarchive:r.j5}]
function getArchiveActionInfoFromModelTypes(e){var t
return null!==(t=u.find((t=>e.every((e=>t.modelTypes.includes(e))))))&&void 0!==t?t:null}function getArchiveAction(e){const t=getArchiveActionInfoFromModelTypes(e.map((e=>o.ZP.apiIdToType(e))))
if(!t)throw new Error("Invalid ids for getArchiveAction")
return t.archive}function getUnarchiveAction(e){const t=getArchiveActionInfoFromModelTypes(e.map((e=>o.ZP.apiIdToType(e))))
if(!t)throw new Error("Invalid ids for getUnarchiveAction")
return t.unarchive}},764677:(e,t,n)=>{n.d(t,{BH:()=>u,Fj:()=>l,HH:()=>g,LA:()=>S,Qr:()=>h,S:()=>p,TO:()=>m,Ue:()=>c,iT:()=>E,k0:()=>T,nr:()=>a,p1:()=>d,tR:()=>s,uv:()=>isArchiveRecordGraphQL,yP:()=>o})
var a,i=n(602652),r=n(3472)
!function(e){e.IS_ARCHIVED="IS_ARCHIVED"
e.NOT_ARCHIVED="NOT_ARCHIVED"}(a||(a={}))
const s="Archived",o="Not archived",l="Other",c="Expended",d="Batch schema deactivated by containable type change",u="NOT_ARCHIVED",m="Not archived",p="ALL_ARCHIVED",h="All archived",E="Archived",S="ANY_ARCHIVED",T=i.shape({purpose:i.string.isRequired})
function isArchiveRecordGraphQL(e){return Boolean(e&&e.hasOwnProperty("__typename")&&"ArchiveRecordNode"===e.__typename)}const g={archiveRecord:T,id:i.string.isRequired,name:i.string.isRequired,projectFolder:r.DEPRECATED_FOLDER_SHAPE},f=i.shape(g)
i.arrayOf(f)},650821:(e,t,n)=>{n.d(t,{TL:()=>unarchiveItems,nU:()=>getItemsForArchive,o2:()=>archiveItems})
var a=n(581210),i=n(771398),r=n(8747)
function getItemsForArchive(e,{shouldDetectShortcuts:t}){return(0,r.ty)({url:"/1/api/archive:get-items-for-archive",data:{itemIds:e,shouldDetectShortcuts:t}})}function archiveItems(e,t){const n=e.map((e=>({id:e,isArchived:!0,archiveReason:t})))
return(0,i.Ry)({url:(0,a.Kq)((0,a.tQ)({id:e[0]})),data:{updates:n}})}function unarchiveItems(e){const t=e.map((e=>({id:e,isArchived:!1})))
return(0,i.Ry)({url:(0,a.Kq)((0,a.tQ)({id:e[0]})),data:{updates:t}})}},759426:(e,t,n)=>{n.d(t,{F:()=>filterItemsToPurposes})
var a=n(764677),i=n(382857)
function filterItemsToPurposes(e,t){return null==e?null:e.filter((e=>!((0,i.ZP)(e)||!t.includes(a.BH))||!(!(0,i.ZP)(e)||null==e.archiveRecord||!t.includes(e.archiveRecord.purpose))))}},157530:(e,t,n)=>{n.d(t,{FH:()=>getPurposesForFolderSection,H3:()=>getArchiveItemName,Lv:()=>attachArchivePurpose,Nu:()=>getAllArchivePurposes,Q:()=>getArchiveText,Ri:()=>areArchivePurposesVisible,dz:()=>getArchivePurpose,oc:()=>getValidArchivePurposes,oq:()=>getVisibleArchivePurposes})
var a=n(531041),i=n(232606),r=n(348920),s=n(239070),o=n(459830),l=n(379346),c=n(764677),d=n(382857)
function isNonData(e){return"string"!=typeof e||[o.ASSAY_SCHEMA,o.BATCH_SCHEMA,o.BENCHLING_APP,o.BOX_SCHEMA,o.CONTAINER_SCHEMA,o.CONNECTION_SCHEMA,o.LOCATION_SCHEMA,o.PLATE_SCHEMA,o.PROCESS_SCHEMA,o.PROCESS_TASK_SCHEMA,o.REQUEST_TASK_SCHEMA,o.REVIEW_LIFECYCLE,o.TAG_SCHEMA,o.SCHEMA_FIELD,o.SCHEMA_FIELD_SELECTOR,o.SCHEMA_FIELD_SELECTOR_OPTION,o.MONOMER].includes(l.ZP.apiIdToType(e))}function isExpendable(e){return"string"==typeof e&&(l.ZP.isBiologicalEntity(e)||[o.BATCH,o.PLATE,o.BOX,o.CONTAINER].includes(l.ZP.apiIdToType(e)))}function isRunRelatedOrResult(e){return"string"==typeof e&&[o.ASSAY_RUN,o.AUTOMATION_OUTPUT_FILE].includes(l.ZP.apiIdToType(e))}function getValidArchivePurposes(e){let t
t=e.length?e.every((e=>isNonData(e)))?r.ZP.ARCHIVE_NON_DATA_PURPOSES:e.every((e=>isExpendable(e)))?r.ZP.ARCHIVE_EXPENDABLE_PURPOSES:e.every((e=>isRunRelatedOrResult(e)))?r.ZP.ARCHIVE_RUN_AND_RESULT_PURPOSES:r.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES:[]
t.includes(c.Fj)||(t=[...t,c.Fj])
return t}function getVisibleArchivePurposes(e){if(!e.length)return[]
if(e.every((e=>isRunRelatedOrResult(e))))return r.ZP.ARCHIVE_RUN_AND_RESULT_PURPOSES
if(e.every((e=>isNonData(e))))return r.ZP.ARCHIVE_NON_DATA_PURPOSES
return e.some((e=>isExpendable(e)))?a.default.union(r.ZP.ARCHIVE_EXPENDABLE_PURPOSES,r.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES):r.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES}function areArchivePurposesVisible(e){return getVisibleArchivePurposes(e).length>0}function getAllArchivePurposes(){return a.default.union(r.ZP.ARCHIVE_EXPENDABLE_PURPOSES,r.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES,[c.Fj]).sort()}function getArchivePurpose(e){var t,n
return(0,d.Rj)(e)||(0,d.Gh)(e)?null!==(n=null===(t=e.archiveRecord)||void 0===t?void 0:t.purpose)&&void 0!==n?n:null:(0,d.Vt)(e)?e.archiveData.purpose:null}function getArchiveText(e){return areArchivePurposesVisible([e.id])?getArchivePurpose(e):"Archived"}function getArchiveItemName(e){return(0,d.ZP)(e)?`${e.name} (${getArchiveText(e)})`:e.name}function getPurposesForFolderSection(e){switch(e){case s.$.INVENTORY:return r.ZP.ARCHIVE_EXPENDABLE_PURPOSES
case s.$.NOTEBOOK:return r.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES
case s.$.ALL:return a.default.uniq([...r.ZP.ARCHIVE_EXPENDABLE_PURPOSES,...r.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES])
default:(0,i.Gp)(!e,`Invalid folderSection: ${e}`)
return a.default.uniq([...r.ZP.ARCHIVE_EXPENDABLE_PURPOSES,...r.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES])}}function attachArchivePurpose(e,t){return{...e,archiveRecord:null!=t?{__typename:"ArchiveRecordNode",purpose:t}:null}}},836291:(e,t,n)=>{n.d(t,{Z:()=>p})
var a=n(602652),i=n(989526),r=n(531041),s=n(764677),o=n(157530),l=n(954240),c=n(865486),d=n(924982),u=n(554475),m=n(808844)
class ArchivePurposeDropdown extends i.PureComponent{constructor(){super(...arguments)
this._handleSelectPurpose=e=>{const t=Array.isArray(e)?e:[e]
t.every((e=>this.props.selectedPurposes.includes(e)))?this.props.onChangePurposes(r.default.difference(this.props.selectedPurposes,t)):this.props.onChangePurposes(r.default.union(this.props.selectedPurposes,t))}}_getPurposesText(){if(this.props.selectedPurposes.length){const e=r.default.difference(this.props.selectedPurposes,o.oq(this.props.itemIds)),t=r.default.uniq(r.default.compact(this.props.selectedPurposes.map((t=>t===s.BH?s.TO:e.includes(t)?s.iT:t))))
return`Filtering by: ${(0,m.Dw)(t)}`}return"Filter by archive reason..."}render(){const e=o.oq(this.props.itemIds),t=o.Nu()
return i.createElement(l.ZP,{menu:i.createElement(c.ZP,{height:c.ZP.HEIGHTS.MEDIUM,width:c.ZP.WIDTHS.MEDIUM,value:this.props.selectedPurposes,isMulti:!0},i.createElement(u.Z,null,i.createElement(d.Z,{value:s.BH,onSelect:()=>{this._handleSelectPurpose(s.BH)},dataTestAttrs:{component:"ArchivePurposeItem",key:s.BH}},s.TO)),e.length?i.createElement(u.Z,null,e.map((e=>i.createElement(d.Z,{key:e,value:e,onSelect:this._handleSelectPurpose},e)))):i.createElement(u.Z,null,i.createElement(d.Z,{value:t,onSelect:()=>{this._handleSelectPurpose(t)}},s.iT))),displayName:this._getPurposesText()})}}ArchivePurposeDropdown.propTypes={itemIds:a.arrayOf(a.oneOfType([a.string,a.number])).isRequired,onChangePurposes:a.func.isRequired,selectedPurposes:a.arrayOf(a.string).isRequired}
const p=ArchivePurposeDropdown},996447:(e,t,n)=>{n.d(t,{ZP:()=>k,bA:()=>open})
var a=n(64558),i=n(989526),r=n(531041),s=n(468943),o=n(764677),l=n(650821),c=n(157530),d=n(382857),u=n(232606),m=n(348920),p=n(171471),h=n(17086),E=n(328867),S=n(804083),T=n(974913),g=n(383628),f=n(103593),I=n(59860),A=n(334148),y=n(954240),_=n(150126),C=n(476604),R=n(314670),N=n(801455),O=n(865486),b=n(472347),v=n(629656),P=n(205986),L=n(379346),D=n(707171),M=n(206556),w=n(192149)
const F=[D.Z,M.Z]
class ArchiveModal extends i.Component{constructor(e){super(e)
this.getSampleStatusWarningTrackingParams=()=>{var e,t,n,a,i,r
return{actionAttempted:"archive",actionOrigin:null!==(t=null===(e=this.props.analyticsMetadata)||void 0===e?void 0:e.actionOrigin)&&void 0!==t?t:p.D2.UI_UNDETERMINED,sampleIds:null!==(a=null===(n=this.state.itemsForArchive)||void 0===n?void 0:n.map((({id:e})=>e)))&&void 0!==a?a:this.state.itemIdsToSubmit,eventGroupId:null!==(r=null===(i=this.props.analyticsMetadata)||void 0===i?void 0:i.eventGroupId)&&void 0!==r?r:s.Vr()}}
this.setCanProceedOnSampleStatus=e=>{this.setState({canProceedOnSampleStatus:e})}
this.createModal=e=>i.createElement(P.ZP,{buttons:[{text:"Archive",style:A.ZJ.NEGATIVE,submit:!0,disabled:null==this.state.itemsForArchive||this.state.statusWarningsLoading||!(0,E.RO)(this.state.itemIdsToSubmit.filter((e=>L.ZP.isStorable(e))),this.state.shouldShowStatusWarning,this.state.canProceedOnSampleStatus),dataTestAttrs:{component:"ArchiveModal",element:"archiveButton"}}],onRequestClose:this.props.onRequestClose,onRequestSubmit:()=>{this.handleSubmit()},title:"Archive items",dataTestAttrs:{component:"ArchiveModal",element:"root"}},e)
this.renderTable=()=>{var e,t,n,r,s,o
if(!this.state.itemsForArchive||this.state.statusWarningsLoading)return null
if(this.props.renderArchivableItemTableOverride){const a=this.props.showItemCheckboxes?null!==(t=null===(e=this.state.samples)||void 0===e?void 0:e.filter((({id:e})=>this.unarchivedItemIds.includes(e))))&&void 0!==t?t:null:this.state.samples
return this.props.renderArchivableItemTableOverride({shouldShowStatusWarning:this.state.shouldShowStatusWarning,samples:a,hasHiddenDescendantItems:(null!==(r=null===(n=this.state.samples)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>(null!==(s=null==a?void 0:a.length)&&void 0!==s?s:0),trackingParams:this.getSampleStatusWarningTrackingParams(),itemIdsToSubmit:!1===this.props.showItemCheckboxes?null!==(o=null==a?void 0:a.map((({id:e})=>e)))&&void 0!==o?o:[]:this.state.itemIdsToSubmit,setItemIdsToSubmit:e=>{this.setState({itemIdsToSubmit:e})},shouldProceed:this.state.canProceedOnSampleStatus,setShouldProceed:this.setCanProceedOnSampleStatus,showItemCheckboxes:this.props.showItemCheckboxes})}return i.createElement("div",null,this.state.shouldShowStatusWarning&&this.state.samples&&i.createElement(I.Z,null,i.createElement(f.Z,{md:12},i.createElement(S.Z,{trackingParamsWithSampleIds:this.getSampleStatusWarningTrackingParams(),canDeselectSamples:!1,shouldProceed:this.state.canProceedOnSampleStatus,onChangeShouldProceed:this.setCanProceedOnSampleStatus,samples:this.state.samples,selectedSampleIds:this.state.samples.map((({id:e})=>e)),setSelectedSampleIds:a.ZT}))),i.createElement(I.Z,null,i.createElement(f.Z,{md:12},i.createElement("p",null,"The following items will be archived:"),this.props.showItemCheckboxes?i.createElement(w.e,{itemsForArchive:this.state.itemsForArchive.filter((({id:e})=>this.unarchivedItemIds.includes(e))),checkedRowIds:this.state.itemIdsToSubmit,onChangeChecks:e=>{this.setState({itemIdsToSubmit:e})},options:this.state.options}):i.createElement(w.Z,{itemsForArchive:this.state.itemsForArchive,options:this.state.options}))))}
this.unarchivedItemIds=[...new Set(this.props.items.filter((e=>!(0,d.ZP)(e))).map((({id:e})=>e)))]
const t=c.oc(this.unarchivedItemIds)
e.initialPurpose&&(0,u.Gp)(t.includes(e.initialPurpose),"Expected initialPurpose to be valid.")
this.state={error:null,itemsForArchive:null,purpose:e.initialPurpose||t.length&&t[0]||o.Fj,options:{...D.Z.getDefaultState(e.items),...M.Z.getDefaultState()},itemIdsToSubmit:this.unarchivedItemIds,shouldShowStatusWarning:!1,canProceedOnSampleStatus:!1,statusWarningsLoading:!0,samples:null}}async checkForWarnings(e){var t
const{shouldShowWarning:n,samples:a}=await(0,E.Tz)({sampleIds:e.map((({id:e})=>e)),...null!==(t=this.props.checkForSampleStatusWarningsParamOverride)&&void 0!==t?t:{}})
this.setState({shouldShowStatusWarning:n,statusWarningsLoading:!1,samples:null!=a?a:null})}async componentDidMount(){var e
try{const e=await l.nU(this.unarchivedItemIds,{shouldDetectShortcuts:this.props.shouldDetectShortcuts}),{itemsForArchive:t}=e
this.checkForWarnings(t)
const n=t.some((e=>e.isRegistered))
this.setState({itemsForArchive:t})
this.handleChangeOptions({hasRegisteredItems:n})
this.enableArchivingResultsAndHasResult(t)&&this.handleChangeOptions({resultPurpose:m.ZP.ARCHIVE_RUN_AND_RESULT_PURPOSES[0]})}catch(t){this.setState({error:null!==(e=T.ZP.getFriendlyError(t))&&void 0!==e?e:_.q})}}enableArchivingResultsAndHasResult(e){return m.ZP.ELN_ENABLE_ARCHIVING_RESULTS_WITH_ENTRY&&e.some((e=>"Result"===e.friendlyTypeName))}handleChangePurpose(e){this.setState({purpose:e})}handleSubmit(){for(const e of F)if(e.getValidationError&&e.isEnabled(this.state.itemsForArchive)){const t=e.getValidationError(this.state.options)
if(t){this.setState({error:t})
return}}h.S8({analyticsMetadata:this.props.analyticsMetadata},null,(()=>{this.props.onArchive(this.state.itemIdsToSubmit,this.state.purpose,this.state.options)}))
this.props.onRequestClose()}handleChangeOptions(e){this.setState({options:{...this.state.options,...e}})}getArchiveReasonOptions(e,t){return e.map((e=>({name:e,value:e,disabled:!t.includes(e)})))}getResultArchiveReasonOptions(){return m.ZP.ARCHIVE_RUN_AND_RESULT_PURPOSES.map((e=>({name:e,value:e})))}render(){const e=c.oq(this.unarchivedItemIds),t=c.oc(this.unarchivedItemIds);(0,u.Gp)(!(e.length>0&&0===t.length),"Expected there to be a valid purpose if any purposes are visible.")
const n=null!=this.state.error?i.createElement("div",{className:"u-small-spacing-top"},i.createElement(g.ZP,{bannerType:g.ct.ERROR,text:this.state.error})):null
return this.state.itemsForArchive&&!this.state.statusWarningsLoading?this.createModal(i.createElement(i.Fragment,null,this.state.itemsForArchive.some((e=>"Result"===e.friendlyTypeName))&&i.createElement(I.Z,null,i.createElement(f.Z,{md:12},i.createElement(g.ZP,{bannerType:g.ct.INFO,text:"All results in the archived entries will also be archived."}))),this.renderTable(),e.length>0&&i.createElement("div",null,i.createElement("div",{className:"u-spacing-top"},i.createElement(I.Z,null,i.createElement(f.Z,{md:12},i.createElement(N.Z,{label:"Mark as"}))),i.createElement(I.Z,{className:"u-vertical-center-items"},i.createElement(f.Z,{md:12},i.createElement(y.ZP,{displayName:this.state.purpose,menu:i.createElement(b.Z,{height:O.ZP.HEIGHTS.MEDIUM,width:O.ZP.WIDTHS.FULL,selectedValue:this.state.purpose,onSelect:e=>{this.handleChangePurpose(e)},optionDatas:this.getArchiveReasonOptions(e,t)})}),r.default.difference(e,t).length>0&&i.createElement("div",{className:"u-small-spacing-top"},i.createElement(R.Z,{className:"u-mini-spacing-right"}),"Some archive reasons are not applicable to all selected items.")))),this.enableArchivingResultsAndHasResult(this.state.itemsForArchive)&&i.createElement("div",{className:"u-spacing-top"},i.createElement(I.Z,null,i.createElement(f.Z,{md:12},i.createElement(N.Z,{label:"Result archive reason"}))),i.createElement(I.Z,{className:"u-vertical-center-items"},i.createElement(f.Z,{md:12},i.createElement(y.ZP,{displayName:this.state.options.resultPurpose,menu:i.createElement(b.Z,{height:O.ZP.HEIGHTS.MEDIUM,width:O.ZP.WIDTHS.FULL,selectedValue:this.state.options.resultPurpose,onSelect:e=>{this.handleChangeOptions({resultPurpose:e})},optionDatas:this.getResultArchiveReasonOptions()})}),r.default.difference(e,t).length>0&&i.createElement("div",{className:"u-small-spacing-top"},i.createElement(R.Z,{className:"u-mini-spacing-right"}),"Some archive reasons are not applicable to all selected items."))))),D.Z.isEnabled(this.state.itemsForArchive)&&i.createElement(D.Z,{itemsForArchive:this.state.itemsForArchive,onChange:e=>{this.handleChangeOptions(e)},shouldRemoveShortcuts:this.state.options.shouldRemoveShortcuts,shouldUnregisterBioentities:this.state.options.shouldUnregisterBioentities,unregisteredBioentitiesFolderId:this.state.options.unregisteredBioentitiesFolderId}),M.Z.isEnabled(this.state.itemsForArchive)&&i.createElement(M.Z,{items:this.state.itemsForArchive,onChange:e=>{this.handleChangeOptions(e)},shouldRemoveBarcodes:this.state.options.shouldRemoveBarcodes,shouldArchiveContainedSamples:Boolean(this.state.options.shouldArchiveContainedSamples)}),n)):null==this.state.error?this.createModal(i.createElement(C.b,null)):this.createModal(null!=n?n:void 0)}}ArchiveModal.defaultProps={shouldDetectShortcuts:!1}
const k=ArchiveModal
function open(e){v.bA(ArchiveModal,i.createElement(ArchiveModal,{...e,onRequestClose:()=>{!function close(){v.xv(ArchiveModal)}()}}))}},518155:(e,t,n)=>{n.d(t,{C:()=>CreateAssemblyModal})
var a=n(692013),i=n(989526),r=n(468943),s=n(770188),o=n(348920),l=n(171471),c=n(47984),d=n(434202),u=n(874952),m=n(907704),p=n(974913),h=n(129270),E=n(334148),S=n(946948),T=n(205986)
const g={[c.ASSEMBLY_TYPE.GIBSON]:"Gibson Assembly",[c.ASSEMBLY_TYPE.GOLDEN_GATE]:"Golden Gate Assembly"}
function CreateAssemblyModal(e){const[t,n]=(0,i.useState)(null),h=[{value:c.ASSEMBLY_TYPE.DIGEST,name:i.createElement("span",{className:(0,a.iv)(f.optionText)},"Digest and Ligate"),description:"Simple restriction-enzyme based cloning."},{value:c.ASSEMBLY_TYPE.GIBSON,name:i.createElement("span",{className:(0,a.iv)(f.optionText)},"Gibson"),description:i.createElement(i.Fragment,null,"Homology-based, scarless, single-tube reaction assembly - see"," ",i.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/19363495",target:"_blank",rel:"noopener noreferrer"},"Gibson 2009"),".")},{value:c.ASSEMBLY_TYPE.GOLDEN_GATE,name:i.createElement("span",{className:(0,a.iv)(f.optionText)},"Golden Gate"),description:i.createElement(i.Fragment,null,"Quasi-scarless, single-tube reaction assembly - see"," ",i.createElement("a",{href:"http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0003647",target:"_blank",rel:"noopener noreferrer"},"Engler 2008"),".")}]
return i.createElement(T.ZP,{title:"Pick Assembly Strategy",onRequestClose:e.onRequestClose,buttons:[{text:"Start",submit:!0,disabled:null==t,onClick:()=>{r.j("assembly","start_click",{product:l.XC.MOLBIO,assemblyType:t})
const n=new s.Assembly({method:t})
n.save().done((()=>s.assemblies.add(n))).fail(p.ZP.notifyError)
e.onRequestClose()},style:E.ZJ.SECONDARY,dataTestAttrs:{component:"CreateAssemblyModal",element:"startButton"}},{text:"Cancel",cancel:!0}],dataTestAttrs:{component:"CreateAssemblyModal",element:"root"}},i.createElement("div",{className:(0,a.iv)(f.optionsContainer)},i.createElement(S.Z,{selectedValue:t,options:h.map((e=>({label:e.name,secondaryLabel:e.description,value:e.value,dataTestAttrs:{component:"CreateAssemblyModal",element:"input",key:`assemblyOptionInput-${e.value}`}}))),onChange:e=>{r.j("assembly","select_assembly_method",{product:l.XC.MOLBIO,assemblyMethod:e})
n(e)},title:""})),o.ZP.MOLBIO_REDESIGNED_CLONING_FLOW&&null!=t&&(0,d.DL)(t)&&i.createElement(u.Ku,{actionOrigin:l.D2.MOLBIO_ASSEMBLY_WIZARD_MODAL,text:i.createElement("span",null,"Trying to perform ",g[t]," in bulk?"," ",i.createElement("a",{onClick:()=>{r.L9(l.Jg.CLICKED_REDESIGNED_BULK_ASSEMBLY_LINK,{actionOrigin:l.D2.MOLBIO_ASSEMBLY_WIZARD_MODAL});(0,m.SN)({previousTool:d.cH.ASSEMBLY_WIZARD,initialMethodData:d.kA[d.pj[t]]},l.D2.MOLBIO_ASSEMBLY_WIZARD_MODAL)
e.onRequestClose()}},"Try Benchling's new tool here"),".")}))}const f=a.mM.create({optionsContainer:{width:"50%",margin:"auto"},optionText:{fontWeight:h.KB}})},108696:(e,t,n)=>{n.d(t,{Nq:()=>exportSampleContainerHistory,dV:()=>exportAuditLogs})
var a=n(531041),i=n(232606),r=n(636757),s=n(348920),o=n(974913),l=n(502633),c=n(805937),d=n(554685)
function exportAuditLogs(e,t={}){s.ZP.AUDITING_ENABLE_PDF_EXPORT?(0,l.Z)(r.Z,{onRequestSubmit:n=>{initiateAuditLogExport(e,n,t)}}):initiateAuditLogExport(e,d.F1.CSV,t)}function exportSampleContainerHistory(e){s.ZP.AUDITING_ENABLE_PDF_EXPORT&&(0,l.Z)(r.Z,{onRequestSubmit:t=>{!function initiateSampleContainerHistoryExport(e,t){const n=a.default.uniqueId("export-audit-logs-")
o.ZP.info("Exporting...",{id:n,duration:0})
d.Nq(e,t).done((({succeeded:e,url:t,message:a})=>{if(e){window.location.href=t
o.ZP.success("Export complete. Downloading...",{id:n})}else o.ZP.warn(a)})).fail((e=>{o.ZP.notifyError(e,{id:n})}))}(e,t)},modalTitle:c.o2,dropdownDisplayString:"Select report format..."})}function initiateAuditLogExport(e,t,n={}){if(null!=n.relatedResultsModelId){(0,i.hu)(0===e.length,"No ids should be specified if relatedResultsModelId is defined")
!function initiateRelatedResultsAuditLogExport(e,t){const n=a.default.uniqueId("export-related-results-audit-logs-")
o.ZP.info("Exporting...",{id:n,duration:0})
d.tk(e,t).done((({url:e})=>{window.location.href=e
o.ZP.success("Export complete. Downloading...",{id:n})})).fail((e=>{o.ZP.notifyError(e,{id:n})}))}(n.relatedResultsModelId,t)}else!function initiateBaseAuditLogExport(e,t,n={}){const i=a.default.uniqueId("export-audit-logs-")
o.ZP.info("Exporting...",{id:i,duration:0})
d.dV(e,t,n).done((({url:e})=>{window.location.href=e
o.ZP.success("Export complete. Downloading...",{id:i})})).fail((e=>{o.ZP.notifyError(e,{id:i})}))}(e,t,n)}},505258:(e,t,n)=>{n.d(t,{Kh:()=>getDefaultDataPolicy,Uj:()=>getAdminDataPolicy,Ux:()=>getAdminSchemaPolicy})
var a=n(232606),i=n(348920)
function getDefaultDataPolicy(e){const t=e.find((e=>e.isDefault));(0,a.hu)(null!=t,"No default policy found.")
return t}function getAdminDataPolicy(e){const t=e.find((e=>e.isAdmin));(0,a.hu)(null!=t,"No admin policy found.")
return t}function getAdminSchemaPolicy(e){(0,a.hu)(null!=i.ZP.PERMISSIONS_DEFAULT_SCHEMA_POLICIES,"No default schema policies")
const t=e.find((e=>e.id===i.ZP.PERMISSIONS_DEFAULT_SCHEMA_POLICIES.admin_policy_id));(0,a.hu)(null!=t,"No admin schema policy found.")
return t}},56063:(e,t,n)=>{n.d(t,{AX:()=>convertCollaborationsToCollaborators,E9:()=>convertToCollaborationCreateOrUpdates,EF:()=>convertOwnerToCollaboration,El:()=>o.PartyType,Ez:()=>isSchemaPolicyGroupCollaborator,Ji:()=>isPartyAdmin,K8:()=>isSchemaPolicyActorCollaborator,Mg:()=>S,Mi:()=>E,Ne:()=>isActorCollaborator,OD:()=>u,UF:()=>convertCollaboratorToCollaborations,Yb:()=>isDataPolicyGroupCollaborator,ZP:()=>T,ao:()=>convertToDefaultCollaborators,cr:()=>c,fN:()=>h,wj:()=>d,x2:()=>convertToCollaborators,x7:()=>isDataPolicyActorCollaborator})
var a,i=n(64558),r=n(602652),s=(n(531041),n(468991)),o=n(263174),l=n(106664)
!function(e){e[e.NO_PERMISSION=1e6]="NO_PERMISSION"
e[e.READ=200]="READ"
e[e.APPEND=100]="APPEND"
e[e.WRITE=1]="WRITE"
e[e.ADMIN=0]="ADMIN"}(a||(a={}))
const c="objectsCreatable",d="objectsRegisterable",u=r.shape({readable:r.bool.isRequired,writable:r.bool.isRequired,appendable:r.bool.isRequired,admin:r.bool.isRequired,movable:r.bool,deletable:r.bool,tagsEditable:r.bool,polymerFeaturesEditable:r.bool,polymerResiduesEditable:r.bool,subfolderCreatable:r.bool,locationsCreatable:r.bool,unregisterable:r.bool,registryIdsChangeable:r.bool,bioentitiesAppendable:r.bool,batchesWritable:r.bool,definitionEditable:r.bool,objectsCreatable:r.bool,objectsRegisterable:r.bool}),m=r.shape({id:r.string.isRequired,handle:r.string.isRequired,dataPolicyId:r.string,memberDataPolicyId:r.string,adminDataPolicyId:r.string,type:r.oneOf([o.PartyType.USER,o.PartyType.ORGANIZATION,o.PartyType.TEAM,o.PartyType.APP]).isRequired,auditor:r.bool}),p=r.shape({id:r.string.isRequired,handle:r.string.isRequired,schemaPolicyId:r.string,memberSchemaPolicyId:r.string,adminSchemaPolicyId:r.string,type:r.oneOf([o.PartyType.USER,o.PartyType.ORGANIZATION,o.PartyType.TEAM,o.PartyType.APP]).isRequired,auditor:r.bool}),h=r.oneOfType([m,p])
var E
!function(e){e.DATA="data"
e.SCHEMA="schema"}(E||(E={}))
function isDataPolicyActorCollaborator(e){return void 0!==e.dataPolicyId}function isSchemaPolicyActorCollaborator(e){return void 0!==e.schemaPolicyId}function isActorCollaborator(e){return e.type===o.PartyType.USER||e.type===o.PartyType.APP}function isDataPolicyGroupCollaborator(e){return void 0!==e.adminDataPolicyId}function isSchemaPolicyGroupCollaborator(e){return void 0!==e.adminSchemaPolicyId}r.shape({id:r.string.isRequired,handle:r.string.isRequired})
const S=r.shape({type:r.oneOf([o.PartyType.USER,o.PartyType.APP,o.PartyType.ORGANIZATION]).isRequired,memberDataPolicyId:r.string}),T={NO_PERMISSION:a.NO_PERMISSION,READ:a.READ,APPEND:a.APPEND,WRITE:a.WRITE,ADMIN:a.ADMIN,PERMISSIONS_SHAPE:u},g={OrganizationNode:o.PartyType.ORGANIZATION,UserNode:o.PartyType.USER,TeamNode:o.PartyType.TEAM,BenchlingAppNode:o.PartyType.APP}
function convertToCollaborators(e,t){if(null==e)return[]
return e.defaultSchemaCollaborations.map((e=>{const n=function getCollaboratorType(e){return"ProcessAutomatonActorNode"===e?null:g[e]}(e.party.__typename),a={id:e.party.id,handle:e.party.handle,name:e.party.name,type:n,owner:!1}
n===o.PartyType.ORGANIZATION&&a.id===t.id&&(a.owner=!0)
if(e.organizationRole===o.OrganizationPermissionRole.ADMIN||e.teamRole===o.TeamPermissionRole.ADMIN){a.adminSchemaPolicyId=e.policy.id
a.memberSchemaPolicyId=null}else if(e.organizationRole===o.OrganizationPermissionRole.MEMBER||e.teamRole===o.TeamPermissionRole.MEMBER){a.memberSchemaPolicyId=e.policy.id
a.adminSchemaPolicyId=null}else a.schemaPolicyId=e.policy.id
return a})).reduce(((e,t)=>{const n=e.find((e=>e.id===t.id))
n?t.memberSchemaPolicyId?n.memberSchemaPolicyId=t.memberSchemaPolicyId:t.adminSchemaPolicyId&&(n.adminSchemaPolicyId=t.adminSchemaPolicyId):e.push(t)
return e}),[])}function convertToDefaultCollaborators(e){const t=[]
e.forEach((e=>{if(isSchemaPolicyActorCollaborator(e))t.push({schemaPolicyId:e.schemaPolicyId,partyId:e.id})
else if(isSchemaPolicyGroupCollaborator(e)&&e.type===o.PartyType.ORGANIZATION){e.adminSchemaPolicyId&&t.push({schemaPolicyId:e.adminSchemaPolicyId,partyId:e.id,organizationRole:o.OrganizationPermissionRole.ADMIN})
e.memberSchemaPolicyId&&t.push({schemaPolicyId:e.memberSchemaPolicyId,partyId:e.id,organizationRole:o.OrganizationPermissionRole.MEMBER})}else if(isSchemaPolicyGroupCollaborator(e)&&e.type===o.PartyType.TEAM){e.adminSchemaPolicyId&&t.push({schemaPolicyId:e.adminSchemaPolicyId,partyId:e.id,teamRole:o.TeamPermissionRole.ADMIN})
e.memberSchemaPolicyId&&t.push({schemaPolicyId:e.memberSchemaPolicyId,partyId:e.id,teamRole:o.TeamPermissionRole.MEMBER})}}))
return t}function convertToCollaborationCreateOrUpdates(e){return e.map((e=>{var t,n,a,i
return{collaborator:{partyId:e.party.id,partyRole:null!==(n=null!==(t=e.organizationRole)&&void 0!==t?t:e.teamRole)&&void 0!==n?n:void 0},policyId:e.policy.id,auditor:null!==(a=e.auditor)&&void 0!==a&&a,fromOwnership:null!==(i=e.fromOwnership)&&void 0!==i&&i}}))}function isPartyAdmin(e){var t
return"admin"in e&&(null!==(t=e.admin)&&void 0!==t&&t)}function convertOwnerToCollaboration(e,t){const n=(0,s.NU)(e)
return{__typename:"CollaborationNode",party:n?{__typename:"UserNode",id:e.id,name:e.name,handle:e.handle,avatarUrl:e.avatar_url}:{__typename:"OrganizationNode",id:e.id,name:e.name,handle:e.handle,avatarUrl:e.avatar_url,admin:isPartyAdmin(e)},policy:{__typename:"DataPolicyNode",id:t.id,name:t.name,isHidden:t.isHidden},organizationRole:n?null:o.OrganizationPermissionRole.ADMIN,teamRole:null,auditor:!!n||null,fromOwnership:!0,resource:null}}function convertCollaboratorToCollaborations(e,t){var n,a,i,r,s,c,d,u,m
if(isActorCollaborator(e)){const r=t.find((t=>t.id===(0,l.Bi)(e)))
return[{__typename:"CollaborationNode",party:{__typename:e.type===o.PartyType.USER?"UserNode":"BenchlingAppNode",id:e.id,name:e.name,handle:e.handle,avatarUrl:null!==(n=e.avatar_url)&&void 0!==n?n:null},policy:{__typename:isDataPolicyActorCollaborator(e)?"DataPolicyNode":"SchemaPolicyNode",id:r.id,name:r.name,isHidden:r.isHidden},organizationRole:null,teamRole:null,auditor:null!==(a=e.auditor)&&void 0!==a?a:null,fromOwnership:null!==(i=e.owner)&&void 0!==i&&i,resource:null}]}const p=t.find((t=>t.id===(0,l.ME)(e))),h=t.find((t=>t.id===(0,l.b7)(e))),E=[]
null!=h&&E.push({__typename:"CollaborationNode",party:{__typename:e.type===o.PartyType.ORGANIZATION?"OrganizationNode":"TeamNode",id:e.id,name:e.name,handle:e.handle,avatarUrl:null!==(r=e.avatar_url)&&void 0!==r?r:null,admin:!1},policy:{__typename:isDataPolicyGroupCollaborator(e)?"DataPolicyNode":"SchemaPolicyNode",id:h.id,name:h.name,isHidden:h.isHidden},organizationRole:e.type===o.PartyType.ORGANIZATION?o.OrganizationPermissionRole.ADMIN:null,teamRole:e.type===o.PartyType.TEAM?o.TeamPermissionRole.ADMIN:null,auditor:null!==(s=e.auditor)&&void 0!==s?s:null,fromOwnership:null!==(c=e.owner)&&void 0!==c&&c,resource:null})
null!=p&&E.push({__typename:"CollaborationNode",party:{__typename:e.type===o.PartyType.ORGANIZATION?"OrganizationNode":"TeamNode",id:e.id,name:e.name,handle:e.handle,avatarUrl:null!==(d=e.avatar_url)&&void 0!==d?d:null,admin:!1},policy:{__typename:isDataPolicyGroupCollaborator(e)?"DataPolicyNode":"SchemaPolicyNode",id:p.id,name:p.name,isHidden:p.isHidden},organizationRole:e.type===o.PartyType.ORGANIZATION?o.OrganizationPermissionRole.MEMBER:null,teamRole:e.type===o.PartyType.TEAM?o.TeamPermissionRole.MEMBER:null,auditor:null!==(u=e.auditor)&&void 0!==u?u:null,fromOwnership:null!==(m=e.owner)&&void 0!==m&&m,resource:null})
return E}function convertCollaborationsToCollaborators(e){const t=e.some((e=>"DataPolicyNode"===e.policy.__typename))?E.DATA:E.SCHEMA,n=[]
e.forEach((e=>{var a,r,s,c,d
const u=null!==(a=e.teamRole)&&void 0!==a?a:e.organizationRole
if(null==u){const a=(0,i.cg)({id:e.party.id,handle:e.party.handle,name:e.party.name,type:"UserNode"===e.party.__typename?o.PartyType.USER:o.PartyType.APP,owner:null!==(r=e.fromOwnership)&&void 0!==r?r:void 0,avatar_url:null!==(s=e.party.avatarUrl)&&void 0!==s?s:void 0});(0,l.SK)(a,t,e.policy.id)
n.push(a)}else{let a=n.find((t=>t.id===e.party.id))
if(void 0===a){a=(0,i.cg)({id:e.party.id,handle:e.party.handle,name:e.party.name,type:"OrganizationNode"===e.party.__typename?o.PartyType.ORGANIZATION:o.PartyType.TEAM,owner:null!==(c=e.fromOwnership)&&void 0!==c?c:void 0,avatar_url:null!==(d=e.party.avatarUrl)&&void 0!==d?d:void 0});(0,l.t3)(a,t,null);(0,l.oc)(a,t,null)
n.push(a)}u===o.OrganizationPermissionRole.ADMIN?(0,l.t3)(a,t,e.policy.id):(0,l.oc)(a,t,e.policy.id)}}))
return n}},933388:(e,t,n)=>{n.d(t,{DQ:()=>getConditionDisplayString,aU:()=>s,gG:()=>u,gP:()=>o,iN:()=>d,qG:()=>l})
var a=n(602652),i=n(256605),r=n(260929)
const s={...i.jm},o={...i.U1},l={...i.OL},c={[o.ALWAYS]:"Granted",[o.IS_AUTHOR]:"Granted to author",[o.IS_ASSIGNEE]:"Granted to assignee",[o.UNKNOWN]:""}
function getConditionDisplayString(e){e===o.UNKNOWN&&r.ZK("Attempt to display unknown condition")
return c[e]}const d=a.shape({id:a.string.isRequired,name:a.string.isRequired,isDefault:a.bool.isRequired,isAdmin:a.bool.isRequired}),u=a.shape({id:a.string.isRequired,name:a.string.isRequired,isDefault:a.bool,isAdmin:a.bool}),m="Invalid"
l.BATCH,s.READ,s.APPEND,s.WRITE,s.ADMIN,s.CHANGE_REGISTRY_IDENTIFIER,s.CREATE_LOCATION,s.CREATE_REQUEST,s.CREATE_SUBFOLDER,s.EDIT_POLYMER_FEATURES,s.RETRACT_REVIEW,s.UNREGISTER,l.BIOENTITY,s.READ,s.APPEND,s.WRITE,s.ADMIN,s.CHANGE_REGISTRY_IDENTIFIER,s.CREATE_LOCATION,s.CREATE_REQUEST,s.CREATE_SUBFOLDER,s.EDIT_POLYMER_FEATURES,s.RETRACT_REVIEW,s.UNREGISTER,l.FOLDER_OR_PROJECT,s.READ,s.APPEND,s.WRITE,s.ADMIN,s.CHANGE_REGISTRY_IDENTIFIER,s.CREATE_LOCATION,s.CREATE_REQUEST,s.CREATE_SUBFOLDER,s.EDIT_POLYMER_FEATURES,s.RETRACT_REVIEW,s.UNREGISTER,l.REGISTRY,s.READ,s.APPEND,s.WRITE,s.ADMIN,s.CHANGE_REGISTRY_IDENTIFIER,s.CREATE_LOCATION,s.CREATE_REQUEST,s.CREATE_SUBFOLDER,s.EDIT_POLYMER_FEATURES,s.RETRACT_REVIEW,s.UNREGISTER,l.LOCATION,s.READ,s.APPEND,s.WRITE,s.ADMIN,s.CHANGE_REGISTRY_IDENTIFIER,s.CREATE_LOCATION,s.CREATE_REQUEST,s.CREATE_SUBFOLDER,s.EDIT_POLYMER_FEATURES,s.RETRACT_REVIEW,s.UNREGISTER,l.NOTEBOOK,s.READ,s.APPEND,s.WRITE,s.ADMIN,s.CHANGE_REGISTRY_IDENTIFIER,s.CREATE_LOCATION,s.CREATE_REQUEST,s.CREATE_SUBFOLDER,s.EDIT_POLYMER_FEATURES,s.RETRACT_REVIEW,s.UNREGISTER,l.OTHER,s.READ,s.APPEND,s.WRITE,s.ADMIN,s.CHANGE_REGISTRY_IDENTIFIER,s.CREATE_LOCATION,s.CREATE_REQUEST,s.CREATE_SUBFOLDER,s.EDIT_POLYMER_FEATURES,s.RETRACT_REVIEW,s.UNREGISTER,o.ALWAYS,o.IS_AUTHOR,l.BATCH,l.BIOENTITY,l.FOLDER_OR_PROJECT,l.LOCATION,l.NOTEBOOK,l.OTHER},479977:(e,t,n)=>{n.d(t,{$i:()=>cloneDataPolicy,BI:()=>deleteDataPolicy,N0:()=>getSchemaPoliciesURL,TO:()=>getDataPolicyURL,ZL:()=>getSchemaPolicyURL,aB:()=>updateDataPolicy,d0:()=>reorderDataPolicies,hk:()=>getSchemaPoliciesSectionURL,tp:()=>getDataPolicies,z8:()=>getDataPoliciesURL})
var a=n(771398)
function getDataPolicies(){return a.UJ("/1/api/data-policies")}function cloneDataPolicy(e,t){return a.s0({url:"/1/api/data-policies:clone",data:{dataPolicyId:e,name:t}})}function updateDataPolicy(e,t){return a.Ry({url:`/1/api/data-policies/${e}`,data:{spec:t}})}function deleteDataPolicy(e){return a.WY({url:`/1/api/data-policies/${e}`})}function reorderDataPolicies(e){return a.s0({url:"/1/api/data-policies:reorder",data:{dataPolicyIds:e}})}function getDataPoliciesURL(){return"/access-policies"}function getDataPolicyURL(e){return`/data-policies/${e}`}function getSchemaPoliciesURL(){return"/schema-policies"}function getSchemaPoliciesSectionURL(e){return`/schema-policies/${e}`}function getSchemaPolicyURL(e){return`/schema-policies/${e}`}},973625:(e,t,n)=>{n.d(t,{$i:()=>cloneDataPolicy,BI:()=>deleteDataPolicy,Z5:()=>a,aB:()=>updateDataPolicy,d0:()=>reorderDataPolicies,tp:()=>getDataPolicies,zS:()=>policiesBootstrapped})
var a,i=n(974913),r=n(166459),s=n(771398),o=n(479977)
!function(e){e.POLICIES_BOOTSTRAPPED="POLICIES_BOOTSTRAPPED"
e.DATA_POLICY_UPDATED="DATA_POLICY_UPDATED"}(a||(a={}))
function policiesBootstrapped(e){return{type:a.POLICIES_BOOTSTRAPPED,dataPolicies:e}}async function getDataPolicies(){const e=await o.tp();(0,r.getStore)().dispatch(policiesBootstrapped(e.dataPolicies))
return e}async function cloneDataPolicy(e,t){await o.$i(e,t)
await getDataPolicies()}async function updateDataPolicy(e,t){try{const n=await o.aB(e,t)
i.ZP.close("PolicyReduxActions.updateDataPolicy");(0,r.getStore)().dispatch(function dataPolicyUpdated(e){return{type:a.DATA_POLICY_UPDATED,dataPolicy:e}}(n.dataPolicy))
return{spec:n.spec}}catch(e){if(s.d0(e)){i.ZP.notifyError(e,{id:"PolicyReduxActions.updateDataPolicy"})
return{spec:null}}throw e}}async function deleteDataPolicy(e){await o.BI(e)
await getDataPolicies()}async function reorderDataPolicies(e){const t=await o.d0(e);(0,r.getStore)().dispatch(policiesBootstrapped(t.dataPolicies))}},95537:(e,t,n)=>{n.d(t,{Eh:()=>isInaccessibleInfo,N7:()=>getArgForRequestAccess,do:()=>requestAccess,qg:()=>canRequestAccess})
var a=n(232606),i=n(791442),r=n(977043),s=n(138966),o=n(974913),l=n(788836)
function getArgForRequestAccess(e){return null==e?null:404===e.status?e.responseJSON:isInaccessibleInfo(e)?e:null}function canRequestAccess(e){return e&&e.canRequestAccess}function requestAccess(e){(0,a.hu)(canRequestAccess(e),"Expected caller to guard on can RequestAccess")
if(null==l.Z.currentUser()){o.ZP.error("Please log in to request access to this item.")
return}const t=e.invalidId
o.ZP.warn("You do not have access to the project or registry associated with this item. Requesting access will send an email to the project's administrator(s).",{actionText:"Request access",onActionClick:()=>{i.d(t)
o.ZP.success("Access requested.")},duration:0,id:t});(0,r.CN)()===t&&(0,s.ZP)("/editor")}function isInaccessibleInfo(e){return"invalidId"in e}},22689:(e,t,n)=>{n.d(t,{O:()=>getBearerToken,i:()=>a})
var a,i=n(771398)
!function(e){e.MOBILE="MOBILE"
e.ASSAYS="ASSAYS"
e.API_SUPPORT_ACCESS="API_SUPPORT_ACCESS"}(a||(a={}))
function getBearerToken(e){return i.s0({url:"/1/api/bearer-token:create",data:e})}},41706:(e,t,n)=>{n.d(t,{N7:()=>o,bG:()=>d,dm:()=>i,hN:()=>r,ji:()=>s,so:()=>l,uv:()=>a})
var a
!function(e){e.NO_ACCESS="NO_ACCESS"
e.READ_ACCESS="READ_ACCESS"
e.FULL_ACCESS="FULL_ACCESS"}(a||(a={}))
const i="MULTIPLE_VALUES",r={NO_ACCESS:"None",READ_ACCESS:"Read",FULL_ACCESS:"Full",MULTIPLE_VALUES:"Multiple Values"},s=[a.NO_ACCESS,a.READ_ACCESS,a.FULL_ACCESS]
var o,l,c
!function(e){e.ADMIN="ADMIN"
e.DISCOVER="DISCOVER"
e.IMPORT="IMPORT"
e.EXPORT="EXPORT"
e.CREATE="CREATE"
e.DELETE="DELETE"
e.EDIT="EDIT"
e.EDIT_TAGS="EDIT_TAGS"
e.MOVE="MOVE"
e.OPEN="OPEN"
e.SHOW_DETAILS="SHOW_DETAILS"
e.AT_MENTION="AT_MENTION"
e.ARCHIVE="ARCHIVE"
e.UNARCHIVE="UNARCHIVE"}(o||(o={}))
!function(e){e.DIRECT_REMOVAL="DIRECT_REMOVAL"
e.INDIRECT_REMOVAL="INDIRECT_REMOVAL"
e.INDIRECT_REDUCTION="INDIRECT_REDUCTION"
e.INDIRECT_MIXED="INDIRECT_MIXED"}(l||(l={}))
!function(e){e.REMOVAL="REMOVAL"
e.REDUCTION="REDUCTION"}(c||(c={}))
const d={REMOVAL:{INITIAL:[a.FULL_ACCESS,a.READ_ACCESS],FINAL:[a.NO_ACCESS]},REDUCTION:{INITIAL:[a.FULL_ACCESS],FINAL:[a.READ_ACCESS]}}},814099:(e,t,n)=>{n.d(t,{BD:()=>isStandardFeatureDefinition,Bz:()=>l,Fk:()=>isFeatureWithPermissionMappingDefinition,KE:()=>isFeatureWithPermissionMapping,L1:()=>N,L7:()=>d,Ot:()=>S,PB:()=>isStandardFeatureDefinitionWithItemType,PM:()=>u,TD:()=>h,UV:()=>isItemWithPermissions,VA:()=>O,VK:()=>R,XT:()=>m,Ze:()=>c,_W:()=>_,d$:()=>E,e2:()=>a,ed:()=>g,gm:()=>f,gx:()=>T,hj:()=>A,jE:()=>I,nn:()=>isStandardFeatureDefinitionWithItem,qw:()=>y,sZ:()=>p,wj:()=>C})
var a,i=n(531041),r=n(232606),s=n(459830),o=n(41706)
!function(e){e.DEVELOPER_PLATFORM="DEVELOPER_PLATFORM"
e.INSIGHTS="INSIGHTS"
e.INVENTORY="INVENTORY"
e.LAB_AUTOMATION="LAB_AUTOMATION"
e.MOLBIO="MOLBIO"
e.NOTEBOOK="NOTEBOOK"
e.PROCESSES="PROCESSES"
e.REGISTRY="REGISTRY"
e.REQUESTS="REQUESTS"
e.RESULTS="RESULTS"
e.WORKFLOWS="WORKFLOWS"}(a||(a={}))
const l=[a.NOTEBOOK],c=[a.REQUESTS,a.WORKFLOWS],d=(Object.keys(a).filter((e=>!l.includes(e)&&!c.includes(e))),[...c,a.LAB_AUTOMATION,a.DEVELOPER_PLATFORM]),u=[a.NOTEBOOK,a.MOLBIO,a.REGISTRY,a.RESULTS,a.INVENTORY,a.REQUESTS,a.WORKFLOWS,a.LAB_AUTOMATION,a.INSIGHTS,a.DEVELOPER_PLATFORM],m={[a.INSIGHTS]:"ENABLE_EXTERNAL_ANALYTICS_UI",[a.REGISTRY]:"ENABLE_REGISTRY",[a.INVENTORY]:"ENABLE_STORAGE",[a.WORKFLOWS]:"LEGACY_WORKFLOWS_ENABLE",[a.REQUESTS]:"ENABLE_REQUESTS",[a.RESULTS]:"ENABLE_NEW_RESULTS",[a.LAB_AUTOMATION]:"ENABLE_LAB_AUTOMATION",[a.MOLBIO]:null,[a.DEVELOPER_PLATFORM]:null,[a.PROCESSES]:"WORKFLOWS_ENABLE"}
var p,h,E,S,T,g,f,I
!function(e){e.INSIGHTS_CREATE="INSIGHTS_CREATE"
e.INSIGHTS_DISCOVER="INSIGHTS_DISCOVER"
e.INSIGHTS_DELETE="INSIGHTS_DELETE"
e.INSIGHTS_EDIT="INSIGHTS_EDIT"
e.INSIGHTS_MOVE="INSIGHTS_MOVE"
e.INSIGHTS_OPEN="INSIGHTS_OPEN"}(p||(p={}))
!function(e){e.INVENTORY_ADMIN="INVENTORY_ADMIN"
e.INVENTORY_DISCOVER="INVENTORY_DISCOVER"
e.INVENTORY_IMPORT="INVENTORY_IMPORT"
e.INVENTORY_EXPORT="INVENTORY_EXPORT"
e.INVENTORY_CREATE="INVENTORY_CREATE"
e.INVENTORY_DELETE="INVENTORY_DELETE"
e.INVENTORY_EDIT="INVENTORY_EDIT"
e.INVENTORY_MOVE="INVENTORY_MOVE"
e.INVENTORY_OPEN="INVENTORY_OPEN"
e.INVENTORY_SHOW_DETAILS="INVENTORY_SHOW_DETAILS"
e.INVENTORY_AT_MENTION="INVENTORY_AT_MENTION"
e.INVENTORY_ARCHIVE="INVENTORY_ARCHIVE"
e.INVENTORY_UNARCHIVE="INVENTORY_UNARCHIVE"}(h||(h={}))
!function(e){e.LAB_AUTOMATION_ADMIN="LAB_AUTOMATION_ADMIN"
e.LAB_AUTOMATION_ARCHIVE="LAB_AUTOMATION_ARCHIVE"
e.LAB_AUTOMATION_CREATE="LAB_AUTOMATION_CREATE"
e.LAB_AUTOMATION_DELETE="LAB_AUTOMATION_DELETE"
e.LAB_AUTOMATION_DISCOVER="LAB_AUTOMATION_DISCOVER"
e.LAB_AUTOMATION_EDIT="LAB_AUTOMATION_EDIT"
e.LAB_AUTOMATION_EDIT_TAGS="LAB_AUTOMATION_EDIT_TAGS"
e.LAB_AUTOMATION_IMPORT="LAB_AUTOMATION_IMPORT"
e.LAB_AUTOMATION_OPEN="LAB_AUTOMATION_OPEN"
e.LAB_AUTOMATION_UNARCHIVE="LAB_AUTOMATION_UNARCHIVE"}(E||(E={}))
!function(e){e.MOLBIO_ADMIN="MOLBIO_ADMIN"
e.MOLBIO_IMPORT="MOLBIO_IMPORT"
e.MOLBIO_EXPORT="MOLBIO_EXPORT"
e.MOLBIO_CREATE="MOLBIO_CREATE"
e.MOLBIO_DELETE="MOLBIO_DELETE"
e.MOLBIO_EDIT="MOLBIO_EDIT"
e.MOLBIO_MOVE="MOLBIO_MOVE"
e.MOLBIO_OPEN="MOLBIO_OPEN"
e.MOLBIO_ARCHIVE="MOLBIO_ARCHIVE"
e.MOLBIO_UNARCHIVE="MOLBIO_UNARCHIVE"
e.MOLBIO_ADD_TO_WORKLIST="MOLBIO_ADD_TO_WORKLIST"}(S||(S={}))
!function(e){e.PROCESSES_ADMIN="PROCESSES_ADMIN"
e.PROCESSES_DISCOVER="PROCESSES_DISCOVER"
e.PROCESSES_EXPORT="PROCESSES_EXPORT"
e.PROCESSES_CREATE="PROCESSES_CREATE"
e.PROCESSES_DELETE="PROCESSES_DELETE"
e.PROCESSES_EDIT="PROCESSES_EDIT"
e.PROCESSES_EDIT_TAGS="PROCESSES_EDIT_TAGS"
e.PROCESSES_MOVE="PROCESSES_MOVE"
e.PROCESSES_OPEN="PROCESSES_OPEN"
e.PROCESSES_SHOW_DETAILS="PROCESSES_SHOW_DETAILS"
e.PROCESSES_AT_MENTION="PROCESSES_AT_MENTION"
e.PROCESSES_ARCHIVE="PROCESSES_ARCHIVE"
e.PROCESSES_UNARCHIVE="PROCESSES_UNARCHIVE"}(T||(T={}))
!function(e){e.REGISTRY_ADMIN="REGISTRY_ADMIN"
e.REGISTRY_DISCOVER="REGISTRY_DISCOVER"
e.REGISTRY_IMPORT="REGISTRY_IMPORT"
e.REGISTRY_EXPORT="REGISTRY_EXPORT"
e.REGISTRY_CREATE="REGISTRY_CREATE"
e.REGISTRY_DELETE="REGISTRY_DELETE"
e.REGISTRY_EDIT="REGISTRY_EDIT"
e.REGISTRY_EDIT_TAGS="REGISTRY_EDIT_TAGS"
e.REGISTRY_MOVE="REGISTRY_MOVE"
e.REGISTRY_OPEN="REGISTRY_OPEN"
e.REGISTRY_SHOW_DETAILS="REGISTRY_SHOW_DETAILS"
e.REGISTRY_AT_MENTION="REGISTRY_AT_MENTION"
e.REGISTRY_ARCHIVE="REGISTRY_ARCHIVE"
e.REGISTRY_UNARCHIVE="REGISTRY_UNARCHIVE"
e.REGISTRY_SET_SCHEMA="REGISTRY_SET_SCHEMA"
e.REGISTRY_REGISTER="REGISTRY_REGISTER"
e.REGISTRY_UNREGISTER="REGISTRY_UNREGISTER"
e.REGISTRY_BATCHES="REGISTRY_BATCHES"
e.REGISTRY_MIXTURES="REGISTRY_MIXTURES"
e.REGISTRY_WORKLISTS="REGISTRY_WORKLISTS"}(g||(g={}))
!function(e){e.RESULTS_ADMIN="RESULTS_ADMIN"
e.RESULTS_CREATE="RESULTS_CREATE"
e.RESULTS_OPEN="RESULTS_OPEN"
e.RESULTS_SHOW_DETAILS="RESULTS_SHOW_DETAILS"}(f||(f={}))
!function(e){e.DEVELOPER_PLATFORM_DISCOVER="DEVELOPER_PLATFORM_DISCOVER"
e.DEVELOPER_PLATFORM_API_KEY_AUTH="DEVELOPER_PLATFORM_API_KEY_AUTH"
e.DEVELOPER_PLATFORM_ADMIN="DEVELOPER_PLATFORM_ADMIN"
e.DEVELOPER_PLATFORM_OPEN="DEVELOPER_PLATFORM_OPEN"}(I||(I={}))
const A={[h.INVENTORY_ARCHIVE]:"archivable",[h.INVENTORY_DELETE]:"deletable",[h.INVENTORY_EDIT]:"writable",[h.INVENTORY_EXPORT]:"writable",[h.INVENTORY_MOVE]:"movable",[h.INVENTORY_UNARCHIVE]:"unarchivable",[E.LAB_AUTOMATION_ARCHIVE]:"archivable",[E.LAB_AUTOMATION_UNARCHIVE]:"unarchivable",[S.MOLBIO_ARCHIVE]:"archivable",[S.MOLBIO_DELETE]:"deletable",[S.MOLBIO_EDIT]:"writable",[S.MOLBIO_MOVE]:"movable",[S.MOLBIO_UNARCHIVE]:"unarchivable",[g.REGISTRY_ARCHIVE]:"archivable",[g.REGISTRY_DELETE]:"deletable",[g.REGISTRY_EDIT]:"writable",[g.REGISTRY_MOVE]:"movable",[g.REGISTRY_UNREGISTER]:"unregisterable",[g.REGISTRY_REGISTER]:"writable",[g.REGISTRY_UNARCHIVE]:"unarchivable",[T.PROCESSES_ARCHIVE]:"archivable",[T.PROCESSES_DELETE]:"deletable",[T.PROCESSES_EDIT]:"writable",[T.PROCESSES_MOVE]:"movable",[T.PROCESSES_UNARCHIVE]:"unarchivable"},y="INTENTIONALLY_SKIPPED_FEATURE",_={[o.N7.OPEN]:y,[o.N7.SHOW_DETAILS]:y,[o.N7.CREATE]:y,[o.N7.EXPORT]:y,[o.N7.ARCHIVE]:"archivable",[o.N7.DELETE]:"deletable",[o.N7.EDIT]:"writable",[o.N7.EDIT_TAGS]:"tagsEditable",[o.N7.MOVE]:"movable",[o.N7.UNARCHIVE]:"unarchivable"},C={INSIGHTS:"Insights",INVENTORY:"Inventory",LAB_AUTOMATION:"Lab Automation",MOLBIO:"Molecular Biology",NOTEBOOK:"Notebook",REGISTRY:"Registry",REQUESTS:"Requests",RESULTS:"Results",WORKFLOWS:"Workflows",DEVELOPER_PLATFORM:"Developer Platform",PROCESSES:"Workflows"},R={INSIGHTS:p,INVENTORY:h,LAB_AUTOMATION:E,MOLBIO:S,REGISTRY:g,RESULTS:f,DEVELOPER_PLATFORM:I,PROCESSES:T},N={[s.ANALYTICS_DASHBOARD]:[a.INSIGHTS],[s.ASSAY_RUN]:[a.LAB_AUTOMATION],[s.BASIC_FOLDER_ITEM]:[a.REGISTRY],[s.BULK_ASSEMBLY]:[a.MOLBIO],[s.CONNECTION]:[a.LAB_AUTOMATION],[s.MIXTURE]:[a.REGISTRY],[s.SEQUENCE]:[a.MOLBIO,a.REGISTRY],[s.PROTEIN]:[a.MOLBIO,a.REGISTRY],[s.OLIGO]:[a.MOLBIO,a.REGISTRY],[s.BATCH]:[a.REGISTRY],[s.SEQUENCE_ANALYSIS]:[a.MOLBIO],[s.PROTEIN_ALIGNMENT]:[a.MOLBIO],[s.BOX]:[a.INVENTORY],[s.CONTAINER]:[a.INVENTORY],[s.LOCATION]:[a.INVENTORY],[s.PLATE]:[a.INVENTORY],[s.PROCESS]:[a.PROCESSES],[s.PROCESS_OUTPUT]:[a.PROCESSES],[s.PROCESS_TASK]:[a.PROCESSES]}
const O=function getMappedCapabilities(){return(0,i.uniq)((0,i.flatten)(Object.values(N)))}(),b={INSIGHTS:[o.N7.ADMIN,o.N7.IMPORT,o.N7.EXPORT,o.N7.SHOW_DETAILS,o.N7.AT_MENTION,o.N7.ARCHIVE,o.N7.UNARCHIVE,o.N7.EDIT_TAGS],INVENTORY:[o.N7.EDIT_TAGS],MOLBIO:[o.N7.DISCOVER,o.N7.SHOW_DETAILS,o.N7.AT_MENTION,o.N7.EDIT_TAGS],LAB_AUTOMATION:[o.N7.IMPORT,o.N7.EXPORT,o.N7.SHOW_DETAILS,o.N7.AT_MENTION,o.N7.MOVE],REGISTRY:[],PROCESSES:[o.N7.IMPORT]}
O.forEach((e=>{const t=b[e],n=Object.keys(R[e])
Object.keys(o.N7).forEach((a=>{(0,r.hu)(n.includes(`${e}_${a}`)||t.includes(a),`The feature list for ${C[e]} must include all StandardFeatures not ignored with CAPABILITY_TO_UNUSED_STANDARD_FEATURES. Missing: ${a}`)}))}))
function isFeatureWithPermissionMapping(e){return Object.keys(A).includes(e)}function isFeatureWithPermissionMappingDefinition(e){return isFeatureWithPermissionMapping(e.feature)}function isStandardFeatureDefinition(e){return Object.keys(o.N7).includes(e.feature)}function isStandardFeatureDefinitionWithItemType(e){return Boolean(e.itemType)}function isStandardFeatureDefinitionWithItem(e){return Boolean(e.item)}function isItemWithPermissions(e){return Boolean(e.permissions)}},722938:(e,t,n)=>{n.d(t,{Hc:()=>makeMissingMessageForUserPrefGatedCapabilities,Sn:()=>makeMissingCapabilityUserMessage})
var a=n(232606),i=n(808844),r=n(814099)
function _getUniqueUserFacingCapabilityNameList(e){return Array.from(new Set(e.map((e=>function _getApplicationNameForFeature(e){let t=null
for(const[n,a]of Object.entries(r.VK))if(Object.keys(a).includes(e)){t=r.wj[n]
break}(0,a.hu)(null!=t,"All features should map to an application name.")
return t}(e))))).sort()}function makeMissingCapabilityUserMessage(e){(0,a.hu)(Boolean(e.length),"Expected at least one feature")
const t=_getUniqueUserFacingCapabilityNameList(e);(0,a.hu)(Boolean(t.length),"All features should return an application name")
return makeUserMessage(t)}function makeMissingMessageForUserPrefGatedCapabilities(e){(0,a.hu)(Boolean(e.length),"Expected at least one capability")
return makeUserMessage(e.map((e=>r.wj[e])))}function makeUserMessage(e){return`Opening this item requires access to the ${(0,i.Dw)(e,"or")} application. Contact your administrator for access.`}},23062:(e,t,n)=>{n.d(t,{B:()=>warnAndRedirectAfterInaccessibleItemOpen,C:()=>warnAndRedirectAfterInaccessiblePageOpen})
var a=n(977043),i=n(138966),r=n(974913)
function warnAndRedirectAfterInaccessiblePageOpen(e){warnAndMaybeRedirect(!0,void 0,e)}function warnAndRedirectAfterInaccessibleItemOpen(e,t){warnAndMaybeRedirect(((0,a.CN)()||(0,a.dU)()||(0,a.F9)()||(0,a.Lr)()||(0,a.KE)()||(0,a.UT)())===e,e,t)}function warnAndMaybeRedirect(e,t,n){!function showInaccessibleFeaturesToast(e,t){if(!t)return
r.ZP.warn(t,{id:e,duration:0})}(t,n)
e&&(0,i.ZP)("/editor")}},905362:(e,t,n)=>{n.d(t,{Z:()=>useAreOrganizationSchemasCreatableQuery})
var a=n(769784),i=n(751512)
const r=a.Ps`
  query AreOrganizationSchemasCreatableQuery @skipAudit @engComponent(name: PERMISSIONS) {
    currentUser {
      id
      organizations {
        admin
      }
      teams {
        isSchemaAdmin
      }
    }
  }
`
function useAreOrganizationSchemasCreatableQuery(){var e,t
const n=(0,i.IJ)(r,{fetchPolicy:"cache-and-network"})
if(n.type!==i.NI.SUCCESS)return{queryResultType:n.type}
const a=(null===(e=n.data.currentUser)||void 0===e?void 0:e.organizations.some((e=>e.admin)))||(null===(t=n.data.currentUser)||void 0===t?void 0:t.teams.some((e=>e.isSchemaAdmin)))
return{queryResultType:n.type,areOrganizationSchemasCreatable:a}}},900793:(e,t,n)=>{n.d(t,{kJ:()=>activateApp,NS:()=>checkLifecycleChangeStatus,z0:()=>confirmDeactivateApp,Ue:()=>create,oc:()=>createAppFromManifest,ql:()=>createAppFromManifestLegacy,T0:()=>createLegacy,wC:()=>deactivateApp,MY:()=>lookupInferredTenantInfo,dg:()=>updateDefinition,Ms:()=>updateDefinitionVersion,hw:()=>updateDefinitionVersionFromManifest})
var a=n(681896),i=n(91092),r=n(502633),s=n(277542),o=n(83691),l=n(989526),c=n(383628),d=n(334148),u=n(229329),m=n(205986)
function DeactivateAppWarningModal({onRequestClose:e,onRequestSubmit:t}){const[n,a]=(0,l.useState)(!1)
return l.createElement(m.ZP,{title:"Deactivate app",medium:!0,buttons:[{text:"Cancel",cancel:!0,onClick:()=>{t(!1)}},{text:"Deactivate and revoke credentials",submit:!0,style:d.ZJ.NEGATIVE,onClick:()=>{t(!0)},disabled:!n}],onRequestClose:e},l.createElement(c.ZP,{bannerType:c.ct.ERROR,text:"Deactivating this app will revoke all existing credentials."}),l.createElement("br",null)," New credentials must be generated to re-activate this app. ",l.createElement("br",null),l.createElement("br",null)," Any apps or integrations using existing credentials will no longer be able to authenticate with Benchling. ",l.createElement("br",null),l.createElement("br",null)," ",l.createElement(u.Z,{id:"deactivate-app-confirmation",label:"I confirm that I want to deactivate this app",checked:n,onChange:e=>{a(e.target.checked)}}))}async function updateDefinitionVersion(e,t,n){const r=await(0,s.GD)(e,t,n);(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),[r.benchlingApp])
return r.benchlingApp}async function updateDefinitionVersionFromManifest(e,t,n){const r=await(0,s.Ox)(e,t,n);(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),[r.benchlingApp])
return r.benchlingApp}async function updateDefinition(e,t){const n=await(0,s.Nc)(e,t);(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),[n.benchlingApp])
return n.benchlingApp}async function create(e){const t=await(0,s.pi)(e);(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),[t.benchlingApp])
addCreatedBenchlingAppToApolloCache(t.benchlingApp)
return t.benchlingApp}async function createLegacy(e){const t=await(0,s.ai)(e);(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),[t.benchlingApp])
addCreatedBenchlingAppToApolloCache(t.benchlingApp)
return t.benchlingApp}async function createAppFromManifest(e){const t=await(0,s.y$)(e);(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),[t.benchlingApp])
addCreatedBenchlingAppToApolloCache(t.benchlingApp)
return t.benchlingApp}async function createAppFromManifestLegacy(e){const t=await(0,s.pX)(e);(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),[t.benchlingApp])
addCreatedBenchlingAppToApolloCache(t.benchlingApp)
return t.benchlingApp}async function activateApp(e){return(await(0,s.iA)(e)).status_url}async function deactivateApp(e){return(await(0,s.zy)(e)).status_url}async function checkLifecycleChangeStatus(e){const t=await(0,s.uq)(e)
return"SUCCESS"===t.status&&t.result?t.result.deliveryStatus:t.status}async function confirmDeactivateApp(){const e=await(0,r.Z)(DeactivateAppWarningModal,{})
return Boolean(e)}function lookupInferredTenantInfo(e){return(0,s.fw)({tenant_url_or_id:e})}function addCreatedBenchlingAppToApolloCache(e){const t=(0,a.readQuerySafe)({query:o.K9})
let n=[]
if(t){n=[e,...t.benchlingAppListing.benchlingApps]
n=n.slice(0,o.Jh);(0,a.writeQuery)({query:o.K9},{benchlingAppListing:{benchlingApps:n,__typename:"BenchlingAppListingNode"}})}}},277542:(e,t,n)=>{n.d(t,{CY:()=>o,DF:()=>updateBenchlingAppInstance,GD:()=>updateBenchlingAppDefinitionVersion,Ir:()=>deleteClientSecret,JK:()=>bulkUnarchiveBenchlingApps,Nc:()=>updateBenchlingAppDefinition,Or:()=>regenerateAPIKey,Ox:()=>updateBenchlingAppDefinitionVersionFromManifest,SD:()=>upgradeFromGlobalAppDefinition,TC:()=>i,Xi:()=>deleteAPIKey,ai:()=>createBenchlingAppLegacy,aw:()=>s,bc:()=>r,fw:()=>getInferredTenantInfo,gh:()=>regenerateClientSecret,iA:()=>activateBenchlingApp,mA:()=>installFromGlobalAppDefinition,pX:()=>createBenchlingAppFromManifestLegacy,pi:()=>createBenchlingApp,qr:()=>appURL,sR:()=>queryGlobalAppDefinition,uq:()=>checkLifecycleChangeTask,xi:()=>isTenantInferredInfoError,y$:()=>createBenchlingAppFromManifest,zy:()=>deactivateBenchlingApp,zz:()=>bulkArchiveBenchlingApps})
var a=n(771398)
const i="/developer/apps",r="/developer/app-canvas-builder",s="0.0.1"
var o
!function(e){e.PRIVATE="private"
e.PUBLIC="public"}(o||(o={}))
function updateBenchlingAppDefinition(e,t){return a.Ry({url:`/1/api/apps/${e}`,data:t})}function updateBenchlingAppDefinitionVersion(e,t,n){return a.Ry({url:`/1/api/apps/${e}/versions/${null!=t?t:s}`,data:n})}function updateBenchlingAppDefinitionVersionFromManifest(e,t,n){return a.Ry({url:`/1/api/apps/${e}/versions/${null!=t?t:s}/manifest`,data:n})}function updateBenchlingAppInstance(e,t){return a.Ry({url:`/1/api/app-instances/${e}`,data:t})}function createBenchlingApp(e){return a.s0({url:"/1/api/apps",data:e})}function createBenchlingAppLegacy(e){return a.s0({url:"/1/api/apps",data:e})}function createBenchlingAppFromManifest(e){return a.s0({url:"/1/api/apps/manifest",data:e})}function createBenchlingAppFromManifestLegacy(e){return a.s0({url:"/1/api/apps/manifest",data:e})}function bulkArchiveBenchlingApps(e,t){return a.s0({url:"/1/api/apps:archive",data:{appIds:e,reason:t}})}function bulkUnarchiveBenchlingApps(e){return a.s0({url:"/1/api/apps:unarchive",data:{appIds:e}})}function activateBenchlingApp(e){return a.s0({url:`/1/api/apps/${e}/lifecycle/activate`})}function deactivateBenchlingApp(e){return a.s0({url:`/1/api/apps/${e}/lifecycle/deactivate`})}function checkLifecycleChangeTask(e){return a.UJ(e)}function regenerateAPIKey(e){return a.s0({url:`/1/api/apps/${e}/api-key`})}function deleteAPIKey(e){return a.WY({url:`/1/api/apps/${e}/api-key`})}function regenerateClientSecret(e){return a.s0({url:`/1/api/apps/${e}/oauth2-client-secret`})}function deleteClientSecret(e){return a.WY({url:`/1/api/apps/${e}/oauth2-client-secret`})}function appURL(e){return`/apps/${e}`}function queryGlobalAppDefinition(e){return a.UJ(`/1/api/apps/global-definition/${e}`)}function installFromGlobalAppDefinition(e){return a.s0({url:`/1/api/apps/global-definition/${e}/install`})}function upgradeFromGlobalAppDefinition(e){return a.s0({url:`/1/api/apps/global-definition/${e}/upgrade`})}function isTenantInferredInfoError(e){return e.hasOwnProperty("error")}function getInferredTenantInfo(e){return a.s0({url:"/1/api/apps/infer-tenant",data:e})}},877223:(e,t,n)=>{n.d(t,{Z:()=>BenchlingAppConfigurationRow,n:()=>getNumInvalidSubdeps})
var a=n(692013),i=n(989526),r=n(531041),s=n(185268),o=n(711023),l=n(675649),c=n(383628),d=n(801455),u=n(96957),m=n(74801)
const getNumInvalidSubdepsByTypes=(e,t)=>Object.entries(t).map((([t,n])=>null!=n.errors.find((t=>e.includes(t.type))))).reduce(((e,t)=>e+(t?1:0)),0),getNumInvalidSubdeps=e=>((e,t)=>getNumInvalidSubdepsByTypes(e,t.subdependencyValidation)+getNumInvalidSubdepsByTypes(e,t.outputSubdependencyValidation))(m.X,e)
function BenchlingAppConfigurationRow({name:e,type:t,subtype:n,description:h,requiredConfig:E,value:S,onChangeValue:T,dependencyValidation:g,updateDependencyConfigValidation:f,isEditable:I,scalarEnum:A,elementDefinition:y,minElements:_,maxElements:C,elements:R,onChangeElements:N,subdependencies:O,onChangeSubdependency:b,outputFields:v,onChangeOutputFields:P,updateArrayElementValidation:L}){const D=function getValidationError(e){const t=[...Object.values(e.subdependencyValidation),...Object.values(e.outputSubdependencyValidation)].reduce(((e,t)=>e.concat(t.errors)),e.errors),n=t.find((e=>e.type===m.v.InvalidInputError)),a=t.filter((e=>e.type===m.v.FieldConstraintsError))
if(void 0!==n)return n.message
if(a.length>0){const e=a.length
return`${e} ${(0,l._6)(e,"field is","fields are")} no longer valid. Update the invalid ${(0,l._6)(e,"field","fields")} before submitting a new configuration.`}return null}(g)
return i.createElement("div",{className:(0,a.iv)(p.rowContainer)},i.createElement(d.Z,{htmlFor:r.default.uniqueId("BenchlingAppConfigurationRow"),isRequired:E,label:e,labelStyle:d.Z.STYLES.LABEL}),h&&i.createElement("div",{className:(0,a.iv)(p.description)},h),i.createElement(s.ZP,{name:e,type:t,subtype:n,value:S,requiredConfig:E,elementDefinition:y,scalarEnum:null!=A?A:null,minElements:null!=_?_:null,maxElements:null!=C?C:null,elements:R,onChangeValue:T,onChangeElements:N,dependencyValidation:g,updateDependencyConfigValidation:f,updateArrayElementValidation:L,isEditable:I,schemaId:null}),null!=D&&i.createElement("div",{className:(0,a.iv)(p.errorBannerContainer)},i.createElement(c.ZP,{bannerType:c.ct.ERROR,text:D})),(0,o._K)(t)&&O&&O.length>0&&i.createElement(u.Z,{onChange:b,dependencyValidation:g,updateDependencyConfigValidation:f,disabled:!I,subdependencies:O,parentDependencySelectedId:(0,s.Yd)(S,e),type:t}),t===o.Az.workflow_task_schema&&v&&v.length>0&&i.createElement(u.Z,{onChange:P,dependencyValidation:g,updateDependencyConfigValidation:f,disabled:!I,subdependencies:v,parentDependencySelectedId:(0,s.Yd)(S,e),type:o.Kn.workflow_task_schema_output}))}const p=a.mM.create({rowContainer:{marginTop:"30px"},errorBannerContainer:{marginTop:"10px"},description:{marginBottom:"8px"}})},232493:(e,t,n)=>{n.d(t,{ZP:()=>BenchlingAppConfigurationSection,TQ:()=>initializeConfigValidation})
var a=n(769784),i=n(692013),r=n(764403),s=n.n(r),o=n(989526),l=n(615439),c=n.n(l),d=n(277542),u=n(711023),m=n(382857),p=n(751512),h=n(91092),E=n(965131),S=n(974913),T=n(334148),g=n(476604),f=n(687201),I=n(801455),A=n(685370)
const y=a.Ps`
  query RunSchemaDropdownQuery @skipAudit {
    ...AllAssaySchemasGraphQL
  }
  ${(0,h.f)("AllAssaySchemas").fragment}
`
function RunSchemaDropdown({feature:e,appName:t,appId:n,resourceFeatureAssociations:a,updateResourceFeatureAssociations:r}){const[s,l]=(0,o.useState)("")
function claimedByAppIds(e){return a.filter((t=>t.resourceId===e)).map((e=>e.appSummary.id))}function getDisabledMessage(e){if(!claimedByAppIds(e))return""
return`Run schema already in use by app ${a.filter((t=>t.resourceId===e)).map((e=>e.appSummary.name)).join(", ")}`}const c=(0,p.IJ)(y)
if(c.type===p.NI.ERROR){S.ZP.error("Unable to load feature configuration options. Please try again.")
return o.createElement(o.Fragment,null)}if(c.type===p.NI.PENDING)return o.createElement(g.b,null)
{const d=(0,E.NA)("RunSchema",c.data.runSchemas).filter((e=>!(0,m.ZP)(e))),u=d.map((e=>({name:e.name,value:e.name,runSchemaId:e.id,disabled:claimedByAppIds(e.id).length>0,disabledMessage:getDisabledMessage(e.id)})))
return o.createElement("div",{className:(0,i.iv)(_.rowContainer)},o.createElement(I.Z,{isRequired:!1,label:e.name,labelStyle:I.Z.STYLES.LABEL}),o.createElement(f.Z,{autoFocus:!1,scrollable:!0,isMulti:!0,placeholder:"Select run schema(s)",optionDatas:u.filter((e=>e.name.toLowerCase().startsWith(s.toLowerCase())&&!claimedByAppIds(e.runSchemaId).includes(n))).sort(((e,t)=>Number(e.disabled)-Number(t.disabled))),query:s,value:getSelectedValues(a,e.id,d),onQueryChange:e=>{l(e.target.value)},onSelect:i=>{const s=function createNewAssociation(a){return{appSummary:{id:n,name:t},resourceId:a,featureId:e.id}}(d.filter((e=>e.name===i))[0].id)
r([...a,s])
l("")},onRemove:async e=>{if("(No access)"===e)return
if(!await Promise.resolve(A.iG("Remove run schema from feature configuration",`Removing this run schema will remove all canvases that are currently on runs of this schema. Are you sure you want to remove ${e}?`,T.ZJ.NEGATIVE,{promiseCompatible:!0,enableRedesign:!0})))return
const t=d.filter((t=>t.name===e))[0].id,n=a.filter((e=>e.resourceId!==t))
r(n)}}))}}function getSelectedValues(e,t,n){const a=e.filter((e=>e.featureId===t)).map((e=>e.resourceId))
let i=n.filter((e=>a.includes(e.id))).map((e=>e.name))
a.length-i.length>0&&(i=i.concat(Array(a.length-i.length).fill("(No access)")))
return i}const _=i.mM.create({rowContainer:{marginTop:"30px"}})
var C=n(129270),R=n(271359)
function FeatureConfigurationBlock({features:e,appName:t,appId:n,resourceFeatureAssociations:a,updateResourceFeatureAssociations:r}){return 0===e.length?o.createElement(o.Fragment,null):o.createElement("div",{className:s()((0,i.iv)(N.configurations))},o.createElement("div",{className:s()((0,i.iv)(N.headerStyle))},"Feature Configurations"),o.createElement("div",{className:s()((0,i.iv)(N.helperText))},"Use additional app features by filling out their configurations."),o.createElement("div",{className:s()((0,i.iv)(N.configCard))},e.map(((e,i)=>o.createElement("div",{key:i},o.createElement(RunSchemaDropdown,{feature:e,appName:t,appId:n,resourceFeatureAssociations:a,updateResourceFeatureAssociations:r}))))))}const N=i.mM.create({configurations:{padding:"16px 24px"},configCard:{marginTop:"10px",overflow:"scroll",paddingRight:"10px","::-webkit-scrollbar":{"-webkit-appearance":"none",width:"7px"},"::-webkit-scrollbar-thumb":{"border-radius":"4px","background-color":R.pF}},headerStyle:{fontFamily:C.I3,fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"16px"},helperText:{color:R.pp}})
var O=n(256605),b=n(697134),v=n(868710),P=n(73374),L=n(877223),D=n(223629)
const M=(0,n(567202).ZP)([])
var w=n(74801)
const F=a.Ps`
  query getBenchlingAppConfigurationQuery($benchlingAppId: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    benchlingApp(id: $benchlingAppId) {
      ... on BenchlingAppNode {
        id
        name
        isConfigurationTabVisible
        configuration {
          ...BenchlingAppConfigurationGraphQL
          defaultElementName
          minElements
          maxElements
          elementDefinition {
            ...BenchlingAppConfigurationGraphQL
          }
          elements {
            name
            elementConfigs {
              ...BenchlingAppConfigurationGraphQL
            }
          }
        }
        features {
          id
          name
          type
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,h.f)("BenchlingAppConfiguration").fragment}
  ${(0,h.f)("InaccessibleInfo").fragment}
`,k=a.Ps`
  query GetResourceFeatureAssociations @skipAudit @engComponent(name: BENCHLING_APPS) {
    benchlingAppResourceFeatureAssociations {
      ...ResourceFeatureAssociationGraphQL
    }
  }
  ${(0,h.f)("ResourceFeatureAssociation").fragment}
`,U=i.mM.create({configurations:{padding:"16px 24px",borderBottom:`1px solid ${R.tN}`},stickyButton:{height:"100%",marginTop:"20px",position:"sticky",left:"200%"},configCard:{marginTop:"10px",overflow:"scroll",paddingRight:"10px","::-webkit-scrollbar":{"-webkit-appearance":"none",width:"7px"},"::-webkit-scrollbar-thumb":{"border-radius":"4px","background-color":R.pF}},headerStyle:{fontFamily:C.I3,fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"16px"},helperText:{color:R.pp}}),initializeConfigValidation=e=>{const t={}
e.forEach((e=>{var n,a,i
const r=e.name
t[r]={errors:[],subdependencyValidation:{},outputSubdependencyValidation:{}}
null===(n=e.fieldDefinitions)||void 0===n||n.forEach((e=>{const n=e.name
t[r].subdependencyValidation[n]={errors:[]}}))
null===(a=e.output)||void 0===a||a.fieldDefinitions.forEach((e=>{const n=e.name
t[r].outputSubdependencyValidation[n]={errors:[]}}))
null===(i=e.options)||void 0===i||i.forEach((e=>{const n=e.name
t[r].subdependencyValidation[n]={errors:[]}}))}))
return t},getTooltipMessage=(e,t)=>{const n=Object.values(e)
for(const e of Object.values(t))null!=e&&n.push(...Object.values(e.validation))
const a=n.some((e=>hasRequiredConfigError(e))),i=getDuplicateArrayNameError(e),r=getNumberOfElementsError(e)
return a?"Fill out all required configurations to save changes.":i||(r?`Some arrays have too many or too few elements. ${r}`:"")},hasRequiredConfigError=e=>Object.values(e.subdependencyValidation).reduce(((e,t)=>e.concat(t.errors)),e.errors).some((e=>e.type===w.v.RequiredConfigError)),getDuplicateArrayNameError=e=>{const t=[]
for(const n of Object.values(e))for(const e of n.errors)e.type===w.v.DuplicateArrayNameError&&t.push(e.message)
return t.join("\n")},getNumberOfElementsError=e=>{const t=[]
for(const n of Object.values(e))for(const e of n.errors)e.type===w.v.ConfigArrayNumberOfElementsError&&t.push(e.message)
return t.join("\n")},hasConfigValidationErrors=(e,t)=>{const n=Object.values(e)
for(const e of Object.values(t))null!=e&&n.push(...Object.values(e.validation))
return Object.values(n).map((e=>{const t=e.errors.length>0,n=(0,L.n)(e)
return t||n>0})).reduce(((e,t)=>e||t),!1)}
function _coerceBooleanValue(e){var t
return e.type===u.Az.boolean?{...e,value:null!==(t=e.value)&&void 0!==t&&t}:e}function BasicConfigurationBlock({configurations:e,editedConfiguration:t,updateEditedConfiguration:n,configsValidation:a,updateConfigsValidation:r,updateArrayElementValidation:l}){return 0===e.length?o.createElement(o.Fragment,null):o.createElement("div",{className:s()((0,i.iv)(U.configurations))},o.createElement("div",{className:s()((0,i.iv)(U.headerStyle))},"Basic Configurations"),o.createElement("div",{className:s()((0,i.iv)(U.helperText))},"Fill out basic configurations for core app functionality."),o.createElement(D.Z,{configuration:t,updateConfiguration:n,configsValidation:a,updateConfigsValidation:r,updateArrayElementValidation:l}))}function BenchlingAppConfigurationBlock({benchlingAppId:e,benchlingAppName:t,configurations:n,resourceFeatureAssociations:a,handleUpdateConfiguration:r,features:l}){const[d,m]=M.useGlobalClientState(e),[p,h]=M.useGlobalClientState(`server_${e}`),[E,g]=(0,o.useState)(initializeConfigValidation(d)),[f,I]=(0,o.useState)({}),[A,y]=(0,o.useState)(!1),[_,C]=(0,o.useState)(a);(0,o.useEffect)((()=>{if(!c()(n,p)){h(n)
m(n)
g(initializeConfigValidation(n))}}),[n,m,d,h,p])
const R=!c()(n,d),N=!c()(a,_)
return o.createElement(o.Fragment,null,o.createElement("div",{className:s()("u-lr-split","u-spacing-top",(0,i.iv)(U.configurations))},o.createElement("div",null,o.createElement(P.R6,null,"Configurations"),o.createElement("div",{className:s()((0,i.iv)(U.helperText))},'Fill in the fields below. Submit changes to map your data to "',t,'" and complete its setup.')),o.createElement(v.pf,{tooltipTitle:getTooltipMessage(E,f)},o.createElement(T.Co,{buttonStyle:T.ZJ.SECONDARY,size:T.qE.SMALL,text:A?"Submitting...":"Submit",disabled:!(R||N)||A||hasConfigValidationErrors(E,f),onClick:async()=>{y(!0)
try{await r(function convertConfigurationToUpdatePayload(e){const t=[]
for(const n of e){let e=null
if(null!=n.elements){e=[]
for(const t of n.elements){const n=t.elementConfigs.map((e=>_coerceBooleanValue(e)))
e.push({...t,type:u.Az.array_element,elementConfigs:n})}}t.push({..._coerceBooleanValue(n),elements:e})}return t}(d),function getResourceFeatureAssociationUpdatePayload(e,t){let n=[]
const a=e.filter((e=>e.appSummary.id===t)).map((e=>e.featureId)),i=new Set(a)
for(const t of i){const a=e.filter((e=>e.featureId===t)).map((e=>e.resourceId))
n=[...n,{feature:t,resources:a}]}return n}(_,e))
S.ZP.success("Successfully updated configuration")}finally{y(!1)}},className:s()((0,i.iv)(U.stickyButton)),dataTestAttrs:{component:"BenchlingAppConfigurationBlock",element:"submitButton"}}))),o.createElement(BasicConfigurationBlock,{configurations:n,editedConfiguration:d,updateEditedConfiguration:m,configsValidation:E,updateConfigsValidation:g,updateArrayElementValidation:function updateArrayElementValidation(e,t){I({...f,[e]:t})}}),o.createElement(FeatureConfigurationBlock,{features:l,appName:t,appId:e,resourceFeatureAssociations:_,updateResourceFeatureAssociations:C}))}function BenchlingAppConfigurationSection({benchlingAppId:e}){const t=(0,p.IJ)(F,{variables:{benchlingAppId:e},fetchPolicy:"network-only"}),n=(0,p.IJ)(k,{fetchPolicy:"network-only"})
if(t.type===p.NI.PENDING||n.type===p.NI.PENDING)return o.createElement(g.b,null)
if(t.type===p.NI.ERROR||n.type===p.NI.ERROR){S.ZP.error("Unable to load app configuration. Please try again.")
return o.createElement(o.Fragment,null)}if((0,b.CZ)(t.data.benchlingApp))return o.createElement(o.Fragment,null)
const a=t.data.benchlingApp,r=a.features.filter((e=>e.type===O.a4.ASSAY_RUN)),l=a.configuration.length>0,c=r.length>0
return o.createElement(o.Fragment,null,a.isConfigurationTabVisible?l||c?o.createElement(o.Fragment,null,o.createElement(BenchlingAppConfigurationBlock,{benchlingAppId:e,benchlingAppName:a.name,configurations:a.configuration,resourceFeatureAssociations:n.data.benchlingAppResourceFeatureAssociations,handleUpdateConfiguration:async(a,i)=>{await(0,d.DF)(e,{configuration:a,resourceFeatureAssociations:i})
await t.refetch()
await n.refetch()},features:r})):o.createElement("div",{className:s()("u-lr-split","u-spacing-top",(0,i.iv)(U.configurations))},o.createElement("div",null,o.createElement(P.R6,null,"Configurations"),o.createElement("div",null,"No configuration options present on this app."))):o.createElement("div",{className:s()("u-lr-split","u-spacing-top",(0,i.iv)(U.configurations))},o.createElement("div",null,o.createElement(P.R6,null,"Configurations"),o.createElement("div",null,"Insufficient permissions to view/edit app configuration. Only the app's creator and tenant admins may edit app configuration."))))}},74801:(e,t,n)=>{n.d(t,{X:()=>i,v:()=>a})
var a
!function(e){e.FieldConstraintsError="FieldConstraintsError"
e.RequiredConfigError="RequiredConfigError"
e.InvalidInputError="InvalidInputError"
e.ConfigArrayNumberOfElementsError="ConfigArrayNumberOfElementsError"
e.DuplicateArrayNameError="DuplicateArrayNameError"}(a||(a={}))
const i=Object.values(a)},663961:(e,t,n)=>{n.d(t,{ZP:()=>$,Nf:()=>defaultBenchlingAppsSearchParams})
var a=n(769784),i=n(764403),r=n.n(i),s=n(989526),o=n(459830),l=n(294120),c=n(776065),d=n(751512),u=n(781024),m=n(484827),p=n(977288),h=n(817285),E=n(36424),S=n(191193),T=n(225512)
function BenchlingAppSidepanelItem(e){const{isActive:t,isCompact:n,benchlingApp:a,isChild:i}=e,r=e.benchlingApp.lastSeen
return s.createElement(T.Z,{active:t,className:"sidepanelItem--noIcon",faded:!1,icon:s.createElement(E.Z,{icon:o.BENCHLING_APP}),isCompact:n,onClick:e.onOpen,parties:[],subTitle:`Last Seen: ${r?(0,S.Z)(r):"Never"}`,title:{text:a.name},tooltipText:"",isExpandable:!1,isChild:i})}var g=n(483715),f=n(375619),I=n(971466),A=n(749334),y=n(797431),_=n(872543),C=n(377145),R=n(974913),N=n(320176),O=n(399649),b=n(606903),v=n(14436),P=n(62315),L=n(374669),D=n(68526),M=n(343106),w=n(476604),F=n(194786),k=n(75359),U=n(61279),x=n(64558),B=n(531041),Z=n(949180),q=n(318311),G=n(89635),V=n(269304),H=n(63573)
function BenchlingAppsExpandedTable(e){const t=[{accessorKey:q.dC.ID,header:(0,G.o7)(P.bo.SORT_IDENTIFIER_KEY),flexGrow:1,isSortable:!0,sortDirection:(0,U.Op)(e.sorts,P.bo.SORT_IDENTIFIER_KEY),sortKey:P.bo.SORT_IDENTIFIER_KEY,isFixed:!0},{accessorKey:q.dC.NAME,header:(0,G.o7)(P.bo.SORT_NAME_KEY),flexGrow:1,isSortable:!0,sortDirection:(0,U.Op)(e.sorts,P.bo.SORT_NAME_KEY),sortKey:P.bo.SORT_NAME_KEY},{header:"Last Seen",accessorKey:q.dC.LAST_SEEN,flexGrow:1,isCollapsible:!0,isSortable:!1}]
if(e.isLoading)return s.createElement(Z.Z,null)
const n=e.benchlingApps.map((t=>({id:t.id,data:{id:t.id,name:t.name,[q.dC.LAST_SEEN]:t.lastSeen?(0,S.Z)(t.lastSeen):null},icon:s.createElement(E.Z,{icon:"benchling_app",className:"scrollableTable-cell-icon"}),extra:{benchlingApp:t},isSelected:e.selectedIds.includes(t.id),isFaded:!1})))
return s.createElement(V.Z,{canFilterColumns:!0,canResizeColumns:!0,rowSelectionMode:H.rT.MULTIPLE,className:"u-flex-grow",columns:t,emptyTableText:e.emptyMessage,getRowContentHeight:()=>H._5,isCompact:e.isCompact,matchParentHeight:!0,onChangeSort:e.onChangeSort,onRowClick:e=>{c.Z.openFile(e.id)},onRowContextMenu:x.ZT,onRowsSelect:(t,n)=>{const a=(0,U.Af)({state:{selectedItemIds:e.selectedIds},toggledIds:B.default.pluck(t,"id"),isSelected:n,rowSelectionMode:H.rT.MULTIPLE})
e.onUpdateSelectedIds(a.selectedItemIds)},rows:n,tableKey:H.Uw.EXPANDED_BENCHLING_APP_TABLE,defaultHiddenColumnKeys:[]})}const W=[P.bo.SORT_CREATED_AT_KEY,P.bo.SORT_NAME_KEY]
function defaultBenchlingAppsSearchParams(){return{filters:[{...(0,P.QW)(P.Vm.TYPES),value:[o.BENCHLING_APP]}],limit:(0,_.z3)(),offset:0,query:"",sorts:[{key:P.bo.SORT_CREATED_AT_KEY,reverse:!1}]}}const Y=a.Ps`
  query BenchlingAppSidepanelQuery($ids: [StrictString!]!) @skipAudit @engComponent(name: BENCHLING_APPS) {
    benchlingApps(ids: $ids) {
      id
      name
      lastSeen
    }
  }
`
function BenchlingAppsResultsPager(e){const t=e.getPagination()
return s.createElement(k.Z,{isLoading:!e.searchResults,pagination:t,setOffset:e.handleSetOffset})}function BenchlingAppsSidepanelHeader(e){return s.createElement(p.Z,{buttons:s.createElement(C.Z,{className:"u-mini-spacing-right",expanded:e.isExpanded}),crumbs:s.createElement(m.wn,{text:"Connections"}),isExpanded:e.isExpanded,queryInput:s.createElement(v.Z,{onUpdateQuery:e.handleSetQuery,query:e.searchParams.query}),filtersContainer:e.isClearEnabled()?s.createElement(b.Z,{onClear:e.handleClear}):s.createElement("div",null),sectionTabs:e.connectionsTab})}function CollapsedSidepanelContents(e){const t=e.getPagination()
return s.createElement(s.Fragment,null,s.createElement(F.X2,null,s.createElement(BenchlingAppsSidepanelHeader,{...e})),s.createElement(F.X2,null,e.isClearEnabled()&&s.createElement(g.Z,{total:e.searchResults?e.searchResults.total:null,isExact:e.searchResults?e.searchResults.isExact:null})),s.createElement(F.X2,{fluid:!0,className:"u-vertical-flex"},s.createElement("div",{className:"u-flex-grow u-position-relative"},s.createElement("div",{className:"u-absolute-scroll-container"},(()=>{if(e.isLoading)return s.createElement(w.b,null)
{const n=e.benchlingApps
return s.createElement(s.Fragment,null,s.createElement(f.Z,{pagination:t,setOffset:e.handleSetOffset},s.createElement(N.ZP,{...(0,O.B8)()},0===n.length?s.createElement("div",{className:"sidepanel-fadedMessage"},e.getEmptyMessage()):s.createElement(s.Fragment,null,n.map((t=>s.createElement(BenchlingAppSidepanelItem,{isActive:t.id===e.activeItemId,key:t.id,benchlingApp:t,isCompact:e.isCompactDisplay,onOpen:()=>{c.Z.openFile(t.id)},isChild:!1})))))))}})()))))}function ExpandedSidepanelContents(e){return s.createElement(F.X2,{fluid:!0},s.createElement(F.JX,{lg:1}),s.createElement(F.JX,{lg:21,className:"u-flex-display u-vertical-flex"},s.createElement(BenchlingAppsSidepanelHeader,{...e}),s.createElement("div",{className:"u-lr-split"},s.createElement("div",{className:"u-lr-split"},s.createElement("div",{className:"u-flex-display"},s.createElement(BenchlingAppsResultsPager,{...e})),s.createElement(h.ZP,{onSetSortOrder:e.handleSetSortOrder,onSetPageSize:e.handleSetPageSize,searchParams:e.searchParams,availableSortKeys:W,displaySettingsConfig:{isCompact:e.isCompactDisplay,setIsCompactDisplay:e.setIsCompactDisplay}})),s.createElement(I.Z,null,s.createElement(y.Z,{numSelected:e.selectedIds.length}))),s.createElement("div",{className:"u-flex-grow u-flex-display u-small-spacing-top"},s.createElement(N.ZP,{...(0,O.B8)()},s.createElement(BenchlingAppsExpandedTable,{isCompact:e.isCompactDisplay,emptyMessage:e.getEmptyMessage(),isLoading:e.isLoading,benchlingApps:e.benchlingApps,sorts:e.searchParams.sorts,onChangeSort:t=>{const n=(0,U.dt)(e.searchParams.sorts,t)
e.onUpdateSortOrder([n])},onUpdateSelectedIds:e.onSelectIds,selectedIds:e.selectedIds})))))}function BenchlingAppsSidepanelContents(e){const handleSearch=t=>{e.onSearch(t)
L.WN(l.$0.BENCHLING_APPS,t.sorts)},t={handleSearch,handleSetFilters:e.onUpdateFilters,handleSetQuery:e.onUpdateQueryString,handleSetPageSize:e.onUpdatePageSize,handleSetSortOrder:e.onUpdateSortOrder,handleClear:()=>{handleSearch(D._j(e.searchParams,[],defaultBenchlingAppsSearchParams().filters))},isClearEnabled:()=>D.yE(e.searchParams,[],[o.BENCHLING_APP]),getPagination:()=>{var t,n
return{offset:e.searchParams.offset,limit:e.searchParams.limit,total:(null===(t=e.searchResults)||void 0===t?void 0:t.total)||0,isExact:(null===(n=e.searchResults)||void 0===n?void 0:n.isExact)||!0}},handleSetOffset:e.onUpdateOffset},n=(0,d.A4)(Y,{skip:!e.searchResults,variables:{ids:e.searchResults?e.searchResults.ids:[]}}),a=!e.searchResults||n.type===d.NI.PENDING||n.type===d.NI.SKIPPED
let i=[]
n.type===d.NI.ERROR?R.ZP.error("Could not load apps; try reloading the page."):a||(i=n.data.benchlingApps)
const getEmptyMessage=()=>e.loadingState===u.Gu.FAILED?P.Jc:"No apps"
return e.isExpanded?s.createElement(ExpandedSidepanelContents,{...e,...t,isLoading:a,benchlingApps:i,getEmptyMessage}):s.createElement(CollapsedSidepanelContents,{...e,...t,isLoading:a,benchlingApps:i,getEmptyMessage})}const $=(0,M.ZP)((function BenchlingAppsSidepanel(e){return s.createElement(F.W2,{className:r()("sidepanel",{expandedContainer:e.isExpanded}),size:e.isExpanded?"lg":"sidepanel"},s.createElement(BenchlingAppsSidepanelContents,{...e}))}),P.Sc.BENCHLING_APPS,l.$0.BENCHLING_APPS,{defaultSearchParams:defaultBenchlingAppsSearchParams(),getNavigationUpdate:function getBenchlingAppsURL(e,t){return t.isExpanded?{url:(0,A.q7)("/apps",t.searchParams,t.filterErrors),options:{replace:e.isExpanded===t.isExpanded}}:null}})},83691:(e,t,n)=>{n.d(t,{K9:()=>Z,Jh:()=>B,ZP:()=>BenchlingAppsPage})
var a=n(769784),i=n(989526),r=n(675649),s=n(751512),o=n(91092),l=n(263137),c=n(64558),d=n(764677),u=n(759426),m=n(836291),p=n(382857),h=n(277542),E=n(348920),S=n(138966),T=n(334148),g=n(198964),f=n(898808),I=n(865486),A=n(297020),y=n(924982),_=n(502633),C=n(901138),R=n(239685),N=n(900793),O=n(974913),b=n(532726),v=n(813757),P=n(103593),L=n(59860),D=n(678150),M=n(890711),w=n(185837),F=n(18378),k=n(205986),U=n(953403),x=n(771398)
function CreateBenchlingAppFromManifestModalLegacy(e){const[t,n]=(0,i.useState)(null)
function isUploadedFileInvalid(){if(null==t)return!0
const e=t.name.split(".").pop()
return!("yaml"===e||"yml"===e)}return i.createElement(k.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:async function handleSubmit(){var n
if(null==t){e.onRequestSubmit()
return}const a=b.zy({heading:"Uploading app manifest"})
try{const n=await U.ws(t)
if(n){const e={location:n},t=await(0,N.ql)(e)
b.Je(a,{progress:v.qJ,subheading:`Successfully created app ${t.name} from manifest`,duration:3})
const i=`${h.TC}/${t.id}`;(0,S.ZP)(i)}}catch(e){if(!x.d0(e))throw e
b.Je(a,{progress:v.MR,error:null!==(n=O.ZP.getFriendlyError(e))&&void 0!==n?n:"Something went wrong uploading the manifest. Please try again"})}finally{e.onRequestSubmit()}},title:"Create an app from manifest",buttons:[{text:"Create",submit:!0,style:T.ZJ.SECONDARY,disabled:isUploadedFileInvalid()}]},i.createElement(L.Z,null,i.createElement(P.Z,{lg:12},i.createElement("p",null,"Create a credentialed app in this workspace and use a manifest file to add your app's basic settings and custom configurations."),t?i.createElement(w.Z,null,i.createElement(F.Z,{file:t,onRequestRemove:()=>{n(null)}})):i.createElement(M.Z,{onSelectFiles:(...e)=>{1===e.length&&n(e[0])},accept:".yaml,.yml"}),t&&isUploadedFileInvalid()&&i.createElement(D.Z,{message:"Uploaded file must have suffix .yaml or .yml"}))))}function BenchlingAppListing(e){const t=null==e.apps,[n,a]=(0,i.useState)([d.BH]),r=function getFilteredApps(e){return u.F(e,n)||[]}(e.apps),s=t?{}:(0,c.m8)(e.apps.map(((e,t)=>(0,c.LI)(e.id,t)))),o=r.map((e=>({id:e.id,isArchived:(0,p.ZP)(e),isArchivable:!0,itemIndex:s[e.id],values:[i.createElement("span",null,e.name)]})))
return i.createElement(f.ZP,{tableName:"Apps",columnHeaders:[{name:"Name",width:12}],emptyMessage:"No apps are present",isLoading:t,writable:!0,getEditUrl:n=>(0,C.kj)(t?null:e.apps[n].id),rows:o,onArchive:function _onAppArchive(n){t||(0,C.lf)([e.apps[n]],e.forceRefetchApps)},onUnarchive:async function _onAppUnarchive(n){t||await(0,C.nL)([e.apps[n]],e.forceRefetchApps)},customCreateButton:function createAppButton(){return E.ZP.ENABLE_BENCHLING_APPS_GLOBAL_DEFINITIONS_UI?i.createElement(T.Co,{buttonStyle:T.ZJ.SECONDARY,size:T.qE.SMALL,text:"Create app",dataTestAttrs:{component:"BenchlingAppListing",element:"createDropdownButton"},onClick:()=>{(0,_.Z)(R.ZP,{})}}):i.createElement(g.ZP,{menu:i.createElement(I.ZP,{width:A.zL.SMALL},i.createElement(y.Z,{onSelect:()=>{(0,S.ZP)(`${h.TC}/create`)},dataTestAttrs:{component:"BenchlingAppListing",element:"createDropdown",key:"fromScratch"}},"From scratch"),i.createElement(y.Z,{onSelect:()=>(0,_.Z)(CreateBenchlingAppFromManifestModalLegacy,{})},"From manifest"))},i.createElement(T.Co,{buttonStyle:T.ZJ.SECONDARY,size:T.qE.SMALL,text:"Create app",dataTestAttrs:{component:"BenchlingAppListing",element:"createDropdownButton"}}))}(),leftSubheaderNode:i.createElement("div",{className:"u-flex-display"},i.createElement(m.Z,{itemIds:t?[]:e.apps.map((e=>e.id)),onChangePurposes:function handleChangeArchivePurposeFilters(e){a(e)},selectedPurposes:n}))})}const B=100,Z=a.Ps`
  query ListBenchlingAppsQuery($limitOffsetInput: LimitOffsetInput!, $forDeveloper: StrictBoolean)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    benchlingAppListing(limitOffsetInput: $limitOffsetInput, forDeveloper: $forDeveloper) {
      benchlingApps {
        ...BenchlingAppGraphQL
      }
    }
  }
  ${(0,o.f)("BenchlingApp").fragment}
`,q={limitOffsetInput:{limit:B,offset:0},forDeveloper:!0}
function BenchlingAppsPage(){(0,i.useEffect)((()=>{(0,r._w)("Apps")}),[])
const e=(0,s.IJ)(Z,{fetchPolicy:"cache-and-network",variables:q})
let t
if(e.type===s.NI.ERROR)return null
if(e.type===s.NI.PENDING)return i.createElement("div",{className:"settingsPage font-proxima-13",...(0,l.Z)({component:"BenchlingAppsPage",element:"root"})},i.createElement("div",{className:"settingsPage-contentWrapper"},i.createElement(BenchlingAppListing,{apps:null,forceRefetchApps:()=>{}})))
t=function filterCurrentTenantApps(e){return e.filter((e=>e.owningTenant.isCurrentTenant))}(e.data.benchlingAppListing.benchlingApps)
return i.createElement("div",{className:"settingsPage font-proxima-13",...(0,l.Z)({component:"BenchlingAppsPage",element:"root"})},i.createElement("div",{className:"settingsPage-contentWrapper"},i.createElement(BenchlingAppListing,{apps:t,forceRefetchApps:async()=>{await e.refetch()}})))}},239685:(e,t,n)=>{n.d(t,{JK:()=>Y,w8:()=>$,ZP:()=>CreateAppModal})
var a=n(989526),i=n(23261),r=n(277542),s=n(901138),o=n(138966),l=n(974913),c=n(532726),d=n(813757),u=n(59860),m=n(334148),p=n(205986),h=n(953403),E=n(771398),S=n(900793),T=n(946948)
const g=r.CY.PRIVATE
function AudienceRadioButtons(e){return a.createElement(T.Z,{title:"Audience",options:[{label:"Private",secondaryLabel:"Only allow listed tenants can access this app. Private apps cannot be published publicly on the Benchling App Marketplace.",value:r.CY.PRIVATE,dataTestAttrs:{component:"RadioButtonSelector",element:"Private"}},{label:"Public",secondaryLabel:"I intend to share this app with others and eventually publish it in the Benchling App Marketplace.",value:r.CY.PUBLIC,dataTestAttrs:{component:"RadioButtonSelector",element:"Public"}}],isVertical:!0,selectedValue:e.state,onChange:e.onChangeState})}var f,I=n(692013),A=n(576118),y=n.n(A),_=n(764403),C=n.n(_),R=n(736957),N=n(271359),O=n(678150),b=n(801455),v=n(676328),P=n(676113),L=n(901113)
!function(e){e[e.MAJOR=0]="MAJOR"
e[e.MINOR=1]="MINOR"
e[e.PATCH=2]="PATCH"}(f||(f={}))
function biggestSoFar(e){if(0===e.length)return null
return[...e].sort(((e,t)=>e.compare(t))).reverse()[0]}function biggestSoFarWithSameMajor(e,t){return biggestSoFar(t.filter((t=>t.major===e)))}function validateSemverString(e){const t=new i.SemVer(e),n=e.split(".")
if(t.prerelease.length>0||n.length<1||n.length>3)throw new TypeError(`Invalid version: "${e}"`)
return t.format()}function BenchlingAppVersionInput(e){try{const t=new i.SemVer(validateSemverString(e.versionString)).format(),n={...e,value:t}
return a.createElement(BenchlingAppVersionInputSafe,{...n})}catch(t){if(t instanceof TypeError){const n=t.toString()
l.ZP.error(n)
e.onValidation(!1)
return a.createElement("div",{className:(0,I.iv)(D.group)},a.createElement(O.Z,{message:n}))}throw t}}function BenchlingAppVersionInputSafe(e){const t=new i.SemVer(e.versionString),[n,r]=(0,a.useState)(t.major),[s,o]=(0,a.useState)(t.minor),[l,c]=(0,a.useState)(t.patch),[d,u]=(0,a.useState)([]),[m,p]=(0,a.useState)([!0,!0,!0]),{onChange:h,onValidation:E}=e
function updateField(e,t){switch(t){case f.MAJOR:r(e)
break
case f.MINOR:o(e)
break
case f.PATCH:c(e)
break
default:y()(!1,`Unknown enum value: ${(0,L.vE)(t)}`)}}function handleChangeField(t,a){var r
const o={[f.MAJOR]:0,[f.MINOR]:1,[f.PATCH]:2},c=[...m]
c[o[a]]=t.target.isValid
const d=["Major","Minor","Patch"].filter(((e,t)=>!c[t])),S=null!==(r=t.target.numericValue)&&void 0!==r?r:0
p(c)
t.target.isValid&&updateField(S,a)
if(d.length>0){u([`Invalid values: ${d.join(", ")}`])
E(!1)
return}u([])
const T={[f.MAJOR]:n,[f.MINOR]:s,[f.PATCH]:l}
T[a]=S
const g=new i.SemVer(`${T[f.MAJOR]}.${T[f.MINOR]}.${T[f.PATCH]}`),I=e.currentVersions.map((e=>new i.SemVer(e))),A=biggestSoFarWithSameMajor(g.major,I)
if(null==A||1===g.compare(A)){u([])
updateField(S,a)
h(g.format())
E(!0)}else{u([`New version must be greater than ${A}`])
E(!1)}}const S=(0,I.iv)(D.label),T=b.Z.STYLES.LABEL
return a.createElement("div",{className:(0,I.iv)(D.group)},a.createElement(v.Z,{key:"major",id:"major",label:"Major",labelStyle:T,className:S},a.createElement(P.Z,{value:n,required:!0,className:(0,I.iv)(D.formInput),min:0,onChange:e=>{handleChangeField(e,f.MAJOR)},validateInteger:!0})),a.createElement(v.Z,{key:"minor",id:"minor",label:"Minor",labelStyle:T,className:S},a.createElement(P.Z,{value:s,required:!0,className:(0,I.iv)(D.formInput),min:0,onChange:e=>{handleChangeField(e,f.MINOR)},validateInteger:!0})),a.createElement(v.Z,{key:"patch",id:"patch",label:"Patch",labelStyle:T,className:S},a.createElement(P.Z,{value:l,required:!0,className:(0,I.iv)(D.formInput),min:0,onChange:e=>{handleChangeField(e,f.PATCH)},validateInteger:!0})),d.length>0&&d.map((e=>a.createElement(O.Z,{key:e,message:e}))))}function BenchlingAppVersionReadOnly(e){let t="",n="",r=""
if(null!=e.versionString){const a=new i.SemVer(e.versionString)
t=a.major.toString()
n=a.minor.toString()
r=a.patch.toString()}const s=(0,I.iv)(D.label),o=b.Z.STYLES.LABEL,l=C()("form-control",(0,I.iv)(D.formInput,D.disabled,D.value))
return a.createElement("div",{className:(0,I.iv)(D.group)},a.createElement(v.Z,{key:"major",id:"major",label:"Major",labelStyle:o,className:s},a.createElement("div",{className:l},t)),a.createElement(v.Z,{key:"minor",id:"minor",label:"Minor",labelStyle:o,className:s},a.createElement("div",{className:l},n)),a.createElement(v.Z,{key:"patch",id:"patch",label:"Patch",labelStyle:o,className:s},a.createElement("div",{className:l},r)))}const D=I.mM.create({group:{marginBottom:15},disabled:{backgroundColor:N.tN},label:{display:"inline-block",marginRight:"1em"},formInput:{width:"5em"},value:{borderRadius:R.$Y}})
var M,w=n(36424)
!function(e){e[e.FROM_SCRATCH=0]="FROM_SCRATCH"
e[e.FROM_DRAFT=1]="FROM_DRAFT"
e[e.FROM_MANIFEST=2]="FROM_MANIFEST"}(M||(M={}))
function CreateChoiceButton(e){const t={[M.FROM_SCRATCH]:"From scratch",[M.FROM_DRAFT]:"From existing",[M.FROM_MANIFEST]:"From manifest"},n={[M.FROM_SCRATCH]:"create",[M.FROM_DRAFT]:"create",[M.FROM_MANIFEST]:"code"}
return a.createElement("div",{onClick:function handleClick(){e.handleClick(e.type)},className:(0,I.iv)(F.outerBox,e.isSelected?F.hoverSelected:F.hover,e.isSelected?F.selected:null)},a.createElement("div",{className:C()(function getTargetCss(){switch(e.type){case M.FROM_SCRATCH:case M.FROM_DRAFT:return(0,I.iv)(F.targetBoxScratch)
case M.FROM_MANIFEST:return(0,I.iv)(F.targetBoxManifest)
default:return e.type}}(),(0,I.iv)(F.targetBox,e.isSelected?F.targetBoxSelected:null))},a.createElement(w.Z,{icon:n[e.type],className:(0,I.iv)(F.icon)}),e.type===M.FROM_MANIFEST?a.createElement(w.Z,{icon:"alignment",className:(0,I.iv)(F.manifestAlignIcon)}):null),a.createElement("div",{className:(0,I.iv)(F.bodyText)},t[e.type]))}const F=I.mM.create({outerBox:{padding:"2em",border:"solid",borderWidth:1.5,borderColor:N.pF,borderRadius:4},targetBox:{height:"6em",width:"5em",padding:"2em 0",marginRight:"2em",display:"inline-block",borderWidth:1.5,borderColor:N.pF,borderRadius:4,color:N.pF,textAlign:"center"},targetBoxManifest:{borderStyle:"solid"},targetBoxScratch:{borderStyle:"dashed"},selected:{color:N.mu,borderColor:N.DM,backgroundColor:N.Ro},targetBoxSelected:{color:N.mu,borderColor:N.mu},hover:{":hover":{backgroundColor:N.bs}},hoverSelected:{":hover":{backgroundColor:N.ip}},bodyText:{position:"relative",top:"-1em",display:"inline-block"},icon:{fontSize:16,margin:"0 auto",position:"relative"},manifestAlignIcon:{fontSize:16,position:"absolute",bottom:"3em",left:"2.7em"}})
var k=n(103593)
function CreateAppChoiceButtons(e){const t=function buttonTypesForModal(e){switch(e){case Y.APP:return[M.FROM_SCRATCH,M.FROM_MANIFEST]
case Y.VERSION:return[M.FROM_DRAFT,M.FROM_MANIFEST]
default:return e}}(e.appOrVersion),n=t[0],i=t[1],[r,s]=(0,a.useState)(n)
function onClick(t){s(t)
e.onChangeType(t)}return a.createElement(k.Z,{lg:4},a.createElement(u.Z,{className:(0,I.iv)(U.leftCol)},e.description),a.createElement(u.Z,{className:(0,I.iv)(U.leftCol)},a.createElement(CreateChoiceButton,{type:n,isSelected:r===n,handleClick:onClick})),a.createElement(u.Z,{className:(0,I.iv)(U.leftCol)},a.createElement(CreateChoiceButton,{type:i,isSelected:r===i,handleClick:onClick})))}const U=I.mM.create({leftCol:{padding:"1em"}})
var x=n(263137),B=n(665704),Z=n(890711),q=n(185837),G=n(18378)
const V=n(969601)
function ManifestUpload(e){const[t,n]=(0,a.useState)(null),{uploadedFile:r,currentVersions:s}=e
async function getVersionFromFile(e){try{const t=V.load(await e.text()),a=new i.SemVer(t.info.version),r=s.map((e=>new i.SemVer(e))),o=function isNewerVersionThanOthers(e,t){const n=biggestSoFarWithSameMajor(e.major,t)
return null==n||1===e.compare(n)}(a,r)
if(o){n(null)
return a.format()}const l=biggestSoFarWithSameMajor(a.major,r)
n(`Version ${t.info.version} in file "${e.name}" must be greater than ${l}`)
return null}catch(t){n(`Can't locate a version in file "${e.name}"`)
return null}}async function onChangeFile(t){if(null==t){n(null)
e.onChangeFile(t,null)}else if(function isFilenameInvalid(e){if(null==e)return!0
const t=e.name.split(".").pop()
return!("yaml"===t||"yml"===t)}(t)){n("Uploaded file must have suffix .yaml or .yml")
e.onChangeFile(t,null)}else{const n=await getVersionFromFile(t)
e.onChangeFile(t,n)}}(0,a.useEffect)((()=>{onChangeFile(r)}),[])
return a.createElement(a.Fragment,null,r?a.createElement(q.Z,null,a.createElement(G.Z,{file:r,onRequestRemove:()=>{onChangeFile(null)}})):a.createElement(Z.Z,{className:(0,I.iv)(H.formInput,H.fileChooser),onSelectFiles:(...e)=>{1===e.length&&onChangeFile(e[0])},accept:".yaml,.yml"}),t&&a.createElement(O.Z,{message:t}))}const H=I.mM.create({formInput:{marginBottom:15},fileChooser:{height:"12em",paddingTop:"4em"}})
function CreateAppForm(e){var t,n
const i=e.modalType===$.APP_FROM_MANIFEST||e.modalType===$.APP_FROM_SCRATCH?Y.APP:Y.VERSION,r=e.modalType===$.APP_FROM_MANIFEST||e.modalType===$.VERSION_FROM_MANIFEST,[s,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!0),d=e.currentVersions[0],u={[$.APP_FROM_SCRATCH]:"Create an app",[$.APP_FROM_MANIFEST]:"Create a credentialed app in this workspace and use a manifest file to add your app's basic settings and custom configurations.",[$.VERSION_FROM_DRAFT]:`Start a new draft based on Version ${d}`,[$.VERSION_FROM_MANIFEST]:"Upload an existing manifest file to create your draft."},{name:m,onChangeIsValid:p}=e;(0,a.useEffect)((()=>{const e=r||Boolean(null!=m&&m)
p(l&&e&&(!r||s))}),[m,l,s,r,p])
return a.createElement(k.Z,{lg:8,className:(0,I.iv)(W.rightCol)},a.createElement("p",null,u[e.modalType]),!r&&a.createElement(a.Fragment,null,a.createElement("div",{className:(0,I.iv)(W.formInput)},a.createElement(B.Z,{label:"Name",value:null!==(t=e.name)&&void 0!==t?t:void 0,onChange:t=>{e.onChangeName(t.target.value)},placeholder:"Name your app",dataTestAttrs:{component:"TextField",element:"benchlingAppName"}})),a.createElement("div",{className:(0,I.iv)(W.formInput)},a.createElement(v.Z,{id:"benchlingAppDescription",label:"Description",labelStyle:b.Z.STYLES.LABEL},a.createElement("textarea",{name:"description",value:null!==(n=e.description)&&void 0!==n?n:void 0,onChange:t=>{e.onChangeDescription(t.target.value)},rows:3,placeholder:"Describe what your app will be used for and what it should do. You can use this for your own reference. Collaborators and tenant admins will use this to understand what your app is for.",...(0,x.Z)({component:"textarea",element:"benchlingAppDescription"})})))),r&&a.createElement(ManifestUpload,{currentVersions:e.currentVersions,uploadedFile:e.uploadedFile,onChangeFile:function onChangeFile(t,n){o(null!=t&&null!=n)
e.onChangeFile(t,n)}}),i===Y.VERSION&&(r?a.createElement(BenchlingAppVersionReadOnly,{versionString:e.uploadedFile&&s?e.version:null}):a.createElement(a.Fragment,null,a.createElement("div",{className:(0,I.iv)(W.aboutVersion,W.formInput)},"Choose a version increment for your new published version."),a.createElement(BenchlingAppVersionInput,{currentVersions:e.currentVersions,versionString:e.version,onValidation:c,onChange:e.onChangeVersion}))),i===Y.APP&&a.createElement("div",{className:(0,I.iv)(W.formInput)},a.createElement(AudienceRadioButtons,{state:e.audience,onChangeState:e.onChangeAudience})))}const W=I.mM.create({aboutVersion:{color:N.TG},formInput:{marginBottom:15},rightCol:{borderLeftStyle:"solid",borderLeftWidth:1,borderColor:N.tN}})
var Y,$
!function(e){e[e.APP=0]="APP"
e[e.VERSION=1]="VERSION"}(Y||(Y={}))
!function(e){e[e.APP_FROM_SCRATCH=0]="APP_FROM_SCRATCH"
e[e.APP_FROM_MANIFEST=1]="APP_FROM_MANIFEST"
e[e.VERSION_FROM_DRAFT=2]="VERSION_FROM_DRAFT"
e[e.VERSION_FROM_MANIFEST=3]="VERSION_FROM_MANIFEST"}($||($={}))
function CreateAppModal(e){var t,n,T,f
const I=biggestSoFar((null!==(t=e.currentVersions)&&void 0!==t?t:[]).map((e=>new i.SemVer(e)))),A=function incrementPatchVersion(e){const t=new i.SemVer(validateSemverString(e))
t.patch+=1
return t.format()}(null==I?r.aw:I.format()),y=void 0===e.appId?Y.APP:Y.VERSION,_=y===Y.APP,C=_?"app":"draft",R=y===Y.APP?$.APP_FROM_SCRATCH:$.VERSION_FROM_DRAFT,[N,O]=(0,a.useState)(R),[b,v]=(0,a.useState)(!_),[P,L]=(0,a.useState)(null!==(n=e.name)&&void 0!==n?n:null),[D,w]=(0,a.useState)(null!==(T=e.description)&&void 0!==T?T:null),[F,k]=(0,a.useState)(A),[U,x]=(0,a.useState)(g),[B,Z]=(0,a.useState)(null),[q,G]=(0,a.useState)(!1),V=N===$.APP_FROM_MANIFEST||N===$.VERSION_FROM_MANIFEST
return a.createElement(p.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:async function handleSubmit(){b&&(V?await async function handleSubmitFromManifest(){var t
if(null==B||q)return
const n=c.zy({heading:_?"Creating app":`Uploading app manifest for version ${F}`}),a=_?"Successfully created app from manifest":`Successfully created version ${F} from manifest`
try{G(!0)
const t=await h.ws(B)
if(t){const i={location:t}
let s
if(_)s=await S.oc({...i,audience:U})
else{if(void 0===e.appId)throw new Error("Cannot create version from manifest with undefined appId.")
s=await S.hw(e.appId,F,i)}c.QH(n)
l.ZP.success(a)
const d=`${r.TC}/${s.id}`;(0,o.ZP)(d)}}catch(e){if(!E.d0(e))throw e
c.Je(n,{progress:d.MR,error:null!==(t=l.ZP.getFriendlyError(e))&&void 0!==t?t:"Something went wrong uploading the manifest. Please try again"})}finally{G(!1)
e.onRequestSubmit()}}():await async function handleSubmitFromScratch(){if(q)return
try{const t=c.zy({heading:_?"Creating app":`Creating version ${P} ${F}`}),n=_?`Created app ${P}`:`Created version ${P} ${F}`
G(!0)
const a={name:null!=P?P:"<no name>",description:null!=D?D:""}
let i
if(_)i=await S.Ue({...a,audience:U})
else{if(void 0===e.appId)throw new Error("Cannot create version with undefined appId.")
i=await S.Ms(e.appId,F,a)}c.QH(t)
l.ZP.success(n);(0,s.EQ)(i.id)}finally{G(!1)
e.onRequestSubmit()}}())},large:!0,title:`Create a new ${C}`,buttons:[{text:"Create",submit:!0,style:m.ZJ.SECONDARY,disabled:!b}]},a.createElement(u.Z,null,a.createElement(CreateAppChoiceButtons,{appOrVersion:y,description:`How will you create your ${C}`,onChangeType:function onChangeModalType(e){O(function modalTypeForButton(e){switch(y){case Y.APP:return e===M.FROM_MANIFEST?$.APP_FROM_MANIFEST:$.APP_FROM_SCRATCH
case Y.VERSION:return e===M.FROM_MANIFEST?$.VERSION_FROM_MANIFEST:$.VERSION_FROM_DRAFT
default:return y}}(e))}}),a.createElement(CreateAppForm,{modalType:N,name:P||"",description:D||"",version:F,currentVersions:null!==(f=e.currentVersions)&&void 0!==f?f:[],audience:U,uploadedFile:B,onChangeFile:function onChangeFile(e,t){Z(e)
k(null!=t?t:F)},onChangeAudience:x,onChangeIsValid:v,onChangeVersion:k,onChangeName:L,onChangeDescription:w})))}},260067:(e,t,n)=>{n.d(t,{Z:()=>BenchlingAppSessionStatusCell,b:()=>u})
var a=n(692013),i=n(989526),r=n(256605),s=n(263137),o=n(271359),l=n(36424)
const c=a.mM.create({statusIcon:{marginRight:"6px"},wideCell:{columnSpan:"all"}}),d=a.mM.create({info:{color:o.t0},success:{color:o.xO},warning:{color:o.ud},error:{color:o.JF}}),u={[r.bB.COMPLETED_WITH_WARNINGS]:{icon:"warning",style:d.warning,label:"Completed with warnings"},[r.bB.FAILED]:{icon:"error",style:d.error,label:"Failed"},[r.bB.RUNNING]:{icon:"request-in-progress",style:d.info,label:"Running"},[r.bB.SUCCEEDED]:{icon:"done",style:d.success,label:"Completed"},[r.bB.TIMEOUT]:{icon:"cancelled",style:d.error,label:"Timed out"}}
function BenchlingAppSessionStatusCell(e){const t=u[e.status]
return i.createElement("div",{...(0,s.Z)(e.dataTestAttrs)},i.createElement(l.Z,{icon:t.icon,className:(0,a.iv)(c.statusIcon,t.style)}),t.label)}},192978:(e,t,n)=>{n.d(t,{Ri:()=>sessionStatusToBannerProps,tg:()=>renderChips})
var a=n(692013),i=n(989526),r=n(178570),s=n(256605),o=n(383628),l=n(453778),c=n(778223),d=n(901113)
const u=c.TK.MINI
function replaceAll(e,t,n){return e.replace(new RegExp(t,"g"),n)}function renderChips(e){const t=`<${(0,r.Z)()}>`
e=replaceAll(e,"\\\\{",t)
const n=[],s=/{id:(\w+)}/g
let o,c=0,d=0
for(;null!=(o=s.exec(e));){if(o.index!==c){const a=replaceAll(e.substring(c,o.index),t,"{"),r=i.createElement("span",{key:d},a)
n.push(r)
c=o.index
d+=1}const r=o.index+4,s=r+o[1].length,p=e.substring(r,s),h=i.createElement(l.Z,{id:p,size:u,className:(0,a.iv)(m.bannerChip)})
n.push(i.createElement("span",{key:d},h))
c=o.index+o[0].length
d+=1}if(c<e.length){const a=replaceAll(e.substring(c),t,"{"),r=i.createElement("span",{key:d},a)
n.push(r)}return i.createElement(i.Fragment,null,n)}function sessionStatusToBannerProps(e){let t,n=!1
switch(e.style){case s.Gw.NONE:n=!0
t=o.ct.INFO
break
case s.Gw.INFO:t=o.ct.INFO
break
case s.Gw.WARNING:t=o.ct.WARNING
break
case s.Gw.SUCCESS:t=o.ct.SUCCESS
break
case s.Gw.ERROR:t=o.ct.ERROR
break
default:throw new Error(`Unexpected SessionMessageStyle: ${(0,d.vE)(e.style)}`)}return{bannerType:t,hideIcon:n,text:renderChips(e.content)}}const m=a.mM.create({bannerChip:{marginRight:"0px"}})},901138:(e,t,n)=>{n.d(t,{EQ:()=>openBenchlingAppDeveloperPage,XI:()=>openBenchlingAppPage,kj:()=>getBenchlingAppPageUrl,lf:()=>onAppsArchive,nL:()=>onAppsUnarchive})
var a=n(996447),i=n(675649),r=n(138966),s=n(974913),o=n(883026),l=n(277542)
function getBenchlingAppPageUrl(e){return e?`${l.TC}/${e}`:null}function openBenchlingAppDeveloperPage(e){const t=`${l.TC}/${e}`;(0,r.ZP)(t)}function openBenchlingAppPage(e){const t=`apps/${e}`;(0,r.ZP)(t)}function onAppsArchive(e,t){const n=e.filter((e=>!e.archived))
a.bA({items:n,onArchive:async function archiveHandler(e,n){await(0,o.jI)((0,l.zz)(e,n),"Archiving...").then((t=>{s.ZP.success(`${(0,i._6)(e.length,"App")} successfully archived.`)})).catch(s.ZP.notifyError)
t()}})}async function onAppsUnarchive(e,t){const n=e.filter((e=>e.archived)).map((e=>e.id))
await(0,l.JK)(n).then((e=>{s.ZP.success(`${(0,i._6)(n.length,"App")} successfully unarchived.`)})).catch(s.ZP.notifyError)
t()}},648491:(e,t,n)=>{n.d(t,{p:()=>a})
var a
!function(e){e.CONSTANT_VALUE="CONSTANT_VALUE"
e.CONTEXT_VARIABLE="CONTEXT_VARIABLE"
e.SCHEMA_LOOKUP="SCHEMA_LOOKUP"
e.FUNCTION="FUNCTION"}(a||(a={}))},136701:(e,t,n)=>{n.d(t,{Dk:()=>isMergingDuplicateError,Ps:()=>deleteAlias,Ti:()=>overrideValidationStatus,Ue:()=>create,Vp:()=>bulkOverrideValidationStatus,Zh:()=>getHoistedTags,Zt:()=>addAlias,aR:()=>updateRegistryCollections,gT:()=>listBioentitiesAndBatches,jg:()=>createAndRegister,kI:()=>bulkGetValidationExtras,xJ:()=>updateAlias,yu:()=>bulkGetAliases})
var a=n(518352),i=n(816032),r=n(771398),s=n(8747)
function listBioentitiesAndBatches(e){return(0,i.Q)({url:"/1/api/registries:list-bioentities-and-batches",data:e})}function bulkGetAliases(e){return r.s0({url:"/1/api/inventory-files/actions/bulk-get-aliases",data:{fileIds:e}})}function addAlias(e,t){return r.s0({url:`/1/api/inventory-files/${e}/actions/add-alias`,data:{alias:t}})}function deleteAlias(e,t){return r.ty({url:`/1/api/inventory-files/${e}/actions/delete-alias`,data:{alias:t}})}function updateAlias(e,t,n){return r.s0({url:`/1/api/inventory-files/${e}/actions/update-alias`,data:{originalAlias:t,newAlias:n}})}function updateRegistryCollections(e,{inOrgCollection:t,inPersonalCollection:n}){return r.ty({url:"/1/api/inventory-files/actions/update-registry-collections",data:{inOrgCollection:t,inUserCollection:n,files:e}})}function getHoistedTags(e){return r.xA(`/1/api/inventory-files/${e}/hoisted-tags/`)}async function create({name:e,folderId:t,tagSchemaId:n,tags:i,chemicalStructureInput:s,studyIds:o}){const l=await r.s0({url:"/1/api/bioentity",data:{name:e,folderId:t,tagSchemaId:n,tags:i,chemicalStructureInput:s,studyIds:o}})
a.Z.invalidateFolderContents(t)
return l.createdBioentity}function isMergingDuplicateError(e){return r.d0(e)&&null!=e.registeredDuplicateLabels}async function createAndRegister({inOrgCollection:e,inUserCollection:t,labelingStrategy:n,name:a,notation:i,customSyntaxName:r,projectFolderId:o,residues:l,tags:c,tagSchemaId:d,chemicalStructureInput:u,shouldErrorWhenMergingDuplicate:m,studyIds:p}){return await s.s0({url:"/1/api/bioentities:create-in-registry",data:{inOrgCollection:e,inUserCollection:t,labelingStrategy:n,name:a,notation:i,customSyntaxName:r,projectFolderId:o,residues:l,tags:c,tagSchemaId:d,chemicalStructureInput:u,shouldErrorWhenMergingDuplicate:m,studyIds:p}})}function bulkGetValidationExtras(e){return r.s0({url:"/1/api/bioentities:bulk-get-validation-extras",data:{bioentityIds:e}})}function overrideValidationStatus(e){return r.s0({url:"/1/api/bioentities:override-validation-status",data:{bioentityIds:e}})}function bulkOverrideValidationStatus(e,t){return s.ty({url:"/1/api/bioentities:bulk-override-validation-status",data:{tagSchemaId:e,errorLabels:t}})}},947216:(e,t,n)=>{n.d(t,{FE:()=>AnnotationCollection,Hn:()=>Annotation,q6:()=>Annotation})
var a=n(968653),i=n(467607),r=n(776015)
class Annotation extends r.Z{defaults(){return{...super.defaults(),name:"",annotation_type:"",strand:1,color:"#7EA7D8",notes:"",custom_fields:[]}}strand(){return this.get("strand")}color(){return this.get("color")}annotationType(){return this.get("annotation_type")}name(){return this.get("name")}notes(){return this.get("notes")}customFields(){return this.get("custom_fields")}identityFingerprint(){return`${this.name()}:${this.start()}:${this.end()}:${this.strand()}`}equal(e){return this.get("name")===e.get("name")&&this.start()===e.start()&&this.end()===e.end()&&this.strand()===e.strand()&&this.color()===e.color()}validate(e,t){const n=t.sequence.length(),a=t.sequence.startIndex()
return e.name?e.name.length>i.Yo?"Annotation name is too long":null!=e.annotation_type&&e.annotation_type.length>i.ui?"Annotation type is too long":null==e.start||null==e.end||Number.isNaN(e.start)||Number.isNaN(e.end)?"An annotation must have a valid start and end":0===n?"An annotation cannot be added to 0-length sequence":0<=e.start&&e.start<n&&0<=e.end&&e.end<n?e.start>=e.end&&0!==e.end&&!t.sequence.circular()?"Start and end values cannot wrap on a linear sequence":e.custom_fields.length>i.oT?"Annotation has too many custom fields":void 0:`Start and end values must be between ${a} and ${a-1+n}.`:"An annotation must have a valid name"}}class AnnotationCollection extends a.ZP{static initClass(){this.prototype.model=Annotation
this.prototype.attributeName="annotations"}batchName(){return"annotations"}deepClone(e=0){const t=new AnnotationCollection
this.each((n=>t.add(n.clone(e))))
return t}}AnnotationCollection.initClass()},45717:(e,t,n)=>{n.r(t)
n.d(t,{AMINO_ACID_ABBREVIATION_PREF_KEY:()=>o,AMINO_ACID_TLA:()=>l,AMINO_ACID_TO_DEGENERATE_DNA_CODONS:()=>p,AMINO_ACID_TO_STANDARD_DNA_CODONS:()=>m,AbbreviationFormat:()=>a,DEFAULT_DNA_START_CODON:()=>h,DEGENERATE_DNA_CODE:()=>d,DNA_START_CODONS:()=>E,DNA_STOP_CODONS:()=>S,NON_STANDARD_AMINO_ACIDS:()=>c,STANDARD_DNA_CODE:()=>u})
var a,i=n(64558),r=n(955836),s=n(483882)
!function(e){e.SINGLE_LETTER="SLA"
e.TRIPLE_LETTER="TLA"}(a||(a={}))
const o="amino_acid_select.abbreviation",l={"*":"*",A:"Ala",B:"Asx",C:"Cys",D:"Asp",E:"Glu",F:"Phe",G:"Gly",H:"His",I:"Ile",J:"Xle",K:"Lys",L:"Leu",M:"Met",N:"Asn",O:"Pyl",P:"Pro",Q:"Gln",R:"Arg",S:"Ser",T:"Thr",U:"Sec",V:"Val",W:"Trp",X:"Xaa",Y:"Tyr",Z:"Glx"},c=["B","J","O","U","X","Z"],d=s[r.hR.STANDARD].code,u=(0,i.m8)(Object.entries(d).filter((([e,t])=>!Array.from(e).some((e=>r.Un.includes(e)))))),m=(0,i.vM)(Object.keys(u),(e=>u[e])),p=(0,i.vM)(Object.keys(d),(e=>d[e])),h="ATG",E=["ATG","TTG","CTG","GTG"],S=["TAG","TAA","TGA"]},48047:(e,t,n)=>{n.r(t)
n.d(t,{LongQueryException:()=>LongQueryException,NucleotideType:()=>g.Wy,calculateRevcompForRangeFeature:()=>calculateRevcompForRangeFeature,circularArraySlice:()=>circularArraySlice,clonePartAttributes:()=>clonePartAttributes,cloneWrappableFeature:()=>cloneWrappableFeature,complement:()=>complement,containsNonStandardAminoAcids:()=>containsNonStandardAminoAcids,count:()=>count,didConvertIToN:()=>didConvertIToN,didConvertUToT:()=>didConvertUToT,digest:()=>digest,digestableEnzyme:()=>digestableEnzyme,dnaToRNA:()=>dnaToRNA,e260:()=>e260,enzymeCutsWithinRestrictionSite:()=>enzymeCutsWithinRestrictionSite,formatAminoAcidCount:()=>formatAminoAcidCount,formatBaseCount:()=>formatBaseCount,formatPolymerResidueCount:()=>formatPolymerResidueCount,formatPolymerResidueSubcount:()=>formatPolymerResidueSubcount,gc:()=>gc,generateAARegexForDNA:()=>generateAARegexForDNA,generateAARegexForRNA:()=>generateAARegexForRNA,generateRegex:()=>generateRegex,getSanitizedBasesAndSanitizationErrors:()=>getSanitizedBasesAndSanitizationErrors,hammingDistance:()=>hammingDistance,isDegenerate:()=>isDegenerate,isOrf:()=>isOrf,isSimpleDNASequence:()=>isSimpleDNASequence,isSimpleRNASequence:()=>isSimpleRNASequence,isSimpleSequence:()=>isSimpleSequence,isSymmetric:()=>isSymmetric,isValidAminoAcids:()=>isValidAminoAcids,isValidBase:()=>isValidBase,isValidMixedBaseSequence:()=>isValidMixedBaseSequence,isValidSequence:()=>isValidSequence,matchWithDegeneracy:()=>matchWithDegeneracy,meltingTemperature:()=>meltingTemperature,mw:()=>mw,nextNonGapIndex:()=>nextNonGapIndex,normalize:()=>normalize,orfs:()=>orfs,productLength:()=>productLength,random:()=>random,removeGaps:()=>removeGaps,revcomp:()=>revcomp,revcompFeatures:()=>revcompFeatures,revcompParts:()=>revcompParts,reverse:()=>reverse,reverseTranscribeRNA:()=>reverseTranscribeRNA,rnaToDNA:()=>rnaToDNA,sanitize:()=>sanitize,sanitizeAminoAcids:()=>sanitizeAminoAcids,search:()=>search,sign:()=>sign,slice:()=>slice,stickyCompatible:()=>stickyCompatible,stripDegenerate:()=>stripDegenerate,translate:()=>_,translateOnStrand:()=>translateOnStrand})
var a=n(64558),i=n(531041),r=n(232606),s=n(675649),o=n(45717),l=n(294538),c=n(650858),d=n(483882),u=n(816772),m=n(28181),p=n(132814),h=n(432128),E=n(67715),S=n(525098),T=n(822314),g=n(955836),f=n(282346)
class LongQueryException extends S.Z{}const I={},A={},y={}
for(const[e,t]of Object.entries(o.AMINO_ACID_TO_DEGENERATE_DNA_CODONS)){I[e]=`(${t.join("|")})`
A[e]=`(${t.map((e=>revcomp(e,g.jb))).join("|")})`
I[e.toLowerCase()]=I[e]
A[e.toLowerCase()]=A[e]}for(const[e,t]of Object.entries(I))y[e]=t.replace(/T/g,"U")
function reverse(e){let t=""
for(const n of Array.from(e))t=n+t
return t}function complement(e,t){let n=""
for(const a of Array.from(e))n+=t[a]||a
return n}function revcomp(e,t){let n="",a=e.length-1
for(;a>=0;){const i=e[a--]
n+=t[i]||i}return n}function bigrams(e){const t=[]
for(let n=0;n<=e.length-2;n+=1)t.push(e.slice(n,n+2))
return t}function generateRegex(e,t={}){const n={allowedChars:[],maxMismatches:0,rnaAgnostic:!1,...t}
if(0===n.maxMismatches){const t=n.rnaAgnostic?g.aV:g.KP
let a=""
for(const i of Array.from(e))if(n.allowedChars.includes(i))a+=i
else{const e=t[i.toUpperCase()]
if(!e)throw new Error(`Unknown base given (${i}).`)
a+=e}if(a.length>=32768)throw new LongQueryException(`The query generated a RegExp that is too big: ${a}`)
return RegExp(a,"gi")}{const t=n.rnaAgnostic?g.Ip:g.L0,a=[]
for(const i of Array.from(e))if(n.allowedChars.includes(i))a.push([i])
else{const e=t[i.toUpperCase()]
if(!e)throw new Error(`Unknown base given (${i}).`)
a.push(e)}return{lastIndex:0,exec(e){let t=null
for(let i=this.lastIndex,r=e.length-a.length+1,s=this.lastIndex<=r;s?i<r:i>r;s?i++:i--){let r,s,o,l=0
for(r=0,o=a.length,s=0<=o;s?r<o:r>o;s?r++:r--)if(!a[r].includes(e[i+r])){l+=1
if(l>n.maxMismatches)break}if(r===a.length){t=[e.substr(i,a.length)]
t.index=i
break}}return t}}}}function generateAARegexHelper(e,t,n={revcomp:!1}){let a=""
for(const i of Array.from(e)){const e=t[i]
if(!e)throw new Error(`Unknown amino acid given (${i})`)
n.revcomp?a=e+a:a+=e}if(a.length>=32768)throw new LongQueryException(`The query generated a RegExp that is too big: ${a}`)
return RegExp(a,"gi")}function generateAARegexForDNA(e,t={revcomp:!1}){return generateAARegexHelper(e,t.revcomp?A:I,t)}function generateAARegexForRNA(e){return generateAARegexHelper(e,y,{revcomp:!1})}function enzymeCutsWithinRestrictionSite(e){const{cut:t,cut2:n,offset:a,offset2:i,length:r}=e
return!(t<0||t>r)&&(!(t+a<0||t+a>r)&&(null==n||!(n<0||n>r)&&!(n+i<0||n+i>r)))}function digestableEnzyme(e){const t=e
let n
const{cut:a}=t,{cut2:i}=t,{offset:r}=t
let s=a,o=i
function ns(e){let t=""
for(let n=0;n<e;n++)t+="N"
return t}if(r>0){t.right=a+r
t.left=a}else{t.right=a
t.left=a+r}let l=""
if(t.left<0){n=-t.left
l=ns(n)
t.left+=n
t.right+=n
s+=n
null!=o&&(o+=n)}l+=t.seq
if(t.right>l.length){n=t.right-l.length
l+=ns(n)}t.matchingRegion=l
t.matchingCut=s
t.matchingCut2=o
return t}function calculateRevcompForRangeFeature(e,t,n){return{end:p.mod(e-t,e),start:p.mod(e-n,e)}}function revcompFeatures(e,t){const n=[]
for(const a of t){const{start:t,end:i}=calculateRevcompForRangeFeature(e,a.start,a.end)
a.start=t
a.end=i
null!=a.bind_position&&(a.bind_position=e-a.bind_position-1)
n.push(a.strand=l.a7[a.strand])}return n}function revcompParts(e,t){for(const n of t){const{start:t,end:a}=calculateRevcompForRangeFeature(e,n.start,n.end)
n.start=t
n.end=a
n.reverse=!n.reverse
n.complement=!n.complement}}function clonePartAttributes(e,t,n,a){(0,r.Gp)(p.isCircularRangeWithin(e.start,e.end,t,n,a),"Expected part to be fully contained within selection.")
const i=e.start<t?p.length(t,n,a)-n:-t,s=p.mod(e.start+i,a),o=p.mod(e.end+i,a)
return{...e,start:s,end:o}}function cloneWrappableFeature(e,t,n,a){let i
i=e.start()<t?p.length(t,n,a)-n:-t
const r=e.clone(i)
r.set({start:p.mod(r.start(),a),end:p.mod(r.end(),a)})
r.get("bind_position")&&r.set("bind_position",p.mod(r.get("bind_position"),a))
return r}function search(e,t,n,a=!0){let i,r
const s=generateRegex(t),o=generateRegex(revcomp(t,g.jb))
r=n?e+e.slice(0,t.length-1):e
const l=[]
for(;i=s.exec(r);){s.lastIndex=i.index+1
l.push({sequence:i[0],index:i.index,strand:1})}if(a)for(;i=o.exec(r);){o.lastIndex=i.index+1
l.push({sequence:revcomp(i[0],g.jb),index:i.index,strand:-1})}return l}function normalize(e){return e.replace(/[ ]/g,"").toUpperCase()}function removeGaps(e){return e.replace(g.y4,"")}const _=(0,T.Z)((function _translate(e,t,n,i=!1){let r=normalize(e)
i&&(r=removeGaps(r))
const s=Array.from((0,a.yo)(r,3))
r.length%3!=0&&s.pop()
const o=t===g.Wy.DNA?d[n].code:u[n].code
return s.map((e=>{var t
return null!==(t=o[e])&&void 0!==t?t:"?"})).join("")}),{max:1e3},((e,t,n,a=!1)=>`${e};${t};${n};${a}`))
function translateOnStrand(e,t,n,a,i=!1){-1===t&&(e=revcomp(e,g.Sb[n]))
return _(e,n,a,i)}function sign(e){return e>0?1:e<0?-1:0}function random(e,t=.5){const n=Math.ceil(e*t),a=[]
for(let e=0;e<n;e++)a.push(Math.random()>.5?"C":"G")
for(let t=n,i=e,r=n<=i;r?t<i:t>i;r?t++:t--)a.push(Math.random()>.5?"A":"T")
return i.default.shuffle(a).join("")}function slice(e,t,n,a=!1){if(t<n)return e.slice(t,n);(0,r.hu)(a||0===n,"Invalid start and end for linear sequence",{start:t,end:n})
return e.slice(t)+e.slice(0,n)}function circularArraySlice(e,t,n,a=!1){if(t<n)return e.slice(t,n);(0,r.hu)(a||0===n,"Invalid start and end for linear sequence",{start:t,end:n})
return e.slice(t).concat(e.slice(0,n))}function meltingTemperature(e,t){const n=i.default.clone(t===g.Wy.DNA?h.Z.get(c.gq.MELTING_TEMP_DNA):h.Z.get(c.gq.MELTING_TEMP_RNA))
for(const[e,t]of Object.entries(n))null===t&&delete n[e]
const s={...g.Oj,nnMaxLen:80,...n}
e=normalize(e);(0,r.Gp)(s.method!==g.m_.primer3||t===g.Wy.DNA,`nucleotideType not valid for Tm method primer3 (seq: ${e})`);(0,r.Gp)(s.method!==g.m_.thermo||t===g.Wy.DNA,`nucleotideType not valid for Tm method thermo (seq: ${e})`);(0,r.Gp)(s.method!==g.m_.xia||t===g.Wy.RNA,`nucleotideType not valid for Tm method xia (seq: ${e})`)
if(0===e.length)return NaN
if(s.method===g.m_.primer3)return(e=e.replace(/[^AGTC]/g,"N")).length>s.nnMaxLen?function longSeqTm(e,t,n,a){let i=0,r=0
for(const t of Array.from(e))switch(t){case"C":case"G":i++
break
case"N":r++}i+=r/2
return 81.5+schildkrautSaltCorrection((t+=divalentToMonovalent(n,a))/1e3)+(41*i-600)/e.length}(e,s.monovalentConc,s.divalentConc,s.dntpConc):function oligoTm(e,t,n,a,i){const r=isSymmetric(e,g.Wy.DNA)?1:4,s=.001*(n+divalentToMonovalent(a,i))
return nearestNeighborOligoTm(e,g.Wy.DNA,1e-9*t,r,g.B0,{dH:0,dS:santaLuciaSaltCorrection(s,e)},{dH:0,dS:-1.4},g.h8)}(e,s.dnaConc,s.monovalentConc,s.divalentConc,s.dntpConc)
if(s.method===g.m_.thermo)return function breslauerTm(e,t,n){const i=1e-9*t,r=.001*n,s=160,o=nearestNeighborOligoTm(e,g.Wy.DNA,i,s,g.Sj,{dH:-3400,dS:-12.4},{dH:0,dS:0})
return(0,a.uZ)(0,95,o+schildkrautSaltCorrection(r))}(e,s.dnaConc,s.monovalentConc)
if(s.method===g.m_.xia)return function xiaTm(e,t,n){const a=1e-9*t,i=.001*n,r=isSymmetric(e,g.Wy.RNA)?1:4
return nearestNeighborOligoTm(e,g.Wy.RNA,a,r,g.RT,{dH:3610,dS:-1.5},{dH:0,dS:-1.4},g.A7)+schildkrautSaltCorrection(i)}(e.replace(/[^AGUC]/g,"N"),s.dnaConc,s.monovalentConc)
throw new Error("Invalid melting temperature method selected.")}function nearestNeighborOligoTm(e,t,n,a,i,r,s,o){const l=[r]
isSymmetric(e,t)&&l.push(s)
if(o){const t=e[0],n=e[e.length-1]
l.push(o[t])
l.push(o[n])}const{dH:c,dS:d}=bigrams(e).map((([e,t])=>i[e][t])).concat(l).reduce(((e,t)=>({dH:e.dH+t.dH,dS:e.dS+t.dS})))
return c/(1.987*Math.log(n/a)+d)-273.15}function schildkrautSaltCorrection(e){return 16.6*Math.log10(e)}function santaLuciaSaltCorrection(e,t){return.368*(t.length-1)*Math.log(e)}function isSymmetric(e,t){return e.length%2!=1&&e===revcomp(e,g.Sb[t])}function divalentToMonovalent(e,t){0===e&&(t=0)
e<t&&(e=t)
return 120*Math.sqrt(e-t)}function _dotproduct(e,t){let n=0
for(const[a,i]of Object.entries(t))a in e&&(n+=e[a]*i)
return n}function gc(e,t){(0,r.hu)(Boolean(t),"Expected a nucleotideType!")
return _dotproduct(count(e,t),{A:0,U:0,T:0,G:1,C:1})/e.length}function mw(e){return _dotproduct(count(e,g.Wy.DNA),{A:313.21,U:0,T:304.2,C:289.18,G:329.21,I:314})-61.96}function e260(e){const t=bigrams(e).map((e=>g.il[e[0]][e[1]]))
return s.Sm(t)-_dotproduct(i.default.countBy(e.slice(1,-1),(e=>e.toUpperCase())),g.Hy)}function count(e,t){(0,r.hu)(Boolean(t),"Expected a nucleotideType!")
const n={A:0,T:0,G:0,C:0,U:0},a=t===g.Wy.DNA?g.yD:g.lc
for(const t of Array.from(e)){const i=t.toUpperCase()
let s=a[i];(0,r.Gp)(null!=s,`${i} not in baseTable (seq: ${e})`)
s=s||""
for(const e of Array.from(s))n[e]+=1/s.length}return n}function isValidBase(e,t){return e in t}function sanitize(e,t,n=!1){return getSanitizedBasesAndSanitizationErrors(e,t,n).sanitizedBases}function getSanitizedBasesAndSanitizationErrors(e,t,n=!1){(0,r.hu)(Boolean(t),"Expected a nucleotideType!")
const a={sanitizedBases:"",errors:{convertedUToT:!1,convertedTToU:!1,convertedIToN:!1,removedInvalidBases:!1}},i=[],s=["a","A","g","G","c","C",...g.Un]
for(const r of Array.from(e))if(s.includes(r))i.push(r)
else if("I"===r||"i"===r){a.errors.convertedIToN=!0
i.push((0,E.BX)(r,"N"))}else if("U"===r||"u"===r)if(t!==g.Wy.DNA||n)i.push(r)
else{a.errors.convertedUToT=!0
i.push((0,E.BX)(r,"T"))}else if("T"===r||"t"===r)if(t!==g.Wy.RNA||n)i.push(r)
else{a.errors.convertedTToU=!0
i.push((0,E.BX)(r,"U"))}else a.errors.removedInvalidBases=!0
a.sanitizedBases=i.join("")
return a}function reverseTranscribeRNA(e){return rnaToDNA(e)}function didConvertIToN(e,t){return e!==t&&e.replace(/I/g,"N").replace(/i/g,"n")===t}function didConvertUToT(e,t){return e!==t&&e.replace(/U/g,"T").replace(/u/g,"t")===t}function isValidAminoAcids(e){return i.default.every(e,(e=>e in I))}function sanitizeAminoAcids(e){return e.split("").filter((e=>(0,m.Z)(e))).join("")}function isValidSequence(e,t){(0,r.hu)(Boolean(t),"Expected a nucleotideType!")
return i.default.every(e,(e=>isValidBase(e,g.Sb[t])))}function isValidMixedBaseSequence(e){return g.Pt.test(e)}function isSimpleDNASequence(e){return i.default.every(e,(e=>"ATGC".includes(e.toUpperCase())))}function isSimpleRNASequence(e){return i.default.every(e,(e=>"AUGC".includes(e.toUpperCase())))}function isSimpleSequence(e){return i.default.every(e,(e=>"ATUGC".includes(e.toUpperCase())))}function formatBaseCount(e){const t=[[1,"bp"],[1e3,"kb"],[1e6,"Mb"],[1e9,"Gb"]]
if(e>=0)for(let n=0;n<t.length;n++){const a=t[n],[i,r]=a,s=(e/i).toFixed(1)
if(s.length<=5||n===t.length-1)return`${0===n?e:s} ${r}`}throw new Error(`Unable to format base count: ${e}`)}function formatAminoAcidCount(e){return`${e} ${s._6(e,"residue")}`}function formatPolymerResidueCount(e,t){return"protein"===t?formatAminoAcidCount(e):formatBaseCount(e)}function formatPolymerResidueSubcount(e,t,n){return"protein"===n?`${e} of ${formatAminoAcidCount(t)}`:`${formatBaseCount(e)} of ${formatBaseCount(t)}`}function isOrf(e,t=o.DEFAULT_DNA_START_CODON){if((e=sanitize(e,g.Wy.DNA)).length<6||e.length%3!=0)return!1
const n=e.slice(e.length-3)
return e.slice(0,3).toUpperCase()===t&&"*"===o.DEGENERATE_DNA_CODE[n.toUpperCase()]}function orfs(e,t,n,a){const i=[]
n===g.Wy.RNA&&(e=sanitize(e,g.Wy.DNA))
for(const n of o.DNA_START_CODONS){i.push(...(0,f.s)(e,t,n)||[])
a||i.push(...(0,f._)(e,t,n)||[])}return i}function digest(e,t,n){let a=e;(0,i.default)(t).each((e=>{const t=[];(0,i.default)(a).each((a=>{let r=a.digest(e).models
null!=n&&(r=(0,i.default)(r).filter((e=>n(e))))
return t.push(...r)}))
a=t}))
return a}function matchWithDegeneracy(e,t){return null!=e&&null!=t&&null!=e.toUpperCase().match(`^${g.KP[t]}$`)}function stickyCompatible(e,t){if(null!=e&&null!=t){if(e.get("circular")||t.get("circular"))return!1
const n=normalize(e.overhang3())===normalize(t.overhang5())
return sign(e.get("offset3"))===sign(t.get("offset5"))&&n}return!0}function productLength([e,t],[n,a],i,r){if(!i){0===a&&(a=r)
return e<=n&&a>=t?a-e:0}const s=e
e=0
t=p.mod(t-s,r)
n=p.mod(n-s,r)
0===(a=p.mod(a-s,r))&&(a+=r)
return a>=t?n>=a?0:a-e:0}function hammingDistance(e,t){let n=0
for(const[a,r]of i.default.zip(e,t))a!==r&&n++
return n}function isDegenerate(e){const t=normalize(e)
return Array.from(t).some((e=>g.Un.includes(e)))}function stripDegenerate(e,t){return Array.from(sanitize(e,t)).filter((e=>!isDegenerate(e))).join("")}function containsNonStandardAminoAcids(e){return Array.from(normalize(e)).some((e=>o.NON_STANDARD_AMINO_ACIDS.includes(e)))}function nextNonGapIndex(e,t){for(let n=t;n<e.length;n++)if(e[n]!==g.P8)return n
return-1}function dnaToRNA(e){return e.replace(/T/g,"U").replace(/t/g,"u")}function rnaToDNA(e){return e.replace(/U/g,"T").replace(/u/g,"t")}},239460:(e,t,n)=>{n.d(t,{Z:()=>Banner})
var a=n(989526),i=n(263137),r=n(36424)
function Banner(e){return a.createElement("div",{className:"buffer-options-item-banner u-ellipsis-text"},a.createElement(r.Z,{icon:"info-circle",className:"buffer-options-item-banner-icon"}),a.createElement("span",{...(0,i.Z)({component:"Banner",element:"text"})},e.message))}},581197:(e,t,n)=>{n.d(t,{Z:()=>BufferOptions})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(239460),l=n(669327)
function BufferOptions({banner:e,leftChildren:t,rightChildren:n,fullScreen:i=!0}){return s.createElement("div",{className:r()("buffer-options",i&&(0,a.iv)(c.fullScreen),!i&&(0,a.iv)(c.embedded))},s.createElement("div",{className:"buffer-options-container"},t,s.createElement(l.Z,{className:"buffer-options-item--bannerContainer"},e&&s.createElement(o.Z,{message:e})),n))}const c=a.mM.create({fullScreen:{position:"absolute"},embedded:{position:"static"}})},669327:(e,t,n)=>{n.d(t,{Z:()=>BufferOptionsItem})
var a=n(764403),i=n.n(a),r=n(989526)
function BufferOptionsItem(e){return r.createElement("div",{className:i()("buffer-options-item",e.className)},e.children)}},869e3:(e,t,n)=>{n.d(t,{Z:()=>g})
var a=n(602652),i=n.n(a),r=n(989526),s=n(348920),o=n(256605),l=n(252394),c=n(629656),d=n(171457),u=n(336489),m=n(378045),p=n(113505),h=n(661978),E=n(372721),S=n(749278),T=n(939092)
class BulkUpdateBioentitiesFlow extends r.Component{constructor(){super(...arguments)
this.getValidColumnTypes=e=>{const t=[E.BA.FILENAME,E.BA.NEW_BIOENTITY_NAME,E.BA.NEW_REGISTRY_ID,...T.Oo(T.A(e.selectedSchemaIds),(0,l.ij)(T.My(e.selectedSchemaIds))),...T.jD(T.Ek(e.selectedSchemaIds)),...E.p5]
s.ZP.REGISTRY_ENABLE_BULK_ENTITY_FOLDER_CHANGE&&t.push(E.BA.FOLDER_PATH_FORWARD_SLASH)
return t}
this.getRequiredColumnsError=(e,{selectedSchemaIds:t})=>{const n=[E.BA.FILENAME],a=T.lx(n,e,t,!0),i=T.Vp(e,T.Ek(t))
return a||(i||(e.some((({type:e})=>e!==E.BA.FILENAME))?null:"At least one other field is required."))}
this._getPanes=()=>[{paneKey:E.y$.SET_IMPORT_SETTINGS_FOR_DESTINATION,configuration:d.Z.configure({showRegistries:!0,showInventory:!0,folderSelectorLabel:"Update location",folderSelectorPopoverContent:"Only entities in this location will be updated."})},{paneKey:E.y$.UPLOAD_SPREADSHEET,configuration:p.Z.configure()},{paneKey:E.y$.MAP_COLUMN_NAMES,configuration:u.Z.configure({getValidColumnTypes:this.getValidColumnTypes,getRequiredColumnsError:this.getRequiredColumnsError,onValidateSpreadsheet:h.S6,savedMappingsConfig:{enableSavedMappings:!0,uploadFlow:o.A$.BULK_UPDATE_ENTITIES},customHandleGoToNextPaneFn:e=>{if(T.IN(e.fileData.columns)){h.jB()
h.mX()}else{e.onValidateSpreadsheet()
h.bm(E.y$.SHOW_ERRORS)}}})},{paneKey:E.y$.MAP_DERIVED_COLUMNS,configuration:{columnTransformConfigs:E.MW,derivedColumnsKey:E.ju.BULK_UPDATE,onUpdateDerivedColumns:h.Xx,onValidateSpreadsheet:h.S6}},{paneKey:E.y$.SHOW_ERRORS,configuration:m.Z.configure({customHandleGoToPrevPaneFn:e=>{e.derivedColumnsData.state===E.PX.COMPLETED&&e.derivedColumnsData.derivedColumns&&e.derivedColumnsData.derivedColumns.length>0?h.$s():h.bm(E.y$.MAP_COLUMN_NAMES)},enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}static open(e){c.bA(E.qF,r.createElement(BulkUpdateBioentitiesFlow,{...e,onRequestClose:h.Mr}))}render(){return r.createElement(S.Z,{importItemWord:"entity",importType:E.pt.UPDATE_BIOENTITIES,initialSettings:{initialFolder:this.props.initialFolder},onImportFromSpreadsheet:h.lH,onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Bulk update entities"})}}BulkUpdateBioentitiesFlow.propTypes={initialFolder:E.R9.selectedDestination,onRequestClose:i().func.isRequired}
const g=BulkUpdateBioentitiesFlow},661978:(e,t,n)=>{n.d(t,{oM:()=>beginImportFlow,ml:()=>changeImportSourceType,Mr:()=>closeModal,Ai:()=>SpreadsheetBulkImportActions_createBatchesFromSpreadsheet,R_:()=>createBoxesFromSpreadsheet,E_:()=>SpreadsheetBulkImportActions_createContainersFromSpreadsheet,P9:()=>createInventoryFilesFromSpreadsheetWithDataMods,pf:()=>SpreadsheetBulkImportActions_createLocationsFromSpreadsheet,Qz:()=>createPlatesFromSpreadsheet,Zv:()=>createRegistryEntitiesFromSpreadsheetWithDataMods,pz:()=>SpreadsheetBulkImportActions_createResultsForRun,Jp:()=>dispatchForImportFromSpreadsheet,qe:()=>dispatchForValidateSpreadsheet,sI:()=>SpreadsheetBulkImportActions_downloadInvalidMolecules,jB:()=>SpreadsheetBulkImportActions_findDerivedColumns,cS:()=>SpreadsheetBulkImportActions_getNewRowsForDataTableImport,pT:()=>SpreadsheetBulkImportActions_getNewRowsForRegistrationTableImport,Bg:()=>SpreadsheetBulkImportActions_getNewRowsForStructuredTableImport,Ur:()=>SpreadsheetBulkImportActions_getNewRowsForTransferTableImport,Vl:()=>SpreadsheetBulkImportActions_getNewSampleGroups,Up:()=>SpreadsheetBulkImportActions_getUpdatedRowsForDataTableImport,mX:()=>goToNextPane,bm:()=>goToPaneWithKey,$s:()=>goToPrevPane,eX:()=>importMixtureIngredientsFromSpreadsheetWithDataMods,pc:()=>removeSpreadsheet,Bx:()=>setColumns,Xx:()=>setDerivedColumns,y$:()=>setImportSetting,Ov:()=>setOptions,ui:()=>setTimeLimit,fD:()=>transferStorablesFromSpreadsheetWithDataMods,sq:()=>SpreadsheetBulkImportActions_updateBatchesFromSpreadsheet,lH:()=>updateBioentitiesFromSpreadsheetWithDataMods,cn:()=>updateBoxesFromSpreadsheetWithDataMods,q2:()=>updateContainersFromSpreadsheetWithDataMods,pO:()=>updateLocationsFromSpreadsheetWithDataMods,C5:()=>updateMonomerMapping,jd:()=>updatePlatesFromSpreadsheetWithDataMods,Ts:()=>updateRawText,oD:()=>uploadAndParse,Q0:()=>uploadAndParseInstrumentData,k6:()=>uploadAndParseSDF,Ei:()=>SpreadsheetBulkImportActions_validateCreateResultsForRun,_c:()=>SpreadsheetBulkImportActions_validateNewRowsForDataTableImport,cs:()=>SpreadsheetBulkImportActions_validateNewRowsForRegistrationTableImport,so:()=>SpreadsheetBulkImportActions_validateNewRowsForTransferTableImport,jm:()=>SpreadsheetBulkImportActions_validateNewSampleGroups,Bt:()=>validateRowsForStructuredTableSpreadsheetImport,O_:()=>SpreadsheetBulkImportActions_validateSpreadsheetForCreateBatches,uE:()=>validateSpreadsheetForCreateBoxes,oR:()=>SpreadsheetBulkImportActions_validateSpreadsheetForCreateContainers,yh:()=>SpreadsheetBulkImportActions_validateSpreadsheetForCreateInventoryFiles,_6:()=>SpreadsheetBulkImportActions_validateSpreadsheetForCreateLocations,Y$:()=>validateSpreadsheetForCreatePlates,A1:()=>SpreadsheetBulkImportActions_validateSpreadsheetForCreateRegistryEntities,C0:()=>SpreadsheetBulkImportActions_validateSpreadsheetForTransferStorables,ZX:()=>SpreadsheetBulkImportActions_validateSpreadsheetForUpdateBatches,S6:()=>SpreadsheetBulkImportActions_validateSpreadsheetForUpdateBioentities,yq:()=>validateSpreadsheetForUpdateBoxes,hb:()=>SpreadsheetBulkImportActions_validateSpreadsheetForUpdateContainers,FI:()=>SpreadsheetBulkImportActions_validateSpreadsheetForUpdateLocations,DK:()=>validateSpreadsheetForUpdatePlates,kC:()=>SpreadsheetBulkImportActions_validateSpreadsheetImportForMixtureIngredients,Yu:()=>SpreadsheetBulkImportActions_validateUpdatedRowsForDataTableImport})
var a=n(64558),i=n(250965),r=n.n(i),s=n(989526),o=n(531041),l=n(468943),c=n(232606),d=n(609630),u=n(348920),m=n(675649),p=n(787004),h=n(3472),E=n(459830),S=n(537076),T=n(518352),g=n(681896),f=n(91092),I=n(285560),A=n(947730),y=n(763089),_=n(792770),C=n(782649),R=n(826478),N=n(396213),O=n(301141),b=n(974913),v=n(386382),P=n(532726),L=n(813757),D=n(36424),M=n(87209),w=n(629656),F=n(883026),k=n(372721),U=n(379346),x=n(953403),B=n(771398),Z=n(8747)
function importFile(e){return x.ws(e)}var q=n(234868),G=n(939092)
function _getServerColumnTypes(e){return e.map((e=>G.RJ(e)))}function _getServerLabelingStrategy(e){return e===S.LABELING_STRATEGIES.CONVERT_IDS?S.LABELING_STRATEGIES.IDS_FROM_NAMES:e}function _sanitizeRegistryOptionsForServer({labelingStrategy:e,inOrgCollection:t,inUserCollection:n}){return{inOrgCollection:t,inUserCollection:n,labelingStrategy:_getServerLabelingStrategy(e)}}function _getCustomSyntaxNameFromColumns(e){const t=e.find((e=>e.type===k.BA.CUSTOM_MOD_SYNTAX))
return t?t.customSyntaxName:void 0}function _getSourceIdForStorableBulkAction(){return q.ZP.getState().registryImportSettings.projectId}function forceCloseModal(){w.xv(k.qF)
o.default.defer((()=>{A.Z.dispatch({actionType:p.W0q})}))}function closeModal(){q.ZP.getState().shouldCloseOnRequest&&forceCloseModal()}function changeImportSourceType(e){A.Z.dispatch({actionType:p.$5t,value:e})}function updateRawText(e){A.Z.dispatch({actionType:p.v6I,rawText:e})}function uploadAndParseSDF(e){A.Z.dispatch({actionType:p.xQ7,file:e})
importFile(e).then((t=>function parseSDF(e,t){return B.ty({url:"/1/api/molecules/parse-sdf",data:{filename:e,s3_location:t}})}(e.name,t))).done((t=>{A.Z.dispatch({actionType:p.B4k,file:e,url:t.updatedUrl,columnNames:t.columnNames})})).fail((t=>{b.ZP.notifyError(t,{duration:0})
A.Z.dispatch({actionType:p.P8y,errorMessage:b.ZP.getFriendlyError(t),file:e})}))}function uploadAndParse(e,{onSuccessAnalyticsCallback:t=a.ZT,onFailAnalyticsCallback:n=a.ZT}={}){A.Z.dispatch({actionType:p.xQ7,file:e})
importFile(e).then((t=>r().when(t,function parseSpreadsheet(e,t){return B.ty({url:"/1/api/files/get-spreadsheet-columns",data:{filename:e,location:t}})}(e.name,t)))).done(((n,[a])=>{A.Z.dispatch({actionType:p.B4k,file:e,url:n,columnNames:a.columns})
t()})).fail((t=>{const a=b.ZP.getFriendlyError(t)
b.ZP.notifyError(t,{duration:0})
A.Z.dispatch({actionType:p.P8y,errorMessage:a,file:e})
n(a)}))}function uploadAndParseInstrumentData(e,t){const n={...e,name:e.s3Key}
A.Z.dispatch({actionType:p.xQ7,file:n})
I.TP(e,t).then((t=>{A.Z.dispatch({actionType:p.B4k,file:n,url:e.downloadUrl,columnNames:t.columns})})).catch((e=>{const t=b.ZP.getFriendlyError(e)
b.ZP.notifyError(e,{duration:0})
A.Z.dispatch({actionType:p.P8y,errorMessage:t,file:n})}))}function SpreadsheetBulkImportActions_findDerivedColumns(){const{file:e,fileData:t,selectedDestination:n,linkFolderIds:a,selectedSchemaIds:i,schemalessCreationEntityType:r,options:s,_timeLimit:o}=q.ZP.getState(),l=t.url,c=t.columns,d=_getServerColumnTypes(G.On(c)),u=_getCustomSyntaxNameFromColumns(c),m=G.hU(c),h=n?n.folderId:null,E={filename:e.name,columnTypes:d,location:l,_timeLimit:o}
A.Z.dispatch({actionType:p.Jvl});(function findDerivedColumns(e,t,n,a,i,r,s,o){return Z.ty({url:"/1/api/inventory-files:find-derived-columns-for-bulk-create",data:{...e,folderId:t,linkItemsFolderIds:n,tagSchemaId:a,schemalessCreationEntityType:i,areSequencesCircular:r,schemaFieldIdsByColumnName:s,customSyntaxName:o}})})(E,h,a,i.tagSchemaId,r,s[k.JY.ARE_SEQUENCES_CIRCULAR],m,u).then((e=>{A.Z.dispatch({actionType:p.bco,derivedColumnsResponse:e})})).fail((e=>{A.Z.dispatch({actionType:p.FLh})}))}function dispatchForValidateSpreadsheet(e){const{file:t,fileData:n,derivedColumnsData:{derivedColumns:a},monomerMapping:i,selectedDestination:r,linkFolderIds:s,selectedSchemaIds:o,schemalessCreationEntityType:l,options:c,_timeLimit:d}=q.ZP.getState(),u=n.url,m=n.columns,h=_getServerColumnTypes(G.On(m)),E=_getCustomSyntaxNameFromColumns(m),S=G.hU([...m,...null!=a?a:[]]),T=r?r.folderId:null,g=G.Hu(null!=a?a:[])
A.Z.dispatch({actionType:p.dDi})
e({filename:t.name,columnTypes:h,location:u,_timeLimit:d},{inventoryFolderId:T,linkItemsFolderIds:s,selectedSchemaIds:o,schemalessCreationEntityType:l,schemaFieldIdsByColumnName:S,options:c,derivedColumnsMapping:g,monomerMapping:i,customSyntaxName:E}).then((({itemNameErrors:e,registryErrors:t,registryWarnings:n,otherErrors:a,otherWarnings:i,tagErrors:r})=>{A.Z.dispatch({actionType:p.ddK,url:u,itemNameErrors:e,registryErrors:t,registryWarnings:n,otherErrors:a,otherWarnings:i,tagErrors:r})})).fail((e=>{b.ZP.notifyError(e,{duration:0})
A.Z.dispatch({actionType:p.oO_,url:u})}))}function SpreadsheetBulkImportActions_validateSpreadsheetForCreateBatches(){dispatchForValidateSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i})=>function validateSpreadsheetForCreateBatches(e,t,n,a,i){return Z.ty({url:"/1/api/inventory-files/validate-for-bulk-create-batches",data:{...e,inventoryItemsFolderId:t,linkItemsFolderIds:n,batchSchemaId:a,schemaFieldIdsByColumnName:i}})}(e,t,n,a.batchSchemaId,i)))}function SpreadsheetBulkImportActions_validateSpreadsheetForUpdateBatches(){dispatchForValidateSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i,options:r})=>function validateSpreadsheetForUpdateBatches(e,t,n,a,i){return Z.by({contentType:"application/json",data:JSON.stringify({...e,inventoryItemsFolderId:t,linkItemsFolderIds:n,batchSchemaId:a,schemaFieldIdsByColumnName:i}),type:"POST",dataType:"json",url:"/1/api/inventory-files/validate-for-bulk-update-batches"})}(e,t,n,a.batchSchemaId,i)))}function SpreadsheetBulkImportActions_validateSpreadsheetForUpdateBioentities(){dispatchForValidateSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i,derivedColumnsMapping:r,monomerMapping:s,options:o,customSyntaxName:l})=>function validateSpreadsheetForUpdateBioentities(e,t,n,a,i,r,s,o,l){return Z.ty({url:"/1/api/files:validate-for-bulk-tag",data:{...e,tagItemsFolderId:t,linkItemsFolderIds:n,tagSchemaId:a,schemaFieldIdsByColumnName:i,deleteExistingAliases:r,derivedColumnsMapping:s,monomerMapping:o,customSyntaxName:l}})}(e,t,n,a.tagSchemaId,i,o[k.JY.DELETE_EXISTING_ALIASES],r,s,l)))}function SpreadsheetBulkImportActions_validateSpreadsheetForCreateInventoryFiles(){dispatchForValidateSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemalessCreationEntityType:i,schemaFieldIdsByColumnName:r,options:s,derivedColumnsMapping:o,monomerMapping:l,customSyntaxName:c})=>function validateSpreadsheetForCreateInventoryFiles(e,t,n,a,i,r,s,o,l,c,d,u){return Z.ty({url:"/1/api/inventory-files:validate-for-bulk-create",data:{...e,folderId:t,linkItemsFolderIds:n,tagSchemaId:a,schemalessCreationEntityType:i,shouldImportBatches:r,areSequencesCircular:s,containerSchemaId:o,schemaFieldIdsByColumnName:l,derivedColumnsMapping:c,monomerMapping:d,customSyntaxName:u}})}(e,t,n,a.tagSchemaId,null==a.tagSchemaId?i:null,s[k.JY.IMPORT_BATCHES],s[k.JY.ARE_SEQUENCES_CIRCULAR],s[k.JY.IMPORT_CONTAINERS]?a.containerSchemaId:null,r,o,l,c)))}function SpreadsheetBulkImportActions_validateSpreadsheetForCreateRegistryEntities(){dispatchForValidateSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i,options:r,derivedColumnsMapping:s,monomerMapping:o,customSyntaxName:l})=>{const c=q.ZP.getState().registryImportSettings
return function validateSpreadsheetForCreateRegistryEntities(e,t,n,a,i,r,s,o,{inOrgCollection:l,inUserCollection:c,labelingStrategy:d},u,m,p,h){return B.ty({url:`/1/api/registries/${t}/actions/validate-spreadsheet-files`,data:{...e,projectFolderId:n,linkItemsFolderIds:a,tagSchemaId:i,shouldImportBatches:r,areSequencesCircular:s,containerSchemaId:o,inOrgCollection:l,inUserCollection:c,labelingStrategy:d,schemaFieldIdsByColumnName:u,derivedColumnsMapping:m,monomerMapping:p,customSyntaxName:h}}).then((e=>Z.Q5(e.status_url)))}(e,c.registry.id,t,n,a.tagSchemaId,r[k.JY.IMPORT_BATCHES],r[k.JY.ARE_SEQUENCES_CIRCULAR],r[k.JY.IMPORT_CONTAINERS]?a.containerSchemaId:null,_sanitizeRegistryOptionsForServer(c),i,s,o,l)}))}function SpreadsheetBulkImportActions_validateCreateResultsForRun(e,t){dispatchForValidateSpreadsheet(((n,{schemaFieldIdsByColumnName:a})=>function validateCreateResultsForRun(e,t,n,a){return B.ty({url:"/1/api/assay-runs:validate-create-results-for-run",data:{...e,assayRunId:t,resultSchemaId:n,schemaFieldIdsByColumnName:a}}).then((e=>Z.Q5(e.status_url)))}(n,e,t,a)))}function SpreadsheetBulkImportActions_createResultsForRun(e,t,n){M.$Z("Uploading...")
dispatchForImportFromSpreadsheet(((a,{schemaFieldIdsByColumnName:i})=>function createResultsForRun(e,t,n,a){return B.ty({url:"/1/api/assay-runs:create-results-for-run",data:{...e,assayRunId:t,resultSchemaId:n,schemaFieldIdsByColumnName:a}}).then((e=>Z.Q5(e.status_url)))}(a,e,t,i).done((()=>{n()})).always((()=>{M.Cp()}))))}function SpreadsheetBulkImportActions_validateUpdatedRowsForDataTableImport(e){dispatchForValidateSpreadsheet(((t,{selectedSchemaIds:n,schemaFieldIdsByColumnName:a,options:i})=>{const r=q.ZP.getState().fileData.columns
return function validateUpdatedRowsForDataTableImport(e,t,n){return B.ty({url:"/1/api/workflows/data-tables:validate-updated-rows-for-import",data:{...e,tableColumnNamesByColumnName:t,dataTable:n}}).then((e=>Z.Q5(e.status_url)))}(t,G.mk(r),e)}))}function SpreadsheetBulkImportActions_validateNewRowsForDataTableImport(e,t){const n=O.Zq(t)===N.zC.STAGE_RUN_SAMPLE_LINK_TABLE?e:null
dispatchForValidateSpreadsheet(((e,{selectedSchemaIds:a,schemaFieldIdsByColumnName:i,options:r})=>{const s=q.ZP.getState().fileData.columns
return function validateNewRowsForDataTableImport(e,t,n,a){return B.ty({url:"/1/api/workflows/data-tables:validate-new-rows-for-import",data:{...e,tableColumnNamesByColumnName:t,dataTableConfig:n,stageEntryId:a}}).then((e=>Z.Q5(e.status_url)))}(e,G.mk(s),t,n)}))}function SpreadsheetBulkImportActions_validateNewRowsForTransferTableImport(e){dispatchForValidateSpreadsheet(((t,{schemaFieldIdsByColumnName:n})=>function validateNewRowsForTransferTableImport(e,t,n){return Z.ty({url:"/1/api/workflows/transfer-tables:validate-new-rows-for-import",data:{...e,schemaFieldIdsByColumnName:t,...U.ZP.isStageEntry(n)?{stageEntryId:n}:{}}})}(t,n,e)))}function SpreadsheetBulkImportActions_validateNewRowsForRegistrationTableImport(){dispatchForValidateSpreadsheet(((e,{schemaFieldIdsByColumnName:t})=>function validateNewRowsForRegistrationTableImport(e,t){return Z.ty({url:"/1/api/workflows:validate-editable-rows-for-registration-table-import",data:{...e,schemaFieldIdsByColumnName:t}})}(e,t)))}function validateRowsForStructuredTableSpreadsheetImport(){dispatchForValidateSpreadsheet(((e,{schemaFieldIdsByColumnName:t})=>function validateNewRowsForStructuredTableImport(e,t){return Z.ty({url:"/1/api/notebook:validate-rows-for-structured-table-spreadsheet-import",data:{...e,schemaFieldIdsByColumnName:t}})}(e,t)))}const V="Imported",H="Updated"
function getTaskSubheading(e,t,n){const a=t?(0,m._6)(2,t):""
return e===V?`${V} ${a} to ${n}`:`${e} ${a} in ${n}`}function registerTrayTask(e,t,n,a){const i=P.zy({icon:s.createElement(D.Z,{icon:"table-list"}),heading:t,progress:L.u9})
e.done((({folder:e,userMessage:t})=>{T.Z.invalidateFolderContents(e.api_identifier)
P.Je(i,{progress:L.qJ,subheading:n(e),onSubheadingClick:()=>{a(e)}})}))
e.fail((()=>{P.Je(i,{progress:L.MR,error:"An error occurred while importing the file. Please try again."})}))}function registerTrayTaskForStorables(e,t,n,a){(0,c.Gp)([V,H].includes(t),`Unexpected verb ${t}`)
registerTrayTask(a,e===k.AF?"Importing...":`Importing ${e}`,(()=>getTaskSubheading(t,n,"inventory")),(e=>{(0,_.Z)(e,n)}))}function registerTrayTaskForFolderItems(e,t,n,a){(0,c.Gp)([V,H].includes(t),`Unexpected verb ${t}`)
registerTrayTask(a,e===k.AF?"Importing...":`Importing ${e}`,(e=>getTaskSubheading(t,n,e.name)),(e=>{(0,y.Z)(e,h.INVENTORY_SECTION)}))}function dispatchForImportFromSpreadsheet(e){const{errorData:t,file:n,fileData:a,derivedColumnsData:{derivedColumns:i},monomerMapping:r,importType:s,selectedDestination:o,linkFolderIds:c,selectedSchemaIds:d,schemalessCreationEntityType:u,options:m,_timeLimit:p,registryImportSettings:h}=q.ZP.getState(),E=a.url,S=a.columns,T=_getServerColumnTypes(G.On(S)),g=_getCustomSyntaxNameFromColumns(S),f=G.hU([...S,...null!=i?i:[]]),I=o?o.folderId:null
let A=null
m[k.JY.SKIP_ERRORS]&&(A=G.Lp(t,m))
const y=G.Hu(null!=i?i:[])
e({filename:n.name,location:E,columnTypes:T,rowsToSkip:A,_timeLimit:p},{inventoryFolderId:I,linkItemsFolderIds:c,selectedSchemaIds:d,schemalessCreationEntityType:u,schemaFieldIdsByColumnName:f,options:m,derivedColumnsMapping:y,registryImportSettings:h,monomerMapping:r,customSyntaxName:g}).then((()=>{const{tagSchemaId:e}=d
l.j("bulk_spreadsheet","import_completed",{importType:s,schemalessCreationEntityType:u,schemaEntityType:e?(0,G.nU)(d,u):null,tagSchemaId:e})})).fail((e=>{const{tagSchemaId:t}=d
b.ZP.notifyError(e,{duration:0})
l.j("bulk_spreadsheet","import_failed",{importType:s,schemalessCreationEntityType:u,schemaEntityType:t?(0,G.nU)(d,u):null,tagSchemaId:t})}))}async function wrapDaoImportWithDataMods({changeSummary:e,daoImport:t,areFeatureDataModsEnabled:n,analyticsModule:i}){setShouldCloseOnRequest(!1)
try{await(0,d.GE)({changeSummary:e,onRequestClose:a.ZT,onRequestSubmit:()=>{forceCloseModal()
t()}},n,{module:i,actionOrigin:"spreadsheet_import",modifiedAction:v.wV.MODIFY,numModifiedTotalItems:0,entryId:null})}finally{setShouldCloseOnRequest(!0)}}function SpreadsheetBulkImportActions_createBatchesFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i,options:r})=>{const s=function createBatchesFromSpreadsheet(e,t,n,a,i){return Z.by({contentType:"application/json",data:JSON.stringify({...e,inventoryItemsFolderId:t,linkItemsFolderIds:n,batchSchemaId:a,schemaFieldIdsByColumnName:i}),type:"POST",dataType:"json",url:"/1/api/inventory-files/bulk-create-batches"})}(e,t,n,a.batchSchemaId,i).done((({fileIds:e,batchNames:t})=>{A.Z.dispatch({actionType:p.AUh,fileIds:e})
C.M({clipboardData:t,duration:0,isCloseable:!0,message:"Batches successfully imported from spreadsheet.",type:R.pC.INFO})}))
registerTrayTaskForFolderItems(e.filename,V,E.BATCH,s)
return s}))}function SpreadsheetBulkImportActions_updateBatchesFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i,options:r})=>{const s=function updateBatchesFromSpreadsheet(e,t,n,a,i,r){return Z.by({contentType:"application/json",data:JSON.stringify({...e,inventoryItemsFolderId:t,linkItemsFolderIds:n,batchSchemaId:a,schemaFieldIdsByColumnName:i,deleteEmptyFields:r}),type:"POST",dataType:"json",url:"/1/api/inventory-files/bulk-update-batches"})}(e,t,n,a.batchSchemaId,i,r[k.JY.DELETE_EMPTY_FIELDS]).done((({fileIds:e})=>{A.Z.dispatch({actionType:p.VG,fileIds:e})
b.ZP.success("Batches successfully updated from spreadsheet.")}))
registerTrayTaskForFolderItems(e.filename,H,E.BATCH,s)
return s}))}function callUpdateBioentitiesFromSpreadsheetDAO(e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i,derivedColumnsMapping:r,monomerMapping:s,customSyntaxName:o,options:l}){const c=function updateBioentitiesFromSpreadsheet(e,t,n,a,i,r,s,o,l,c,d){return Z.by({contentType:"application/json",data:JSON.stringify({...e,tagItemsFolderId:t,linkItemsFolderIds:n,tagSchemaId:a,replaceFileLinkWithText:i,schemaFieldIdsByColumnName:r,deleteEmptyFields:s,deleteExistingAliases:o,derivedColumnsMapping:l,monomerMapping:c,customSyntaxName:d}),type:"POST",dataType:"json",url:"/1/api/files/bulk-tag"})}(e,t,n,a.tagSchemaId,l[k.JY.REPLACE_LINK_WITH_TEXT],i,l[k.JY.DELETE_EMPTY_FIELDS],l[k.JY.DELETE_EXISTING_ALIASES],r,s,o).done((({data:e})=>{const t={}
for(const n of e)t[n.id]=n.bioentityAliasInfos
A.Z.dispatch({actionType:p.yoq,bioentityAliasInfosById:t})
A.Z.dispatch({actionType:p.JFe,tagData:e})
A.Z.dispatch({actionType:p.Oe8,items:e.filter((({note:e})=>e)).map((({id:e,note:t})=>({fileId:e,note:t})))})}))
registerTrayTaskForFolderItems(e.filename,H,E.ENTITY,c)
return c}function SpreadsheetBulkImportActions_updateBioentitiesFromSpreadsheet(){dispatchForImportFromSpreadsheet(callUpdateBioentitiesFromSpreadsheetDAO)}function updateBioentitiesFromSpreadsheetWithDataMods(){wrapDaoImportWithDataMods({changeSummary:(0,v.Mh)([v.HM.ENTITY]),daoImport:SpreadsheetBulkImportActions_updateBioentitiesFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,analyticsModule:"REGISTRY"})}function willUseExistingContainers(){var e,t,n
const{errorData:a,options:i}=q.ZP.getState(),r=null!==(t=null===(e=null==a?void 0:a.itemNameErrors)||void 0===e?void 0:e.some((e=>G._A(e.errorCode))))&&void 0!==t&&t
return null!==(n=null==i?void 0:i[k.JY.USE_EXISTING_CONTAINERS])&&void 0!==n&&n&&r}function SpreadsheetBulkImportActions_createInventoryFilesFromSpreadsheet({onSubmitSpreadsheetCallback:e=(e=>{})}={}){dispatchForImportFromSpreadsheet(((t,{inventoryFolderId:n,linkItemsFolderIds:a,selectedSchemaIds:i,schemalessCreationEntityType:r,schemaFieldIdsByColumnName:s,options:o,derivedColumnsMapping:l,monomerMapping:d,customSyntaxName:u})=>{const m=G.nU(i,r);(0,c.Gp)(null!=m,"Could not resolve import entity type from store state")
e(m)
const p=function createInventoryFilesFromSpreadsheet(e,t,n,a,i,r,s,o,l,c,d,u,m){const p={...e,folderId:t,linkItemsFolderIds:n,tagSchemaId:a,schemalessCreationEntityType:i,replaceFileLinkWithText:r,shouldImportBatches:s,areSequencesCircular:o,containerSchemaId:l,schemaFieldIdsByColumnName:c,derivedColumnsMapping:d,monomerMapping:u,customSyntaxName:m}
return Z.by({contentType:"application/json",data:JSON.stringify(p),type:"POST",dataType:"json",url:"/1/api/inventory-files:bulk-create"})}(t,n,a,i.tagSchemaId,null==i.tagSchemaId?r:null,o[k.JY.REPLACE_LINK_WITH_TEXT],o[k.JY.IMPORT_BATCHES],o[k.JY.ARE_SEQUENCES_CIRCULAR],o[k.JY.IMPORT_CONTAINERS]?i.containerSchemaId:null,s,l,d,u)
registerTrayTaskForFolderItems(t.filename,V,E.ENTITY,p)
return p}))}function createInventoryFilesFromSpreadsheetWithDataMods({onSubmitSpreadsheetCallback:e=(e=>{})}={}){const t=willUseExistingContainers()
wrapDaoImportWithDataMods({changeSummary:t?(0,v.Mh)([v.HM.CONTAINER]):"",daoImport:()=>{SpreadsheetBulkImportActions_createInventoryFilesFromSpreadsheet({onSubmitSpreadsheetCallback:e})},areFeatureDataModsEnabled:u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS&&t,analyticsModule:"SAMPLES"})}function SpreadsheetBulkImportActions_createRegistryEntitiesFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,selectedSchemaIds:a,schemaFieldIdsByColumnName:i,options:r,derivedColumnsMapping:s,monomerMapping:o,customSyntaxName:l})=>{const c=q.ZP.getState().registryImportSettings,d=function createRegistryEntitiesFromSpreadsheet(e,t,n,a,i,r,s,o,l,{inOrgCollection:c,inUserCollection:d,labelingStrategy:u},m,p,h,E){const S={...e,registry:t,projectFolderId:n,linkItemsFolderIds:a,tagSchemaId:i,shouldImportBatches:r,areSequencesCircular:s,containerSchemaId:o,inOrgCollection:c,inUserCollection:d,labelingStrategy:u,schemaFieldIdsByColumnName:m,replaceFileLinkWithText:l,derivedColumnsMapping:p,monomerMapping:h,customSyntaxName:E}
return Z.by({contentType:"application/json",data:JSON.stringify(S),type:"POST",dataType:"json",url:`/1/api/registries/${t.id}/actions/import-spreadsheet-files`})}(e,c.registry,t,n,a.tagSchemaId,r[k.JY.IMPORT_BATCHES],r[k.JY.ARE_SEQUENCES_CIRCULAR],r[k.JY.IMPORT_CONTAINERS]?a.containerSchemaId:null,r[k.JY.REPLACE_LINK_WITH_TEXT],_sanitizeRegistryOptionsForServer(c),i,s,o,l)
registerTrayTaskForFolderItems(e.filename,V,E.ENTITY,d)
return d}))}function createRegistryEntitiesFromSpreadsheetWithDataMods(){var e,t,n
const a=null!==(n=null===(t=null===(e=q.ZP.getState().errorData)||void 0===e?void 0:e.registryWarnings)||void 0===t?void 0:t.filter((e=>e.errorCode===k.Ol.REGISTRY_ERROR&&null!=e.primaryDuplicateItemApiId)).length)&&void 0!==n?n:0,i=a>0,r=willUseExistingContainers()
wrapDaoImportWithDataMods({changeSummary:s.createElement(s.Fragment,null,r&&s.createElement("p",null,(0,v.Mh)([v.HM.CONTAINER])),i&&(0,v.Y2)(a)),daoImport:SpreadsheetBulkImportActions_createRegistryEntitiesFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS&&(i||r),analyticsModule:"REGISTRY"})}function SpreadsheetBulkImportActions_validateSpreadsheetForTransferStorables(){dispatchForValidateSpreadsheet(((e,{options:t})=>function validateSpreadsheetForTransferStorables(e,t){return Z.ty({url:"/1/api/storables:validate-for-transfer-from-spreadsheet",data:{...e,clearSampleRolesForEmptyCells:t}})}(e,t[k.JY.CLEAR_SAMPLE_ROLES_FOR_EMPTY_CELLS])))}function SpreadsheetBulkImportActions_transferStorablesFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{options:t})=>{const n=function transferStorablesFromSpreadsheet(e,t){return Z.by({contentType:"application/json",data:JSON.stringify({...e,clearSampleRolesForEmptyCells:t}),type:"POST",dataType:"json",url:"/1/api/storables:bulk-transfer"})}(e,t[k.JY.CLEAR_SAMPLE_ROLES_FOR_EMPTY_CELLS]).done((({invalidatableStorableIds:e})=>{A.Z.dispatch({actionType:p.IWi,invalidatableStorableIds:e})}))
registerTrayTaskForStorables(e.filename,V,"transfer",n)
return n}))}function transferStorablesFromSpreadsheetWithDataMods(){wrapDaoImportWithDataMods({changeSummary:(0,v.Mh)([v.HM.CONTAINER_OR_PLATE_WELL]),daoImport:SpreadsheetBulkImportActions_transferStorablesFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,analyticsModule:"SAMPLES"})}function SpreadsheetBulkImportActions_validateSpreadsheetForCreateContainers(){dispatchForValidateSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a})=>function validateSpreadsheetForCreateContainers(e,t,n,a,i){return Z.ty({url:"/1/api/containers:validate-spreadsheet-for-bulk-create",data:{...e,containerSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i}})}(e,t.containerSchemaId,n,_getSourceIdForStorableBulkAction(),a)))}function SpreadsheetBulkImportActions_createContainersFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{inventoryFolderId:t,selectedSchemaIds:n,schemaFieldIdsByColumnName:a,options:i,linkItemsFolderIds:r})=>{const s=function createContainersFromSpreadsheet(e,t,n,a,i){return Z.ty({url:"/1/api/containers:bulk-create",data:{...e,containerSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i}})}(e,n.containerSchemaId,a,_getSourceIdForStorableBulkAction(),r)
registerTrayTaskForStorables(e.filename,V,E.StorableItem.CONTAINER,s)
return s}))}function SpreadsheetBulkImportActions_validateSpreadsheetForUpdateContainers(){dispatchForValidateSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a,options:i})=>function validateSpreadsheetForUpdateContainers(e,t,n,a,i,r){return Z.ty({url:"/1/api/containers:validate-spreadsheet-for-bulk-update",data:{...e,containerSchemaId:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a,deleteEmptyFields:i,clearSampleRolesForEmptyCells:r}})}(e,t.containerSchemaId,n,a,i[k.JY.DELETE_EMPTY_FIELDS],i[k.JY.CLEAR_SAMPLE_ROLES_FOR_EMPTY_CELLS])))}function SpreadsheetBulkImportActions_updateContainersFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,options:a,linkItemsFolderIds:i})=>{const r=function updateContainersFromSpreadsheet(e,t,n,a,i,r){return Z.ty({url:"/1/api/containers:bulk-update",data:{...e,containerSchemaId:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a,deleteEmptyFields:i,clearSampleRolesForEmptyCells:r}})}(e,t.containerSchemaId,n,i,a[k.JY.DELETE_EMPTY_FIELDS],a[k.JY.CLEAR_SAMPLE_ROLES_FOR_EMPTY_CELLS])
registerTrayTaskForStorables(e.filename,H,E.StorableItem.CONTAINER,r)
return r}))}async function updateContainersFromSpreadsheetWithDataMods(){await wrapDaoImportWithDataMods({changeSummary:(0,v.Mh)([v.HM.CONTAINER]),daoImport:SpreadsheetBulkImportActions_updateContainersFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,analyticsModule:"SAMPLES"})}function SpreadsheetBulkImportActions_validateSpreadsheetImportForMixtureIngredients(){dispatchForValidateSpreadsheet(((e,{inventoryFolderId:t,linkItemsFolderIds:n,options:a})=>function validateSpreadsheetImportForMixtureIngredients(e,t,n,a){return B.ty({url:"/1/api/mixtures:validate-bulk-import-ingredients",data:{...e,mixturesFolderId:t,componentBioentityFolderIds:n,options:{clearIngredientFieldsForEmptyCells:a}}}).then((e=>Z.Q5(e.status_url)))}(e,t,n,a[k.JY.CLEAR_INGREDIENT_FIELDS_FOR_EMPTY_CELLS])))}function callImportMixtureIngredientsFromSpreadsheetDAO(e,{inventoryFolderId:t,linkItemsFolderIds:n,options:a}){const i=function importMixtureIngredientsFromSpreadsheet(e,t,n,a){return B.ty({url:"/1/api/mixtures:bulk-import-ingredients",data:{...e,mixturesFolderId:t,componentBioentityFolderIds:n,options:{clearIngredientFieldsForEmptyCells:a}}}).then((e=>Z.Q5(e.status_url)))}(e,t,n,a[k.JY.CLEAR_INGREDIENT_FIELDS_FOR_EMPTY_CELLS]).done((({mixtureSpecificAttributes:e})=>{(0,g.writeFragmentsToCache)((0,f.f)("MixtureSpecificAttributes"),[e])}))
registerTrayTaskForFolderItems(e.filename,V,`${E.MIXTURE} ${E.INGREDIENT}`,i)
return i}function SpreadsheetBulkImportActions_importMixtureIngredientsFromSpreadsheet(){dispatchForImportFromSpreadsheet(callImportMixtureIngredientsFromSpreadsheetDAO)}function importMixtureIngredientsFromSpreadsheetWithDataMods(){wrapDaoImportWithDataMods({changeSummary:(0,v.Mh)([v.HM.ENTITY]),daoImport:SpreadsheetBulkImportActions_importMixtureIngredientsFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,analyticsModule:"REGISTRY"})}function SpreadsheetBulkImportActions_getUpdatedRowsForDataTableImport(e,t){dispatchForImportFromSpreadsheet(((n,{selectedSchemaIds:a,schemaFieldIdsByColumnName:i,options:r})=>{const s=q.ZP.getState().fileData.columns,o=G.mk(s)
return(0,F.XP)((0,F.jI)(Promise.resolve(function getUpdatedRowsForDataTableImport(e,t,n){const a={...e,tableColumnNamesByColumnName:t,dataTable:n}
return Z.by({contentType:"application/json",data:JSON.stringify(a),type:"POST",dataType:"json",url:"/1/api/workflows/data-tables:get-updated-rows-for-import"})}(n,o,e)).then((({importedRows:e})=>{t(e)})),"Importing..."))}))}function SpreadsheetBulkImportActions_getNewRowsForDataTableImport(e,t,n){const a=O.Zq(t)===N.zC.STAGE_RUN_SAMPLE_LINK_TABLE?e:null
dispatchForImportFromSpreadsheet(((e,{selectedSchemaIds:i,schemaFieldIdsByColumnName:r,options:s})=>{const o=q.ZP.getState().fileData.columns,l=G.mk(o)
return(0,F.XP)((0,F.jI)(Promise.resolve(function getNewRowsForDataTableImport(e,t,n,a){const i={...e,tableColumnNamesByColumnName:t,dataTableConfig:n,stageEntryId:a}
return Z.by({contentType:"application/json",data:JSON.stringify(i),type:"POST",dataType:"json",url:"/1/api/workflows/data-tables:get-new-rows-for-import"})}(e,l,t,a)).then((({importedRows:e})=>{n(e)})),"Importing..."))}))}function SpreadsheetBulkImportActions_getNewRowsForTransferTableImport(e,t){M.$Z("Importing...")
dispatchForImportFromSpreadsheet(((n,{schemaFieldIdsByColumnName:a})=>function getNewRowsForTransferTableImport(e,t,n){return Z.ty({url:"/1/api/workflows/transfer-tables:get-new-rows-for-import",data:{...e,schemaFieldIdsByColumnName:t,...U.ZP.isStageEntry(n)?{stageEntryId:n}:{}}})}(n,a,e).done((({importedRows:e})=>{t(e)})).always((()=>{M.Cp()}))))}function SpreadsheetBulkImportActions_getNewRowsForRegistrationTableImport(e){M.$Z("Importing...")
dispatchForImportFromSpreadsheet(((t,{schemaFieldIdsByColumnName:n})=>function getNewRowsForRegistrationTableImport(e,t){return Z.ty({url:"/1/api/workflows:import-editable-rows-for-registration-table",data:{...e,schemaFieldIdsByColumnName:t}})}(t,n).done((({importedRows:t})=>{e(t)})).always((()=>{M.Cp()}))))}function SpreadsheetBulkImportActions_getNewRowsForStructuredTableImport(e){M.$Z("Importing...")
dispatchForImportFromSpreadsheet(((t,{schemaFieldIdsByColumnName:n})=>function getNewRowsForStructuredTableImport(e,t){return Z.ty({url:"/1/api/notebook:parse-rows-for-structured-table-spreadsheet-import",data:{...e,schemaFieldIdsByColumnName:t}})}(t,n).done((({parsedRows:t})=>{e(t)})).always((()=>{M.Cp()}))))}function SpreadsheetBulkImportActions_validateNewSampleGroups(){dispatchForValidateSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,options:a})=>{const i=q.ZP.getState().fileData.columns,r=G.Iw(i)
return function validateNewSampleGroups(e,t,n,a){return B.ty({url:"/1/api/sample-groups:validate-new-sample-groups",data:{...e,sampleGroupSchemaId:t,schemaFieldIdsByColumnName:n,sampleTypesByColumnName:a}}).then((e=>Z.Q5(e.status_url)))}(e,t.sampleGroupSchemaId,n,r)}))}function SpreadsheetBulkImportActions_getNewSampleGroups(e){M.$Z("Importing...")
dispatchForImportFromSpreadsheet(((t,{selectedSchemaIds:n,schemaFieldIdsByColumnName:a})=>{const i=q.ZP.getState().fileData.columns,r=G.Iw(i)
return function getNewSampleGroups(e,t,n,a){const i={...e,sampleGroupSchemaId:t,schemaFieldIdsByColumnName:n,sampleTypesByColumnName:a}
return Z.ty({url:"/1/api/sample-groups:get-new-sample-groups-for-import",data:i})}(t,n.sampleGroupSchemaId,a,r).done((({importedRows:t})=>{e(t)})).always((()=>{M.Cp()}))}))}function _validateSpreadsheetForCreateGrids(e){dispatchForValidateSpreadsheet(((t,{selectedSchemaIds:n,schemaFieldIdsByColumnName:a,linkItemsFolderIds:i})=>function validateSpreadsheetForCreateGrids(e,t,n,a,i){return Z.ty({url:"/1/api/grids:validate-spreadsheet-for-bulk-create",data:{...e,gridSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i}})}(t,n[e],a,_getSourceIdForStorableBulkAction(),i)))}function validateSpreadsheetForCreatePlates(){_validateSpreadsheetForCreateGrids("plateSchemaId")}function validateSpreadsheetForCreateBoxes(){_validateSpreadsheetForCreateGrids("boxSchemaId")}function SpreadsheetBulkImportActions_validateSpreadsheetForCreateLocations(){dispatchForValidateSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a})=>function validateSpreadsheetForCreateLocations(e,t,n,a,i){return Z.ty({url:"/1/api/locations:validate-spreadsheet-for-bulk-create",data:{...e,locationSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i}})}(e,t.locationSchemaId,n,_getSourceIdForStorableBulkAction(),a)))}function _createGridsFromSpreadsheet(e,t){dispatchForImportFromSpreadsheet(((n,{selectedSchemaIds:a,schemaFieldIdsByColumnName:i,linkItemsFolderIds:r})=>{const s=function createGridsFromSpreadsheet(e,t,n,a,i){return Z.ty({url:"/1/api/grids:bulk-create",data:{...e,gridSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i}})}(n,a[e],i,_getSourceIdForStorableBulkAction(),r)
registerTrayTaskForStorables(n.filename,V,t,s)
return s}))}function validateSpreadsheetForUpdatePlates(){_validateSpreadsheetForUpdateGrids("plateSchemaId")}function validateSpreadsheetForUpdateBoxes(){_validateSpreadsheetForUpdateGrids("boxSchemaId")}function _validateSpreadsheetForUpdateGrids(e){dispatchForValidateSpreadsheet(((t,{selectedSchemaIds:n,schemaFieldIdsByColumnName:a,linkItemsFolderIds:i,options:r})=>function validateSpreadsheetForUpdateGrids(e,t,n,a,i,r){return Z.ty({url:"/1/api/grids:validate-spreadsheet-for-bulk-update",data:{...e,gridSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i,deleteEmptyFields:r}})}(t,n[e],a,_getSourceIdForStorableBulkAction(),i,r[k.JY.DELETE_EMPTY_FIELDS])))}function SpreadsheetBulkImportActions_validateSpreadsheetForUpdateLocations(){dispatchForValidateSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a,options:i})=>function validateSpreadsheetForUpdateLocations(e,t,n,a,i,r){return Z.ty({url:"/1/api/locations:validate-spreadsheet-for-bulk-update",data:{...e,locationSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i,deleteEmptyFields:r}})}(e,t.locationSchemaId,n,_getSourceIdForStorableBulkAction(),a,i[k.JY.DELETE_EMPTY_FIELDS])))}function updatePlatesFromSpreadsheet(){dispatchForImportFromSpreadsheet(getUpdateGridsFromSpreadsheetDAO("plateSchemaId",E.StorableItem.PLATE))}function updatePlatesFromSpreadsheetWithDataMods(){wrapDaoImportWithDataMods({changeSummary:(0,v.Mh)([v.HM.PLATE]),daoImport:updatePlatesFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,analyticsModule:"SAMPLES"})}function updateBoxesFromSpreadsheet(){dispatchForImportFromSpreadsheet(getUpdateGridsFromSpreadsheetDAO("boxSchemaId",E.StorableItem.BOX))}function updateBoxesFromSpreadsheetWithDataMods(){wrapDaoImportWithDataMods({changeSummary:(0,v.Mh)([v.HM.BOX]),daoImport:updateBoxesFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,analyticsModule:"SAMPLES"})}function getUpdateGridsFromSpreadsheetDAO(e,t){return(n,{selectedSchemaIds:a,schemaFieldIdsByColumnName:i,linkItemsFolderIds:r,options:s})=>{const o=function updateGridsFromSpreadsheet(e,t,n,a,i,r){return Z.ty({url:"/1/api/grids:bulk-update",data:{...e,gridSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i,deleteEmptyFields:r}})}(n,a[e],i,_getSourceIdForStorableBulkAction(),r,s[k.JY.DELETE_EMPTY_FIELDS])
registerTrayTaskForStorables(n.filename,H,t,o)
return o}}function SpreadsheetBulkImportActions_updateLocationsFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a,options:i})=>{const r=function updateLocationsFromSpreadsheet(e,t,n,a,i,r){return Z.ty({url:"/1/api/locations:bulk-update",data:{...e,locationSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i,deleteEmptyFields:r}})}(e,t.locationSchemaId,n,_getSourceIdForStorableBulkAction(),a,i[k.JY.DELETE_EMPTY_FIELDS])
registerTrayTaskForStorables(e.filename,H,E.StorableItem.LOCATION,r)
return r}))}function updateLocationsFromSpreadsheetWithDataMods(){wrapDaoImportWithDataMods({changeSummary:(0,v.Mh)([v.HM.LOCATION]),daoImport:SpreadsheetBulkImportActions_updateLocationsFromSpreadsheet,areFeatureDataModsEnabled:u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,analyticsModule:"SAMPLES"})}function createPlatesFromSpreadsheet(){_createGridsFromSpreadsheet("plateSchemaId",E.StorableItem.PLATE)}function createBoxesFromSpreadsheet(){_createGridsFromSpreadsheet("boxSchemaId",E.StorableItem.BOX)}function SpreadsheetBulkImportActions_createLocationsFromSpreadsheet(){dispatchForImportFromSpreadsheet(((e,{selectedSchemaIds:t,schemaFieldIdsByColumnName:n,linkItemsFolderIds:a})=>{const i=function createLocationsFromSpreadsheet(e,t,n,a,i){return Z.ty({url:"/1/api/locations:bulk-create",data:{...e,locationSchemaId:t,schemaFieldIdsByColumnName:n,sourceId:a,linkItemsFolderIds:i}})}(e,t.locationSchemaId,n,_getSourceIdForStorableBulkAction(),a)
registerTrayTaskForStorables(e.filename,V,E.StorableItem.LOCATION,i)
return i}))}function removeSpreadsheet(){A.Z.dispatch({actionType:p.gAV})}function setColumns(e){A.Z.dispatch({actionType:p.cPA,columns:e})}function setDerivedColumns(e){A.Z.dispatch({actionType:p.Cjn,derivedColumns:e})}function beginImportFlow({panes:e,importType:t,initialRegistry:n,initialFolder:a,initialBatchSchemaId:i,initialContainerSchemaId:r,initialTagSchemaId:s,initialSampleGroupSchemaId:o,initialResultSchemaId:l,initialProcessTaskSchemaId:c,initialProcessOutputSchemaId:d,initialPlateSchemaId:u,initialBoxSchemaId:m,initialTableColumnNames:h,initialDataTableKeyFields:E,initialSchemalessCreationEntityType:S,initialRawText:T,initialPaneKey:g}){A.Z.dispatch({actionType:p.Xoe,panes:e,importType:t,initialRegistry:n,initialFolder:a,initialBatchSchemaId:i,initialContainerSchemaId:r,initialTagSchemaId:s,initialSampleGroupSchemaId:o,initialResultSchemaId:l,initialProcessTaskSchemaId:c,initialProcessOutputSchemaId:d,initialPlateSchemaId:u,initialBoxSchemaId:m,initialTableColumnNames:h,initialDataTableKeyFields:E,initialSchemalessCreationEntityType:S,initialRawText:T,initialPaneKey:g})}function setOptions(e){A.Z.dispatch({actionType:p.$kk,options:e})}function setImportSetting(e){A.Z.dispatch({actionType:p.XVG,...e})}function setTimeLimit(e){A.Z.dispatch({actionType:p.qvg,_timeLimit:e})}function goToNextPane(){A.Z.dispatch({actionType:p.o9i})}function goToPrevPane(){A.Z.dispatch({actionType:p.RcB})}function goToPaneWithKey(e){A.Z.dispatch({actionType:p.vDg,paneKey:e})}function setShouldCloseOnRequest(e){A.Z.dispatch({actionType:p.kPx,shouldCloseOnRequest:e})}function updateMonomerMapping(e){A.Z.dispatch({actionType:p.gD7,monomerMapping:e})}async function SpreadsheetBulkImportActions_downloadInvalidMolecules(e){const{errorData:t,fileData:n}=q.ZP.getState(),a=n.url,i=G.EB(t,e),r=Array.from(i).map((([e,t])=>({rowIndex:e,errorMessage:t.map((e=>e.message)).join(", ")}))),s=await function downloadInvalidMolecules(e,t){return B.s0({url:"/1/api/molecules/download-invalid-molecules",data:{url:e,rowsToDownload:t}})}(a,r);(0,m.gG)(s.s3Location)
b.ZP.success("Downloading invalid molecules...")}},372721:(e,t,n)=>{n.d(t,{$D:()=>R,$M:()=>S,$h:()=>x,AF:()=>L,AQ:()=>J,At:()=>W,BA:()=>f,Ci:()=>K,Ef:()=>y,Ej:()=>q,F6:()=>te,HJ:()=>H,Hf:()=>A,J$:()=>$,JY:()=>ne,Kh:()=>F,L8:()=>se,Ll:()=>Q,MW:()=>O,Mk:()=>V,Mn:()=>_,Ol:()=>ue,PX:()=>T,Pp:()=>ae,Qi:()=>G,R9:()=>de,TQ:()=>pe,V9:()=>k,Vc:()=>ce,WU:()=>getAnalyticsModuleFromImportType,Xf:()=>Y,YG:()=>U,YT:()=>X,Yr:()=>ge,b7:()=>Te,cF:()=>me,f4:()=>w,ix:()=>M,ju:()=>N,l5:()=>v,lj:()=>Z,nX:()=>g,nq:()=>he,p5:()=>D,pt:()=>b,qF:()=>oe,rV:()=>Ee,tB:()=>Se,uF:()=>P,vz:()=>z,xF:()=>re,xQ:()=>ee,xR:()=>B,y$:()=>ie,zw:()=>I})
var a=n(602652),i=n(786628),r=n(232606),s=n(348920),o=n(520497),l=n(111911),c=n(537076),d=n(273155),u=n(768614),m=n(208029),p=n(487761),h=n(497790),E=n(901113)
const S={itemNameErrors:[],otherErrors:[],otherWarnings:[],registryErrors:[],registryWarnings:[],tagErrors:[]}
var T,g,f
!function(e){e.STARTED="STARTED"
e.COMPLETED="COMPLETED"
e.FAILED="FAILED"}(T||(T={}))
!function(e){e.ITEM_NAME_ERRORS="itemNameErrors"
e.TAG_ERRORS="tagErrors"
e.REGISTRY_ERRORS="registryErrors"
e.REGISTRY_WARNINGS="registryWarnings"
e.OTHER_ERRORS="otherErrors"
e.OTHER_WARNINGS="otherWarnings"}(g||(g={}))
!function(e){e.ALIAS="ALIAS"
e.DESCRIPTION="DESCRIPTION"
e.FILENAME="FILENAME"
e.NEW_BIOENTITY_NAME="NEW_BIOENTITY_NAME"
e.NEW_REGISTRY_ID="NEW_REGISTRY_ID"
e.FOLDER_PATH_FORWARD_SLASH="FOLDER_PATH_FORWARD_SLASH"
e.IGNORE="IGNORE"
e.MY_COLLECTION_ID="MY_COLLECTION_ID"
e.ORG_COLLECTION_ID="ORG_COLLECTION_ID"
e.BATCH_NAME="BATCH_NAME"
e.HELM="HELM"
e.IDT="IDT"
e.CUSTOM_MOD_SYNTAX="CUSTOM_MOD_SYNTAX"
e.RESIDUES="RESIDUES"
e.CUSTOM_FIELD="CUSTOM_FIELD"
e.SCHEMA_FIELD="SCHEMA_FIELD"
e.BATCH_SCHEMA_FIELD="BATCH_SCHEMA_FIELD"
e.SAMPLE_GROUP_SCHEMA_FIELD="SAMPLE_GROUP_SCHEMA_FIELD"
e.RESULT_SCHEMA_FIELD="RESULT_SCHEMA_FIELD"
e.PROCESS_TASK_SCHEMA_FIELD="PROCESS_TASK_SCHEMA_FIELD"
e.PROCESS_OUTPUT_SCHEMA_FIELD="PROCESS_OUTPUT_SCHEMA_FIELD"
e.CAPILLARY_CHEMICAL_STRUCTURE_INPUT="CAPILLARY_CHEMICAL_STRUCTURE_INPUT"
e.SMILES="SMILES"
e.MOLFILE="MOLFILE"
e.NUMBER_OF_CONTAINERS="NUMBER_OF_CONTAINERS"
e.BARCODE="BARCODE"
e.NEW_BARCODE="NEW_BARCODE"
e.STORABLE_NAME="STORABLE_NAME"
e.PARENT_STORABLE_BARCODE="PARENT_STORABLE_BARCODE"
e.PARENT_STORABLE_GRID_COORDINATES="PARENT_STORABLE_GRID_COORDINATES"
e.CONTAINER_SCHEMA_FIELD="CONTAINER_SCHEMA_FIELD"
e.PLATE_SCHEMA_FIELD="PLATE_SCHEMA_FIELD"
e.BOX_SCHEMA_FIELD="BOX_SCHEMA_FIELD"
e.LOCATION_SCHEMA_FIELD="LOCATION_SCHEMA_FIELD"
e.ALLOWS_NON_LOCATION_CHILDREN="ALLOWS_NON_LOCATION_CHILDREN"
e.LOCATION_CAPACITY="LOCATION_CAPACITY"
e.ALLOWED_CHILD_STORABLE_SCHEMAS="ALLOWED_CHILD_STORABLE_SCHEMAS"
e.INPUT_CONTAINER_BARCODE="INPUT_CONTAINER_BARCODE"
e.INPUT_BIOENTITY_LABEL="INPUT_BIOENTITY_LABEL"
e.INPUT_BATCH_NAME="INPUT_BATCH_NAME"
e.INPUT_GRID_BARCODE="INPUT_GRID_BARCODE"
e.INPUT_GRID_COORDINATES="INPUT_GRID_COORDINATES"
e.OUTPUT_CONTAINER_BARCODE="OUTPUT_CONTAINER_BARCODE"
e.OUTPUT_GRID_BARCODE="OUTPUT_GRID_BARCODE"
e.OUTPUT_GRID_COORDINATES="OUTPUT_GRID_COORDINATES"
e.INPUT_CONCENTRATION_VALUE="INPUT_CONCENTRATION_VALUE"
e.INPUT_CONCENTRATION_UNITS="INPUT_CONCENTRATION_UNITS"
e.TRANSFER_QUANTITY="TRANSFER_VOLUME_AMOUNT"
e.FINAL_QUANTITY_VALUE="FINAL_VOLUME_VALUE"
e.QUANTITY_UNITS="VOLUME_UNITS"
e.ADD_DEDUCT_AMOUNT="ADD_DEDUCT_AMOUNT"
e.SAMPLE_OWNERS="SAMPLE_OWNERS"
e.SAMPLE_RESTRICTION_STATUS="SAMPLE_RESTRICTION_STATUS"
e.SAMPLE_AUTHORIZED_USERS="SAMPLE_AUTHORIZED_USERS"
e.STAGE_RUN_NAME="STAGE_RUN_NAME"
e.REGISTRATION_TABLE_EXISTING_BIOENTITY="REGISTRATION_TABLE_EXISTING_BIOENTITY"
e.TABLE_COLUMN="TABLE_COLUMN"
e.DATA_TABLE_MATCHER="DATA_TABLE_MATCHER"
e.DATA_TABLE_VALUE="DATA_TABLE_VALUE"
e.STAGE_RUN_SAMPLE_NAME="STAGE_RUN_SAMPLE_NAME"
e.INGREDIENT_MIXTURE_LABEL="INGREDIENT_MIXTURE_LABEL"
e.INGREDIENT_COMPONENT_BIOENTITY_LABEL="INGREDIENT_COMPONENT_BIOENTITY_LABEL"
e.INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL="INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL"
e.INGREDIENT_CATALOG_IDENTIFIER="INGREDIENT_CATALOG_IDENTIFIER"
e.INGREDIENT_COMPONENT_LOT_TEXT="INGREDIENT_SOURCE"
e.INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL="INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL"
e.INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE="INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE"
e.INGREDIENT_AMOUNT="INGREDIENT_AMOUNT"
e.INGREDIENT_UNITS="INGREDIENT_UNITS"
e.INGREDIENT_NOTES="INGREDIENT_NOTES"
e.PROCESS_TASK_ASSIGNEE="PROCESS_TASK_ASSIGNEE"
e.PROCESS_TASK="PROCESS_TASK"
e.UNIT_SELECTOR="UNIT_SELECTOR"
e.COMPLEX_POLYMER_COMPONENT="COMPLEX_POLYMER_COMPONENT"}(f||(f={}))
const I={[f.ALIAS]:"Additional alias",[f.DESCRIPTION]:"Description tab text",[f.FILENAME]:"Entity name, alias, or registry ID",[f.NEW_BIOENTITY_NAME]:"New entity name",[f.NEW_REGISTRY_ID]:"New registry ID",[f.FOLDER_PATH_FORWARD_SLASH]:"New folder path",[f.MY_COLLECTION_ID]:"ID for my collection",[f.ORG_COLLECTION_ID]:"ID for org collection",[f.BATCH_NAME]:"Batch ID",[f.HELM]:"HELM notation",[f.IDT]:"IDT notation",[f.CUSTOM_MOD_SYNTAX]:"Custom notation",[f.RESIDUES]:"Residues",[f.IGNORE]:"Ignore",[f.CUSTOM_FIELD]:"Custom field",[f.SCHEMA_FIELD]:"Entity field",[f.BATCH_SCHEMA_FIELD]:"Batch field",[f.SAMPLE_GROUP_SCHEMA_FIELD]:"Sample",[f.RESULT_SCHEMA_FIELD]:"Result field",[f.PROCESS_TASK_SCHEMA_FIELD]:"Task field",[f.PROCESS_OUTPUT_SCHEMA_FIELD]:"Output field",[f.STORABLE_NAME]:"Name",[f.BARCODE]:"Barcode",[f.NEW_BARCODE]:"New barcode",[f.PARENT_STORABLE_BARCODE]:"Location barcode",[f.PARENT_STORABLE_GRID_COORDINATES]:"Location position",[f.CONTAINER_SCHEMA_FIELD]:"Container field",[f.PLATE_SCHEMA_FIELD]:"Plate field",[f.BOX_SCHEMA_FIELD]:"Box Field",[f.LOCATION_SCHEMA_FIELD]:"Location field",[f.NUMBER_OF_CONTAINERS]:"Number of containers",[f.ALLOWS_NON_LOCATION_CHILDREN]:"Allows plates, boxes, and containers",[f.LOCATION_CAPACITY]:"Capacity",[f.ALLOWED_CHILD_STORABLE_SCHEMAS]:"Allowed inventory schemas",[f.INPUT_CONTAINER_BARCODE]:"Source container barcode",[f.INPUT_BIOENTITY_LABEL]:"Source entity name, alias, or registry ID",[f.INPUT_BATCH_NAME]:"Source batch ID",[f.INPUT_GRID_BARCODE]:"Source plate/box barcode",[f.INPUT_GRID_COORDINATES]:"Source position",[f.OUTPUT_CONTAINER_BARCODE]:"Destination container barcode",[f.OUTPUT_GRID_BARCODE]:"Destination plate/box barcode",[f.OUTPUT_GRID_COORDINATES]:"Destination well",[f.INPUT_CONCENTRATION_VALUE]:"Source concentration",[f.INPUT_CONCENTRATION_UNITS]:"Source concentration units",[f.TRANSFER_QUANTITY]:`Transfer ${(0,p.Z)(!1)}`,[f.FINAL_QUANTITY_VALUE]:`Final ${(0,p.Z)(!1)}`,[f.QUANTITY_UNITS]:`${(0,p.Z)()} units`,[f.ADD_DEDUCT_AMOUNT]:`Add/Deduct ${(0,p.Z)(!1)}`,[f.SAMPLE_OWNERS]:"Sample owners",[f.SAMPLE_RESTRICTION_STATUS]:"Restriction status",[f.SAMPLE_AUTHORIZED_USERS]:(0,d.T3)(),[f.STAGE_RUN_NAME]:"Stage run",[f.REGISTRATION_TABLE_EXISTING_BIOENTITY]:"Existing entity name, alias, or registry ID",[f.DATA_TABLE_VALUE]:"Set value",[f.DATA_TABLE_MATCHER]:"Match value",[f.STAGE_RUN_SAMPLE_NAME]:"Sample ID",[f.INGREDIENT_MIXTURE_LABEL]:"Mixture - name, alias, or registry ID",[f.INGREDIENT_COMPONENT_BIOENTITY_LABEL]:"Ingredient component entity - name, alias, or registry ID",[f.INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL]:"Ingredient updated component entity - name, alias, or registry ID",[f.INGREDIENT_CATALOG_IDENTIFIER]:"Ingredient catalog identifier",[f.INGREDIENT_COMPONENT_LOT_TEXT]:"Ingredient component lot text",[f.INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL]:"Ingredient component lot entity - name, alias, or registry ID",[f.INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE]:"Ingredient component lot container barcode",[f.INGREDIENT_AMOUNT]:"Ingredient amount",[f.INGREDIENT_UNITS]:"Ingredient units",[f.INGREDIENT_NOTES]:"Ingredient notes",[f.PROCESS_TASK_ASSIGNEE]:"Task assignee",[f.PROCESS_TASK]:"Task",[f.SMILES]:"SMILES",[f.MOLFILE]:"Molfile"},A={[f.ALIAS]:"An alternate name that will be added to the entity.",[f.DESCRIPTION]:"Text to add to the entity's description tab.",[f.FILENAME]:"The name, alias, or registry ID used to identify the entity to be updated.",[f.NEW_BIOENTITY_NAME]:"The new name for the entity.",[f.NEW_REGISTRY_ID]:"The new registry ID for the entity",[f.FOLDER_PATH_FORWARD_SLASH]:'The path of the folder that entities will be moved to, such as "project folder/sub folder/destination folder".',[f.MY_COLLECTION_ID]:"A unique alphanumeric value to identify the entity within the collection.",[f.ORG_COLLECTION_ID]:"A unique alphanumeric value to identify the entity within the collection.",[f.HELM]:"A HELM string specifiying bases and modifications of an oligo.",[f.IDT]:"An IDT string specifiying bases and modifications of an oligo.",[f.RESIDUES]:"The residues to set.",[f.BATCH_NAME]:"The batch ID used to identify the batch to be updated.",[f.IGNORE]:"This column will be ignored.",[f.CUSTOM_FIELD]:"The value of a custom field. The column name will become the name of the field, and the cell value will become the field's value.",[f.SCHEMA_FIELD]:"The value of a field that's part of the schema you selected earlier. If you pick a field that has a \"Schema Link\" type, we'll search for an entity with a matching name. You can specify which folders to search in below.",[f.BATCH_SCHEMA_FIELD]:"The value of a field that's part of the batch schema you selected earlier. If you pick a field that has a \"Batch Link\" type, we'll search for a batch with a matching name. You can specify which folders to search in below.",[f.CONTAINER_SCHEMA_FIELD]:"The value of a field that's part of the container schema you selected earlier.",[f.PLATE_SCHEMA_FIELD]:"The value of a field that's part of the plate schema you selected earlier.",[f.BOX_SCHEMA_FIELD]:"The value of a field that's part of the box schema you selected earlier.",[f.LOCATION_SCHEMA_FIELD]:"The value of a field that's part of the location schema you selected earlier.",[f.SAMPLE_GROUP_SCHEMA_FIELD]:"An individual sample",[f.RESULT_SCHEMA_FIELD]:"The value of a result field",[f.PROCESS_TASK_SCHEMA_FIELD]:"The value of a task field",[f.PROCESS_OUTPUT_SCHEMA_FIELD]:"The value of an output field",[f.NUMBER_OF_CONTAINERS]:"The number of containers to create.",[f.STORABLE_NAME]:"The name to identify the inventory item. Defaults to item's barcode.",[f.BARCODE]:"The barcode for the item.",[f.NEW_BARCODE]:"The new barcode for the inventory item.",[f.PARENT_STORABLE_BARCODE]:"The barcode of the containing inventory.",[f.PARENT_STORABLE_GRID_COORDINATES]:"The position inside the containing inventory (if the Location refers to a plate or a box).",[f.INPUT_CONTAINER_BARCODE]:"The barcode of the container that you are transferring material from.",[f.INPUT_BIOENTITY_LABEL]:"The name, alias, or registry ID of the entity that you are transferring material from.",[f.INPUT_BATCH_NAME]:"The ID of the batch that you are transferring material from.",[f.INPUT_GRID_BARCODE]:"The barcode of the plate that you are transferring material from. You must also specify the well in a separate column.",[f.INPUT_GRID_COORDINATES]:'The well of the plate, such as "A6" or "6", that you are transferring material from.',[f.OUTPUT_CONTAINER_BARCODE]:"The barcode of the container that you are transferring material to.",[f.OUTPUT_GRID_BARCODE]:"The barcode of the plate that you are transferring material to. You must also specify the well in a separate column.",[f.OUTPUT_GRID_COORDINATES]:'The well of the plate, such as "A6" or "6", that you are transferring material to.',[f.INPUT_CONCENTRATION_VALUE]:"Concentration of the source sample.",[f.INPUT_CONCENTRATION_UNITS]:"Concentration units: molar (M) or mass concentration (g/L) with prefixes: n, u, m, or none.",[f.TRANSFER_QUANTITY]:`The ${(0,p.Z)()} of the material that you are transferring.`,[f.FINAL_QUANTITY_VALUE]:`Sum of the destination container's initial ${(0,p.Z)()}, transfer ${(0,p.Z)()}, and dilution ${(0,p.Z)()}.`,[f.QUANTITY_UNITS]:`${(0,p.Z)(!0)} units: pL, nL, uL, mL, L${s.ZP.INVENTORY_ENABLE_SOLID_UNITS_FOR_CONTAINER?", pg, ng, ug, mg, g, kg":""}`,[f.ADD_DEDUCT_AMOUNT]:`The ${(0,p.Z)(!1)} of material that you are adding or deducting.`,[f.ALLOWS_NON_LOCATION_CHILDREN]:"Whether the location can contain plates, boxes, and containers. When not enabled, the location can only contain other locations.",[f.LOCATION_CAPACITY]:"The number of plates, boxes, and containers that the location can hold.",[f.ALLOWED_CHILD_STORABLE_SCHEMAS]:"The plate, box, and container schemas allowed to be stored in the location.",[f.SAMPLE_OWNERS]:"The names, handles, or emails of the sample owners for the item.",[f.SAMPLE_RESTRICTION_STATUS]:'The restriction status of the item ("Restricted" or "Unrestricted").',[f.SAMPLE_AUTHORIZED_USERS]:`The names, handles, or emails of the ${(0,d.EX)()} for the item.`,[f.STAGE_RUN_NAME]:"The name of the stage run to be used.",[f.STAGE_RUN_SAMPLE_NAME]:"The name of the sample to be used.",[f.DATA_TABLE_MATCHER]:`The ${m.D6.result_table} column on which rows will be matched.`,[f.DATA_TABLE_VALUE]:`The ${m.D6.result_table} column which will be modified`,[f.REGISTRATION_TABLE_EXISTING_BIOENTITY]:"The entity to create a batch for",[f.INGREDIENT_MIXTURE_LABEL]:"The mixture that this ingredient belongs to.",[f.INGREDIENT_COMPONENT_BIOENTITY_LABEL]:"The component entity of this ingredient. Will create a new ingredient if none yet exists with this component entity.",[f.INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL]:"Use this column type to replace the component entity of an existing ingredient. The row must also specify the current component entity in order to identify the ingredient.",[f.INGREDIENT_CATALOG_IDENTIFIER]:"Text value.",[f.INGREDIENT_COMPONENT_LOT_TEXT]:"Text representation of the component lot.",[f.INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL]:"The Name, Alias, or Registry ID of the component lot entity.",[f.INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE]:"The barcode of the component lot container.",[f.INGREDIENT_AMOUNT]:'Positive number (eg "1.2", "5.2e-3")',[f.INGREDIENT_UNITS]:`One of: ${u.T$.join(", ")}.`,[f.INGREDIENT_NOTES]:"Any additional comments or notes about the ingredient.",[f.PROCESS_TASK_ASSIGNEE]:"The assignee of this task",[f.PROCESS_TASK]:"The task for this output",[f.SMILES]:"SMILES string describing chemical structure.",[f.MOLFILE]:"Molfile string describing chemical structure.",[f.CUSTOM_MOD_SYNTAX]:"A customer-defined Custom Notation string specifying bases and modifications of an oligo."},y={[f.FILENAME]:0,[f.STAGE_RUN_NAME]:0,[f.STAGE_RUN_SAMPLE_NAME]:0,[f.MY_COLLECTION_ID]:0,[f.ORG_COLLECTION_ID]:0,[f.BATCH_NAME]:0,[f.RESIDUES]:0,[f.SMILES]:0,[f.MOLFILE]:0,[f.SAMPLE_GROUP_SCHEMA_FIELD]:0,[f.RESULT_SCHEMA_FIELD]:0,[f.INGREDIENT_MIXTURE_LABEL]:0,[f.PROCESS_TASK_ASSIGNEE]:0,[f.PROCESS_TASK]:0,[f.PROCESS_TASK_SCHEMA_FIELD]:0,[f.PROCESS_OUTPUT_SCHEMA_FIELD]:0,[f.HELM]:1,[f.IDT]:1,[f.ALIAS]:1,[f.DESCRIPTION]:1,[f.CUSTOM_FIELD]:1,[f.FOLDER_PATH_FORWARD_SLASH]:1,[f.SCHEMA_FIELD]:2,[f.BATCH_SCHEMA_FIELD]:2,[f.NUMBER_OF_CONTAINERS]:3,[f.STORABLE_NAME]:3,[f.BARCODE]:3,[f.NEW_BARCODE]:3,[f.PARENT_STORABLE_BARCODE]:3,[f.PARENT_STORABLE_GRID_COORDINATES]:3,[f.CONTAINER_SCHEMA_FIELD]:4,[f.PLATE_SCHEMA_FIELD]:4,[f.BOX_SCHEMA_FIELD]:4,[f.LOCATION_SCHEMA_FIELD]:4,[f.INPUT_CONTAINER_BARCODE]:5,[f.INPUT_BIOENTITY_LABEL]:5,[f.INPUT_BATCH_NAME]:5,[f.INPUT_GRID_BARCODE]:5,[f.INPUT_GRID_COORDINATES]:5,[f.OUTPUT_CONTAINER_BARCODE]:6,[f.OUTPUT_GRID_BARCODE]:6,[f.OUTPUT_GRID_COORDINATES]:6,[f.INPUT_CONCENTRATION_VALUE]:7,[f.INPUT_CONCENTRATION_UNITS]:7,[f.TRANSFER_QUANTITY]:7,[f.FINAL_QUANTITY_VALUE]:7,[f.QUANTITY_UNITS]:7,[f.ADD_DEDUCT_AMOUNT]:7,[f.ALLOWS_NON_LOCATION_CHILDREN]:7,[f.LOCATION_CAPACITY]:7,[f.ALLOWED_CHILD_STORABLE_SCHEMAS]:7,[f.SAMPLE_OWNERS]:7,[f.SAMPLE_RESTRICTION_STATUS]:7,[f.SAMPLE_AUTHORIZED_USERS]:7,[f.INGREDIENT_COMPONENT_BIOENTITY_LABEL]:1,[f.INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL]:2,[f.INGREDIENT_CATALOG_IDENTIFIER]:3,[f.INGREDIENT_AMOUNT]:4,[f.INGREDIENT_UNITS]:5,[f.INGREDIENT_COMPONENT_LOT_TEXT]:6,[f.INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE]:7,[f.INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL]:8,[f.INGREDIENT_NOTES]:9,[f.IGNORE]:100}
var _
!function(e){e.IDT_3MOD="BNCH_IDT_3MOD"
e.IDT_5MOD="BNCH_IDT_5MOD"
e.CHEMICAL_STRUCTURE_SALTS="BNCH_CHEMICAL_STRUCTURE_SALTS"}(_||(_={}))
const C=a.shape({columnTransform:a.oneOf(Object.values(_)).isRequired,name:a.string.isRequired,type:a.oneOf(Object.keys(f)).isRequired,allowedColumnTypes:a.arrayOf(a.oneOf(Object.keys(f))).isRequired,exampleValues:a.arrayOf(a.shape({value:a.string.isRequired,rowIdx:a.number.isRequired,originalValues:a.object.isRequired})),numRowsWithDerivedValues:a.number.isRequired,compatibleSchemaFieldIds:a.arrayOf(a.string)}),R=a.shape({derivedColumns:a.arrayOf(C),state:a.oneOf([T.STARTED,T.FAILED,T.COMPLETED])}),N={BULK_CREATE:"derivedColumns",BULK_UPDATE:"derivedColumns"},O=[{columnTransform:_.IDT_3MOD,sampleDataRenderer:l.Z},{columnTransform:_.IDT_5MOD,sampleDataRenderer:l.Z},{columnTransform:_.CHEMICAL_STRUCTURE_SALTS,sampleDataRenderer:o.Z,helpText:"We are currently optimized to support capturing parent molecule compounds using our Molecule entity. In concordance with that, any associated salt form information will be stripped; we recommend capturing this in custom or schema fields."}]
var b,v
!function(e){e.BOXES="BOXES"
e.CONTAINERS="CONTAINERS"
e.DATA_TABLE="DATA_TABLE"
e.EXAMPLE_FILE="EXAMPLE_FILE"
e.INPUT_TABLE="INPUT_TABLE"
e.INVENTORY_FILES="INVENTORY_FILES"
e.LOCATIONS="LOCATIONS"
e.PLATES="PLATES"
e.REGISTRATION_TABLE="REGISTRATION_TABLE"
e.REGISTRY_ENTITIES="REGISTRY_ENTITIES"
e.REQUEST_SAMPLES="REQUEST_SAMPLES"
e.RUN_RESULTS="RUN_RESULTS"
e.SAMPLES="SAMPLES"
e.STRUCTURED_TABLE="STRUCTURED_TABLE"
e.TRANSFER_STORABLES="TRANSFER_STORABLES"
e.TRANSFER_TABLE="TRANSFER_TABLE"
e.UPDATE_BIOENTITIES="UPDATE_BIOENTITIES"
e.UPDATE_BOXES="UPDATE_BOXES"
e.UPDATE_CONTAINERS="UPDATE_CONTAINERS"
e.UPDATE_MIXTURE_INGREDIENTS="UPDATE_MIXTURE_INGREDIENTS"
e.UPDATE_LOCATIONS="UPDATE_LOCATIONS"
e.UPDATE_PLATES="UPDATE_PLATES"
e.UPDATE_SAMPLES="UPDATE_SAMPLES"}(b||(b={}))
function getAnalyticsModuleFromImportType(e){if(null==e)return null
switch(e){case b.BOXES:case b.CONTAINERS:case b.LOCATIONS:case b.PLATES:case b.TRANSFER_STORABLES:case b.TRANSFER_TABLE:case b.UPDATE_BOXES:case b.UPDATE_CONTAINERS:case b.UPDATE_PLATES:case b.UPDATE_LOCATIONS:return i.X.SAMPLES
case b.INVENTORY_FILES:case b.REGISTRATION_TABLE:case b.REGISTRY_ENTITIES:case b.UPDATE_BIOENTITIES:case b.UPDATE_MIXTURE_INGREDIENTS:case b.SAMPLES:case b.UPDATE_SAMPLES:return i.X.REGISTRY
case b.EXAMPLE_FILE:return i.X.INSTRUMENTS
case b.INPUT_TABLE:return i.X.LEGACY_WORKFLOWS
case b.REQUEST_SAMPLES:return i.X.REQUESTS
case b.DATA_TABLE:case b.RUN_RESULTS:return i.X.RESULTS
case b.STRUCTURED_TABLE:return i.X.ELN
default:(0,r.Gp)(!1,`Unexpected spreadsheet import type ${(0,E.vE)(e)}`)
return null}}!function(e){e.SPREADSHEET="SPREADSHEET"
e.RAW_TEXT="RAW_TEXT"
e.SDF="SDF"}(v||(v={}))
const P=v.SPREADSHEET,L="bulk_import_raw_text.csv",D=[f.ALIAS,f.SCHEMA_FIELD,f.CUSTOM_FIELD,f.DESCRIPTION,f.IGNORE],M=[f.SCHEMA_FIELD,f.BATCH_SCHEMA_FIELD,f.CONTAINER_SCHEMA_FIELD,f.PLATE_SCHEMA_FIELD,f.BOX_SCHEMA_FIELD,f.LOCATION_SCHEMA_FIELD,f.SAMPLE_GROUP_SCHEMA_FIELD,f.RESULT_SCHEMA_FIELD,f.PROCESS_TASK_SCHEMA_FIELD,f.PROCESS_OUTPUT_SCHEMA_FIELD],w=[f.BARCODE,f.STORABLE_NAME,f.PARENT_STORABLE_BARCODE],F=[f.BARCODE,f.NEW_BARCODE],k=[...w,f.PARENT_STORABLE_GRID_COORDINATES],U=[f.PARENT_STORABLE_BARCODE,f.PARENT_STORABLE_GRID_COORDINATES],x=[f.INPUT_CONTAINER_BARCODE,f.INPUT_GRID_BARCODE],B=[f.INPUT_BIOENTITY_LABEL,f.INPUT_BATCH_NAME,...x],Z=[...B,f.INPUT_GRID_COORDINATES],q=[f.OUTPUT_CONTAINER_BARCODE,f.OUTPUT_GRID_BARCODE],G=[...q,f.OUTPUT_GRID_COORDINATES],V=[f.TRANSFER_QUANTITY,f.QUANTITY_UNITS],H=[f.INPUT_CONCENTRATION_VALUE,f.INPUT_CONCENTRATION_UNITS],W=(f.INPUT_GRID_BARCODE,f.INPUT_GRID_COORDINATES,f.OUTPUT_GRID_BARCODE,f.OUTPUT_GRID_COORDINATES,[f.TRANSFER_QUANTITY,f.FINAL_QUANTITY_VALUE,f.QUANTITY_UNITS,f.INPUT_CONCENTRATION_VALUE,f.INPUT_CONCENTRATION_UNITS]),Y=[...Z,...G,...W],$=[f.ALIAS,f.DESCRIPTION,f.CUSTOM_FIELD],K=[f.INGREDIENT_COMPONENT_BIOENTITY_LABEL,f.INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL],z=[f.INGREDIENT_COMPONENT_LOT_TEXT,f.INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE,f.INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL],Q=[...K,f.INGREDIENT_COMPONENT_LOT_TEXT,f.INGREDIENT_MIXTURE_LABEL,f.INGREDIENT_CATALOG_IDENTIFIER,f.INGREDIENT_AMOUNT,f.INGREDIENT_UNITS,f.INGREDIENT_NOTES,f.INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE,f.INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL],j=[f.PROCESS_TASK_ASSIGNEE,f.PROCESS_TASK],J=[f.SMILES,f.MOLFILE],X=[...J],ee=[f.IDT,f.CUSTOM_MOD_SYNTAX,...J],te=[f.FILENAME,f.STAGE_RUN_NAME,f.STAGE_RUN_SAMPLE_NAME,f.NUMBER_OF_CONTAINERS,f.MY_COLLECTION_ID,f.ORG_COLLECTION_ID,f.BATCH_NAME,f.HELM,f.IDT,f.CUSTOM_MOD_SYNTAX,f.RESIDUES,f.BATCH_SCHEMA_FIELD,f.CONTAINER_SCHEMA_FIELD,f.PLATE_SCHEMA_FIELD,f.BOX_SCHEMA_FIELD,f.LOCATION_SCHEMA_FIELD,f.DATA_TABLE_MATCHER,f.DATA_TABLE_VALUE,f.SAMPLE_GROUP_SCHEMA_FIELD,f.REGISTRATION_TABLE_EXISTING_BIOENTITY,f.RESULT_SCHEMA_FIELD,f.PROCESS_TASK_SCHEMA_FIELD,f.PROCESS_OUTPUT_SCHEMA_FIELD,f.FOLDER_PATH_FORWARD_SLASH,f.ADD_DEDUCT_AMOUNT,f.SAMPLE_RESTRICTION_STATUS,f.SAMPLE_AUTHORIZED_USERS,f.SAMPLE_OWNERS,f.NEW_BARCODE,...k,...Y,...D,...Q,...j,...J]
var ne
!function(e){e.DELETE_EMPTY_FIELDS="deleteEmptyFields"
e.DELETE_EXISTING_ALIASES="deleteExistingAliases"
e.CLEAR_INGREDIENT_FIELDS_FOR_EMPTY_CELLS="clearIngredientFieldsForEmptyCells"
e.CLEAR_SAMPLE_ROLES_FOR_EMPTY_CELLS="clearSampleRolesForEmptyCells"
e.IMPORT_BATCHES="shouldImportBatches"
e.IMPORT_CONTAINERS="shouldImportContainers"
e.ARE_SEQUENCES_CIRCULAR="areSequencesCircular"
e.REPLACE_LINK_WITH_TEXT="replaceFileLinkWithText"
e.USE_EXISTING_CONTAINERS="useExistingContainers"
e.USE_NON_EMPTY_CONTAINERS="useNonEmptyContainers"
e.SKIP_ERRORS="shouldSkipErrors"
e.USE_SAMPLES_WITH_STATUS_WARNINGS="useSamplesWithStatusWarnings"}(ne||(ne={}))
const ae=[ne.ARE_SEQUENCES_CIRCULAR]
var ie
!function(e){e.SET_STORABLE_IMPORT_SETTINGS="SET_STORABLE_IMPORT_SETTINGS"
e.SET_IMPORT_SETTINGS_FOR_DESTINATION="SET_IMPORT_SETTINGS_FOR_DESTINATION"
e.SET_IMPORT_SETTINGS_FOR_REGISTRY="SET_IMPORT_SETTINGS_FOR_REGISTRY"
e.UPLOAD_SPREADSHEET="UPLOAD_SPREADSHEET"
e.MAP_COLUMN_NAMES="MAP_COLUMN_NAMES"
e.MAP_DERIVED_COLUMNS="MAP_DERIVED_COLUMNS"
e.MAP_OUTPUT_FILE_COLUMNS="MAP_OUTPUT_FILE_COLUMNS"
e.SHOW_ERRORS="SHOW_ERRORS"
e.INSTRUMENT_DATA="INSTRUMENT_DATA"}(ie||(ie={}))
const re=".csv, .txt, .tsv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",se=".sdf, .txt",oe="SPREADSHEET_BULK_IMPORT_KEY",le=a.arrayOf(a.shape({row:a.number.isRequired,errorCode:a.string.isRequired,errorMessage:a.string,itemName:a.string}).isRequired),ce={registry:c.REGISTRY_SHAPE,inOrgCollection:a.bool.isRequired,inUserCollection:a.bool.isRequired,labelingStrategy:a.oneOf(c.SPREADSHEET_LABELING_STRATEGIES),labelingStrategyOptions:a.arrayOf(a.oneOf(c.SPREADSHEET_LABELING_STRATEGIES)).isRequired,projectId:a.string},de={columnTypes:a.arrayOf(a.oneOf(te).isRequired),errors:le,errorData:a.shape({itemNameErrors:le,registryErrors:le,registryWarnings:le,otherErrors:le,otherWarnings:le,tagErrors:le,state:a.oneOf([T.STARTED,T.FAILED,T.COMPLETED])}),column:a.shape({name:a.string.isRequired,type:a.oneOf(te).isRequired,schemaField:h.SCHEMA_FIELD_SHAPE}),derivedColumnsData:R,fileData:a.shape({columns:a.arrayOf(a.shape({name:a.string.isRequired,type:a.oneOf(Object.keys(f)).isRequired})),errorMessage:a.string,state:a.oneOf([T.STARTED,T.FAILED,T.COMPLETED]),url:a.string}),modalProps:a.shape({title:a.string.isRequired,onRequestClose:a.func.isRequired}).isRequired,registryImportSettings:a.shape(ce),selectedDestination:a.shape({folderId:a.string,registryId:a.string}),selectedSchemaIds:a.shape({tagSchemaId:a.string,batchSchemaId:a.string,containerSchemaId:a.string,plateSchemaId:a.string,boxSchemaId:a.string,locationSchemaId:a.string,resultSchemaId:a.string,processTaskSchemaId:a.string,processOutputSchemaId:a.string})}
var ue
!function(e){e.INVALID_AUTH="INVALID_AUTH"
e.NO_FILES_FOUND="NO_FILES_FOUND"
e.MULTIPLE_FILES_FOUND="MULTIPLE_FILES_FOUND"
e.NO_ENTRIES_FOUND="NO_ENTRIES_FOUND"
e.MULTIPLE_ENTRIES_FOUND="MULTIPLE_ENTRIES_FOUND"
e.NO_FILENAME="NO_FILENAME"
e.FILENAME_TOO_LONG="FILENAME_TOO_LONG"
e.READABLE_UNMODIFIABLE_BIOENTITY="READABLE_UNMODIFIABLE_BIOENTITY"
e.ARCHIVED_UNMODIFIABLE_BIOENTITY="ARCHIVED_UNMODIFIABLE_BIOENTITY"
e.UNREADABLE_BIOENTITY="UNREADABLE_BIOENTITY"
e.ITEM_NOT_CONTAINABLE="ITEM_NOT_CONTAINABLE"
e.INVALID_SEQUENCE_REGION="INVALID_SEQUENCE_REGION"
e.RESIDUES_TOO_LONG="RESIDUES_TOO_LONG"
e.BATCH_SCHEMAS_DO_NOT_MATCH="BATCH_SCHEMAS_DO_NOT_MATCH"
e.MULTIPLE_BATCHES_FOUND="MULTIPLE_BATCHES_FOUND"
e.NO_BATCHES_FOUND="NO_BATCHES_FOUND"
e.NO_BATCH_NAME="NO_BATCH_NAME"
e.READABLE_UNMODIFIABLE_BATCHES="READABLE_UNMODIFIABLE_BATCHES"
e.ARCHIVED_UNMODIFIABLE_BATCHES="ARCHIVED_UNMODIFIABLE_BATCHES"
e.UNREADABLE_BATCHES="UNREADABLE_BATCHES"
e.NO_RUNS_FOUND="NO_RUNS_FOUND"
e.MULTIPLE_RUNS_FOUND="MULTIPLE_RUNS_FOUND"
e.NO_RESULTS_FOUND="NO_RESULTS_FOUND"
e.MULTIPLE_RESULTS_FOUND="MULTIPLE_RESULTS_FOUND"
e.NO_REQUESTS_FOUND="NO_REQUESTS_FOUND"
e.MULTIPLE_REQUESTS_FOUND="MULTIPLE_REQUESTS_FOUND"
e.NO_BLOBS_FOUND="NO_BLOBS_FOUND"
e.MULTIPLE_BLOBS_FOUND="MULTIPLE_BLOBS_FOUND"
e.DUPLICATE_BARCODE="DUPLICATE_BARCODE"
e.DUPLICATE_BARCODE_IN_SPREADSHEET="DUPLICATE_BARCODE_IN_SPREADSHEET"
e.DUPLICATE_PARENT_STORABLE_IN_SPREADSHEET="DUPLICATE_PARENT_STORABLE_IN_SPREADSHEET"
e.INVALID_GRID_COORDINATES="INVALID_GRID_COORDINATES"
e.INVALID_NUMBER_OF_CONTAINERS="INVALID_NUMBER_OF_CONTAINERS"
e.INVALID_PARENT_STORABLE="INVALID_PARENT_STORABLE"
e.INVALID_SPECIFICATION="INVALID_SPECIFICATION"
e.INVALID_STORABLE_WARNING="INVALID_STORABLE_WARNING"
e.MULTIPLE_STORABLES_FOUND="MULTIPLE_STORABLES_FOUND"
e.NO_STORABLE_NAME="NO_STORABLE_NAME"
e.NO_STORABLES_FOUND="NO_STORABLES_FOUND"
e.READABLE_UNMODIFIABLE_STORABLE="READABLE_UNMODIFIABLE_STORABLE"
e.ARCHIVED_UNMODIFIABLE_STORABLE="ARCHIVED_UNMODIFIABLE_STORABLE"
e.UNREADABLE_STORABLE="UNREADABLE_STORABLE"
e.INVALID_RESIDUES="INVALID_RESIDUES"
e.INVALID_AMOUNT="INVALID_AMOUNT"
e.INVALID_UNITS="INVALID_UNITS"
e.INVALID_FINAL_QUANTITY="INVALID_FINAL_VOLUME"
e.FOUND_EXISTING_CONTAINER="FOUND_EXISTING_CONTAINER"
e.IGNORED_COLUMN="IGNORED_COLUMN"
e.NON_EMPTY_CONTAINER="NON_EMPTY_CONTAINER"
e.NOT_A_CONTAINER="NOT_A_CONTAINER"
e.EMPTY_CONTAINER="EMPTY_CONTAINER"
e.MULTIPLE_BATCHES_IN_CONTAINER="MULTIPLE_BATCHES_IN_CONTAINER"
e.MULTIPLE_SAMPLES_IN_CONTAINER="MULTIPLE_SAMPLES_IN_CONTAINER"
e.CANNOT_CREATE_CONTAINERS_WITHOUT_PROJECT="CANNOT_CREATE_CONTAINERS_WITHOUT_PROJECT"
e.FOUND_SAMPLE_WITH_BLOCKING_STATUS_WARNING="FOUND_SAMPLE_WITH_BLOCKING_STATUS_WARNING"
e.FOUND_SAMPLE_WITH_NONBLOCKING_STATUS_WARNING="FOUND_SAMPLE_WITH_NONBLOCKING_STATUS_WARNING"
e.DEPRECATED_FOUND_SAMPLE_WITH_STATUS_WARNING="FOUND_SAMPLE_WITH_STATUS_WARNING"
e.INVALID_INTEGER="INVALID_INTEGER"
e.INVALID_FLOAT="INVALID_FLOAT"
e.INVALID_DATE="INVALID_DATE"
e.INVALID_DATETIME="INVALID_DATETIME"
e.INVALID_BOOLEAN="INVALID_BOOLEAN"
e.INVALID_TAG_NAME="INVALID_TAG_NAME"
e.INVALID_TAG_VALUE_LENGTH="INVALID_TAG_VALUE_LENGTH"
e.INVALID_SELECTOR_OPTIONS="INVALID_SELECTOR_OPTIONS"
e.INVALID_BATCH_FOR_BATCH_SCHEMA_GRAPH="INVALID_BATCH_FOR_BATCH_SCHEMA_GRAPH"
e.MULTIPLE_LABELS_FOR_FILE="MULTIPLE_LABELS_FOR_FILE"
e.DUPLICATE_ITEM_NAME="DUPLICATE_ITEM_NAME"
e.DUPLICATE_ALIAS="DUPLICATE_ALIAS"
e.REGISTRY_ERROR="REGISTRY_ERROR"
e.SCHEMA_TYPE_MISMATCH="SCHEMA_TYPE_MISMATCH"
e.SCHEMA_CHANGE_ERROR="SCHEMA_CHANGE_ERROR"
e.SCHEMA_CHANGE_WARNING="SCHEMA_CHANGE_WARNING"
e.NO_STAGE_RUN_NAME="NO_STAGE_RUN_NAME"
e.NO_STAGE_RUN_FOUND="NO_STAGE_RUN_FOUND"
e.DATA_TABLE_ROW_MATCHED_MULTIPLE_TIMES="DATA_TABLE_ROW_MATCHED_MULTIPLE_TIMES"
e.NO_DATA_TABLE_ROW_FOUND="NO_DATA_TABLE_ROW_FOUND"
e.MULTIPLE_DATA_TABLE_ROWS_FOUND="MULTIPLE_DATA_TABLE_ROWS_FOUND"
e.NO_STAGE_RUN_SAMPLE_FOUND="NO_STAGE_RUN_SAMPLE_FOUND"
e.MULTIPLE_STAGE_RUN_SAMPLES_FOUND="MULTIPLE_STAGE_RUN_SAMPLES_FOUND"
e.INVALID_STRUCTURED_TABLE_TAG_VALUE="INVALID_STRUCTURED_TABLE_TAG_VALUE"
e.SAMPLE_CONTROLS_IMPLICITLY_CHANGED="SAMPLE_CONTROLS_IMPLICITLY_CHANGED"
e.NAME_TEMPLATE_USAGE_WARNING="NAME_TEMPLATE_USAGE_WARNING"
e.OTHER_ERROR="OTHER_ERROR"}(ue||(ue={}))
const me=[ue.NO_BATCHES_FOUND,ue.NO_FILES_FOUND,ue.MULTIPLE_FILES_FOUND,ue.MULTIPLE_BATCHES_FOUND,ue.INVALID_SELECTOR_OPTIONS],pe=[ue.IGNORED_COLUMN,ue.NO_FILENAME,ue.NO_BATCH_NAME,ue.NO_STORABLE_NAME,ue.INVALID_STORABLE_WARNING,ue.SCHEMA_CHANGE_WARNING,ue.NO_DATA_TABLE_ROW_FOUND,ue.MULTIPLE_DATA_TABLE_ROWS_FOUND],he=30,Ee=[h.FIELD_TYPES.ASSAY_REQUEST_LINK.type,h.FIELD_TYPES.ASSAY_RESULT_LINK.type,h.FIELD_TYPES.ASSAY_RUN_LINK.type,h.FIELD_TYPES.BATCH_LINK.type,h.FIELD_TYPES.BLOB_LINK.type,h.FIELD_TYPES.BIOENTITY_LINK.type,h.FIELD_TYPES.BOOLEAN.type,h.FIELD_TYPES.DATE.type,h.FIELD_TYPES.DATETIME.type,h.FIELD_TYPES.ENTRY_LINK.type,h.FIELD_TYPES.FLOAT.type,h.FIELD_TYPES.INTEGER.type,h.FIELD_TYPES.LONG_TEXT.type,h.FIELD_TYPES.PART_LINK.type,h.FIELD_TYPES.SELECTOR.type,h.FIELD_TYPES.STORABLE_LINK.type,h.FIELD_TYPES.TEXT.type,h.FIELD_TYPES.TRANSLATION_LINK.type],Se={CAN_OVERRIDE_TIMEOUT:"bulk_import.can_override_timeout",SKIP_SPREADSHEET_ERRORS_ENABLED:"skipSpreadsheetErrors.enabled",SOURCE_TYPE:"bulk_import.source_type"},Te={[v.SPREADSHEET]:"Spreadsheet",[v.RAW_TEXT]:"Raw Text",[v.SDF]:"SDF"},ge=[".xls",".xlsx"]},651804:(e,t,n)=>{n.d(t,{Bc:()=>ErrorMessage,JL:()=>Nav,LY:()=>NavItem,Rg:()=>Steps,T3:()=>Page,X6:()=>Pane,XO:()=>ErrorMessages,YI:()=>Warnings,__:()=>Label,bA:()=>BulkWorkflowScreen,h8:()=>Step,kk:()=>SuccessMessage,or:()=>Main,v3:()=>Warning})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(531041),l=n(263137),c=n(271359),d=n(36424)
function BulkWorkflowScreen(e){return s.createElement("div",{...e,className:r()("bulkWorkflow-screen",e.className)})}function Steps({children:e}){return s.createElement("ol",{className:"bulkWorkflow-steps"},e)}function Step({text:e,children:t}){return s.createElement("li",{className:"bulkWorkflow-step",...(0,l.Z)({component:"Step",element:"root"})},s.createElement("div",{className:"bulkWorkflow-step-text"},e),s.createElement("div",{className:"bulkWorkflow-step-body"},t))}class NavItem extends s.Component{constructor(){super(...arguments)
this._handleClick=e=>{this.props.onClick(e,this.props.id)}
this._handleTrashIconClick=e=>{this.props.onDelete(e,this.props.id)}}render(){return s.createElement("div",{onClick:this._handleClick,className:r()("bulkWorkflow-nav-item",{"is-active":this.props.isActive,"is-placeholder":this.props.isPlaceholder},(0,a.iv)(u.navItem))},s.createElement("div",{className:"u-flex-grow"},this.props.children),s.createElement("div",{className:"u-flex-none"},s.createElement(d.Z,{icon:"exclamation",className:(0,a.iv)(this.props.hasErrors?u.errorIcon:u.errorIconInvisible)}),s.createElement("div",{className:(0,a.iv)(u.navButtonWrapper)},this.props.onDelete&&s.createElement(d.Z,{icon:"format-delete",className:(0,a.iv)(u.removeBtn),onClick:this._handleTrashIconClick}))))}}function Nav({children:e,header:t,headerOptions:n,banner:i}){return s.createElement("div",{className:"bulkWorkflow-nav"},s.createElement("div",{className:(0,a.iv)(u.headerWrapper)},s.createElement("span",{className:"bulkWorkflow-nav-header"},t),n&&s.createElement("span",{className:(0,a.iv)(u.headerOptions)},n)),s.createElement("div",{className:"bulkWorkflow-nav-scrollPane"},i,s.createElement("div",{className:"bulkWorkflow-nav-items"},s.createElement("div",{className:"bulkWorkflow-nav-items-line"}),e)))}function Page(e){return s.createElement("div",{...e,className:r()("bulkWorkflow-page",e.className)})}function Main(e){return s.createElement("div",{...e,className:r()("bulkWorkflow-main",e.className)})}function Pane(e){return s.createElement("div",{...o.default.omit(e,"header"),className:r()("bulkWorkflow-pane",e.className)},e.header&&s.createElement("div",{className:"bulkWorkflow-pane-header"},e.header),s.createElement("div",{className:"bulkWorkflow-pane-content"},e.children))}function ErrorMessages(e){return s.createElement("div",{...e,className:r()("bulkWorkflow-errors-and-warnings",e.className)})}function ErrorMessage(e){return s.createElement("div",{className:"bulkWorkflow-error"},s.createElement(d.Z,{icon:"exclamation",className:"bulkWorkflow-error-icon"}),s.createElement("span",{className:"bulkWorkflow-error-msg"},e.children))}function Warnings(e){return s.createElement("div",{...e,className:r()("bulkWorkflow-errors-and-warnings",e.className)})}function Warning(e){return s.createElement("div",null,s.createElement(d.Z,{icon:"warning",className:(0,a.iv)(u.warningIcon)}),s.createElement("span",{className:(0,a.iv)(u.warningMessage)},e.children))}function SuccessMessage(e){return s.createElement("div",null,s.createElement(d.Z,{icon:"check",className:(0,a.iv)(u.successIcon)}),s.createElement("span",{className:(0,a.iv)(u.successMessage)},e.children))}function Label(e){return s.createElement("label",{...o.default.omit(e,"allCaps"),className:r()({"bulkWorkflow-label--allCaps":e.allCaps},e.className)})}Label.defaultProps={allCaps:!1}
const u=a.mM.create({headerWrapper:{display:"flex"},headerOptions:{marginLeft:20},navItem:{":hover":{border:`1px solid ${c.t0}`}},errorIcon:{color:c.JF},errorIconInvisible:{visibility:"hidden"},navButtonWrapper:{margin:"15px 0px"},removeBtn:{color:c.TG,":hover":{color:c.JF}},warningIcon:{color:c.ud,marginRight:"4px",verticalAlign:"middle"},warningMessage:{verticalAlign:"middle"},successIcon:{color:c.ZA,marginRight:"4px",verticalAlign:"middle"},successMessage:{verticalAlign:"middle"}})},40563:(e,t,n)=>{n.d(t,{Cq:()=>c,Kb:()=>s,h8:()=>o})
var a=n(602652),i=n(227887),r=n(497790)
const s="BULK_ANTIBODY_SCREEN"
var o
!function(e){e.BULK_TRANSLATION="BULK_TRANSLATION"
e.BULK_ANTIBODY="BULK_ANTIBODY"}(o||(o={}))
const l=a.shape({tagSchemaField:r.SCHEMA_FIELD_SHAPE.isRequired,files:a.arrayOf(i.i2.isRequired).isRequired}),c=a.shape({step:a.oneOf(Object.values(o)).isRequired,tagSchemaId:a.string,antibodyNamePrefix:a.string.isRequired,outputFolderId:a.string,bioentityLinkSpecs:a.arrayOf(l.isRequired).isRequired,inputFiles:a.arrayOf(i.i2.isRequired).isRequired,inputFilesLoading:a.bool.isRequired,isCreating:a.bool.isRequired})},838677:(e,t,n)=>{n.d(t,{Af:()=>updateSlot,BA:()=>setPrimerWorklistFormType,Cy:()=>setFragmentWorklistId,DQ:()=>setTopology,ES:()=>getWorklistOrFolderAction,Em:()=>resetSchemaFields,Eu:()=>setSequenceFolderId,Gu:()=>validate,HF:()=>resetSlotDataSource,Ho:()=>setSequenceWorklistFormType,KO:()=>setPrimerFolderId,LH:()=>setFragmentWorklistFormType,N:()=>setNewFragmentWorklistInfo,OA:()=>runAssembly,Qe:()=>setNewPrimerWorklistInfo,R6:()=>setSlotDataSource,ac:()=>removeSlot,ai:()=>setUsePrimerWorklist,au:()=>transitionToPreviousSlot,bU:()=>activateStep,dl:()=>setUseFragmentWorklist,ep:()=>setPrimerWorklistId,gK:()=>setSequenceWorklistId,gY:()=>setFragmentFolderId,ii:()=>addSlot,k2:()=>transitionToNextSlot,l2:()=>setUseSequenceWorklist,lV:()=>setTagSchemaId,mc:()=>reset,oe:()=>updateDataSource,wX:()=>setNewSequenceWorklistInfo})
var a=n(787004),i=n(294120),r=n(776065),s=n(947730),o=n(924768),l=n(408783),c=n(782649),d=n(826478),u=n(974913),m=n(87209),p=n(771398),h=n(145007),E=n(825309),S=n(140474),T=n(891728),g=n(746312)
const f=(0,h.Z)((async()=>{const e=g.Z.getAssembly()
try{const t=await T.Gu(e)
s.Z.dispatch({actionType:a.UK0,assembly:e,summary:t})}catch(t){if(!p.d0(t))throw t
u.ZP.notifyError(t)
s.Z.dispatch({actionType:a.YKb,assembly:e})}}),2e3)
function validate(){s.Z.dispatch({actionType:a.F0Q})
f()}function setTopology(e){s.Z.dispatch({actionType:a.f64,topology:e})
validate()}function addSlot(){s.Z.dispatch({actionType:a.lH4})
validate()}function setSlotDataSource(e,t){s.Z.dispatch({actionType:a.NXc,slotIdx:e,dataSourceId:t})
validate()}function updateSlot(e,t){s.Z.dispatch({actionType:a.cln,slotIdx:e,updates:t})
validate()}function removeSlot(e){s.Z.dispatch({actionType:a.rFs,slotIdx:e})
validate()}function transitionToNextSlot(){s.Z.dispatch({actionType:a.eOY})}function transitionToPreviousSlot(){s.Z.dispatch({actionType:a.hp9})}function updateDataSource(e,t){s.Z.dispatch({actionType:a.zDY,dataSourceId:e,updates:t})
validate()}function activateStep(e){s.Z.dispatch({actionType:a.ysr,slotIdx:e})}function resetSlotDataSource(e,t){s.Z.dispatch({actionType:a.jf_,slotIdx:e,dataSourceType:t})
validate()}function setSequenceFolderId(e){s.Z.dispatch({actionType:a.TLb,folderId:e})}function setPrimerFolderId(e){s.Z.dispatch({actionType:a.Zx_,folderId:e})}function setFragmentFolderId(e){s.Z.dispatch({actionType:a.rPS,folderId:e})}function setTagSchemaId(e){s.Z.dispatch({actionType:a.S1t,tagSchemaId:e})
validate()}function resetSchemaFields(){s.Z.dispatch({actionType:a.UIB})}function setUseSequenceWorklist(e){s.Z.dispatch({actionType:a.AsR,useWorklist:e})}function setUsePrimerWorklist(e){s.Z.dispatch({actionType:a.SBb,useWorklist:e})}function setUseFragmentWorklist(e){s.Z.dispatch({actionType:a.C5z,useWorklist:e})}function setSequenceWorklistFormType(e){s.Z.dispatch({actionType:a.KAU,newOrExisting:e})}function setPrimerWorklistFormType(e){s.Z.dispatch({actionType:a.lPQ,newOrExisting:e})}function setFragmentWorklistFormType(e){s.Z.dispatch({actionType:a.A2F,newOrExisting:e})}function setNewSequenceWorklistInfo(e){s.Z.dispatch({actionType:a.VwH,newWorklistInfo:e})}function setNewPrimerWorklistInfo(e){s.Z.dispatch({actionType:a.pbN,newWorklistInfo:e})}function setNewFragmentWorklistInfo(e){s.Z.dispatch({actionType:a.oru,newWorklistInfo:e})}function setSequenceWorklistId(e){s.Z.dispatch({actionType:a.xfN,existingWorklistId:e})}function setPrimerWorklistId(e){s.Z.dispatch({actionType:a.kkc,existingWorklistId:e})}function setFragmentWorklistId(e){s.Z.dispatch({actionType:a.wsz,existingWorklistId:e})}function reset(){s.Z.dispatch({actionType:a.qUk})
validate()}function getWorklistOrFolderAction(e,t){return{actionText:"Open "+(e?"worklist":"folder"),onActionClick:()=>{o.RM()
if(e){(0,S.vS)(e);(0,l.s0)(i.SA.WORKLIST_ITEMS)}else r.Z.openFile(t)}}}async function runAssembly(){const e=g.Z.getAssembly()
s.Z.dispatch({actionType:a.e2W})
try{m.$Z("Running assembly")
const{worklistSummary:t,primerWorklistSummary:n}=await T.OA(e)
t&&(0,E.Dl)({[t.id]:t})
n&&(0,E.Dl)({[n.id]:n})
m.Cp()
c.M({type:d.pC.INFO,message:"Bulk assembly completed.",duration:0,actions:[getWorklistOrFolderAction(t,e.sequenceSaveInformation.targetFolderId),{actionText:"Create New Assembly",onActionClick:()=>{s.Z.dispatch({actionType:a.viz})}}],onClose(){s.Z.dispatch({actionType:a.qUk})},skipCloseCallbackOnActions:!0})
s.Z.dispatch({actionType:a.MeZ})}catch(e){m.Cp()
if(!p.d0(e))throw e
u.ZP.notifyError(e,{id:"BulkAssemblyActions.runAssembly"})
s.Z.dispatch({actionType:a.D4T})}}},826242:(e,t,n)=>{n.d(t,{Dq:()=>E,KP:()=>p,Mm:()=>l,Q5:()=>g,Qn:()=>S,YZ:()=>u,ZG:()=>C,Zf:()=>y,fC:()=>h,gz:()=>f,iP:()=>R,ni:()=>d,rs:()=>m,v4:()=>_,wI:()=>T,ye:()=>c,zY:()=>a})
var a,i=n(602652),r=n(459830),s=n(62315),o=n(124640)
!function(e){e.ASSEMBLED_SEQUENCES="ASSEMBLED_SEQUENCES"
e.GIBSON_PRIMERS="GIBSON_PRIMERS"
e.FRAGMENTS="FRAGMENTS"}(a||(a={}))
const l={[a.ASSEMBLED_SEQUENCES]:"assembled sequences",[a.GIBSON_PRIMERS]:"primers",[a.FRAGMENTS]:"fragments"}
var c,d
!function(e){e.FOLDERS="FOLDERS"
e.WORKLIST="WORKLIST"
e.OTHER_SLOT="OTHER_SLOT"}(c||(c={}))
!function(e){e.SUCCESS="SUCCESS"
e.FAILURE="FAILURE"
e.UNFINALIZED="UNFINALIZED"
e.PENDING_ADJACENT="PENDING_ADJACENT"}(d||(d={}))
const u="BULK_ASSEMBLY_SCREEN",m={UNASSEMBLED:"UNASSEMBLED",VALIDATING:"VALIDATING",VALIDATED:"VALIDATED",UNVALIDATED:"UNVALIDATED",ASSEMBLING:"ASSEMBLING",ASSEMBLED:"ASSEMBLED"}
var p
!function(e){e.ENZYME="ENZYME"
e.HOMOLOGY="HOMOLOGY"
e.GIBSON="GIBSON"
e.CONCATENATION="CONCATENATION"}(p||(p={}))
const h=[m.ASSEMBLING,m.ASSEMBLED],E=-1,S=(s.Vm.TYPES,s.EF.IS_ONE_OF,r.SEQUENCE,r.OLIGO,{level:"read",includeHiddenProjects:!1,showInventory:!0,showNotebook:!1,showRegistries:!0}),T={[p.ENZYME]:"Enzyme",[p.HOMOLOGY]:"Homology",[p.GIBSON]:"Gibson",[p.CONCATENATION]:"Concatenation"},g={[p.ENZYME]:"Attach at a unique enzyme site",[p.HOMOLOGY]:"Attach at an existing shared homology region",[p.GIBSON]:"Create primers using the Gibson protocol",[p.CONCATENATION]:"Concatenate two fragments"},f={[p.ENZYME]:"enzyme",[p.HOMOLOGY]:"homology",[p.GIBSON]:o.m.PrimerPair,[p.CONCATENATION]:"concatenation"},I=i.shape({id:i.string.isRequired,fileIds:i.arrayOf(i.string.isRequired).isRequired}),A=i.shape({slotParams:i.shape({endpoints:i.arrayOf(i.shape({type:i.string.isRequired,enzymeId:i.number,bases:i.string})).isRequired,name:i.string.isRequired,schemaFieldId:i.string,useLargerFragment:i.bool.isRequired,useReverse:i.bool.isRequired}),dataSourceId:i.string.isRequired}),y=i.shape({id:i.string.isRequired,dataSources:i.arrayOf(I.isRequired).isRequired,slots:i.arrayOf(A).isRequired,meta:i.shape({activeSlotIndex:i.number.isRequired,state:i.oneOf(Object.values(m)).isRequired,summary:i.shape({numOutputSequences:i.number.isRequired,slots:i.arrayOf(i.shape({errors:i.arrayOf(i.string.isRequired),sequences:i.arrayOf(i.shape({name:i.string.isRequired,error:i.string,fivePrimeSticky:i.string,threePrimeSticky:i.string,length:i.number,fivePrimeOverlap:i.string,threePrimeOverlap:i.string}).isRequired).isRequired}).isRequired).isRequired})})}),_="The following issues will not prevent you from performing the assembly, but may prevent you from registering your assembled sequences.",C=10,R={tmAnneal:50,tmWhole:60,tmDiff:5,minOverlap:20,maxOverlap:20+C}},891728:(e,t,n)=>{n.d(t,{Gu:()=>validate,HC:()=>detectHomology,OA:()=>runAssembly})
var a=n(767807),i=n.n(a),r=n(551705),s=n(434202),o=n(432128),l=n(379346),c=n(771398),d=n(8747),u=n(826242)
async function convertToJSON(e){const t=e.dataSources.map((async e=>{const t=e.fileIds.filter((e=>l.ZP.isFolder(e)))
return[...e.fileIds.filter((e=>!l.ZP.isFolder(e))),...(await r.Z.getNestedDnaSequencesAndOligos(t)).sequenceIds]})),n=await Promise.all(t),a=o.Z.get(s.BO.GIBSON_PARAMETERS)
return i()(e,{slots:{$apply:e=>e.map((e=>({...e,slotParams:{...e.slotParams,endpoints:e.slotParams.endpoints.map((e=>e.type===u.KP.GIBSON?{...e,gibsonOptions:a}:e))}})))},dataSources:{$apply:e=>e.map(((e,t)=>({id:e.id,sequenceIds:n[t]})))},meta:{$set:void 0}})}async function validate(e){const t=await convertToJSON(e)
return c.s0({url:"/1/api/bulk-workflows/assembly/validate",data:{assembly:t}})}async function detectHomology(e,t){const n=await convertToJSON(e)
return d.s0({url:"/1/api/bulk-workflows/assembly:detect-homology",data:{assembly:n,options:t}})}async function runAssembly(e){const t=await convertToJSON(e)
return d.s0({url:"/1/api/bulk-workflows/assembly/run",data:{assembly:t}})}},470294:(e,t,n)=>{n.d(t,{$q:()=>canGoToPreviousSlot,AN:()=>getNextSlotIdx,Ap:()=>getSlotIndicesForDataSource,BN:()=>S,ER:()=>getPreviousSlotIdx,FU:()=>getErrors,MC:()=>getSuggestedEnzymes,Nc:()=>getSlotName,OH:()=>createAssembly,Qm:()=>getSuggestedHomologyBases,Rb:()=>getSlotNames,Uo:()=>getSlotErrors,Xn:()=>getDataSourceForSlot,Zu:()=>isGibsonAssembly,bO:()=>getDefaultEndpointArgs,h1:()=>slotsWithGibsonPrimerErrors,i3:()=>slotHasSequences,kO:()=>getSlotFragmentColor,zg:()=>cloneAssembly})
var a=n(64558),i=n(767807),r=n.n(i),s=n(531041),o=n(232606),l=n(812651),c=n(467607),d=n(921554),u=n(730216),m=n(808844),p=n(317275),h=n(117170),E=n(826242)
function sanitizeAssembly(e){const t=s.default.groupBy(e.slots,"dataSourceId")
return r()(e,{dataSources:{$apply:e=>e.filter((({id:e})=>e in t))},meta:{activeSlotIndex:{$set:e.meta.activeSlotIndex===E.Dq?E.Dq:Math.min(e.meta.activeSlotIndex,e.slots.length-1)}}})}function createDataSource(){return{id:s.default.uniqueId("bulkAssembly-ds"),fileIds:[]}}function updateAssemblyState(e,t,n={}){return r()(e,{meta:{$merge:{state:t,...n}}})}const S={setTopology(e,t){const n={...e,topology:t}
return this.updateSlotNames(n)},resetSchemaFields:e=>sanitizeAssembly(s.default.reduce(e.slots,((e,t,n)=>r()(e,{slots:{[n]:{slotParams:{$merge:{schemaFieldId:null}}}}})),e)),resetSlotDataSource(e,t,n){const a=createDataSource()
return sanitizeAssembly(r()(e,{dataSources:{$push:[a]},slots:{[t]:{$merge:{dataSourceId:a.id,dataSourceType:n}}}}))},setSlotDataSource:(e,t,n)=>sanitizeAssembly(r()(e,{slots:{[t]:{$merge:{dataSourceId:n}}}})),updateSlotNames(e){let t=e
e.slots.forEach(((n,a)=>{t=this.updateSlot(t,a,{name:getSlotName(e,a)})}))
return t},addSlot(e,{activate:t=!0,useLargerFragment:n=!1}={}){const a=createDataSource(),i=function createSlot({dataSourceId:e,slotName:t,useLargerFragment:n}){return{slotParams:{endpoints:[getDefaultEndpointArgs(E.KP.ENZYME),getDefaultEndpointArgs(E.KP.ENZYME)],useLargerFragment:n,useReverse:!1,schemaFieldId:null,name:t},dataSourceId:e,dataSourceType:E.ye.FOLDERS}}({dataSourceId:a.id,useLargerFragment:n,slotName:getSlotName(e,e.slots.length)})
let s=r()(e,{dataSources:{$push:[a]},slots:{$push:[i]}})
s=this.updateSlotNames(s)
t&&(s=S.activateStep(s,s.slots.length-1))
return s},removeSlot(e,t){let n=r()(e,{slots:{$splice:[[t,1]]}})
n=this.updateSlotNames(n);(0,o.hu)(n.slots.length>0,"Only slot was removed from assembly")
return sanitizeAssembly(n)},nextSlot(e){const t=e.meta.activeSlotIndex,n=t===e.slots.length-1?E.Dq:t+1
return r()(e,{meta:{activeSlotIndex:{$set:n}}})},previousSlot(e){(0,o.hu)(canGoToPreviousSlot(e),"Cannot go to previous slot, see canGoToPreviousSlot")
const t=e.meta.activeSlotIndex,n=t===E.Dq?e.slots.length-1:t-1
return r()(e,{meta:{activeSlotIndex:{$set:n}}})},updateSlot:(e,t,n)=>sanitizeAssembly(r()(e,{slots:{[t]:{slotParams:{$merge:n}}}})),updateDataSource(e,t,n){return r()(e,{dataSources:(a=t,i={$merge:(0,p.Z)(n,"fileIds")},{$apply:e=>e.map((e=>e.id!==a?e:r()(e,i)))})})
var a,i},activateStep:(e,t)=>r()(e,{meta:{activeSlotIndex:{$set:t}}}),updateForRun:e=>updateAssemblyState(e,E.rs.ASSEMBLING),updateForCompletedRun:e=>updateAssemblyState(e,E.rs.ASSEMBLED),updateForFailedRun:e=>updateAssemblyState(e,E.rs.VALIDATED),setTagSchemaId:(e,t)=>r()(e,{$merge:{tagSchemaId:t}}),setUseSequenceWorklist:(e,t)=>t?r()(e,{sequenceSaveInformation:{$merge:{worklistParams:T}}}):r()(e,{sequenceSaveInformation:{$merge:{worklistParams:null}}}),setUsePrimerWorklist:(e,t)=>t?r()(e,{primerSaveInformation:{$merge:{worklistParams:T}}}):r()(e,{primerSaveInformation:{$merge:{worklistParams:null}}}),setUseFragmentWorklist:(e,t)=>t?r()(e,{fragmentSaveInformation:{$merge:{worklistParams:T}}}):r()(e,{fragmentSaveInformation:{$merge:{worklistParams:null}}}),setSequenceWorklistId:(e,t)=>r()(e,{sequenceSaveInformation:{worklistParams:{$merge:{targetWorklistId:t}}}}),setPrimerWorklistId:(e,t)=>r()(e,{primerSaveInformation:{worklistParams:{$merge:{targetWorklistId:t}}}}),setFragmentWorklistId:(e,t)=>r()(e,{fragmentSaveInformation:{worklistParams:{$merge:{targetWorklistId:t}}}}),setNewSequenceWorklistInfo:(e,t)=>r()(e,{sequenceSaveInformation:{worklistParams:{$merge:{newWorklistInfo:t}}}}),setNewPrimerWorklistInfo:(e,t)=>r()(e,{primerSaveInformation:{worklistParams:{$merge:{newWorklistInfo:t}}}}),setNewFragmentWorklistInfo:(e,t)=>r()(e,{fragmentSaveInformation:{worklistParams:{$merge:{newWorklistInfo:t}}}}),setSequenceWorklistFormType:(e,t)=>r()(e,{sequenceSaveInformation:{worklistParams:{$merge:{worklistFormType:t,newWorklistInfo:null,targetWorklistId:null}}}}),setPrimerWorklistFormType:(e,t)=>r()(e,{primerSaveInformation:{worklistParams:{$merge:{worklistFormType:t,newWorklistInfo:null,targetWorklistId:null}}}}),setFragmentWorklistFormType:(e,t)=>r()(e,{fragmentSaveInformation:{worklistParams:{$merge:{worklistFormType:t,newWorklistInfo:null,targetWorklistId:null}}}}),setSequenceFolderId:(e,t)=>r()(e,{sequenceSaveInformation:{$merge:{targetFolderId:t}}}),setPrimerFolderId:(e,t)=>r()(e,{primerSaveInformation:{$merge:{targetFolderId:t}}}),setFragmentFolderId:(e,t)=>r()(e,{fragmentSaveInformation:{$merge:{targetFolderId:t}}}),updateForValidation:e=>updateAssemblyState(e,E.rs.VALIDATING),updateForCompletedValidation:(e,t)=>updateAssemblyState(e,E.rs.VALIDATED,{summary:t}),updateForFailedValidation:e=>updateAssemblyState(e,E.rs.UNVALIDATED,{summary:null})}
function createAssembly(){let e={id:s.default.uniqueId("bulkAssembly"),dataSources:[],slots:[],meta:{activeSlotIndex:0,state:E.rs.UNASSEMBLED,summary:null},topology:c.JH.CIRCULAR,sequenceSaveInformation:(0,u.Z)(g),primerSaveInformation:(0,u.Z)(g),fragmentSaveInformation:(0,u.Z)(g)}
e=S.addSlot(e,{activate:!1,useLargerFragment:!0})
e=S.addSlot(e,{activate:!1})
return e}const T={newWorklistInfo:null,targetWorklistId:null,worklistFormType:h.mR.EXISTING},g={worklistParams:null}
function cloneAssembly(e){return{id:s.default.uniqueId("bulkAssembly"),dataSources:e.dataSources.map((e=>({id:e.id,fileIds:[]}))),slots:e.slots.map((e=>({dataSourceId:e.dataSourceId,dataSourceType:e.dataSourceType,slotParams:{...e.slotParams}}))),meta:{activeSlotIndex:0,state:E.rs.UNASSEMBLED,summary:null},tagSchemaId:e.tagSchemaId,topology:e.topology,sequenceSaveInformation:(0,u.Z)(g),primerSaveInformation:(0,u.Z)(g),fragmentSaveInformation:(0,u.Z)(g)}}function canGoToPreviousSlot(e){return 0!==e.meta.activeSlotIndex}function getSlotIndicesForDataSource(e,t,n=null){return e.slots.map(((e,t)=>[e,t])).filter((([e,a])=>(null==n||a!==n)&&e.dataSourceId===t.id)).map((([e,t])=>t))}function getDataSourceForSlot(e,t){const n=s.default.findWhere(e.dataSources,{id:e.slots[t].dataSourceId});(0,o.hu)(Boolean(n),"Did not find data source for given slot")
return n}function slotHasSequences(e,t){if(null===t)return!1
return getDataSourceForSlot(e,t).fileIds.length>0}function getNextSlotIdx(e,t){return t+1<e.slots.length?t+1:e.topology===c.JH.CIRCULAR?0:null}function getPreviousSlotIdx(e,t){return t-1>=0?t-1:e.topology===c.JH.CIRCULAR?e.slots.length-1:null}function getDefaultEndpointArgs(e){switch(e){case E.KP.ENZYME:return{type:e,enzymeId:null}
case E.KP.HOMOLOGY:return{type:e,bases:""}
case E.KP.CONCATENATION:case E.KP.GIBSON:return{type:e,bases:null,position:0}
default:throw new Error(`Unexpected endpointType: ${e}`)}}function getSlotFragmentColor(e,t){const n=e.slots[t].dataSourceId
let a=t
for(let t=0;t<e.slots.length;t++)if(e.slots[t].dataSourceId===n){a=t
break}return d.vx[a%d.vx.length]}function getSlotName(e,t){const n=e.topology===c.JH.CIRCULAR,a=[]
for(let i=0;i<e.slots.length;i++)0===i&&n?i===t&&a.push(i):a.push(i)
const i=0===t&&n?"Backbone":"Insert"
return n&&0===t?i:n&&e.slots.length>2||!n&&e.slots.length>1?`${i} ${a.indexOf(t)+1}`:i}function getSlotNames(e,t){return(0,m.Dw)(t.map((t=>getSlotName(e,t))))}function getDataSourceErrors(e,t){const n=[],a=s.default.findWhere(e.dataSources,{id:t}),i=getSlotNames(e,getSlotIndicesForDataSource(e,a))
a&&0!==a.fileIds.length||n.push(`No sequences specified for ${i}.`)
return n}function areBasesValid(e){return Boolean(e&&l.util.isValidSequence(e,l.util.NucleotideType.DNA))}function isEndpointValid(e){if(e.type===E.KP.ENZYME&&null==e.enzymeId)return!1
if(e.type===E.KP.HOMOLOGY&&!areBasesValid(e.bases))return!1
if(e.type===E.KP.CONCATENATION){if(areBasesValid(e.bases)===(null!=e.position&&e.position>=0))return!1}return!0}function getSlotErrorsWithoutDataSourceErrors(e,t){const n=[],a=e.slots[t],i=getSlotName(e,t)
isEndpointValid(a.slotParams.endpoints[0])||n.push(`Fragment end #1 is invalid for ${i}.`)
isEndpointValid(a.slotParams.endpoints[1])||n.push(`Fragment end #2 is invalid for ${i}.`)
const r=function getSlotSummary(e,t){return e.meta.summary?e.meta.summary.slots[t]:null}(e,t)
if(r){const e=r.sequences.filter((({error:e})=>e)).length
1===e?n.push(`There is ${e} sequence error for ${i}.`):e>1&&n.push(`There are ${e} sequence errors for ${i}.`)
n.push(...r.errors)}const o=s.default.findWhere(e.dataSources,{id:a.dataSourceId})
o&&o.fileIds.length&&0===n.length&&r&&0===r.sequences.length&&e.meta.state!==E.rs.VALIDATING&&n.push(`No sequences found for ${i}.`)
return n}function getSlotErrors(e,t){const n=[],a=e.slots[t]
n.push(...getSlotErrorsWithoutDataSourceErrors(e,t))
n.push(...getDataSourceErrors(e,a.dataSourceId))
return n}function getWorklistParamsErrors(e,t){const n=[],a=E.Mm[t]
if(e.worklistFormType===h.mR.EXISTING){null!=e.newWorklistInfo&&n.push(`Cannot add ${a} to both an existing worklist and a new worklist.`)
null==e.targetWorklistId&&n.push(`A target worklist for ${a} is required.`)}else{null!=e.targetWorklistId&&n.push(`Cannot add ${a} to both an existing worklist and a new worklist.`)
null!=e.newWorklistInfo&&e.newWorklistInfo.name||n.push(`A worklist name for ${a} is required.`)}return n}function getErrors(e){var t,n,a
const i=(null===(t=e.meta.summary)||void 0===t?void 0:t.errors)?[...e.meta.summary.errors]:[]
e.dataSources.length<=1&&i.push("At least 2 sets of sequences are needed to perform assembly.")
e.dataSources.forEach((t=>{i.push(...getDataSourceErrors(e,t.id))}))
e.slots.forEach(((t,n)=>{i.push(...getSlotErrorsWithoutDataSourceErrors(e,n))}))
e.sequenceSaveInformation.targetFolderId||i.push("A target folder is required.")
isGibsonAssembly(e)&&!e.primerSaveInformation.targetFolderId&&i.push("A target folder for primers is required.")
!(null===(n=e.fragmentSaveInformation.worklistParams)||void 0===n?void 0:n.targetWorklistId)&&!(null===(a=e.fragmentSaveInformation.worklistParams)||void 0===a?void 0:a.newWorklistInfo)||e.fragmentSaveInformation.targetFolderId||i.push("When adding fragments to a worklist, a target folder for fragments is also required.")
null!=e.sequenceSaveInformation.worklistParams&&i.push(...getWorklistParamsErrors(e.sequenceSaveInformation.worklistParams,E.zY.ASSEMBLED_SEQUENCES))
null!=e.primerSaveInformation.worklistParams&&i.push(...getWorklistParamsErrors(e.primerSaveInformation.worklistParams,E.zY.GIBSON_PRIMERS))
null!=e.fragmentSaveInformation.worklistParams&&i.push(...getWorklistParamsErrors(e.fragmentSaveInformation.worklistParams,E.zY.FRAGMENTS))
return i}function getOtherEndpointsWithType(e,t,n){const a=[]
e.slots.forEach(((i,r)=>{for(const s of i.slotParams.endpoints)if(r!==t&&s.type===n){const t={...s,slotName:getSlotName(e,r)}
a.push(t)}}))
return a}function getSuggestedEnzymes(e,t,n){const a=e.slots[t].slotParams.endpoints[n],i=getOtherEndpointsWithType(e,t,E.KP.ENZYME).filter((e=>Boolean(e.enzymeId)&&e.enzymeId!==a.enzymeId))
return s.default.uniq(i,(e=>e.enzymeId))}function getSuggestedHomologyBases(e,t,n){const a=e.slots[t].slotParams.endpoints[n],i=getOtherEndpointsWithType(e,t,E.KP.HOMOLOGY).filter((e=>Boolean(e.bases)&&e.bases!==a.bases))
return s.default.uniq(i,(e=>e.bases))}function isGibsonAssembly(e){return s.default.any(e.slots.flatMap((e=>e.slotParams.endpoints)).map((e=>e.type)),(e=>e===E.KP.GIBSON))}function slotsWithGibsonPrimerErrors(e){return null==e.meta.summary?[]:(0,a.oA)(e.slots.map(((t,n)=>{var a
return s.default.any(t.slotParams.endpoints,(e=>e.type===E.KP.GIBSON))&&(null===(a=e.meta.summary.slots[n])||void 0===a?void 0:a.gibsonStatus)===E.ni.FAILURE?n:null})))}},615109:(e,t,n)=>{n.d(t,{Im:()=>l,Yc:()=>s})
var a=n(602652),i=n(227887),r=n(497790)
const s="BULK_TRANSLATION_SCREEN",o=a.shape({tagSchemaField:r.SCHEMA_FIELD_SHAPE.isRequired,firstCodonAnnotationName:a.string.isRequired,firstCodonOffset:a.number.isRequired}),l=a.shape({sequenceTagSchemaId:a.string,selectedIds:a.arrayOf(a.string.isRequired).isRequired,translationSpecs:a.arrayOf(o.isRequired).isRequired,outputFolderId:a.string,sequences:a.arrayOf(i.i2.isRequired).isRequired,sequencesLoading:a.bool.isRequired,isRunning:a.bool.isRequired,errors:a.arrayOf(a.string.isRequired).isRequired})},213454:(e,t,n)=>{n.d(t,{EE:()=>d,GQ:()=>isCalendarFile,H6:()=>getCalendarItemProject,KW:()=>c,M4:()=>isCalendarRequest,Mn:()=>isCalendarProcessTask,Zx:()=>getCalendarItemProjectId,oi:()=>isCalendarProject,uB:()=>l,wr:()=>u,xk:()=>m})
var a=n(602652),i=n.n(a),r=n(500147),s=n(379346),o=n(544192)
const l="MONTH_VIEW",c="WEEK_VIEW",d="DAY_VIEW"
var u
!function(e){e.MONTH_VIEW="MONTH_VIEW"
e.WEEK_VIEW="WEEK_VIEW"
e.DAY_VIEW="DAY_VIEW"}(u||(u={}))
const m={PREFERRED_CALENDAR_VIEW:"preferredCalendarView"}
function isCalendarFile(e){return s.ZP.isFolderItem(e.id)}function isCalendarRequest(e){return s.ZP.isRequest(e.id)}function isCalendarProcessTask(e){return s.ZP.isProcessTask(e.id)}function isCalendarProject(e){return s.ZP.isSource(e.id)}function getCalendarItemProject(e){var t
return isCalendarProcessTask(e)?e.process.folder.sourceJson:null!==(t=e.source)&&void 0!==t?t:null}function getCalendarItemProjectId(e){var t,n
return null!==(n=null===(t=getCalendarItemProject(e))||void 0===t?void 0:t.id)&&void 0!==n?n:null}const p=i().shape({...r.Z,scheduledOn:i().object.isRequired,source:o._f})
i().objectOf(i().arrayOf(p)),i().oneOfType([i().shape({id:i().string.isRequired,name:i().string.isRequired,collaborators:i().array,source:i().object}),p])},585624:(e,t,n)=>{n.d(t,{Bv:()=>v,ZP:()=>P})
var a=n(64558),i=n(512902),r=n(767807),s=n.n(r),o=n(250965),l=n.n(o),c=n(536105),d=n.n(c),u=n(531041),m=n(841996),p=n(232606),h=n(675649),E=n(213454),S=n(787004),T=n(459830),g=n(572928),f=n(465428),I=n(947730),A=n(391028),y=n(974913),_=n(432128),C=n(379346),R=n(348049),N=n(449108)
const{PROJECT_TYPE:O}=g
function checkMomentType(e,t,n,a){return e||null!=t[n]?d().isMoment(t[n])?null:new Error(`Expected ${n} to be a moment object`):null}const b=checkMomentType.bind(null,!1)
b.isRequired=checkMomentType.bind(null,!0)
const v=b
function filterItemsByProject(e,t,n){null==n&&(n=!0)
const a=u.default.object(t.map((e=>[e,!0])))
return u.default.mapObject(e,(e=>e.filter((e=>{const t=(0,E.Zx)(e),i=null!=t&&a[t]
return(n||C.ZP.apiIdToType(e.id)!==T.ENTRY)&&!i}))))}class CalendarStore extends A.Z{_resetTodayInterval(){const e=n(345640).Z
null!=this._intervalId&&clearInterval(this._intervalId)
this._intervalId=setInterval(e.updateToday,6e4)}resetState(){this._resetTodayInterval()
this.currentView=_.Z.get(E.xk.PREFERRED_CALENDAR_VIEW)||E.wr.DAY_VIEW
this.visibleDate=d()()
this.hiddenProjectIds=[]
this.hiddenMemberIds=[]
this.entries={}
this.files={}
this.requests={}
this.processTasks={}
this.today=this._makeToday()
this.interact={}
this._outboundRequests=0
this._entryRequests={}}_makeToday(){return d()().startOf("day")}_periodRange(){const e=this.visibleDate.clone(),t=this.visibleDate.clone()
switch(this.currentView){case E.wr.MONTH_VIEW:e.startOf("month")
t.startOf("month").add(1,"months")
break
case E.wr.WEEK_VIEW:e.startOf("week")
t.startOf("week").add(2,"weeks")
break
case E.wr.DAY_VIEW:e.startOf("day")
t.startOf("day").add(1,"days")
break
default:throw Error("Unexpected CalendarView")}return[e,t]}getCurrentView(){return this.currentView}getViewLabel(){const[e,t]=this._periodRange(),n=t.clone().subtract(1,"days")
switch(this.currentView){case E.wr.MONTH_VIEW:return e.format("MMMM YYYY")
case E.wr.WEEK_VIEW:return`${e.format("MMM D, YYYY")} - ${n.format("MMM D, YYYY")}`
case E.wr.DAY_VIEW:return e.format("MMM D, YYYY")
default:throw Error("Unexpected CalendarView")}}getViewRange(){const[e,t]=this._periodRange()
if(this.currentView===E.wr.MONTH_VIEW){e.startOf("week")
t.startOf("week").add(1,"weeks")}return[e,t]}getVisibleDate(){return this.visibleDate}getHiddenProjectIds(){return this.hiddenProjectIds}getHiddenMemberIds(){return this.hiddenMemberIds}getAllProjects(){const e=[],t={}
for(const n of[this.entries,this.files,this.requests])for(const a of Object.values(n))for(const n of a){const a=n.source
if(null!=a&&!t[a.id]&&a.sourceType===O){e.push(a)
t[a.id]=!0}}return e}getProjectColorMapping(){return R.ZP.getProjectColorMapping(this.getAllProjects())}getToday(){return this.today}getInteract(){return this.interact}isLoadingData(){return this._outboundRequests>0}getLayeredItems(){const e={...this.getEntries()}
Object.entries(this.getRequests()).forEach((([t,n])=>{null==e[t]&&(e[t]=[])
e[t].push(...n)}))
Object.entries(this.getProcessTasks()).forEach((([t,n])=>{null==e[t]&&(e[t]=[])
e[t].push(...n)}))
return this.layerItems(e)}getEntries(){return filterItemsByProject(this.entries,this.hiddenProjectIds)}getProcessTasks(){return filterItemsByProject(this.processTasks,this.hiddenProjectIds)}getRequests(){return filterItemsByProject(this.requests,this.hiddenProjectIds)}getFiles(){return filterItemsByProject(this.files,this.hiddenProjectIds)}getNonEntryFiles(){return filterItemsByProject(this.files,this.hiddenProjectIds,!1)}getProjects(){var e
const t={},n=this.getEntries(),a=this.getNonEntryFiles(),i=this.getRequests(),r=this.getProcessTasks(),o=u.default.union(Object.keys(n),Object.keys(a),Object.keys(i))
for(const l of o){const o=u.default.union(n[l],a[l],i[l],r[l])
for(const n of o){const a=(0,E.H6)(n)
if((null==a?void 0:a.sourceType)!==O||null!=u.default.findWhere(t[l],{id:null==a?void 0:a.id}))continue
const i=(0,E.M4)(n)||(0,E.Mn)(n)?[]:null===(e=n.source)||void 0===e?void 0:e.collaborators,r=u.default.union([null==a?void 0:a.s_owner],null!=i?i:[]),o=r.filter((({type:e})=>e===T.USER)).map((({id:e})=>e))
if(this.hiddenMemberIds.length>0&&0===u.default.difference(o,this.hiddenMemberIds).length)continue
const c=s()(a,{$merge:{collaborators:r,date:R.ZP.getItemDate(n)}})
t[l]?t[l].push(c):t[l]=[c]}}return t}getLayeredProjects(){return this.layerItems(this.getProjects())}layerItems(e){const t=function itemsInRange(e,t){const[n,i]=t,r=[],o=n.clone()
for(;o.isBefore(i);){const t=e[o.format("YYYY-MM-DD")]
null!=t&&r.push(...t)
o.add(1,"days")}const l=[],c=(0,a.vM)(r,(({id:e})=>e))
Object.values(c).forEach((e=>{let t=null
for(const n of u.default.sortBy(e,"date"))if(null!=t&&R.ZP.getItemDate(t).clone().add(R.ZP.getItemNumDays(t),"days").isSame(R.ZP.getItemDate(n)))t.numDays++
else{t=s()(n,{numDays:{$set:1}})
l.push(t)}}))
return u.default.sortBy(l,"date")}(e,this.getViewRange()),n=R.ZP.sortCalendarItems(t)
return(0,N.w)(n)}_updateCalendarEntryTask(e,t,n,a){const i=e.format("YYYY-MM-DD"),r=this.entries[i].findIndex((e=>e.id===t));(0,p.hu)(r>-1,`Could not find entry ${t} on ${i} in store.`)
const o=this.entries[i][r],l=o.entryTasks.findIndex((e=>e.notePartProvenanceId===n));(0,p.hu)(l>-1,`Could not find entry task ${r} in store.`)
const c=s()(o.entryTasks,{[l]:{$merge:{completed:a}}}),d=s()(this.entries[i],{[r]:{$merge:{entryTasks:c}}})
this.entries=s()(this.entries,{[i]:{$set:d}})}_queueActionForEntry(e,t,n,a,i){let r=this._entryRequests[e]
if(!r){r={xhr:null,count:0}
this._entryRequests[e]=r}r.count++
function handleError(e){"function"==typeof a&&a(e)
return l().Deferred().reject().promise()}r.xhr=l().when(r.xhr).then((()=>h.tP(t()).done(n).fail((e=>{y.ZP.notifyError(e)
handleError(e)}))),handleError).always((()=>{r.count--
0===r.count&&"function"==typeof i&&i()}))}_updateEntryTask({date:e,entryId:t,notePartProvenanceId:n,completed:i}){this._updateCalendarEntryTask(e,t,n,i)
const r=a.ZT
this._queueActionForEntry(t,(()=>f.qW({entryId:t,notePartProvenanceId:n,completed:i})),r,(()=>{this._updateCalendarEntryTask(e,t,n,!i)}),(function emptyQueueCallback(){m.Z.open(t)}))}payloadHandler(e){switch(e.actionType){case S.OGV:case S.O$N:case S.b8o:case S.YA9:this._outboundRequests++
this.emitChange()
break
case S.Y5B:{const t=(0,a.Xc)(e.entries,(e=>e.map((e=>s()(e,{date:{$set:d()(e.date)}})))))
this.entries=s()(this.entries,{$merge:t})
this._outboundRequests--
this.emitChange()
break}case S.uGT:this.processTasks=(0,i.Uy)(e.processTasks,(e=>({...this.processTasks,...e})))
this._outboundRequests--
this.emitChange()
break
case S.kVJ:{const t=(0,i.Uy)(e.requests,(e=>{for(const t of Object.keys(e))e[t]=e[t].map((e=>({...e,scheduledOn:d()(e.scheduledOn)})))
return e}))
this.requests=(0,i.Uy)(this.requests,(e=>({...e,...t})))
this._outboundRequests--
this.emitChange()
break}case S.DtT:case S.q9n:case S.g5h:case S.Twj:this._outboundRequests--
this.emitChange()
break
case S.eUJ:this.files=s()(this.files,{$merge:e.files})
this._outboundRequests--
this.emitChange()
break
case S.rL8:this._updateEntryTask(e)
this.emitChange()
break
case S.XZ5:this.interact=s()(this.interact,{$unset:["selectedCalendarItemDay"]})
this.emitChange()
break
case S.XeB:{const{itemId:t,date:n}=e;(0,R.Bq)(this.interact)&&this.interact.selectedCalendarItemDay.id===t&&n.isSame(this.interact.selectedCalendarItemDay.date)?this.interact=s()(this.interact,{$unset:["selectedCalendarItemDay"]}):this.interact=s()(this.interact,{selectedCalendarItemDay:{$set:{id:t,date:n}}})
this.emitChange()
break}case S.TTX:this.visibleDate=e.visibleDate
this.emitChange()
break
case S.bOw:this.currentView=e.view
_.Z.set(E.xk.PREFERRED_CALENDAR_VIEW,e.view)
this.emitChange()
break
case S.SJn:{const{projectId:t}=e,n=Array.from(this.hiddenProjectIds).includes(t)
this.hiddenProjectIds=n?this.hiddenProjectIds.filter((e=>e!==t)):this.hiddenProjectIds.concat([t])
this.emitChange()
break}case S.vhe:{const{memberIds:t,shouldHide:n}=e
this.hiddenMemberIds=n?u.default.union(this.hiddenMemberIds,t):u.default.difference(this.hiddenMemberIds,t)
this.emitChange()
break}case S.x0y:{const e=this._makeToday()
if(!e.isSame(this.today)){this.today=e
this.emitChange()}break}case S.md0:if((0,R.$d)(this.interact)){this.interact=s()(this.interact,{$merge:{mouseDownDate:e.date,mouseOverDate:e.date}})
this.emitChange()}break
case S.hmO:if((0,R.rf)(this.interact)&&e.date!==this.interact.mouseOverDate){this.interact=s()(this.interact,{mouseOverDate:{$set:e.date}})
this.emitChange()}break
case S.ntb:if([E.wr.MONTH_VIEW,E.wr.WEEK_VIEW].includes(this.currentView)&&(0,R.rf)(this.interact)){this.interact=s()(this.interact,{$merge:{mouseUpCoords:{x:e.x,y:e.y}}})
this.emitChange()}break
case S.PIX:this.interact=s()(this.interact,{$unset:["mouseDownDate","mouseOverDate","mouseUpCoords"]})
this.emitChange()}return!0}}const P=new CalendarStore(I.Z)},348049:(e,t,n)=>{n.d(t,{$d:()=>isInactiveInteraction,Bq:()=>isSelectedItemInteraction,UW:()=>isDragCompleteInteraction,ZP:()=>E,rf:()=>isDraggingInteraction})
var a=n(85758),i=n.n(a),r=n(536105),s=n.n(r),o=n(531041),l=n(232606),c=n(213454),d=n(921554),u=n(846114),m=n(281100),p=n(10584)
function isInactiveInteraction(e){return!(e.hasOwnProperty("mouseDownDate")||e.hasOwnProperty("mouseOverDate")||e.hasOwnProperty("mouseUpCoords")||e.hasOwnProperty("selectedCalendarItemDay"))}function isDraggingInteraction(e){return e.hasOwnProperty("mouseDownDate")&&e.hasOwnProperty("mouseOverDate")&&!e.hasOwnProperty("mouseUpCoords")&&!e.hasOwnProperty("selectedCalendarItemDay")}function isDragCompleteInteraction(e){return e.hasOwnProperty("mouseDownDate")&&e.hasOwnProperty("mouseOverDate")&&e.hasOwnProperty("mouseUpCoords")&&!e.hasOwnProperty("selectedCalendarItemDay")}function isSelectedItemInteraction(e){return!e.hasOwnProperty("mouseDownDate")&&!e.hasOwnProperty("mouseOverDate")&&!e.hasOwnProperty("mouseUpCoords")&&e.hasOwnProperty("selectedCalendarItemDay")}function addAvatarUrl(e){var t
return{...e,avatar_url:null!==(t=e.avatar_url)&&void 0!==t?t:m.O}}const h={isRangeOverlapping:(e,t,n,a)=>h.isDateBetween(e,n,a)||h.isDateBetween(t.clone().subtract(1,"days"),n,a)||h.isDateBetween(n,e,t)||h.isDateBetween(a.clone().subtract(1,"days"),e,t),isDateBetween:(e,t,n)=>e.isSame(t)||e.isBetween(t,n),getProjectColorAlternativeTint(e,t){const n=i().hsl(e),a=n.s+.2*t,r=1===a?1:(a-.2)%.8+.2
return i().hsl(n.h,r,n.l).toString()},getProjectColorMapping(e){const t=e.reduce(((e,t)=>{var n
const a=d.o6(t.id)
e[a]=(null!==(n=e[a])&&void 0!==n?n:[]).concat([t.id])
return e}),{}),n={}
Object.entries(t).forEach((([e,t])=>{t.forEach(((t,a)=>{n[t]=this.getProjectColorAlternativeTint(e,a)}))}))
return n},getCalenderItemProject:e=>(0,c.oi)(e)?e:(0,c.H6)(e),sortCalendarItems:e=>o.default.sortBy(e,(e=>e.name.toLowerCase())),sortFiles(e){const t=o.default.sortBy(e,(e=>e.name.toLowerCase()))
return o.default.sortBy(t,(e=>e.endAccess))},rangeFromInteract(e){let t=e.mouseDownDate,n=e.mouseOverDate
t.isAfter(n)&&([t,n]=[n,t])
n=n.clone().add(1,"days")
return[t,n]},getItemDate(e){if((0,c.M4)(e))return e.scheduledOn
if((0,c.GQ)(e))return s()(e.date)
if((0,c.Mn)(e)){(0,l.hu)(null!=e.scheduledOnDate,"An unscheduled task shouldn't be displayed on the calendar")
return s()(e.scheduledOnDate)}return e.date},getItemNumDays(e){var t
return null!==(t=e.numDays)&&void 0!==t?t:1},getItemParties:e=>(0,c.M4)(e)?o.default.unique([e.requestor,...(0,u.H)(e.assignees)],(({id:e})=>e)):(0,c.Mn)(e)?o.default.unique([...null!=e.assignee?[addAvatarUrl(e.assignee)]:[],...e.process.watchers.map((e=>addAvatarUrl(e)))],(({id:e})=>e)):e.collaborators,calendarItemsInWeek:(e,t)=>e.map((e=>e.filter((e=>(e=>{const n=h.getItemDate(e),a=n.clone().add(h.getItemNumDays(e),"days"),i=t.clone().add(1,"weeks")
return h.isRangeOverlapping(t,i,n,a)})(e))))),readableDateRange(e,t,{showYear:n}={}){let a=p.UT(e,{showTime:!1,showYear:n})
s()(e).isSame(s()(t),"day")||(a+=` - ${p.UT(t,{showTime:!1,showYear:n})}`)
return a},hasCalendarItems:(...e)=>e.some((e=>e.length>0))},E=h},306258:(e,t,n)=>{n.d(t,{DR:()=>s,En:()=>T,MB:()=>E,UH:()=>u,Zx:()=>h,c6:()=>i,dK:()=>c,gn:()=>a,iR:()=>g,l3:()=>p,m7:()=>d,n$:()=>o,o_:()=>l,tr:()=>S,wr:()=>m})
var a,i,r=n(62315)
!function(e){e.NO_TABLE="NO_TABLE"
e.SUCCESS="SUCCESS"
e.ERROR="ERROR"}(a||(a={}))
!function(e){e.SMILES="smiles"
e.MOLFILE="molfile"}(i||(i={}))
const s=200,o="\n  MJ211100                      \n\n  0  0  0  0  0  0  0  0  0  0999 V2000\nM  END\n",l="<cml><MDocument></MDocument></cml>",c={SHOULD_HIGHLIGHT_SUBSTRUCTURE:"shouldHighlightSubstructurePref",MIN_SIMILARITY:"minSimilarityPref",CHEM_SEARCH_TYPE:"chemSearchTypePref"}
var d
!function(e){e.ATOM_COUNT="ATOM_COUNT"
e.EXACT_MOLECULAR_WEIGHT="EXACT_MOLECULAR_WEIGHT"
e.FRAGMENT_COUNT="FRAGMENT_COUNT"
e.HEAVY_ATOM_COUNT="HEAVY_ATOM_COUNT"
e.HYDROGEN_ACCEPTOR_COUNT="HYDROGEN_ACCEPTOR_COUNT"
e.HYDROGEN_DONOR_COUNT="HYDROGEN_DONOR_COUNT"
e.LOGP="LOGP"
e.MOLAR_REFRACTIVITY="MOLAR_REFRACTIVITY"
e.MOLECULAR_WEIGHT="MOLECULAR_WEIGHT"
e.NUM_AROMATIC_RINGS="NUM_AROMATIC_RINGS"
e.RING_COUNT="RING_COUNT"
e.ROTATABLE_BOND_COUNT="ROTATABLE_BOND_COUNT"
e.SP3_ATOM_COUNT="SP3_ATOM_COUNT"
e.TOPOLOGICAL_POLAR_SURFACE_AREA="TOPOLOGICAL_POLAR_SURFACE_AREA"}(d||(d={}))
const u={[d.MOLECULAR_WEIGHT]:"MW",[d.EXACT_MOLECULAR_WEIGHT]:"Exact MW",[d.ATOM_COUNT]:"Atom count",[d.HEAVY_ATOM_COUNT]:"Heavy atom count",[d.SP3_ATOM_COUNT]:"sp3 atom count",[d.HYDROGEN_ACCEPTOR_COUNT]:"HBA",[d.HYDROGEN_DONOR_COUNT]:"HBD",[d.RING_COUNT]:"Ring count",[d.NUM_AROMATIC_RINGS]:"Aromatic ring count",[d.ROTATABLE_BOND_COUNT]:"Rotatable bond count",[d.LOGP]:"cLogP",[d.TOPOLOGICAL_POLAR_SURFACE_AREA]:"TPSA",[d.MOLAR_REFRACTIVITY]:"Molar refractivity",[d.FRAGMENT_COUNT]:"Fragment count"},m=[.99,.95,.9,.8,.7,.5],p={[r.EF.SIMILARITY]:"Similarity",[r.EF.SUBSTRUCTURE]:"Substructure"},h=.8,E=["cdx","mrv","rdf"],S=["inchi","mol","smiles",...E]
var T
!function(e){e.SMILES="smiles"
e.MOLFILE="mol"
e.SDF="sdf"}(T||(T={}))
const g={mrv:"MRV (.mrv)",smiles:"SMILES (.smiles)",mol:"Molfile (.mol)",sdf:"SDF (.sdf)",inchi:"InChI (.inchi)",cdx:"CDX (.cdx)",rdf:"RDF (.rdf)",cdxml:"CDXML (.cdxml)"}},719878:(e,t,n)=>{n.d(t,{Ub:()=>a,iJ:()=>useReactionDetection,kp:()=>ChemicalStructureDrawer,xY:()=>useControlledChemicalStructureDrawer})
var a,i=n(989526),r=n(348920),s=n(744093),o=n(793834),l=n(598464),c=n(705905),d=n(974913),u=n(263137)
function updateHasReactionContents(e,t){e&&t.exportStructure(s.hI.MRV).then((e=>(0,l.uc)(e,s.hI.MRV))).then((t=>{e(t)}))}function useControlledChemicalStructureDrawer(e=null){const[t,n]=(0,i.useState)(e)
return[e,t,n]}function useReactionDetection(){const[e,t]=(0,i.useState)(!1)
return[e,t]}!function(e){e.STANDARD="STANDARD"
e.REACTION="REACTION"
e.BASIC_SEARCH="BASIC_SEARCH"}(a||(a={}))
const m={[a.STANDARD]:"standard",[a.REACTION]:"reporting",[a.BASIC_SEARCH]:"basicSearch"}
function ChemicalStructureDrawer({initialValue:e,onMoleculeChange:t,mode:n,setHasReactionContents:a,inputFormat:l=s.hI.MOL,outputFormat:p=s.hI.MOL}){const h=(0,i.useRef)(null),E=(0,i.useRef)(null),[S,T]=(0,i.useState)(!1)
return r.ZP.CHEMISTRY_ENABLE_MOLECULE?S?i.createElement("div",null,"An error occurred when attempting to load MarvinJS"):i.createElement("iframe",{ref:h,title:"marvinjs",id:"sketch",src:s.VM,onLoad:function setUpMarvin(){const i=h.current
if(null==i){d.ZP.error("Attempted to set up MarvinJS onLoad but node was null")
T(!0)
return}const r=(0,o.J)(i)
if(null!=r)r.onReady((()=>{r.Sketch.license(s.n,!0)
if(r.sketcherInstance){const i=r.sketcherInstance
E.current=i
i.setServices({molconvertws:s.U5,stereoinfows:s.QE,clean2dws:s.B0,hydrogenizews:s.vQ})
r.Sketch.addRequestInterceptor((e=>{e.setRequestHeader("X-CSRFToken",c.r)}))
!function setStructure(e,t,n){null==e?n.clear():n.importStructure(t,e)}(e,l,i)
updateHasReactionContents(a,i)
i.setDisplaySettings({toolbars:m[n]})
const updateMolecule=async()=>{const e=await i.exportStructure(p)
t(e)
updateHasReactionContents(a,i)}
i.on(s.i5.MOLCHANGE,updateMolecule)
i.on(s.i5.UNDO,updateMolecule)
i.on(s.i5.REDO,updateMolecule)}}))
else{d.ZP.error("Attempted to load MarvinJS from iFrame but it was not set in the iframe window")
T(!0)}},style:{overflow:"hidden",flex:1,border:"none"},...(0,u.Z)({component:"ChemicalStructureDrawer",element:"root"})}):i.createElement("div",null,"You do not have permission to use the chemical structure drawer")}},744093:(e,t,n)=>{n.d(t,{B0:()=>c,QE:()=>l,U5:()=>o,VM:()=>r,hI:()=>a,i5:()=>i,n:()=>s,vQ:()=>d})
var a,i
!function(e){e.CDX="cdx"
e.MRV="mrv"
e.MOL="mol"
e.MOLV3="mol:V3"
e.SMILES="smiles"
e.INCHI="inchi"
e.RDF="rdf"}(a||(a={}))
!function(e){e.MOLCHANGE="molchange"
e.SELECTIONCHANGE="selectionchange"
e.UNDO="undo"
e.REDO="redo"}(i||(i={}))
const r="/static/marvinjs/editorws.html",s="/1/api/marvin/license-grant",o="/1/api/marvin/molconvert",l="/1/api/marvin/cipStereoInfo",c="/1/api/marvin/clean",d="/1/api/marvin/hydrogenize"},189790:(e,t,n)=>{n.d(t,{Z:()=>ChemicalStructureModalInput})
var a=n(692013),i=n(989526),r=n(719878)
function ChemicalStructureModalInput({initialSketcherValue:e,onSketcherValueChange:t,setHasReactionContents:n,mode:o,inputFormat:l,outputFormat:c}){return i.createElement("div",{className:(0,a.iv)(s.wrapper)},i.createElement("div",{className:(0,a.iv)(s.sketcher)},i.createElement(r.kp,{initialValue:e,onMoleculeChange:t,setHasReactionContents:n,mode:o,inputFormat:l,outputFormat:c})))}const s=a.mM.create({sketcher:{display:"flex",justifyContent:"space-around",alignItems:"stretch",flexDirection:"row",flex:1,minHeight:350,paddingTop:10},wrapper:{flex:1,display:"flex",flexDirection:"column"}})},578401:(e,t,n)=>{n.d(t,{Gi:()=>resetToVersion,ae:()=>updateChemicalStructure,wM:()=>createMolecule})
var a=n(699418),i=n(681896),r=n(91092),s=n(974913),o=n(166459),l=n(652211),c=n(598464),d=n(595177)
async function resetToVersion(e,t){const n=await(0,c.JN)(e),a=await l.Gi(e,t,n);(0,o.getStore)().dispatch((0,d.h)(a.molecule.id,a.molecule.currentVersion.id));(0,i.writeFragmentsToCache)((0,r.f)("UpdateMoleculeVersionResponse"),[a.molecule])
s.ZP.success("Successfully reset molecule version")}async function createMolecule(e,t,n,s,o=null){const c=await l.wM(e,t,n,s,o);(0,i.writeFragmentsToCache)((0,r.f)("Molecule"),[c])
a.ZP.get().openFolderItem(c.id)}async function updateChemicalStructure(e,t,n,c){const u=await l.ae(e,t,n,c);(0,i.writeFragmentsToCache)((0,r.f)("Molecule"),[u]);(0,o.getStore)().dispatch((0,d.h)(u.id,u.currentVersion.id))
s.ZP.success("Successfully updated chemical structure")
a.ZP.get().openFolderItem(e)}},610789:(e,t,n)=>{n.d(t,{S:()=>i,W:()=>a})
const a="rgba(232, 240, 242, 0.5)",i="1px solid #F5F8FA"},652211:(e,t,n)=>{n.d(t,{Gi:()=>resetToVersion,M:()=>stripSalts,ae:()=>updateChemicalStructure,hC:()=>molConvert,wM:()=>createMolecule})
var a=n(744093),i=n(771398)
function resetToVersion(e,t,n){return i.s0({url:`/1/api/molecules/${e}/actions/reset-version`,data:{moleculeVersionId:t,expectedCurrentVersionId:n}})}function createMolecule(e,t,n,a,r){return i.s0({url:"/1/api/molecules",data:{name:e,folderId:t,schemaId:r,chemicalStructureInput:{structureFormat:n,value:a}}})}function updateChemicalStructure(e,t,n,a){return i.s0({url:`/1/api/molecules/${e}/actions/update-chemical-structure`,data:{chemicalStructureInput:{structureFormat:n,value:a},expectedCurrentVersionId:t}})}function stripSalts(e,t){return i.s0({url:"/1/api/molecules/strip-salts",data:{structureFormat:e,value:t}})}function molConvert(e,t,n){e===a.hI.CDX&&(e="base64:cdx")
return i.s0({url:a.U5,data:{inputFormat:e,parameters:t,structure:n}})}},598464:(e,t,n)=>{n.d(t,{JN:()=>getCurrentVersionId,_F:()=>chemicalStructureInputFromCreateBioentityArgs,j0:()=>onCurrentVersion,mi:()=>stripSaltsAndNotify,uc:()=>detectReaction})
var a=n(769784),i=n(232606),r=n(306258),s=n(744093),o=n(681896),l=n(91092),c=n(697134),d=n(974913),u=n(166459),m=n(652211)
const p=a.ZP`
  query MoleculeCurrentVersionQuery($moleculeId: StrictString!) @skipAudit {
    molecule(id: $moleculeId) {
      ... on MoleculeNode {
        id
        currentVersion {
          id
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,l.f)("InaccessibleInfo").fragment}
`
function onCurrentVersion(e,t){return t===(0,u.getStore)().getState().ui.chemistry.moleculeVersionUIs[e].moleculeVersionId}async function getCurrentVersionId(e){const t=await(0,o.doQuerySafe)({query:p},{variables:{moleculeId:e},fetchPolicy:"cache-only"});(0,i.hu)(!(0,c.CZ)(t.molecule),"Molecule must be accessible.")
return t.molecule.currentVersion.id}function chemicalStructureInputFromCreateBioentityArgs(e){var t
return e.chemicalSketcherValue===r.n$&&""===e.smiles?null:e.chemicalSketcherValue===r.n$?{structureFormat:r.c6.SMILES,value:e.smiles}:{structureFormat:r.c6.MOLFILE,value:null!==(t=e.chemicalSketcherValue)&&void 0!==t?t:r.n$}}async function stripSaltsAndNotify(e,t){var n;(null===(n=(await m.M(e,t)).salts)||void 0===n?void 0:n.length)>0&&d.ZP.info("Salt information was removed from the chemical structure you added. Please use schema fields to store salt information.")}async function detectReaction(e,t){if(t!==s.hI.MRV){e=(await m.hC(t,s.hI.MRV,e)).structure}const n=(new DOMParser).parseFromString(e,"text/xml")
return!(!n.querySelector("reaction")&&!n.querySelector("MReactionSign"))}},315727:(e,t,n)=>{n.d(t,{ZP:()=>CollaborationManagementContent,gY:()=>DataPolicyCollaborationManagementContent,p$:()=>P})
var a=n(769784),i=n(64558),r=n(692013),s=n(764403),o=n.n(s),l=n(989526),c=n(348920),d=n(459830),u=n(741522),m=n(751512),p=n(697134),h=n(974913),E=n(263174),S=n(788836),T=n(263137),g=n(334148),f=n(778223),I=n(271359),A=n(198438),y=n(476604),_=n(229329),C=n(601790),R=n(220798),N=n(379346),O=n(257846),b=n(573736)
const v=a.Ps`
  query CollaborationManagementContentDataPoliciesQuery @skipAudit {
    currentTenant {
      id
      dataPolicies {
        id
        name
        isHidden
      }
    }
  }
`
function DataPolicyCollaborationManagementContent(e){return l.createElement(m.ZP,{query:v,renderLoading:()=>l.createElement(y.b,null)},(({currentTenant:t})=>l.createElement(CollaborationManagementContent,{...e,policies:t.dataPolicies})))}function CollaborationManagementContent(e){var t
return l.createElement("div",{...(0,T.Z)({component:"CollaborationManagementContent",element:"root"})},l.createElement(CollaborationSearchRow,{policeable:e.policeable,collaborations:e.collaborations,setCollaborations:e.setCollaborations,policies:e.policies,isReadOnly:e.isReadOnly}),l.createElement(CollaborationList,{policeable:e.policeable,collaborations:e.collaborations,ancestorCollaborations:e.ancestorCollaborations,setCollaborations:e.setCollaborations,renderAuditorColumn:null!==(t=e.renderAuditorColumn)&&void 0!==t&&t,policies:e.policies,isReadOnly:e.isReadOnly,onLeave:e.onLeave,modalRender:e.modalRender}))}function CollaborationSearchRow(e){const t=e.policies.filter((e=>!e.isHidden)),[n,a]=l.useState(t[0]),[i,s]=l.useState([]),m=[...e.collaborations.map((e=>e.party)),...i].map((e=>e.id)),p=e.policeable&&N.ZP.apiIdToType(e.policeable.id)===d.SOURCE&&c.ZP.ENABLE_USER_SIGNUPS
return l.createElement("div",{className:"u-flex-display",...(0,T.Z)({component:"CollaborationSearchRow",element:"root"})},l.createElement(A.D,{className:"u-flex-grow u-tiny-padding-right",allowTeams:!0,allowEmails:p,allowBenchlingApps:!0,allowOrganizations:!0,emptyText:"No matches found.",enableNewEntityInput:!0,shouldAllowMultiple:!0,size:R.I.MEDIUM,userSearchType:A.t.NotSuspended,value:i,onChange:t=>{const n=t.filter((e=>e.handle)),a=t.filter((e=>!e.handle))
s(n)
p&&a.forEach((t=>{(t.text&&O.Z.isValidEmail(t.text)||t.email&&O.Z.isValidEmail(t.email))&&(n=t.email||t.text,u.Z.addCollaborator(e.policeable.id,{entity_id:n}).done((()=>{h.ZP.success(`Successfully invited ${n}`)})).fail(h.ZP.notifyError))
var n}))},entityInputChipSize:f.TK.MINI,filterOptions:(e,t)=>t.filter((e=>!m.includes(e.id))),disabled:e.isReadOnly}),l.createElement("div",{className:o()((0,r.iv)(L.policyDropdown),"u-tiny-padding-right")},l.createElement(b.V5,{policies:t,policyId:n.id,allowNone:!1,isReadOnly:e.isReadOnly,buttonSize:g.qE.MEDIUM,onChangePolicy:e=>{a(t.find((t=>t.id===e)))}})),l.createElement(g.Co,{buttonStyle:g.ZJ.SECONDARY,size:g.qE.MEDIUM,text:"Add",disabled:e.isReadOnly||0===i.length,onClick:t=>{const a=[...e.collaborations,...i.map((t=>({__typename:"CollaborationNode",party:"OrganizationNode"===t.__typename||"TeamNode"===t.__typename?{__typename:t.__typename,id:t.id,name:t.name,avatarUrl:t.avatar_url,admin:t.admin,handle:t.handle}:{__typename:t.__typename,id:t.id,name:t.name,avatarUrl:t.avatar_url,handle:t.handle},policy:n,organizationRole:"OrganizationNode"===t.__typename?E.OrganizationPermissionRole.MEMBER:null,teamRole:"TeamNode"===t.__typename?E.TeamPermissionRole.MEMBER:null,auditor:!1,resource:null!=e.policeable?{__typename:"RestrictedResourceNode",id:e.policeable.id,name:e.policeable.name,type:""}:null,fromOwnership:!1})))]
e.setCollaborations(a)
s([])},dataTestAttrs:{component:"CollaborationSearchRow",element:"addCollaboratorButton"}}))}const P={__typename:"DataPolicyNode",id:b.Hn,name:b.Hn,isHidden:!1}
function computeCollaboratorKey(e){var t
const n=null!==(t=e.teamRole)&&void 0!==t?t:e.organizationRole
return`${e.party.name}:${e.party.id}:${null!=n?-1*n:n}`}function collaborationWithRole(e,t){return{...e,teamRole:null==e.teamRole?e.teamRole:t,organizationRole:null==e.organizationRole?e.organizationRole:t}}function addMissingMemberCollaborations(e){const t=new Set(e.map((e=>computeCollaboratorKey(e))))
return e.reduce(((e,n)=>{var a
e.push(n)
if((null!==(a=n.teamRole)&&void 0!==a?a:n.organizationRole)===E.OrganizationPermissionRole.ADMIN){const a={...collaborationWithRole(n,E.OrganizationPermissionRole.MEMBER),policy:P}
t.has(computeCollaboratorKey(a))||e.push(a)}return e}),[])}function CollaborationList(e){const t=addMissingMemberCollaborations(e.collaborations),n=addMissingMemberCollaborations([...t,...e.ancestorCollaborations]).reduce(((e,t)=>{const n=computeCollaboratorKey(t)
e.has(n)||e.set(n,[])
e.get(n).push(t)
return e}),new Map),a=t.reduce(((e,t)=>{e.set(computeCollaboratorKey(t),t)
return e}),new Map),updateCollaboration=t=>{e.setCollaborations([...e.collaborations.filter((e=>computeCollaboratorKey(e)!==computeCollaboratorKey(t))),t])},removeCollaborations=t=>{const n=t.map((e=>computeCollaboratorKey(e)))
e.setCollaborations([...e.collaborations.filter((e=>!n.includes(computeCollaboratorKey(e))))])},[s,o]=(0,i.uK)([...n.keys()],(e=>n.get(e).some((e=>{var t
return null!==(t=e.fromOwnership)&&void 0!==t&&t})))),[c,d]=(0,i.uK)(o,(e=>a.has(e)||n.get(e).some((e=>{const t=computeCollaboratorKey(collaborationWithRole(e,E.OrganizationPermissionRole.ADMIN)),n=computeCollaboratorKey(collaborationWithRole(e,E.OrganizationPermissionRole.MEMBER))
return a.has(t)||a.has(n)})))),u=[...(0,i.SL)(s),...(0,i.SL)(c),...(0,i.SL)(d)]
return l.createElement("div",{className:(0,r.iv)(L.scrollContainer,e.modalRender&&L.scrollContainerModal)},l.createElement(C.iA,{className:(0,r.iv)(e.modalRender&&L.tableModal),numRows:u.length,frozenHeader:!1,overflowVisible:!0,showBorder:!1,getRowClassName:e=>{var t
const a=n.get(u[e])[0]
return(null!==(t=a.organizationRole)&&void 0!==t?t:a.teamRole)===E.OrganizationPermissionRole.ADMIN?(0,r.iv)(L.adminRoleRow):""},tableLayout:"fixed"},l.createElement(C.sg,{header:l.createElement(CustomHeaderCell,{className:(0,r.iv)(L.largeCell)},"Collaborators"),renderCell:e=>function renderPartyCell(e){var t,n
return l.createElement(C.bL,{className:(0,r.iv)(L.largeCell)},l.createElement(b.ur,{party:e.party,groupRole:null!==(n=null!==(t=e.teamRole)&&void 0!==t?t:e.organizationRole)&&void 0!==n?n:void 0}))}(n.get(u[e])[0])}),l.createElement(C.sg,{header:l.createElement(CustomHeaderCell,{className:(0,r.iv)(L.largeCell)},"Access Policies"),renderCell:t=>function renderAccessPoliciesCell(e,t,n,a,i,s,o){var c
return l.createElement(C.bL,{className:(0,r.iv)(L.largeCell)},e&&l.createElement(b.V5,{policies:s.filter((e=>!e.isHidden)),policyId:e.policy.id,allowNone:(null!==(c=e.organizationRole)&&void 0!==c?c:e.teamRole)===E.OrganizationPermissionRole.MEMBER&&(n.has(computeCollaboratorKey(collaborationWithRole(e,E.OrganizationPermissionRole.ADMIN)))||Boolean(e.fromOwnership)),isReadOnly:o||!0===e.fromOwnership&&e.organizationRole!==E.OrganizationPermissionRole.MEMBER,onChangePolicy:t=>{t!==b.Hn?a({...e,policy:s.find((e=>e.id===t))}):i([e])}}),(null==e?void 0:e.fromOwnership)&&e.organizationRole!==E.OrganizationPermissionRole.MEMBER&&l.createElement(b.$w,{policeable:e.resource,hasTopSpacing:!0}),t.filter((t=>t!==e)).map(((t,n)=>t.fromOwnership&&t.organizationRole!==E.OrganizationPermissionRole.MEMBER?l.createElement(b.$w,{policeable:t.resource,hasTopSpacing:null!=e,policyName:t.policy.name}):l.createElement(b.oC,{hasTopSpacing:null!=e||n>0,key:(0,p.k3)(t.resource),policyName:t.policy.name,policeable:t.resource}))))}(a.get(u[t]),n.get(u[t]),a,updateCollaboration,removeCollaborations,e.policies,e.isReadOnly)}),e.renderAuditorColumn&&l.createElement(C.sg,{header:l.createElement(CustomHeaderCell,{className:(0,r.iv)(L.auditorCell)},"Auditor"),renderCell:t=>function renderAuditorCell(e,t,n){var a,i
const s=null==(null!==(a=null==e?void 0:e.teamRole)&&void 0!==a?a:null==e?void 0:e.organizationRole),o=(null==e?void 0:e.teamRole)===E.TeamPermissionRole.MEMBER,c=Boolean(null==e?void 0:e.auditor)
return l.createElement(C.bL,{className:(0,r.iv)(L.auditorCell)},e&&(s||o||c)&&l.createElement(_.Z,{className:(0,r.iv)(L.auditorCheckbox),id:"auditor-checkbox",label:"",checked:null!==(i=e.auditor)&&void 0!==i&&i,onChange:n=>{t({...e,auditor:n.target.checked})},disabled:n}))}(a.get(u[t]),updateCollaboration,e.isReadOnly)}),l.createElement(C.sg,{header:l.createElement(CustomHeaderCell,{className:(0,r.iv)(L.overflowCell)}),renderCell:t=>function renderOverflowMenuCell(e){var t,n
const a=e.directCollaborationsByCollaborator.get(e.collaboratorKey)
if(null==a||a.fromOwnership)return l.createElement(C.bL,{className:(0,r.iv)(L.overflowCell)})
const i=null!==(n=null!==(t=null==a?void 0:a.teamRole)&&void 0!==t?t:null==a?void 0:a.organizationRole)&&void 0!==n?n:void 0,s=collaborationWithRole(a,E.OrganizationPermissionRole.ADMIN),o=null!=i&&null!=e.directCollaborationsByCollaborator.get(computeCollaboratorKey(s)),c=[...null==i?[{onSelect:()=>{e.removeCollaborations([a])},contents:l.createElement("span",null,"Remove")}]:[],...i===E.OrganizationPermissionRole.MEMBER?[{onSelect:()=>{e.removeCollaborations([a,s])},contents:l.createElement("span",null,"Remove ","TeamNode"===a.party.__typename?"team":"organization")},{onSelect:()=>{e.updateCollaboration(s)},contents:l.createElement("span",null,"Add admin member access policy"),isDisabled:o}]:[],...i===E.OrganizationPermissionRole.ADMIN?[{onSelect:()=>{e.removeCollaborations([a])},contents:l.createElement("span",null,"Remove admin member access policy")}]:[]],d=[...e.onLeave&&_canLeave(a.party)?[{onSelect:()=>{e.onLeave(a)
e.removeCollaborations([a,s])},contents:l.createElement("span",null,"Leave")}]:[]]
return l.createElement(C.bL,{className:(0,r.iv)(L.overflowCell)},l.createElement(b.P6,{menuOptions:e.isReadOnly?d:c,isDirectCollaborator:null!=a}))}({collaboratorKey:u[t],directCollaborationsByCollaborator:a,isReadOnly:e.isReadOnly,removeCollaborations,updateCollaboration,onLeave:e.onLeave})})))}function CustomHeaderCell({children:e,className:t}){return l.createElement(C.bL,{className:o()((0,r.iv)(L.headerCell),t)},l.createElement("div",null,e))}const _canLeave=e=>{const t=S.Z.currentUser()
return!!t&&(e.id===t.id||("OrganizationNode"===e.__typename||"TeamNode"===e.__typename)&&e.admin)}
const L=r.mM.create({policyDropdown:{width:150},tableModal:{height:300},scrollContainer:{overflowY:"scroll",overflowX:"hidden"},scrollContainerModal:{marginBottom:-16},headerCell:{background:I.Cj,color:I.Rl,position:"sticky",top:0},largeCell:{width:"calc(100% / 2 - 55px)",whiteSpace:"pre-wrap",verticalAlign:"top"},auditorCell:{width:60,verticalAlign:"top"},auditorCheckbox:{justifyContent:"center"},overflowCell:{width:50},adminRoleRow:{boxShadow:"none"}})},139894:(e,t,n)=>{n.d(t,{Av:()=>CompactCollaborationManagementSection,ZP:()=>CollaborationManagementSectionOrLoading})
var a=n(692013),i=n(989526),r=n(751512),s=n(974913),o=n(309718),l=n(103593),c=n(929123),d=n(59860),u=n(334148),m=n(476604),p=n(119389),h=n(502633),E=n(808844),S=n(38317),T=n(852375),g=n(33572),f=n(895640)
function uniquePartiesFromCollaborations(e){return e.map((e=>e.party)).filter(((e,t,n)=>n.findIndex((t=>t.id===e.id))===t))}function CollaborationManagementSection(e){const t=uniquePartiesFromCollaborations([...e.collaborations,...e.ancestorCollaborations]),n=t.map((e=>e.name)),a=4===t.length?4:3
return i.createElement(i.Fragment,null,i.createElement(c.Z,null,"Collaborators"),i.createElement(d.Z,null,i.createElement(l.Z,{sm:3},i.createElement(p.ZP,{parties:t,maxAvatars:4,size:o.D.SMALL})),i.createElement(l.Z,{sm:6},`Shared with ${(0,E.gf)(n,a)}`),i.createElement(l.Z,{sm:3},i.createElement(u.Co,{buttonStyle:u.ZJ.LINK,text:"Manage Access",onClick:async()=>{await(0,h.Z)(T.Z,{...e,submitButtonText:"Done",onRequestSubmit:e.onRequestSubmit,policeableName:e.policeableName})},dataTestAttrs:{component:"CollaborationManagementSection",element:"manageAccessButton"}}))))}function CollaborationManagementSectionOrLoading(e){if(e.queryResultType===r.NI.ERROR){s.ZP.error("Could not load collaborators; try reloading the page.")
return i.createElement(i.Fragment,null)}return e.queryResultType!==r.NI.SUCCESS?i.createElement(m.b,null):i.createElement(CollaborationManagementSection,{...(0,S.Z)(e,"queryResultType")})}function CompactCollaborationManagementSection({policeableId:e}){const[t,n]=(0,f.Z)(e)
if(t.queryResultType===r.NI.ERROR){s.ZP.error("Could not load collaborators; try reloading the page.")
return i.createElement(i.Fragment,null)}if(t.queryResultType!==r.NI.SUCCESS)return i.createElement(m.Z,null)
const l=uniquePartiesFromCollaborations([...t.collaborations,...t.ancestorCollaborations]),c=l.slice(0,4)
return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(p.ZP,{className:(0,a.iv)(I.compactAvatarList),avatarClassName:(0,a.iv)(I.compactAvatar),parties:c,maxAvatars:4,size:o.D.XXSMALL}),l.length>4&&i.createElement("span",{className:"u-tiny-padding-left"},"+ more")),i.createElement("div",{className:"u-tiny-padding-top"},i.createElement(u.Co,{buttonStyle:u.ZJ.LINK,text:"Manage Access",onClick:()=>{g.ZN(e)}})))}const I=a.mM.create({compactAvatarList:{marginRight:8},compactAvatar:{height:20,width:20,marginRight:-8,border:"2px solid white"}})},563019:(e,t,n)=>{n.d(t,{Gw:()=>useSchemaCollaboratorsSectionWithDefaults,Rb:()=>getDefaultCollaborators,U9:()=>useSchemaCollaboratorsSection})
var a=n(989526),i=n(232606),r=n(56063),s=n(348920),o=n(675649),l=n(256605),c=n(263174),d=n(788836)
function toMinimalCollaborators(e){return e.map((e=>{if((0,r.K8)(e))return{id:e.id,schemaPolicyId:e.schemaPolicyId}
if((0,r.Ez)(e))return{id:e.id,adminSchemaPolicyId:e.adminSchemaPolicyId,memberSchemaPolicyId:e.memberSchemaPolicyId};(0,i.Gp)(!1,`Unexpected collaborator type ${e}`)
return null})).filter((e=>Boolean(e)))}function getCreatorCollaborator(e){return{...d.Z.currentUser(),schemaPolicyId:e.creator_schema_policy_id}}function getOwnerOrgCollaborator(e,t,n){var a
const i=null!==(a=t.org_members_policy_id)&&void 0!==a?a:n===l.l.INTERFACE?t.read_policy_id:t.create_policy_id
return{handle:e.handle,id:e.id,name:e.name,type:c.PartyType.ORGANIZATION,owner:!0,adminSchemaPolicyId:t.admin_policy_id,memberSchemaPolicyId:i}}function getDefaultCollaborators(e,t=l.l.ENTITY){const n=s.ZP.PERMISSIONS_DEFAULT_SCHEMA_POLICIES
if(!n)return[]
const a=[getCreatorCollaborator(n)]
if(s.ZP.PERMISSIONS_ENABLE_SCHEMA_ACCESS_POLICIES_SETTINGS_TAB){const s=e.schemaCollaborationDefaultConfigurations.find((e=>e.schemaType===t));(0,i.Gp)(null!=s,`This organization must have a default schema configuration for ${(0,o._6)(2,t.toLowerCase())}`)
if(null==s)return[getCreatorCollaborator(n),getOwnerOrgCollaborator(e,n,t)]
const l=(0,r.x2)(s,e)
a.push(l.find((t=>t.id===e.id)))
for(const t of l)t.id!==(null==e?void 0:e.id)&&a.push(t)}else a.push(getOwnerOrgCollaborator(e,n,t))
return a}function useSchemaCollaboratorsSectionWithDefaults(e,t=l.l.ENTITY){return useSchemaCollaboratorsSection((()=>getDefaultCollaborators(e,t)))}function useSchemaCollaboratorsSection(e){const[t,n]=(0,a.useState)(e),[i,r]=(0,a.useState)(toMinimalCollaborators(t))
return[{collaborators:t,minimalCollaborators:i},function handleUpdateCollaborators(e){n(e)
r(toMinimalCollaborators(e))}]}},872153:(e,t,n)=>{n.d(t,{ZP:()=>useSchemaPoliciesListing,qb:()=>r})
var a=n(769784),i=n(751512)
const r=a.Ps`
  query SchemaPoliciesQuery($limitOffsetInput: LimitOffsetInput!)
  @skipAudit
  @engComponent(name: PERMISSIONS) {
    schemaPolicyListing(limitOffsetInput: $limitOffsetInput) {
      schemaPolicies {
        id
        name
        permissions {
          writable
        }
        policyStatements {
          itemType
          action
          condition
        }
        isHidden
      }
    }
  }
`,s={limitOffsetInput:{limit:3,offset:0}}
function useSchemaPoliciesListing(){const e=(0,i.IJ)(r,{variables:s})
return e.type!==i.NI.SUCCESS?{queryResultType:e.type}:{queryResultType:e.type,schemaPolicies:e.data.schemaPolicyListing.schemaPolicies}}},763661:(e,t,n)=>{n.d(t,{A:()=>AlignmentComment,R:()=>AlignmentComments})
var a=n(440281),i=n.n(a),r=n(85758),s=n.n(r),o=n(232606),l=n(132814),c=n(68150),d=n(317275)
class AlignmentComment extends i().Model{defaults(){return{layerStart:null,layerEnd:null,hover:!1,selected:!1,visible:!0,start:null,end:null,text:""}}layerStart(){(0,o.Gp)(null!=this.get("layerStart"),"Expected layerStart to exist")
return this.get("layerStart")}layerEnd(){(0,o.Gp)(null!=this.get("layerEnd"),"Expected layerEnd to exist")
return this.get("layerEnd")}drawStart(){return this.layerStart()}drawEnd(){return this.layerEnd()}uid(){return this.cid}color(){return"#2980b9"}hover(){return this.get("hover")}selected(){return this.get("selected")}click(e,t=!1){null!=s().event&&s().event.stopPropagation()
if(s().event&&c.dO(s().event))return
e.get("selection").setEndpoints(this.start(),this.end())
e.trigger("jump",this.start())
this.trigger("open",this)}dblClick(e,t=!1){this.click(e,t)}start(){return this.get("start")}end(){return this.get("end")}text(){return this.get("text")}toJSON(){return(0,d.Z)(super.toJSON(),"start","end","text")}length(e){return l.length(this.start(),this.end(),e.length())}}class AlignmentComments extends i().Collection{static initClass(){this.prototype.model=AlignmentComment}url(){return`/1/api/sequence/analyses/${this.analysisID}/alignment_comments`}initialize(e,t){this.analysisID=t.analysisID}}AlignmentComments.initClass()},146238:(e,t,n)=>{n.d(t,{ZP:()=>m,kH:()=>u})
var a=n(440281),i=n.n(a),r=n(531041),s=n(232606),o=n(48047),l=n(422199),c=n(973606)
const{enzymes:d}=c.ZP
class Enzyme extends i().Model{defaults(){return{active:!1,highlight:!1,visible:!1,cutPositions:[],catalogVisible:!0,color:null}}name(){return this.get("name")}seq(){return this.get("seq")}color(){return this.get("color")}active(){return this.get("active")}highlight(){return this.get("highlight")}visible(){return this.get("visible")}offset(){return this.get("offset")}recognitionSiteLength(){return this.seq().length}postRecognitionSiteLength(){const e=this.recognitionSiteLength(),t=Math.min(this.get("cut"),this.get("cut")+this.get("offset"))-e
return Math.max(t,0)}stickyEndLength(){return Math.abs(this.get("offset"))}doubleCutter(){return null!=this.get("cut2")}_isVisibleHelper(e){switch(e){case u.ALL:return!0
case u.NONE:return!1
case u.SINGLE:return 1===this.get("cutPositions").length
case u.DOUBLE:return 2===this.get("cutPositions").length
case u.SINGLEANDDOUBLE:return[1,2].includes(this.get("cutPositions").length)
default:(0,s.Gp)(!1,"Invalid type! Hiding enzyme.")
return!1}}isVisibleByCuts(e,t){return this.active()||null!=this.color()||this._isVisibleHelper(e)&&!r.default.contains(t,this)}updateVisibleByCuts(e){this.set({visible:this._isVisibleHelper(e)})}forceVisible(){return this.active()||null!=this.color()}setHidden(){this.set({active:!1,visible:!1})}setActive(e){this.set({active:!0,visible:!0,color:e})}}var u
!function(e){e.SINGLE="single"
e.DOUBLE="double"
e.SINGLEANDDOUBLE="singleanddouble"
e.ALL="all"
e.NONE="none"}(u||(u={}))
class Enzymes extends i().Collection{static initClass(){this.prototype.model=Enzyme
this.prototype.comparator="name"}batchName(){return"enzymes"}getEnzymesJSON(e){return e.map((e=>this.get(e).toJSON()))}static getCommonEnzymes(){return new this(r.default.map(d,(e=>new Enzyme(o.digestableEnzyme(e)))))}hideAll(){for(const e of this.models)e.setHidden()}static setLocalStorageActives(e){const t={}
e.each((e=>{t[e.id]=e.color()}))
r.default.isEmpty(t)?l.Z.removeItem("active-enzymes"):l.Z.setItem("active-enzymes",JSON.stringify(t))}}Enzymes.initClass()
const m=Enzymes},674607:(e,t,n)=>{n.d(t,{CD:()=>SequenceLinearMapState,CE:()=>AlignmentMapState,JB:()=>CircularMapState,Jg:()=>OligoConjugateMapState,O1:()=>OligoLinearMapState,RV:()=>RNASequenceLinearMapState,hR:()=>AlignmentMapStates,nX:()=>MiniMapState,v_:()=>SummaryMapState,yp:()=>ProteinLinearMapState})
var a=n(440281),i=n.n(a),r=n(85758),s=n.n(r),o=n(767807),l=n.n(o),c=n(250965),d=n.n(c),u=n(531041),m=n(232606),p=n(348920),h=n(64717),E=n(773055),S=n(227487),T=n(2186),g=n(882321),f=n(436208),I=n(143683),A=n(691424),y=n(517944),_=n(762802),C=n(703764),R=n(231017),N=n(132814),O=n(260929)
let b=!1
class PolymerMapState extends i().Model{defaults(){return{}}}class MultiPolymerMapState extends PolymerMapState{defaults(){return{...super.defaults(),sequences:[]}}}class SinglePolymerMapState extends PolymerMapState{defaults(){return{...super.defaults(),sequence:null}}initialize(e,t){super.initialize(...arguments)
this.setPolymer()
this.on("change:sequence change:polymer change:protein",this.setPolymer)}setPolymer(){const e=this.polymer()||this.get("sequence")||this.get("protein")
this.set("sequence",e)
this.set("polymer",e)
this.set("protein",e)}polymer(){return this.get("polymer")}sequence(){const e=this.polymer();(0,m.hu)(e instanceof E.Sequence,"Expected polymer to be a Sequence instance")
return e}protein(){const e=this.polymer();(0,m.hu)(e instanceof R.Z,"Expected polymer to be a Protein instance")
return e}}class AlignmentMapState extends SinglePolymerMapState{defaults(){return{...super.defaults(),alignment:null,layout:(0,_.ZP)(),editable:!1,visibilityOptions:null,layeringMode:f.LINEAR_LAYER_FULL,polymerLayout:f.DEFAULT_ALIGNMENT_LAYOUT}}initialize(e,t){super.initialize(...arguments)
const n={_sequence:this.get("alignment").get("sequence")}
null!=e.baseSequence&&(n.baseSequence=e.baseSequence)
null!=e.permissions&&(n.permissions=e.permissions)
null!=this.get("alignment").get("trace")&&(n.hasTraceData=!0)
const a={handleCanEdit:e.handleCanEdit}
if(this.get("alignment").get("type")!==g.Fl.CONSENSUS){a.trimStart=this.get("alignment").get("trimStart")
a.trimEnd=this.get("alignment").get("trimEnd")}this.set("sequence",new h.Z(n,a))}isMasterSequence(){return[g.Fl.TEMPLATE,g.Fl.CONSENSUS].includes(this.get("alignment").get("type"))}}class SummaryMapSingleState extends SinglePolymerMapState{defaults(){return{...super.defaults(),layout:null,editable:!1,masterSequence:null,visibilityOptions:null}}}class SummaryMapSingleStates extends i().Collection{static initClass(){this.prototype.model=SummaryMapSingleState}}SummaryMapSingleStates.initClass()
class SummaryMapState extends MultiPolymerMapState{defaults(){return{...super.defaults(),layout:(0,_.ZP)(),editable:!1,range:null,submapstates:null,alignmentComments:null}}initialize(){this.set({submapstates:new SummaryMapSingleStates(Array.from(this.get("sequences")).map((e=>new SummaryMapSingleState({sequence:e,layout:this.get("layout"),editable:this.get("editable"),visibilityOptions:this.get("visibilityOptions")}))))})}}class AlignmentMapStates extends i().Collection{static initClass(){this.prototype.model=AlignmentMapState}}AlignmentMapStates.initClass()
class PolymerLinearMapState extends SinglePolymerMapState{defaults(){return{...super.defaults(),zoom:100,stepZoom:2,maxZoom:f.LINEAR_MAX_ZOOM_NO_MODS,topSlice:0,sliceOffset:0,scrollData:new y.cD,layout:(0,_.ZP)(),polymerLayout:{},layeringMode:f.LINEAR_LAYER_FULL}}changeZoomByStep(e){const t=this.get("zoom")+e*this.get("stepZoom")
return this.setZoom(t)}overrideZoomChange(e,t){return t}setZoom(e){let t,n;(0,m.Gp)(u.default.isFinite(e),"Expected targetZoom to be non-null (BNCH-1283)",{isNull:null===e,isUndefined:void 0===e,isNaN:Number.isNaN(e),isInfinity:e===1/0,isNegInfinity:e===-1/0})
const a=u.default.isFinite(e)?e:0,i=Math.max(this.get("minZoom"),Math.min(this.get("maxZoom"),a)),r=this.overrideZoomChange(this.get("zoom"),i),{widths:s}=this.get("layout").DNA.get("type"),o=s[f.POLYMER_DEFAULT_FONT_SIZE]*r/100,l=o>=s[f.POLYMER_MIN_VISIBLE_FONT_SIZE]
"function"==typeof this.assertVisible&&this.assertVisible(l,r)
if(o<s[3]){t=3
n=0}else if(o>s[20]){t=20
n=o-s[20]}else{let e
t=20
for(e=3;e<20;e++)if(s[e+1]>o){t=e
break}n=o-s[e]}this.adjustLayoutsForZoom({newFontSize:t,newLetterSpacing:n,newBaseVisible:l,newZoom:r})
return this.set("zoom",r)}adjustLayoutsForZoom({newFontSize:e,newLetterSpacing:t,newBaseVisible:n,newZoom:a}){const i=this.getBasesLayout()
i.get("type").setFontSize(e)
i.get("type").setLetterSpacing(Math.ceil(t))
i.set("visible",n)
"function"==typeof this.adjustPolymerLayoutsForZoom&&this.adjustPolymerLayoutsForZoom({newFontSize:e,newLetterSpacing:t,newBaseVisible:n,newZoom:a})}getBasesLayout(){throw new Error("Not implemented")}}class ProteinLinearMapState extends PolymerLinearMapState{defaults(){return{...super.defaults(),minZoom:f.PROTEIN_MIN_ZOOM,polymerLayout:f.DEFAULT_PROTEIN_LAYOUT}}initialize(){super.initialize(...arguments)
this.listenTo(this.get("visibilityOptions"),"redraw",this.syncVisibilityOptions)
this.syncVisibilityOptions()}syncVisibilityOptions(){const e=this.get("visibilityOptions").getOption(T.$U.name),t=l()(this.get("polymerLayout"),{aminoAcids:{foregroundColoring:{$set:e.getSetting(T.XQ.name).get("value")},showColoring:{$set:e.get("visible")}}})
this.set({polymerLayout:t})}getBasesLayout(){return this.get("layout").AminoAcids}adjustPolymerLayoutsForZoom({newFontSize:e,newLetterSpacing:t,newBaseVisible:n}){const a=l()(this.get("polymerLayout"),{aminoAcids:{$merge:{type:{fontSize:e,letterSpacing:Math.ceil(t)},visible:n}}})
this.set({polymerLayout:a})}assertVisible(e,t){if(!b&&!e){b=!0
O.ZK(`Protein amino acids are invisible at zoom level: ${t}`)}}}class SequenceLinearMapState extends PolymerLinearMapState{defaults(){return{...super.defaults(),minZoom:f.NUCLEOTIDE_SEQUENCE_MIN_ZOOM,polymerLayout:f.DEFAULT_DNA_SEQUENCE_LAYOUT}}initialize(e,t){super.initialize(...arguments)}getBasesLayout(){return this.get("layout").DNA}adjustLayoutsForZoom(e){super.adjustLayoutsForZoom(e)
this.get("layout").Translations.set("visible",e.newBaseVisible)
const t=this.getBasesLayout().attributes.type.fontSize,n=this.get("polymerLayout"),a={...n,forwardTranscriptionLine:{...n.forwardTranscriptionLine,visible:e.newBaseVisible,svgHeight:t*f.TRANSCRIPTION_LINE_HEIGHT_SCALE},reverseTranscriptionLine:{...n.reverseTranscriptionLine,visible:e.newBaseVisible,svgHeight:t*f.TRANSCRIPTION_LINE_HEIGHT_SCALE},transcriptionArrow:{...n.transcriptionArrow,visible:e.newBaseVisible}}
this.set({polymerLayout:a})}}class RNASequenceLinearMapState extends SequenceLinearMapState{defaults(){return{...super.defaults(),maxZoom:p.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM:f.LINEAR_MAX_ZOOM_NO_MODS,polymerLayout:f.DEFAULT_RNA_SEQUENCE_LAYOUT}}overrideZoomChange(e,t){return t>f.LINEAR_MAX_ZOOM_NO_MODS&&t<f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM?e>t?f.LINEAR_MAX_ZOOM_NO_MODS:f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM:t}adjustLayoutsForZoom(e){super.adjustLayoutsForZoom(e)
this.getBasesLayout().set({detailedView:e.newZoom>=f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM})}adjustPolymerLayoutsForZoom({newZoom:e}){const t=this.get("polymerLayout"),n={...t,modifiedNucleotides:{...t.modifiedNucleotides,visible:e>=f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM&&p.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES}}
this.set({polymerLayout:n})}}class OligoLinearMapState extends PolymerLinearMapState{defaults(){return{...super.defaults(),minZoom:f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM,maxZoom:f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM,polymerLayout:f.DEFAULT_OLIGO_LAYOUT}}initialize(e,t){super.initialize(e,t)
this.setZoom(f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM)}getBasesLayout(){return this.get("layout").DNA}}class OligoConjugateMapState extends PolymerLinearMapState{defaults(){return{...super.defaults(),minZoom:f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM,maxZoom:f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM,polymerLayout:f.DEFAULT_OLIGO_CONJUGATE_LAYOUT,complexPolymerType:I.Jt.OLIGO_CONJUGATE}}initialize(e,t){super.initialize(e,t)
this.setZoom(f.DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM)}getBasesLayout(){return this.get("layout").DNA}}class CircularMapState extends SinglePolymerMapState{defaults(){return{...super.defaults(),zoom:.5,isDefault:!0,stepZoom:.01,stepPan:1,minInnerRadius:40,cutoffRadius:300,minZoom:0,maxZoom:1,cutoffZoom:.2,layout:(0,A.ZP)(),fullCircleView:!0,leftBP:0,rightBP:0,sequence:null,DNAOffset:0,height:null,width:null,cx:null,cy:null}}initialize(){super.initialize(...arguments)
const e=this.get("visibilityOptions"),t=e.getOption(T.ih.name)
this.listenTo(t,"change:visible",this.updateLabelShow)
this.listenTo(e,"change:visible",this.updateShow)
this.updateLabelShow()
this.updateShow()}updateLabelShow(){const e=this.get("visibilityOptions").getOption(T.ih.name).get("visible")
this.get("layout").CircularAnnotationsLayout.set("inlineLabelsVisible",e)
this.get("layout").CircularTranslationsLayout.set("inlineLabelsVisible",e)
this.get("layout").CircularPartAnnotationsLayout.set("inlineLabelsVisible",e)
this.get("layout").CircularPrimersLayout.set("inlineLabelsVisible",e)
this.trigger("invalidateLayers")
return this.trigger("redraw")}updateShow(){var e,t
const n=this.get("visibilityOptions"),a=n.getOption(T.jB.name).get("visible"),i=n.getOption(T.KL.name).get("visible"),r=null!==(t=null===(e=n.getOption(T.qh.name))||void 0===e?void 0:e.get("visible"))&&void 0!==t&&t,s=n.getOption(T.D1.name).get("visible"),o=n.getOption(T.gY.name).get("visible"),l=n.getOption(T.gO.name).get("visible"),c=n.getOption(T.Cz.name).get("visible"),d=n.getOption(T.xs.name).get("visible"),u=n.getOption(T.Jv.name).get("visible"),m=n.getOption(T.Nq.name).get("visible"),p=this.get("layout")
p.CircularAnnotationsLayout.set("visible",a)
p.CircularTranslationsLayout.set("visible",i)
p.CircularPartAnnotationsLayout.set("visible",r)
p.CircularPrimersLayout.set("visible",o)
p.CircularORFsLayout.set("visible",s)
p.AxisLayout.set("visible",c)
p.HomologyAxisLayout.set("visible",d)
p.DNALayout.set("visible",u)
p.HomologyDNALayout.set("visible",m)
p.LabelLayout.set("annotationsVisible",a)
p.LabelLayout.set("translationsVisible",i)
p.LabelLayout.set("partAnnotationsVisible",r)
p.LabelLayout.set("primersVisible",o)
p.LabelLayout.set("cutSitesVisible",l)}getRadius(){return this.zoomToRadius(this.get("zoom"))}zoomToRadius(e){const t=this.get("cutoffRadius"),n=this.get("cutoffZoom"),a=this.get("minRadius"),i=this.get("maxRadius")
return(()=>{let r
if(e<n){r=Math.pow(e/n,1)
return r*(t-a)+a}r=1-Math.pow((e-n)/(1-n),2)
return i-r*(i-t)})()}radiusToZoom(e){const t=this.get("cutoffRadius"),n=this.get("cutoffZoom"),a=this.get("minRadius"),i=this.get("maxRadius")
return(()=>{let r
if(e<t){r=(e-a)/(t-a)
return Math.pow(r,1)*n}if(e>t){r=1-(i-e)/(i-t)
return n+Math.pow(r,.5)*(1-n)}return n})()}adjustCutoff(){const e=this.get("minRadius"),t=this.get("maxRadius")
if(void 0!==e&&void 0!==t)return e<300&&300<t?this.set("cutoffRadius",300):this.set("cutoffRadius",e+(t-e)*this.get("cutoffZoom"))}setMaxRadius(e,t){e=Math.max(this.get("minRadius")+10,e)
if(t){this.set({maxRadius:e})
this.adjustCutoff()
return}const n=this.zoomToRadius(this.get("zoom"))
this.set({maxRadius:e})
this.adjustCutoff()
const a=this.radiusToZoom(n)
return this.setZoom(a)}setMinRadius(e,t){if(t){this.set({minRadius:e})
this.adjustCutoff()
return}const n=this.zoomToRadius(this.get("zoom"))
this.set({minRadius:e})
this.adjustCutoff()
const a=this.radiusToZoom(n)
return this.setZoom(a)}smoothChangePanByStep(e){const t=this.get("sequence").length(),n=(this.get("DNAOffset")+t)%t,a=(n+e*this.get("stepPan"))%t,i=a-t,r=a+t,s=u.default.min([a,i,r],(e=>Math.abs(n-e)))
return d()({offset:n}).animate({offset:s},{duration:100,step:(o=this,function(){return o.setOffset(this.offset)})})
var o}changePanByStep(e){const t=this.get("DNAOffset")+e*this.get("stepPan")
return this.setOffset(t)}smoothZoomByStep(e,t=null){null==t&&(t=this.get("stepZoom"))
const n=this.get("zoom"),a=n+e*t
return d()({currentZoom:n}).animate({currentZoom:a},{duration:100,step:(i=this,function(){return i.setZoom(this.currentZoom)}),complete:(e=>()=>e.setZoom(a))(this)})
var i}changeZoomByStep(e){const t=this.get("zoom")+e*this.get("stepZoom")
return this.setZoom(t)}setZoom(e){const t=Math.max(this.get("minZoom"),Math.min(this.get("maxZoom"),e))
return this.set("zoom",t)}setOffset(e){const t=this.get("sequence").length()
if(0===t)e=0
else{(e%=t)<-t/2&&(e+=t)
e>t/2&&(e-=t)}return this.set("DNAOffset",e)}}class MiniMapState extends SinglePolymerMapState{initialize(e,t){super.initialize(...arguments)
this.get("layout").DNA.set({visible:!1})
const n=this.get("visibilityOptions").getOption(T.ih.name)
this.listenTo(n,"change:visible",this.updateLabelShow)
this.inlineLayeringMode=(null!=t?t.inlineLayeringMode:void 0)||f.LINEAR_LAYER_INLINE
this.updateLabelShow()}updateLabelShow(){const e=this.get("visibilityOptions").getOption(T.ih.name).get("visible")?this.inlineLayeringMode:f.LINEAR_LAYER_FULL
this.set({layeringMode:e})}defaults(){return{...super.defaults(),fontWidthZoom:0,minFontWidth:0,maxFontWidth:1,zoomEnabled:!0,scale:s().scale.log().range([0,1]),zoom:0,stepZoom:.01,layout:(0,_.ZP)(),layeringMode:f.LINEAR_LAYER_FULL,sequence:null,leftBP:0,inlineLabelPadding:2,polymerLayout:f.DEFAULT_DNA_SEQUENCE_LAYOUT}}zoomByFactor(e){return this.setFontWidth(this.getFontWidth()*e)}updateLayout(e){this.get("layout").DNA.get("type").setWidth(e)}setZoom(e){const t=this.get("scale")
e=Math.min(this.getMaxZoom(),Math.max(this.getMinZoom(),e))
const n=t.invert(e)
this.updateLayout(n)
return this.set({zoom:e,fontWidthZoom:n})}setFontWidth(e){const t=this.get("scale")(e=Math.min(this.getMaxFontWidth(),Math.max(this.getMinFontWidth(),e)))
this.updateLayout(e)
return this.set({zoom:t,fontWidthZoom:e})}setFontWidthRange(e,t){let n=this.getFontWidth()
n=n===this.getMinFontWidth()?e:Math.min(t,Math.max(e,n))
this.get("scale").domain([e,t])
this.setFontWidth(n)
return this.set("zoomEnabled",e!==t)}getMinZoom(){return this.get("scale").range()[0]}getMaxZoom(){return this.get("scale").range()[1]}getMinFontWidth(){return this.get("scale").domain()[0]}getMaxFontWidth(){return this.get("scale").domain()[1]}getFontWidth(){return this.get("fontWidthZoom")}getZoom(){return this.get("zoom")}getStepZoom(){return this.get("stepZoom")}inlineAnnotationLabelPlacement(e,t){const n=t.get("xInv"),a=n(5),i=n(this.get("inlineLabelPadding")),r=n(this.get("layout").Annotations.get("type").width(e.name().length))+i
if(N.modelEndToRender(e.layerEnd(this.get("sequence")),this.get("sequence").length())+r<this.get("sequence").length()-a)return"after"
return e.layerStart(this.get("sequence"))-r>a?"before":"none"}setInlineLayers(e){let t,n,a
const i=this.get("sequence"),r=this.get("layout").Annotations.get("type"),s=e.get("xInv"),textWidth=e=>s(r.width(e.name().length)),startFn=r=>{a=this.inlineAnnotationLabelPlacement(r,e)
n=s(this.get("inlineLabelPadding"))
let o=r.layerStart(i)
if("before"===a){t=textWidth(r)+n
o-=t}return{model:r,pos:o}},endFn=i=>{a=this.inlineAnnotationLabelPlacement(i,e)
n=s(this.get("inlineLabelPadding"))
let r=i.layerEnd()
if("after"===a&&0!==r){t=textWidth(i)+n
r+=t}return{model:i,pos:r}},o=C.eo(this.getAnnotations(e).shown,{startFn,endFn,top:!1})
for(const{model:e,layer:t}of Array.from(o))e.set(this.inlineLayeringMode,t,{silent:!0})
const l=C.eo((0,S.A)(this.get("sequence"),e.get("leftBP"),e.get("rightBP")).shownTranslations,{startFn,endFn,top:!1})
for(const{model:e,layer:t}of l)e.get("translationComponentModel").set(this.inlineLayeringMode,t,{silent:!0})
const c=C.eo(this.getPartAnnotations(e).shown,{startFn,endFn,top:!1})
for(const{model:e,layer:t}of Array.from(c))e.set(this.inlineLayeringMode,t,{silent:!0})}getAnnotations(e){const t=this.get("sequence"),n=t.annotations()
let a=[]
const i=n.slice(e.get("leftBP"),e.get("rightB"),(e=>{a=e
return u.default.sortBy(e,(e=>-e.length(t))).slice(0,100)}))
return{total:n,visible:a,shown:i}}getPartAnnotations(e){const t=this.get("sequence"),n=t.parts()
let a=[]
const i=n.slice(e.get("leftBP"),e.get("rightBP"),(e=>{a=e
return u.default.sortBy(e,(e=>-e.length(t))).slice(0,100)}))
return{total:n,visible:a,shown:i}}}},959415:(e,t,n)=>{n.d(t,{FE:()=>Selectables,Hn:()=>Selectable,_H:()=>deselect,sd:()=>RegionSelectable})
var a=n(440281),i=n.n(a),r=n(232606),s=n(132814)
class Selectable extends i().Model{defaults(){return{selected:!1,active:!1}}selected(){return this.get("selected")}active(){return this.get("active")}select(e){this.set({selected:!1},{silent:!0})
this.set({selected:!0},e)}}const o={allSelected:[],activeSelectable:null}
function deselect(e,t){null==t&&(t=o)
if(null!=t.activeSelectable){t.activeSelectable.set({active:!1})
for(const n of Array.from(t.allSelected))n.set({selected:!1},e)
t.allSelected=[]}}class RegionSelectable extends Selectable{layerStart(e){return this.start()}layerEnd(e){return this.end()}drawStart(e){return this.start()}drawEnd(e){return this.end()}length(e){return s.length(this.start(),this.end(),e.length())}}class Selectables extends i().Collection{initialize(e,t){null==t&&(t={})
this.scope=t.scope||o
this.listenTo(this,"change:selected",this.updateSelected.bind(this))}getCount(){return this.length}updateSelected(e,t,n){null==n&&(n={})
t&&this._doSelect(e,t,n)}_doSelect(e,t,n){if(t){(0,r.Gp)(null!=this.scope.activeSelectable||0===this.scope.allSelected.length,`@scope.activeSelectable is null but @scope.allSelected has length ${this.scope.allSelected.length}`)
if(null!=this.scope.activeSelectable){this.scope.activeSelectable.set({active:!1},n)
if(!n.multi||this.scope.activeSelectable.constructor!==e.constructor){for(const t of Array.from(this.scope.allSelected))t!==e&&t.set({selected:!1},n)
this.scope.allSelected=[]}}Array.from(this.scope.allSelected).includes(e)||this.scope.allSelected.push(e)
this.scope.activeSelectable=e
e.set({active:!0},n)}}deselect(e={}){deselect(e,this.scope)}selected(){return this.scope.allSelected.slice()}}},728417:(e,t,n)=>{n.d(t,{Y1:()=>Selection,ZP:()=>f,oH:()=>g})
var a=n(440281),i=n.n(a),r=n(531041),s=n(232606),o=n(955836),l=n(959415),c=n(294538),d=n(17086),u=n(171705),m=n(231017),p=n(132814),h=n(974913),E=n(166459),S=n(194119),T=n(260929)
const g=5e3
class Selection extends i().Model{defaults(){return{start:0,end:null,active:null,sequence:null,anchor:"start",state:{},startState:{},endState:{},handlers:{}}}allowEdits(){return this.polymer().allowResidueEdits()}getPolymerLength(){return this.polymer().length()}isPolymerCircular(){return this.polymer().circular()}triggerJump(e,t){return this.polymer().trigger("jump",e,t)}deleteSelection(){this.polymer().deleteSelection()}isWritable(){return this.polymer().allowResidueEdits()&&this.polymer().isSelectionEditable()}isDeletable(){return this.polymer().allowResidueEdits()&&this.polymer().isSelectionDeletable()}getSelectionResidues(){const e=this.assertNotEmpty()
return this.polymer().residueSlice(e.start(),e.end())}initialize(){const e=n(231017).Z,t=n(55873).Z,a=n(469573).Z
this.on("change:end",(()=>{(0,s.Gp)(0!==this.end(),"Somehow, selection end got set to 0.")}))
if(this.polymer()instanceof e){const e=this.polymer().id
this.on("change:start change:end",(()=>{r.default.defer((()=>t.selectRange(e,this.start(),this.end())))}))
a.addChangeListener((()=>this.set(a.getSelection(e))))}else null!=this.polymer()&&this.on("change:start change:end",(()=>{r.default.defer((()=>(0,E.getStore)().dispatch(S.u$(this.polymer().id,this.start(),this.end()))))}))}isCopyable(){const e=this.length()
return 0<e&&e<=5e5}isBlastable(){const e=this.length()
return 0<e&&e<=g}isReallyBig(){return this.length()>4e5}sequence(){return this.get("sequence")}polymer(){return this.get("sequence")}anchorEnd(){return this.get("anchor")}freeEnd(){return c.$[this.get("anchor")]}start(){return this.get("start")}end(){return this.get("end")}_getModelAttribute(e){(0,s.hu)(["start","end"].includes(e),`Unrecognized selection attribute: ${e}`)
let t=this.get(e)
if(null==t)return t
const n=this.getPolymerLength()
if(0===n){(0,s.hu)(0===t,"")
return t}(0,s.Gp)(t>=0,`Selection ${e} is out of bounds: ${t} >= 0 check failed.`)
if(t>n){T.ZK("Selection is out of bounds: value > length. This could be a result of a sequence part being deleted.",{extra:{attribute:e,value:t,length:n}})
t=n}return p.mod(t,n)}modelStart(){return this._getModelAttribute("start")}modelEnd(){return this._getModelAttribute("end")}residueType(){return this.polymer()instanceof m.Z?o.sW.AA:o.sW.NUCLEOTIDE}calcLength(e,t){return null===t?0:e===t||0===e&&t===this.getPolymerLength()?this.getPolymerLength():(t-e+this.getPolymerLength())%this.getPolymerLength()}length(){return this.calcLength(this.start(),this.end())}clear(e){this.reset(0)}contains(e){if(this.isEmpty())return!1
const t=this.start(),n=this.end()
return t<n?t<=e&&e<n:e>=t||e<n}slice(e,t){const n=this.start(),a=this.end()
let i=[]
this.isEmpty()?(e<=n&&n<t||t===this.getPolymerLength()&&n===t)&&(i=[this]):(n===a||n>a&&(t>n||e<a)||n<t&&a>e)&&(i=[this])
return i}isEmpty(){return null===this.end()}isNotEmpty(){return!this.isEmpty()}assertNotEmpty(){(0,s.hu)(this.isNotEmpty(),"Expected range to not be empty.")
return this}canDigest(){return null!=this.getStartState("cutsite")&&null!=this.getEndState("cutsite")}canPCR(){const e=this.getStartState("primer"),t=this.getEndState("primer")
return null!=e&&null!=t&&(e.nucleotideType()!==o.Wy.RNA&&t.nucleotideType()!==o.Wy.RNA&&(1===e.strand()&&-1===t.strand()))}canInvert(){return this.isPolymerCircular()||0===this.start()||this.end()===this.getPolymerLength()}select(e,t=null,a=null){null==t&&(t=e.start())
null==a&&(a=e.end())
const i=n(64717).Z
if(p.isWrap(t,a)&&this.polymer()instanceof i){h.ZP.warn("Selections around the origin are disabled on alignments.",{id:"circular-alignment-selection"})
return}const r=this
r.reset(e.start())
const unselect=e=>function(t){e.set({selected:!1})
return t.clearHandlers()}
a=0===a?this.getPolymerLength():a
r.setEndpoints(t,a)
r.setFreeEnd(-1===e.strand()?"start":"end")
e.set({selected:!0})
r.addHandlers({reset:unselect(e),circularExtend:unselect(e),linearExtend:unselect(e),setEndpoints:unselect(e)})
this.triggerJump(t,a)}reset(e){const t=this.getPolymerLength()
null!=e&&!Number.isNaN(e)&&0<=e&&e<=t||(e=0)
this.set({start:e,end:null,active:null,anchor:"start"})
this._callHandles("reset",e)
this.set("state",{})
this.set("startState",{})
this.set("endState",{})
l._H({event:"reset"})}resetBy(e){let t=this.start()+e
const n=this.getPolymerLength()
if(!(t<0||t>n)||this.isPolymerCircular())if(0===n)this.reset(0)
else{t=p.modInclusive(t,n)
this.reset(t)}}setEndpoints(e,t,n){null==n&&(n={})
0===t&&(t=this.getPolymerLength())
let a=null!=e&&!Number.isNaN(e)&&!Number.isNaN(t);(0,s.Gp)(a,`Cannot set selection endpoints to: ${e}, ${t}`)
if(!a){e=0
t=null}a=null==t||e<=t||this.isPolymerCircular()
a||([e,t]=[t,e])
0===this.getPolymerLength()?this.set({start:0,end:null,active:null,anchor:"start"},n):this.set({start:e,end:t},n)}getEndpoints(){return[this.start(),this.end()]}setFreeEnd(e,t){null==t&&(t={})
this.set("anchor",e,t)
this.set("anchor",this.freeEnd(),t)
return this._callHandles("drag")}_callHandles(e,...t){if(null!=this.get("handlers")[e])return this.get("handlers")[e].map((e=>e(this,...t)))}circularExtendBy(e){const t=this.getPolymerLength()
if(0===t)return
let n=this.get(this.freeEnd())
null==n&&(n=this.get(this.anchorEnd()))
const a=(n+e+t)%t
this.circularExtend(a)}circularExtend(e){const t=this.getPolymerLength()
if(0===t)return
const n=this.freeEnd(),a=this.get(this.freeEnd()),i=this.start(),r=this.end(),s=["start","end","anchor","startState","endState"],o=this.pick(...s),l={silent:!0},c=this.calcLength(i,r),d="start"===this.freeEnd()?this.calcLength(e,r):this.calcLength(i,e),u=c>3/4*t
if(Math.abs(d-c)>t/2)if(u)"end"===this.freeEnd()?this.set("end",i,l):"start"===this.freeEnd()&&this.set("start",r===t?0:r,l)
else{this.set(this.freeEnd(),e,l)
this._swap(l)
if(this.start()===this.end()){this.set("end",null,l)
this.setFreeEnd("end",l)}}else this.set(this.freeEnd(),e,l)
this._cleanUpStartAndEnd(l)
const m=this.pick(...s)
this.set(o,l)
this.set(m)
this.unselectHelper(n)
this._callHandles("circularExtend",a,e,n)}_expandHelper(e,t,n){t=0===t?this.getPolymerLength():t
const a=this.start(),i=this.end(),s=p.isWrap(a,i)||p.isWrap(e,t)||!d.U2("isLinear"),tryRange=(e,t,n)=>{if(p.isWrap(e,t)&&!s)return null
if(null==e||null==t)return null
if(p.isWrap(e,t)&&!this.isPolymerCircular())return null
n=n.filter((e=>null!=e))
return p.doesRangeInclude(e,t,n)?{len:p.length(e,t,this.getPolymerLength())}:null},o=tryRange(a,t,[e,i-1]),l=tryRange(e,i,[a,t-1]),c=tryRange(e,t,[a,i-1]),u=tryRange(a,i,[e,t-1]),m=null==i?tryRange(a,t,[e]):void 0,h=null==i?tryRange(e,a,[t-1]):void 0
switch(r.default.min(r.default.compact([o,l,c,u,m,h]),(e=>e.len))){case o:this.forceMoveEnd("end",t,n)
break
case l:this.forceMoveEnd("start",e,n)
break
case c:this.setEndpoints(e,t)
break
case u:break
case m:this.forceMoveEnd("end",t,n)
break
case h:this.forceMoveEnd("start",e,n)
break
default:this.setEndpoints(a,a)}}expandRange(e,t,n){null==n&&(n=!0)
return this._expandHelper(e,t,n)}_cleanUpStartAndEnd(e){const t=this.getPolymerLength()
this.isEmpty()||this.start()!==t||this.set("start",0,e)
0===this.end()&&this.set("end",t,e)}forceMoveEnd(e,t,n,a){null==a&&(a=!0)
const i=this.get(e),r=["start","end","anchor","startState","endState"],s=this.pick(...r),o={silent:!0},l=this.start()
if(this.isEmpty()){this.set("end",l,o)
"start"===e&&this._swap()}this.set("anchor","start"===e?"end":"start")
this.set(e,t,o)
if(this.start()===this.end()&&a){this.set("end",null,o)
this.setFreeEnd("end",o)}this._cleanUpStartAndEnd(o)
if(n){const e=this.pick(...r)
this.set(s,o)
this.set(e)}this.unselectHelper(e)
this._callHandles("linearExtend",i,t,e)}expand(e,t){null==t&&(t=!0)
const n=this.getPolymerLength()
if(0===n)return
const a=this.start(),i=this.end(),r=!this.isEmpty&&p.isWrap(a,i)||!d.U2("isLinear"),s=p.distance(e,a,this.getPolymerLength(),r),o=p.distance(e,i,this.getPolymerLength(),r),l=this.isEmpty()?r?p.length(e,a,n)<p.length(a,e,n)?"start":"end":e>a?"end":"start":o<s?"end":"start"
this.forceMoveEnd(l,e,t)}linearExtend(e,t){null==t&&(t=!0)
const n=this.getPolymerLength()
if(0===n)return
const a=this.freeEnd(),i=this.get(this.freeEnd()),r=["start","end","anchor","startState","endState"],s=this.pick(...r),o=this.start(),l=this.end(),c={silent:!0}
if(this.isEmpty()){if(o!==e){this.set("end",e,c)
o>e&&this._swap(c)}}else if("end"===this.freeEnd()&&l<=o&&e>=o)this.set("end",o,c)
else if("start"===this.freeEnd()&&l<=o&&e<=l)this.set("start",l===n?0:l,c)
else{this.set(this.freeEnd(),e,c);("start"===this.freeEnd()&&o<l&&e>=l||"end"===this.freeEnd()&&o<l&&e<=o)&&this._swap(c)
if(this.start()===this.end()){this.set("end",null,c)
this.setFreeEnd("end",c)}}this._cleanUpStartAndEnd(c)
if(t){const e=this.pick(...r)
this.set(s,c)
this.set(e)}this.unselectHelper(a)
this._callHandles("linearExtend",i,e,a)}unselectHelper(e){const t="start"===e?"getStartState":"getEndState";["primer","cutsite"].map((e=>this[t](e))).forEach((e=>null==e?void 0:e.set({selected:!1})))
this.set("start"===e?"startState":"endState",{})}linearExtendBy(e){(0,s.hu)([1,-1].includes(e),"")
const t=this.getPolymerLength()
if(0===t)return
let n=(this.isEmpty()?this.get("start"):this.get(this.freeEnd()))+e
if((n<0||n>t)&&!this.isPolymerCircular())return
const a=!this.isEmpty()&&(e>0&&"start"===this.freeEnd()||e<0&&"end"===this.freeEnd())
if(t!==this.length()||a){n!==t&&(n=p.mod(n,t))
this.isEmpty()?e<0?this.forceMoveEnd("start",n,!0,a):this.forceMoveEnd("end",n,!0,a):this.forceMoveEnd(this.freeEnd(),n,!0,a)}}resetByRow(e,t,n){const a=this.getPolymerLength()
if(0===a)return
let i=this.get(this.freeEnd())
i=null!=i?i:this.get(this.anchorEnd())
const r=Math.ceil(a/t)
let s=Math.floor(i/t)+e
if(!(s<0||s>=r)||this.isPolymerCircular()){s%=r
s<0&&(s+=r)
s===r-1?this.reset(Math.min((r-1)*t+n,a)):this.reset(s*t+n)}}linearExtendByRow(e,t,n){const a=this.getPolymerLength()
if(0===a)return
let i=this.get(this.freeEnd())
i=null!=i?i:this.get(this.anchorEnd())
const r=Math.ceil(a/t),s=Math.floor(i/t)
let o=s+e
const l=["start","end","anchor","startState","endState"],c=this.pick(...l)
if((o<0||o>=r)&&!this.isPolymerCircular())return
o%=r
const d={silent:!0}
o<0&&(o+=r)
if(e>0)if(0===i&&0!==n)this.linearExtend(n,!1)
else if(o===r-1)this.linearExtend(Math.min(a,t*e+i))
else if(s+e>=r){this.linearExtend(a,!1)
if(this.length()!==a){this.set(this.freeEnd(),0,d)
this.linearExtend(o*t+n,!1)}}else this.linearExtend(o*t+n,!1)
else if(e<0){if(0===i){this.set(this.freeEnd(),a,d)
o-=1}if(o>s){this.linearExtend(0,!1)
const e=o*t+n
if(e<a&&this.length()!==a){this.set(this.freeEnd(),a,d)
this.linearExtend(e,!1)}}else this.linearExtend(o*t+n,!1)}this._cleanUpStartAndEnd(d)
const u=this.pick(...l)
this.set(c,d)
return this.set(u)}_swap(e){null==e&&(e={})
this.set({start:this.end(),end:this.start()},e)
const t=this.get("startState"),n=this.get("endState"),a=r.default.extend({},t,{cutsite:n.cutsite}),i=r.default.extend({},n,{cutsite:t.cutsite})
this.set({startState:a,endState:i},e)
this.setFreeEnd(this.anchorEnd(),e)}hasStartState(e){return e in this.get("startState")}hasEndState(e){return e in this.get("endState")}addStartState(e){const t=this.get("startState")
for(var n in e){const t=e[n]
null!=t.on&&this.listenTo(t,"destroy",(function(){return this.unsetStartState(n)}))}this.set({startState:r.default.extend({},t,e)})}addEndState(e){const t=this.get("endState")
for(var n in e){const t=e[n]
null!=t.on&&this.listenTo(t,"destroy",(function(){return this.unsetEndState(n)}))}this.set({endState:r.default.extend({},t,e)})}addState(e){const t=this.get("state")
for(var n in e){const t=e[n]
null!=t.on&&this.listenTo(t,"destroy",(function(){return this.unsetState(n)}))}this.set({state:r.default.extend({},t,e)})}unsetStartState(e){const t=this.get("startState"),n=t[e]
null!=(null!=n?n.off:void 0)&&this.stopListening(n)
this.set({startState:r.default.omit(t,e)})}unsetEndState(e){const t=this.get("endState"),n=t[e]
null!=(null!=n?n.off:void 0)&&this.stopListening(n)
this.set({endState:r.default.omit(t,e)})}unsetState(e){const t=this.get("state"),n=t[e]
null!=(null!=n?n.off:void 0)&&this.stopListening(n)
this.set({state:r.default.omit(t,e)})}addHandlers(e){const t=this.get("handlers")
return(()=>{const n=[]
for(const a in e){const i=e[a]
null==t[a]&&(t[a]=[])
n.push(t[a].push(i))}return n})()}clearHandlers(){return this.set("handlers",{})}getState(e){return this.get("state")[e]}getStartState(e){return this.get("startState")[e]}getEndState(e){return this.get("endState")[e]}storeEnzymes(e,t){if(this.canDigest()){this.getStartState("cutsite").get("enzyme").set({active:!0})
this.getEndState("cutsite").get("enzyme").set({active:!0})
const n=[this.getStartState("cutsite").get("enzyme").id,this.getEndState("cutsite").get("enzyme").id]
if(null==t||t===u.nx.DNA)return e["copied-enzymes"]=n}}invert(){let e,t
for(const e of[this.getStartState("primer"),this.getEndState("primer")])null!=e&&e.set({selected:!1})
this.unsetStartState("primer")
this.unsetEndState("primer")
if(this.isPolymerCircular())if(this.isEmpty())this.setEndpoints(this.start(),this.start())
else if(this.length()===this.getPolymerLength())this.reset(this.start())
else{e=this.end()===this.getPolymerLength()?0:this.end()
t=0===this.start()?this.getPolymerLength():this.start()
this.setEndpoints(e,t)}else{(0,s.hu)(0===this.start()||this.end()===this.getPolymerLength(),`Shouldn't be inverting a selection (${this.start()}, ${this.end()}) on a linear sequence`)
0===this.start()&&this.end()===this.getPolymerLength()?this.reset(0):0===this.start()?this.isEmpty()?this.setEndpoints(0,this.getPolymerLength()):this.setEndpoints(this.end(),this.getPolymerLength()):this.setEndpoints(0,this.start())}return this.set({startState:this.get("endState"),endState:this.get("startState")})}clampToSequence(){const e=this.getPolymerLength(),t=Math.min(e,this.start())
if(null==this.end()){t!==this.start()&&this.reset(t)
return}const n=Math.min(e,this.end())
t===this.start()&&n===this.end()||(t===n?this.reset(t):this.setEndpoints(t,n))}clearState(){this.set({state:{},startState:{},endState:{}})}selectPair(e,t){this.addStartState({primer:e})
this.addEndState({primer:t})
this.setEndpoints(e.start(),t.end())
e.select()
return t.select({multi:!0})}}const f={BasicSelection:class BasicSelection extends Selection{allowEdits(){return!1}getPolymerLength(){return this.get("polymerLength")}isPolymerCircular(){return this.get("circular")}deleteSelection(){throw new Error("Delete selection not supported")}isWritable(){return!1}isDeletable(){return!1}triggerJump(){}},Selection}},773055:(e,t,n)=>{n.r(t)
n.d(t,{ComponentsSequence:()=>Sequence,Selection:()=>Ee.Y1,Sequence:()=>Sequence,SequenceVersion:()=>Version,TRANSCRIPTION_INDICES_QUERY:()=>ye,Tag:()=>fe.Z,Tags:()=>Ie.Z,Versions:()=>Versions})
var a=n(769784),i=n(64558),r=n(440281),s=n.n(r),o=n(767807),l=n.n(o),c=n(250965),d=n.n(c),u=n(531041),m=n(728510),p=n(468943),h=n(901369),E=n(232606),S=n(348920),T=n(675649),g=n(812651),f=n(955836),I=n(48047),A=n(171471),y=n(787004),_=n(459830),C=n(467607),R=n(915778),N=n(540285),O=n(518352),b=n(699418),v=n(420347),P=n(977043),L=n(390462),D=n(681896),M=n(281782),w=n(521332),F=n(91092),k=n(947730),U=n(900306),x=n(437810),B=n(171705),Z=n(973606),q=n(279785),G=n(958613),V=n(240870),H=n(961199),W=n(55873),Y=n(132814),$=n(974913),K=n(614392),z=n(432128),Q=n(166459),j=n(216101),J=n(497790),X=n(87209),ee=n(502633),te=n(783705),ne=n(771398),ae=n(317275),ie=n(970211),re=n(292132),se=n(813572),oe=n(524990),le=n(939754),ce=n(899304),de=n(146238),ue=n(273783),me=n(605262),pe=n(858240),he=n(571240),Ee=n(728417),Se=n(968653),Te=n(478752),ge=n(337520),fe=n(820039),Ie=n(360836),Ae=n(361810)
const ye=a.Ps`
  query TranscriptionIndicesQuery($sequenceId: StrictString!) @skipAudit @engComponent(name: MOLBIO) {
    bioentity(id: $sequenceId) {
      ... on SequenceNode {
        id
        transcriptionMatches {
          start
          end
          rnaSequence {
            ... on SequenceNode {
              __typename
              id
              name
              tagSchema {
                id
                iconId
              }
            }
          }
          isReverseComplement
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,F.f)("InaccessibleInfo").fragment}
`
class Version extends s().Model{defaults(){return{type:"versions"}}active(){return this.get("active")}cleanMetadata(){return d().ajax({url:`${this.url()}/validate`,type:"GET",dataType:"json"}).done(u.default.bind((function(e){let t=this.get("sequence_primers")
for(const n of Array.from(e.invalid_primers))t=u.default.filter(t,(e=>e.id!==n.id))
this.set("sequence_primers",t)}),this))}}class Versions extends Se.ZP{static initClass(){this.prototype.model=Version
this.prototype.attributeName="versions"}getLastId(){return 0!==this.size()?u.default.max(this.pluck("id")):null}}Versions.initClass()
class Sequence extends v.Z{constructor(){super(...arguments)
this.isOligo=()=>this.type()===C.uS.OLIGO
this.isRNASequence=()=>this.type()===C.uS.SINGLE_STRANDED
this.supportsChemicalMods=()=>S.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&(this.isOligo()||this.isRNASequence())}defaults(){return{currentVersion:!0,orfs:new pe.Z}}name(){return this._sequence().get("name")}displayLabel(){return this._sequence().get("displayLabel")}folder(){return this._sequence().folder()}nucleotideType(){return this._sequence().get("nucleotideType")}projectFolderId(){return this._sequence().get("projectFolderId")}setFolder(e){this._sequence().set({folder:e})
this.trigger("change")}clearProjectFolder(){return this._sequence().set({projectFolderId:null})}setProjectFolder(e){return this._sequence().set({projectFolderId:e.api_identifier})}initialNote(){return this.get("_sequence").get("note")}permissions(){return this._sequence().get("permissions")}setPermissions(e){this._sequence().set({permissions:e,writable:e.writable})
this.set({writable:e.writable})
this.trigger("change")}setNameAndDisplayLabel(e,t){this._sequence().set({name:e,displayLabel:t})}writable(){return this.get("writable")}_allowAnyEdits(e={}){null==e&&(e={})
return(e.ignoreVersion||this.get("currentVersion"))&&(e.ignoreLocked||!this.get("_sequence").get("locked"))&&!this.get("_sequence").get("unrecoverable")&&(null==this.lockingTab()||e.tabId===this.lockingTab().tabId)}allowEdits(e){return this.writable()&&this._allowAnyEdits(e)}isContainedInComplexPolymer(){return this.get("isContainedInComplexPolymer")}allowResidueEdits(e){var t
return(0,E.Gp)(Boolean(this.permissions()),"Expected permissions to be defined on sequence")?null!==(t=this.permissions().polymerResiduesEditable)&&void 0!==t&&t&&this._allowAnyEdits(e)&&!this.isContainedInComplexPolymer():this.allowEdits(e)}allowFeatureEdits(e){return(0,E.Gp)(Boolean(this.permissions()),"Expected permissions to be defined on sequence")?Boolean(this.permissions().polymerFeaturesEditable)&&this._allowAnyEdits(e):this.allowEdits()}modifiedAt(){return this.get("_sequence").get("modified_at")}createdAt(){return this.get("_sequence").createdAt()}tags(){return this.get("tags").toJSON()}setTags(e){this.get("tags").reset(e)
this.trigger("change")}tagSchema(){return this._sequence().get("tagSchema")}setTagSchema(e){this._sequence().set({tagSchema:e})
this.trigger("change")}authors(){return this._sequence().get("authors")}setAuthors(e){return this._sequence().set({authors:e})}archiveRecord(){return this._sequence().get("archiveRecord")}setArchiveRecord(e){this._sequence().set({archiveRecord:e})
this.trigger("change")}setSchemaValidationState(e){this._sequence().set({schemaValidationState:e})
this.trigger("change")}initialBioentityAliasInfos(){return this._sequence().get("bioentityAliasInfos")}setBanner(){const e=this.lockingTab()
this.allowResidueEdits()?this.setBannerText(null):this._sequence().get("unrecoverable")?this.setBannerText("Editing is disabled and your changes have not been saved."):this._sequence().get("locked")?this.setBannerText("Editing is disabled because sequence edits have been locked."):null!=e?this.setBannerText(`Editing disabled because the sequence has been locked by ${e.tabName}.`):this.get("currentVersion")?this.isContainedInComplexPolymer()?this.setBannerText("Editing bases is disabled because sequence is contained in a complex polymer."):this.allowFeatureEdits()||this.writable()?this.setBannerText("Editing bases is disabled due to insufficient permissions."):this.isArchived()?this.setBannerText("Editing disabled on archived sequence."):this.setBannerText((0,P.ke)(this.permissions(),"sequence")):this.setBannerText("Editing disabled on previous versions. "+(this.get("transcriptionsPresent")?"Transcription links will not be displayed.":""))}schemaValidationState(){return this._sequence().get("schemaValidationState")}duplicate(e={}){const t=n(322976).Z,a=n(776065).Z,i=new t({name:null!=e.name?e.name:this.name(),version:null!=e.version?e.version:"latest",initialFolderId:e.folderId,analyses:this.analyses().filter((e=>!e.isNew())).map((e=>({id:e.id,name:e.get("name")}))),sequenceID:this.id,cloneSuccess(e){$.ZP.success("Sequence successfully duplicated.")
a.openFile(e.id)}})
if(e.skipPrompt){i.render()
i.clone()
i.remove()}else new K.I4({title:"Copy Sequence to Folder",msg:i.render().el,view:i}).choice("Duplicate","btn-af-success",i.clone).choice("Cancel","btn-af-default").show()}isReallyBig(){return this.length()>4e5}bases(){return this.get("_sequence").bases()}type(){return this._sequence().get("type")}subtype(){return this._sequence().get("type")!==C.uS.OLIGO?this.nucleotideType()===I.NucleotideType.RNA?_.SequenceSubtype.RNA_SEQUENCE:_.SequenceSubtype.SEQUENCE:this.nucleotideType()===I.NucleotideType.RNA?_.SequenceSubtype.RNA_OLIGO:_.SequenceSubtype.DNA_OLIGO}_sequence(){return this.get("_sequence")}analyses(){return this.get("analyses")}annotations(){return this.get("annotations")}translationGroups(){return this._sequence().translationGroups()}translations(){return this.get("translations")}sequencePrimers(){return this.get("sequencePrimers")}fragmentResults(){return this.get("_sequence").fragmentResults()}orfs(){return this.get("orfs")}primerAssemblyMismatches(){return this.get("primerAssemblyMismatches")}goldenGateCutSites(){return this.get("goldenGateCutSites")}canInsertAt(e){return this.get("_sequence").canInsertAt(e)}getSequencePartsAt(e){return this.get("_sequence").getSequencePartsAt(e)}partHasOverlaps(e){return this.get("_sequence").partHasOverlaps(e)}hasNullPhosphate(){return this.get("_sequence").hasNullPhosphate()}getSequencePartsAtSelectionStart(){const e=this.selection().start()
return this.getSequencePartsAt(e===this.length()?0:e)}getSequencePartsInSelection(){const e=this.selection().start()===this.length()?0:this.selection().start(),t=this.selection().end()
return null==t?this.getSequencePartsAt(e):this.parts().getSequencePartsBetween(e,t)}parts(){return this.get("_sequence").get("parts")}modifiedNucleotides(){return this.get("_sequence").get("modifiedNucleotides")}residueSlice(e,t,n){return this.get("_sequence").residueSlice(e,t,n)}locked(){return this._sequence().locked()}canUseFullUTFlexibility(){return this.isOligo()&&(0,U.JG)()}recalculateTranscriptionsPresent(e){"SequenceNode"===e.__typename&&this.set("transcriptionsPresent",e.transcriptionMatches.length>0)}async cacheTranscriptionMatches(){const e=this.id
if(null!=e&&e.startsWith("seq_")){const t=await(0,D.doQuerySafe)({query:ye},{variables:{sequenceId:e},fetchPolicy:"network-only"})
this.recalculateTranscriptionsPresent(t.bioentity)}}registerTranscriptionListeners(){const updateTranscriptionsCallback=()=>{this.cacheTranscriptionMatches()}
this.listenTo(this.get("tags"),"reset",updateTranscriptionsCallback)
this.listenTo(this._sequence(),"change:bases change:parts",updateTranscriptionsCallback)}_translationToDict(e){return{id:e.id,start:e.start(),end:e.end(),strand:e.strand(),aminoAcidLength:e.aminoAcidLength(this),editable:e.editable(),fromSubPart:e.fromSubPart()}}getTranslationGroups(e){return this.translations().chain().map((e=>e.translationGroupId())).filter((t=>null==e||null!=t&&Array.from(e).includes(t))).compact().uniq().sort().value().map(((e,t)=>{const n=this.translations().filter((t=>t.translationGroupId()===e)),a=T.Sm(n.map((e=>e.length(this)))),i=(0,u.default)(n).chain().map((e=>this._translationToDict(e))).sortBy("start").value(),r=Math.floor(a/3)
return{id:e,translations:i,aminoAcidLength:r,name:`Group ${t+1}`}}))}getTranslationGroup(e){const t=this.getTranslationGroups([e])
if(1===t.length)return t[0]}getNonGroupTranslations(){return this.translations().chain().filter((e=>null!=e.id&&null==e.translationGroupId())).map((e=>this._translationToDict(e))).sortBy("start").value()}selectionContainedInPart(){const e=this.selection()
if(e.isNotEmpty()){const t=e.start(),n=e.end()
return this.parts().getSequencePartsBetween(t,n).some((e=>Y.isRangeWithin(t,n,e.start(),e.end())))}{const t=e.start()
if(t===this.length())return!1
return this.getSequencePartsAt(t).some((e=>e.start()!==t))}}resetAnnotations(){null!=this._annotations&&this.stopListening(this._annotations)
this._annotations=this.get("_sequence").get("annotations")
this.annotations()._annotations=this._annotations
this.listenTo(this._annotations,"batch",(function(){this.annotations().trigger("batch")}))
this.listenTo(this._annotations,"add",(function(e,t,n){this.annotations().add({_annotation:e,id:e.get("id"),visible:!0},n)}))
const e=this._annotations.map((e=>{const t=e.get("id"),n=this.get("annotations").get(t)
return{_annotation:e,id:t,visible:null==n||n.get("visible")}}))
return this.get("annotations").reset(e)}listenToTranslations(){null!=this._translations&&this.stopListening(this._translations)
this._translations=this.get("_sequence").translations()
this.listenTo(this._translations,"batch",(function(){this.translations().trigger("batch")}))
return this.listenTo(this._translations,"add",(function(e,t,n){this.translations().add({_translation:e,id:e.id},n)}))}resetTranslations(){this.listenToTranslations()
const e=this._translations.map((e=>({_translation:e,id:e.id})))
return this.translations().reset(e)}_updatePartnerSelected(){const e={},t=this.sequencePrimers()
this.get("_sequence").primerPairs().each((n=>{const[a,i]=Array.from(n.getPrimers(t))
e[a.id]||(e[a.id]=i.selected())
return e[i.id]||(e[i.id]=a.selected())}))
this.sequencePrimers().each((t=>t.set({partnerSelected:e[t.id]||!1})))}resetPrimers(){null!=this._primers&&this.stopListening(this._primers)
this._primers=this.get("_sequence").sequencePrimers()
this.listenTo(this._primers,"add remove",this.batchResetPrimer)
this.listenTo(this._primers,"batch",(function(){this.sequencePrimers().trigger("batch")}))
this.listenTo(this._primers,"change:bases change:bind_position change:overhang_length",(function(){this.goldenGateCutSites().updateCutSites(this.get("_sequence"))}))
const e=this._primers.map((e=>({_primer:e})))
this.sequencePrimers().reset(e)}circular(){return this.get("_sequence").get("circular")}startIndex(){return this.get("_sequence").startIndex()}selection(){return this.get("selection")}finalized(){return this.get("_sequence").finalized()}assemblyType(){return this.get("_sequence").assemblyType()}makeEnzymes(){const e=this.get("_sequence"),t=this.isReallyBig(),n=de.ZP.getCommonEnzymes()
n.each((n=>{t?n.set("cutPositions",[],{trigger:!1}):n.set("cutPositions",e.getCuts(n.toJSON()),{trigger:!1})
const a=z.Z.get(Z.n$.ENZYME_LIST_ID)
if(q.Uk(a)&&!q.H5(a,n.id))n.set("visible",!1,{trigger:!1})
else{const e=z.Z.get(Z.n$.VIEW_ENZYMES)
n.updateVisibleByCuts(e)}}))
return n}initialize(e,t){let n
this.updateVersions=this.updateVersions.bind(this)
if(null==this.get("_sequence"))return
const a=this.get("_sequence")
null==this.id&&this.set({id:a.id})
const i=this.isReallyBig(),r=new ce.Z({_sequence:a}),s=this.makeEnzymes(),o=new Versions(a.get("versions"),{sequenceID:this.id}),l=this.get("selection")||new Ee.Y1({sequence:this}),c=new le.Z(void 0,{enzymes:s,selection:l}),d=new he.Z,u=new ue.Z
n=null!=a.get("analyses")?Array.from(a.get("analyses")).map((e=>re.ud.parseAnalysis(e))):[]
this.set({_sequence:a,activeVersionId:a.latestVersionId(),dna:r,annotations:new se.Z,translations:new Ae.Z,sequencePrimers:new ge.Z([],{sequence:this}),selection:l,analyses:new re.xR(n,{sequenceID:this.id}),tags:new Ie.Z(a.get("tags"),{sequenceID:this.id}),versions:o,enzymes:s,cutsites:c,editURL:a.get("editURL"),writable:a.get("writable"),permissions:a.get("permissions"),primerAssemblyMismatches:d,goldenGateCutSites:u,lockingTabQueue:[],tagSchema:a.get("tagSchema"),projectFolderId:a.get("projectFolderId"),transcriptionsPresent:!1,isContainedInComplexPolymer:a.get("isContainedInComplexPolymer")})
this.batchResetPrimer=this.listenToBatch(this.sequencePrimers(),(function(){this.resetPrimers()}))
this.resetAnnotations()
this.resetTranslations()
this.resetPrimers()
this.updateORFs()
this.cacheTranscriptionMatches()
this.registerTranscriptionListeners()
d.updateMismatches(a)
u.updateCutSites(a)
this.get("cutsites").trigger("cutsitesChanged")
this.listenTo(a,"change:annotations",this.resetAnnotations.bind(this))
this.listenTo(a,"change:translations",this.resetTranslations.bind(this))
this.listenTo(a,"change:sequencePrimers",this.resetPrimers.bind(this))
this.listenTo(a,"change:editURL",((e,t)=>this.set("editURL",t)))
this.listenTo(a,"change:circular",this.updateDynamicFeatures.bind(this))
this.listenTo(a,"change:circular",(()=>{this.sequencePrimers().setLayers()}))
this.listenTo(a,"change:bases reset",this.updateDynamicFeatures.bind(this))
this.listenTo(a,"change:locked change:unrecoverable change:permissions change:archiveRecord",this.setBanner.bind(this))
this.listenTo(a,"change:bases change:fragmentResults change:finalized",(()=>{d.updateMismatches(a)
u.updateCutSites(a)}))
this.listenTo(l,"delete",this.deleteSelection.bind(this))
this.listenTo(a,"change:latestVersionId",this.setCurrentVersion.bind(this))
this.on("change:activeVersionId",this.setCurrentVersion.bind(this))
this.on("change:currentVersion change:writable change:permissions",this.setBanner.bind(this))
this.listenTo(s,"change:color",this.setEnzymeColors.bind(this))
this.listenTo(this.sequencePrimers(),"change:selected",this._updatePartnerSelected.bind(this))
this.listenTo(this,"cutstherepls",this.updateCutsInRange.bind(this))
this.initGraphQLSync()
i&&this.trigger("cutswherepls")}initGraphQLSync(){(0,M.a)(w.$.COMPONENT_SEQUENCE,this)
this.listenTo(this.get("_sequence"),"change:bases change:name change:modifiedNucleotides",(()=>this.trigger("change")))
this.listenTo(this.sequencePrimers(),"reset sort update",(()=>this.trigger("change")))}listenToRestrictionPanelState(){return this.listenTo(this.get("fileState").get("toolbar").get("restrictionPanelState"),"change:highlightCompatible",this.changeHighlightCompatible.bind(this))}primerPairs(){return this.get("_sequence").get("primerPairs")}async getVersionToResetTo(){const e=this.get("versions").sortBy((e=>e.get("id"))).reverse(),t=e.map((e=>({id:e.get("id"),parentId:e.get("parentId")}))),n=t[0],a=ie.nv(n,t),i=e.filter((e=>e.get("id")===a))[0]
await(null==i?void 0:i.fetch())
return i}async undo(){const e=await this.getVersionToResetTo()
null!=e&&await this.resetToVersion(e)}async resetToVersion(e){try{await this.get("_sequence").save({reset:e.get("id")},{patch:!0,fileUpdate:!0})
$.ZP.success(`**${this.name()} has been successfully reset to an older version`)}catch(e){$.ZP.notifyError(e)}await this.updateVersions({switchToLast:!0})
this.selection().clampToSequence()}viewVersion(e){this.setActiveVersionId(e.id)
return e.fetch().done((()=>{this.setCurrentVersion()
const t=[this.annotations(),this.sequencePrimers(),this.translations()]
s().batchModify(t,this,(function(){this._sequence().annotations().set(e.get("annotations"))
let t=e.get("finalized")
t=null==t||t
const n=new g.FragmentResultCollection(e.get("fragment_results"),{parse:!0})
this._sequence().set({bases:e.get("bases"),sequencePrimers:new g.SequencePrimerCollection(e.get("sequence_primers"),{sequenceID:this.id}),primerPairs:new g.PrimerPairCollection(e.get("primer_pairs"),{sequenceID:this.id}),translationGroups:e.get("translation_groups"),translations:new g.TranslationCollection(e.get("translations"),{sequenceID:this.id}),parts:new g.PartCollection(e.get("parts").filter((e=>null!=e.sequence_id)),{parse:!0}),circular:e.get("circular"),startIndex:e.get("startIndex"),modifiedNucleotides:e.get("modified_nucleotides"),fragmentResults:n,finalized:t})}))
this.selection().clampToSequence()
this.selection().clearState()
this.trigger("jump",0)}))}fetch(...e){if(this._sequence()){const e=this.getActiveVersion()
if(null!=e&&e!==this.get("versions").max((e=>e.id)))return this.viewVersion(e)}const t=this._sequence()||new g.Sequence({id:this.get("id")})
return t.fetch(...e).then((()=>{if(null==this._sequence()){this.set("_sequence",t)
this.initialize()}else this.set("activeVersionId",this._sequence().latestVersionId())
return this}))}length(){return null!=this.get("_sequence")?this.get("_sequence").bases().length:0}isEmpty(){return this.get("_sequence").isEmpty()}isSelectionEditable(){const e=this.selection()
return e.isNotEmpty()?this.get("_sequence").isRegionEditable(e.start(),e.end()):this.get("_sequence").canInsertAt(e.start())}isSelectionDeletable(){const e=this.selection()
return!!e.isNotEmpty()&&(!!this.isOligo()||this.get("_sequence").canInsertAt(e.start())&&this.get("_sequence").canInsertAt(e.end()))}getActiveVersion(){return this.get("versions").findWhere({id:this.getActiveVersionId()})}getActiveVersionId(){return this.get("activeVersionId")}setActiveVersionId(e){this.set("activeVersionId",e)}setLatestVersionId(e,t){null==t&&(t={})
let{activateIfOnCurrent:n}=t
null==n&&(n=!1)
n&&this.get("currentVersion")&&this.setActiveVersionId(e)
this._sequence().setLatestVersionId(e)}setCurrentVersion(){const e=this.getActiveVersionId(),t=this._sequence().latestVersionId()
return this.set("currentVersion",e>=t)}async updateVersions(e={}){u.default.defaults(e,{callback:null,switchToLast:!1,showHistoryPanel:!0})
const t=this.get("versions")
await t.fetch({reset:!0})
let n=this.get("versions").max((e=>e.get("id")))
const a=this.get("currentVersion")
n.id>this._sequence().latestVersionId()&&this._sequence().setLatestVersionId(n.id)
if(e.switchToLast){n=u.default.max(t.models,(e=>e.get("id")))
e.showHistoryPanel&&t.trigger("open",n)
await this.viewVersion(n)}else a&&this.getActiveVersionId()!==this._sequence().latestVersionId()&&this.setActiveVersionId(this._sequence().latestVersionId())
this.setCurrentVersion()
"function"==typeof e.callback&&e.callback()
t.trigger("reloaded")}deleteSelection(e={}){u.default.defaults(e,{respondDiff:!0,fileUpdate:!0,patch:!0,callback:i.ZT})
const t=this.get("selection")
if(!t.isNotEmpty())return
const n=this.get("_sequence")
if(!h.Z.of(n).canDelete(n,t,$.ZP.warn))return
const a=Y.length(t.start(),t.end(),n.length()),r=Math.min(t.start(),n.length()-a),s=this.deleteBases(t.start(),t.end(),e)
s.fail($.ZP.notifyError)
s.client.done((()=>{t.reset(r)}))
null!=h.Z.of(n).assemblyType&&s.done((()=>{t.reset(r)
h.Z.of(n).didDelete(n,t,a,$.ZP.success,$.ZP.error)}))
return s}handleCopy(e){const{start:t,end:n,selection:a,source:i,helpText:r}=(0,B.Ao)(this,this.get("selection"))
let s,o
if(i instanceof Sequence){const e=i.createFromSelection(t,n,{annotations:!0,notcontained:!1,reverseComplement:!1,primers:(0,B.sG)(i),save:!1})
s=e.bases()
o=e.modifiedNucleotides()}else{s=i.bases()
o=i.modifiedNucleotides()}(0,ee.Z)(G.Z,{additionalHelpText:r,bases:s,nucleotideType:i.nucleotideType(),shouldRenderHelmOption:this.supportsChemicalMods()&&!s.includes("-"),shouldRenderOriginalModeOption:i.canUseFullUTFlexibility(),modifiedNucleotides:o,areSequenceFeatureOptionsApplicable:i instanceof Sequence&&!i.isOligo(),isOligo:i instanceof Te.Z||i.isOligo(),initialSelect:e,copyHandler:function copyHandler(e,r,s,o){if(null==a||a.start()===t&&a.end()===n)switch(s){case B.nx.DNA:case B.nx.DNA_REVERSE_COMPLEMENT:case B.nx.RNA:case B.nx.RNA_REVERSE_COMPLEMENT:case B.nx.ORIGINAL:V.ZP.storeNucleotideRegionInBenchlingClipboard(i,s,e,r,t,n,a)
break
default:te.BR.store(o)}else $.ZP.error("The selection has changed since the beginning of the copy operation. Please re-create your selection and try again.")}})}getNoteParts(){var e
return null===(e=this.get("_sequence").get("note"))||void 0===e?void 0:e.noteParts}handleCreateFromSelectionClick(e,t){const n=this.get("selection").assertNotEmpty(),a=Y.fullCircular(this.circular(),n.start(),n.end(),this.length()),i=(()=>{if(e){if(e===C.uS.DOUBLE_STRANDED)return f.Wy.DNA
if(e===C.uS.SINGLE_STRANDED)return f.Wy.RNA;(0,E.Gp)(!1,"Cannot create new oligo from sequence selection")
return this.nucleotideType()}return this.nucleotideType()})(),r=d()((0,oe.Z)({circular:a,sourceSequenceType:this.type(),strand:t,targetNucleotideType:i})),s=(0,B.sG)(this),o=null!=s[0]||null!=s[1]
r.find(".primer-bases-wrapper").toggleClass("hidden",!o)
r.find(".primer-bases").prop("checked",z.Z.get(C.zm.PRIMER_BASES))
r.find(".annotations").prop("checked",z.Z.get(C.zm.ANNOTATIONS))
r.find(".not-contained-annotations").prop("checked",z.Z.get(C.zm.ANNOTATIONS_NOT_CONTAINED))
r.find(".tags").prop("checked",z.Z.get(C.zm.TAGS))
r.find(".description").prop("checked",z.Z.get(C.zm.DESCRIPTION))
r.find(".js-preserve-indices").prop("checked",1!==this.startIndex())
z.Z.get(C.zm.ANNOTATIONS)||r.find(".not-contained-annotations").prop("disabled",!0)
d()("body").append(r)
r.modal("show")
r.find(".annotations").on("change",(()=>{if(r.find(".annotations").prop("checked"))return r.find(".not-contained-annotations").prop("disabled",!1)
r.find(".not-contained-annotations").prop("checked",!1).prop("disabled",!0)
return r.find(".not-contained-annotations").trigger("change")}))
r.find(".checkbox input").on("change",(e=>{const t=d()(e.currentTarget),n=t.prop("checked")
t.hasClass("annotations")?z.Z.set(C.zm.ANNOTATIONS,n):t.hasClass("not-contained-annotations")?z.Z.set(C.zm.ANNOTATIONS_NOT_CONTAINED,n):t.hasClass("tags")?z.Z.set(C.zm.TAGS,n):t.hasClass("description")?z.Z.set(C.zm.DESCRIPTION,n):t.hasClass("primer-bases")&&z.Z.set(C.zm.PRIMER_BASES,n)}))
r.find(".copy").on("click",(()=>{var a
const i=null!=t?1!==t:r.find(".reverse-complement").prop("checked"),o=this.createFromSelection(n.start(),n.end(),{annotations:r.find(".annotations").prop("checked"),notcontained:r.find(".not-contained-annotations").prop("checked"),tags:r.find(".tags").prop("checked"),reverseComplement:i,primers:s,primerBases:r.find(".primer-bases").prop("checked"),preserveIndices:r.find(".js-preserve-indices").prop("checked"),type:e||this.type()}),l=this.getNoteParts()||[],c=r.find(".description").prop("checked")&&l.length>0?l:void 0
return Sequence.saveAndOpenSequence(o.toSaveable(),null===(a=this.folder())||void 0===a?void 0:a.api_identifier,{noteParts:c})}))
r.on("hidden.bs.modal",(()=>r.remove()))}handleOptimizeCodonsFromSelectionClick(e){const t=new x.Z({sequence:this,strand:e})
this.fileState().buffers().addTab(t)
p.L9(A.Jg.OPENED_CODON_OPTIMIZATION,{type:"sequence",polymerId:this.get("id")})}handlePrimer3FromSelectionClick(){const e=this.fileState().buffers(),t=new m.Z({sequence:this,buffers:e})
e.addTab(t)}handleCreatePartFromSelectionClick(e){const t=n(558650).Z,a=this.get("selection").assertNotEmpty(),i=this.createFromSelection(a.start(),a.end(),{annotations:!0,notcontained:!1,tags:!1,reverseComplement:!1}),r=Y.modelStartToDisplay(a.start(),this.startIndex()),s=Y.modelEndToDisplay(a.end(),this.get("_sequence").length(),this.startIndex())
t.open({displaySelectionStart:r,displaySelectionEnd:s,initialFolderId:this._sequence().get("projectFolderId")||this.folder().api_identifier,namePlaceholder:i.name(),onConfirm:({folderId:t,name:n})=>{X.$Z()
i.set("folder",t)
i.set("name",n)
this.createPartAndReplace(a.start(),a.end(),i,e).done((()=>{$.ZP.success(`Created a new part: ${n}`)})).fail($.ZP.notifyError).always((()=>{X.Cp()}))}})}static saveAndOpenSequence(e,t,a={}){const i=n(679726).Z,r=null!=t?t:L.Z.get(L.O.INVENTORY),s=d().Deferred()
i.openForSelect("append",{initialFolderId:r,showInventory:!0},(t=>{X.$Z()
const{folderId:n,tagSchemaId:i}=j.parseFolderValue(t.target.value)
e.save({folder:n,tagSchemaId:i},a).then((()=>b.ZP.get().openFolderItem(e.get("id")))).done((()=>{s.resolve()
L.Z.set(L.O.INVENTORY,n)
O.Z.invalidateFolderContents(n)})).fail((e=>{$.ZP.notifyError(e)
s.reject()})).always((()=>{X.Cp()}))}))
return s.promise()}handleCreateProteinFromSelectionClick(e){let t,n
const a=this.get("selection").assertNotEmpty(),i=a.start(),r=a.end(),s=this.residueSlice(i,r),o=I.translateOnStrand(s,e,this.nucleotideType(),f.hR.STANDARD,!0)
if(0!==o.length){if(1===e){n=i
t=Y.mod(n+3*o.length,this.length())}else{(0,E.Gp)(-1===e,"Expected strand to be 1 or -1.")
t=r
n=Y.mod(t-3*o.length,this.length())}this.promptSaveProtein(n,t,o,e)}else $.ZP.error("You must select at least three bases.")}handleCreateProteinFromTranslationClick(e){const{translations:t}=e.getTranslationRegionGroup(this),n=e.codonTranslationTable(this),{start:a}=t[0],{end:i}=t[t.length-1],{strand:r}=t[0],s=t.map((e=>this.residueSlice(e.start,e.end))).join(""),o=I.translateOnStrand(s,r,this.nucleotideType(),n,!0)
this.promptSaveProtein(a,i,o,r,!0)}hasNonTrailingStopCodons(e){const t=e.indexOf("*")
return-1!==t&&u.default.any(Array.from(e.slice(t)),(e=>"*"!==e))}getStopCodonError(e,t,n,a){let i,r
const s=a.indexOf("*")
if(!this.hasNonTrailingStopCodons(a))return null
if(1===n){r=Y.mod(e+3*s,this.length())
i=r+3}else{i=Y.mod(t-3*s,this.length())
r=Y.mod(i-3,this.length())}const[o,l]=Array.from(Y.modelRangeToDisplay(r,i,this.length(),this.startIndex()))
return`Can't create a protein because a premature stop codon was found at bases ${o}-${l}`}truncateTrailingStopCodons(e){(0,E.hu)(!this.hasNonTrailingStopCodons(e),"truncateTrailingStopCodons truncates everything after the first stop codon and should not be called on proteins with premature stop codons")
e.indexOf("*")>-1&&(e=e.slice(0,e.indexOf("*")))
return e}promptSaveProtein(e,t,a,i,r=!1){let s
const o=n(776065).Z
if(-1!==a.indexOf("?")){$.ZP.error("Couldn't translate degenerate bases into AA sequence.")
return}let l
l=this.tagSchema()?this.tagSchema().fields.filter((e=>e.fieldType===J.FIELD_TYPES.TRANSLATION_LINK.type)).map((e=>{const t=!e.isMulti&&this.tags().some((t=>t.name===e.name&&t.targetFiles&&t.targetFiles.length>0))
return{field:e,isSingleLinkFieldWithExistingValue:t}})):[]
const c=this.getStopCodonError(e,t,i,a)
if(c){$.ZP.error(c)
return}a=this.truncateTrailingStopCodons(a)
const d=-1===i?" reversed":"",u=Y.modelStartToDisplay(e,this.startIndex()),m=Y.modelEndToDisplay(t,this.length(),this.startIndex()),p=`${this.name()} translation [${u}-${m}${d}]`,h=(()=>{if(this.projectFolderId())return this.projectFolderId()
s=this.folder()
return s&&!j.isRegistryFolder(s)?s.api_identifier:L.Z.get(L.O.INVENTORY)})(),E=this
R.Z.open({initialFolderId:null!=h?h:void 0,namePlaceholder:p,translationLinkFields:l,onConfirm:function onConfirm({name:e,folderId:t,translationLink:n,tagSchemaId:s}){const l=n?{containerSequenceId:E.id,tagSchemaFieldId:n.id}:null
function success(e){if(n){$.ZP.success("AA sequence created successfully and linked to DNA sequence.")
return N.U2(E.id).done((({tags:e})=>{k.Z.dispatch({actionType:y.JFe,tagData:[{id:E.id,tags:e}]})}))}return o.openFile(e)}let c
X.$Z()
c=E.allowFeatureEdits()&&!r?E.createTranslationIfNew(i):Promise.resolve()
c.then((()=>{W.Z.create({name:e,aminoAcids:a,folder:t,translationLink:l,tagSchemaId:s,success,always(){X.Cp()}})})).finally((()=>{X.Cp()}))}})}getFragments(e){e=u.default.uniq(e)
const t=(0,u.default)(e).map((e=>this.get("enzymes").get(e).toJSON())),n=this.get("_sequence"),a=n.length(),i=n.get("circular"),r=new(s().Collection)(I.digest([n],t))
r.each((e=>{e.set({selected:!1})
e.collection=r}))
for(const e of Array.from(r.models)){const t=e.get("_startIndex"),n=e.get("offset3"),r=e.get("offset5"),s=e.bases().length,o=t+(r<0?-r:0),l=t+s-(n>0?n:0),c=i?(l-o-1+a)%a+1:l-o
e.set({start:i?(o+a)%a:o,end:i?(l+a)%a:l,length:c})}return r}createFromSelection(e,t,n){u.default.defaults(n,{annotations:!0,notcontained:!0,tags:!0,reverseComplement:!1,padStart:"",padEnd:"",primers:[],primerBases:!0,preserveIndices:!1,bases:void 0,name:void 0,type:this.type()})
return this.get("_sequence").createFromIndices(e,t,{...n,parentVersionId:this.getActiveVersionId()})}canInsertPart(){return!0}_doSeqOp(e,t,n){const a=this.selection(),i=a.start(),r=a.end(),s=this.get("_sequence").save(e,t)
s.client.done((()=>{s.fail((e=>{if(401!==e.status){X.$Z("Edit failed, reverting...")
this.fetch().fail((e=>{$.ZP.notifyError(e,{duration:0,closeable:!1,extra:"Try [refreshing](?) to resume editing the sequence."})})).done((()=>{let e,t
if(i>this.length()||r>this.length()){t=0
e=null}else{t=i
e=r}a.setEndpoints(t,e)
this.trigger("jump",t,t)
X.Cp()}))}else{this.get("_sequence").set({unrecoverable:!0})
$.ZP.notifyError(e)}}))}))
if(!t.respondDiff){X.$Z()
s.always((()=>{X.Cp()}))}return s.done((()=>{this.updateVersions({callback:n})}))}reindex(e,t,n={}){const a=this._doSeqOp({reindex:{current:e,desired:t}},{patch:!0,respondDiff:!0,fileUpdate:!0},n.callback)
a.client.done((()=>{this.get("selection").reset(t)
this.trigger("jump",t)}))
return a}createPartAndReplace(e,t,n,a){const i={create_part_and_replace:{start:e,end:t,new_sequence:n,tag_schema_field_id:a}}
return this._doSeqOp(i,{patch:!0,fileUpdate:!0}).done((e=>{k.Z.dispatch({actionType:y.JFe,tagData:[{id:e.id,tags:e.tags}]})}))}insertPart(e,t,n={}){const a=n.reverse||!1,i=n.complement||!1
return this._doSeqOp({insert_part:{pos:e,part:t.get("id"),reverse:a,complement:i}},{patch:!0,fileUpdate:!0},n.callback)}replaceWithPart(e,t,n,a={}){const i=Boolean(a.reverse)&&Boolean(a.complement)
return this._doSeqOp({replace_with_part:{start:e,end:t,sequenceId:n,reverseComplemented:i}},{patch:!0,fileUpdate:!0},a.callback)}editPart(e,t={}){const n=(0,ae.Z)(t,"reverse","complement")
return this._doSeqOp({edit_part:u.default.extend(n,{part:e.get("id")})},{patch:!0,fileUpdate:!0},t.callback)}deleteBases(e,t,n={}){return this._doSeqOp({del:{start:e,end:t}},{patch:!0,respondDiff:!0,fileUpdate:!0},n.callback)}deletePart(e,t={}){return this._doSeqOp({delete_part:{part:e.get("id")}},{patch:!0,fileUpdate:!0,respondDiff:!0},t.callback)}unlinkPart(e){return this._doSeqOp({unlink_part:{part:e.get("id")}},{patch:!0,fileUpdate:!0})}insert(e,t,n={}){var a,i,r,s,o,l
const c=null!==(a=n.parts)&&void 0!==a?a:[],d=null!==(i=n.annotations)&&void 0!==i?i:[],u=null!==(r=n.translations)&&void 0!==r?r:[],m=null!==(s=n.translationGroups)&&void 0!==s?s:[],p=null!==(o=n.sequencePrimers)&&void 0!==o?o:[],h=null!==(l=n.modifiedNucleotides)&&void 0!==l?l:[]
return this._doSeqOp({insert:{pos:e,bases:t,parts:c,annotations:d,translations:u,translationGroups:m,sequencePrimers:p,modifiedNucleotides:h}},{patch:!0,respondDiff:!0,fileUpdate:!0,bases:t},n.callback)}replace(e,t,n,a={}){var i,r,s,o,l,c
const d=null!==(i=a.parts)&&void 0!==i?i:[],u=null!==(r=a.annotations)&&void 0!==r?r:[],m=null!==(s=a.translations)&&void 0!==s?s:[],p=null!==(o=a.translationGroups)&&void 0!==o?o:[],h=null!==(l=a.sequencePrimers)&&void 0!==l?l:[],E=null!==(c=a.modifiedNucleotides)&&void 0!==c?c:[],S=Boolean(a.reverse)&&Boolean(a.complement)
return this._doSeqOp({replace_region:{start:e,end:t,bases:n,parts:d,annotations:u,translations:m,translationGroups:p,sequencePrimers:h,modifiedNucleotides:E,reverseComplemented:S}},{patch:!0,respondDiff:!0,fileUpdate:!0,bases:n},a.callback)}toggleCase(e,t,n,a={}){return this._doSeqOp({toggle_case:{start:e,end:t,casing:n}},{patch:!0,respondDiff:!0,fileUpdate:!0},a.callback)}exactReplaceBases(e,t,n,a={}){return this._doSeqOp({exact_replace_bases:{start:e,end:t,newBases:n}},{patch:!0,respondDiff:!0,fileUpdate:!0},a.callback)}setSugarMod(e,t){return this._doSeqOp({set_sugar_mod:{position:e,sugarMonomerId:t}},{patch:!0,fileUpdate:!0},(()=>{(0,Q.getStore)().dispatch((0,H.aT)(this.get("id"),[e]))}))}setBaseMod(e,t){return this._doSeqOp({set_base_mod:{position:e,baseMonomerId:t}},{patch:!0,fileUpdate:!0},(()=>{(0,Q.getStore)().dispatch((0,H.aT)(this.get("id"),[e]))}))}setPhosphateMod(e,t){return this._doSeqOp({set_phosphate_mod:{position:e,phosphateMonomerId:t}},{patch:!0,fileUpdate:!0},(()=>{(0,Q.getStore)().dispatch((0,H.aT)(this.get("id"),[e]))}))}bulkSetMods({rules:e}){return this._doSeqOp({bulk_set_mods:{rules:e}},{patch:!0,fileUpdate:!0},(()=>{e[0].target.hasOwnProperty("positions")&&(0,Q.getStore)().dispatch((0,H.aT)(this.get("id"),e[0].target.positions))}))}finalize(e){const t=(0,ae.Z)(e,"folder","fragmentResultStickyEnds")
return this._doSeqOp({finalize:t},{patch:!0,fileUpdate:!0},e.callback)}updateDynamicFeatures(){this.updateCuts()
this.updateORFs()}updateORFs(){const e=this.isReallyBig()?[]:I.orfs(this.get("_sequence").bases(),this.circular(),this.nucleotideType(),this.isSingleStranded()),t=Array.from(e).map((e=>new me.Z(e,{sequence:this})))
this.get("orfs").reset(t,{sequence:this})}updateCutsInRange(e){if(!this.isReallyBig())return
const t={start:Math.max(0,e.start-200),end:Math.min(this.length()-1,e.end+200)}
if(t.start!==this.oldRangeStart||t.end!==this.oldRangeEnd){this.oldRangeStart=t.start
this.oldRangeEnd=t.end
this.get("enzymes").each((e=>{const n=this.get("_sequence").getCuts(e.toJSON(),t)
return e.set("cutPositions",n,{trigger:!1})}))
this.get("cutsites").trigger("cutsitesChanged")}}updateCuts(){const e=this.isReallyBig()
this.get("enzymes").each((t=>e?t.set("cutPositions",[],{trigger:!1}):t.set("cutPositions",this.get("_sequence").getCuts(t.toJSON()),{trigger:!1})))
e?this.trigger("cutswherepls"):this.get("cutsites").trigger("cutsitesChanged")}createTranslation(e){this.selection().trigger("translation-panel",e)}async createTranslationIfNew(e){const t=this.selection().assertNotEmpty()
await this._sequence().createTranslationIfNew(t.start(),t.end()%this.length(),e)
await this.updateVersions()}_updateTranslationsByIds(e,t){const n=this._sequence()
for(const a of Array.from(e)){n.translations().get(a).set(t)}this.updateVersions()}deleteTranslationGroup(e){const t=this._sequence(),n=ne.$v({url:`/1/api/sequences/${this.id}/translation-groups/${e}`})
n.done((()=>{const n=t.translations().filter((t=>t.translationGroupId()===e))
t.translations().remove(n)
this.updateVersions()}))
return n}async deleteFeature(e){await e.destroy()
await this.updateVersions()}lockingTab(){return this.get("lockingTabQueue")[0]}addLockingTab({tabId:e,tabName:t}){if(!u.default.findWhere(this.get("lockingTabQueue"),{tabId:e})){(0,E.hu)(Boolean(t),"Must provide tab name")
this.set({lockingTabQueue:l()(this.get("lockingTabQueue"),{$push:[{tabId:e,tabName:t}]})})
this.trigger("change:writable")}}removeLockingTab(e){const t=u.default.findIndex(this.get("lockingTabQueue"),(t=>t.tabId===e))
if(-1!==t){this.set({lockingTabQueue:l()(this.get("lockingTabQueue"),{$splice:[[t,1]]})})
this.trigger("change:writable")}}selectPrimerPair(e){const t=this.primerPairs().get(e),[n,a]=Array.from(t.getPrimers(this.sequencePrimers())),i=this.selection()
n.click(this)
i.selectPair(n,a)
return i.trigger("showLinks")}selectFragment(e){let t,n
const a=this.get("selection"),i=e.get("start"),r=e.get("end")
a.reset(i)
function unselect(t){e.set({selected:!1})
t.clearHandlers()}a.setEndpoints(i,r)
const s=e.get("_cutter5")
if(null!=s){t=this.get("enzymes").get(s.id)
t.set({active:!0})
n=this.get("cutsites").find((e=>e.get("enzyme")===t&&(e.position()===i||e.doubleCutterStart()===i)))
if(null!=n){n.select({multi:!1})
a.addStartState({cutsite:n})}}const o=e.get("_cutter3")
if(null!=o){t=this.get("enzymes").get(o.id)
t.set({active:!0})
n=this.get("cutsites").find((e=>e.get("enzyme")===t&&(e.position()===r||e.doubleCutterStart()===r)))
if(null!=n){a.addEndState({cutsite:n})
n.select({multi:!0})}}e.set({selected:!0})
a.addHandlers({reset:unselect,linearExtend:unselect,setEndpoints:unselect})
return this.trigger("jump",i,e.cid)}changeHighlightCompatible(e,t){let n
const a=this.get("enzymes")
if(t)for(n of Array.from(a.filter((e=>e.active()))))this.setEnzymeColors(n,n.color())
else for(n of Array.from(a.models))n.get("active")||n.set({color:null})}setEnzymeColors(e,t){if(this.get("fileState").get("toolbar").get("restrictionPanelState").get("highlightCompatible")){let n,a
const i=this.get("enzymes")
if(null==t){let t=null
for(n of Array.from(q.Eu(e.id))){a=i.get(n)
if(a.get("active")){t=a
break}}if(null!=t){e.set({color:t.color()})
return}}for(n of Array.from(q.Eu(e.id))){a=i.get(n)
a.set({color:t})}}}handleDoubleClick(e,t){if(this.selectionContainedInPart()){const e=this.getSequencePartsAt(this.selection().start())
if(1===e.length){const t=e[0],n=t.start(),a=0===t.end()?this.length():t.end()
this.selection().setEndpoints(n,a)
return}}this.selection().reset(e)
this.selection().setEndpoints(e,t)}isLongDNASequence(){return this.type()===C.uS.DOUBLE_STRANDED}isSingleStranded(){return this.type()===C.uS.SINGLE_STRANDED||this.type()===C.uS.OLIGO}supportsTranslations(){return!this.isOligo()}supportsPrimers(){return!this.isOligo()}supportsParts(){return!this.isOligo()}supportsCRISPR(){return this.isLongDNASequence()}isLatest(){return this.get("currentVersion")}}},502703:(e,t,n)=>{n.d(t,{aP:()=>T,GX:()=>S,am:()=>confirmTranslationLinkInvalidationRisk,pN:()=>doesRegionOverlapGroup,j5:()=>getTranslationNameOrPlaceholder,Xy:()=>getTranslationRegionFormattedName,b2:()=>getTranslationRegionGroupForTranslation,KB:()=>getTranslationRegionGroupsForSequence,_x:()=>updateModelsAfterTranslationChange,vj:()=>validateTranslationForm})
var a=n(64558),i=n(232606),r=n(675649),s=n(955836),o=n(467607),l=n(921554),c=n(132814),d=n(989526),u=n(334148),m=n(205986)
function TranslationLinkInvalidationWarningModal({onRequestClose:e,onRequestSubmit:t,isDeletion:n,count:a}){let i,s,o
const l=(0,r._6)(a,"translation"),c=(0,r._6)(a,"this","these")
if(n){i=`Delete ${l}`
s=`Deleting ${c} ${l}`
o=u.ZJ.NEGATIVE}else{i=(0,r._6)(a,"Change genetic code")
s=`Changing the genetic code of ${c} ${l}`
o=u.ZJ.PRIMARY}return d.createElement(m.ZP,{title:`${i}?`,medium:!0,buttons:[{text:"Cancel",cancel:!0,onClick:()=>{t(!1)}},{text:i,submit:!0,style:o,onClick:()=>{t(!0)}}],onRequestClose:e},(0,r._6)(a,"This","Some of these")," ",l," ",(0,r._6)(a,"uses","use")," a non-standard genetic code. ",s," may invalidate existing translation links.")}var p=n(497790),h=n(502633),E=n(567e3)
const S=["name","notes","strand","codonTranslationTable","color"],T=l.Z_
function toTranslationRegionGroupData(e,t,n){var a,i,o,l,c,d
return{translations:(0,E.Z)(e.map((e=>function translationToData(e){return{id:e.id,cid:e.cid,start:e.start(),end:e.end(),strand:e.strand()}}(e))),["start"]),aminoAcidLength:Math.floor((0,r.Sm)(e.map((e=>e.length(n))))/3),name:null!==(a=null==t?void 0:t.name)&&void 0!==a?a:"",notes:null!==(i=null==t?void 0:t.notes)&&void 0!==i?i:"",customFields:null!==(o=null==t?void 0:t.customFields)&&void 0!==o?o:[],editable:e.every((e=>e.editable())),selected:e.some((e=>e.selected())),strand:e[0].strand(),cid:null!==(l=null==t?void 0:t.id.toString())&&void 0!==l?l:e[0].cid,hasGroup:Boolean(t),codonTranslationTable:null!==(c=null==t?void 0:t.codonTranslationTable)&&void 0!==c?c:s.hR.STANDARD,color:null!==(d=null==t?void 0:t.color)&&void 0!==d?d:T}}function getTranslationRegionGroupForTranslation(e,t){const n=t.translationGroupId()?e.translationGroups().find((e=>e.id===t.translationGroupId())):void 0
return toTranslationRegionGroupData(t.groupTranslations(),n,e)}function getTranslationRegionGroupsForSequence(e){const t=(0,a.vM)(e.translations().models,(e=>{var t
return null!==(t=e.translationGroupId())&&void 0!==t?t:e.cid})),n=(0,a.Pe)(e.translationGroups(),(e=>e.id))
return Object.entries(t).map((([t,a])=>toTranslationRegionGroupData(a,n[t],e)))}function updateModelsAfterTranslationChange(e,t,n,a){const i=t.map((({id:e})=>e)),r=[...e.translationGroups().filter((({id:e})=>!i.includes(e))),...t]
e._sequence().set({translationGroups:r})
const s=n.map((({id:e})=>e)),o=[...e._sequence().translations().toArray().filter((e=>!(i.includes(e.translationGroupId())&&!s.includes(e.id)))),...n]
e._sequence().translations().set(o)
for(const e of a)e.set({selected:!1})
e.updateVersions()}function doesRegionOverlapGroup(e,t,n){return null!=t&&null!=n&&e.translations.some((({start:e,end:a})=>(0,c.isRangeOverlap)(e,a,t,n)))}function validateTranslationForm(e,t,n,a){if(e.name.length>o.BF)return"Translation name is too long"
if(e.customFields.length>o.YG)return"Translation has too many custom fields"
if(e.isCreateActive){const{start:i,end:r}=e
return null==i||null==r?"A translation must have a valid start and end":0===n?"A translation cannot be added to 0-length sequence":0<=i&&i<n&&0<=r&&r<n?!a&&0!==r&&r<i?"End must be greater than start on a linear sequence":i===r&&0!==r?"Region must have a length greater than 0":null!=e.translationRegionGroup&&doesRegionOverlapGroup(e.translationRegionGroup,i,r)?"Translation regions cannot overlap":null:`Start and end values must be between ${t} and ${t-1+n}.`}return null}function getTranslationNameOrPlaceholder(e,t,n){var a;(0,i.Gp)(null!=e.name,`Expected translation name to exist for translation ${e.cid}`)
if((null===(a=e.name)||void 0===a?void 0:a.length)>0)return e.name
{const{translations:a}=e,i=a[0].start,r=a[a.length-1].end
return`${(0,c.modelStartToDisplay)(i,t)}-${(0,c.modelEndToDisplay)(r,n,t)}`}}function getTranslationRegionFormattedName(e,t,n,a){const r=e.translations.findIndex((e=>e.id===t));(0,i.hu)(r>=0,"Unexpectedly could not find translation in translation group")
const s=getTranslationNameOrPlaceholder(e,n,a)
return 1===e.translations.length?s:`${s}: Region ${r+1}`}async function confirmTranslationLinkInvalidationRisk(e,t,n,a){if(null!=e&&e.fields.some((e=>e.fieldType===p.FIELD_TYPES.TRANSLATION_LINK.type))&&(t||n)){const e=await(0,h.Z)(TranslationLinkInvalidationWarningModal,{isDeletion:!t,count:a})
return Boolean(e)}return!0}},2186:(e,t,n)=>{n.d(t,{$U:()=>ie,A_:()=>te,B$:()=>K,Cz:()=>v,D1:()=>I,Dd:()=>le,EP:()=>D,HV:()=>se,Ig:()=>constructOptions,Jg:()=>Ce,Jv:()=>B,KL:()=>w,MC:()=>oe,Nq:()=>Z,P$:()=>ce,Q8:()=>J,RS:()=>z,SQ:()=>j,UN:()=>N,Ub:()=>X,VZ:()=>x,W3:()=>pe,XH:()=>ue,XQ:()=>Ie,Yv:()=>Y,_j:()=>q,bK:()=>Se,bW:()=>f,be:()=>F,bp:()=>G,cM:()=>W,dq:()=>_,fq:()=>V,gO:()=>y,gY:()=>g,gl:()=>ye,gw:()=>A,hC:()=>ee,iX:()=>C,ih:()=>Q,j2:()=>initialize,j3:()=>L,jB:()=>T,je:()=>H,jw:()=>O,kQ:()=>re,lA:()=>$,nq:()=>b,p4:()=>M,pz:()=>Ee,qh:()=>R,rB:()=>ne,tO:()=>U,vJ:()=>ae,xs:()=>P,yX:()=>k})
var a=n(440281),i=n.n(a),r=n(531041),s=n(348920),o=n(45717),l=n(48047),c=n(882321),d=n(256605),u=n(590385),m=n(680409),p=n(935261),h=n(773364),E=n(432128),S=n(808844)
const T={name:"annotations",displayName:"Annotations",display:"check-option"},g={name:"primers",displayName:"Primers",display:"check-option"},f={name:"primerBases",displayName:"Primer Bases",display:"check-option"},I={name:"orfs",displayName:"ORFs",display:"check-option"},A={name:"orfs",displayName:"ORFs",display:"check-option"},y={name:"cutsites",displayName:"Cut Sites",display:"check-option"},_={name:"complement",displayName:"Complement",display:"check-option"},C={name:"parts",displayName:"Parts",display:"check-option"},R={name:"partAnnotations",displayName:"Part Annotations",display:"check-option"},N={name:"nucleotideStructureImages",displayName:"Nucleotide Structures",display:"check-option"},O={name:"oligoProperties",displayName:"Oligo Properties",display:"check-option"},b={name:"alignmentComments",displayName:"Comments",display:"check-option"},v={name:"sequenceAxis",displayName:"Axis",display:"check-option"},P={name:"homologyRegionAxis",displayName:"Axis",display:"check-option"},L={name:"sequenceAxis",displayName:"Alignment Axis",display:"check-option"},D={name:"proteinAxis",displayName:"Axis",display:"check-option"},M={name:"gapToRealAxis",displayName:"Sequence Axis",display:"check-option"},w={name:"translations",displayName:"Translations",display:"check-option"},F={name:"transcriptions",displayName:"Transcriptions",display:"check-option"},k={name:"readingFrames",displayName:"Reading Frames",display:"check-option"},U={name:"aminoAcidIndices",displayName:"Amino Acid Indices",display:"check-option"},x={name:"overhangs",displayName:"Show Cuts",display:"check-option"},B={name:"dna",displayName:"DNA",display:"check-option"},Z={name:"homologyRegionDNA",displayName:"DNA",display:"check-option"},q={name:"aminoAcids",displayName:"Amino Acids",display:"check-option"},G={name:"votes",displayName:"Votes",display:"check-option"},V={name:"line",displayName:"Mismatches",display:"check-option"},H={name:"trace",displayName:"Trace",display:"check-option"},W={name:"trace-quality",displayName:"Trace Quality",display:"check-option"},Y={name:"miniMap",displayName:"Expanded Mini-Map",display:"check-option"},$={name:"maximise",displayOff:"Show Expanded View",displayOn:"Show Compact View",display:"toggle-option"},K={name:"searchdna",displayName:"Search Results",display:"check-option"},z={name:"searchAminoAcids",displayName:"Search Results",display:"check-option"},Q={name:"inlinelabels",displayName:"Inline Labels",display:"check-option"},j={name:"noteTimestamps",displayName:"Timestamps",display:"check-option"},J={name:"elnSpellCheck",displayName:"Spell Check",display:"check-option",fullSync:!0,type:"eln"},X={name:"print-layout-show-margins",displayName:"Show Print Margins",display:"check-option"},ee={name:"elnPrintLayout",displayName:"Print Layout",display:"check-option",cssWarning:"The screen is not wide enough to render the print layout",settings:[X]},te={name:"elnTableOfContents-v2",displayName:"Table of Contents",display:"check-option"},ne={name:"elnShowFormulas",displayName:"Show Formulas",display:"check-option"},ae={name:"elnHighlightCustomColumns",displayName:"Highlight Custom Columns",display:"check-option"},ie={name:"coloring",displayName:"Coloring Scheme",display:"check-option"},re={name:"proteinHydrophobicityGraph",displayName:"Hydrophobicity",display:"check-option"},se={name:"proteinPIGraph",displayName:"pI",display:"check-option"},oe={name:"proteinAlignmentIdentityGraph",displayName:"Identity",display:"check-option"},le={name:"summaryIdentityGraph",displayName:"Summary Identity",display:"check-option"},ce={name:"alignmentRowStatistics",displayName:"Row Statistics",display:"check-option"},de=[{name:"numberingScheme",displayName:"Numbering Scheme",display:"select-option",value:"Chothia",options:Object.values(u.Qt).map((e=>buildSelectOption((0,S.kC)(e)))),parseStringValue:e=>e}],ue={name:"antibodyNumbering",descriptionComponent:p.F,displayName:"Antibody Numbering",display:"check-option",settings:de},me=[{name:"CDRDefinition",displayName:"CDR Definition",display:"select-option",value:"Chothia",options:Object.values(u.w1).map((e=>buildSelectOption((0,S.kC)(e)))),parseStringValue:e=>e}],pe={name:"antibodyCDRAnnotations",descriptionComponent:p.F,displayName:"CDR Annotations",display:"check-option",settings:me},he=Object.values(u.wu).map((e=>({name:e,displayName:u.pc[e],display:"check-option",value:!0}))),Ee={name:"proteinLiabilitySites",descriptionComponent:m.I,displayName:"Liability Sites",display:"check-option",settings:he},Se={name:"alignmentBaseQualityCapitalization",displayName:`Quality-based capitalization (${s.ZP.MOLBIO_ALIGNMENT_CAPITALIZATION_QUALITY_THRESHOLD})`,display:"check-option"},Te=r.default.extend({},i().Events)
function buildSelectOption(e){return{value:e,display:e}}function generateORFSettings(e){const t=["All","1","2","3"].map((e=>buildSelectOption(e))),n=["All","Forward","Reverse","1","2","3","-1","-2","-3"].map((e=>buildSelectOption(e)))
return[{name:"minimum-orf-length",displayName:"Minimum ORF length (bases)",display:"number-option",value:60,parseStringValue:e=>parseInt(e,10)>=0?parseInt(e,10):60},{name:"orf-frame",displayName:"Frames",display:"select-option",value:"All",options:e===d.Wy.RNA?t:n,parseStringValue(e){const t=parseInt(e,10)
return[1,2,3,-1,-2,-3].includes(t)?t:["Forward","Reverse"].includes(e)?e:"All"}},{name:"show-orf-amino-acids",displayName:"Show Amino Acids (Sequence Map)",display:"check-option"},{name:"orf-start-codon",displayName:"Start Codon",display:"select-option",value:(0,l.sanitize)(o.DNA_START_CODONS[0],e),options:o.DNA_START_CODONS.map((t=>({value:t,display:(0,l.sanitize)(t,e)}))),parseStringValue:e=>e}]}const ge=generateORFSettings(d.Wy.DNA),fe=generateORFSettings(d.Wy.RNA),Ie={name:"coloring-scheme",displayName:"Coloring Scheme",display:"select-option",value:h.yy.RASMOL,options:Object.keys(h.Wr).map((e=>buildSelectOption(e))),parseStringValue:e=>e},Ae=[Ie],ye={...Ie,name:"translation-coloring-scheme",options:Object.keys(h.Wr).concat(h.yy.NONE).map((e=>buildSelectOption(e)))},_e=[ye],Ce={name:"sliding-window-size",displayName:"Sliding Window Size",display:"number-option",value:5,parseStringValue:e=>parseInt(e,10)>=1?parseInt(e,10):1},Re=[Ce],Ne=c.Vp.map((e=>({name:e,displayName:`Show frame ${e}`,display:"check-option",value:!0})))
class VisibilityOptionSetting extends E.Z.PreferenceModel{defaults(){return{name:null,displayName:null,display:null,value:null,sync:!0,parseStringValue:e=>e}}initialize(e,t){const{type:n}=t,{optionName:a}=t
this.prefix=`${n}.${a}.${this.get("name")}`
this.preservedAttributes=this.get("sync")?["value"]:[]
this.localOptions=[]
super.initialize()}}class VisibilityOptionSettings extends i().Collection{static initClass(){this.prototype.model=VisibilityOptionSetting}}VisibilityOptionSettings.initClass()
class VisibilityOption extends E.Z.PreferenceModel{defaults(){return{name:null,displayName:null,displayOn:null,displayOff:null,editable:!0,visible:!0,sync:!1,type:null,indeterminate:!1,display:null,settings:new VisibilityOptionSettings,disabled:!1}}initialize(){const e=this.get("type")
this.prefix=`${e}.${this.get("name")}`
this.preservedAttributes=this.get("sync")?["visible"]:[]
this.localOptions=[]
this.listenTo(this,"change:visible",(function(e,t,n){if("sync"!==n.type){this.set("indeterminate",!1)
this.trigger("redraw")}}))
Array.isArray(this.get("settings"))&&this.set("settings",new VisibilityOptionSettings(this.get("settings"),{type:e,optionName:this.get("name")}),{sync:this.get("sync")})
if(this.get("fullSync")){this.on("change:visible",(function(e,t,n){"fullSync"!==n.type&&Te.trigger(`change:${this.prefix}`,e,t)}))
this.listenTo(Te,`change:${this.prefix}`,(function(e,t){this.set({visible:t},{type:"fullSync"})}))}this.listenTo(this.get("settings"),"change:value",(function(){return this.trigger("redraw")}))
super.initialize()}getSetting(e){return this.get("settings").findWhere({name:e})}isSettingChecked(e){var t
return Boolean(null===(t=this.get("settings").findWhere({name:e}))||void 0===t?void 0:t.get("value"))}addLocalSync(e){this.localOptions.push(e)
this.listenTo(e,"change:visible",this.localSync.bind(this))
e.listenTo(this,"change:visible",e.globalSync.bind(e))}globalSync(e,t,n){"sync"!==n.type&&this.set("visible",t,{type:"sync"})}localSync(e,t,n){let a
if("sync"===n.type)return
let i=!1,r=!0
for(const e of Array.from(this.localOptions)){a=e.get("visible")
i||(i=a)
r&&(r=a)}this.set({visible:i,indeterminate:i&&!r},{type:"sync"})
this.trigger("redraw")}}class VisibilityOptions extends i().Collection{static initClass(){this.prototype.model=VisibilityOption}initialize(){this.checkModel=this.checkModel.bind(this)
this.on("change:visible",this.checkModel)}_cascadeDependentSetting(e,t,n){var a,i
e.get("name")===t.name&&(e.get("visible")?null===(a=this.getOption(n.name))||void 0===a||a.set({disabled:!1}):null===(i=this.getOption(n.name))||void 0===i||i.set({visible:!1,disabled:!0}))}checkModel(e){this._cascadeDependentSetting(e,g,f)
this._cascadeDependentSetting(e,H,W)
this._cascadeDependentSetting(e,w,U)}makeLookup(){this.values={}
for(const e of this.models)this.values[e.get("name")]=e}getOption(e){return this.values[e]}getEditableOptions(){return this.filter((e=>e.get("editable")))}makeLocalSync(e){null==e&&(e={})
e.globalSync=null==e.globalSync||e.globalSync
e.editableOptions=null!=e.editableOptions?e.editableOptions:null
const t=null==e.editableOptions,n=new VisibilityOptions((()=>{const n=[]
for(const a of Array.from(this.models)){const i=a.toJSON()
i.editable=t||Array.from(e.editableOptions).includes(i.name)
i.indeterminate=!1
i.sync=!1
const r=new VisibilityOption(i)
e.globalSync&&a.addLocalSync(r)
n.push(r)}return n})())
n.makeLookup()
n.each(this.checkModel)
return n}}VisibilityOptions.initClass()
function constructOptions(e,t){initialize()
const n=new VisibilityOptions(Array.from(t).map((t=>(0,r.default)((0,r.default)(t).omit("base")).defaults(t.base,{type:e,sync:!0}))))
n.makeLookup()
return n}let Oe=!1
function initialize(){if(!Oe){Oe=!0
I.settings=new VisibilityOptionSettings(ge,{type:"linear",optionName:I.name,sync:!0})
A.settings=new VisibilityOptionSettings(fe,{type:"linear",optionName:A.name,sync:!0})
ie.settings=new VisibilityOptionSettings(Ae,{type:"linear",optionName:ie.name,sync:!0})
w.settings=new VisibilityOptionSettings(_e,{type:"linear",optionName:ie.name,sync:!0})
le.settings=new VisibilityOptionSettings(Re,{type:"linear",optionName:le.name,sync:!0})
k.settings=new VisibilityOptionSettings(Ne,{type:"linear",optionName:k.name})}}},634489:(e,t,n)=>{n.d(t,{C:()=>DataConnector})
var a=n(989526),i=n(377249),r=n(593732),s=n(767534),o=n(476604),l=n(953303),c=n(525098),d=n(145007),u=n(295338)
class DataStillLoadingException extends c.Z{}class DataConnector extends u.Z{constructor(e){super()
this.props=e}static connect(e,t){return function connectDataConnector(e,t,n){class ConnectedWrappedComponent extends a.Component{constructor(t){super(t)
this._isMounted=!1
this._handleStoreChange=()=>{this._options.throttleUpdates?this._throttledMaybeUpdateState():this.maybeUpdateState(this.props)}
this._options=n
this._connector=new e(t)
this._connector.forceFetchOnMount()
this.state=this.computeState(t)
this._unsubscribe=this._connector.subscribe(this._handleStoreChange)
this._isMounted=!0
this._throttledMaybeUpdateState=(0,d.Z)((()=>{this.maybeUpdateState(this.props)}),1)}UNSAFE_componentWillReceiveProps(e){this.maybeUpdateState(e)}componentWillUnmount(){this._unsubscribe()
this._isMounted=!1}maybeUpdateState(e){if(!this._isMounted)return
const t=this.computeState(e)
this._options.shouldPropagateNextState(this.state,t)&&this.setState(t)}computeState(e){try{this._connector.props=e
return{isLoading:!1,additionalProps:this._connector.enhanceProps()}}catch(e){if(e instanceof DataStillLoadingException)return{isLoading:!0,additionalProps:null}
throw e}}render(){if(this.state.isLoading){this._connector.props=this.props
return this._connector.renderLoading()}return a.createElement(t,{ref:this.props.setRef,...this.props,...this.state.additionalProps})}}ConnectedWrappedComponent.displayName=`${e.name||"DataConnector"}(${(0,l.Z)(t)})`
return ConnectedWrappedComponent}(this,e,{throttleUpdates:!1,shouldPropagateNextState:(e,t)=>e!==t,...null!=t?t:{}})}forceFetchOnMount(){}renderLoading(){return a.createElement(o.b,null)}fallBackToLoading(){throw new DataStillLoadingException}getOrFetchRequired(e,t){const n=(0,i.H)(e).getModel(t)
if(n)return n;(0,r.z)(e,t)
return this.fallBackToLoading()}getOrFetchMultipleMaybeInaccessibleRequired(e,t){const n={}
let a=!1
for(const o of t){const t=(0,i.H)(e).getModel(o)
if(t){n[o]=t
continue}const l=new s.Jl(this.reduxState()).getInaccessibleInfo(e,o)
if(null==l){a=!0;(0,r.z)(e,o)}else n[o]=l}if(a)throw new DataStillLoadingException
return n}getOrFetchMaybeInaccessibleRequired(e,t){return this.getOrFetchMultipleMaybeInaccessibleRequired(e,[t])[t]}getOrFetchOptional(e,t){const n=(0,i.H)(e).getModel(t)
n||(0,r.z)(e,t)
return n}getOrFetchMultipleRequired(e,t){const n={}
let a=!1
for(const s of t){const t=(0,i.H)(e).getModel(s)
if(t)n[s]=t
else{a=!0;(0,r.z)(e,s)}}if(a)throw new DataStillLoadingException
return n}getOrFetchMultipleOptionalFull(e,t){const n=this.getOrFetchMultipleOptionalPartial(e,t)
return Object.keys(n).length!==new Set(t).size?null:n}getOrFetchMultipleOptionalPartial(e,t){const n={}
for(const a of t){const t=this.getOrFetchOptional(e,a)
t&&(n[a]=t)}return n}getOrFetchMultipleOptionalDeprecated(e,t,n=!1){const a={}
for(const n of t)a[n]=this.getOrFetchOptional(e,n)
return n&&Object.values(a).some((e=>!e))?{}:a}}},882321:(e,t,n)=>{n.d(t,{C0:()=>m,Eg:()=>g,Fl:()=>r,IK:()=>l,N2:()=>s,OL:()=>h,Pd:()=>E,Q6:()=>p,TN:()=>a,Vp:()=>T,c0:()=>f,hU:()=>i,ob:()=>d,p2:()=>u,su:()=>I,zf:()=>o})
const a=3e4,i={ALIGNMENT_PROGRAM:"alignmentProgram",MAFFT_PARAMETERS:"alignmentMafftParameters",CLUSTAL_O_PARAMETERS:"alignmentClustalOParameters"}
var r,s,o,l,c,d
!function(e){e.CONSENSUS="consensus"
e.TEMPLATE="template"}(r||(r={}))
!function(e){e.CONSENSUS="CONSENSUS"
e.TEMPLATE="TEMPLATE"}(s||(s={}))
!function(e){e.PAIRWISE="PAIRWISE"
e.MULTISEQUENCE="MULTISEQUENCE"
e.CONSENSUS="CONSENSUS"}(o||(o={}))
!function(e){e.CLUSTALO="clustalo"
e.MAFFT="mafft"}(l||(l={}))
!function(e){e.FAST="fast"
e.ACCURATE="accurate"
e.DISABLED="disabled"}(c||(c={}))
!function(e){e.AUTO="auto"
e.SIXMER="sixmer"
e.LOCALPAIR="localpair"
e.GLOBALPAIR="globalpair"}(d||(d={}))
const u={maxIterations:0,retree:2,gapOpenPenalty:1.53,gapExtensionPenalty:0,adjustDirection:c.FAST,strategy:d.AUTO},m={mbedGuideTree:!0,mbedIteration:!0,numCombinedIterations:0,maxGuidetreeIterations:-1,maxHmmIterations:-1}
var p
!function(e){e.DNA="DNA"
e.AA="AA"}(p||(p={}))
const h={DNA:"base",AA:"amino acid"},E={DNA:"n",AA:"x"}
var S
!function(e){e.FWD1="FWD1"
e.FWD2="FWD2"
e.FWD3="FWD3"}(S||(S={}))
const T=Object.values(S)
var g
!function(e){e.START="start"
e.END="end"
e.BOTH="both"}(g||(g={}))
const f={maxIterations:{label:"Max refinement iterations",irrelevantStrategies:[d.AUTO],options:[{value:0},{value:1},{value:2},{value:10},{value:25},{value:50},{value:75},{value:100,metadata:"slowest"}]},retree:{label:"Tree rebuilding",irrelevantStrategies:[d.AUTO,d.LOCALPAIR,d.GLOBALPAIR],options:[{value:1,metadata:"fastest"},{value:2},{value:3},{value:5},{value:10},{value:25},{value:50},{value:75},{value:100,metadata:"slowest"}]},gapOpenPenalty:{label:"Gap open penalty",options:[{value:1},{value:1.1},{value:1.2},{value:1.3},{value:1.4},{value:1.53},{value:1.6},{value:1.7},{value:1.8},{value:1.9},{value:2},{value:2.1},{value:2.2},{value:2.3},{value:2.4},{value:2.5},{value:2.6},{value:2.7},{value:2.8},{value:2.9},{value:3}]},gapExtensionPenalty:{label:"Gap extension penalty",options:[{value:0},{value:.1},{value:.2},{value:.3},{value:.4},{value:.5},{value:.6},{value:.7},{value:.8},{value:.9},{value:1},{value:1.1},{value:1.2},{value:1.3},{value:1.4},{value:1.5},{value:1.6},{value:1.7},{value:1.8},{value:1.9},{value:2}]},adjustDirection:{label:"Adjust direction",options:[{value:c.ACCURATE,display:"Enabled, accurately",metadata:"Slow"},{value:c.FAST,display:"Enabled, quickly",metadata:"Faster"},{value:c.DISABLED,display:"Disabled",metadata:"Fastest"}]}},I={mbedGuideTree:{label:"mBed-like clustering guide-tree",options:[{value:!0,display:"Yes"},{value:!1,display:"No",metadata:"slower"}]},mbedIteration:{label:"mBed-like clustering iteration",options:[{value:!0,display:"Yes"},{value:!1,display:"No",metadata:"slower"}]},numCombinedIterations:{label:"Number of combined iterations",options:[{value:0},{value:1},{value:2},{value:3},{value:4},{value:5,metadata:"slowest"}]},maxGuidetreeIterations:{label:"Max guide tree iterations",options:[{value:-1,display:"No maximum"},{value:0},{value:1},{value:2},{value:3},{value:4},{value:5,metadata:"slowest"}]},maxHmmIterations:{label:"Max HMM iterations",options:[{value:-1,display:"No maximum"},{value:0},{value:1},{value:2},{value:3},{value:4},{value:5,metadata:"slowest"}]}}},171471:(e,t,n)=>{n.d(t,{$Z:()=>l.$Z,A_:()=>a,Cj:()=>l.Cj,D2:()=>c.D2,Dv:()=>l.Dv,G$:()=>l.G$,H4:()=>l.H4,Hb:()=>l.Hb,JG:()=>l.JG,Jg:()=>l.Jg,Jw:()=>o.J,Jz:()=>l.Jz,LY:()=>c.LY,P6:()=>l.P6,Pp:()=>l.Pp,Sy:()=>l.Sy,Tm:()=>l.Tm,U9:()=>d,XC:()=>o.X,YV:()=>l.YV,Zm:()=>l.Zm,Zw:()=>i,c0:()=>s,gc:()=>l.gc,ir:()=>l.ir,k3:()=>l.k3,ln:()=>l.ln,nn:()=>l.nn,ot:()=>r,pd:()=>l.pd,x4:()=>l.x4,xw:()=>l.xw,yt:()=>l.yt,yw:()=>l.yw,zR:()=>l.zR})
var a,i,r,s,o=n(786628),l=n(211495),c=n(256605)
!function(e){e.MANUAL="manual"
e.AUTO_POPULATED_FROM_PROCESS_TASK="auto_populated_from_process_task"}(a||(a={}))
!function(e){e.BULK_UPDATE_CONCENTRATION="bulk_update_concentration"
e.BULK_UPDATE_QUANTITY="bulk_update_quantity"
e.BULK_UPDATE_RESTRICTED_SAMPLE_USERS="bulk_update_restricted_sample_users"
e.BULK_UPDATE_RESTRICTION_STATUS="bulk_update_restriction_status"
e.BULK_UPDATE_SAMPLE_OWNERS="bulk_update_sample_owners"}(i||(i={}))
!function(e){e.CANCEL="CANCEL"
e.EXIT="EXIT"}(r||(r={}))
!function(e){e.OPENED_MODAL="OPENED_MODAL"
e.CLOSED_MODAL="CLOSED_MODAL"
e.SUBMITTED_MODAL="SUBMITTED_MODAL"
e.NAVIGATED_TAB="NAVIGATED_TAB"
e.TRIGGERED_ERROR_TOAST="TRIGGERED_ERROR_TOAST"
e.OPENED_DROPDOWN="OPENED_DROPDOWN"
e.SELECTED_DROPDOWN_OPTION="SELECTED_DROPDOWN_OPTION"
e.NAVIGATED_STEP_COMPONENT="NAVIGATED_STEP_COMPONENT"}(s||(s={}))
const d={OPENED_MODAL:{module:o.X.MODULE_MISSING,action:"opened_modal",actionCategory:o.J.READ},CLOSED_MODAL:{module:o.X.MODULE_MISSING,action:"closed_modal",actionCategory:o.J.READ},SUBMITTED_MODAL:{module:o.X.MODULE_MISSING,action:"submitted_modal",actionCategory:o.J.WRITE},NAVIGATED_TAB:{module:o.X.MODULE_MISSING,action:s.NAVIGATED_TAB,actionCategory:o.J.READ},TRIGGERED_ERROR_TOAST:{module:o.X.MODULE_MISSING,action:s.TRIGGERED_ERROR_TOAST,actionCategory:o.J.READ},OPENED_DROPDOWN:{module:o.X.MODULE_MISSING,action:s.OPENED_DROPDOWN,actionCategory:o.J.READ},SELECTED_DROPDOWN_OPTION:{module:o.X.MODULE_MISSING,action:s.SELECTED_DROPDOWN_OPTION,actionCategory:o.J.READ},NAVIGATED_STEP_COMPONENT:{module:o.X.MODULE_MISSING,action:s.NAVIGATED_STEP_COMPONENT,actionCategory:o.J.READ}}
l.Sy,l.LE,l.XA,l.Pp,l.Cj,l.YV,l.Jz,l.Tm,l.H4,l.$Z,l.ln,l.nn,l.zR,l.JG,l.G$,l.gc,l.Jg,l.P6,l.ci,l.Dv,l.ir,l.k3,l.xw,l.x4,l.Hb,l.yw,l.Zm,l.pd},659009:(e,t,n)=>{n.r(t)
n.d(t,{ASSEMBLY_STEP:()=>p,AZIMUTH_SCORE_PAM:()=>U,BASE_EDIT_SCORING_PAM:()=>M,CFD_SCORE_GUIDE_LENGTH:()=>k,CFD_SCORE_PAM:()=>F,DEFAULTS:()=>I,DESIGN_TYPE:()=>a,DESIRED_HR_MISMATCHES:()=>f,DESIRED_HR_TEMPLATE_LENGTH:()=>g,FORWARD_STRAND_EDITABLE_BASE:()=>w,HR_TEMPLATE_CREATE_TYPE:()=>E,HR_TEMPLATE_STEP:()=>h,HR_TEMPLATE_TAB_ID:()=>S,IA_TYPE:()=>y,LEFT_PAM_TO_CUT_DISTANCE:()=>_,MAXIMUM_PAM_LENGTH:()=>R,MAX_GUIDE_LENGTH:()=>O,MAX_OFF_TARGET_GUIDE_LENGTH:()=>b,MINIMUM_HR_TEMPLATE_LENGTH:()=>T,MINIMUM_PAM_LENGTH:()=>C,MIN_GUIDE_LENGTH:()=>N,MIT_OFF_TARGET_WEIGHTS:()=>s,NUCLEASE_NAME:()=>o,NUCLEASE_TYPE:()=>r,NUCLEASE_VARIANT:()=>l,OFF_TARGET_SCORE_TYPE:()=>i,ORDERED_PAMS:()=>u,PAM:()=>c,PAM_INFO_BY_PAM:()=>m,PAM_TO_CUT_DISTANCE:()=>A,RECOMMENDED_AZIMUTH_ON_TARGET_GUIDE_LENGTH:()=>v,RECOMMENDED_AZIMUTH_ON_TARGET_PAM:()=>P,SORT_KEY:()=>L,URLS:()=>d,VECTOR_SOURCE_TYPE:()=>D})
var a,i,r,s,o,l,c
!function(e){e.SINGLE="single"
e.PAIRED="paired"
e.BASE_EDIT="base_edit"}(a||(a={}))
!function(e){e.MIT="MIT"
e.CFD="CFD"}(i||(i={}))
!function(e){e.CAS9="Cas9"
e.CPF1="Cpf1"}(r||(r={}))
!function(e){e.UNWEIGHTED="UNWEIGHTED"
e.SPCAS9="SPCAS9"}(s||(s={}))
!function(e){e.SPCAS9="SpCas9"
e.NMECAS9="NmeCas9"
e.STCAS9="StCas9"
e.TDCAS9="TdCas9"
e.SACAS9="SaCas9"
e.ASCPF1="AsCpf1"
e.LBCPF1="LbCpf1"}(o||(o={}))
!function(e){e.NG="NG"
e.RVR="RVR"
e.RR="RR"}(l||(l={}))
!function(e){e.NGG="NGG"
e.NAG="NAG"
e.NG="NG"
e.NNNNGATT="NNNNGATT"
e.NNAGAAW="NNAGAAW"
e.NAAAAC="NAAAAC"
e.NNGRR="NNGRR"
e.NNGRRT="NNGRRT"
e.TTTN="TTTN"
e.TTTV="TTTV"
e.TYCV="TYCV"
e.TATV="TATV"}(c||(c={}))
const d={CFD_SCORE_PAPER:"http://www.nature.com/nbt/journal/v34/n2/full/nbt.3437.html",NGG_PAM:"http://www.ncbi.nlm.nih.gov/pubmed/23873081",NNGRRT_PAM:"http://www.ncbi.nlm.nih.gov/pubmed/25830891",HSU_OFF_TARGET_PAPER:"https://www.nature.com/articles/nbt.2647",DOENCH_ACTIVITY:"http://www.nature.com/nbt/journal/v32/n12/abs/nbt.3026.html"},u=[c.NGG,c.NAG,c.NG,c.NNNNGATT,c.NNAGAAW,c.NAAAAC,c.NNGRR,c.NNGRRT,c.TTTN,c.TTTV,c.TYCV,c.TATV],m={[c.NGG]:{bases:c.NGG,isLeftPam:!1,nucleaseNames:[o.SPCAS9],nucleaseType:r.CAS9},[c.NAG]:{bases:c.NAG,isLeftPam:!1,nucleaseNames:[o.SPCAS9],nucleaseType:r.CAS9},[c.NG]:{bases:c.NG,isLeftPam:!1,nucleaseNames:[o.SPCAS9],nucleaseType:r.CAS9,nucleaseVariant:l.NG},[c.NNNNGATT]:{bases:c.NNNNGATT,isLeftPam:!1,nucleaseNames:[o.NMECAS9],nucleaseType:r.CAS9},[c.NNAGAAW]:{bases:c.NNAGAAW,isLeftPam:!1,nucleaseNames:[o.STCAS9],nucleaseType:r.CAS9},[c.NAAAAC]:{bases:c.NAAAAC,isLeftPam:!1,nucleaseNames:[o.TDCAS9],nucleaseType:r.CAS9},[c.NNGRR]:{bases:c.NNGRR,isLeftPam:!1,nucleaseNames:[o.SACAS9],nucleaseType:r.CAS9},[c.NNGRRT]:{bases:c.NNGRRT,isLeftPam:!1,nucleaseNames:[o.SACAS9],nucleaseType:r.CAS9},[c.TTTN]:{bases:c.TTTN,isLeftPam:!0,nucleaseNames:[o.ASCPF1,o.LBCPF1],nucleaseType:r.CPF1},[c.TTTV]:{bases:c.TTTV,isLeftPam:!0,nucleaseNames:[o.ASCPF1,o.LBCPF1],nucleaseType:r.CPF1},[c.TYCV]:{bases:c.TYCV,isLeftPam:!0,nucleaseNames:[o.ASCPF1,o.LBCPF1],nucleaseType:r.CPF1,nucleaseVariant:l.RR},[c.TATV]:{bases:c.TATV,isLeftPam:!0,nucleaseNames:[o.ASCPF1,o.LBCPF1],nucleaseType:r.CPF1,nucleaseVariant:l.RVR}},p={SELECT_VECTOR:"SELECT_VECTOR",FINALIZE_ASSEMBLIES:"FINALIZE_ASSEMBLIES",COMPLETED_ASSEMBLY:"COMPLETED_ASSEMBLY"},h={INTRODUCE_EDITS:"INTRODUCE_EDITS",SELECT_ARMS:"SELECT_ARMS",REMOVE_TARGET_SITE:"REMOVE_TARGET_SITE",SUMMARY:"SUMMARY"},E={MODIFY:"MODIFY",CLONE:"CLONE"},S="HR_TEMPLATE_TAB_ID",T=50,g=200,f=2,I={GENOME_ENSEMBL_NAME:"GRCm38",GENOME_PREFERENCES:["GRCm38","GRCh38"],PAM:c.NGG,IS_LEFT_PAM:!1,DESIGN_TYPE:a.SINGLE,GUIDE_LENGTH:20,PAIR_OFFSET_MIN:-10,PAIR_OFFSET_MAX:30,A_MIN:0,A_MAX:80,T_MIN:0,T_MAX:80,C_MIN:0,C_MAX:80,G_MIN:0,G_MAX:80,PAM_SITE_ON_TARGET_MIN:10,PAM_SITE_OFF_TARGET_MIN:25,SHOW_CUTS_OUTSIDE_REGIONS:!1,SEARCH_SOFT_MASKED_BASES:!1,OFF_TARGET_SCORE_TYPE:i.MIT,USE_AZIMUTH_ON_TARGET_SCORE:!0},A=3,y={CRISPR_I:"CRISPR_I",CRISPR_A:"CRISPR_A"},_=19,C=2,R=8,N=16,O=24,b=20,v=20,P=c.NGG,L={POSITION:"POSITION",SPECIFICITY_PAIR:"SPECIFICITY_PAIR",SPECIFICITY_SINGLE:"SPECIFICITY_SINGLE",EFFICIENCY:"EFFICIENCY",NUM_BASE_EDITS:"NUM_BASE_EDITS",BASE_EDIT_SCORES:"BASE_EDIT_SCORES",CRISPR_IA_TIER:"CRISPR_IA_TIER"},D={CREATE_FROM_FILE:"CREATE_FROM_FILE",SELECT_EXISTING_SEQUENCE:"SELECT_EXISTING_SEQUENCE",SELECT_VECTOR:"SELECT_VECTOR"},M=c.NGG,w="C",F=c.NGG,k=20,U=c.NGG},643509:(e,t,n)=>{n.d(t,{Q:()=>s,u:()=>a})
var a,i=n(602652),r=n(263174)
!function(e){e.PENDING="pending"
e.MEMBER="member"}(a||(a={}))
const s={avatar_url:i.string.isRequired,currentUserInboundRequests:i.arrayOf(r.ORGANIZATION_REQUEST),handle:i.string.isRequired,id:i.string.isRequired,url_identifier:i.string.isRequired,pendingOrgInvites:i.number,userOrgsInboundRequests:i.arrayOf(r.ORGANIZATION_REQUEST)}},787004:(e,t,n)=>{n.d(t,{$4p:()=>Su,$5t:()=>ro,$71:()=>U,$IR:()=>Jt,$Ti:()=>qo,$cd:()=>Fr,$hB:()=>os,$kk:()=>no,$m8:()=>ec,$pu:()=>_u,$qI:()=>tt,$rk:()=>Xe,$x$:()=>bl,A2F:()=>zd,A7x:()=>Qt,ABn:()=>_,AFO:()=>Tl,AG_:()=>du,AGp:()=>y,AQ1:()=>Gc,ATH:()=>Wn,AUH:()=>V,AUh:()=>il,AYE:()=>Zi,Aj7:()=>x,Arb:()=>Gl,AsR:()=>xd,Asn:()=>Ss,Azr:()=>Oi,B3U:()=>Ai,B4k:()=>lo,B5G:()=>Hs,BAZ:()=>At,BFk:()=>gt,BQc:()=>Cn,BTo:()=>Lu,BVr:()=>hc,BmV:()=>pa,BoB:()=>Cs,BrT:()=>Ms,C1K:()=>ld,C1l:()=>Sc,C3_:()=>wa,C5z:()=>Zd,C7L:()=>Is,C9s:()=>Zc,CG1:()=>De,CJb:()=>Po,CVg:()=>Ro,CY9:()=>Nt,Ccb:()=>Re,Cjn:()=>to,D08:()=>on,D1G:()=>ht,D2i:()=>hu,D4T:()=>Od,DBh:()=>J,DCn:()=>M,DIw:()=>On,DQR:()=>Ca,DY7:()=>Fi,DdP:()=>Hn,DiD:()=>Sl,DtT:()=>ir,E6L:()=>Uo,E8k:()=>Gt,EZo:()=>Yt,Eft:()=>Ao,EjH:()=>Mi,Eop:()=>Nn,ExK:()=>Rc,F$I:()=>Xd,F0Q:()=>Fd,F9o:()=>Bc,FDl:()=>Fl,FIY:()=>ul,FKD:()=>Ya,FLh:()=>Ks,FMt:()=>Ke,Fuo:()=>Ol,G7P:()=>yl,GB3:()=>No,GCV:()=>td,GE_:()=>Ac,GHP:()=>ll,GKJ:()=>Go,GNH:()=>Ut,GRk:()=>Yl,GS:()=>L,GSP:()=>Tt,GSq:()=>Zn,GTe:()=>cc,GaI:()=>Eu,Ge_:()=>fi,GhO:()=>H,Gjh:()=>zc,Gkk:()=>Ni,Gpd:()=>tc,H02:()=>ma,H0R:()=>kr,H3s:()=>Lc,H9y:()=>qr,HBc:()=>nn,HBn:()=>Fe,HSV:()=>Qo,HUf:()=>Mn,HVc:()=>li,HVi:()=>Wl,HVn:()=>Pa,HmA:()=>Fs,HpQ:()=>la,HvC:()=>Na,I6H:()=>ac,I7c:()=>Bo,IA_:()=>kl,INW:()=>jd,ITN:()=>c,IWi:()=>So,Ib6:()=>Ge,Idj:()=>rd,Ijz:()=>Fc,In_:()=>sl,Iyg:()=>ru,J58:()=>Rt,JBY:()=>Yo,JC7:()=>Qd,JFe:()=>Aa,JLf:()=>Kr,J_E:()=>ee,JcN:()=>ze,JeR:()=>we,JoM:()=>dc,Jvl:()=>Ys,K$E:()=>Ml,K4E:()=>ea,K7y:()=>un,KAU:()=>$d,KAi:()=>$c,KHI:()=>Be,KIt:()=>Ze,KLc:()=>D,KQ2:()=>Gn,KVX:()=>Fn,KZ4:()=>Pe,KgX:()=>Un,Kjk:()=>yi,Kjw:()=>xe,Kk$:()=>Wr,Kkb:()=>Du,KmV:()=>Ve,KxQ:()=>pt,LAi:()=>cl,LAo:()=>Uc,LKW:()=>u,LL2:()=>Xa,LNQ:()=>qn,LRg:()=>Gr,LfL:()=>fa,LgE:()=>ci,Li3:()=>ae,LlY:()=>Wo,MHh:()=>Y,MLZ:()=>ps,MXu:()=>Io,MY9:()=>lc,MeZ:()=>Nd,Mg7:()=>Ga,MlY:()=>K,Mso:()=>ya,N80:()=>mu,N8g:()=>Vt,NDI:()=>Cc,NF$:()=>rt,NJ7:()=>id,NJY:()=>ii,NOh:()=>ha,NXc:()=>fd,NZ1:()=>ts,NZn:()=>$i,Na1:()=>Mc,Nbf:()=>Qi,Npw:()=>Vc,NtZ:()=>Da,O$N:()=>rr,O4G:()=>mc,O9b:()=>va,OB3:()=>zi,OCS:()=>Pi,OGV:()=>nr,OJl:()=>Mu,OLI:()=>Ls,ORG:()=>Gi,Odv:()=>Zl,Odw:()=>bc,Oe8:()=>i,Oln:()=>wl,Ouf:()=>cs,P3q:()=>cn,P7p:()=>Ri,P8y:()=>co,P9H:()=>bi,PCl:()=>pi,PIX:()=>ji,PJP:()=>O,PWB:()=>qt,PX3:()=>ai,PYQ:()=>Bt,P_e:()=>Tu,PbM:()=>Ru,Pgk:()=>vo,PhS:()=>st,PlX:()=>ri,Pu7:()=>Ft,PvD:()=>z,Q6K:()=>Pt,QAM:()=>ui,QBG:()=>Sn,QHG:()=>ue,QHY:()=>xl,QKG:()=>Oo,QTJ:()=>re,Q_v:()=>Hc,QdN:()=>a,QnT:()=>fe,QqJ:()=>Yc,QzZ:()=>zt,R0n:()=>Dl,RKA:()=>St,RNC:()=>Mr,RVn:()=>ei,RWx:()=>jo,RXe:()=>nu,RcB:()=>Qs,RdH:()=>_e,Rfn:()=>vt,Rio:()=>Kn,Rl8:()=>na,RqX:()=>bo,Ruy:()=>Kt,RyY:()=>Dc,Rz1:()=>Vi,S1t:()=>bd,S8s:()=>jn,SBb:()=>Bd,SFi:()=>wi,SHv:()=>To,SJn:()=>Sr,SY9:()=>Tn,SZL:()=>Lt,Seb:()=>yu,Sle:()=>A,Sn7:()=>sn,Ss9:()=>is,Sxe:()=>mn,T0Q:()=>Au,T8U:()=>Ln,TAM:()=>We,TBg:()=>wc,TGQ:()=>ne,TLb:()=>Pd,TLk:()=>Pr,TQQ:()=>v,TTX:()=>Ji,TkS:()=>Q,Twj:()=>dr,Tyb:()=>E,U2v:()=>$n,UIB:()=>vd,UK0:()=>kd,UR7:()=>Ma,UVX:()=>Ce,Ud$:()=>_l,Ude:()=>Ia,UkM:()=>Si,UlT:()=>se,Uzb:()=>Ka,V$H:()=>as,VG:()=>rl,VIP:()=>Ul,VOk:()=>yo,VWS:()=>Ne,VZD:()=>Jr,V_R:()=>Za,Vch:()=>xc,VpL:()=>wu,VwH:()=>qd,Vxl:()=>Hi,W$E:()=>Ua,W$x:()=>fo,W0q:()=>Xs,W1_:()=>ie,W7B:()=>mi,WCn:()=>w,WHA:()=>Ar,WHe:()=>vn,WHs:()=>fc,WIq:()=>Ha,WKo:()=>gu,WLN:()=>xt,WOp:()=>Qc,WQA:()=>Qn,WR2:()=>_a,WTB:()=>$,Wd6:()=>ra,WgK:()=>zo,Wrc:()=>Nc,WsK:()=>Nr,WuM:()=>za,X16:()=>Co,X1f:()=>Zs,XH_:()=>wn,XNV:()=>Tc,XTi:()=>X,XTj:()=>Gs,XVG:()=>ao,XWo:()=>Or,XXO:()=>Vo,XZ5:()=>hr,X_$:()=>je,Xam:()=>Te,XeB:()=>Er,XhU:()=>uu,Xhx:()=>Bi,Xoe:()=>Ws,Xq8:()=>Yn,XvT:()=>xi,Xx7:()=>nt,Y0Z:()=>Ci,Y5B:()=>ar,Y6M:()=>kt,YA9:()=>lr,YAd:()=>ks,YIY:()=>Xo,YKb:()=>Ud,YVM:()=>Jl,YW6:()=>d,YYU:()=>si,Ydn:()=>_c,Yjc:()=>vs,Yl5:()=>kn,YqW:()=>bn,YxH:()=>ln,Yy7:()=>P,Z0g:()=>Ql,Z28:()=>Jc,Z63:()=>Jo,Z8t:()=>lt,ZMm:()=>Ko,ZVE:()=>Li,Zg0:()=>el,ZrO:()=>da,Zx_:()=>Ld,Zyj:()=>an,ZzW:()=>ft,_$R:()=>Bl,_Dd:()=>Yi,_JT:()=>ga,_b8:()=>ys,_cs:()=>qi,_g6:()=>k,_lb:()=>ut,_sH:()=>tu,_sZ:()=>$r,a3x:()=>ss,a4x:()=>Vs,aCo:()=>Ps,aGr:()=>hn,aLc:()=>nd,aN2:()=>zn,aUc:()=>ba,aZ0:()=>rn,anV:()=>r,aoq:()=>Xr,aqY:()=>Ti,av5:()=>Xc,ayz:()=>Ho,b8o:()=>ur,bM7:()=>ia,bOw:()=>Ir,bYo:()=>iu,bcI:()=>dl,bco:()=>$s,bix:()=>lu,bsd:()=>mt,btk:()=>Ba,cPA:()=>eo,cbr:()=>gl,ccz:()=>gi,cfw:()=>s,cgd:()=>Ic,cln:()=>Id,d2o:()=>qs,d3E:()=>Cr,d9X:()=>q,dBW:()=>ti,dDi:()=>uo,dNY:()=>cu,dPq:()=>Vl,dS9:()=>pc,dSz:()=>Va,ddK:()=>mo,dfD:()=>Wc,dgP:()=>gs,dji:()=>yt,dlL:()=>uc,dyx:()=>ja,e2W:()=>Rd,eBw:()=>Ae,eD4:()=>Do,eOY:()=>Td,eRh:()=>Qa,eUJ:()=>sr,eUX:()=>us,eVR:()=>au,ebW:()=>F,ej8:()=>ka,el_:()=>Os,eq2:()=>g,ey5:()=>As,eyr:()=>T,f2d:()=>ws,f4B:()=>et,f5C:()=>fn,f64:()=>Ed,f65:()=>In,fCb:()=>_i,fKi:()=>Rs,fZx:()=>Ur,faI:()=>fs,fjh:()=>Qe,fmb:()=>$o,g2:()=>Jn,g33:()=>ce,g5h:()=>pr,g7l:()=>It,gAV:()=>Js,gD7:()=>Eo,gSo:()=>Xn,gYK:()=>it,gce:()=>ca,gcw:()=>qe,gdE:()=>pn,gis:()=>m,giy:()=>ou,gjs:()=>Yr,gkL:()=>ls,gq$:()=>od,gsi:()=>R,h5n:()=>ki,h5v:()=>pl,hFc:()=>jc,hML:()=>Ei,hPS:()=>N,hQf:()=>Ta,h_U:()=>rs,hae:()=>go,hcQ:()=>ml,hmO:()=>er,hp9:()=>gd,hw5:()=>ni,i$m:()=>Wt,i17:()=>Cl,i1q:()=>oi,i5s:()=>Oa,iCS:()=>Di,iRP:()=>bs,iaF:()=>vl,idK:()=>An,ijz:()=>es,ik4:()=>G,iyM:()=>wo,j51:()=>ud,jIP:()=>vr,jcV:()=>te,jfE:()=>Ra,jf_:()=>Cd,k2q:()=>Fo,k4d:()=>xa,k6v:()=>eu,kC1:()=>ql,kF:()=>Ja,kPx:()=>ho,kVJ:()=>mr,kkc:()=>Wd,kkm:()=>hl,kmp:()=>Ll,kqA:()=>le,kzR:()=>at,l6S:()=>wr,lDM:()=>$a,lFd:()=>_o,lH4:()=>Sd,lPQ:()=>Kd,lZT:()=>Il,liX:()=>ad,lmq:()=>pu,lwH:()=>wt,m0u:()=>Br,m2L:()=>dn,m5L:()=>tl,mIl:()=>Qr,mPB:()=>ye,md0:()=>Xi,mjF:()=>yn,mku:()=>oe,ml4:()=>Lr,moZ:()=>f,msA:()=>he,mu:()=>ge,n0v:()=>zr,n5Y:()=>aa,nLw:()=>ve,nPE:()=>Pc,nWU:()=>Hl,nXX:()=>Vr,na4:()=>nc,nfT:()=>Bs,nn2:()=>Sa,nn4:()=>Le,npV:()=>Hr,ntb:()=>tr,nvv:()=>La,nxe:()=>ms,o$P:()=>Ot,o4f:()=>ic,o9i:()=>zs,oK$:()=>Ie,oO_:()=>po,oTY:()=>xr,oXC:()=>vc,oe2:()=>Vn,oh$:()=>ed,om1:()=>Oc,opY:()=>$l,oru:()=>Vd,p$y:()=>Ii,p7Y:()=>Pl,pHS:()=>oc,pJh:()=>Lo,pPR:()=>ke,pSk:()=>ko,p_P:()=>en,p_W:()=>qc,pbN:()=>Gd,pdk:()=>Fa,psy:()=>El,pv7:()=>Kl,q0Y:()=>dd,q21:()=>Fu,q93:()=>br,q9n:()=>or,qHr:()=>md,qHw:()=>Wa,qK0:()=>Jd,qUk:()=>Md,qm1:()=>Ou,qpo:()=>bt,qqk:()=>xo,qu6:()=>bu,qug:()=>Wi,qvg:()=>io,r$X:()=>S,r36:()=>pd,rAz:()=>Cu,rFs:()=>Ad,rL8:()=>Tr,rPS:()=>Dd,rQ8:()=>Dr,rc9:()=>pe,rcM:()=>Se,rcY:()=>de,rd:()=>Dn,rdo:()=>jt,rjJ:()=>Kc,rk5:()=>Ns,rpW:()=>Rr,rqS:()=>Pu,ruY:()=>Rn,rxq:()=>Ct,ryr:()=>p,s24:()=>$e,s7T:()=>Nu,sBt:()=>Pn,sC4:()=>xs,sCX:()=>Zr,sEC:()=>be,sM6:()=>En,s_P:()=>Ye,smd:()=>$t,ssC:()=>Ts,t0s:()=>ol,t72:()=>dt,tKN:()=>cd,tTx:()=>vu,tXe:()=>ds,t_B:()=>j,tlg:()=>Ds,uGT:()=>cr,uHi:()=>h,uPi:()=>Ue,uW$:()=>B,upF:()=>_s,uti:()=>Et,uyT:()=>me,v1g:()=>l,v54:()=>ot,v58:()=>ua,v6I:()=>so,v74:()=>jr,vDB:()=>Z,vDg:()=>js,vE0:()=>He,vEN:()=>Zt,vK4:()=>Iu,vNk:()=>fu,vVg:()=>Je,vav:()=>_n,vhR:()=>Es,vhe:()=>gr,viz:()=>wd,vm6:()=>ta,vmZ:()=>W,vxg:()=>Oe,w6S:()=>Ht,w9H:()=>fl,wIz:()=>Zo,wK_:()=>Nl,wSp:()=>gn,wW5:()=>hs,wXQ:()=>xn,wgv:()=>Xl,wnG:()=>hd,wqV:()=>Ki,wsz:()=>Yd,wuN:()=>nl,x0y:()=>fr,x4Z:()=>o,x6:()=>C,x7:()=>Xt,xFy:()=>di,xIb:()=>kc,xJK:()=>rc,xQ7:()=>oo,xSj:()=>Al,xZ:()=>ct,xfN:()=>Hd,xgU:()=>b,xlx:()=>Ui,xyp:()=>Ee,yGY:()=>Me,yHR:()=>I,yII:()=>al,yKz:()=>jl,yTx:()=>yc,yVN:()=>hi,yWH:()=>yr,yWL:()=>sd,yXN:()=>oa,ydO:()=>su,ymQ:()=>Mo,ynf:()=>qa,yoB:()=>tn,yoq:()=>Us,ysr:()=>_d,yxd:()=>Mt,z0Y:()=>Rl,z5S:()=>sa,z8k:()=>Ec,zCt:()=>vi,zDY:()=>yd,zS_:()=>Dt,zSv:()=>Bn,zVQ:()=>sc,zeu:()=>zl,zjS:()=>Ea,zlW:()=>_t,zqi:()=>_r})
const a="SELECTION_SET",i="NOTE_BULK_UPDATE",r="NOTE_CLOSE",s="NOTE_FETCH_VERSIONS",o="NOTE_FETCH_VERSIONS_COMPLETED",l="NOTE_FETCH_VERSIONS_FAILED",c="NOTE_LOAD",d="NOTE_LOAD_VERSION",u="NOTE_LOAD_VERSION_COMPLETED",m="NOTE_LOAD_VERSION_FAILED",p="NOTE_REGISTER_OBJECTS",h="NOTE_REPLACE",E="NOTE_SAVE",S="NOTE_SAVE_COMPLETED",T="NOTE_SAVE_FAILED",g="NOTE_UPDATE",f="ENTRY_CLOSE",I="ENTRY_DELETE",A="ENTRY_DELETE_COMPLETED",y="ENTRY_DELETE_FAILED",_="ENTRY_FETCH_VERSIONS",C="ENTRY_FETCH_VERSIONS_COMPLETED",R="ENTRY_FETCH_VERSIONS_FAILED",N="ENTRY_INVALIDATE",O="ENTRY_LOAD_VERSION",b="ENTRY_LOAD_VERSION_COMPLETED",v="ENTRY_LOAD_VERSION_FAILED",P="ENTRY_OPEN",L="ENTRY_OPEN_COMPLETED",D="ENTRY_OPEN_FAILED",M="ENTRY_REGISTER_OBJECTS",w="ENTRY_RESET_TO_OPEN_VERSION",F="ENTRY_REVERT",k="ENTRY_SAVE",U="ENTRY_SAVE_COMPLETED",x="ENTRY_SAVE_FAILED",B="ENTRY_UPDATE",Z="ENTRY_COLLAB_JOIN",q="ENTRY_COLLAB_LEAVE",G="ENTRY_GENERATE_SNAPSHOT",V="ENTRY_INVOKE_PROCESS_TASK_EXECUTION_TABLE_MAPPING",H="STRUCTURED_TABLE_INVOKE_MAPPINGS",W="EXCESS_DELETE_SNAPSHOTTED_RESOLUTIONS_FOR_TABLE",Y="EXCESS_FORCE_EVALUATION",$="SUBTEMPLATE_CLOSE",K="SUBTEMPLATE_DELETE",z="SUBTEMPLATE_DELETE_COMPLETED",Q="SUBTEMPLATE_DELETE_FAILED",j="SUBTEMPLATE_FETCH_VERSIONS",J="SUBTEMPLATE_FETCH_VERSIONS_COMPLETED",X="SUBTEMPLATE_FETCH_VERSIONS_FAILED",ee="SUBTEMPLATE_LOAD_VERSION",te="SUBTEMPLATE_LOAD_VERSION_COMPLETED",ne="SUBTEMPLATE_LOAD_VERSION_FAILED",ae="SUBTEMPLATE_OPEN",ie="SUBTEMPLATE_OPEN_COMPLETED",re="SUBTEMPLATE_OPEN_FAILED",se="SUBTEMPLATE_REGISTER_OBJECTS",oe="SUBTEMPLATE_RESET_TO_OPEN_VERSION",le="SUBTEMPLATE_REVERT",ce="SUBTEMPLATE_SAVE",de="SUBTEMPLATE_SAVE_COMPLETED",ue="SUBTEMPLATE_SAVE_FAILED",me="SUBTEMPLATE_UPDATE",pe="TEMPLATE_CLOSE",he="TEMPLATE_DELETE",Ee="TEMPLATE_DELETE_COMPLETED",Se="TEMPLATE_DELETE_FAILED",Te="TEMPLATE_FETCH_VERSIONS",ge="TEMPLATE_FETCH_VERSIONS_COMPLETED",fe="TEMPLATE_FETCH_VERSIONS_FAILED",Ie="TEMPLATE_LOAD_VERSION",Ae="TEMPLATE_LOAD_VERSION_COMPLETED",ye="TEMPLATE_LOAD_VERSION_FAILED",_e="TEMPLATE_OPEN",Ce="TEMPLATE_OPEN_COMPLETED",Re="TEMPLATE_OPEN_FAILED",Ne="TEMPLATE_REGISTER_OBJECTS",Oe="TEMPLATE_RESET_TO_OPEN_VERSION",be="TEMPLATE_REVERT",ve="TEMPLATE_SAVE",Pe="TEMPLATE_SAVE_COMPLETED",Le="TEMPLATE_SAVE_FAILED",De="TEMPLATE_UPDATE",Me="TEMPLATE_COLLECTIONS_FETCH",we="TEMPLATE_COLLECTIONS_FETCH_COMPLETED",Fe="TEMPLATE_COLLECTIONS_FETCH_FAILED",ke="TEMPLATE_COLLECTION_FETCH",Ue="TEMPLATE_COLLECTION_FETCH_COMPLETED",xe="TEMPLATE_COLLECTION_FETCH_FAILED",Be="TEMPLATE_COLLECTION_UPDATE",Ze="TEMPLATE_COLLECTION_UPDATE_COMPLETED",qe="TEMPLATE_COLLECTION_UPDATE_FAILED",Ge="TEMPLATE_COLLECTION_DELETE",Ve="TEMPLATE_COLLECTION_DELETE_COMPLETED",He="TEMPLATE_COLLECTION_DELETE_FAILED",We="EDITOR_UPDATE",Ye="EDITOR_REPLACE",$e="EDITOR_CLOSE",Ke="EDITOR_FETCH_VERSIONS",ze="EDITOR_FETCH_VERSIONS_COMPLETED",Qe="EDITOR_FETCH_VERSIONS_FAILED",je="EDITOR_LOAD_VERSION",Je="EDITOR_LOAD_VERSION_COMPLETED",Xe="EDITOR_LOAD_VERSION_FAILED",et="EDITOR_REGISTER_OBJECTS",tt="EDITOR_RESET_TO_OPEN_VERSION",nt="EDITOR_SAVE",at="EDITOR_SAVE_COMPLETED",it="EDITOR_SAVE_FAILED",rt="EDITOR_OPEN",st="EDITOR_OPEN_COMPLETED",ot="EDITOR_OPEN_FAILED",lt="PROTEIN_AA_UPDATE_COMPLETED",ct="PROTEIN_ADD_FOR_SEARCH",dt="PROTEIN_CLEAR_SEARCH_RESULTS",ut="PROTEIN_DELETE_COMPLETED",mt="PROTEIN_FETCH_VERSIONS",pt="PROTEIN_FETCH_VERSIONS_COMPLETED",ht="PROTEIN_FETCH_VERSIONS_FAILED",Et="PROTEIN_HOVER_ANNOTATION",St="PROTEIN_MERGE",Tt="PROTEIN_OPEN_COMPLETED",gt="PROTEIN_PENDING_JUMP_COMPLETED",ft="PROTEIN_REMOVE_FROM_SEARCH",It="PROTEIN_SEARCH_AMINO_ACIDS",At="PROTEIN_SEARCH_OPEN_VIEW",yt="PROTEIN_SEARCH_OPEN_VIEW_COMPLETED",_t="PROTEIN_SELECT_ANNOTATION",Ct="PROTEIN_SELECT_RANGE",Rt="PROTEIN_UNHOVER_ANNOTATION",Nt="PROTEIN_UPDATE_COMPLETED",Ot="PROTEIN_VIEW_NEXT_SEARCH_RESULT",bt="PROTEIN_VIEW_PREVIOUS_SEARCH_RESULT",vt="PROTEIN_ALIGNMENT_DELETE_COMPLETED",Pt="PROTEIN_ALIGNMENT_OPEN_COMPLETED",Lt="PROTEIN_ALIGNMENT_RENAME_COMPLETED",Dt="PROTEIN_ANNOTATION_EDITOR_CANCEL",Mt="PROTEIN_ANNOTATION_EDITOR_INITIAL_DELETE",wt="PROTEIN_ANNOTATION_EDITOR_INITIAL_SAVE",Ft="PROTEIN_ANNOTATION_EDITOR_NEW_ANNOTATION",kt="PROTEIN_ANNOTATION_EDITOR_PENDING_FOCUS_COMPLETED",Ut="PROTEIN_ANNOTATION_EDITOR_SET_COLOR",xt="PROTEIN_ANNOTATION_EDITOR_SET_DISPLAY_END",Bt="PROTEIN_ANNOTATION_EDITOR_SET_DISPLAY_START",Zt="PROTEIN_ANNOTATION_EDITOR_SET_NAME",qt="PROTEIN_ANNOTATION_EDITOR_SET_TYPE",Gt="PROTOCOL_OPEN",Vt="PROTOCOL_OPEN_COMPLETED",Ht="PROTOCOL_OPEN_FAILED",Wt="PROTOCOL_UPDATE",Yt="PROTOCOL_UPDATE_COMPLETED",$t="PROTOCOL_UPDATE_FAILED",Kt="PROTOCOL_DELETE",zt="PROTOCOL_DELETE_COMPLETED",Qt="PROTOCOL_DELETE_FAILED",jt="PROTOCOL_COMMENT",Jt="PROTOCOL_COMMENT_COMPLETED",Xt="PROTOCOL_COMMENT_FAILED",en="PROTOCOL_DELETE_COMMENT",tn="PROTOCOL_DELETE_COMMENT_COMPLETED",nn="PROTOCOL_DELETE_COMMENT_FAILED",an="PROTOCOL_STEP_COMPLETE_COMPLETED",rn="PROTOCOL_STEP_COMPLETE_FAILED",sn="PROTOCOL_STEP_RESET_COMPLETED",on="PROTOCOL_STEP_RESET_FAILED",ln="PROTOCOL_RESET_STEPS_COMPLETED",cn="PROTOCOL_RESET_STEPS_FAILED",dn="ORG_CREATE",un="ORG_CREATE_COMPLETED",mn="ORG_CREATE_FAILED",pn="ORG_FETCH",hn="ORG_FETCH_COMPLETED",En="ORG_FETCH_FAILED",Sn="ORG_UPDATE",Tn="ORG_UPDATE_COMPLETED",gn="ORG_UPDATE_FAILED",fn="TEAM_UPDATE",In="TEAM_UPDATE_COMPLETED",An="TEAM_UPDATE_FAILED",yn="ORGANIZATION_CANCEL_INVITE",_n="ORGANIZATION_SHARE_PROJECTS",Cn="ORGANIZATION_SHARE_PROJECTS_COMPLETED",Rn="ORGANIZATION_SHARE_PROJECTS_FAILED",Nn="MEMBER_PERMISSION_UPDATE",On="MEMBER_PERMISSION_UPDATE_COMPLETED",bn="MEMBER_PERMISSION_UPDATE_FAILED",vn="MEMBER_REMOVAL",Pn="MEMBER_REMOVAL_COMPLETED",Ln="MEMBER_REMOVAL_FAILED",Dn="GROUP_MEMBERS_FETCH_COMPLETED",Mn="ORG_INITIALS_UPDATE_COMPLETED",wn="ORG_INITIALS_UPDATE_FAILED",Fn="RESET_SEARCH_ORG_MODAL_STATE",kn="ORG_SEARCH_COMPLETED",Un="ORG_SEARCH_FAILED",xn="SIDEBAR_OPEN",Bn="SIDEBAR_CLOSE",Zn="SIDEBAR_OPEN_FOR_FILE_TYPE",qn="FILE_BROWSER_MOVE_FILES_COMPLETED",Gn="FILE_BROWSER_MOVE_SHORTCUTS_COMPLETED",Vn="FILE_BROWSER_RENAME_FILE",Hn="FILE_BROWSER_RENAME_FILE_FAILED",Wn="FILE_BROWSER_ITEMS_DELETED",Yn="FILE_BROWSER_SOURCE_DELETED",$n="FILE_BROWSER_SOURCE_UPDATED",Kn="FILE_BROWSER_SOURCES_FETCHED",zn="FILE_BROWSER_RECENTS_FETCHED",Qn="FILE_BROWSER_ADD_TO_WORKSPACE",jn="FILE_BROWSER_BULK_REMOVE_FROM_WORKSPACE",Jn="FILE_BROWSER_REMOVE_FROM_WORKSPACE",Xn="FILE_BROWSER_MOVE_WORKSPACE_TAB",ea="FILE_BROWSER_CLEAR_WORKSPACE",ta="FILE_BROWSER_UNREGISTER_FILES",na="SOURCES_UPDATED_FROM_GRAPHQL",aa="WORKSPACE_WIDTH_UPDATED",ia="FILES_FETCH_COMPLETED",ra="SIDEPANEL_OPEN",sa="SET_SIDEPANEL_CLOSED",oa="SET_SIDEPANEL_COLLAPSED",la="SET_SIDEPANEL_SEMI_EXPANDED",ca="SET_SIDEPANEL_FULLY_EXPANDED",da="SIDEPANEL_OPEN_CREATE_MENU",ua="SIDEPANEL_CLOSE_CREATE_MENU",ma="SIDEPANEL_LIST_ALL_SOURCES",pa="SIDEPANEL_LIST_SINGLE_SOURCE",ha="STORABLES_SIDEPANEL_SET_ACTIVE_REGISTRY",Ea="INTERCOM_OPEN",Sa="INTERCOM_CLOSE",Ta="INTERCOM_MESSAGE_OPENED",ga="INTERCOM_UNREAD_COUNT_CHANGED",fa="FILE_AUTHORS_UPDATED",Ia="FILE_TAGS_UPDATE_STARTED",Aa="FILE_TAGS_UPDATED",ya="FILE_TAGS_UPDATE_FAILED",_a="FILE_TAGS_WITH_FINDER_UPDATED",Ca="FILE_TAG_SCHEMA_UPDATED",Ra="HOME_DASHBOARD_FETCH_REVIEW_SUMMARY",Na="HOME_DASHBOARD_FETCH_REVIEW_SUMMARY_COMPLETED",Oa="HOME_DASHBOARD_FETCH_REVIEW_SUMMARY_FAILED",ba="ONBOARDING_FETCH_GETTING_STARTED_TASKS_COMPLETED",va="ONBOARDING_FETCH_EXTRA_SPACE_TASKS_COMPLETED",Pa="ONBOARDING_ACKNOWLEDGE_COMPLETED_MODULE",La="ONBOARDING_TOGGLE_COLLAPSED_COMPLETED_NUE_MODULE",Da="ONBOARDING_OPEN_NUE_MODULE_INDEX",Ma="ONBOARDING_COMPLETE_TASK",wa="ONBOARDING_DISMISS_NUE_MODULE",Fa="ONBOARDING_RESTORE_NUE_MODULE",ka="USER_FETCH_ORG_REQUESTS_COMPLETED",Ua="USER_ACCEPT_ORG_REQUEST",xa="USER_REJECT_ORG_REQUEST",Ba="USER_DISMISS_ALL_ORG_INVITES",Za="USER_DISMISS_ALL_ORG_INVITES_FAILED",qa="ORG_ACCEPT_REQUEST",Ga="ORG_REJECT_REQUEST",Va="USER_FETCH_REFERRALS",Ha="USER_FETCH_REFERRAL_LINK_ID",Wa="USER_FETCH_METADATA",Ya="CLOSE_CRISPR_MODAL",$a="CLOSE_SEARCH_ORG_MODAL",Ka="OPEN_SEARCH_ORG_MODAL",za="CRISPR_ANALYSIS_CREATE",Qa="CRISPR_ANALYSIS_CREATE_COMPLETED",ja="CRISPR_ANALYSIS_CREATE_FAILED",Ja="CRISPR_ANALYSIS_OPEN",Xa="CRISPR_ANALYSIS_OPEN_COMPLETED",ei="CRISPR_ANALYSIS_OPEN_FAILED",ti="CRISPR_ANALYSIS_UPDATE",ni="CRISPR_ANALYSIS_UPDATE_COMPLETED",ai="CRISPR_ANALYSIS_UPDATE_FAILED",ii="CRISPR_ANALYSIS_TOGGLE_SELECTED_REGIONS",ri="CRISPR_REGION_CREATE",si="CRISPR_REGION_CREATE_COMPLETED",oi="CRISPR_REGION_CREATE_FAILED",li="CRISPR_REGION_UPDATE",ci="CRISPR_REGION_UPDATE_COMPLETED",di="CRISPR_REGION_UPDATE_FAILED",ui="CRISPR_REGION_ANALYZE_OFF_TARGET_COMPLETED",mi="CRISPR_REGION_ANALYZE_ON_TARGET_COMPLETED",pi="CRISPR_REGION_DELETE",hi="CRISPR_REGION_DELETE_COMPLETED",Ei="CRISPR_REGION_DELETE_FAILED",Si="CRISPR_ANALYSIS_FETCH_FOR_SEQUENCE",Ti="CRISPR_ANALYSIS_FETCH_FOR_SEQUENCE_COMPLETED",gi="CRISPR_ANALYSIS_FETCH_FOR_SEQUENCE_FAILED",fi="CRISPR_ANALYSIS_DELETE",Ii="CRISPR_ANALYSIS_DELETE_COMPLETED",Ai="CRISPR_ANALYSIS_DELETE_FAILED",yi="CRISPR_ANALYSIS_UPDATE_GUIDE_GROUP_SORT",_i="CRISPR_ANALYSIS_TOGGLE_SELECTED_GUIDE_GROUPS",Ci="CRISPR_ANALYSIS_ORIGINAL_SEQUENCE_VERSION_FETCH_COMPLETED",Ri="CRISPR_ANALYSIS_REGENERATE",Ni="CRISPR_ANALYSIS_REGENERATE_COMPLETED",Oi="CRISPR_ANALYSIS_REGENERATE_FAILED",bi="CRISPR_VECTOR_CREATE",vi="CRISPR_VECTOR_CREATE_COMPLETED",Pi="CRISPR_VECTOR_CREATE_FAILED",Li="CRISPR_VECTOR_GET_ALL",Di="CRISPR_VECTOR_GET_ALL_COMPLETED",Mi="CRISPR_VECTOR_GET_ALL_FAILED",wi="CRISPR_VECTOR_UPDATE",Fi="CRISPR_VECTOR_UPDATE_COMPLETED",ki="CRISPR_VECTOR_UPDATE_FAILED",Ui="CRISPR_ASSEMBLY_CREATE_ASSEMBLY",xi="CRISPR_ASSEMBLY_SELECT_VECTOR",Bi="CRISPR_ASSEMBLY_SELECT_SEQUENCE",Zi="CRISPR_ASSEMBLY_SELECT_EXISTING_SEQUENCE",qi="CRISPR_ASSEMBLY_UPDATE_ASSEMBLY",Gi="CRISPR_ASSEMBLY_FETCH_BIOJS_SEQUENCE",Vi="TRAY_TASK_ADD",Hi="TRAY_TASK_UPDATE",Wi="TRAY_TASK_REMOVE",Yi="TRAY_TASK_TOGGLE_OPEN",$i="TRAY_TASK_SHOW",Ki="TRAY_TASK_HIDE",zi="TIMER_UPDATE",Qi="TIMER_REMOVE",ji="CALENDAR_CLOSE_CREATE_POPOVER",Ji="CALENDAR_DATE_NAVIGATE",Xi="CALENDAR_DAY_MOUSE_DOWN",er="CALENDAR_DAY_MOUSE_OVER",tr="CALENDAR_DAY_MOUSE_UP",nr="CALENDAR_ENTRIES_FETCH",ar="CALENDAR_ENTRIES_FETCH_COMPLETED",ir="CALENDAR_ENTRIES_FETCH_FAILED",rr="CALENDAR_FILES_FETCH",sr="CALENDAR_FILES_FETCH_COMPLETED",or="CALENDAR_FILES_FETCH_FAILED",lr="CALENDAR_PROCESS_TASKS_FETCH",cr="CALENDAR_PROCESS_TASKS_FETCH_COMPLETED",dr="CALENDAR_PROCESS_TASKS_FETCH_FAILED",ur="CALENDAR_REQUESTS_FETCH",mr="CALENDAR_REQUESTS_FETCH_COMPLETED",pr="CALENDAR_REQUESTS_FETCH_FAILED",hr="CALENDAR_ITEM_DESELECTED",Er="CALENDAR_ITEM_SELECTED",Sr="CALENDAR_TOGGLE_PROJECT_HIDDEN",Tr="CALENDAR_UPDATE_ENTRY_TASK",gr="CALENDAR_UPDATE_FILTERED_MEMBERS",fr="CALENDAR_UPDATE_TODAY",Ir="CALENDAR_VIEW_CHANGE",Ar="ORGANISM_CODON_USAGE_FETCH",yr="HR_TEMPLATE_CREATE",_r="HR_TEMPLATE_CREATE_COMPLETED",Cr="HR_TEMPLATE_CREATE_FAILED",Rr="HR_TEMPLATE_UPDATE",Nr="HR_TEMPLATE_UPDATE_COMPLETED",Or="HR_TEMPLATE_UPDATE_FAILED",br="HR_TEMPLATE_UPDATE_PENDING_SELECTION",vr="HR_TEMPLATE_FETCH_FOR_SEQUENCE",Pr="HR_TEMPLATE_FETCH_FOR_SEQUENCE_COMPLETED",Lr="HR_TEMPLATE_FETCH_FOR_SEQUENCE_FAILED",Dr="TFI_ACCOUNT_ADDED",Mr="TFI_ACCOUNT_DELETED",wr="TFI_ACCOUNTS_FETCHED",Fr="TFI_FOLDER_LISTED",kr="TFI_FOLDER_CONTENTS_FETCHED",Ur="TFI_FILE_META_CHECK_FOR_UPDATES",xr="TFI_FILE_META_CHECK_FOR_UPDATES_COMPLETED",Br="TFI_FILE_META_REGISTER_CHECK_FOR_UPDATES",Zr="TFI_FILE_META_DEREGISTER_CHECK_FOR_UPDATES",qr="TFI_BULK_REGISTER_REMOTE_REVISION_ID",Gr="TFI_TOGGLE_ADD_MODAL",Vr="TFI_LIST_ACCOUNTS",Hr="TFI_SEARCH_SET_QUERY",Wr="TFI_SEARCH_SET_TFI_ACCOUNT_FILTER",Yr="TFI_SEARCH_CLEAR_SEARCH",$r="EXPORT_PATENTSAFE_STARTED",Kr="EXPORT_PATENTSAFE_COMPLETED",zr="EXPORT_PATENTSAFE_FAILED",Qr="TAG_SCHEMAS_FETCH",jr="TAG_SCHEMAS_FETCH_COMPLETED",Jr="TAG_SCHEMAS_FETCH_FAILED",Xr="TAG_SCHEMA_DELETED",es="TAG_SCHEMA_CREATED",ts="TAG_SCHEMA_FIELDS_CREATED",as="TAG_SCHEMA_UPDATED",is="TAG_SCHEMA_FETCH_HOISTED_FIELD_OPTIONS",rs="TAG_SCHEMA_FETCH_HOISTED_FIELD_OPTIONS_FAILED",ss="TAG_SCHEMA_FETCH_HOISTED_FIELD_OPTIONS_COMPLETED",os="TAG_SCHEMA_SET_HOISTED_FIELDS",ls="TAG_SCHEMA_SET_HOISTED_FIELDS_COMPLETED",cs="TAG_SCHEMA_SET_HOISTED_FIELDS_FAILED",ds="TAG_SCHEMA_SAVING_STARTED",us="TAG_SCHEMA_SAVING_FAILED",ms="TAG_SCHEMA_SAVING_COMPLETED",ps="TAG_SCHEMAS_UPDATED_FROM_GRAPHQL",hs="BATCH_SCHEMA_FETCH_ALL",Es="BATCH_SCHEMA_FETCH_ALL_COMPLETED",Ss="BATCH_SCHEMA_FETCH_ALL_FAILED",Ts="BATCH_SCHEMA_FETCH",gs="BATCH_SCHEMA_FETCH_COMPLETED",fs="BATCH_SCHEMA_FETCH_FAILED",Is="BATCH_SCHEMA_DEACTIVATED",As="BATCH_SCHEMA_CREATED_OR_RESTORED",ys="BATCH_SCHEMA_UPDATED",_s="BATCH_SCHEMA_SAVING_STARTED",Cs="BATCH_SCHEMA_SAVING_FAILED",Rs="BATCH_SCHEMA_SAVING_COMPLETED",Ns="BATCH_SCHEMAS_UPDATED_FROM_GRAPHQL",Os="SCHEMA_FIELD_SELECTOR_CREATE_COMPLETED",bs="SCHEMA_FIELD_SELECTOR_DELETE_COMPLETED",vs="SCHEMA_FIELD_SELECTOR_UPDATE_CANCELED",Ps="SCHEMA_FIELD_SELECTOR_UPDATE_COMPLETED",Ls="SCHEMA_FIELD_SELECTOR_UPDATE_FAILED",Ds="SCHEMA_FIELD_SELECTORS_FETCH_COMPLETED",Ms="CONTAINER_UPDATE_COMPLETED",ws="CONTAINER_CONTENT_UPDATE_COMPLETED",Fs="CONTAINER_CONTENTS_DELETE_COMPLETED",ks="BIOENTITY_ALIAS_INFO_LOAD",Us="BIOENTITY_ALIAS_INFO_LOAD_COMPLETED",xs="BIOENTITY_ALIAS_INFO_LOAD_FROM_GRAPHQL",Bs="BIOENTITY_ALIAS_INFO_ADD_COMPLETED",Zs="BIOENTITY_ALIAS_INFO_DELETE_COMPLETED",qs="BIOENTITY_ALIAS_INFO_UPDATE_COMPLETED",Gs="BIOENTITY_ALIAS_INFO_UPDATE_FAILED",Vs="INVENTORY_FILE_LOAD",Hs="INVENTORY_FILES_UPDATE_REGISTRY_COLLECTIONS",Ws="SPREADSHEET_BULK_IMPORT_BEGIN_IMPORT_FLOW",Ys="SPREADSHEET_BULK_IMPORT_FIND_DERIVED_COLUMNS",$s="SPREADSHEET_BULK_IMPORT_FIND_DERIVED_COLUMNS_COMPLETED",Ks="SPREADSHEET_BULK_IMPORT_FIND_DERIVED_COLUMNS_FAILED",zs="SPREADSHEET_BULK_IMPORT_GO_TO_NEXT_PANE",Qs="SPREADSHEET_BULK_IMPORT_GO_TO_PREV_PANE",js="SPREADSHEET_BULK_IMPORT_GO_TO_PANE_WITH_KEY",Js="SPREADSHEET_BULK_IMPORT_REMOVE_SPREADSHEET",Xs="SPREADSHEET_BULK_IMPORT_RESET",eo="SPREADSHEET_BULK_IMPORT_SET_COLUMNS",to="SPREADSHEET_BULK_IMPORT_SET_DERIVED_COLUMNS",no="SPREADSHEET_BULK_IMPORT_SET_OPTIONS",ao="SPREADSHEET_BULK_IMPORT_SET_IMPORT_SETTING",io="SPREADSHEET_BULK_IMPORT_SET_TIME_LIMITS",ro="SPREADSHEET_BULK_IMPORT_SOURCE_TYPE_CHANGED",so="SPREADSHEET_BULK_IMPORT_RAW_TEXT_UPDATED",oo="SPREADSHEET_BULK_IMPORT_UPLOAD_AND_PARSE",lo="SPREADSHEET_BULK_IMPORT_UPLOAD_AND_PARSE_COMPLETED",co="SPREADSHEET_BULK_IMPORT_UPLOAD_AND_PARSE_FAILED",uo="SPREADSHEET_BULK_IMPORT_VALIDATE",mo="SPREADSHEET_BULK_IMPORT_VALIDATE_COMPLETED",po="SPREADSHEET_BULK_IMPORT_VALIDATE_FAILED",ho="SPREADSHEET_BULK_IMPORT_SHOULD_CLOSE_ON_REQUEST",Eo="SPREADSHEET_BULK_IMPORT_UPDATE_MONOMER_MAPPING",So="SPREADSHEET_BULK_TRANSFER_STORABLES_COMPLETED",To="SPREADSHEET_SET_FORMULA",go="SPREADSHEET_SET_TYPED_VALUE",fo="REGISTRY_ACTIVATED",Io="LINK_SYNC",Ao="LINK_PREVIEWS_FETCHED",yo="REGISTRY_VALIDATOR_VALIDATE_FILE_TAGS_COMPLETED",_o="REGISTRY_VALIDATOR_BULK_VALIDATE_FILE_TAGS_COMPLETED",Co="REGISTRY_VALIDATOR_CHECK",Ro="REGISTRY_VALIDATOR_CHECK_COMPLETED",No="REGISTRY_VALIDATOR_MOVE",Oo="REGISTRY_VALIDATOR_CANCEL",bo="REGISTRY_VALIDATOR_MOVE_COMPLETED",vo="BIOENTITIES_VALIDATION_STATUS_UPDATED",Po="TOAST_PUSH",Lo="TOAST_CLOSE",Do="HIDE_FULL_SCREEN",Mo="SHOW_FULL_SCREEN",wo="BEGIN_NEW_USER_FLOW",Fo="NEW_USER_FLOW_IS_LOADING",ko="NEW_USER_FLOW_DONE_LOADING",Uo="SHOW_NEXT_NEW_USER_FLOW_SCREEN",xo="UPDATE_NEW_USER_FLOW_PROJECT",Bo="OPEN_CREATE_ORGANIZATION_PAGE",Zo="OPEN_CREATE_TEAM_PAGE",qo="OPEN_CREATE_TEAM_PAGE_FAILED",Go="OPEN_ORGANIZATION_PAGE",Vo="OPEN_ORGANIZATION_PAGE_COMPLETED",Ho="OPEN_ORGANIZATION_PAGE_FAILED",Wo="OPEN_TEAM_PAGE",Yo="OPEN_TEAM_PAGE_COMPLETED",$o="OPEN_TEAM_PAGE_FAILED",Ko="OPEN_USER_PAGE_COMPLETED",zo="OPEN_MEMBERS_TAB_COMPLETED",Qo="OPEN_ORGANIZATION_PROJECTS_TAB",jo="OPEN_TEAM_PROJECTS_TAB",Jo="OPEN_ORGANIZATION_TEAMS_TAB",Xo="UPDATE_ACTIVE_TAB",el="REGISTRY_ACTIVATION_SET_ORGANIZATION",tl="REGISTRY_ACTIVATION_SET_IS_LOADING",nl="APPLICABLE_BATCHES_FETCH_COMPLETED",al="BATCHES_FETCH_COMPLETED",il="BATCHES_IMPORT_COMPLETED",rl="BATCHES_BULK_UPDATE_COMPLETED",sl="CONTAINER_BULK_UPDATE_COMPLETED",ol="CONTAINER_TAGS_UPDATE_COMPLETED",ll="CONTAINER_FETCH_COMPLETED",cl="CONTAINER_FETCH_TRANSFER_INFO_COMPLETED",dl="CONTAINER_BULK_FETCH_COMPLETED",ul="CONTAINER_INVALIDATED",ml="CONTAINER_SCHEMAS_FETCH_COMPLETED",pl="CONTAINER_SCHEMA_CREATE_COMPLETED",hl="CONTAINER_SCHEMA_DELETE_COMPLETED",El="CONTAINER_SCHEMA_UPDATE",Sl="CONTAINER_SCHEMA_UPDATE_COMPLETED",Tl="CONTAINER_SCHEMA_UPDATE_FAILED",gl="CONTAINER_SCHEMAS_UPDATED_FROM_GRAPHQL",fl="STORABLE_SUMMARIES_FETCH_COMPLETED",Il="STORABLES_BULK_FETCH_COMPLETED",Al="STORABLES_UPDATED",yl="STORABLES_MOVE_COMPLETED",_l="CONTAINERS_TRANSFER_COMPLETED",Cl="CONTAINERS_TRANSFER_UNDO_COMPLETED",Rl="BATCHES_BULK_FETCH_COMPLETED",Nl="BOX_SCHEMAS_FETCH_COMPLETED",Ol="BOX_SCHEMA_CREATE_COMPLETED",bl="BOX_SCHEMA_DELETE_COMPLETED",vl="BOX_SCHEMA_UPDATE",Pl="BOX_SCHEMA_UPDATE_COMPLETED",Ll="BOX_SCHEMA_UPDATE_FAILED",Dl="BOX_SCHEMAS_UPDATED_FROM_GRAPHQL",Ml="PLATE_SCHEMAS_FETCH_COMPLETED",wl="PLATE_SCHEMA_CREATE_COMPLETED",Fl="PLATE_SCHEMA_DELETE_COMPLETED",kl="PLATE_SCHEMA_UPDATE",Ul="PLATE_SCHEMA_UPDATE_COMPLETED",xl="PLATE_SCHEMA_UPDATE_FAILED",Bl="PLATE_SCHEMAS_UPDATED_FROM_GRAPHQL",Zl="GRID_FETCH_COMPLETED",ql="GRID_CLOSE",Gl="GRID_INVALIDATED",Vl="GRID_UPDATE_STARTED",Hl="GRID_UPDATE_COMPLETED",Wl="GRID_UPDATE_FAILED",Yl="STORABLE_FETCH_FAILED_WITH_UNREADABLE_SAMPLE_ERROR",$l="STORABLE_FETCH_FAILED_WITH_INACCESSIBLE_ERROR",Kl="LOCATION_FETCH_COMPLETED",zl="LOCATION_SCHEMAS_FETCH_COMPLETED",Ql="LOCATION_SCHEMA_CREATE_COMPLETED",jl="LOCATION_SCHEMA_DELETE_COMPLETED",Jl="LOCATION_SCHEMA_UPDATE",Xl="LOCATION_SCHEMA_UPDATE_COMPLETED",ec="LOCATION_SCHEMA_UPDATE_FAILED",tc="LOCATION_SCHEMAS_UPDATED_FROM_GRAPHQL",nc="STORABLE_STORE_RESET_SAVING_STATE",ac="PRINTERS_FETCH_COMPLETED",ic="PRINTER_CREATE_COMPLETED",rc="PRINTER_UPDATE_STARTED",sc="PRINTER_UPDATE_FAILED",oc="PRINTER_UPDATE_COMPLETED",lc="PRINTER_DELETE_COMPLETED",cc="LABEL_TEMPLATES_FETCH_COMPLETED",dc="LABEL_TEMPLATE_CREATE_COMPLETED",uc="LABEL_TEMPLATE_UPDATE_STARTED",mc="LABEL_TEMPLATE_UPDATE_COMPLETED",pc="LABEL_TEMPLATE_UPDATE_FAILED",hc="LABEL_TEMPLATE_DELETE_COMPLETED",Ec="ASSAY_SCHEMAS_LISTED",Sc="ASSAY_SCHEMA_FETCHED",Tc="ASSAY_SCHEMAS_UPDATED_FROM_GQL",fc="WORKFLOW_SELECT_WORKFLOW_TEMPLATE_VERSION",Ic="WORKFLOW_WORKFLOW_DASHBOARD_SCREEN_OPEN",Ac="WORKFLOW_WORKFLOW_DASHBOARD_TEMPLATES_SCREEN_OPEN",yc="WORKFLOW_WORKFLOW_DETAILS_SCREEN_OPEN",_c="WORKFLOW_WORKFLOW_TEMPLATE_VIEW_SCREEN_OPEN",Cc="WORKFLOW_ALL_DATA_TABLE_CONFIGS_FETCH_COMPLETED",Rc="WORKFLOW_WORKFLOW_SUMMARIES_FETCH_COMPLETED",Nc="WORKFLOW_ALL_WORKFLOW_TEMPLATES_FETCH_COMPLETED",Oc="WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED",bc="WORKFLOW_WORKFLOW_FETCH_COMPLETED",vc="WORKFLOW_WORKFLOW_TEMPLATE_FULL_FETCH_COMPLETED",Pc="WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED",Lc="WORKFLOW_WORKFLOW_TEMPLATE_VERSION_SUMMARY_FETCH_COMPLETED",Dc="WORKFLOW_STAGE_CONFIGURATION_FETCH_COMPLETED",Mc="WORKFLOW_STAGE_FETCH_COMPLETED",wc="WORKFLOW_STAGE_ENTRIES_FETCH_COMPLETED",Fc="WORKFLOW_STAGE_ENTRY_DETAILS_FETCH_COMPLETED",kc="WORKFLOW_STAGE_ENTRY_DOCUMENT_FETCH_STARTED",Uc="WORKFLOW_STAGE_ENTRY_DOCUMENT_FETCH_COMPLETED",xc="WORKFLOW_STAGE_ENTRY_DOCUMENT_FETCH_FAILED",Bc="WORKFLOW_STAGE_ENTRY_INVALIDATE",Zc="WORKFLOW_STAGE_ENTRY_REGISTER_OBJECTS",qc="WORKFLOW_STAGE_ENTRY_CLOSE",Gc="WORKFLOW_STAGE_ENTRY_REVERT",Vc="WORKFLOW_STAGE_ENTRY_UPDATE",Hc="WORKFLOW_STAGE_ENTRY_SAVE",Wc="WORKFLOW_STAGE_ENTRY_SAVE_COMPLETED",Yc="WORKFLOW_STAGE_ENTRY_SAVE_FAILED",$c="WORKFLOW_STAGE_ENTRY_LOAD_VERSION",Kc="WORKFLOW_STAGE_ENTRY_LOAD_VERSION_COMPLETED",zc="WORKFLOW_STAGE_ENTRY_LOAD_VERSION_FAILED",Qc="WORKFLOW_STAGE_ENTRY_FETCH_VERSIONS",jc="WORKFLOW_STAGE_ENTRY_FETCH_VERSIONS_COMPLETED",Jc="WORKFLOW_STAGE_ENTRY_FETCH_VERSIONS_FAILED",Xc="WORKFLOW_STAGE_FLOW_NODE_FETCH_COMPLETED",ed="WORKFLOW_ENTRY_TEMPLATE_FETCH_STARTED",td="WORKFLOW_ENTRY_TEMPLATE_FETCH_COMPLETED",nd="WORKFLOW_ENTRY_TEMPLATE_FETCH_FAILED",ad="WORKFLOW_ENTRY_TEMPLATE_DISCARD",id="WORKFLOW_ENTRY_TEMPLATE_REGISTER_OBJECTS",rd="WORKFLOW_ENTRY_TEMPLATE_UPDATE",sd="WORKFLOW_ENTRY_TEMPLATE_SAVE_STARTED",od="WORKFLOW_ENTRY_TEMPLATE_SAVE_COMPLETED",ld="WORKFLOW_ENTRY_TEMPLATE_SAVE_FAILED",cd="WORKFLOW_STAGE_RUN_SAMPLES_FETCH_COMPLETED",dd="WORKFLOW_STAGE_RUN_SAMPLES_FETCH_STARTED",ud="WORKFLOW_STAGE_RUNS_FETCH_COMPLETED",md="WORKFLOW_STAGE_RUNS_OUTPUT_SAMPLES_FETCHED",pd="WORKFLOW_GRAPH_CHANGED",hd="BULK_ANTIBODY_UPDATE",Ed="BULK_ASSEMBLY_SET_TOPOLOGY",Sd="BULK_ASSEMBLY_ADD_SLOT",Td="BULK_ASSEMBLY_NEXT_SLOT",gd="BULK_ASSEMBLY_PREVIOUS_SLOT",fd="BULK_ASSEMBLY_SET_SLOT_DATA_SOURCE",Id="BULK_ASSEMBLY_UPDATE_SLOT",Ad="BULK_ASSEMBLY_REMOVE_SLOT",yd="BULK_ASSEMBLY_UPDATE_DATA_SOURCE",_d="BULK_ASSEMBLY_ACTIVATE_STEP",Cd="BULK_ASSEMBLY_RESET_SLOT_DATA_SOURCE",Rd="BULK_ASSEMBLY_RUN",Nd="BULK_ASSEMBLY_RUN_COMPLETED",Od="BULK_ASSEMBLY_RUN_FAILED",bd="BULK_ASSEMBLY_TAG_SCHEMA_ID",vd="BULK_ASSEMBLY_RESET_SCHEMA_FIELDS",Pd="BULK_ASSEMBLY_SEQUENCE_FOLDER_ID",Ld="BULK_ASSEMBLY_PRIMER_FOLDER_ID",Dd="BULK_ASSEMBLY_FRAGMENT_FOLDER_ID",Md="BULK_ASSEMBLY_RESET",wd="BULK_ASSEMBLY_RESET_SOURCES_AND_OUTPUT",Fd="BULK_ASSEMBLY_VALIDATE",kd="BULK_ASSEMBLY_VALIDATE_COMPLETED",Ud="BULK_ASSEMBLY_VALIDATE_FAILED",xd="BULK_ASSEMBLY_SET_USE_SEQUENCE_WORKLIST",Bd="BULK_ASSEMBLY_SET_USE_PRIMER_WORKLIST",Zd="BULK_ASSEMBLY_SET_USE_FRAGMENT_WORKLIST",qd="BULK_ASSEMBLY_SET_NEW_WORKLIST_INFO",Gd="BULK_ASSEMBLY_SET_NEW_PRIMER_WORKLIST_INFO",Vd="BULK_ASSEMBLY_SET_NEW_FRAGMENT_WORKLIST_INFO",Hd="BULK_ASSEMBLY_SET_EXISTING_WORKLIST_ID",Wd="BULK_ASSEMBLY_SET_EXISTING_PRIMER_WORKLIST_ID",Yd="BULK_ASSEMBLY_SET_EXISTING_FRAGMENT_WORKLIST_ID",$d="BULK_ASSEMBLY_SET_NEW_OR_EXISTING_WORKLIST",Kd="BULK_ASSEMBLY_SET_NEW_OR_EXISTING_PRIMER_WORKLIST",zd="BULK_ASSEMBLY_SET_NEW_OR_EXISTING_FRAGMENT_WORKLIST",Qd="BULK_TRANSLATE_UPDATE",jd="BULK_TRANSLATE_UPDATE_TRANSLATION_SPEC",Jd="BULK_TRANSLATE_RUN_COMPLETED",Xd="BULK_ARCHIVE_ASSAY_SCHEMAS_COMPLETED",eu="BULK_ARCHIVE_BATCHES_COMPLETED",tu="BULK_ARCHIVE_CONNECTIONS",nu="BULK_ARCHIVE_FILES_COMPLETED",au="BULK_ARCHIVE_ANALYSES_COMPLETED",iu="BULK_ARCHIVE_PROCESS_MANAGEMENT",ru="BULK_ARCHIVE_SOURCES_COMPLETED",su="BULK_ARCHIVE_REGISTRIES_COMPLETED",ou="BULK_ARCHIVE_STORABLES_COMPLETED",lu="BULK_ARCHIVE_TAG_SCHEMAS_COMPLETED",cu="BULK_ARCHIVE_TEMPLATE_COLLECTIONS_COMPLETED",du="BULK_ARCHIVE_STORABLE_SCHEMAS_COMPLETED",uu="BULK_ARCHIVE_SCHEMA_FIELD_SELECTORS_COMPLETED",mu="BULK_UNARCHIVE_ASSAY_SCHEMAS_COMPLETED",pu="BULK_UNARCHIVE_BATCHES_COMPLETED",hu="BULK_UNARCHIVE_CONNECTIONS",Eu="BULK_UNARCHIVE_FILES_COMPLETED",Su="BULK_UNARCHIVE_ANALYSES_COMPLETED",Tu="BULK_UNARCHIVE_PROCESS_MANAGEMENT",gu="BULK_UNARCHIVE_SOURCES_COMPLETED",fu="BULK_UNARCHIVE_STORABLES_COMPLETED",Iu="BULK_UNARCHIVE_TAG_SCHEMAS_COMPLETED",Au="BULK_UNARCHIVE_TEMPLATE_COLLECTIONS_COMPLETED",yu="BULK_UNARCHIVE_STORABLE_SCHEMAS_COMPLETED",_u="BULK_UNARCHIVE_SCHEMA_FIELD_SELECTORS_COMPLETED",Cu="HOISTED_TAGS_FETCH_COMPLETED",Ru="CONTAINABLE_LIST_CONTAINERS_STARTED",Nu="CONTAINABLE_LIST_PLATES_STARTED",Ou="CONTAINABLE_LIST_CONTAINERS_COMPLETED",bu="CONTAINABLE_LIST_PLATES_COMPLETED",vu="CONTAINABLE_LIST_CONTAINERS_FAILED",Pu="CONTAINABLE_LIST_PLATES_FAILED",Lu="CONTAINABLE_CLEAR_CONTAINER_LISTING",Du="CONTAINABLE_CLEAR_PLATE_LISTING",Mu="COMPUTED_TAGS_UPDATED_AFTER_REGISTRATION_ACTION",wu="CICO_STATUS_UPDATED",Fu="PROCESS_MANAGEMENT_ITEMS_UPDATED"},231088:(e,t,n)=>{n.r(t)
n.d(t,{FILE_FORMAT:()=>s,FORMAT:()=>r,GBPreferences:()=>c,GROUPING_FORMAT:()=>o,STATUS:()=>l,TYPE:()=>i,TYPE_TO_FORMATS:()=>d})
var a=n(531041)
const i={ALL:"ALL",BULK:"BULK",REGISTRY:"REGISTRY",ENTRIES:"ENTRIES",SEQUENCE:"SEQUENCE",OLIGO:"OLIGO"},r={ALL_ZIP:"ALL_ZIP",ALL_ZIP_HTML:"ALL_ZIP_HTML",BULK_ZIP_PDF:"BULK_ZIP_PDF",BULK_ZIP_HTML:"BULK_ZIP_HTML",REGISTRY_CSV:"REGISTRY_CSV",ENTRIES_GROUP_BY_DATE:"ENTRIES_GROUP_BY_DATE",ENTRIES_GROUP_BY_ENTRY:"ENTRIES_GROUP_BY_ENTRY",ENTRIES_GROUP_BY_DATE_HTML:"ENTRIES_GROUP_BY_DATE_HTML",ENTRIES_GROUP_BY_ENTRY_HTML:"ENTRIES_GROUP_BY_ENTRY_HTML",SEQUENCE_ZIP:"SEQUENCE_ZIP",SEQUENCE_MULTIPART_GB:"SEQUENCE_MULTIPART_GB",OLIGO_CSV:"OLIGO_CSV"},s={CSV:"CSV",HTML:"HTML",GB:"GB",PDF:"PDF",ZIP:"ZIP"},o={BY_DATE:"BY_DATE",BY_ENTRY:"BY_ENTRY"},l={PENDING:"pending",RUNNING:"running",FAILED:"failed",SUCCEEDED:"succeeded"},c={EXPORT_ANNOTATION_COLORS:"GB_EXPORT_ANNOTATION_COLORS",CONVERT_NON_STANDARD_ANNOTATIONS:"export.restrictFeatType"},d=a.default.object([[i.ALL,[r.ALL_ZIP,r.ALL_ZIP_HTML]],[i.REGISTRY,[r.REGISTRY_CSV]],[i.ENTRIES,[r.ENTRIES_GROUP_BY_DATE,r.ENTRIES_GROUP_BY_ENTRY,r.ENTRIES_GROUP_BY_DATE_HTML,r.ENTRIES_GROUP_BY_ENTRY_HTML]],[i.SEQUENCE,[r.SEQUENCE_ZIP,r.SEQUENCE_MULTIPART_GB]],[i.OLIGO,[r.OLIGO_CSV]]])},3472:(e,t,n)=>{n.r(t)
n.d(t,{ALL_SECTION:()=>S,DENSITY:()=>p,DEPRECATED_FOLDER_SHAPE:()=>l,FILTER_PARENT_STORABLE_ROOT:()=>c,FINDER_ITEM_TYPE:()=>T,FileBrowerPreferences:()=>d,INACCESSIBLE_MESSAGE:()=>r,INVENTORY_SECTION:()=>E,NOTEBOOK_SECTION:()=>h,SCHEMA_ID_BATCH_SCHEMA_ALL:()=>o,SCHEMA_ID_TAG_SCHEMA_ALL:()=>s,SEQUENCE_TYPE:()=>u,SORTS_SHAPE:()=>m})
var a=n(602652),i=n(239070)
const r="The file you were trying to access is no longer available. It may have been deleted or moved into a project you do not have access to.",s="TAG_SCHEMA_ALL",o="BATCH_SCHEMA_ALL",l=a.shape({api_identifier:a.string.isRequired,name:a.string.isRequired,source:a.object.isRequired,url:a.string.isRequired}),c="root",d={PAGE_SIZE:"pageSize"},u={DOUBLE_STRANDED:"ds",SINGLE_STRANDED:"ss",OLIGO:"oligo"},m=a.arrayOf(a.shape({key:a.string.isRequired,reverse:a.bool.isRequired})),p={COMFORTABLE:"comfortable",COMPACT:"compact"},h=i.$.NOTEBOOK,E=i.$.INVENTORY,S=i.$.ALL,T={FILE:"FILE",BATCH:"BATCH",STORABLE:"STORABLE"}},436208:(e,t,n)=>{n.r(t)
n.d(t,{ALIGNMENT_TYPE:()=>K,ASSEMBLY_CONSTRUCT_AXIS_ADDITIONAL_HEIGHT:()=>v,AXIS_VMARGIN:()=>b,DEFAULT_ALIGNMENT_LAYOUT:()=>k,DEFAULT_DNA_SEQUENCE_LAYOUT:()=>U,DEFAULT_OLIGO_CONJUGATE_LAYOUT:()=>Z,DEFAULT_OLIGO_LAYOUT:()=>B,DEFAULT_PROTEIN_LAYOUT:()=>P,DEFAULT_RNA_SEQUENCE_LAYOUT:()=>x,DETAILED_NUCLEOTIDE_SEQUENCE_STATIC_ZOOM:()=>V,LINEAR_INLINE_LAYERS:()=>u,LINEAR_LAYER_FULL:()=>$,LINEAR_LAYER_INLINE:()=>c,LINEAR_LAYER_INLINE_PDF:()=>d,LINEAR_MAP_Y_COMPONENTS:()=>m,LINEAR_MAP_Z_COMPONENTS:()=>g,LINEAR_MAX_ZOOM_NO_MODS:()=>W,MAX_VISIBLE_RING_FEATURES:()=>j,MINI_MAP_Y_COMPONENTS:()=>y,MINI_MAP_Z_COMPONENTS:()=>_,MapType:()=>Q,NUCLEOTIDE_ALIGNMENT_ROW_Y_COMPONENTS:()=>C,NUCLEOTIDE_ALIGNMENT_ROW_Z_COMPONENTS:()=>R,NUCLEOTIDE_SEQUENCE_MIN_ZOOM:()=>H,OLIGO_CONJUGATE_MAP_Y_COMPONENTS:()=>S,OLIGO_CONJUGATE_MAP_Z_COMPONENTS:()=>T,OLIGO_MAP_Y_COMPONENTS:()=>h,OLIGO_MAP_Z_COMPONENTS:()=>E,POLYMER_DEFAULT_FONT_SIZE:()=>q,POLYMER_MIN_VISIBLE_FONT_SIZE:()=>G,PROTEIN_ALIGNMENT_ROW_Y_COMPONENTS:()=>N,PROTEIN_ALIGNMENT_ROW_Z_COMPONENTS:()=>O,PROTEIN_MAP_Y_COMPONENTS:()=>I,PROTEIN_MAP_Z_COMPONENTS:()=>A,PROTEIN_MIN_ZOOM:()=>Y,RNA_LINEAR_MAP_Y_COMPONENTS:()=>p,RNA_LINEAR_MAP_Z_COMPONENTS:()=>f,SEQUENCE_MAP_TYPE_USER_PREFERENCE_KEY:()=>z,SliceComponentName:()=>a,TRANSCRIPTION_LINE_DEFAULT_HEIGHT:()=>L,TRANSCRIPTION_LINE_HEIGHT_SCALE:()=>D})
var a,i=n(64558),r=n(348920),s=n(882321),o=n(219579),l=n(773364)
!function(e){e.forwardPamSites="forwardPamSites"
e.cutSites="cutSites"
e.reversePamSites="reversePamSites"
e.dna="dna"
e.title="title"
e.emptyPlaceholder="emptyPlaceholder"
e.aminoAcids="aminoAcids"
e.antibodyCDRAnnotations="antibodyCDRAnnotations"
e.antibodyAlignmentCDRAnnotations="antibodyAlignmentCDRAnnotations"
e.dnaSearch="dnaSearch"
e.translations="translations"
e.readingFrames="readingFrames"
e.annotations="annotations"
e.primers="primers"
e.forwardPrimers="forwardPrimers"
e.reversePrimers="reversePrimers"
e.orfs="orfs"
e.sequenceAxis="sequenceAxis"
e.homologyRegionAxis="homologyRegionAxis"
e.trace="trace"
e.votes="votes"
e.line="line"
e.parts="parts"
e.partAnnotations="partAnnotations"
e.gapToRealAxis="gapToRealAxis"
e.alignmentComments="alignmentComments"
e.primerAssemblyMismatches="primerAssemblyMismatches"
e.goldenGateCutSites="goldenGateCutSites"
e.proteinAxis="proteinAxis"
e.proteinAlignmentAxis="proteinAlignmentAxis"
e.aminoAcidsSearch="aminoAcidsSearch"
e.attachedMolecules="attachedMolecules"
e.codonOptimization="codonOptimization"
e.proteinAnnotations="proteinAnnotations"
e.proteinAlignmentAnnotations="proteinAlignmentAnnotations"
e.proteinPIGraph="proteinPIGraph"
e.proteinHydrophobicityGraph="proteinHydrophobicityGraph"
e.proteinAlignmentIdentityGraph="proteinAlignmentIdentityGraph"
e.antibodyNumbering="antibodyNumbering"
e.proteinLiabilitySites="proteinLiabilitySites"
e.modifiedNucleotides="modifiedNucleotides"
e.modifiedNucleotideSummary="modifiedNucleotideSummary"
e.nucleotidesAxisOverlay="nucleotidesAxisOverlay"
e.nucleotidesPositionHighlight="nucleotidesPositionHighlight"
e.selectionHiddenWrapper="selectionHiddenWrapper"
e.forwardTranscriptionLine="forwardTranscriptionLine"
e.reverseTranscriptionLine="reverseTranscriptionLine"
e.transcriptionArrow="transcriptionArrow"}(a||(a={}))
const c="inlineLayer",d="inlineLayer-pdf",u=[c,d],m=(0,i.oA)([a.emptyPlaceholder,a.cutSites,a.transcriptionArrow,a.forwardPamSites,a.forwardPrimers,a.forwardTranscriptionLine,a.parts,a.primerAssemblyMismatches,a.goldenGateCutSites,a.codonOptimization,a.dnaSearch,a.dna,a.selectionHiddenWrapper,r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?a.partAnnotations:null,a.reverseTranscriptionLine,a.reversePrimers,a.reversePamSites,a.translations,a.orfs,a.annotations,a.sequenceAxis,a.homologyRegionAxis]),p=(0,i.oA)([a.emptyPlaceholder,a.cutSites,a.forwardPrimers,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotideSummary:null,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesPositionHighlight:null,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotides:null,a.parts,a.dnaSearch,a.dna,a.selectionHiddenWrapper,r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?a.partAnnotations:null,a.reversePrimers,a.translations,a.orfs,a.annotations,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesAxisOverlay:null,a.sequenceAxis]),h=(0,i.oA)([r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesPositionHighlight:null,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotides:null,a.dnaSearch,a.dna,a.selectionHiddenWrapper,a.annotations,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesAxisOverlay:null,a.sequenceAxis]),E=(0,i.oA)([a.dnaSearch,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesPositionHighlight:null,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotides:null,a.dna,a.selectionHiddenWrapper,a.annotations,a.sequenceAxis,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesAxisOverlay:null]),S=(0,i.oA)([a.attachedMolecules,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotides:null,a.dnaSearch,a.dna,a.selectionHiddenWrapper,a.nucleotidesAxisOverlay,a.sequenceAxis]),T=(0,i.oA)([a.attachedMolecules,a.dnaSearch,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotides:null,a.dna,a.selectionHiddenWrapper,a.sequenceAxis,a.nucleotidesAxisOverlay]),g=(0,i.oA)([a.emptyPlaceholder,a.parts,a.dna,a.selectionHiddenWrapper,r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?a.partAnnotations:null,a.cutSites,a.transcriptionArrow,a.forwardTranscriptionLine,a.reverseTranscriptionLine,a.forwardPamSites,a.reversePamSites,a.codonOptimization,a.dnaSearch,a.primerAssemblyMismatches,a.goldenGateCutSites,a.translations,a.orfs,a.annotations,a.forwardPrimers,a.reversePrimers,a.sequenceAxis,a.homologyRegionAxis]),f=(0,i.oA)([a.emptyPlaceholder,a.parts,a.dnaSearch,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotideSummary:null,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesPositionHighlight:null,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.modifiedNucleotides:null,a.dna,a.selectionHiddenWrapper,r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?a.partAnnotations:null,a.cutSites,a.translations,a.orfs,a.annotations,a.forwardPrimers,a.reversePrimers,a.sequenceAxis,r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?a.nucleotidesAxisOverlay:null]),I=(0,i.oA)([a.proteinPIGraph,a.proteinHydrophobicityGraph,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyCDRAnnotations:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyNumbering:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.proteinLiabilitySites:null,a.aminoAcidsSearch,a.aminoAcids,a.selectionHiddenWrapper,a.proteinAnnotations,a.proteinAxis]),A=(0,i.oA)([a.proteinPIGraph,a.proteinHydrophobicityGraph,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyCDRAnnotations:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyNumbering:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.proteinLiabilitySites:null,a.aminoAcids,a.selectionHiddenWrapper,a.aminoAcidsSearch,a.proteinAnnotations,a.proteinAxis]),y=(0,i.oA)([a.title,a.cutSites,a.parts,a.dna,a.selectionHiddenWrapper,a.sequenceAxis,a.homologyRegionAxis,r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?a.partAnnotations:null,a.orfs,a.translations,a.annotations,a.primers]),_=(0,i.oA)([a.title,a.parts,a.cutSites,a.dna,a.selectionHiddenWrapper,a.sequenceAxis,a.homologyRegionAxis,r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?a.partAnnotations:null,a.orfs,a.translations,a.annotations,a.primers]),C=[a.votes,a.alignmentComments,a.trace,a.line,a.dnaSearch,a.dna,a.selectionHiddenWrapper,a.sequenceAxis,a.gapToRealAxis,a.translations,a.readingFrames,a.annotations,a.primers],R=[a.votes,a.trace,a.line,a.dna,a.selectionHiddenWrapper,a.dnaSearch,a.sequenceAxis,a.gapToRealAxis,a.translations,a.readingFrames,a.annotations,a.primers,a.alignmentComments],N=(0,i.oA)([a.proteinAlignmentIdentityGraph,a.proteinPIGraph,a.proteinHydrophobicityGraph,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyAlignmentCDRAnnotations:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyNumbering:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.proteinLiabilitySites:null,a.line,a.aminoAcids,a.selectionHiddenWrapper,a.proteinAlignmentAnnotations,a.proteinAlignmentAxis]),O=(0,i.oA)([a.proteinAlignmentIdentityGraph,a.proteinPIGraph,a.proteinHydrophobicityGraph,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyAlignmentCDRAnnotations:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.antibodyNumbering:null,r.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?a.proteinLiabilitySites:null,a.line,a.aminoAcids,a.selectionHiddenWrapper,a.proteinAlignmentAnnotations,a.proteinAlignmentAxis]),b=10,v=6,P={aminoAcids:{visible:!0,spacer:4,vMargin:0,type:{fontSize:14,letterSpacing:0},foregroundColoring:l.yy.RASMOL,showColoring:!0},proteinHydrophobicityGraph:{height:30,vMargin:5},proteinPIGraph:{height:30,vMargin:5},proteinAlignmentIdentityGraph:{height:30,vMargin:5},summaryIdentityGraph:{slidingWindowSize:5,visible:!0,height:30,vMargin:5},antibodyNumbering:{type:{fontSize:11},vMargin:10},proteinLiabilitySites:{height:10,vMargin:5}},L=4,D=.2,M={height:12,vMargin:0},w={vMargin:10},F={vMargin:10},k={primers:F},U={forwardTranscriptionLine:{vMargin:0,visible:!0,svgHeight:L},reverseTranscriptionLine:{vMargin:0,visible:!0,svgHeight:L},transcriptionArrow:{vMargin:0,visible:!0},parts:M,partAnnotations:w,primers:F},x={modifiedNucleotides:{vMargin:0,visible:!1},modifiedNucleotideSummary:{vMargin:0},nucleotidesAxisOverlay:{vMargin:b},nucleotidesPositionHighlight:{vMargin:0},parts:M,partAnnotations:w,primers:F},B={modifiedNucleotides:{vMargin:0,visible:!0},nucleotidesAxisOverlay:{vMargin:b},nucleotidesPositionHighlight:{vMargin:0}},Z={modifiedNucleotides:{vMargin:-5,visible:!0},nucleotidesAxisOverlay:{vMargin:b},attachedMolecules:{vMargin:6,visible:!0}},q=15,G=10,V=400,H=20,W=300,Y=100*o.Z.widths[G]/o.Z.widths[q],$="fullLayer",K=s.N2,z="MOLBIO_SEQUENCE_MAP_TYPE"
var Q
!function(e){e.PLASMID="plasmid"
e.LINEAR_SEQUENCE="linear"
e.MINIMAP="minimap"}(Q||(Q={}))
const j=100},647517:(e,t,n)=>{n.d(t,{DF:()=>A,J3:()=>d,QW:()=>measurementString,SN:()=>_,T1:()=>isVolumeOrNullUnits,U3:()=>getSharedCompatibleContainerQuantityUnits,U5:()=>O,V7:()=>areUnitsCompatible,W1:()=>R,ci:()=>b,fO:()=>N,kI:()=>getValidContainerQuantityUnits,re:()=>C,td:()=>getCompatibleContainerQuantityUnits})
var a=n(602652),i=n(615439),r=n.n(i),s=n(232606),o=n(348920)
const l=["L","mL","uL","nL","pL"],c=["gal (US)","qt (US)","pt (US)"],d=[...l,...c],u={pL:1e-12,nL:1e-9,uL:1e-6,mL:.001,L:1,"pt (US)":.473176473,"qt (US)":.946352946,"gal (US)":3.785411784};(0,s.hu)(r()(new Set(Object.keys(u)),new Set(d)),"Volume unit constants are not in sync!")
const m=["lb","oz"],p=["kg","g","mg","ug","ng","pg",...m],h={pg:1e-15,ng:1e-12,ug:1e-9,mg:1e-6,g:.001,kg:1,oz:.028349523125,lb:.45359237};(0,s.hu)(r()(new Set(Object.keys(h)),new Set(p)),"Mass unit constants are not in sync!")
const E=["mol","mmol","umol","nmol","pmol"],S={pmol:1e-12,nmol:1e-9,umol:1e-6,mmol:.001,mol:1};(0,s.hu)(r()(new Set(Object.keys(S)),new Set(E)),"Mol unit constants are not in sync!")
const T=[d,p,E,["cells","(x10^3) cells","(x10^4) cells","(x10^5) cells","(x10^6) cells","(x10^7) cells","(x10^8) cells","(x10^9) cells"],["items"],["units"],["beads"]],g=T.flatMap((e=>e))
function getValidContainerQuantityUnits(e=!1){const t=o.ZP.INVENTORY_ENABLE_SOLID_UNITS_FOR_CONTAINER?[...g]:[...d]
e&&t.push("")
return t}function getCompatibleContainerQuantityUnits(e){if(null==e)return getValidContainerQuantityUnits()
for(const t of T)if(t.includes(e))return t;(0,s.Gp)(!1,`${e} is not a valid unit for container quantities`)
return[]}function getSharedCompatibleContainerQuantityUnits(e){let t=new Set(getValidContainerQuantityUnits())
const intersectFilter=e=>t.has(e)
for(const n of e)t=new Set(getCompatibleContainerQuantityUnits(n).filter((e=>intersectFilter(e))))
return[...t]}function areUnitsCompatible(e){return getSharedCompatibleContainerQuantityUnits(e).length>0}const f=[...p,"cells","(x10^3) cells","(x10^4) cells","(x10^5) cells","(x10^6) cells","(x10^7) cells","(x10^8) cells","(x10^9) cells","U","vg","PFU","CFU","TCID50","TU","vp","IFU","Capsids","LP","beads","particles","molecules","OD","GC",...E],I=["M","mM","uM","nM","pM","CF","PFU","%","w/w%","v/v%","w/v%","OD","CFU/g","CFU/kg","CFU/bead","cells/cm^2","cells/vial","umol/g"],A={...{...u,...h,...S,cells:1,"(x10^3) cells":1e3,"(x10^4) cells":1e4,"(x10^5) cells":1e5,"(x10^6) cells":1e6,"(x10^7) cells":1e7,"(x10^8) cells":1e8,"(x10^9) cells":1e9,items:1,units:1,beads:1},pM:1e-12,nM:1e-9,uM:1e-6,mM:.001,M:1,CF:1,PFU:1,OD:1,"%":1,"CFU/g":1,"CFU/kg":1,"CFU/bead":1,"cells/cm^2":1,"cells/vial":1,"umol/g":1,"w/w%":1,"v/v%":1,"w/v%":1},y={"(x10^3) cells":["mL"],"(x10^4) cells":["mL"],"(x10^5) cells":["mL"],"(x10^6) cells":["mL"],"(x10^7) cells":["mL"],"(x10^8) cells":["mL"],"(x10^9) cells":["mL"],Capsids:["mL"],LP:["mL"],...m.reduce(((e,t)=>({...e,[t]:c})),{})},_="uM",C="uL",R="NULL_UNITS"
function isVolumeOrNullUnits(e){return null==e||d.includes(e)}const N=function _validConcentrationUnits(){const e=[]
f.forEach((t=>{(function _validDenominatorsForAmount(e){return y.hasOwnProperty(e)?y[e]:l})(t).forEach((n=>{e.push(`${t}/${n}`)}))}))
return I.concat(e)}()
function measurementString(e){return null!=e.value&&null!=e.units?`${e.value} ${e.units}`:null}const O=a.shape({value:a.number,units:a.string}),b={units:null,value:null}},459830:(e,t,n)=>{n.r(t)
n.d(t,{ALL_DNA_SEARCH_TYPE:()=>$t,ALL_RNA_SEARCH_TYPE:()=>Kt,ANALYSIS:()=>o,ANALYTICS_DASHBOARD:()=>l,ANALYTICS_QUERY:()=>c,ANNOTATION:()=>d,ASSAY_RESULT:()=>u,ASSAY_RUN:()=>m,ASSAY_SCHEMA:()=>p,AUTOMATION_INPUT_TRANSFORM_FILE:()=>h,AUTOMATION_OUTPUT_FILE:()=>E,AUTOMATION_OUTPUT_TRANSFORM_FILE:()=>S,BASIC_FOLDER_ITEM:()=>T,BATCH:()=>g,BATCH_SCHEMA:()=>f,BENCHLING_APP:()=>I,BIOENTITY_MIXIN:()=>A,BLOB:()=>y,BOX:()=>_,BOX_SCHEMA:()=>C,BULK_ASSEMBLY:()=>R,CONNECTION:()=>N,CONNECTION_SCHEMA:()=>O,CONTAINER:()=>b,CONTAINER_SCHEMA:()=>v,COPYABLE_FOLDER_ITEMS:()=>Zt,CUSTOM_TAGGABLE_FOLDER_ITEMS:()=>Gt,DATASET:()=>M,DATA_FRAME:()=>P,DATA_TABLE:()=>L,DATA_TABLE_CONFIG:()=>D,DNA_OLIGO_SEARCH_TYPE:()=>Wt,DOCUMENT:()=>w,DOCUMENT_VERSION:()=>F,ENTITY:()=>k,ENTRY:()=>U,ENTRY_PROTOCOL:()=>x,ENZYME_LIST:()=>B,EXPORTABLE_FOLDER_ITEMS:()=>Bt,EXTERNAL_FILE:()=>Z,EntryType:()=>a,FEATURE_LIBRARY:()=>q,FILE:()=>G,FIXED_PLATE:()=>V,FOLDER:()=>H,FOLDER_ITEMS:()=>Ut,FOLDER_TYPES:()=>nn,FORM_DEFINITION:()=>W,FolderItem:()=>kt,GRID:()=>Y,INGREDIENT:()=>$,INSTITUTION:()=>K,JELLYFISH:()=>z,LABEL_TEMPLATE:()=>Q,LADDER:()=>j,LOCATION:()=>J,LOCATION_SCHEMA:()=>X,LONG_SEQUENCE_NUCLEOTIDE_TYPE_TO_SEQUENCE_SUBTYPE:()=>Qt,LOOKUP_TABLE:()=>ee,MATRIX_PLATE:()=>te,MIXTURE:()=>ne,MIXTURE_INSTRUCTIONS:()=>ae,MOLECULE:()=>ie,MONOMER:()=>re,NOTEBOOK_ITEMS:()=>Jt,NOTE_FILL_IN_TEXT_BOX:()=>se,NOTE_LINKED_ASSAY_DATA:()=>oe,NOTE_LINKED_FILE:()=>le,NOTE_LINKED_GROUP:()=>ce,NOTE_LINKED_OBJECT:()=>de,OLIGO:()=>ue,OLIGO_NUCLEOTIDE_TYPE_TO_SEQUENCE_SUBTYPE:()=>jt,ORGANIZATION:()=>me,PARENT_STORABLE_ITEMS:()=>tn,PLATE:()=>pe,PLATE_SCHEMA:()=>he,POLYMERS:()=>rn,PRESENCE_ENABLED_FOLDER_ITEMS:()=>Vt,PREVIEWABLE_NOTE_LINKED_OBJECT_TYPES:()=>an,PRIMER_PAIR:()=>Ee,PRINTER:()=>Se,PROCEDURE:()=>Te,PROCEDURE_BATCH:()=>ge,PROCEDURE_FLOWCHART:()=>fe,PROCEDURE_FLOWCHART_VERSION:()=>Ie,PROCEDURE_METHOD_DEFINITION:()=>Ae,PROCEDURE_METHOD_DEFINITION_VERSION:()=>ye,PROCEDURE_METHOD_EXECUTION_INSTANCE:()=>_e,PROCEDURE_PARAMETER:()=>Ce,PROCEDURE_PARAMETER_CONFIRMATION_VALUE:()=>Re,PROCEDURE_PARAMETER_VERSION:()=>Ne,PROCEDURE_PLAN:()=>Oe,PROCEDURE_RUN:()=>be,PROCEDURE_STEP_DEFINITION_VERSION:()=>ve,PROCEDURE_STEP_EXECUTION_INSTANCE:()=>Pe,PROCESS:()=>Le,PROCESS_OUTPUT:()=>De,PROCESS_OUTPUT_SCHEMA:()=>Me,PROCESS_SCHEMA:()=>we,PROCESS_TASK:()=>Fe,PROCESS_TASK_SCHEMA:()=>ke,PROJECT:()=>Ue,PROTEIN:()=>xe,PROTEIN_ALIGNMENT:()=>Be,PROTOCOL:()=>Ze,QUANTITY:()=>qe,QUICK_EDIT_FOLDER_ITEMS:()=>qt,RECIPE_RUN_TASK:()=>Ge,RECIPE_STEP_TASK:()=>He,RECIPE_UNIT_OPERATION_TASK:()=>Ve,REGISTRATION_TABLE:()=>We,REGISTRATION_TABLE_CONFIG:()=>Ye,REGISTRY:()=>$e,REQUEST:()=>Ke,REQUEST_SCHEMA:()=>ze,REQUEST_TASK_SCHEMA:()=>Qe,RESULT_SCHEMA:()=>je,REVIEW:()=>Je,REVIEW_LIFECYCLE:()=>Xe,RNA_OLIGO_SEARCH_TYPE:()=>Yt,RNA_SEQUENCE:()=>et,RUN_SCHEMA:()=>tt,SAMPLE:()=>nt,SAVED_SEARCH:()=>at,SCHEMA_FIELD:()=>it,SCHEMA_FIELD_SELECTOR:()=>rt,SCHEMA_FIELD_SELECTOR_OPTION:()=>st,SCHEMA_INTERFACE:()=>ot,SCHEMA_TO_STORABLE:()=>on,SEQUENCE:()=>lt,SEQUENCE_ANALYSIS:()=>ct,SEQUENCE_PRIMER:()=>dt,SHARE_LINK_FOLDER_ITEMS:()=>xt,SOURCE:()=>ut,STAGE_CONFIGURATION:()=>mt,STAGE_ENTRY:()=>pt,STAR:()=>ht,STORABLE:()=>Et,STORABLE_ITEMS:()=>en,STORABLE_TO_SCHEMA:()=>sn,STRUCTURED_TABLE:()=>St,STUDY:()=>Tt,STUDY_SCHEMA:()=>gt,SUBTEMPLATE:()=>ft,SYSTEM_SCHEMA_INTERFACE:()=>It,SchemaType:()=>i,SequenceSubtype:()=>Ht,StorableItem:()=>Xt,TAG_SCHEMA:()=>At,TEAM:()=>yt,TEMPLATE:()=>_t,TEMPLATE_COLLECTION:()=>Ct,TENTACLE:()=>Rt,TFI_ACCOUNT:()=>Nt,TRANSFER_TABLE:()=>Ot,TRANSFER_TABLE_CONFIG:()=>bt,TRANSFER_TABLE_PLACEHOLDER:()=>vt,UNIT:()=>Pt,USER:()=>Lt,WORKFLOW:()=>Dt,WORKFLOW_TEMPLATE:()=>Mt,WORKLIST:()=>wt,WORKSHEET:()=>Ft})
var a,i,r=n(531041),s=n(955836)
!function(e){e.ENTRY="entry"
e.STAGE_CONFIGURATION="stage_configuration"
e.STAGE_ENTRY="stage_entry"
e.TEMPLATE="template"
e.SUBTEMPLATE="subtemplate"}(a||(a={}))
!function(e){e.BATCH_SCHEMA="batch_schema"
e.TAG_SCHEMA="tag_schema"}(i||(i={}))
const o="analysis",l="analytics_dashboard",c="analytics_query",d="annotation",u="assay_result",m="assay_run",p="assay_schema",h="automation_input_transform_file",E="automation_output_file",S="automation_output_transform_file",T="basic_folder_item",g="batch",f=i.BATCH_SCHEMA,I="benchling_app",A="BIOENTITY_MIXIN",y="result_blob",_="box",C="box_schema",R="bulk_assembly",N="connection",O="connection_schema",b="container",v="container_schema",P="data_frame",L="data_table",D="data_table_config",M="dataset",w="document",F="document_version",k="entity",U=a.ENTRY,x="entry_protocol",B="enzyme_list",Z="external_file",q="feature_library",G="pipeline_file",V="fixed_plate",H="folder",W="form_definition",Y="grid",$="ingredient",K="institution",z="jellyfish",Q="label_template",j="ladder",J="location",X="location_schema",ee="lookup_table",te="matrix_plate",ne="mixture",ae="mixture_instructions",ie="molecule",re="monomer",se="note_fill_in_text_box",oe="note_linked_assay_data",le="note_linked_file",ce="note_linked_group",de="note_linked_object",ue="oligo",me="organization",pe="plate",he="plate_schema",Ee="primer_pair",Se="printer",Te="procedure",ge="procedure_batch",fe="procedure_flowchart",Ie="procedure_flowchart_version",Ae="procedure_method_definition",ye="procedure_method_definition_version",_e="procedure_method_execution_instance",Ce="procedure_parameter",Re="procedure_parameter_confirmation_value",Ne="procedure_parameter_version",Oe="procedure_plan",be="procedure_run",ve="procedure_step_definition_version",Pe="procedure_step_execution_instance",Le="process",De="process_output",Me="process_output_schema",we="process_schema",Fe="process_task",ke="process_task_schema",Ue="project",xe="protein",Be="protein_alignment",Ze="protocol",qe="quantity",Ge="recipe_run_task",Ve="recipe_unit_operation_task",He="recipe_step_task",We="registration_table",Ye="registration_table_config",$e="registry",Ke="assay_request",ze="request_schema",Qe="request_task_schema",je="result_schema",Je="review",Xe="review_lifecycle",et="rna_sequence",tt="run_schema",nt="sample",at="saved_search",it="tag_schema_field",rt="schema_field_selector",st="schema_field_selector_option",ot="schema_interface",lt="sequence",ct="sequence_analysis",dt="sequence_primer",ut="source",mt=a.STAGE_CONFIGURATION,pt=a.STAGE_ENTRY,ht="star",Et="STORABLE",St="structured_table",Tt="study",gt="study_schema",ft=a.SUBTEMPLATE,It="SYSTEM_SCHEMA_INTERFACE",At=i.TAG_SCHEMA,yt="team",_t=a.TEMPLATE,Ct="template_collection",Rt="tentacle_table",Nt="tfi_account",Ot="transfer_table",bt="transfer_table_config",vt="transfer_table_placeholder",Pt="unit",Lt="user",Dt="workflow",Mt="workflow_template",wt="worklist",Ft="worksheet"
var kt
!function(e){e.BASIC_FOLDER_ITEM="basic_folder_item"
e.BULK_ASSEMBLY="bulk_assembly"
e.ENTRY="entry"
e.FILE="file"
e.MIXTURE="mixture"
e.MOLECULE="molecule"
e.PROTEIN="protein"
e.PROTOCOL="protocol"
e.SEQUENCE="sequence"
e.STUDY="study"}(kt||(kt={}))
const Ut=[T,R,M,U,G,ne,ie,Le,xe,Ze,lt,Tt],xt=r.default.without(Ut,M,Le,ne,R,Tt),Bt=r.default.without(Ut,M,Le,R,Tt),Zt=r.default.without(Ut,M,Le,R,Tt),qt=r.default.without(Ut,M,Ze,Le,ie,R,Tt),Gt=r.default.without(Ut,Le,R,Tt),Vt=[U]
var Ht
!function(e){e.SEQUENCE="sequence"
e.DNA_OLIGO="oligo"
e.RNA_OLIGO="rna_oligo"
e.RNA_SEQUENCE="rna_sequence"}(Ht||(Ht={}))
const Wt="dna_oligo",Yt="rna_oligo",$t="all_dna",Kt="all_rna"
var zt
!function(e){e.BASIC_FOLDER_ITEM="basic_folder_item"
e.PROTEIN="protein"
e.MIXTURE="mixture"
e.MOLECULE="molecule"}(zt||(zt={}))
const Qt={[s.Wy.DNA]:Ht.SEQUENCE,[s.Wy.RNA]:Ht.RNA_SEQUENCE},jt={[s.Wy.DNA]:Ht.DNA_OLIGO,[s.Wy.RNA]:Ht.RNA_OLIGO},Jt=[U,Ze]
var Xt
!function(e){e.BOX="box"
e.CONTAINER="container"
e.LOCATION="location"
e.PLATE="plate"
e.MATRIX_PLATE="matrix_plate"
e.FIXED_PLATE="fixed_plate"}(Xt||(Xt={}))
const en=[Xt.BOX,Xt.CONTAINER,Xt.LOCATION,Xt.PLATE],tn=[Xt.BOX,Xt.LOCATION,Xt.MATRIX_PLATE],nn={INVENTORY:"inventory_folder",NOTEBOOK:"notebook_folder"},an=[le],rn=[lt,xe,ue],sn=new Map([[_,C],[b,v],[J,X],[pe,he]]),on=new Map([[C,Xt.BOX],[v,Xt.CONTAINER],[X,Xt.LOCATION],[he,Xt.PLATE]])},294538:(e,t,n)=>{n.d(t,{$:()=>l,Af:()=>h,CA:()=>s,Dj:()=>c,FC:()=>convertStrandToDisplayName,HJ:()=>convertMolBioStrandToGQLStrand,Ie:()=>convertGQLStrandToMolBioStrand,Jw:()=>d,LB:()=>p,WX:()=>u,a7:()=>o,nM:()=>m,sm:()=>E})
var a=n(955836),i=n(459830),r=n(256605)
function convertMolBioStrandToGQLStrand(e){return{1:r.u0.FORWARD,0:r.u0.NONE,[-1]:r.u0.REVERSE}[e]}function convertGQLStrandToMolBioStrand(e){return{[r.u0.FORWARD]:1,[r.u0.NONE]:0,[r.u0.REVERSE]:-1}[e]}function convertStrandToDisplayName(e){return{1:"Forward",[-1]:"Reverse",0:"None"}[e]}const s={1:-1,"-1":1},o={...s,0:0},l={start:"end",end:"start"}
var c
!function(e){e.dna_sequence="dna_sequence"
e.rna_sequence="rna_sequence"
e.dna_oligo="dna_oligo"
e.rna_oligo="rna_oligo"
e.aa_sequence="aa_sequence"}(c||(c={}))
const d={[c.dna_sequence]:a.Wy.DNA,[c.rna_sequence]:a.Wy.RNA,[c.dna_oligo]:a.Wy.DNA,[c.rna_oligo]:a.Wy.RNA,[c.aa_sequence]:a.sW.AA},u={[i.SequenceSubtype.SEQUENCE]:c.dna_sequence,[i.SequenceSubtype.RNA_SEQUENCE]:c.rna_sequence,[i.SequenceSubtype.DNA_OLIGO]:c.dna_oligo,[i.SequenceSubtype.RNA_OLIGO]:c.rna_oligo},m={[a.Wy.DNA]:c.dna_oligo,[a.Wy.RNA]:c.rna_oligo},p={[a.Wy.DNA]:c.dna_sequence,[a.Wy.RNA]:c.rna_sequence},h={[c.dna_sequence]:i.SequenceSubtype.SEQUENCE,[c.rna_sequence]:i.SequenceSubtype.RNA_SEQUENCE,[c.dna_oligo]:i.SequenceSubtype.DNA_OLIGO,[c.rna_oligo]:i.SequenceSubtype.RNA_OLIGO,[c.aa_sequence]:i.PROTEIN},E={[c.dna_sequence]:"DNA sequence",[c.rna_sequence]:"RNA sequence",[c.dna_oligo]:"DNA oligo",[c.rna_oligo]:"RNA oligo",[c.aa_sequence]:"AA sequence"}},294120:(e,t,n)=>{n.d(t,{$0:()=>a,CL:()=>p,JL:()=>l,KE:()=>o,Ku:()=>s,SA:()=>r,Ws:()=>m,cJ:()=>u,sr:()=>c,zn:()=>d,zo:()=>isProjectsSidepanelSection})
var a,i=n(531041)
!function(e){e.ANALYTICS="ANALYTICS"
e.BENCHLING_APPS="BENCHLING_APPS"
e.CONNECTIONS="CONNECTIONS"
e.COMPLEX_POLYMERS="COMPLEX_POLYMERS"
e.DEVELOPER="DEVELOPER"
e.HOME="HOME"
e.ONBOARDING_CHECKLISTS="ONBOARDING_CHECKLISTS"
e.JELLYFISH="JELLYFISH"
e.MOD_PATTERNS="MOD_PATTERNS"
e.MOLBIO_BULK_ASSEMBLY="MOLBIO_BULK_ASSEMBLY"
e.PROCESSES="PROCESSES"
e.PROCEDURE_RUN="PROCEDURE_RUN"
e.PROJECTS="PROJECTS"
e.PROJECT_ITEMS="PROJECT_ITEMS"
e.REGISTRIES="REGISTRIES"
e.REQUESTS="REQUESTS"
e.SEARCH="SEARCH"
e.STORAGE="STORAGE"
e.STUDY_ITEMS="STUDY_ITEMS"
e.STUDIES="STUDIES"
e.TFI="TFI"
e.WORKFLOWS="WORKFLOWS"
e.WORKLISTS="WORKLISTS"
e.WORKLIST_ITEMS="WORKLIST_ITEMS"
e.WORKSHEET="WORKSHEET"}(a||(a={}))
const r=a,s=[r.ANALYTICS,r.BENCHLING_APPS,r.CONNECTIONS,r.HOME,r.JELLYFISH,r.PROCESSES,r.PROJECTS,r.PROJECT_ITEMS,r.REGISTRIES,r.REQUESTS,r.SEARCH,r.STORAGE,r.STUDIES,r.TFI,r.WORKFLOWS,r.WORKLISTS,r.WORKLIST_ITEMS]
var o
!function(e){e.CLOSED="CLOSED"
e.COLLAPSED="COLLAPSED"
e.SEMI_EXPANDED="SEMI_EXPANDED"
e.FULLY_EXPANDED="FULLY_EXPANDED"}(o||(o={}))
function isProjectsSidepanelSection(e){return e===a.PROJECTS||e===a.PROJECT_ITEMS}const l="finder_projects",c="finder_registries",d="finder_processes",u={[l]:a.PROJECT_ITEMS,[c]:a.REGISTRIES,finder_search:a.SEARCH,finder_worklist_items:a.WORKLIST_ITEMS,[d]:a.PROCESSES,finder_connections:a.CONNECTIONS,finder_jellyfishes:a.JELLYFISH,finder_studies:a.STUDIES,finder_study_items:a.STUDY_ITEMS},m=i.default.invert(u),p={SIDEPANEL_IS_DISPLAY_COMPACT:"sidepanelIsCompactDisplay",SIDEPANEL_IS_OPEN:"sidepanelIsOpen",SIDEPANEL_LAST_OPENED_SECTION:"sidepanelLastOpenedSection"}},650858:(e,t,n)=>{n.d(t,{Jb:()=>o,VF:()=>i,b3:()=>s,dw:()=>r,gq:()=>a})
const a={MELTING_TEMP_DNA:"MELTING_TEMP",MELTING_TEMP_RNA:"MELTING_TEMP_RNA",SECONDARY_TEMP:"secondary-temp",WIZARD:"primer-wizard"},i={MIN_MELTING_TEMP:"findprimers.MIN_MELTING_TEMP",MAX_MELTING_TEMP:"findprimers.MAX_MELTING_TEMP",MAX_MISMATCHES:"findprimers.MAX_MISMATCHES",MAX_TOTAL_MISMATCHES:"findprimers.MAX_TOTAL_MISMATCHES",MIN_MATCHING_BASES:"findprimers.MIN_MATCHING_BASES",EXACT_MATCH:"findprimers.EXACT_MATCH",UNIQUE_MATCH:"findprimers.UNIQUE_MATCH",RESULTS_SORT:"findprimers.RESULTS_SORT"},r={LOCATION:"location",TEMPERATURE:"temperature",NAME:"name",STRAND_PLUS:"strandPlus",STRAND_MINUS:"strandMinus",PERCENT_MATCH:"percentMatch"},s="strand",o=255},537076:(e,t,n)=>{n.r(t)
n.d(t,{AuthParentOption:()=>s.HH,BATCH_SUPPORTED_TYPES:()=>d,BIOENTITY_ALIAS_INFO_SHAPE:()=>D,DEFAULT_MY_COLLECTION:()=>M,DEFAULT_ORG_COLLECTION:()=>w,LABELING_STRATEGIES:()=>p,LABELING_STRATEGIES_REQUIRING_NAME:()=>h,LABELING_STRATEGY_TO_TEXT:()=>T,LabelingStrategy:()=>s.FF,MODAL_LABELING_STRATEGIES:()=>E,REGISTRY_FILTERS_SHAPE:()=>c,REGISTRY_OPTION_SHAPE:()=>l,REGISTRY_SHAPE:()=>P,REGISTRY_SUPPORTED_TYPES:()=>u,REGISTRY_VALIDATION_SHAPE:()=>L,RESIDUES_SUPPORTED_OLIGO_AWARE_TYPES:()=>O,RESULT_SUPPORTED_TYPES:()=>N,RegistryPreferences:()=>F,SAVING_STATES:()=>v,SCHEMALESS_BULK_IMPORT_SUPPORTED_OLIGO_AWARE_TYPES:()=>b,SCHEMA_SUMMARY_SHAPE:()=>y,SPREADSHEET_LABELING_STRATEGIES:()=>S,SUPPORTED_UNIQUE_RESIDUES_CONSTRAINTS:()=>C,SavingState:()=>_,SequenceSchemaType:()=>s.Ts,TAG_SCHEMA_CONTAINABLE_TYPE:()=>f,TAG_SCHEMA_SHAPE:()=>A,TAG_SCHEMA_SUPPORTED_FOLDER_ITEM_TYPES:()=>m,TagSchemaContainableType:()=>g,UNIQUE_CANONICAL_SMILES_CONSTRAINT:()=>R,getRegistrySupportedOligoAwareTypes:()=>getRegistrySupportedOligoAwareTypes,getRegistrySupportedTypes:()=>getRegistrySupportedTypes,getTagSchemaSupportedFolderItemTypes:()=>getTagSchemaSupportedFolderItemTypes,isLabelingStrategy:()=>isLabelingStrategy,isMixtureSchema:()=>isMixtureSchema,isRegistrySupportedType:()=>isRegistrySupportedType,isTagSchemaConstraint:()=>isTagSchemaConstraint,isTagSchemaSupportedFolderItemType:()=>isTagSchemaSupportedFolderItemType})
var a=n(602652),i=n(348920),r=n(459830),s=n(256605),o=n(497790)
const l=a.shape({id:a.string,name:a.string}),c=a.shape({options:a.arrayOf(l),value:l}),d=[r.BASIC_FOLDER_ITEM,r.SEQUENCE,r.PROTEIN],u=[r.BASIC_FOLDER_ITEM,r.MIXTURE,r.MOLECULE,r.PROTEIN,r.SEQUENCE]
function getRegistrySupportedTypes(){return i.ZP.CHEMISTRY_ENABLE_MOLECULE?u:u.filter((e=>e!==r.MOLECULE))}function isRegistrySupportedType(e){return getRegistrySupportedTypes().includes(e)}function isLabelingStrategy(e){return Object.values(s.FF).includes(e)}function getRegistrySupportedOligoAwareTypes(){const e=[r.BASIC_FOLDER_ITEM,r.PROTEIN,r.MIXTURE,r.MOLECULE,r.SequenceSubtype.SEQUENCE,r.SequenceSubtype.RNA_SEQUENCE,r.SequenceSubtype.DNA_OLIGO,r.SequenceSubtype.RNA_OLIGO]
return i.ZP.CHEMISTRY_ENABLE_MOLECULE?e:e.filter((e=>e!==r.MOLECULE))}const m=[...u,r.ENTRY]
function isTagSchemaSupportedFolderItemType(e){return getTagSchemaSupportedFolderItemTypes().includes(e)}function getTagSchemaSupportedFolderItemTypes(){const e=[...getRegistrySupportedTypes()]
i.ZP.ENABLE_ENTRY_SCHEMAS&&e.push(r.ENTRY)
i.ZP.CHEMISTRY_ENABLE_MOLECULE&&e.push(r.MOLECULE)
return e}const p={NEW_IDS:"NEW_IDS",IDS_FROM_NAMES:"IDS_FROM_NAMES",DELETE_NAMES:"DELETE_NAMES",SET_FROM_NAME_PARTS:"SET_FROM_NAME_PARTS",KEEP_NAMES:"KEEP_NAMES",CONVERT_IDS:"CONVERT_IDS",REPLACE_NAMES_FROM_PARTS:"REPLACE_NAMES_FROM_PARTS",REPLACE_ID_AND_NAME_FROM_PARTS:"REPLACE_ID_AND_NAME_FROM_PARTS"},h=[p.NEW_IDS,p.IDS_FROM_NAMES,p.KEEP_NAMES,p.SET_FROM_NAME_PARTS],E=[p.NEW_IDS,p.IDS_FROM_NAMES,p.DELETE_NAMES,p.SET_FROM_NAME_PARTS,p.REPLACE_NAMES_FROM_PARTS,p.KEEP_NAMES,p.REPLACE_ID_AND_NAME_FROM_PARTS],S=[p.NEW_IDS,p.CONVERT_IDS,p.IDS_FROM_NAMES,p.DELETE_NAMES,p.SET_FROM_NAME_PARTS,p.REPLACE_NAMES_FROM_PARTS,p.KEEP_NAMES,p.REPLACE_ID_AND_NAME_FROM_PARTS],T={[p.NEW_IDS]:"Generate new registry IDs",[p.IDS_FROM_NAMES]:"Generate registry IDs based on entity names",[p.DELETE_NAMES]:"Generate new registry IDs and replace name with registry ID",[p.SET_FROM_NAME_PARTS]:"Generate new registry IDs, rename according to name template, and keep old name as alias",[p.REPLACE_NAMES_FROM_PARTS]:"Generate new registry IDs, and replace name according to name template",[p.KEEP_NAMES]:"Keep existing entity names as registry IDs",[p.CONVERT_IDS]:"Use specified registry IDs",[p.REPLACE_ID_AND_NAME_FROM_PARTS]:"Generate registry IDs and names according to name template"}
var g
!function(e){e.NONE="NONE"
e.ENTITY="ENTITY"
e.BATCH="BATCH"}(g||(g={}))
const f={NONE:"NONE",ENTITY:"ENTITY",BATCH:"BATCH"}
function isMixtureSchema(e){return null!=e.mixtureSchemaConfig}const I=a.shape({id:a.string.isRequired,name:a.string.isRequired,folderItemType:a.string.isRequired,sqlIdentifier:a.string}),A=a.shape({authParentOption:a.string,batchSchemaId:a.string,childEntitySchemaSummaries:a.arrayOf(I).isRequired,fields:a.arrayOf(o.SCHEMA_FIELD_SHAPE),folderItemType:a.string.isRequired,iconId:a.string.isRequired,id:a.string.isRequired,isContainable:a.bool.isRequired,name:a.string.isRequired,prefix:a.string.isRequired,registryId:a.string.isRequired,showResidues:a.bool.isRequired,shouldCreateAsOligo:a.bool.isRequired,sqlIdentifier:a.string}),y=a.shape({id:a.string.isRequired,name:a.string.isRequired})
function isTagSchemaConstraint(e){return null!=e&&void 0!==e.id}var _
!function(e){e.COMPLETED="COMPLETED"
e.PENDING="PENDING"
e.SUCCESS="SUCCESS"
e.FAILURE="FAILURE"
e.CREATE_SUCCESS="CREATE_SUCCESS"}(_||(_={}))
const C=[{areUniqueResiduesCaseSensitive:!1,folderItemType:r.SEQUENCE,text:"Bases (ignore case)"},{areUniqueResiduesCaseSensitive:!0,folderItemType:r.PROTEIN,text:"Amino acids (exact match)"},{areUniqueResiduesCaseSensitive:!1,folderItemType:r.PROTEIN,text:"Amino acids (ignore case)"}],R={folderItemType:r.MOLECULE,text:"Canonical SMILES"},N=[r.BASIC_FOLDER_ITEM,r.SEQUENCE,r.PROTEIN],O=[r.PROTEIN,r.SequenceSubtype.SEQUENCE,r.SequenceSubtype.RNA_SEQUENCE,r.SequenceSubtype.DNA_OLIGO,r.SequenceSubtype.RNA_OLIGO],b=[r.SequenceSubtype.DNA_OLIGO,r.SequenceSubtype.RNA_OLIGO,r.SequenceSubtype.SEQUENCE,r.SequenceSubtype.RNA_SEQUENCE,r.PROTEIN,r.MOLECULE],v={COMPLETED:"COMPLETED",PENDING:"PENDING",SUCCESS:"SUCCESS",FAILURE:"FAILURE",CREATE_SUCCESS:"CREATE_SUCCESS"},P=a.shape({id:a.string.isRequired,name:a.string.isRequired}),L=a.shape({files:a.arrayOf(a.shape({id:a.string.isRequired,warnings:a.arrayOf(a.string).isRequired,selected:a.bool.isRequired})),sourceId:a.string.isRequired,tagSchemaId:a.string.isRequired,isLoading:a.bool.isRequired}),D=a.shape({alias:a.string.isRequired,registryCollectionOwner:a.shape({handle:a.string.isRequired,name:a.string.isRequired})}),M="DEFAULT_MY_COLLECTION",w="DEFAULT_ORG_COLLECTION",F={ENABLE_REGISTRY_ACTIVATION:"ENABLE_REGISTRY_ACTIVATION",DENORMALIZE_ACADEMIC_HAS_REGISTRY:"DENORMALIZE_ACADEMIC_HAS_REGISTRY",REGISTRY_ACTIVATION_COMPLETE:"REGISTRY_ACTIVATION_COMPLETE",DEFAULT_COLLECTION:"default_collection",ENABLE_ENTRY_SCHEMA_REMOVE_FIELDS:"ENABLE_ENTRY_SCHEMA_REMOVE_FIELDS",DEFAULT_REGISTRY:"RegistrySelector.defaultRegistryId",LABELING_STRATEGY_NAMESPACE:"NAME_OPTION_PREFERENCE_PREFIX-",ENABLE_DROPDOWN_DELETE:"ENABLE_DROPDOWN_DELETE"}},133832:(e,t,n)=>{n.d(t,{$i:()=>X,Hu:()=>H,IA:()=>V,Iv:()=>$,JF:()=>U,J_:()=>I,KV:()=>Y,Lc:()=>h,MM:()=>isWellSample,RJ:()=>S,TP:()=>g,UT:()=>N,Uq:()=>J,WV:()=>G,X2:()=>isGridCell,ZK:()=>b,_L:()=>q,_f:()=>W,bB:()=>f,bT:()=>getNonBatchContainerContents,df:()=>D,f8:()=>E,g2:()=>O,h0:()=>T,jj:()=>R,k8:()=>K,lD:()=>_,n6:()=>z,s2:()=>y,sh:()=>getMaxSignificantFigures,t4:()=>tagSchemaHasNoContainableType,tQ:()=>Q,tz:()=>j,vl:()=>w})
var a=n(602652),i=n(764677),r=n(56063),s=n(348920),o=n(647517),l=n(459830),c=n(136765),d=n(468991),u=n(227887),m=n(730981),p=n(497790)
function getMaxSignificantFigures(){return s.ZP.INVENTORY_ENABLE_HIGHER_PRECISION?15:6}var h
!function(e){e.VIEW_ALL="VIEW_ALL"
e.VIEW="VIEW"}(h||(h={}))
const E={CHOOSE_TRANSFER_INPUT:"CHOOSE_TRANSFER_INPUT",CHOOSE_TRANSFER_OUTPUT:"CHOOSE_TRANSFER_OUTPUT",CONFIRM_CONCENTRATIONS:"CONFIRM_CONCENTRATIONS",CONFIRM_SAMPLE_CONTROLS:"CONFIRM_SAMPLE_CONTROLS",CONFIRM_TRANSFER_QUANTITIES:"CONFIRM_TRANSFER_QUANTITIES",CREATE_BOX:"CREATE_BOX",CREATE_CONTAINERS:"CREATE_CONTAINERS",CREATE_LOCATION:"CREATE_LOCATION",CREATE_PLATE:"CREATE_PLATE",EXISTING_PLATE:"EXISTING_PLATE",SELECT_PARENT_STORABLE:"SELECT_PARENT_STORABLE",TRANSFER_PLATES_QUANTITY:"TRANSFER_PLATES_QUANTITY"}
var S,T
!function(e){e.CHOOSE_TRANSFER_INPUT="CHOOSE_TRANSFER_INPUT"
e.CHOOSE_TRANSFER_OUTPUT="CHOOSE_TRANSFER_OUTPUT"
e.CONFIRM_CONCENTRATIONS="CONFIRM_CONCENTRATIONS"
e.CONFIRM_SAMPLE_CONTROLS="CONFIRM_SAMPLE_CONTROLS"
e.CONFIRM_TRANSFER_QUANTITIES="CONFIRM_TRANSFER_QUANTITIES"
e.CREATE_BOX="CREATE_BOX"
e.CREATE_CONTAINERS="CREATE_CONTAINERS"
e.CREATE_LOCATION="CREATE_LOCATION"
e.CREATE_PLATE="CREATE_PLATE"
e.EXISTING_PLATE="EXISTING_PLATE"
e.SELECT_PARENT_STORABLE="SELECT_PARENT_STORABLE"
e.TRANSFER_PLATES_QUANTITY="TRANSFER_PLATES_QUANTITY"}(S||(S={}))
!function(e){e.TRANSFER_IN="TRANSFER_IN"
e.TRANSFER_OUT="TRANSFER_OUT"
e.TRANSFER_GLOBAL="TRANSFER_GLOBAL"}(T||(T={}))
E.CREATE_BOX,E.CREATE_CONTAINERS,E.CREATE_LOCATION,E.CREATE_PLATE,E.SELECT_PARENT_STORABLE
const g={ONE_CONTAINER_PER_ROW:"ONE_CONTAINER_PER_ROW",PLATE_MAP:"PLATE_MAP"},f="plate_map_raw_text.csv",I=(E.CHOOSE_TRANSFER_INPUT,E.CHOOSE_TRANSFER_OUTPUT,E.CONFIRM_TRANSFER_QUANTITIES,E.CONFIRM_CONCENTRATIONS,E.CONFIRM_SAMPLE_CONTROLS,{[E.CONFIRM_CONCENTRATIONS]:"Confirm concentrations",[E.CREATE_BOX]:"Create box",[E.CREATE_CONTAINERS]:"Create containers",[E.CREATE_LOCATION]:"Create location",[E.CREATE_PLATE]:"Create plate",[E.EXISTING_PLATE]:"Find existing plate"}),A=a.shape({id:a.string.isRequired,name:a.string.isRequired,result:a.object,tags:a.arrayOf(u.kY),tagSchema:a.shape({iconId:a.string.isRequired,showResidues:a.bool.isRequired}),residues:a.string}),y=a.shape({archiveRecord:i.k0,batchSchemaId:a.string.isRequired,createdAt:a.string,creator:d.OP.isRequired,file:A,id:a.string.isRequired,name:a.string.isRequired,tags:a.arrayOf(u.kY).isRequired,url:a.string.isRequired}),_=a.shape({id:a.string.isRequired,name:a.string.isRequired}),C=a.shape({containedItemId:a.string.isRequired,containedItemTagSchemaId:a.string.isRequired,containerId:a.string.isRequired,concentration:o.U5.isRequired})
function tagSchemaHasNoContainableType(e){return!e.isContainable&&null==e.batchSchemaId}const R=a.oneOfType([u.i2,_]),N=a.shape({id:a.number.isRequired,fieldType:a.string.isRequired,name:a.string,requiredLink:a.shape({batchSchema:a.shape({id:a.string.isRequired,fileTypeName:a.string.isRequired}),batchSchemaGraph:a.object}).isRequired})
a.shape({fileId:a.string.isRequired,iconId:a.string.isRequired,id:a.string.isRequired,name:a.string.isRequired})
var O
!function(e){e.BIOENTITY_NAME="BIOENTITY_NAME"
e.BIOENTITY_REGISTRY_ID="BIOENTITY_REGISTRY_ID"
e.BIOENTITY_REGISTRY_ID_WITH_DATE="BIOENTITY_REGISTRY_ID_WITH_DATE"}(O||(O={}))
const b=a.shape({id:a.string.isRequired,fields:a.arrayOf(p.SCHEMA_FIELD_SHAPE.isRequired).isRequired,allFields:a.arrayOf(p.SCHEMA_FIELD_SHAPE.isRequired),fileTypeName:a.string,namingScheme:a.oneOf(Object.keys({BIOENTITY_REGISTRY_ID:"BIOENTITY_REGISTRY_ID",BIOENTITY_REGISTRY_ID_WITH_DATE:"BIOENTITY_REGISTRY_ID_WITH_DATE",BIOENTITY_NAME:"BIOENTITY_NAME"})).isRequired,sqlIdentifier:a.string,tagSchemaId:a.string.isRequired,archiveRecord:i.k0,hidden:a.bool}),v=a.shape({entityToBatchLink:a.bool}),P=a.shape({pathsByTargetBatch:a.objectOf(a.arrayOf(p.TAG_SCHEMA_PATH.isRequired)).isRequired,targetBatchSchemasById:a.objectOf(a.object).isRequired,sourceTagSchemaId:a.string.isRequired}),L=(a.oneOfType([v,P]),a.shape({options:a.arrayOf(b).isRequired,value:b}),{archiveRecord:i.k0,barcode:a.string,createdAt:a.string,modifiedAt:a.string,id:a.string.isRequired,name:a.string.isRequired,parentStorableId:a.string,restrictionStatus:a.oneOf(Object.values(c.nY)),sampleRoles:c.Cn,starred:a.bool.isRequired,storableSchema:m.zx.isRequired,tags:a.arrayOf(u.kY).isRequired}),D=a.shape(L),M={...L,permissions:r.OD.isRequired,sourceId:a.string.isRequired},w=(a.shape({...L,permissions:r.OD.isRequired}),a.shape(M),a.shape({...M,url:a.string.isRequired}),a.shape({...L,url:a.string.isRequired}),a.shape({...M,modifiedAt:a.string.isRequired,storableSchema:m.wv.isRequired})),F=(a.shape({innerClassName:a.string,tooltipTitle:a.string}),a.shape(L)),k={columnIndex:a.number.isRequired,rowIndex:a.number.isRequired},U=a.shape(k),x={...L,url:a.string.isRequired,volume:o.U5,quantity:o.U5,isFixedPlateWell:a.bool.isRequired},B=a.shape(x),Z={...M,batch:a.shape({id:a.string.isRequired,name:a.string.isRequired}),contents:a.arrayOf(C),containerSchemaId:a.string.isRequired,creator:d.OP,gridCell:U,storableSchema:m.lV},q=a.shape(Z)
function isGridCell(e){return null!=(null==e?void 0:e.container)}const G=a.shape({...k,container:q.isRequired})
a.shape({id:a.string.isRequired,name:a.string.isRequired,barcode:a.string,gridCell:U}),a.shape({numNonWellContainers:a.number.isRequired,numPlates:a.number.isRequired}),a.shape({nonWellContainers:a.arrayOf(B).isRequired,plates:a.arrayOf(F).isRequired})
var V
!function(e){e.EXISTING="EXISTING"
e.CREATE="CREATE"
e.CHOOSE="CHOOSE"}(V||(V={}))
const H=a.shape({storable:D,gridCells:a.arrayOf(a.shape(k))}),W=(a.arrayOf(a.shape({outputContainer:q.isRequired,transferQuantityValue:a.number,finalOutputQuantityValue:a.number})),a.shape({id:a.string.isRequired,inputSampleId:a.string,outputContainer:B.isRequired}),a.shape({id:a.string.isRequired,name:a.string.isRequired,registryId:a.string.isRequired,zplTemplate:a.string.isRequired})),Y=(a.shape({id:a.string.isRequired,name:a.string.isRequired,address:a.string.isRequired,port:a.number,description:a.string,registryId:a.string.isRequired}),a.shape({barcodeError:a.string,concentrationError:a.string,containerSchemaError:a.string,formError:a.string,numToCreateError:a.string,parentStorableError:a.string,parentStorableGridError:a.string,projectError:a.string,quantityError:a.string,schemaError:a.string}),a.shape({ancestralStorablesById:a.objectOf(a.arrayOf(D)),ancestralStorableIdsByStorableId:a.objectOf(a.arrayOf(a.string)),childContainerParentFileSchemasByGridId:a.object,childContainerStatusesByGridId:a.object,childStorableSchemasByLocationId:a.object,gridCellsByContainerId:a.objectOf(U),containedItemsByContainerId:a.objectOf(a.arrayOf(R))})),$=[l.BOX_SCHEMA,l.PLATE_SCHEMA]
var K
!function(e){e.BOX_SCHEMA="box_schema"
e.PLATE_SCHEMA="plate_schema"}(K||(K={}))
const z={[l.BOX_SCHEMA]:"Box",[l.PLATE_SCHEMA]:"Plate"}
var Q
!function(e){e.BOX="box"
e.PLATE="plate"}(Q||(Q={}))
const j=[Q.BOX,Q.PLATE],J={[l.BOX_SCHEMA]:l.BOX,[l.CONTAINER_SCHEMA]:l.CONTAINER,[l.LOCATION_SCHEMA]:l.LOCATION,[l.PLATE_SCHEMA]:l.PLATE},X={[l.CONTAINER]:[l.StorableItem.BOX,l.StorableItem.PLATE,l.StorableItem.LOCATION],[l.BOX]:[l.StorableItem.LOCATION],[l.PLATE]:[l.StorableItem.LOCATION],[l.LOCATION]:[l.StorableItem.LOCATION]}
function isWellSample(e){return null!=e.position}function getNonBatchContainerContents(e){return e.filter((e=>"BatchNode"!==e.containedItem.__typename))}},861825:(e,t,n)=>{n.d(t,{ZP:()=>s,jh:()=>r,mh:()=>i})
var a
!function(e){e.BIOENTITY="BIOENTITY"
e.BATCH="BATCH"}(a||(a={}))
const i="CONTAINER",r={[a.BIOENTITY]:"entity",[a.BATCH]:"batch",[i]:"container"},s=a},467607:(e,t,n)=>{n.d(t,{BF:()=>u,GN:()=>r,JH:()=>g,QT:()=>h,YG:()=>m,Yo:()=>o,ZC:()=>i,ch:()=>T,fB:()=>S,nZ:()=>s,o$:()=>d,oT:()=>c,uS:()=>E,ui:()=>l,zm:()=>p})
var a=n(256605)
const i=1e7,r=2e3,s=1e4,o=255,l=255,c=100,d=1e4,u=2048,m=100,p={PRIMER_BASES:"copy.PRIMER_BASES",ANNOTATIONS:"copy.ANNOTATIONS",ANNOTATIONS_NOT_CONTAINED:"copy.ANNOTATIONS_NOT_CONTAINED",TAGS:"copy.TAGS",DESCRIPTION:"copy.DESCRIPTION"},h={SHOULD_COLLAPSE_PARTS_WARNING:"SHOULD_COLLAPSE_PARTS_WARNING"}
var E
!function(e){e.DOUBLE_STRANDED="ds"
e.SINGLE_STRANDED="ss"
e.OLIGO="oligo"}(E||(E={}))
const S={[a.uS.ds]:E.DOUBLE_STRANDED,[a.uS.ss]:E.SINGLE_STRANDED,[a.uS.oligo]:E.OLIGO},T={[E.DOUBLE_STRANDED]:a.uS.ds,[E.SINGLE_STRANDED]:a.uS.ss,[E.OLIGO]:a.uS.oligo}
var g
!function(e){e.CIRCULAR="circular"
e.LINEAR="linear"}(g||(g={}))},468991:(e,t,n)=>{n.d(t,{NU:()=>isUser,OP:()=>o,OS:()=>isOrganization,ZP:()=>u,fF:()=>d,fb:()=>s,hc:()=>r,yZ:()=>l})
var a=n(602652),i=n(459830)
var r
!function(e){e.ACADEMIC="ACADEMIC"
e.NONPROFIT="NONPROFIT"
e.COMMERCIAL="COMMERCIAL"}(r||(r={}))
const s={id:a.string.isRequired,handle:a.string.isRequired,avatar_url:a.string.isRequired},o=a.shape(s),l="bulk_user_import.csv",c={PROCLAIMED_ACADEMIC:"ACADEMIC",PROCLAIMED_NONPROFIT:"NONPROFIT",PROCLAIMED_COMMERCIAL:"COMMERCIAL",STATUS_GOLD:"gold",GOLD_MIN_REFERRALS:10,GOLD_SPACE:16106127360,USER_SHAPE:s,LANGUAGE_PREFERENCE_KEY:"languageTag",SPREADSHEET_IMPORT_LANGUAGE_TAG:"SPREADSHEET_IMPORT_LANGUAGE_TAG"},d=a.shape({id:a.string.isRequired,handle:a.string.isRequired,initials:a.string,name:a.string,type:a.string}),u=c
function isUser(e){return e.type===i.USER}function isOrganization(e){return e.type===i.ORGANIZATION}},211495:(e,t,n)=>{n.d(t,{Sy:()=>i.S,LE:()=>r.L,XA:()=>v.XA,Pp:()=>s.P,Cj:()=>o.C,YV:()=>l.Y,Jz:()=>d,yt:()=>a,Tm:()=>u.T,H4:()=>m.H,$Z:()=>p.$,ln:()=>h.l,nn:()=>E.n,zR:()=>S.z,JG:()=>T.J,G$:()=>g.G,gc:()=>I.g,Jg:()=>f.J,P6:()=>A.P,ci:()=>y.c,Dv:()=>_.D,ir:()=>C.i,k3:()=>R.k,xw:()=>N.x,x4:()=>b.x,Hb:()=>v.Hb,yw:()=>O.y,Zm:()=>P.Zm,pd:()=>L.p})
var a,i=n(295213),r=n(421797),s=n(641562),o=n(67019),l=n(856425),c=n(786628)
!function(e){e.INITIATED_EXPORT_ORGANIZATION_CONFIG="initiated_export_organization_config"
e.COMPLETED_EXPORT_ORGANIZATION_CONFIG="completed_export_organization_config"
e.INITIATED_IMPORT_ORGANIZATION_CONFIG_FILE="initiated_import_organization_config_file"
e.COMPLETED_IMPORT_ORGANIZATION_CONFIG_FILE="completed_import_organization_config_file"
e.INITIATED_EXPORT_CONFIG_MIGRATION_COMPARISON_FILE="initiated_export_config_migration_comparison_file"
e.COMPLETED_EXPORT_CONFIG_MIGRATION_COMPARISON_FILE="completed_export_config_migration_comparison_file"
e.INITIATED_VALIDATE_CONFIG="initiated_validate_config"
e.COMPLETED_VALIDATE_CONFIG="completed_validate_config"
e.INITIATED_CONFIG_MIGRATION_IMPORT_PANE_ACTION="initiated_config_migration_import_pane_action"
e.OPENED_UNCHANGED_ITEMS="opened_unchanged_items"
e.INITIATED_IMPORT_CONFIGURATION="initiated_import_configuration"
e.COMPLETED_IMPORT_CONFIGURATION="completed_import_configuration"
e.EXPORTED_MIGRATION_SUMMARY="exported_migration_summary"}(a||(a={}))
function createConfigMigrationAnalyticsEvent(e,t=c.J.READ){return{module:c.X.CONFIG_MIGRATION,action:e,actionCategory:t}}const d={[a.INITIATED_EXPORT_ORGANIZATION_CONFIG]:createConfigMigrationAnalyticsEvent(a.INITIATED_EXPORT_ORGANIZATION_CONFIG),[a.COMPLETED_EXPORT_ORGANIZATION_CONFIG]:createConfigMigrationAnalyticsEvent(a.COMPLETED_EXPORT_ORGANIZATION_CONFIG),[a.INITIATED_IMPORT_ORGANIZATION_CONFIG_FILE]:createConfigMigrationAnalyticsEvent(a.INITIATED_IMPORT_ORGANIZATION_CONFIG_FILE),[a.COMPLETED_IMPORT_ORGANIZATION_CONFIG_FILE]:createConfigMigrationAnalyticsEvent(a.COMPLETED_IMPORT_ORGANIZATION_CONFIG_FILE),[a.INITIATED_EXPORT_CONFIG_MIGRATION_COMPARISON_FILE]:createConfigMigrationAnalyticsEvent(a.INITIATED_EXPORT_CONFIG_MIGRATION_COMPARISON_FILE),[a.COMPLETED_EXPORT_CONFIG_MIGRATION_COMPARISON_FILE]:createConfigMigrationAnalyticsEvent(a.COMPLETED_EXPORT_CONFIG_MIGRATION_COMPARISON_FILE),[a.INITIATED_VALIDATE_CONFIG]:createConfigMigrationAnalyticsEvent(a.INITIATED_VALIDATE_CONFIG),[a.COMPLETED_VALIDATE_CONFIG]:createConfigMigrationAnalyticsEvent(a.COMPLETED_VALIDATE_CONFIG),[a.INITIATED_CONFIG_MIGRATION_IMPORT_PANE_ACTION]:createConfigMigrationAnalyticsEvent(a.INITIATED_CONFIG_MIGRATION_IMPORT_PANE_ACTION),[a.OPENED_UNCHANGED_ITEMS]:createConfigMigrationAnalyticsEvent(a.OPENED_UNCHANGED_ITEMS),[a.INITIATED_IMPORT_CONFIGURATION]:createConfigMigrationAnalyticsEvent(a.INITIATED_IMPORT_CONFIGURATION,c.J.WRITE),[a.COMPLETED_IMPORT_CONFIGURATION]:createConfigMigrationAnalyticsEvent(a.COMPLETED_IMPORT_CONFIGURATION,c.J.WRITE),[a.EXPORTED_MIGRATION_SUMMARY]:createConfigMigrationAnalyticsEvent(a.EXPORTED_MIGRATION_SUMMARY)}
var u=n(514777),m=n(384189),p=n(87789),h=n(636976),E=n(215476),S=n(538667),T=n(571269),g=n(202365),f=n(605881),I=n(625008),A=n(939190),y=n(729570),_=n(665633),C=n(36996),R=n(956995),N=n(864883),O=n(304241),b=n(647146),v=n(626103),P=n(930630),L=n(882211)},424901:(e,t,n)=>{n.d(t,{Z:()=>SelectOwnerField})
var a=n(764403),i=n.n(a),r=n(989526),s=n(755383),o=n(102176),l=n(929123),c=n(640562),d=n(954240),u=n(666571),m=n(865486),p=n(924982)
function SelectOwnerField(e){return r.createElement(o.Z,{hasError:null!=e.error},r.createElement(l.Z,{className:i()({"fieldLabel-sublabel":e.useFieldSubLabelStyle})},"Owner",r.createElement(u.Z,{onClick:function _handleClickOwnerHelp(t){s._8(t,"Ownership",e.helpMessage)},className:"u-tiny-spacing-left"})),r.createElement(d.ZP,{disabled:e.isReadOnly,displayName:e.potentialOwners.find((({id:t})=>t===e.ownerId)).name,menu:r.createElement(m.ZP,{height:m.ZP.HEIGHTS.MEDIUM,width:m.ZP.WIDTHS.FULL,value:e.ownerId},e.potentialOwners.map((({name:t,id:n})=>r.createElement(p.Z,{key:n,value:n,onSelect:t=>{e.selectOwner(t)}},t))))}),r.createElement(c.Z,{message:e.error}))}SelectOwnerField.defaultProps={useFieldSubLabelStyle:!1}},206305:(e,t,n)=>{n.d(t,{Ax:()=>bulkGetEntitySummariesByHandle,F:()=>setInstition,yC:()=>search})
var a=n(771398)
function search(e){return a.xA("/1/api/entities/search",e)}function setInstition(e,t){return a.Yh({url:`/1/api/users/${e}/institution`,data:{urlIdentifier:t}})}function bulkGetEntitySummariesByHandle(e,t=!1){return a.s0({url:"/1/api/entities:bulk-get-summaries-by-handle",data:{handles:e,silentlyFilterOutNotFound:t}})}},540285:(e,t,n)=>{n.d(t,{IF:()=>bulkEditTranslationRegionGroups,N6:()=>bulkDetachPrimers,NG:()=>createTranslationRegionGroup,PV:()=>bulkApplyFindAndReplace,U2:()=>get,Ue:()=>create,X1:()=>batchAutoAnnotate,ZM:()=>bulkUpdateSequences,bo:()=>getVersion,eu:()=>bulkReimportSequences,mz:()=>bulkAttachPrimers,rd:()=>editTranslationRegionGroup,u8:()=>a,vS:()=>bulkRemoveAnnotations,y4:()=>bulkRemoveTranslations,yL:()=>bulkPreviewFindAndReplace})
var a,i=n(518352),r=n(771398),s=n(8747)
function create({name:e,folder:t,circular:n,noteParts:a,nucleotideType:s,type:o,tagSchemaId:l,bases:c="",studyIds:d=[]}){null==n&&(n=!1)
return r.ty({url:"/1/api/sequences",data:{name:e,folder:t,circular:n,bases:c,noteParts:a,nucleotideType:s,type:o,tagSchemaId:l,studyIds:d}}).done((()=>{i.Z.invalidateFolderContents(t)}))}function get(e){return r.xA(`/1/api/sequences/${e}`)}function getVersion(e,t){return r.xA(`/1/api/sequences/${e}/versions/${t}`)}!function(e){e.CREATE="create"
e.UPDATE="update"
e.DELETE="delete"}(a||(a={}))
function reformatTranslationGroupProperties(e){const{regions:t,properties:n}=e
return{...e,regions:t,properties:null==n?n:{name:n.name,notes:n.notes,custom_fields:n.customFields,codon_translation_table:n.codonTranslationTable,color:n.color}}}function createTranslationRegionGroup(e,t){return r.s0({url:`/1/api/sequences/${e}/translation-groups`,data:reformatTranslationGroupProperties(t)})}function editTranslationRegionGroup(e,t,n){return r.Ry({url:`/1/api/sequences/${e}/translation-groups/${t}`,data:reformatTranslationGroupProperties(n)})}function bulkEditTranslationRegionGroups(e,t){return r.sA({url:`/1/api/sequences/${e}/translation-groups`,data:{modifications:t.map((e=>reformatTranslationGroupProperties(e)))}})}function batchAutoAnnotate(e,t){return r.ty({url:"/1/api/sequences/actions/batch-auto-annotations",data:{sequenceIds:e,featureLibraryIds:t}})}function bulkRemoveAnnotations(e){return r.s0({url:"/1/api/sequences/actions/bulk-remove-annotations",data:{sequenceIds:e}})}function bulkRemoveTranslations(e){return r.s0({url:"/1/api/sequences/actions/bulk-remove-translations",data:{sequenceIds:e}})}function bulkAttachPrimers(e,t){return s.ty({url:"/1/api/sequences/bulk-attach-primers",data:{sequenceIds:e,...t}})}function bulkDetachPrimers(e){return r.s0({url:"/1/api/sequences/bulk-detach-primers",data:{sequenceIds:e}})}function bulkReimportSequences(e,t,n){return s.s0({url:"/1/api/sequences:bulk-reimport",data:{files:e,folderId:t,nucleotideType:n}})}function bulkUpdateSequences(e,t){return r.Ry({url:"/1/api/sequences",data:{sequence_ids:e,circular:t.circular}})}function bulkPreviewFindAndReplace(e,t){return s.s0({url:"/1/api/bulk-preview-find-and-replace",data:{sequenceVersionIds:e,rules:t}})}function bulkApplyFindAndReplace(e,t){return s.s0({url:"/1/api/bulk-apply-find-and-replace",data:{sequenceVersionIds:e,rules:t}})}},465428:(e,t,n)=>{n.d(t,{$d:()=>getReferrals,A$:()=>createInboundRequest,Bj:()=>getReferralModals,Nq:()=>updateUser,P5:()=>rejectOutboundRequest,RA:()=>getPublicReferralId,SU:()=>getCalendarRequests,SX:()=>getCalendarFiles,TP:()=>getOrgRequests,Ym:()=>updateMetadata,Zj:()=>getCalendarProcessTasks,c1:()=>getCalendarEntries,f1:()=>suspendUsers,j8:()=>acceptOutboundRequest,pG:()=>userURL,pe:()=>createPublicReferralId,qW:()=>updateCalendarEntryTask,sd:()=>getMetadata,tf:()=>getCurrentOrgs,zz:()=>acceptInstitutionTerms})
var a=n(771398),i=n(8747)
const r=(new Date).getTimezoneOffset()/-60
function getCurrentOrgs(){return a.xA("/1/api/users/me/organizations/")}function getOrgRequests(){return a.xA("/1/api/users/me/organization-requests/")}function createInboundRequest(e){return a.ty({url:"/1/api/users/me/organization-requests/",data:{organizationId:e}})}function acceptOutboundRequest(e){return a.ty({url:`/1/api/users/me/organization-requests/${e}/actions/accept`})}function rejectOutboundRequest(e){return a.ty({url:`/1/api/users/me/organization-requests/${e}/actions/reject`})}function getCalendarRequests(e,t,{organizationId:n,teamId:a}={}){return i.by({url:"/1/api/users/me/calendar/requests",dataType:"json",data:{start:e.format("YYYY-MM-DD"),end:t.format("YYYY-MM-DD"),tzOffset:r,organizationId:n,teamId:a}})}function getCalendarProcessTasks(e,t,{organizationId:n,teamId:a}={}){return i.by({url:"/1/api/users/me/calendar/process-tasks",dataType:"json",data:{start:e.format("YYYY-MM-DD"),end:t.format("YYYY-MM-DD"),tzOffset:r,organizationId:n,teamId:a}})}function getCalendarEntries(e,t,{organizationId:n,teamId:a}={}){return i.by({url:"/1/api/users/me/calendar/entries",dataType:"json",data:{start:e.format("YYYY-MM-DD"),end:t.format("YYYY-MM-DD"),tzOffset:r,organizationId:n,teamId:a}})}function getCalendarFiles(e,t,{organizationId:n,teamId:a}={}){return i.by({url:"/1/api/users/me/calendar/files",dataType:"json",data:{start:e.format("YYYY-MM-DD"),end:t.format("YYYY-MM-DD"),tzOffset:r,organizationId:n,teamId:a}})}function updateCalendarEntryTask(e){return a.ty({url:"/1/api/users/me/calendar/entries/actions/update-task",data:e})}function getReferrals(){return a.xA("/1/api/users/me/referrals")}function getPublicReferralId(e){return a.xA("/1/api/public-referrals",{email:e})}function createPublicReferralId(e){return a.ty({url:"/1/api/public-referrals",data:{email:e}})}function getMetadata(){return a.xA("/1/api/users/me/metadata")}function updateMetadata(e){return a.Yh({url:"/1/api/users/me/metadata",data:e})}function getReferralModals(){return a.xA("/1/api/users/me/referral-modals")}function acceptInstitutionTerms(e){return a.s0({url:`/1/api/users/${e}:accept-institution-terms`})}function suspendUsers(e){return a.s0({url:"/1/api/users:bulk-suspend",data:{isSuspendedByUserId:e}})}function updateUser(e,t){return a.Ry({url:`/1/api/users/${e}`,data:t})}function userURL(e){return`/users/${e}`}},399658:(e,t,n)=>{n.d(t,{Cb:()=>l,Dl:()=>d,QB:()=>r,R$:()=>s,Xg:()=>u,Y8:()=>o,en:()=>c})
var a=n(264867),i=n(573133)
const r={name:"isMasked",type:i.g.BOOLEAN},s={[i.g.BOOLEAN]:"boolean",[i.g.DATE_OR_TIMESTAMP]:"time series",[i.g.JSON]:"json",[i.g.NUMBER]:"numerical",[i.g.STRING]:"text"},o="benchcol_"
var l
!function(e){e.IS_EXCLUDED="benchcol_is_excluded"
e.ROW_ID="benchcol_row_id"}(l||(l={}))
const c={displayName:"Is Excluded",systemName:l.IS_EXCLUDED,type:{leafType:a.i0.BOOLEAN}},d={displayName:"Row ID",systemName:l.ROW_ID,type:{leafType:a.i0.TEXT}},u={[l.IS_EXCLUDED]:c,[l.ROW_ID]:d}},573133:(e,t,n)=>{n.d(t,{Z9:()=>i,fx:()=>isColumnTypeNumerical,g:()=>r})
n(232606)
var a,i,r,s=n(264867)
!function(e){e.MAYBE_TEXT="MaybeText"}(a||(a={}))
!function(e){e.HYDRATED="HYDRATED"
e.UNHYDRATED="UNHYDRATED"
e.INACCESSIBLE="INACCESSIBLE"}(i||(i={}))
!function(e){e.BOOLEAN="BOOLEAN"
e.DATE_OR_TIMESTAMP="DATE_OR_TIMESTAMP"
e.JSON="JSON"
e.NUMBER="NUMBER"
e.STRING="STRING"}(r||(r={}))
function isColumnTypeNumerical(e){return(0,s.xk)(e.leafType)&&!e.isList&&!e.maybeText&&!e.schemaId}},733435:(e,t,n)=>{n.d(t,{KN:()=>r,Oh:()=>s})
var a=n(769784),i=n(91092)
const r={fragment:a.ZP`
  fragment DataFrameGraphQL on DataFrameNode {
    id
    name
    dataFrameJson
    createdAt
    creator {
      id
      name
    }
    modifiedAt
  }
`,fragmentName:"DataFrameGraphQL"},s=a.ZP`
  query GetDataFrame($dataFrameId: StrictString!) @skipAudit @engComponent(name: DATA_FRAMES) {
    dataFrame(id: $dataFrameId) {
      ... on DataFrameNode {
        ...DataFrameGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${r.fragment}
  ${(0,i.f)("InaccessibleInfo").fragment}
`},289419:(e,t,n)=>{n.d(t,{Z:()=>resolveDataFrameValue,p:()=>a})
var a,i=n(675649),r=n(839488)
!function(e){e.NONE="NONE"
e.NAME="NAME"
e.WAREHOUSE_BLOB_DICT="WAREHOUSE_BLOB_DICT"}(a||(a={}))
const s=[{canResolve:(e,t,n)=>n.apiIdentifiedObjects===a.NAME&&null!=(0,r.M)(e,t),resolve:(e,t)=>(0,r.M)(e,t)},{canResolve:(e,t,n)=>n.blobs===a.NAME&&null!=(0,r.X)(e,t),resolve:(e,t)=>(0,r.X)(e,t).name},{canResolve:(e,t,n)=>n.blobs===a.WAREHOUSE_BLOB_DICT&&null!=(0,r.X)(e,t),resolve:(e,t)=>{const{id:n,name:a,url:s}=(0,r.X)(e,t)
return{id:n,name:a,url:(0,i.jp)(s)}}}]
function resolveDataFrameValue(e,t,n){if(e instanceof Array)return function resolveArray(e,t,n){if(0===e.length)return Object.values(n).includes(a.NAME)?"":e
const i=s.find((({canResolve:a})=>e.every((e=>a(e,t,n)))))
if(null==i)return e
const r=e.map((e=>i.resolve(e,t)))
return r.every((e=>"string"==typeof e))?r.join(", "):r}(e,t,n)
const i=s.find((({canResolve:a})=>a(e,t,n)))
return i?i.resolve(e,t):e}},264867:(e,t,n)=>{n.d(t,{HA:()=>c,Kb:()=>o,XK:()=>l,Y6:()=>isBenchlingTypeLeafType,bD:()=>isBenchlingTypeDefList,e0:()=>isBenchlingTypeDefNullable,fF:()=>isBenchlingTypeDefAny,g7:()=>isBenchlingTypeDefComplex,ho:()=>isLeafTypePrimitive,i0:()=>a,kM:()=>assertLeafTypeNumerical,nF:()=>isBenchlingTypeDefUnion,wk:()=>isSubType,xk:()=>isLeafTypeNumerical})
var a,i=n(232606),r=n(53904),s=n(379112)
!function(e){e.BOOLEAN="Boolean"
e.DATETIME="Datetime"
e.DATE="Date"
e.DECIMAL="Decimal"
e.INTEGER="Integer"
e.JSON="Json"
e.TEXT="Text"
e.BENCHLING_OBJECT="BenchlingObject"
e.BLOB="Blob"
e.DROPDOWN_OPTION="DropdownOption"
e.BATCH="Batch"
e.BIOENTITY="Bioentity"
e.BASIC_FOLDER_ITEM="BasicFolderItem"
e.MIXTURE="Mixture"
e.MOLECULE="Molecule"
e.PROTEIN="Protein"
e.SEQUENCE="Sequence"
e.ENTRY="Entry"
e.PROTOCOL="Protocol"
e.REQUEST="Request"
e.RESULT="Result"
e.RUN="Run"
e.STORABLE="Storable"
e.BOX="Box"
e.CONTAINER="Container"
e.LOCATION="Location"
e.PLATE="Plate"
e.PROCESS="Process"
e.PROCESS_TASK="ProcessTask"
e.PROCESS_OUTPUT="ProcessOutput"
e.TEAM="Team"
e.USER="User"}(a||(a={}))
const o={[a.BOOLEAN]:"Boolean",[a.DATETIME]:"Datetime",[a.DATE]:"Date",[a.DECIMAL]:"Decimal",[a.INTEGER]:"Integer",[a.JSON]:"Json",[a.TEXT]:"Text",[a.BENCHLING_OBJECT]:"Benchling object",[a.BLOB]:"Blob",[a.DROPDOWN_OPTION]:"Dropdown option",[a.BATCH]:"Batch",[a.BIOENTITY]:"Bioentity",[a.BASIC_FOLDER_ITEM]:"Custom entity",[a.MIXTURE]:"Mixture",[a.MOLECULE]:"Molecule",[a.PROTEIN]:"Protein",[a.SEQUENCE]:"Sequence",[a.ENTRY]:"Entry",[a.PROTOCOL]:"Protocol",[a.REQUEST]:"Request",[a.RESULT]:"Result",[a.RUN]:"Run",[a.STORABLE]:"Storable",[a.BOX]:"Box",[a.CONTAINER]:"Container",[a.LOCATION]:"Location",[a.PLATE]:"Plate",[a.PROCESS]:"Workflow",[a.PROCESS_TASK]:"Workflow task",[a.PROCESS_OUTPUT]:"Workflow output",[a.TEAM]:"Team",[a.USER]:"User"},l=[a.DECIMAL,a.INTEGER]
function isLeafTypeNumerical(e){return l.includes(e)}function assertLeafTypeNumerical(e){(0,i.hu)(isLeafTypeNumerical(e),"Expected column leaf type to be numerical",{leafType:e})}function isBenchlingTypeDefAny(e){return e instanceof r.H}function isBenchlingTypeDefComplex(e){return e instanceof s.hB}function isBenchlingTypeDefList(e){return e instanceof s.aV}function isBenchlingTypeDefNullable(e){return e instanceof s.vG}function isBenchlingTypeDefUnion(e){return e instanceof s.EJ}function isBenchlingTypeLeafType(e){return!isBenchlingTypeDefComplex(e)&&!isBenchlingTypeDefAny(e)}const c={[a.BIOENTITY]:[a.BASIC_FOLDER_ITEM,a.PROTEIN,a.MOLECULE,a.MIXTURE,a.SEQUENCE],[a.DATETIME]:[a.DATE],[a.DECIMAL]:[a.INTEGER],[a.STORABLE]:[a.BOX,a.CONTAINER,a.LOCATION,a.PLATE]},d=[a.BOOLEAN,a.DATE,a.DATETIME,a.DECIMAL,a.INTEGER,a.JSON,a.TEXT]
function isLeafTypePrimitive(e){return d.includes(e)}function isSubType(e,t){var n
if(isBenchlingTypeDefComplex(e)){if(e instanceof s.EJ)return e.getBaseTypes().every((e=>isSubType(e,t)))
throw new Error(`isSubType() does not handle ${e.getOperatorName()}`)}return!isBenchlingTypeDefAny(e)&&(t===e||(null!==(n=null==c?void 0:c[t])&&void 0!==n?n:[]).includes(e))}},552648:(e,t,n)=>{n.d(t,{o:()=>s})
var a=n(459830),i=n(124640),r=n(264867)
const s={[r.i0.BOOLEAN]:"boolean",[r.i0.DATETIME]:"calendar",[r.i0.DATE]:"calendar",[r.i0.DECIMAL]:"number",[r.i0.INTEGER]:"number",[r.i0.JSON]:"json",[r.i0.TEXT]:"text",[r.i0.BENCHLING_OBJECT]:i.m.BasicFolderItem,[r.i0.BLOB]:"attachment",[r.i0.DROPDOWN_OPTION]:a.SCHEMA_FIELD_SELECTOR_OPTION,[r.i0.BATCH]:a.BATCH,[r.i0.BIOENTITY]:a.BIOENTITY_MIXIN,[r.i0.BASIC_FOLDER_ITEM]:i.m.BasicFolderItem,[r.i0.MIXTURE]:i.m.Mixture,[r.i0.MOLECULE]:i.m.Molecule,[r.i0.PROTEIN]:i.m.Protein,[r.i0.SEQUENCE]:i.m.Sequence,[r.i0.ENTRY]:i.m.Entry,[r.i0.PROTOCOL]:a.PROTOCOL,[r.i0.REQUEST]:a.REQUEST,[r.i0.RESULT]:"table",[r.i0.RUN]:a.ASSAY_RUN,[r.i0.STORABLE]:"fridge",[r.i0.BOX]:a.BOX,[r.i0.CONTAINER]:a.CONTAINER,[r.i0.LOCATION]:a.LOCATION,[r.i0.PLATE]:a.PLATE,[r.i0.PROCESS]:a.PROCESS,[r.i0.PROCESS_TASK]:a.PROCESS_TASK,[r.i0.PROCESS_OUTPUT]:a.PROCESS_OUTPUT,[r.i0.TEAM]:a.TEAM,[r.i0.USER]:a.USER}},748048:(e,t,n)=>{n.d(t,{$x:()=>updateEventSubscription,O6:()=>deleteEventSubscription,WC:()=>i,WO:()=>createEventbridgeSubscription})
var a=n(771398)
const i="/event-subscriptions"
function createEventbridgeSubscription(e){return a.s0({url:"/1/api/event-subscriptions",data:e})}function deleteEventSubscription(e){return a.WY({url:`/1/api/event-subscriptions/${e}`})}function updateEventSubscription(e,t){return a.Ry({url:`/1/api/event-subscriptions/${e}`,data:t})}},871214:(e,t,n)=>{n.d(t,{bW:()=>requestExportFolders,nZ:()=>requestExportFile,pg:()=>requestBulkExportFiles,qV:()=>requestPatentsafeExportTask,yP:()=>downloadStringContents})
var a=n(531041),i=n(771398),r=n(8747)
function requestExportFile(e){return r.s0({url:"/1/api/exports/",data:{file:e}})}function requestBulkExportFiles(e,t,n){return r.s0({url:"/1/api/exports/",data:{fileIds:e,exportType:t,format:n}})}function requestExportFolders(e,t,n){return r.s0({url:"/1/api/exports/",data:a.default.extend({folders:e,exportType:t},n)})}function requestPatentsafeExportTask(e){return r.by({url:"/1/api/exports/patentsafe",method:"POST",contentType:"application/json",data:JSON.stringify({fileId:e})})}function downloadStringContents(e,t){i.e7("POST","/1/api/exports/text-to-file",{datas:[{filename:e,content:t}],target:"_blank"})}},977774:(e,t,n)=>{n.d(t,{Z:()=>g})
var a=n(989526),i=n(669327),r=n(984152),s=n(88941),o=n(929123),l=n(868710),c=n(334148),d=n(198964),u=n(36424),m=n(865486),p=n(924982),h=n(914073),E=n(808844)
const S="Untitled",T="Preview Not Available"
function displayPreviewType(e){switch(e){case r.g.IMAGE:return"Image"
case r.g.CSV:return"CSV"
case r.g.PDF:return"PDF Viewer"
case r.g.GOOGLE_DOCS_VIEWER:return"Google Docs Viewer"
case r.g.MICROSOFT_OFFICE_ONLINE:return"Microsoft Office Online"
case r.g.MOLSTAR_PDB_VIEWER:case r.g.MOLSTAR_PDBQT_VIEWER:case r.g.MOLSTAR_MMCIF_VIEWER:return"Mol* Viewer"
default:return T}}class ExternalFileOptions extends a.Component{constructor(){super(...arguments)
this.handleClick=async e=>{const t=await this.props.generateDownloadUrl(e)
null!=t&&window.open(t,"_blank","noopener noreferrer")}}render(){const e=0===this.props.availablePreviewTypes.length,t=a.createElement(c.Co,{isDropdown:!0,disabled:e,buttonStyle:c.ZJ.TERTIARY_GRAY,size:c.qE.SMALL,text:displayPreviewType(this.props.previewType)})
return a.createElement("div",{className:"buffer-options-container form-inline"},null!=this.props.updateName?a.createElement(i.Z,{className:"external-file-options-name"},a.createElement(o.Z,null,"Name:"),a.createElement(s.Z,{type:"text",defaultValue:this.props.name,onChange:e=>this.props.updateName(e.target.value||S),placeholder:S})):void 0,a.createElement(i.Z,null,a.createElement("div",{className:"btn-group"},this.props.isPreviewTransformed?[a.createElement("a",{key:"preview-link",className:"btn btn-af-primary btn-xs btn-option",download:"null",draggable:!0,onClick:()=>this.handleClick(!0),target:"_blank",rel:"noopener noreferrer"},a.createElement(u.Z,{icon:"download"})," Download"),a.createElement("button",{key:"button",className:"btn btn-af-primary btn-xs btn-option dropdown-toggle","data-toggle":"dropdown",type:"button"},a.createElement(u.Z,{icon:"chevron-down"})),a.createElement("ul",{className:"dropdown-menu",role:"menu",key:"dropdown-menu"},a.createElement("li",null,a.createElement("a",{download:"null",draggable:!0,onClick:()=>this.handleClick(!1),target:"_blank",rel:"noopener noreferrer"},"Download Original")))]:a.createElement("a",{className:"btn btn-af-primary btn-xs btn-option",download:"null",draggable:!0,onClick:()=>this.handleClick(!1),target:"_blank",rel:"noopener noreferrer"},a.createElement(u.Z,{icon:"download"})," Download"))),a.createElement(i.Z,{className:"buffer-options-item--bannerContainer"}),a.createElement(i.Z,null,a.createElement("div",{className:"btn-group"},this.props.printOptions.length>0?[a.createElement("button",{key:"print-button",className:"btn btn-af-default btn-option btn-xs dropdown-toggle","data-toggle":"dropdown",type:"button"},a.createElement(u.Z,{icon:"format-print"}),a.createElement("span",{className:"caret"})),a.createElement("ul",{key:"print-dropdown",className:"dropdown-menu",role:"menu"},a.createElement("li",null,Array.from(this.props.printOptions).map((e=>a.createElement("a",{onClick:this.props.printHandler.bind(null,e),key:e},(0,E.co)(e))))))]:void 0),a.createElement(d.ZP,{menu:a.createElement(m.ZP,{dropLeft:!0,height:m.ZP.HEIGHTS.MEDIUM,width:m.ZP.WIDTHS.SMALL},a.createElement(h.Z,null,"Preview with"),this.props.availablePreviewTypes.map(((e,t)=>a.createElement(p.Z,{key:t,onSelect:()=>{this.props.updatePreviewType(e)}},displayPreviewType(e)))))},e?a.createElement(l.ZP,{title:T},t):t)))}}ExternalFileOptions.displayPreviewType=displayPreviewType
const g=ExternalFileOptions},911525:(e,t,n)=>{n.d(t,{V:()=>performSignedFileQuery,d:()=>urlToBase64})
var a=n(681896),i=n(697134),r=n(99312),s=n(78818),o=n(583310)
function urlToBase64(e){if(r.isBrowser)return new Promise((async(t,n)=>{const a=await fetch(e)
a.ok||n(a.status)
const i=await a.blob(),r=new FileReader
r.readAsDataURL(new Blob([i],{type:"image/jpeg"}))
r.onloadend=()=>{t(r.result)}
r.onerror=e=>{n(e)}}))}async function performSignedFileQuery(e,t,n,r,l){var c,d
r||(r=(0,s.Z)(n))
const u=await(0,a.doQuerySafe)({query:o.I},{variables:{apiId:e,versionId:r,owningEntityApiId:n,url:t,addHtmlContentTypeHeader:null!==(c=null==l?void 0:l.addHtmlContentTypeHeader)&&void 0!==c&&c},fetchPolicy:"no-cache"})
return(0,i.CZ)(u.signedFile)?null:null!==(d=null==l?void 0:l.useRedirectURL)&&void 0!==d&&d?u.signedFile.redirectUrl:u.signedFile.signedUrl}},343748:(e,t,n)=>{n.d(t,{C6:()=>bulkFetchFileSummaries,K5:()=>validateAuthors,Oy:()=>updateAuthors,PG:()=>updateTags,Re:()=>bulkUnarchive,SP:()=>updateApiIdentified,VS:()=>exportTagsToCSV,Wo:()=>moveShortcuts,_C:()=>moveFiles,a6:()=>getFilesForDelete,bh:()=>bulkGetTags,c1:()=>deleteFiles,ek:()=>bulkGetAuthors,in:()=>fetchSource,lP:()=>fetchRecents,nj:()=>copyFiles,t6:()=>createShareLink,tP:()=>fetchSources,tX:()=>forceDeleteFiles,uc:()=>bulkArchive,wH:()=>deleteShortcuts,yC:()=>search,yg:()=>updateShareLink})
var a=n(87209),i=n(379346),r=n(771398),s=n(8747),o=n(518352)
function fetchSources(){return r.xA("/1/api/sources/")}function fetchSource(e){return r.xA(`/1/api/sources/${e}`)}function search(e){return r.xA("/1/api/all/search",e)}function fetchRecents(){return r.xA("/1/api/users/me/recent/")}function bulkFetchFileSummaries(e,t){return r.ty({url:"/1/api/files:bulk-get-summaries",data:{fileIds:e,shouldErrorIfInaccessible:t}})}function updateApiIdentified(e,t,{parentFolderId:n}){return r.Ry({url:`/1/api/files/${e}`,data:t}).then((a=>{null!=t.folder&&o.Z.invalidateFolderContents(t.folder)
i.ZP.isFolder(e)&&o.Z.invalidateFolder(e)
null!=n&&o.Z.invalidateFolderContents(n)
return a}))}function deleteFiles(e,{parentFolderIds:t}){return s.ty({url:"/1/api/files/actions/delete",data:{ids:e}}).done((()=>{const n=e.filter((e=>i.ZP.isFolder(e)))
for(const e of Array.from(t))o.Z.invalidateFolderContents(e)
for(const e of Array.from(n))o.Z.invalidateFolder(e)}))}function forceDeleteFiles(e,{parentFolderIds:t}){return r.ty({url:"/1/api/files:force-delete",data:{ids:e}}).done((()=>{for(const e of Array.from(t))o.Z.invalidateFolderContents(e)}))}function deleteShortcuts(e,{parentFolderIds:t}){return r.ty({url:"/1/api/files/actions/delete-shortcuts",data:{ids:e}}).done((()=>{for(const e of Array.from(t))o.Z.invalidateFolderContents(e)}))}function getFilesForDelete(e,t){null==t&&(t=!1)
return r.ty({url:"/1/api/files/actions/get-files-for-delete",data:{ids:e,shouldDetectShortcuts:t}})}function bulkArchive(e,t,{shouldRemoveShortcuts:n,shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,shouldRemoveBarcodes:r,shouldArchiveContainedSamples:o,resultPurpose:l}){return s.ty({url:"/1/api/files:archive",data:{ids:e,purpose:t,shouldRemoveShortcuts:n,shouldUnregisterBioentities:a,unregisteredBioentitiesFolderId:i,shouldRemoveBarcodes:r,shouldArchiveContainedSamples:o,resultPurpose:l}})}function bulkUnarchive(e){return s.ty({url:"/1/api/files:unarchive",data:{ids:e}})}function _moveHelper(e,t,n,{parentFolderIds:a}){return r.ty({url:e,data:{ids:t,folderId:n}}).done((()=>{const e=t.filter((e=>i.ZP.isFolder(e)))
for(n of Array.from(a))o.Z.invalidateFolderContents(n)
for(n of Array.from(e))o.Z.invalidateFolder(n)}))}function moveFiles(e,t,{parentFolderIds:n}){return _moveHelper("/1/api/files/actions/move",e,t,{parentFolderIds:n})}function moveShortcuts(e,t,{parentFolderIds:n}){return _moveHelper("/1/api/files/actions/move-shortcuts",e,t,{parentFolderIds:n})}function copyFiles(e,t){a.$Z("Copying...")
return s.ty({url:"/1/api/files:copy",data:{ids:e,folderId:t}}).always((()=>{a.Cp()})).done((()=>o.Z.invalidateFolderContents(t)))}function bulkGetTags(e){return r.ty({url:"/1/api/files/actions/bulk-get-tags",data:{ids:e}})}function updateTags(e,{toSet:t,toAdd:n,toRemove:a,toRename:i}){return r.s0({url:"/1/api/files/actions/tag",data:{ids:e,toSet:t,toAdd:n,toRemove:a,toRename:i}})}function exportTagsToCSV(e){return s.by({contentType:"application/json",data:JSON.stringify({ids:e}),dataType:"json",type:"POST",url:"/1/api/files/actions/export-tags-to-csv"})}function createShareLink(e){return r.BS({url:`/1/api/files/${e}/share-link`,data:{}})}function updateShareLink(e,t){return r.Ry({url:`/1/api/share-links/${e}`,data:t})}function bulkGetAuthors(e){return r.s0({url:"/1/api/files:bulk-get-authors",data:{fileIds:e}})}function updateAuthors(e,t){return r.sA({url:`/1/api/files/${e}/authors`,data:{authorIds:t}})}function validateAuthors(e,t){return r.s0({url:`/1/api/files/${e}:validate-authors`,data:{authorIds:t}})}},674476:(e,t,n)=>{n.d(t,{P7:()=>foldersToSelectTreeItems,YV:()=>registriesToSelectTreeItems,an:()=>folderFilterToListParams,tn:()=>folderPredicate,vE:()=>fileToSelectTreeItem})
var a=n(531041),i=n(459830),r=n(572928),s=n(216101),o=n(379346),l=n(659133)
function folderFilterToListParams(e){return{level:e.level}}function folderPredicate(e){const t=l.Z.propsToFolderPredicate(e)
return n=>!(!e.includeHiddenProjects&&n.source&&(n.source.hidden||n.source.archived||n.source.archiveRecord))&&(!!t(n)&&!(!e.showRegistries&&n.source&&n.source.sourceType===r.REGISTRY_TYPE))}function getFolderIcon(e){return s.isRegistry(e.source)?i.REGISTRY:e.parent?i.FOLDER:i.SOURCE}function foldersToSelectTreeItems(e){const t=a.default.indexBy(e,"api_identifier")
return e.map((e=>{const n=[e.name]
let a=e.parent?e.parent.api_identifier:null,i=e
for(;a&&!(a in t);){i=i.parent
n.unshift(i.name)
a=i.parent?i.parent.api_identifier:null}const r=a?void 0:i.owner_handle,o=e.source&&e.source.starred&&!e.parent
return{id:e.api_identifier,forceToTop:s.isRegistry(e.source)||o,icon:o?"star":getFolderIcon(e),name:n.join(" / "),parentId:a,user:r}}))}function fileToSelectTreeItem(e){return{id:e.id,icon:(0,o.qz)(e.id),name:e.name,parentId:e.folder.api_identifier,user:void 0}}function registriesToSelectTreeItems(e){return e.map((e=>({id:s.generateFolderValue(e.api_identifier,e.source&&e.source.id,""),icon:i.REGISTRY,name:e.name,parentId:null,user:e.owner_handle})))}},402337:(e,t,n)=>{n.d(t,{Y:()=>BaseCreateModalContents,Z:()=>__WEBPACK_DEFAULT_EXPORT__})
var a=n(64558),i=n(989526),r=n(573961),s=n(348920),o=n(459830),l=n(518352),c=n(204026),d=n(699418),u=n(390462),m=n(291531),p=n(978980),h=n(115902),E=n(955080),S=n(428952),T=n(974913),g=n(481677),f=n(411358),I=n(251808),A=n(186905),y=n(103593),_=n(102176),C=n(59860),R=n(801455),N=n(205986)
const clampName=(e,t)=>e.slice(0,t)
function BaseCreateModalContents({name:e,setName:t,maxNameLength:n=255,modelType:l,templateCollection:d,setTemplateCollection:u,showInventory:h=!1,showNotebook:T=!1,folderId:N,setFolderId:O,tagSchema:b,updateTagSchema:v,updateSchemaTag:P,schemaTags:L,entryProvenance:D,errorsByFieldId:M,selectNameFieldInitially:w=!0,nameFieldLabel:F="Name",studySearchControlledItemsProps:k}){const U=(0,i.useRef)(null);(0,i.useEffect)((()=>{w&&r.findDOMNode(U.current).select()}),[w])
return i.createElement(i.Fragment,null,i.createElement(C.Z,null,i.createElement(y.Z,{sm:7},i.createElement(_.Z,{dataTestAttrs:{component:"BaseCreateModal",element:"name"}},i.createElement(R.Z,{label:F,isRequired:!0}),i.createElement("input",{type:"text",value:e,onChange:e=>{t(clampName(e.target.value,n))},ref:U}))),function renderFolderOrTemplateCollection(){return S.Z.isTemplateCollectibleModelType(l)?i.createElement(y.Z,{sm:5},i.createElement(R.Z,{label:"Template Collection",isRequired:!0}),i.createElement(E.Z,{value:d,onChange:u})):i.createElement(y.Z,{sm:5},i.createElement(_.Z,null,i.createElement(R.Z,{label:"Folder",isRequired:!0}),i.createElement(c.Z,{enableRedesign:!0,showInventory:h,showNotebook:T,value:N,onChange:e=>{O(e.target.value)},unsetOnFetchFail:!0})))}()),s.ZP.STUDIES_ENABLE&&k&&i.createElement(C.Z,null,i.createElement(y.Z,{sm:12},i.createElement(_.Z,null,i.createElement(R.Z,{label:"Studies"}),i.createElement(A.ZP,{...k,shouldAllowMultiple:!0})))),s.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL&&(l===o.ENTRY||l===o.TEMPLATE)&&i.createElement(C.Z,null,i.createElement(y.Z,{sm:12},i.createElement(R.Z,{isRequired:s.ZP.ELN_ENABLE_SCHEMA_REQUIRED_FOR_REVIEW,label:"Entry Schema"}),i.createElement(p.Z,{canRefreshTags:g.hasComputedTags((0,I.IT)(L))||f.v((0,I.IT)(L)),emptyMessage:"This schema has no fields.",errorsByFieldId:l===o.TEMPLATE?{}:M,tags:L,showEditButtons:!1,isLoadingTags:!1,onAnalyzeProteins:a.ZT,registryId:null==b?void 0:b.registryId,sequenceParts:null,subheaderNode:i.createElement(m.Z,{fileType:o.ENTRY,isSchemaEditable:l===o.TEMPLATE||D===o.ENTRY,isFileRegistered:!1,onUpdateTagSchema:v,tagSchema:b}),title:i.createElement("div",null,"Schema"),onUpdateTag:P,isEditing:!0}))))}const __WEBPACK_DEFAULT_EXPORT__=({create:e,initialFolderId:t,initialStudySearchItems:n,title:a,onRequestClose:r,initialName:c,showInventory:m=!1,showNotebook:p=!1,maxNameLength:E=255,dataTestAttrs:g,modelType:f=o.ENTRY,initialTemplateCollection:y,folderDefaultsKey:_=u.O.INVENTORY,initialTagSchema:C,initialSchemaTags:R,entryProvenance:O=o.ENTRY})=>{const[b,v]=(0,i.useState)(null!=c?clampName(c,E):"Untitled"),[P,L]=(0,i.useState)(null!=t?t:u.Z.get(_)),[D,M]=(0,i.useState)(!1),[w,F]=(0,i.useState)(y),{schemaTags:k,tagSchema:U,updateSchemaTag:x,updateTagSchema:B}=(0,h.RE)(C,R),Z=U?(0,h.Dr)(U,k):{},q=(0,A.Gm)(null!=n?n:[])
return i.createElement(N.ZP,{title:a,onRequestClose:r,onRequestSubmit:function onRequestSubmit(){M(!0)
const t=s.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL?(0,I.UR)(k):{},n=(0,A.ZC)(q)
if(S.Z.isTemplateCollectibleModelType(f))e(b,w.id,null==U?void 0:U.id,t,n).fail(T.ZP.notifyError).done((e=>{d.ZP.get().openFolderItem(e)
r()})).always((()=>{M(!1)}))
else if(f===o.ENTRY){u.Z.set(_,P)
e(b,P,null==U?void 0:U.id,t,n).fail(T.ZP.notifyError).done((e=>{l.Z.invalidateFolderContents(P)
d.ZP.get().openFolderItem(e)
r()})).always((()=>{M(!1)}))}else{u.Z.set(_,P)
e(b,P).fail(T.ZP.notifyError).done((e=>{l.Z.invalidateFolderContents(P)
d.ZP.get().openFolderItem(e)
r()})).always((()=>{M(!1)}))}},buttons:[{text:D?"Creating...":"Create",submit:!0,disabled:function getDisabled(){let e
e=S.Z.isTemplateCollectibleModelType(f)?0===b.trim().length||null==w||D:f===o.ENTRY?0===b.trim().length||null==P||D||!(!s.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL||!s.ZP.ELN_ENABLE_SCHEMA_REQUIRED_FOR_REVIEW)&&null==U||s.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL&&s.ZP.ELN_ENFORCE_REQUIRED_FIELDS_ON_ENTRY_CREATE&&Object.keys(Z).length>0:0===b.trim().length||null==P||D
return e}(),dataTestAttrs:g}]},i.createElement(BaseCreateModalContents,{name:b,setName:v,maxNameLength:E,modelType:f,templateCollection:w,setTemplateCollection:F,showInventory:m,showNotebook:p,folderId:P,setFolderId:L,tagSchema:U,updateSchemaTag:x,updateTagSchema:B,schemaTags:k,entryProvenance:O,errorsByFieldId:Z,studySearchControlledItemsProps:q}))}},496022:(e,t,n)=>{n.d(t,{Z:()=>E})
var a=n(602652),i=n.n(a),r=n(989526),s=n(531041),o=n(848640),l=n(922633),c=n(999053),d=n(402337),u=n(390462),m=n(535540),p=n(629656)
const h="CreateEntryModal"
class CreateEntryModal extends r.Component{constructor(){super(...arguments)
this._handleCreateEntry=(e,t,n,a,i)=>c.Z.create({name:e,folder:t,fulfillments:this.props.fulfillments,tagSchemaId:n,schemaTags:a,initialDay:this.props.initialDay,numDays:this.props.numDays,studyIds:i}).then((e=>{this.props.onEntryCreated&&this.props.onEntryCreated()
return e.id})).done((()=>{o.OZ(l.ZP.MODULES.ENTRY,l.ZP.CREATE_ENTRY)}))}static close(){p.xv(h)}static open(e,t){null==t&&(t={fulfillments:[]})
const n=s.default.extend({},{showNotebook:!0},t,{onRequestClose(){p.xv(h)}})
p.bA(h,r.createElement(e,n))}render(){return r.createElement(d.Z,{...this.props,title:"Create entry",create:this._handleCreateEntry,folderDefaultsKey:u.O.NOTEBOOK,showInventory:!0,dataTestAttrs:{component:"CreateEntryModal",element:"createButton"}})}}CreateEntryModal.propTypes={onEntryCreated:i().func,fulfillments:i().arrayOf(m.hm.isRequired)}
const E=CreateEntryModal},227887:(e,t,n)=>{n.d(t,{Eo:()=>c,Fl:()=>E,Yx:()=>isSchemaTag,cj:()=>S,e:()=>h,i2:()=>p,kY:()=>u,ls:()=>d,yT:()=>T})
var a=n(602652),i=n(764677),r=n(438089),s=n(497790),o=n(280034),l=n(866832)
const c=a.shape({id:a.string.isRequired,name:a.string.isRequired,fileId:a.string.isRequired,iconId:a.string.isRequired})
function isSchemaTag(e){return Boolean(e.tagSchemaField)}const d={name:a.string.isRequired,floatValue:a.number,integerValue:a.number,schemaFieldSelectorOptionIds:a.arrayOf(a.string),sourceEntry:a.shape({editURL:a.string.isRequired}),recordedAt:a.string,tagSchemaField:s.SCHEMA_FIELD_SHAPE,targetFiles:a.arrayOf(a.shape({id:a.string.isRequired,name:a.string.isRequired,url:a.string.isRequired})),targetBatches:a.arrayOf(a.shape({fileId:a.string.isRequired,id:a.string.isRequired,name:a.string.isRequired})),computedState:l.P,url:a.string,value:a.node},u=a.shape(d),m={id:a.string.isRequired,archiveRecord:i.k0,created_at:a.string.isRequired,editURL:a.string.isRequired,name:a.string.isRequired,tags:a.arrayOf(u).isRequired,tagSchema:a.shape({id:a.string.isRequired})},p=a.shape(m),h=(a.shape({...m,humanId:a.string.isRequired,entryDays:a.arrayOf(a.shape({id:a.number.isRequired,date:a.string.isRequired})),modified_at:a.string,review:r.r8}),a.shape({id:a.string.isRequired,name:a.string.isRequired})),E=a.shape({...m,displayLabel:a.string.isRequired,schemaValidationState:o.kw}),S=a.shape({name:a.string.isRequired,fields:a.arrayOf(s.SCHEMA_FIELD_SHAPE).isRequired}),T=(a.shape({id:a.string.isRequired,name:a.string.isRequired}),{HIGHLIGHT_COMPATIBLE:"highlight-compatible",WORK_SPACE_BUFFERS_NAMESPACE:"workspaceBuffers.",SPLIT_WORKSPACE_NAMESPACE:"splitWorkspace."})},977043:(e,t,n)=>{n.d(t,{CN:()=>parseFolderItemIdFromURL,F9:()=>parseInsightsIdFromURL,FF:()=>makeCompatibleApiId,KE:()=>parseWorkflowsIdFromURL,Lr:()=>parseSampleIdFromURL,M7:()=>getExportURL,SF:()=>isProteinSummary,SZ:()=>isOligo,UT:()=>parseRequestsIdFromURL,Zq:()=>sourceFromFile,dU:()=>parseAnalysisIdFromURL,dh:()=>isDnaSequence,eP:()=>isRnaSequence,h6:()=>isSequenceSummary,i5:()=>isInventoryFile,jx:()=>getResidues,ke:()=>getInsufficientPermissionsToEditMessage,vN:()=>getResidueWord,vU:()=>isInRegistry})
var a=n(64558),i=n(232606),r=n(675649),s=n(955836),o=n(3472),l=n(459830),c=n(537076),d=n(379346),u=n(556543)
function sourceFromFile(e){return e.id?function isFolder(e){return d.ZP.apiIdToType(e.id)===l.FOLDER}(e)?e.source:"folder"in e&&e.folder?e.folder.source||e.folder.sourceJson:null:null}function isInRegistry(e){return!!sourceFromFile(e)&&sourceFromFile(e).sourceType===l.REGISTRY}function isSequenceSummary(e){return d.ZP.apiIdToType(e.id)===l.SEQUENCE}function isProteinSummary(e){return d.ZP.apiIdToType(e.id)===l.PROTEIN}function isOligo(e){return isSequenceSummary(e)&&e.type===o.SEQUENCE_TYPE.OLIGO}function isRnaSequence(e){return isSequenceSummary(e)&&e.type===o.SEQUENCE_TYPE.SINGLE_STRANDED&&e.nucleotideType===s.Wy.RNA}function isDnaSequence(e){return isSequenceSummary(e)&&e.type===o.SEQUENCE_TYPE.DOUBLE_STRANDED&&e.nucleotideType===s.Wy.DNA}function isInventoryFile(e){return(0,c.isRegistrySupportedType)(d.ZP.apiIdToType(e.id))}function getResidues(e){if(isProteinSummary(e))return e.version?e.version.aminoAcids:null
if(isSequenceSummary(e))return e.bases;(0,i.hu)(!u.E1(d.ZP.apiIdToType(e.id)),"Unhandled file type that supports residues")
return null}function getResidueWord(e){switch(e){case l.PROTEIN:return"amino acid"
case l.SequenceSubtype.SEQUENCE:case l.SequenceSubtype.DNA_OLIGO:case l.SequenceSubtype.RNA_OLIGO:case l.SequenceSubtype.RNA_SEQUENCE:return"base"
default:(0,i.hu)(!u.E1(e),"Unhandled file type that supports residues")
return null}}function getInsufficientPermissionsToEditMessage(e,t){if(e.writable)return null
const n=function canUserEditAnyPropertiesForEntity(e){return Object.values((0,a.ei)(e,"writable","canEditNamesAndAliases","registryIdsChangeable")).some((e=>e))}(e)
return n?`Some actions are disabled because you have insufficient permissions for this ${t}.`:`Editing disabled on read-only ${t}.`}function getExportURL(e,t,n={}){let a=Object.entries(n).filter((([e,t])=>t)).map((([e,t])=>e)).join("&")
a&&(a=`?${a}`)
return`${function _baseURL(e){return e.replace(/\/edit$/,"")}(e)}.${t}${a}`}function makeCompatibleApiId(e){const[t,n]=e.split(/[-_]/,2)
return n?`${t}_${n}`:e}function parseItemIdFromURL(e,t,n=null){const a=n||window.location.href,{path:i}=r.he(a),s=i.split("/")
return t(s)?makeCompatibleApiId(s[e]):null}function parseFolderItemIdFromURL(e=null){return parseItemIdFromURL(4,(e=>6===e.length&&"f"===e[2]),e)}function parseSampleIdFromURL(e=null){return parseItemIdFromURL(3,(e=>4===e.length&&"samples"===e[1]),e)}function parseInsightsIdFromURL(e=null){return parseItemIdFromURL(3,(e=>4===e.length&&"analytics"===e[1]&&"dashboards"===e[2]),e)}function parseAnalysisIdFromURL(e=null){return parseItemIdFromURL(3,(e=>4===e.length&&"analytics"===e[1]&&"analyses"===e[2]),e)}function parseWorkflowsIdFromURL(e=null){return function parseWorkflowIdFromURL(e=null){return parseItemIdFromURL(3,(e=>4===e.length&&("workflows"===e[1]||"legacy-workflows"===e[1])&&"view"===e[2]),e)}(e)||function parseStageEntryIdFromURL(e=null){const t=parseItemIdFromURL(3,(e=>!(4!==e.length&&5!==e.length||"workflows"!==e[1]&&"legacy-workflows"!==e[1]||"stage-entries"!==e[2])),e)
return t?d.ZP.withPrefixIfMissing(t,l.STAGE_ENTRY):null}(e)||function parseWorkflowTemplateIdFromURL(e=null){return parseItemIdFromURL(4,(e=>5===e.length&&("workflows"===e[1]||"legacy-workflows"===e[1])&&"templates"===e[2]&&"view"===e[3]),e)}(e)}function parseRequestsIdFromURL(e=null){return parseItemIdFromURL(2,(e=>3===e.length&&"requests"===e[1]),e)}},451605:(e,t,n)=>{n.d(t,{Z:()=>h})
var a=n(989526),i=n(239070),r=n(551705),s=n(204026),o=n(974913),l=n(103593),c=n(102176),d=n(88941),u=n(929123),m=n(59860),p=n(205986)
class CreateFolderModal extends a.Component{constructor(){super(...arguments)
this.state={parent:this.props.initialParentId||null,name:"",description:"",posting:!1}
this.createFolder=()=>{this.setState({posting:!0})
r.Z.create({parent:this.state.parent,name:this.state.name,description:this.state.description,type:this.props.folderType}).done((e=>{r.Z.registerCreatedFolder(e,this.props.successCallback)
this.props.onRequestClose()})).fail((e=>{o.ZP.notifyError(e)
this._isMounted&&this.setState({posting:!1})}))}
this.enableSubmit=()=>null!=this.state.parent&&this.state.name.trim()&&!this.state.posting}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return a.createElement(p.ZP,{title:"Create folder",onRequestClose:this.props.onRequestClose,onRequestSubmit:this.createFolder,buttons:[{text:"Create",submit:!0,disabled:!this.enableSubmit()}]},a.createElement(m.Z,null,a.createElement(l.Z,{sm:7},a.createElement(c.Z,null,a.createElement(u.Z,{className:"required"},"Name"),a.createElement(d.Z,{value:this.state.name,onChange:e=>{this.setState({name:e.target.value})},focusOnMount:!0,dataTestAttrs:{component:"CreateFolderModal",element:"nameInput"}}))),a.createElement(l.Z,{sm:5},a.createElement(c.Z,null,a.createElement(u.Z,{className:"required"},"Location"),a.createElement(s.Z,{enableRedesign:!0,requireSubfolderCreatableAuth:!0,showInventory:this.props.folderType===i.Dy.INVENTORY,showNotebook:this.props.folderType===i.Dy.NOTEBOOK,value:this.state.parent,onChange:e=>{this.setState({parent:e.target.value})},unsetOnFetchFail:!0})))),a.createElement(m.Z,null,a.createElement(l.Z,{sm:12},a.createElement(c.Z,null,a.createElement(u.Z,null,"Description"),a.createElement(d.Z,{value:this.state.description,onChange:e=>{this.setState({description:e.target.value})}})))))}}CreateFolderModal.defaultProps={folderType:i.Dy.INVENTORY}
const h=CreateFolderModal},238807:(e,t,n)=>{n.d(t,{$6:()=>trackFormArchive,HJ:()=>trackFormUnarchive,jU:()=>a})
var a,i=n(468943),r=n(786628),s=n(171471),o=n(459830),l=n(379346)
!function(e){e.ARCHIVED_FIELD="archived_field"
e.ADDED_FIELD="added_field"
e.RENAMED_FIELD="renamed_field"
e.CHANGED_FIELD_REQUIRED="changed_field_required"
e.CHANGED_FIELD_TYPE="changed_field_type"}(a||(a={}))
function trackFormArchive(e,t){for(const n of e)l.ZP.apiIdToType(n)===o.FORM_DEFINITION&&i.gx(s.ln.CLICKED_FORM_ARCHIVE_BUTTON,r.X.FORMS,{...t,form_definition_id:n})}function trackFormUnarchive(e,t){for(const n of e)l.ZP.apiIdToType(n)===o.FORM_DEFINITION&&i.gx(s.ln.CLICKED_FORM_UNARCHIVE_BUTTON,r.X.FORMS,{...t,form_definition_id:n})}},169602:(e,t,n)=>{n.d(t,{Z:()=>CreateFormModal})
var a=n(989526),i=n(232606),r=n(675649),s=n(76787),o=n(523171),l=n(751512),c=n(138966),d=n(476031),u=n(579635),m=n(955080),p=n(974913),h=n(103593),E=n(102176),S=n(929123),T=n(59860),g=n(954240),f=n(476604),I=n(865486),A=n(472347),y=n(205986)
function CreateFormModal(e){const[t,n]=(0,a.useState)(""),[o,l]=(0,a.useState)(e.initialTemplateCollection),[p,g]=(0,a.useState)(e.initialTaskSchema)
return a.createElement(y.ZP,{title:"Create form",onRequestClose:e.onRequestClose,onRequestSubmit:()=>{(0,i.hu)(void 0!==p,"Submit button should be disabled if task schema is unspecified");(0,i.hu)(void 0!==o,"Submit button should be disabled if template collection is unspecified");(0,c.ZP)((0,s.j)(t,o.id,p.id))
e.onRequestClose()},buttons:[{text:"Create",submit:!0,disabled:!function isSubmitEnabled(){return t.trim().length>0&&null!=o&&void 0!==p}()},{text:"Manage Collections",onClick:function manageCollections(t){const n=u.Z.collectionsURL()
r.c4(t,n)
e.onRequestClose()},asLink:!0,pullLeft:!0}],dataTestAttrs:{component:"CreateFormModal",element:"modal"}},a.createElement(T.Z,null,a.createElement(h.Z,{sm:7},a.createElement(E.Z,{dataTestAttrs:{component:"CreateFormModal",element:"name"}},a.createElement(S.Z,null,"Name"),a.createElement("input",{type:"text",value:t,onChange:e=>{n((0,d.Z)(e.target.value))},autoFocus:!0}))),a.createElement(h.Z,{sm:5},a.createElement(S.Z,null,"Template Collection"),a.createElement(m.Z,{value:o,onChange:e=>{l(e)}}))),a.createElement(T.Z,null,a.createElement(h.Z,{sm:12},a.createElement(S.Z,null,"Task Schema"),a.createElement(TaskSchemaSelector,{value:p,onSelect:e=>{g(e)}}))))}function TaskSchemaSelector(e){var t,n
const i=(0,l.IJ)(o.Sx,{fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0})
if(i.type===l.NI.PENDING)return a.createElement(f.b,null)
if(i.type===l.NI.ERROR){p.ZP.error("Could not load schemas")
return null}const r=i.data.processTaskSchemas.map((e=>({name:e.name,value:e})))
return a.createElement(g.ZP,{displayName:null!==(n=null===(t=e.value)||void 0===t?void 0:t.name)&&void 0!==n?n:"",menu:a.createElement(A.Z,{width:I.ZP.WIDTHS.FULL,optionDatas:r,onSelect:e.onSelect})})}},696376:(e,t,n)=>{n.d(t,{C7:()=>c,EI:()=>a,Zz:()=>o,lN:()=>formFieldTypeToReadableName,n7:()=>r,q0:()=>s,xd:()=>l})
var a,i=n(264867)
!function(e){e.BOOLEAN="BOOLEAN"
e.DATETIME="DATETIME"
e.DATE="DATE"
e.DECIMAL="DECIMAL"
e.INTEGER="INTEGER"
e.TEXT="TEXT"
e.BIOENTITY="BIOENTITY"
e.BASIC_FOLDER_ITEM="BASIC_FOLDER_ITEM"
e.MIXTURE="MIXTURE"
e.MOLECULE="MOLECULE"
e.PROTEIN="PROTEIN"
e.SEQUENCE="SEQUENCE"
e.ENTRY="ENTRY"
e.STORABLE="STORABLE"
e.BOX="BOX"
e.CONTAINER="CONTAINER"
e.LOCATION="LOCATION"
e.PLATE="PLATE"
e.PROCESS="PROCESS"
e.PROCESS_TASK="PROCESS_TASK"
e.DROPDOWN_OPTION="DROPDOWN_OPTION"}(a||(a={}))
function formFieldTypeToReadableName(e){switch(e){case a.BASIC_FOLDER_ITEM:return"folder item"
case a.PROCESS_TASK:return"workflow task"
case a.DROPDOWN_OPTION:return"dropdown"
default:return e.toLowerCase()}}const r={[a.BOOLEAN]:i.i0.BOOLEAN,[a.DATETIME]:i.i0.DATETIME,[a.DATE]:i.i0.DATE,[a.DECIMAL]:i.i0.DECIMAL,[a.INTEGER]:i.i0.INTEGER,[a.TEXT]:i.i0.TEXT,[a.BIOENTITY]:i.i0.BIOENTITY,[a.BASIC_FOLDER_ITEM]:i.i0.BASIC_FOLDER_ITEM,[a.MIXTURE]:i.i0.MIXTURE,[a.MOLECULE]:i.i0.MOLECULE,[a.PROTEIN]:i.i0.PROTEIN,[a.SEQUENCE]:i.i0.SEQUENCE,[a.ENTRY]:i.i0.ENTRY,[a.STORABLE]:i.i0.STORABLE,[a.BOX]:i.i0.BOX,[a.CONTAINER]:i.i0.CONTAINER,[a.LOCATION]:i.i0.LOCATION,[a.PLATE]:i.i0.PLATE,[a.PROCESS]:i.i0.PROCESS,[a.PROCESS_TASK]:i.i0.PROCESS_TASK,[a.DROPDOWN_OPTION]:i.i0.DROPDOWN_OPTION},s={[i.i0.BOOLEAN]:a.BOOLEAN,[i.i0.DATETIME]:a.DATETIME,[i.i0.DATE]:a.DATE,[i.i0.DECIMAL]:a.DECIMAL,[i.i0.INTEGER]:a.INTEGER,[i.i0.TEXT]:a.TEXT,[i.i0.BIOENTITY]:a.BIOENTITY,[i.i0.BASIC_FOLDER_ITEM]:a.BASIC_FOLDER_ITEM,[i.i0.MIXTURE]:a.MIXTURE,[i.i0.MOLECULE]:a.MOLECULE,[i.i0.PROTEIN]:a.PROTEIN,[i.i0.SEQUENCE]:a.SEQUENCE,[i.i0.ENTRY]:a.ENTRY,[i.i0.STORABLE]:a.STORABLE,[i.i0.BOX]:a.BOX,[i.i0.CONTAINER]:a.CONTAINER,[i.i0.LOCATION]:a.LOCATION,[i.i0.PLATE]:a.PLATE,[i.i0.PROCESS]:a.PROCESS,[i.i0.PROCESS_TASK]:a.PROCESS_TASK,[i.i0.DROPDOWN_OPTION]:a.DROPDOWN_OPTION}
var o
!function(e){e.STATIC="STATIC"
e.ITERABLE="ITERABLE"}(o||(o={}))
const l={[o.STATIC]:"Shared",[o.ITERABLE]:"Repeatable"},c="form_field_edit_modal"},302210:(e,t,n)=>{n.d(t,{p:()=>G,Z:()=>FormDesigner})
var a=n(692013),i=n(989526),r=n(697134),s=n(974913),o=n(334148),l=n(685370),c=n(764403),d=n.n(c),u=n(929123),m=n(954240),p=n(865486),h=n(924982),E=n(472347)
function FormDesignerActionSelector({formAction:e,actions:t,schemas:n,onSetAction:r,onSetSchema:s,onRemoveAction:l,disableAction:c,disableSchema:T}){var g,f,I,A
return i.createElement("div",{className:d()("u-spacing-bottom",(0,a.iv)(S.grid))},i.createElement(u.Z,null,"Action"),i.createElement(m.ZP,{displayName:null!==(f=null===(g=e.selectedAction)||void 0===g?void 0:g.name)&&void 0!==f?f:"",disabled:c,menu:i.createElement(p.ZP,{width:p.ZP.WIDTHS.FULL},t.map((e=>i.createElement(h.Z,{key:e.identifier,value:e,onSelect:e=>{r(e)}},e.name))))}),i.createElement(u.Z,null,"Schema"),i.createElement(m.ZP,{disabled:T||!e.selectedAction,displayName:null!==(A=null===(I=e.selectedSchema)||void 0===I?void 0:I.name)&&void 0!==A?A:"",menu:i.createElement(E.Z,{width:p.ZP.WIDTHS.FULL,optionDatas:n.map((e=>({name:e.name,value:e}))),onSelect:s})}),i.createElement("div",null)," ",l&&i.createElement(o.Co,{buttonStyle:o.ZJ.CIRCLE_ICON,size:o.qE.SMALL,icon:"delete",isDropdown:!1,iconAltText:"Remove action",onClick:()=>{l(e.key)}}))}const S=a.mM.create({grid:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gridTemplateRows:"auto auto",gridAutoFlow:"column",columnGap:"10px"}})
var T=n(64558),g=n(468943),f=n(171471),I=n(696376),A=n(586089),y=n(271359),_=n(994495),C=n(831144),R=n(502633),N=n(102176),O=n(830893),b=n(16049),v=n(229329),P=n(801455),L=n(205986)
function FormFieldSettingsModal({field:e,onRequestSubmit:t,onRequestClose:n,formDefinitionId:a,actionOrigin:r,sessionId:s}){const l=e.actionParameter.name,c=e.displayName,d=(0,b.Z)(c),[u,m]=(0,i.useState)(e.description||""),[p,h]=(0,i.useState)(e.required)
function trackAnalyticsEvent(t){var n,i
const o=(null==u?void 0:u.trim())||null,m={session_id:s,action_origin:r,modal_type:I.C7,form_definition_id:a,form_field_key:e.key,schema_field_api_id:e.actionParameter.schemaFieldId,action_parameter_id:e.actionParameter.id,schema_field_name:l,field_required:p,field_included:e.included,field_name_length:d.value.length,field_description_length:null!==(n=null==o?void 0:o.length)&&void 0!==n?n:0}
d.value.trim().toLowerCase()!==c.trim().toLowerCase()&&(m.field_name_updated=d.value);(null==o?void 0:o.toLowerCase())!==(null===(i=e.description)||void 0===i?void 0:i.trim().toLowerCase())&&(m.field_description_updated=null!=o?o:null)
g.gx(t,f.XC.FORMS,m)}return i.createElement(L.ZP,{onRequestClose:()=>{trackAnalyticsEvent(f.U9.CLOSED_MODAL)
n()},onRequestSubmit:()=>{trackAnalyticsEvent(f.U9.SUBMITTED_MODAL)
t({...e,displayName:d.value,description:(null==u?void 0:u.trim())||null,required:p})},title:`${c} settings`,buttons:[{text:"Save",submit:!0,style:o.ZJ.SECONDARY,disabled:!d.value}]},i.createElement("div",null,i.createElement(N.Z,null,i.createElement(P.Z,{label:"Schema field name"}),i.createElement("br",null),l),i.createElement(N.Z,null,i.createElement(P.Z,{label:"Display name",htmlFor:"form_field_display_name",isRequired:!0}),i.createElement("input",{id:"form_field_display_name",type:"text",...d})),i.createElement(N.Z,null,i.createElement(P.Z,{label:"Description",htmlFor:"form_field_description"}),i.createElement(O.Z,{id:"form_field_description",value:u,onChange:e=>{m(e.target.value)}})),i.createElement(N.Z,null,i.createElement(v.Z,{className:"formDesigner-formFieldRequired",id:"form_field_required",label:"Make this field required in the form",checked:p,disabled:e.actionParameter.isRequired,onChange:e=>{h(e.target.checked)}}))))}var D=n(760575)
function FormDesignerFieldsTable({action:e,sections:t,onFieldChange:n,onFieldsChange:r,formDefinitionId:s,sessionId:o,actionOrigin:l}){const{fields:c}=e,d=(0,i.useMemo)((()=>(0,T.m8)(t.map(((e,t)=>[e.key,{...e,index:t}])))),[t])
return i.createElement("div",{className:"u-spacing-bottom"},i.createElement(u.Z,null,"Fields to include"),i.createElement("div",{className:(0,a.iv)(M.table)},i.createElement(C.Z,{headerCells:[{key:"checkbox",contents:i.createElement("div",null,"Include"),cellClassName:(0,a.iv)(M.smallColumn)},{key:"Field name",contents:i.createElement("div",null,"Field name"),cellClassName:(0,a.iv)(C.Y.wideColumn)},{key:"section",contents:i.createElement("div",null,"Section"),cellClassName:(0,a.iv)(C.Y.wideColumn)},{key:"settings",contents:null,cellClassName:(0,a.iv)(M.smallColumn)}],isDraggingDisabled:!1,noRowsText:"No fields found for this schema.",rows:e.selectedSchema?c.map((r=>{var c
const u=d[r.sectionKey],E=r.actionParameter.isSnapshot
return{id:r.key,cells:[{key:"checkbox",contentsClassName:(0,a.iv)(M.iconCell),contents:i.createElement(A.Z,{checked:null!==(c=r.included)&&void 0!==c&&c,disabled:r.actionParameter.isRequired,onChange:()=>{n(e.key,{...r,included:!r.included})}}),cellClassName:(0,a.iv)(M.smallColumn)},{key:"name",contents:i.createElement("div",null,r.displayName),cellClassName:(0,a.iv)(C.Y.wideColumn)},{key:"section",contents:i.createElement(m.ZP,{disabled:!r.included,displayName:u?formatIndexedSectionName(u.name,u.index):i.createElement("em",null,"No Section"),menu:i.createElement(p.ZP,{value:r.sectionKey,width:p.ZP.WIDTHS.FULL},t.map(((t,a)=>i.createElement(h.Z,{key:t.key,value:t.key,isDisabled:E&&t.sectionType===I.Zz.STATIC,onSelect:t=>{n(e.key,{...r,sectionKey:t})}},formatIndexedSectionName(t.name,a)))))}),cellClassName:(0,a.iv)(C.Y.wideColumn)},{key:"settings",contentsClassName:(0,a.iv)(M.iconCell),contents:i.createElement(_.Z,{disabled:!r.included,onClick:()=>{!function openFieldSettingsModal(t){(0,R.Z)(FormFieldSettingsModal,{field:t,onRequestSubmit:t=>{n(e.key,t)},formDefinitionId:s,actionOrigin:l,sessionId:o})
g.gx(f.U9.OPENED_MODAL,f.XC.FORMS,{session_id:o,action_origin:l,modal_type:I.C7,form_definition_id:s,form_field_key:t.key,schema_field_api_id:t.actionParameter.schemaFieldId,action_parameter_id:t.actionParameter.id,schema_field_name:t.actionParameter.name,field_required:t.required,field_included:t.included})}(r)}}),cellClassName:(0,a.iv)(M.smallColumn)}]}})):[],onReorderRow:(t,n)=>{r(e.key,(0,D.R)(c,c.findIndex((e=>e.key===t)),n))}})))}const M=a.mM.create({smallColumn:{flex:"0 0 50px"},iconCell:{lineHeight:0},table:{backgroundColor:y.Cj,borderRadius:4}})
function formatIndexedSectionName(e,t){return e?`${++t} (${e})`:""+ ++t}var w=n(125440),F=n(129270),k=n(134749),U=n(665704)
const x=i.createElement(i.Fragment,null,i.createElement("p",null,i.createElement("b",null,"Shared sections")," are only filled out once in the form. Values that are entered in shared sections apply to all tasks created in the form."),i.createElement("p",null,i.createElement("b",null,"Repeatable sections")," can be filled out multiple times in the formonce for each task that gets created."),i.createElement("p",null,"There will exist only 1 repeatable section on a form, only shared sections can be added."))
function FormDesignerSectionsTable({sections:e,onAddSection:t,onRemoveSection:n,onUpdateSection:r,onUpdateSections:s}){return i.createElement("div",{className:"u-spacing-bottom"},i.createElement(u.Z,null,"Form sections"),i.createElement(C.Z,{headerCells:[{key:"index",contents:null,cellClassName:(0,a.iv)(B.indexCell)},{key:"name",contents:"Section name (optional)",cellClassName:(0,a.iv)(B.nameCell)},{key:"description",contents:"Section description (optional)",cellClassName:(0,a.iv)(B.descriptionCell)},{key:"type",contents:i.createElement("span",null,"Type",i.createElement(w.Z,{renderContent:()=>x,iconClassName:"u-mini-spacing-left"})),cellClassName:(0,a.iv)(B.typeCell)}],footerCells:[{key:"add",contents:i.createElement(o.Co,{className:(0,a.iv)(B.addButton),buttonStyle:o.ZJ.TEXT,size:o.qE.SMALL,icon:"compose",text:"Add section",onClick:t}),cellClassName:(0,a.iv)(B.addButtonCell)}],isDraggingDisabled:e.length<=1,noRowsText:"No sections added",rows:e.map(((t,s)=>{var l
const{key:c}=t
return{id:c,cells:[{key:"index",contents:s+1,cellClassName:(0,a.iv)(B.indexCell)},{key:"name",contents:i.createElement(U.Z,{value:t.name,onChange:e=>{const t=e.target.value
r(c,{name:t,isNameVisible:Boolean(t)})},onBlur:e=>{const t=e.target.value.trim()
r(c,{name:t,isNameVisible:Boolean(t)})},labelStyle:k.gF.HIDDEN}),cellClassName:(0,a.iv)(B.nameCell)},{key:"description",contents:i.createElement(U.Z,{value:null!==(l=t.description)&&void 0!==l?l:"",onChange:e=>{const t=e.target.value
r(c,{description:t||void 0})},onBlur:e=>{const t=e.target.value.trim()
r(c,{description:t||void 0})},labelStyle:k.gF.HIDDEN}),cellClassName:(0,a.iv)(B.descriptionCell)},{key:"type",contents:I.xd[t.sectionType],cellClassName:(0,a.iv)(B.typeCell)}],actionGroup:t.sectionType===I.Zz.STATIC&&e.length>1&&i.createElement(o.Co,{buttonStyle:o.ZJ.CIRCLE_ICON,size:o.qE.SMALL,icon:"delete",isDropdown:!1,iconAltText:"Remove section",onClick:()=>{n(c)}}),rowClassName:(0,a.iv)(B.sectionsTableRow)}})),onReorderRow:(t,n)=>{s((0,D.R)(e,e.findIndex((e=>e.key===t)),n))}}))}const B=a.mM.create({sectionsTableRow:{padding:"7px 14px"},addButtonCell:{margin:"-4px auto"},addButton:{marginLeft:"-10px"},indexCell:{flex:"0 0 26px",fontWeight:F.KB,color:y.pp},nameCell:{flexGrow:2},descriptionCell:{flexGrow:3},typeCell:{flexGrow:1,marginRight:"20px",color:y.pp}})
var Z=n(828969),q=n(523171)
const G={name:"Create a workflow task",identifier:"create_task",version:0}
function FormDesigner({actionToSchemas:e,state:t,setState:n,lockActions:c,formDefinitionId:d,sessionId:u,actionOrigin:m}){const{sections:p,actionMap:h}=t,onRemoveSection=e=>{!Z.Vb.getFields(t).some((t=>t.sectionKey===e))?n(Z.Vb.removeSection(e)):(0,l.iG)("Delete section?","The fields in this section will be moved to a different section.",o.ZJ.NEGATIVE,{enableRedesign:!0,acceptText:"Delete section",onSubmit:()=>{n(Z.Vb.removeSection(e))}})}
return i.createElement("div",null,i.createElement("div",null,[...h.entries()].map((([t,a],o)=>{var l,h
return i.createElement(i.Fragment,{key:t},i.createElement(FormDesignerActionSelector,{formAction:a,actions:[G],schemas:(null===(l=a.selectedAction)||void 0===l?void 0:l.identifier)&&e[null===(h=a.selectedAction)||void 0===h?void 0:h.identifier]||[],onSetAction:e=>{n(Z.Vb.selectAction(t,e))},onSetSchema:async e=>{n(Z.Vb.selectSchema(t,e))
const a=await(0,q.C4)(G.identifier,e.id);(0,r.CZ)(a)?s.ZP.warn("You do not have permission to the selected schema"):n(Z.Vb.loadAction(t,a))},onRemoveAction:c?void 0:e=>{n(Z.Vb.removeAction(e))},disableAction:a.lockAction,disableSchema:a.lockSchema}),a.selectedAction&&a.selectedSchema&&i.createElement(i.Fragment,null,0===o&&i.createElement(FormDesignerSectionsTable,{sections:p,onAddSection:()=>{n(Z.Vb.addSection())},onRemoveSection,onUpdateSection:(e,t)=>{n(Z.Vb.updateSection(e,t))},onUpdateSections:e=>{n(Z.Vb.updateSections(e))}}),i.createElement(FormDesignerFieldsTable,{action:a,sections:p,onFieldChange:(e,t)=>{n(Z.Vb.updateField(e,t))},onFieldsChange:(e,t)=>{n(Z.Vb.updateFields(e,t))},formDefinitionId:d,actionOrigin:m,sessionId:u})))})),c||i.createElement(o.Co,{className:(0,a.iv)(V.addActionButton),buttonStyle:o.ZJ.TEXT,size:o.qE.SMALL,icon:"compose",text:"Add action",onClick:()=>{n(Z.Vb.addAction())}})))}const V=a.mM.create({addActionButton:{display:"block",margin:"20px 0"}})},76787:(e,t,n)=>{n.d(t,{Np:()=>createForm,R2:()=>renameForm,gy:()=>updateFormTemplateCollection,j:()=>formCreatorUrl,r4:()=>formDefinitionUrl,vd:()=>updateFormDefinition})
var a=n(675649),i=n(788836),r=n(771398)
function createForm(e,t,n,a,i){return r.s0({url:"/1/api/forms/form-definitions",data:{name:e,templateCollectionId:t,schemaId:i,definition:n,actionConfigs:a}})}function renameForm(e,t){return r.Ry({url:`/1/api/forms/form-definitions/${e}`,data:{name:t}})}function updateFormTemplateCollection(e,t){return r.s0({url:`/1/api/forms/form-definitions/${e}/move`,data:{templateCollectionId:t}})}function updateFormDefinition(e,t,n){return r.s0({url:`/1/api/forms/form-definitions/${e}/form-definition-versions`,data:{definition:t,actionConfigs:n}})}function formDefinitionUrl(e){return`/${i.Z.currentUser().url_identifier}/forms/${e}`}function formCreatorUrl(e,t,n){return(0,a.Dv)(`/${i.Z.currentUser().url_identifier}/forms/create`,{name:e,templateCollection:t,taskSchemaId:n})}},828969:(e,t,n)=>{n.d(t,{BK:()=>convertFormDefinitionToFormDesignerState,KK:()=>initializeFormDesignerState,Q5:()=>areDesignerStatesEqual,Vb:()=>h,iR:()=>unnestFieldsFromSections})
var a=n(512902),i=n(615439),r=n.n(i),s=n(178570),o=n(232606),l=n(696376),c=n(302210),d=n(863405),u=n(497790)
const m={key:"blank",selectedAction:void 0,selectedSchema:void 0,fields:[]},p={key:"blank",name:"",sectionType:l.Zz.STATIC,isIterable:!1,isNameVisible:!1},h={addAction:()=>e=>(0,a.ZP)(e,(e=>{const t=(0,s.Z)()
e.actionMap.set(t,{...m,key:t})})),removeAction:e=>t=>(0,a.ZP)(t,(t=>{t.actionMap.delete(e)})),selectAction:(e,t,n)=>i=>(0,a.ZP)(i,(a=>{a.actionMap.set(e,{key:e,selectedAction:t,selectedSchema:void 0,fields:[],lockAction:null==n?void 0:n.lockAction})})),updateAction:(e,t)=>n=>(0,a.ZP)(n,(n=>{n.actionMap.set(e,{...(0,a.Js)(n.actionMap).get(e),...t})})),loadAction:(e,t)=>n=>(0,a.ZP)(n,(a=>{const i=a.actionMap.get(e)
i.fields=t.invocationParameters.map((e=>{const{name:t,isRequired:a}=e
return{key:(0,s.Z)(),included:!0,required:a,displayName:t,description:null,sectionKey:i.sectionKey||n.sections[n.sections.length-1].key,actionParameter:e}}))})),selectSchema:(e,t,n)=>i=>(0,a.ZP)(i,(a=>{const i=a.actionMap.get(e)
i.selectedSchema=t
i.lockSchema=null==n?void 0:n.lockSchema
i.fields=[]})),addSection:()=>e=>(0,a.ZP)(e,(e=>{e.sections.unshift({...p,key:(0,s.Z)()})})),removeSection:e=>t=>{const n=t.sections.findIndex((t=>t.key===e));(0,o.hu)(-1!==n,`Couldn't find section with key '${e}'`)
return(0,a.ZP)(t,(t=>{t.sections.splice(n,1)
const a=t.sections[0===n?0:n-1]
for(const n of t.actionMap.values())for(const t of n.fields)t.sectionKey===e&&(t.sectionKey=a.key)}))},updateSection:(e,t)=>n=>{const i=n.sections.findIndex((t=>t.key===e));(0,o.hu)(-1!==i,`Couldn't find section with key '${e}'`)
return(0,a.ZP)(n,(e=>{e.sections[i]={...n.sections[i],...t}}))},updateSections:e=>t=>(0,a.ZP)(t,(t=>{t.sections=e})),updateField:(e,t)=>n=>(0,a.ZP)(n,(n=>{const i=n.actionMap.get(e),r=(0,a.Js)(i.fields).findIndex((e=>e.key===t.key))
i.fields[r]=t})),updateFields:(e,t)=>n=>(0,a.ZP)(n,(n=>{n.actionMap.get(e).fields=t})),getFields:e=>[...e.actionMap.values()].flatMap((e=>e.fields)),generateFormDefinition:e=>{const{sections:t}=e,n=h.getFields(e).filter((e=>e.included))
return{sections:t.map((e=>({...e,type:"FormSection",content:n.filter((t=>t.sectionKey===e.key)).map((e=>function convertFormActionFieldToFormDefinitionField(e){var t,n,a
const i=null!==(t=l.q0[u.FIELD_TYPE_TO_LEAF_TYPE[e.actionParameter.parameterTypeName]])&&void 0!==t?t:l.EI.BOOLEAN
return{type:"FormField",key:e.key,label:e.displayName,matchesSchemaFieldName:e.displayName===e.actionParameter.name,description:e.description,isRequired:e.required,schemaFieldSelectorId:i===l.EI.DROPDOWN_OPTION&&null!==(n=e.actionParameter.schemaFieldSelectorId)&&void 0!==n?n:void 0,schemaId:null!==(a=e.actionParameter.linkedSchemaId)&&void 0!==a?a:void 0,fieldType:i}}(e)))})))}},generateFormActionConfigs:e=>{const{actionMap:t}=e
return[...t.values()].filter((e=>e.selectedAction)).map((e=>{var t
return{identifier:e.selectedAction.identifier,actionVersion:e.selectedAction.version,schemaId:null===(t=e.selectedSchema)||void 0===t?void 0:t.id,sectionKey:e.sectionKey,parameters:e.fields.map((e=>({actionParameterId:e.actionParameter.id,formFieldKey:e.included?e.key:null})))}}))}}
function createMergedFormActionField(e,t){return{key:e.key,included:!0,required:e.isRequired||t.isRequired,displayName:e.matchesSchemaFieldName?t.name:e.label,description:e.description,sectionKey:e.sectionKey,actionParameter:t}}function createFormActionField(e,t){return{key:(0,s.Z)(),included:e.isRequired,required:e.isRequired,displayName:e.name,description:null,sectionKey:t,actionParameter:e}}function createFormDesignerAction(e,t,n,a,i,r){const o=[]
for(const a of t.parameters){const t=e.find((e=>e.key===a.formFieldKey)),i=n.invocationParameters.find((e=>e.id===a.actionParameterId))
t&&i&&o.push(createMergedFormActionField(t,i))}const l=new Set(o.map((e=>e.actionParameter.id))),d=n.invocationParameters.filter((e=>!l.has(e.id)))
for(const e of d)o.push(createFormActionField(e,r))
return{selectedAction:c.p,selectedSchema:t.schema,key:(0,s.Z)(),lockAction:a,lockSchema:i,sectionKey:t.sectionKey||void 0,fields:o}}function unnestFieldsFromSections(e){return e.content.flatMap((t=>"FormSection"===t.type?unnestFieldsFromSections(t):{...t,sectionKey:e.key}))}function convertFormDefinitionToFormDesignerState(e,t,n={lockAction:!1,lockSchema:!1}){const a=e.definition.sections,i=a.map((e=>({key:e.key,name:e.name,sectionType:e.sectionType,isIterable:e.isIterable,isNameVisible:e.isNameVisible,description:e.description}))),r=a.flatMap(unnestFieldsFromSections),s=i[0].key,o=new Map,l=[]
for(const[a,i]of e.actionConfigs.entries()){const e=t[a],c=createFormDesignerAction(r,i,e,n.lockAction,n.lockSchema,s)
o.set(c.key,c)
l.push(...(0,d.tP)(r,i.parameters,e.invocationParameters))}return[{actionMap:o,sections:i},l]}function initializeFormDesignerState(e){const{initialActions:t}=null!=e?e:{}
let n={sections:[],actionMap:new Map}
if(null==t?void 0:t.length)for(const[e,a]of t.entries()){n=h.addSection()(n)
const t=n.sections[0].key
n=h.updateSection(t,{isIterable:!0,sectionType:l.Zz.ITERABLE})(n)
n=h.addAction()(n)
const i=[...n.actionMap.keys()][e]
n=h.selectAction(i,a.action,{lockAction:a.lockAction})(n)
n=h.updateAction(i,{sectionKey:t})(n)
if(a.schema){n=h.selectSchema(i,a.schema,{lockSchema:a.lockSchema})(n)
a.formAction&&(n=h.loadAction(i,a.formAction)(n))}}else{n=h.addSection()(n)
n=h.addAction()(n)
n=h.updateAction([...n.actionMap.keys()][0],{sectionKey:n.sections[0].key})(n)}return n}function areDesignerStatesEqual(e,t){function serialize(e){return{actions:[...e.actionMap.values()].map((e=>({...e,key:null,fields:e.fields.map((e=>({...e,key:e.included?e.key:null})))}))),sections:e.sections.map((e=>{var t
return{...e,description:null!==(t=e.description)&&void 0!==t?t:null}}))}}return e===t||r()(serialize(e),serialize(t))}},863405:(e,t,n)=>{n.d(t,{ZP:()=>FormFixBanner,tP:()=>getFormDefinitionUpdates})
var a=n(769784),i=n(576118),r=n.n(i),s=n(989526),o=n(696376),l=n(238807),c=n(751512),d=n(91092),u=n(697134),m=n(216101),p=n(497790),h=n(383628)
const E=a.Ps`
  query TagSchemaInfoQuery($id: StrictString!) @skipAudit @engComponent(name: FORMS) {
    tagSchema(id: $id) {
      ... on TagSchemaNode {
        id
        name
        registry {
          id
          organization {
            id
            urlIdentifier
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,d.f)("InaccessibleInfo").fragment}
`,S=a.Ps`
  query DropdownInfoQuery($id: StrictString!) @skipAudit @engComponent(name: FORMS) {
    schemaFieldSelector(id: $id) {
      ... on SchemaFieldSelectorNode {
        id
        name
        registry {
          id
          organization {
            id
            urlIdentifier
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,d.f)("InaccessibleInfo").fragment}
`
function convertTagSchemaIdToLink(e){if(!e)return null
const t=s.createElement("span",null,e)
return s.createElement(c.ZP,{query:E,renderLoading:()=>t,variables:{id:e},fetchPolicy:"cache-first"},(({tagSchema:n})=>{if((0,u.CZ)(n))return t
const a=(0,m.getTagSchemaSettingsUrl)(n.registry.organization.urlIdentifier,n.registry.id,e)
return s.createElement("a",{href:a},n.name)}))}function convertDropdownIdToLink(e){if(!e)return null
const t=s.createElement("span",null,e," (dropdown)")
return s.createElement(c.ZP,{query:S,renderLoading:()=>t,variables:{id:e},fetchPolicy:"cache-first"},(({schemaFieldSelector:n})=>{if((0,u.CZ)(n))return t
const a=(0,m.getSchemaFieldSelectorSettingsUrl)(n.registry.organization.urlIdentifier,n.registry.id,e)
return s.createElement(s.Fragment,null,s.createElement("a",{href:a},n.name)," (dropdown)")}))}function fieldTypeToFormFieldType(e){var t
return null!==(t=o.q0[p.FIELD_TYPE_TO_LEAF_TYPE[e]])&&void 0!==t?t:o.EI.BOOLEAN}class FormFixUpdate{constructor(e,t,n){this.updateType=e
this.field=t
this.invocationParam=n}toAnalyticsString(){return this.updateType}toElement(){var e,t,n,a,i,c,d
let u=null!==(t=null===(e=this.field)||void 0===e?void 0:e.label)&&void 0!==t?t:this.invocationParam.name;(null===(n=this.field)||void 0===n?void 0:n.matchesSchemaFieldName)&&this.invocationParam&&(u=this.invocationParam.name)
switch(this.updateType){case l.jU.ADDED_FIELD:return s.createElement("span",null,s.createElement("strong",null,u),this.invocationParam.isRequired?"":" (optional)"," was added.")
case l.jU.ARCHIVED_FIELD:return s.createElement("span",null,s.createElement("strong",null,u)," was archived.")
case l.jU.RENAMED_FIELD:return s.createElement("span",null,s.createElement("strong",null,u)," was renamed from ",this.field.label,".")
case l.jU.CHANGED_FIELD_REQUIRED:{const e=this.field?"":" and added to the form"
return s.createElement("span",null,s.createElement("strong",null,u)," was made required",e,".")}case l.jU.CHANGED_FIELD_TYPE:{r()(this.field&&this.invocationParam)
const e=null!==(i=null!==(a=convertTagSchemaIdToLink(this.field.schemaId))&&void 0!==a?a:convertDropdownIdToLink(this.field.schemaFieldSelectorId))&&void 0!==i?i:(0,o.lN)(this.field.fieldType),t=null!==(d=null!==(c=convertTagSchemaIdToLink(this.invocationParam.linkedSchemaId))&&void 0!==c?c:convertDropdownIdToLink(this.invocationParam.schemaFieldSelectorId))&&void 0!==d?d:(0,o.lN)(fieldTypeToFormFieldType(this.invocationParam.parameterTypeName))
return s.createElement("span",null,s.createElement("strong",null,u)," type changed from ",e," to ",t,".")}default:return s.createElement("span",null,s.createElement("strong",null,u)," was updated.")}}}function calculateFieldDiffs(e,t){var n,a,i,s
if(!t){r()(void 0!==e,"Invocation param and field cannot be null and undefined")
return null==e?[]:[new FormFixUpdate(l.jU.ARCHIVED_FIELD,e,t)]}if(void 0===e)return[new FormFixUpdate(l.jU.ADDED_FIELD,e,t)]
const o=[];(null==e?void 0:e.matchesSchemaFieldName)&&e.label!==t.name&&o.push(new FormFixUpdate(l.jU.RENAMED_FIELD,e,t))
t.isRequired&&!(null==e?void 0:e.isRequired)&&o.push(new FormFixUpdate(l.jU.CHANGED_FIELD_REQUIRED,e,t))
if(e){(null!==(a=null!==(n=e.schemaId)&&void 0!==n?n:e.schemaFieldSelectorId)&&void 0!==a?a:e.fieldType)!==(null!==(s=null!==(i=t.linkedSchemaId)&&void 0!==i?i:t.schemaFieldSelectorId)&&void 0!==s?s:fieldTypeToFormFieldType(t.parameterTypeName))&&o.push(new FormFixUpdate(l.jU.CHANGED_FIELD_TYPE,e,t))}return o}function getFormDefinitionUpdates(e,t,n){var a
const i=new Map(e.map((e=>[e.key,e]))),r=new Map(t.map((e=>[e.actionParameterId,e.formFieldKey?i.get(e.formFieldKey):null]))),s=new Map(n.map((e=>[e.id,e]))),o=[]
for(const[e,t]of s.entries()){const n=r.get(e)
o.push(...calculateFieldDiffs(n,t))
r.delete(e)}for(const[e,t]of r.entries()){const n=null!==(a=s.get(e))&&void 0!==a?a:null
null!=t&&o.push(...calculateFieldDiffs(t,n))}return o}function FormFixBanner({taskSchemaName:e,taskSchemaURL:t,updates:n,onDismiss:a}){const i=1===n.length?"this change":"these changes",r=n.length?s.createElement("span",null,"Changes have been applied to this form due to an update to ",s.createElement("a",{href:t},e),". Save the form to apply ",i," and make the form valid:"):s.createElement("span",null,"This form was marked invalid due to an update to ",s.createElement("a",{href:t},e),". Save the form to acknowledge the schema update and mark the form valid."),o=n.length?s.createElement("ul",{className:"u-no-padding u-no-spacing"},n.map(((e,t)=>s.createElement("li",{key:t},e.toElement())))):void 0
return s.createElement("div",{className:"u-spacing-bottom"},s.createElement(h.ZP,{bannerType:h.ct.WARNING,text:r,supportingInfo:o,onDismiss:a}))}},523171:(e,t,n)=>{n.d(t,{C4:()=>fetchFormActionForSchema,Sx:()=>l,we:()=>o,zW:()=>c})
var a=n(769784),i=n(681896),r=n(91092)
const s=a.Ps`
  fragment FormAction on FormActionNode {
    id
    actionMethodIdentifier
    name
    version
    invocationParameters {
      id
      name
      parameterTypeName
      schemaFieldId
      isRequired
      isMulti
      isSnapshot
      linkedSchemaId
      schemaFieldSelectorId
    }
  }
`,o=a.Ps`
  query InitializeFormDesignerWithFormActionQuery($actionIdentifier: StrictString!, $schemaId: StrictString!)
  @skipAudit
  @engComponent(name: FORMS) {
    processTaskSchemas {
      id
      name
      fields
      allFields
      executionType
      canSetAssigneeOnTaskCreation
    }
    formAction(actionIdentifier: $actionIdentifier, schemaId: $schemaId) {
      ... on FormActionNode {
        ...FormAction
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${s}
  ${(0,r.f)("InaccessibleInfo").fragment}
`,l=a.Ps`
  query FormDesignerProcessTaskSchemasQuery @skipAudit @engComponent(name: FORMS) {
    processTaskSchemas {
      id
      name
    }
  }
`,c=a.Ps`
  query FormActionForSchema($actionIdentifier: StrictString!, $schemaId: StrictString!)
  @skipAudit
  @engComponent(name: FORMS) {
    formAction(actionIdentifier: $actionIdentifier, schemaId: $schemaId) {
      ... on FormActionNode {
        ...FormAction
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${s}
  ${(0,r.f)("InaccessibleInfo").fragment}
`
async function fetchFormActionForSchema(e,t){return(await(0,i.doQuerySafe)({query:c},{variables:{actionIdentifier:e,schemaId:t},fetchPolicy:"cache-first"})).formAction}},760575:(e,t,n)=>{n.d(t,{R:()=>arrayMove})
function arrayMove(e,t,n){const a=[...e],[i]=a.splice(t,1)
a.splice(n,0,i)
return a}},973103:(e,t,n)=>{n.d(t,{g5:()=>convertFormInstanceStateToFormSubmission,ih:()=>initializeFormInstanceState})
var a=n(64558),i=n(232606),r=n(264867),s=n(379112),o=n(696376)
function makeFormInstanceState(e,t){let n={}
for(const a of e){const e=a.key
if("FormSection"===a.type){const i=a
if(i.sectionType===o.Zz.ITERABLE){const a=null==t?void 0:t[e]
n[e]=a?{type:"section",items:a.items.map((e=>makeFormInstanceState(i.content,e)))}:{type:"section",items:[makeFormInstanceState(i.content)]}}else n={...n,...makeFormInstanceState(i.content,t)}}else{const i=a,r=null==t?void 0:t[e],s=formDefinitionFieldToFieldState(i)
n[e]=r?{...s,value:r.value,isValidValue:r.isValidValue}:s}}return n}function initializeFormInstanceState(e,t){return makeFormInstanceState(e.sections,t)}function convertFormInstanceStateToFormSubmission(e){return(0,a.Xc)(e,(e=>{if("field"===e.type){const{label:t,fieldType:n,value:a,isRequired:i}=e
return{label:t,value:a,isRequired:i,fieldType:n.toString()}}{const{items:t}=e
return{items:t.map((e=>convertFormInstanceStateToFormSubmission(e)))}}}))}function formDefinitionFieldToFieldState(e){const{key:t,label:n,description:a,isRequired:l,schemaId:c,schemaFieldSelectorId:d}=e,u=o.n7[e.fieldType];(0,i.hu)(Object.values(r.i0).includes(u),`For now types must be single layer types, not nested. ${u}`)
let m=null
if(u){m=l
u===r.i0.DROPDOWN_OPTION&&(m={schemaFieldSelectorOptionIds:[],value:""})}const p=l?u:new s.vG(u)
return{type:"field",fieldType:p,key:t,label:n,description:a,isRequired:l,schemaId:c,schemaFieldSelectorId:d,value:p===r.i0.DROPDOWN_OPTION?[]:m,isValidValue:!l||u===r.i0.BOOLEAN}}},531559:(e,t,n)=>{n.d(t,{P:()=>s,t:()=>r})
var a=n(769784),i=n(91092)
const r=a.Ps`
  query FormInstanceFileStateQuery($formDefinitionId: StrictString!) @skipAudit @engComponent(name: FORMS) {
    formDefinition(id: $formDefinitionId) {
      ... on FormDefinitionNode {
        id
        name
        instanceUrl
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("InaccessibleInfo").fragment}
`,s=a.Ps`
  query FormInstanceQuery($formDefinitionId: StrictString!) @skipAudit @engComponent(name: FORMS) {
    formDefinition(id: $formDefinitionId) {
      ... on FormDefinitionNode {
        id
        name
        latestFormDefinitionVersion {
          id
          definition {
            sections
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("InaccessibleInfo").fragment}
`},104801:(e,t,n)=>{n.d(t,{Z:()=>getConfig})
var a=n(348920)
function getConfig(e){return a.ZP[e]}},681896:(e,t,n)=>{n.r(t)
n.d(t,{declarativeWriteRESTObjsToApollo:()=>declarativeWriteRESTObjsToApollo,doQuerySafe:()=>doQuerySafe,doQueryWithoutCache:()=>doQueryWithoutCache,isRootFragment:()=>isRootFragment,readFragmentFromCache:()=>readFragmentFromCache,readObjectFieldFromCacheIfPresent:()=>readObjectFieldFromCacheIfPresent,readQuerySafe:()=>readQuerySafe,readRootFragment:()=>readRootFragment,writeFragmentToCache:()=>writeFragmentToCache,writeFragmentsToCache:()=>writeFragmentsToCache,writeQuery:()=>writeQuery,writeRootFragment:()=>writeRootFragment})
var a=n(769784),i=n(64558),r=n(531041),s=n(232606),o=n(91092),l=n(965131),c=n(425703),d=n(18526),u=n(684610),m=n(98858)
function readFragmentFromCache(e,t){if(isRootFragment(e))return readRootFragment(e);(0,s.hu)(null!=t,`Object id required to read non-root fragment ${e.fragmentName}`)
const{fragment:n,fragmentName:a}=e,o=r.default.unique((0,c.Z)(e).map((e=>(0,m.Z)({__typename:e,id:t})))),l=(0,d.W)(),u=(0,i.oA)(o.map((e=>l.readFragment({fragment:n,id:e,fragmentName:a}))));(0,s.Gp)(u.length<=1,`Expected querying Apollo cache with keys ${o} to yield at most one result,got ${u.length} instead.`)
return u[0]||null}function writeFragmentsToCache(e,t){if(isRootFragment(e)){(0,s.Gp)(1===t.length,`Expected only one data object for root fragment ${e.fragmentName}, received ${t.length}`)
writeRootFragment(e,t[0])}else!function writeNonRootFragmentsToCache(e,t){const n=`Hack${e.fragmentName}`;(0,d.W)().writeFragment({fragment:a.Ps`
      fragment ${n} on Query {
        _allNodes @client {
          ... on ${(0,u.Kd)(e.fragment,e.fragmentName)} {
            ...${e.fragmentName}
          }
        }
      }
      ${e.fragment}
    `,data:{__typename:"Query",_allNodes:t},id:"__hack:hack",fragmentName:n})}(e,t)}function writeFragmentToCache(e,t){writeFragmentsToCache(e,[t])}function isRootFragment(e){return"Query"===(0,u.wS)(e.fragment,e.fragmentName).typeCondition.name.value}function getQueryForRootFragment(e){const{fragment:t,fragmentName:n}=e,i=(0,u.wS)(t,n)
return a.Ps`
    query TmpForRootFrag {
      __typename
      ...${i.name.value}
    }
    ${t}
  `}function readRootFragment(e){return readFromCache({query:getQueryForRootFragment(e)},{})}async function doQuerySafe(e,t={}){return(await(0,d.W)().query({query:e.query,...t})).data}function readQuerySafe(e,t={}){return readFromCache(e,t)}function readFromCache(e,t){return(0,d.W)().readQuery({query:e.query,...t})}async function doQueryWithoutCache(e,t={}){return await doQuerySafe(e,{...t,fetchPolicy:"no-cache"})}function writeRootFragment(e,t){(0,d.W)().writeQuery({query:getQueryForRootFragment(e),data:t})}function writeQuery(e,t,n){(0,d.W)().writeQuery({query:e.query,variables:n,data:t})}function readObjectFieldFromCacheIfPresent(e,t,n){if(!function isObjectFieldPresentInCache(e,t){const{cache:n}=(0,d.W)(),a=(0,m.Z)(e),i=n.data.data[a]
return null!=i&&Object.prototype.hasOwnProperty.call(i,t)}(e,t))return null
return readFragmentFromCache(n,e.id)[t]}function declarativeWriteRESTObjsToApollo(e,t){writeFragmentsToCache((0,o.f)(e),(0,l.T2)(e,t))}},161592:(e,t,n)=>{n.d(t,{Fh:()=>getTypenameResolver,Lo:()=>getDefaultTypenameResolver,vH:()=>E})
var a=n(232606),i=n(95537),r=n(572928),s=n(439707),o=n(780188),l=n(379346),c=n(989566),d=n(232431),u=n(664534)
const m="APIIDPrefixToTypename.json5",p="InaccessibleInfoNode"
class BaseTypenameResolver{}class DefaultTypenameResolver extends BaseTypenameResolver{constructor(e){super()
this.apiIDPrefixToTypename=e}maybeGetTypenameFromAPIIDPrefix(e){if("string"!=typeof e)return null
const t=(0,l.XF)(e)
return t?this.apiIDPrefixToTypename[t]:null}getTypenameFromID(e){const t=this.maybeGetTypenameFromAPIIDPrefix(e);(0,a.hu)(null!=t,`Could not compute typename for ID ${e} - consider adding a record to ${m} or adding a ${u.Lh}`)
return t}getTypenameFromObj(e){const t=e.id,n=this.maybeGetTypenameFromAPIIDPrefix(t)
if(n)return n
if((0,i.Eh)(e))return p
throw new Error(`Could not compute typename for restObj with ID ${t} - consider adding a record to ${m} or adding a ${u.Lh}.\n\nREST object: ${JSON.stringify(e)}`)}}const h=(0,c.Z)((()=>{const e=d.Z.mapping,t=e.reduce(((e,{apiIdPrefix:t,__typename:n})=>({...e,[t]:n})),{});(0,a.hu)(Object.keys(t).length===e.length,`Duplicate API ID Prefix in ${m}`)
return t}))
let E=h
function getDefaultTypenameResolver(){return new DefaultTypenameResolver(E())}class ConstantTypenameResolver extends BaseTypenameResolver{constructor(e){super()
this.typename=e}getTypenameFromID(e){return this.typename}getTypenameFromObj(e){return this.typename}}const S={AssaySchemaTypenameResolver:new class AssaySchemaTypenameResolver extends BaseTypenameResolver{getTypenameFromID(e){throw new Error("Cannot infer AssaySchema __typename from just an ID")}getTypenameFromObj(e){return(0,i.Eh)(e)?p:o.eG[e.schemaType]}},AnalyticsParameterConfigTypenameResolver:new class AnalyticsParameterConfigTypenameResolver extends BaseTypenameResolver{getTypenameFromID(e){throw new Error("Cannot infer AnalyticsParameterConfig __typename from just an ID")}getTypenameFromObj(e){return(0,i.Eh)(e)?p:s.dM[e.type]}},ArchiveRecordTypenameResolver:new ConstantTypenameResolver("ArchiveRecordNode"),AssayRecordOriginTypenameResolver:new ConstantTypenameResolver("AssayRecordOriginNode"),AutomationInputFileConfigTypenameResolver:new ConstantTypenameResolver("AutomationInputFileConfigNode"),AutomationOutputFileConfigTypenameResolver:new ConstantTypenameResolver("AutomationOutputFileConfigNode"),AutomationOutputFileDestinationInfoTypenameResolver:new ConstantTypenameResolver("AutomationOutputFileDestinationInfoNode"),AutomationOutputFileResultSchemaInfoTypenameResolver:new ConstantTypenameResolver("AutomationOutputFileResultSchemaInfoNode"),AutomationOutputFileTagSchemaInfoTypenameResolver:new ConstantTypenameResolver("AutomationOutputFileTagSchemaInfoNode"),ComponentLotValuesTypenameResolver:new ConstantTypenameResolver("ComponentLotValuesNode"),ContainerContentTypenameResolver:new ConstantTypenameResolver("ContainerContentNode"),EntryDayTypenameResolver:new ConstantTypenameResolver("EntryDayNode"),FolderTypenameResolver:new ConstantTypenameResolver("FolderNode"),GridCellTypenameResolver:new ConstantTypenameResolver("GridCellNode"),MixtureSchemaConfigurationTypenameResolver:new ConstantTypenameResolver("MixtureSchemaConfigurationNode"),ModifiedNucleotideTypenameResolver:new ConstantTypenameResolver("ModifiedNucleotideNode"),NameTemplateTypenameResolver:new ConstantTypenameResolver("NameTemplateNode"),NameTemplatePartTypenameResolver:new ConstantTypenameResolver("NameTemplatePartNode"),PermissionsTypenameResolver:new ConstantTypenameResolver("PermissionsNode"),ProjectTypenameResolver:new ConstantTypenameResolver("ProjectNode"),RegistryFileNamePartTypenameResolver:new ConstantTypenameResolver("RegistryFileNamePartNode"),RegistryTypenameResolver:new ConstantTypenameResolver("RegistryNode"),RequestSchemaTypenameResolver:new ConstantTypenameResolver("RequestSchemaNode"),ResultBlobTypenameResolver:new ConstantTypenameResolver("ResultBlobNode"),ResultSchemaTypenameResolver:new ConstantTypenameResolver("ResultSchemaNode"),ResultTypenameResolver:new ConstantTypenameResolver("ResultNode"),ReviewLifecycleVersionResolver:new ConstantTypenameResolver("ReviewLifecycleVersionNode"),RunSchemaTypenameResolver:new ConstantTypenameResolver("RunSchemaNode"),RunTypenameResolver:new ConstantTypenameResolver("RunNode"),SampleRolesTypenameResolver:new ConstantTypenameResolver("SampleRolesNode"),SchemaInterfaceTypenameResolver:new ConstantTypenameResolver("SchemaInterfaceNode"),SourceTypenameResolver:new class SourceTypenameResolver extends BaseTypenameResolver{getTypenameFromID(e){throw new Error("Cannot infer Source __typename from just an ID")}getTypenameFromObj(e){if((0,i.Eh)(e))return p
const t=e.sourceType;(0,a.Gp)([r.PROJECT_TYPE,r.REGISTRY_TYPE].includes(t),`SourceTypenameResolver: Unexpected sourceType ${t}`)
return t===r.PROJECT_TYPE?"ProjectNode":"RegistryNode"}},TagSchemaConstraintTypenameResolver:new ConstantTypenameResolver("TagSchemaConstraintNode"),TagSchemaNodeTypenameResolver:new ConstantTypenameResolver("TagSchemaNode"),TagSchemaValidationErrorLabelSummaryTypenameResolver:new ConstantTypenameResolver("TagSchemaValidationErrorLabelSummaryNode"),TagSchemaValidationStatusSummaryTypenameResolver:new ConstantTypenameResolver("TagSchemaValidationStatusSummaryNode"),UserTypenameResolver:new ConstantTypenameResolver("UserNode"),QueryTypenameResolver:new ConstantTypenameResolver("Query")}
function getTypenameResolver(e){var t;(0,a.hu)(null==e||S.hasOwnProperty(e),`Expected to find typename resolver ${e} in KEY_TO_TYPENAME_RESOLVER`)
return null!==(t=S[e])&&void 0!==t?t:getDefaultTypenameResolver()}},664534:(e,t,n)=>{n.d(t,{E$:()=>RESTSelectionSet,Lh:()=>E,sj:()=>GraphQLSelectionSet})
var a=n(531041),i=n(232606),r=n(377979),s=n(335609),o=n(958826)
const l="graphQLName",c="fieldTranslator",d="fieldResolver",u="fields",m="spreads",p="unions",h="restOnlyFields",E="typenameResolver",S="excludeCondition",T="graphQLOnlyFields"
class HasAsymmetricFieldResolver{constructor(e,t){this.fieldName=e
this.asymmetricFieldResolver=t}getAsymmetricFieldResolver(){(0,i.hu)(null!=this.asymmetricFieldResolver,`Expected to find fieldResolver option specified for field ${this.fieldName}`)
const e=o.Y[this.asymmetricFieldResolver];(0,i.hu)(null!=e,`Expected to find fieldResolver key='${this.asymmetricFieldResolver}' in CUSTOM_RESOLVER_BY_KEY for field=${this.fieldName}`)
return e}resolveValue(e){return this.getAsymmetricFieldResolver().getValue(e)}}class GraphQLTargetField extends HasAsymmetricFieldResolver{}class RESTField extends HasAsymmetricFieldResolver{constructor(e,t,n,a,i,r,s,o){super(e,r)
this.selectionSet=t
this.customGraphQLName=n
this.typenameResolverName=a
this.customFieldTranslator=i
this.asymmetricFieldResolver=r
this.excludeCondition=s
this.declarativeTranslationsMapping=o}getExcludeCondition(){return this.excludeCondition&&r.V[this.excludeCondition]?r.V[this.excludeCondition]:null}static validateRESTField(e,t){const n=[l,c,d,u,m,p,h,E,S],a=Object.keys(t).filter((e=>!n.includes(e)));(0,i.hu)(!a.length,`Unexpected option(s) for field "${e}": ${a.join(", ")}`)}static createFromJSONField(e,t,n){var i,r,o,l,c
this.validateRESTField(e,t)
const d=(0,s.Z)(t,u,m,p,h)
Object.keys(d).length&&null!=t[E]&&(d[E]=t[E])
return new RESTField(e,a.default.isEmpty(d)?null:RESTSelectionSet.parse(d,n),null!==(i=t.graphQLName)&&void 0!==i?i:null,null!==(r=t[E])&&void 0!==r?r:null,null!==(o=t.fieldTranslator)&&void 0!==o?o:null,null!==(l=t.fieldResolver)&&void 0!==l?l:null,null!==(c=t.excludeCondition)&&void 0!==c?c:null,null!=n?n:null)}}class RESTSelectionSet{constructor(e,t,n,a,i,r,s){this.fieldsByName=e
this.typenameResolverName=t
this.restOnlyFieldsByName=n
this.graphQLOnlyFieldsByName=a
this.declarationSpreads=i
this.declarationUnions=r
this.declarativeTranslationsMapping=s}static validateRESTObj(e){(0,i.hu)(a.default.isObject(e),"Malformed REST JSON - should be an object")
const t=[u,m,p];(0,i.hu)(t.some((t=>null!=e[t])),`Expected one of the following top level keys: ${t.map((e=>`'${e}'`)).join(", ")} - found keys ${Object.keys(e)}`)
const n=[u,m,p,h,T,E],r=Object.keys(e).filter((e=>!n.includes(e)));(0,i.hu)(0===r.length,`Unexpected option(s) in selection set: ${r}`)}static parse(e,t){var n,i,r,s,o,l
this.validateRESTObj(e)
const c=a.default.mapObject(null!==(n=e.fields)&&void 0!==n?n:{},((e,n)=>RESTField.createFromJSONField(n,e,t))),d=a.default.mapObject(null!==(i=e.restOnlyFields)&&void 0!==i?i:{},((e,n)=>RESTField.createFromJSONField(n,e,t))),u=a.default.mapObject(null!==(r=e.graphQLOnlyFields)&&void 0!==r?r:{},((e,t)=>new GraphQLTargetField(t,e.fieldResolver))),m=a.default.mapObject(null!==(s=e.spreads)&&void 0!==s?s:{},((e,n)=>RESTSelectionSet.parse(t.getRESTDeclaration(n),t))),p=a.default.mapObject(null!==(o=e.unions)&&void 0!==o?o:{},(e=>RESTSelectionSet.parse(e,t)))
return new RESTSelectionSet(c,null!==(l=e[E])&&void 0!==l?l:null,d,u,m,p,t)}}function ofType(e,t){return e.flatMap((e=>e.kind===t?[e]:[]))}class GraphQLSelectionSet{constructor(e,t,n,a,i){this.typename=e
this.fieldsByName=t
this.fragmentSpreads=n
this.inlineFragments=a
this.declarativeTranslationsMapping=i}getSpreadByDeclarationName(e){return this.fragmentSpreads[`${e}GraphQL`]}static validate(e){const t=ofType(e.selectionSet.selections,"Field").filter((e=>null!=e.alias)).map((e=>e.alias));(0,i.hu)(0===t.length,"GraphQL aliases are currently unsupported.")}static create(e,t){this.validate(e)
const n="FragmentDefinition"===e.kind?e.typeCondition.name.value:null,i=e.selectionSet.selections,r=a.default.object(ofType(i,"FragmentSpread").map((e=>[e.name.value,GraphQLSelectionSet.create(t.getParsedGraphQLFragmentFromName(e.name.value),t)]))),s=a.default.object(ofType(i,"InlineFragment").map((e=>{var n
return[null===(n=e.typeCondition)||void 0===n?void 0:n.name.value,GraphQLSelectionSet.create(e,t)]})))
return new GraphQLSelectionSet(n,a.default.indexBy(ofType(i,"Field"),(e=>e.name.value)),r,s,t)}}},619223:(e,t,n)=>{n.d(t,{Z:()=>notifyGenericGraphQLError})
var a=n(826478),i=n(974913),r=n(150126)
function notifyGenericGraphQLError(e){i.ZP.error(null!=e?e:r.F,{id:"graphql-generic-error",duration:a.NA})}},712315:(e,t,n)=>{n.d(t,{Z:()=>HelpToolTip})
var a=n(989526),i=n(868710),r=n(666571)
function HelpToolTip({container:e="body",className:t,text:n}){return a.createElement(i.ZP,{title:n,container:e},a.createElement(r.Z,{className:t}))}},755383:(e,t,n)=>{n.d(t,{B:()=>showPublicHelp,Dm:()=>showGoldenGateOverhangHelp,_8:()=>showBasicHelpModal})
var a=n(989526),i=n(334148),r=n(629656),s=n(205986)
const o="BASIC_HELP_MODAL_KEY"
class BasicHelpModal extends a.Component{static open({title:e,msg:t}){r.bA(o,a.createElement(BasicHelpModal,{title:e,onRequestClose:function(){r.xv(o)}},t))}render(){return a.createElement(s.ZP,{enableRedesign:!0,title:this.props.title,onRequestClose:this.props.onRequestClose,buttons:[{text:"OK",cancel:!0,style:i.ZJ.PRIMARY}]},this.props.children)}}function showBasicHelpModal(e,t,n){e.preventDefault()
BasicHelpModal.open({title:t,msg:n})}function showPublicHelp(e){showBasicHelpModal(e,"Folder Privacy",a.createElement("div",null,a.createElement("p",null,"Files in ",a.createElement("strong",null,"private")," projects are not viewable or editable by anyone unless   you add them as collaborators in the project's settings."),a.createElement("p",null,"Files in ",a.createElement("strong",null,"public")," projects are viewable by anyone, including users that are   not signed into Benchling. They are only editable by users you add as collaborators.")))}function showGoldenGateOverhangHelp(e){showBasicHelpModal(e,"Golden Gate Overhangs",a.createElement("div",null,a.createElement("p",null,"For all overhangs that can interact during assembly, we check if any of the following problems are present:"),a.createElement("ul",null,a.createElement("li",null,"Are any overhangs exactly the same?"),a.createElement("li",null,"Do any overhangs share three consecutive bases that are the same (e.g. ",a.createElement("b",null,"CAG"),"T and A",a.createElement("b",null,"CAG"),")?"),a.createElement("li",null,"Do any overhangs differ in only one base pair (e.g. T",a.createElement("b",null,"A"),"AG and T",a.createElement("b",null,"T"),"AG)?")),a.createElement("p",null,"We additionally check that each overhang doesn't have GC content of 0% or 100%."),a.createElement("p",null,"When generating overhangs for fragments linearized by PCR, we attempt to find overhangs that allow the assembly to pass all of the above rules, although successful assemblies can occur even with overhangs differing by only one base pair.")))}},902323:(e,t,n)=>{n.d(t,{Qp:()=>l,To:()=>a,ch:()=>d,mU:()=>c,mu:()=>s,zl:()=>o})
var a,i=n(333792),r=n(161540)
!function(e){e.BROAD_SET_INSTITUTION_MODAL_KEY="BROAD_SET_INSTITUTION"
e.BROAD_GOOGLE_AUTH_MODAL_KEY="BROAD_GOOGLE_AUTH"
e.LICENSED_INSTITUTION_MODAL_KEY="LICENSED_INSTITUTION_MODAL"}(a||(a={}))
const s="BROAD_SETTINGS_MODAL",o="broad",l={DISMISSED_BROAD_INSTITUTION_MODAL:`dismissed_${o}_institution_modal`},c={broad:r.Q$},d=i.c},333792:(e,t,n)=>{n.d(t,{B:()=>LicensedInstitutionTermsModal,c:()=>LicensedInstitutionInfoLink})
var a=n(989526),i=n(465428),r=n(902323),s=n(788836),o=n(629656),l=n(205986)
async function dismissModal(e){await i.zz(s.Z.currentUserId)
o.xv(r.To.LICENSED_INSTITUTION_MODAL_KEY)}function LicensedInstitutionBasicModalInfo({institution:e}){return a.createElement("div",null,a.createElement("p",null,e.fullName," has partnered with Benchling to provide a more"," ",a.createElement("strong",null,"integrated, secure experience")," for all of its scientists."),a.createElement("p",null,"Benchling accounts with verified ",e.shortName," email addresses, like yours, gain a number of benefits and meet the security and backup requirements of ",e.fullName,". In order to meet these requirements, your account may also have additional terms and conditions required by"," ",e.fullName,", and you should contact your ",e.fullName," administrator to understand what additional terms may apply."),a.createElement("p",null,"Here's what's new for your Benchling account:"),a.createElement("ul",null,e.hasUnlimitedSpace&&a.createElement("li",null,"You have been granted ",a.createElement("strong",null,"unlimited space"),"."),e.grantsElnDesktopSync&&a.createElement("li",null,"You get access to ",a.createElement("strong",null,"Benchling Sync"),", a feature that allows you to open a file attachment in its desktop application and automatically syncs edits to your Notebook."),a.createElement("li",null,"Your projects will ",a.createElement("strong",null,"automatically be backed up")," to ",e.shortName," servers on a weekly basis, eliminating the need for periodic data exports."),a.createElement("li",null,"You will log in directly and seamlessly through ",a.createElement("strong",null,"Single Sign-On"),"."),a.createElement("li",null,e.fullName," will periodically receive information about your account  your email address, organizations, and activity  to ensure the quality of your Benchling experience.")))}function LicensedInstitutionModal({institution:e,buttons:t,onClose:n,blockDismiss:i}){return a.createElement(l.ZP,{enableRedesign:!0,title:`${e.fullName}: Your Licensed Institution`,buttons:t,onRequestClose:n,closeable:!i,closeableOnBackgroundClick:!i,closeableOnEscapeKey:!i},a.createElement(LicensedInstitutionBasicModalInfo,{institution:e}))}function LicensedInstitutionTermsModal(){const e=function getInstitution(){return s.Z.currentUser().institution}()
return a.createElement(LicensedInstitutionModal,{institution:e,onClose:()=>{dismissModal()},blockDismiss:!0,buttons:[{text:"OK",style:"default",onClick:()=>{dismissModal()}}]})}function LicensedInstitutionInfoLink({institution:e}){return a.createElement("div",null,a.createElement("p",null,"As a member of ",a.createElement("strong",null,e.fullName),", you have special"," ",a.createElement("a",{onClick:()=>o.bA(r.To.LICENSED_INSTITUTION_MODAL_KEY,a.createElement(LicensedInstitutionModal,{institution:e,buttons:[],onClose:()=>{o.xv(r.To.LICENSED_INSTITUTION_MODAL_KEY)}}))},"product, security, and privacy features")," ","enabled on your account."))}},579807:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(787004),i=n(171635),r=n(947730)
const s={fetchReviewSummary(){r.Z.dispatch({actionType:a.jfE})
i.Z.fetchReviewSummary().done((e=>{r.Z.dispatch({actionType:a.HvC,reviewSummary:e})})).fail((e=>{r.Z.dispatch({actionType:a.i5s,error:e})}))},openSearchOrgModal(){r.Z.dispatch({actionType:a.Uzb})},closeSearchOrgModal(){r.Z.dispatch({actionType:a.lDM})},closeCRISPRModal(){r.Z.dispatch({actionType:a.FKD})}}},781995:(e,t,n)=>{n.d(t,{Z:()=>h})
var a=n(767807),i=n.n(a),r=n(232606),s=n(348920),o=n(675649),l=n(787004),c=n(947730),d=n(391028),u=n(422199),m=n(645968),p=n(432128)
function collapsedPreferenceKey(e){return`onboarding.minimized_nue_${e}_module`}class HomeDashboardStore extends d.Z{static initClass(){this.prototype.CRISPR_MODAL_KEY="CRISPRModal"
this.prototype.SEARCH_ORGANIZATION_MODAL_KEY="SearchOrganizationModal"}resetState(){this.reviewSummary=null
this.nueModules=null
this.hasGettingStartedSpace=null
this.openModal=null
this.searchOrgModalState=this.defaultSearchOrgModalState()
this._orgSearchTime=null}getState(){return{reviewSummary:this.reviewSummary,extraSpaceTasks:this.extraSpaceTasks,searchOrgModalState:this.searchOrgModalState,openModal:this.openModal}}getNUEModules(){return this.nueModules}getNUEModuleState(e){return null!=this.nueModules&&s.ZP.ENABLE_NUE_MODULES?this.nueModules[e]:null}getReviewSummary(){return this.reviewSummary}getHasGettingStartedSpace(){return this.hasGettingStartedSpace}defaultSearchOrgModalState(){return{searchResults:[]}}updateCollapsed(e,t){this.nueModules=i()(this.nueModules,(0,o.kv)(e,{$merge:{collapsed:t}}))
p.Z.set(collapsedPreferenceKey(e),t)}payloadHandler(e){var t,n,a
switch(e.actionType){case l.HvC:this.reviewSummary=e.reviewSummary
this.emitChange()
break
case l.HVn:this.nueModules=i()(this.nueModules,(0,o.kv)(e.module,{$merge:{acknowledgedCompleted:!0}}))
this.emitChange()
break
case l.C3_:this.nueModules=i()(this.nueModules,(0,o.kv)(e.module,{$merge:{dismissed:!0}}))
m.aj[e.module]&&u.Z.json.setItem(m.aj[e.module],!0)
this.emitChange()
break
case l.pdk:this.nueModules=i()(this.nueModules,(0,o.kv)(e.module,{$merge:{dismissed:!1}}))
m.aj[e.module]&&u.Z.json.setItem(m.aj[e.module],!1)
this.emitChange()
break
case l.aUc:{const{modules:a,hasSpace:s}=e.gettingStarted
let o
this.hasGettingStartedSpace=s
null==this.nueModules&&(this.nueModules={})
const l={}
if(a)for(const e of Object.keys(a)){if(null==this.nueModules[e]){o=a[e].tasks.findIndex((({completed:e})=>!e))
if(-1===o){(0,r.Gp)(a[e].completed,"Module was not completed, but all tasks were completed.")
o=null}else o+=1}else o=null
const s=null!==(t=this.nueModules[e])&&void 0!==t?t:{collapsed:null!==(n=p.Z.get(collapsedPreferenceKey(e)))&&void 0!==n&&n,openIndex:o,acknowledgedCompleted:a[e].completed,dismissed:u.Z.json.getItem(m.aj[e]),tasks:null},c=i()(s,{$merge:a[e]})
l[e]={$set:c}}this.nueModules=i()(this.nueModules,l)
this.emitChange()
break}case l.nvv:this.updateCollapsed(e.module,e.collapsed)
this.emitChange()
break
case l.UR7:{if(null==this.nueModules)return!1
const{module:t,key:n}=e,a=this.nueModules[t].tasks.findIndex((e=>e.key===n));(0,r.hu)(a>=0,`Invalid onboarding task, with module=${t} and key=${n}`)
const s={$merge:{completed:!0}},l={tasks:(0,o.kv)(a,s)}
this.nueModules=i()(this.nueModules,(0,o.kv)(t,l))
const c=this.nueModules[t].tasks
c.every((({completed:e})=>e))&&(this.nueModules=i()(this.nueModules,(0,o.kv)(t,{$merge:{completed:!0,openIndex:c.length}})))
this.emitChange()
break}case l.NtZ:{const{module:t,openIndex:n}=e
this.nueModules=i()(this.nueModules,(0,o.kv)(t,{$merge:{openIndex:n}}))
null!=n&&(null===(a=this.nueModules[t])||void 0===a?void 0:a.collapsed)&&this.updateCollapsed(t,!1)
this.emitChange()
break}case l.O9b:this.extraSpaceTasks=e.extraSpaceTasks
this.emitChange()
break
case l.Uzb:this.openModal=this.SEARCH_ORGANIZATION_MODAL_KEY
this.emitChange()
break
case l.lDM:case l.FKD:this.openModal=null
this.emitChange()
break
case l.KVX:this.searchOrgModalState=this.defaultSearchOrgModalState()
this.emitChange()
break
case l.Yl5:{const{results:t,searchTime:n}=e
if(null==this._orgSearchTime||this._orgSearchTime<n){this.searchOrgModalState=i()(this.searchOrgModalState,{searchResults:{$set:t}})
this._orgSearchTime=n}this.emitChange()
break}case l.KgX:this.searchOrgModalState=i()(this.searchOrgModalState,{searchResults:{$set:[]}})
this.emitChange()}return!0}}HomeDashboardStore.initClass()
const h=new HomeDashboardStore(c.Z)},677677:(e,t,n)=>{n.d(t,{J_:()=>getLocaleName,Vk:()=>ControlledLanguagePickerInput,b1:()=>UncontrolledLanguagePickerInput})
var a=n(250965),i=n.n(a),r=n(989526),s=n(782279),o=n(531041),l=n(348920),c=n(613118),d=n(954240),u=n(50585),m=n(865486),p=n(472347),h=n(10584),E=n(822314),S=n(640888),T=n(870632),g=n(888162)
function getLocaleName(e){return T.A[function stringToBenchlingLocale(e){return T.D[e.replace("-","_").toUpperCase()]}(e)]}function getSupportedLanguageTags(){return Object.keys(T.A).flatMap((e=>l.ZP.NAV_ENABLE_CUSTOM_LOCALES&&c.x$.hasOwnProperty(e)||function isLanguageSupportedByBrowser(e){try{return 0!==Intl.DateTimeFormat.supportedLocalesOf([e],{localeMatcher:"lookup"}).length}catch(e){return!1}}(e)?{code:e,name:getLocaleName(e)}:[]))}function getDatePreview(e,t){return h.UT(e,{languageTag:t.id,showYear:!0,showDate:!0,showTime:!0,showWeekday:!0})}function dateValueToDisplayString(e){return e.toString().padStart(2,"0")}const f=" | "
function formatDisplayNumberWithLanguageTag(e){e=null!=g[e]?e:c.qZ.code
return(0,S.Y)(Number(c.fI),g[e],!0)}function formatSelectionWithNumberAndLocaleDate(e,t){const n=getDatePreview(t,e)
return[formatDisplayNumberWithLanguageTag(e.id),n].join(f)}const I=(0,E.Z)((function formatSelectionWithNameNumberAndShortDate(e,t){const n=function _getShortDatePreview(e,t){const n=dateValueToDisplayString(e.getMonth()+1),a=dateValueToDisplayString(e.getDate()),i=e.getFullYear()
return h.fG(t)?`${n}/${a}/${i}`:`${a}/${n}/${i}`}(t,e.code),a=formatDisplayNumberWithLanguageTag(e.code)
return[e.name,a,n].join(f)}),{max:200},((e,t)=>`${e.code};${e.name};${t}`))
function UncontrolledLanguagePickerInput(e){const t=getSupportedLanguageTags().map((e=>({id:e.code,text:e.name})))
return r.createElement("div",{className:"u-small-spacing-bottom"},r.createElement(u.Z,{options:t,name:e.name,placeholder:"Select language",initSelection:(n,a)=>{e.defaultValue&&a(t.find((t=>t.id===e.defaultValue))||{id:e.defaultValue,text:`Unknown (${o.default.escape(e.defaultValue)})`})},defaultValue:e.defaultValue,formatSelection:t=>l.ZP.ELN_ENABLE_LOCALE_AWARE_PARSING_FOR_COPY_PASTE?function formatSelectionWithNameNumberAndLocaleDate(e,t){const n=formatSelectionWithNumberAndLocaleDate(e,t)
return[e.text,n].join(f)}(t,e.date):`${t.text} / ${getDatePreview(e.date,t)}`,formatResult:function _formatResult(t,n,a,o){const c=i().fn.select2.defaults.formatResult(t,n,a,o)
return s.renderToStaticMarkup(r.createElement("div",null,r.createElement("div",{dangerouslySetInnerHTML:{__html:c}}),r.createElement("div",{className:"faded"},l.ZP.ELN_ENABLE_LOCALE_AWARE_PARSING_FOR_COPY_PASTE?formatSelectionWithNumberAndLocaleDate(t,e.date):getDatePreview(e.date,t))))}}))}function getLanguageTagFromLanguageTagCode(e,t){return null!=e[t]?{code:t,name:e[t]}:c.qZ}function ControlledLanguagePickerInput(e){const t=Object.fromEntries(getSupportedLanguageTags().map((e=>[e.code,e.name])))
return r.createElement("div",{className:"u-small-spacing-bottom"},r.createElement(d.ZP,{displayName:I(getLanguageTagFromLanguageTagCode(t,e.languageTag),e.date),menu:r.createElement(p.Z,{selectedValue:e.languageTag,onSelect:e.onSelect,optionDatas:Object.entries(t).map((([t,n])=>({name:I({code:t,name:n},e.date),value:t}))),height:m.ZP.HEIGHTS.MEDIUM,width:m.ZP.WIDTHS.FULL}),dataTestAttrs:{component:"ControlledLanguagePickerInput",element:"root"}}))}},45285:(e,t,n)=>{n.d(t,{B:()=>a})
var a
!function(e){e.PRIVATE="private"
e.ENSEMBL="ensembl"
e.ADDGENE="addgene"
e.JBEIR="jbeir"
e.NCBI="ncbi"
e.PARTS_REGISTRY="partsregistry"}(a||(a={}))},241581:(e,t,n)=>{n.d(t,{Z:()=>C})
var a=n(989526),i=n(468943),r=n(348920),s=n(955836),o=n(171471),l=n(467607),c=n(699418),d=n(390462),u=n(427478),m=n(5245),p=n(368734),h=n(389760),E=n(87209),S=n(205986),T=n(745826),g=n(693049),f=n(980872),I=n(555598),A=n(233363),y=n(702608),_=n(250965)
const C=function ImportSequenceModal({initialFiles:e=[],openImportResults:t=!0,targetFolderId:n,onRequestClose:C,initialTab:R=u._p.FILE}){const[N,O]=(0,a.useState)(R),b=(0,a.useMemo)((()=>{var e
return null!==(e=null!=n?n:d.Z.get(d.O.INVENTORY))&&void 0!==e?e:void 0}),[n]),v=(0,a.useRef)(null),[P,L]=(0,a.useState)([]),D={folderId:b,nucleotideType:s.Wy.DNA,tagSchemaId:void 0,topology:l.JH.CIRCULAR},[M,w]=(0,a.useState)(D),[F,k]=(0,a.useState)({chromosomeCoords:[]}),[U,x]=(0,a.useState)({name:"Untitled sequence",bases:""});(0,h.Z)((()=>function cleanup(){null!=v.current&&v.current.remove()}));(0,a.useEffect)((()=>{if(R===u._p.FILE){null==v.current&&(v.current=new A.ZP({closeModal:C,targetFolderId:b}))
v.current.addFiles(e)}}),[e,R,C,b]);(0,a.useLayoutEffect)((()=>{if(N===u._p.FILE){null!=v.current&&v.current.remove()
v.current=new A.ZP({closeModal:C,targetFolderId:b,...null!=v.current&&{uploadFiles:v.current.uploadFiles}})
v.current.render()}}),[N,C,b])
const handleOnRequestClose=()=>{C()
if(!t)return
const e=v.current?v.current.firstUploadedFile():null
if(null!=e){E.$Z()
c.ZP.get().openFolderItem(e.get("id")).always((()=>{E.Cp()}))}}
return a.createElement(S.ZP,{enableRedesign:!0,title:"Create DNA / RNA sequence",showHeaderBorder:!1,large:!0,wrapInForm:!1,onRequestClose:handleOnRequestClose,buttons:[{text:"Close",cancel:!0},...(()=>{switch(N){case u._p.DB:{const e=P.filter((({importOptions:e})=>e.isSelected))
return[{text:"Import",submit:!0,onClick:()=>{(0,y.lf)(P,M,handleOnRequestClose)},disabled:0===e.length||null==M.folderId||e.some((({importOptions:e})=>{var t
return 0===e.name.length&&(null===(t=e.accession.transcriptIds)||void 0===t?void 0:t.length)<2})),dataTestAttrs:{component:"DBImportSequence",element:"button",key:p.Z.IMPORT}}]}case u._p.CHROMOSOME:return[{text:"Import",submit:!0,onClick:()=>{(0,y.g1)(F,M,handleOnRequestClose)},disabled:null==M.folderId}]
case u._p.RAW:return[{text:"Create",submit:!0,onClick:()=>{(0,y.Nt)(M,U,handleOnRequestClose);(0,m.aP)(`${M.nucleotideType} sequence`)},disabled:null==M.folderId||0===U.name.length,dataTestAttrs:{component:"ImportSequenceView",element:"createButton"}}]
default:return[]}})()],dataTestAttrs:{component:"ImportSequenceModal",element:"root"}},a.createElement(T.Xl,{activeTab:N,onRequestTabChange:e=>{e!==u._p.FILE&&_("#import").empty()
O(e)
w({...D,folderId:M.folderId})
i.j("sequence","import_tab_click",{product:o.XC.MOLBIO,importFlow:e})}},a.createElement(T.OK,{tabKey:u._p.RAW,title:"Create New"},a.createElement("div",{className:"tab-pane u-spacing-top"},a.createElement(f.Z,{rawImportData:U,setRawImportData:x,sequenceImportOptions:M,setSequenceImportOptions:w}))),a.createElement(T.OK,{tabKey:u._p.FILE,title:"Upload Files"},a.createElement("div",{id:"import",className:"tab-pane u-spacing-top"})),a.createElement(T.OK,{tabKey:u._p.DB,title:"Import from Database"},a.createElement(I.Z,{queryResults:P,setQueryResults:L,sequenceImportOptions:M,setSequenceImportOptions:w})),r.ZP.ENABLE_CRISPR&&a.createElement(T.OK,{tabKey:u._p.CHROMOSOME,title:"Select Chromosomal Region"},a.createElement(g.ZP,{sequenceImportOptions:M,setSequenceImportOptions:w,chromosomalCoords:F.chromosomeCoords,setChromosomalCoords:e=>{k({...F,chromosomeCoords:e})},genome:F.genome,setGenome:e=>{k({...F,genome:e})}}))))}},537623:(e,t,n)=>{n.d(t,{$$:()=>a,$M:()=>r,AL:()=>m,C5:()=>o,FX:()=>h,J_:()=>p,Si:()=>s,ZB:()=>d,gd:()=>i,lZ:()=>u,mR:()=>l,vm:()=>c})
const a={PROJECT_ID:"externalAnalytics.projectId"},i=205,r=400,s="77vh",o=500,l=12,c=550,d=r+50,u="https://help.benchling.com/hc/sections/8506377929869",m=100,p=`Dashboards support up to ${m} blocks. Please remove blocks or create a new dashboard.`,h="Running query..."},89682:(e,t,n)=>{n.d(t,{c:()=>a})
const a="Insights"},76213:(e,t,n)=>{n.d(t,{Aq:()=>AnalyticsDashboardActions_cloneAnalyticsDashboard,dk:()=>AnalyticsDashboardActions_createAnalyticsDashboard,v1:()=>AnalyticsDashboardActions_deleteAnalyticsDashboard,wP:()=>AnalyticsDashboardActions_starAnalyticsDashboards,YT:()=>AnalyticsDashboardActions_unstarAnalyticsDashboards,Kt:()=>AnalyticsDashboardActions_updateAnalyticsDashboard})
var a=n(468943),i=n(232606),r=n(171471),s=n(681896),o=n(949357),l=n(909428),c=n(139574),d=n(138966),u=n(771398)
var m=n(174441)
function writeToCache(e){const t=(0,m.wo)(e);(0,s.writeFragmentsToCache)(m.en,[t])}async function AnalyticsDashboardActions_createAnalyticsDashboard(e){const t=await function createAnalyticsDashboard(e){return u.s0({url:"/1/api/analytics-dashboards",data:e})}(e)
!function handleDashboardCreated(e){writeToCache(e);(0,c.i)();(0,d.ZP)(e.url);(0,a.KK)(r.JG.CREATED_DASHBOARD,{dashboard_id:e.id,project_id:e.projectId})}(t)
return t}async function AnalyticsDashboardActions_updateAnalyticsDashboard(e,t){!function checkSpecRequestParameterNames(e,t){const n=(0,l.Z)(t.analyticsQueries.map((e=>e.sqlQuery))),a=t.parameterConfigs.map((e=>e.systemName));(0,i.Gp)(n.length===a.length&&n.every((e=>a.includes(e))),"Expected parameter names in dashboard's request to be equal in parameter configs and sql query contents(BNCH-12266)",{analyticsDashboardId:e,parameterNamesInConfigs:a,parameterNamesInSQLQuery:n})}(e,t)
const n=await function updateAnalyticsDashboard(e,t){return u.Ry({url:`/1/api/analytics-dashboards/${e}`,data:t})}(e,t)
writeToCache(n)
await(0,o.F)(e)
return n}async function AnalyticsDashboardActions_deleteAnalyticsDashboard(e){await function deleteAnalyticsDashboard(e){return u.WY({url:`/1/api/analytics-dashboards/${e}`})}(e);(0,c.i)()}async function AnalyticsDashboardActions_cloneAnalyticsDashboard(e,t){const n=await function cloneAnalyticsDashboard(e,t){return u.s0({url:`/1/api/analytics-dashboards/${e}:clone`,data:t})}(e,t);(0,c.i)()
return n}async function AnalyticsDashboardActions_starAnalyticsDashboards(e){await function starAnalyticsDashboards(e){return u.s0({url:"/1/api/analytics-dashboards:star",data:{analyticsDashboardIds:e}})}(e);(0,c.i)()}async function AnalyticsDashboardActions_unstarAnalyticsDashboards(e){await function unstarAnalyticsDashboards(e){return u.s0({url:"/1/api/analytics-dashboards:unstar",data:{analyticsDashboardIds:e}})}(e);(0,c.i)()}},174441:(e,t,n)=>{n.d(t,{en:()=>p,mI:()=>convertGQLToRESTAnalyticsDashboard,wo:()=>convertRESTToGQLAnalyticsDashboard})
var a=n(769784),i=n(91092),r=n(965131),s=n(337195)
const o=a.Ps`
  fragment GraphQLLayoutRowSpec on AnalyticsDashboardLayoutRowNode {
    analyticsQueries {
      id
    }
  }
`
var l=n(701086),c=n(782353),d=n(439707),u=n(38317),m=n(335609)
const p={fragment:a.Ps`
  fragment GraphQLAnalyticsDashboardSpec on AnalyticsDashboardNode {
    id
    analyticsQueries {
      ...GraphQLAnalyticsQuerySpec
    }
    description
    name
    modifiedAt
    layoutRows {
      ...GraphQLLayoutRowSpec
    }
    parameterConfigs {
      ...AnalyticsParameterConfigGraphQL
    }
    parameterValues {
      ...AnalyticsParameterValue
    }
    permissions {
      admin
      appendable
      deletable
      movable
      readable
      readable
      writable
    }
    project {
      id
    }
    url
  }

  ${(0,i.f)("AnalyticsParameterConfig").fragment}
  ${d.id.fragment}
  ${s.yG.fragment}
  ${o}
`,fragmentName:"GraphQLAnalyticsDashboardSpec"}
function convertGQLToRESTAnalyticsDashboard(e){const{analyticsQueries:t,layoutRows:n,modifiedAt:a,parameterConfigs:i,parameterValues:o,project:c}=e
return{...(0,m.Z)(e,"id","description","name","url"),analyticsQueries:t.map((e=>(0,s.nQ)(e))),modifiedAt:a,layoutRows:n.map((e=>function convertGQLToRESTLayoutRow(e){return{analyticsQueryIds:e.analyticsQueries.map((e=>e.id))}}(e))),parameterConfigs:(0,r.NA)("AnalyticsParameterConfig",i),parameterValues:o.map((e=>(0,l.L)(e))),projectId:c.id,permissions:{...(0,u.Z)(e.permissions,"__typename"),movable:Boolean(e.permissions.movable),deletable:Boolean(e.permissions.deletable)}}}function convertRESTToGQLAnalyticsDashboard(e){const{analyticsQueries:t,modifiedAt:n,layoutRows:a,parameterConfigs:i,parameterValues:o,projectId:d,permissions:u}=e
return{__typename:"AnalyticsDashboardNode",...(0,m.Z)(e,"id","description","name","url"),analyticsQueries:t.map((e=>(0,s.pM)(e))),layoutRows:a.map((e=>function convertRESTToGQLLayoutRow(e){return{__typename:"AnalyticsDashboardLayoutRowNode",analyticsQueries:e.analyticsQueryIds.map((e=>({__typename:"AnalyticsQueryNode",id:e})))}}(e))),modifiedAt:n,parameterConfigs:(0,r.T2)("AnalyticsParameterConfig",i),parameterValues:o.map((e=>(0,l.f)(e,(0,c.QG)(i,e).type))),project:{__typename:"ProjectNode",id:d},permissions:{__typename:"PermissionsNode",...u,deletable:Boolean(u.deletable),movable:Boolean(u.movable)}}}},949357:(e,t,n)=>{n.d(t,{F:()=>refreshDetails})
var a=n(18526),i=n(860608),r=n(719645)
async function refreshDetails(e){await(0,a.W)().query({query:i.F,variables:{analyticsDashboardId:e,viewStateId:(0,r.FX)(e,r.w$)},fetchPolicy:"network-only"})}},719645:(e,t,n)=>{n.d(t,{FX:()=>getAnalyticsDashboardViewStateId,Ov:()=>isAnalyticsDashboardViewStateId,Uj:()=>l,w$:()=>o})
var a=n(232606),i=n(379346),r=n(901113),s=n(963839)
const o={viewType:s.b.MAIN_ANALYTICS_DASHBOARD},l=getAnalyticsDashboardViewStateId("axdash_UNKNOWN",o)
function getAnalyticsDashboardViewStateId(e,t){switch(t.viewType){case s.b.EMBEDDED_ANALYTICS_DASHBOARD:return`AnalyticsDashboardViewState-${t.viewType}-${e}-${t.embeddingItemId}`
case s.b.MAIN_ANALYTICS_DASHBOARD:return`AnalyticsDashboardViewState-${t.viewType}-${e}`
default:(0,a.Gp)(!1,`Unexpected view state context: ${(0,r.vE)(t)}.`)
return`AnalyticsDashboardViewState-UNKNOWN-${e}`}}function isAnalyticsDashboardViewStateId(e){const t=e.split("-")
return"AnalyticsDashboardViewState"===t[0]&&["UNKNOWN",...Object.keys(s.b)].includes(t[1])&&i.ZP.isAnalyticsDashboard(t[2])&&(3===t.length||4===t.length&&null!=i.ZP.apiIdToMaybeType(t[3]))}},402604:(e,t,n)=>{n.d(t,{i1:()=>filterAnalyticsQueryViewStateIds,kn:()=>getAnalyticsQueryViewStateId,mX:()=>getAnalyticsQueryFromViewStateId,y$:()=>isAnalyticsQueryViewStateId})
var a=n(232606),i=n(719645),r=n(379346)
function parseAnalyticsQueryViewStateId(e){const t=e.split("--")
return 3===t.length?{analyticsDashboardViewStateId:t[0],analyticsQueryViewStateText:t[1],analyticsQueryId:t[2]}:null}function filterAnalyticsQueryViewStateIds(e,t){(0,a.hu)(r.ZP.isAnalyticsQuery(t),"Expected a valid analyticsQuery id")
return e.filter((e=>getAnalyticsQueryFromViewStateId(e)===t))}function getAnalyticsQueryFromViewStateId(e){(0,a.hu)(isAnalyticsQueryViewStateId(e),"Expected to receive a valid AnalyticsQueryViewState Id")
return parseAnalyticsQueryViewStateId(e).analyticsQueryId}function getAnalyticsQueryViewStateId(e,t){return`${t}--AnalyticsQueryViewState--${e}`}function isAnalyticsQueryViewStateId(e){const t=parseAnalyticsQueryViewStateId(e)
return null!=t&&(0,i.Ov)(t.analyticsDashboardViewStateId)&&"AnalyticsQueryViewState"===t.analyticsQueryViewStateText&&r.ZP.isAnalyticsQuery(t.analyticsQueryId)}},85802:(e,t,n)=>{n.d(t,{RF:()=>updateBlockMaskingState,SB:()=>updateBlockRegressionState,_d:()=>a,t3:()=>updateAllRegressionStatesForBlock})
var a
!function(e){e.INSIGHTS_UPDATE_ALL_BLOCK_VIEW_STATES_FOR_BLOCK="INSIGHTS_UPDATE_ALL_BLOCK_VIEW_STATES_FOR_BLOCK"
e.INSIGHTS_UPDATE_BLOCK_VIEW_STATE="INSIGHTS_UPDATE_BLOCK_VIEW_STATE"}(a||(a={}))
function updateBlockViewState(e,t){return{type:a.INSIGHTS_UPDATE_BLOCK_VIEW_STATE,blockViewStateId:e,blockViewStateUpdate:t}}function updateAllRegressionStatesForBlock(e,t){return function updateAllBlockViewStatesForBlock(e,t){return{type:a.INSIGHTS_UPDATE_ALL_BLOCK_VIEW_STATES_FOR_BLOCK,analyticsQueryId:e,blockViewStateUpdate:t}}(e,{regressionState:t})}function updateBlockRegressionState(e,t){return updateBlockViewState(e,{regressionState:t})}function updateBlockMaskingState(e,t){return updateBlockViewState(e,{maskingState:t})}},290222:(e,t,n)=>{n.d(t,{Hh:()=>resetSQLQueryOverride,IU:()=>updateSQLQueryOverride,R1:()=>updateSQLTemplateForm,Z:()=>initializeSQLTemplateForm,r6:()=>deleteSQLTemplateForm,rY:()=>a})
var a,i=n(131675)
!function(e){e.INSIGHTS_DELETE_SQL_TEMPLATE_FORM="INSIGHTS_DELETE_SQL_TEMPLATE_FORM"
e.INSIGHTS_UPDATE_SQL_TEMPLATE_FORM="INSIGHTS_UPDATE_SQL_TEMPLATE_FORM"
e.INSIGHTS_UPDATE_SQL_QUERY_OVERRIDE="INSIGHTS_UPDATE_SQL_QUERY_OVERRIDE"
e.INSIGHTS_RESET_SQL_QUERY_OVERRIDE="INSIGHTS_RESET_SQL_QUERY_OVERRIDE"}(a||(a={}))
function deleteSQLTemplateForm(e){return{type:a.INSIGHTS_DELETE_SQL_TEMPLATE_FORM,analyticsQueryId:e}}function initializeSQLTemplateForm(e,t){return{type:a.INSIGHTS_UPDATE_SQL_TEMPLATE_FORM,analyticsQueryId:e,sqlTemplateFormState:{...i.bC,formType:t}}}function updateSQLTemplateForm(e,t){return{type:a.INSIGHTS_UPDATE_SQL_TEMPLATE_FORM,analyticsQueryId:e,sqlTemplateFormState:t}}function updateSQLQueryOverride(e,t){return{type:a.INSIGHTS_UPDATE_SQL_QUERY_OVERRIDE,analyticsQueryId:e,sqlQueryOverride:t}}function resetSQLQueryOverride(e){return{type:a.INSIGHTS_RESET_SQL_QUERY_OVERRIDE,analyticsQueryId:e}}},2376:(e,t,n)=>{n.d(t,{ZP:()=>reduceBlockEditorUIs,tT:()=>s})
var a=n(767807),i=n.n(a),r=n(290222)
const s={},o={}
function reduceBlockEditorUIs(e=o,t){switch(t.type){case r.rY.INSIGHTS_DELETE_SQL_TEMPLATE_FORM:{const{sqlTemplateFormState:n,...a}=e[t.analyticsQueryId]
return{...e,[t.analyticsQueryId]:{...a}}}case r.rY.INSIGHTS_UPDATE_SQL_TEMPLATE_FORM:return{...e,[t.analyticsQueryId]:{...e[t.analyticsQueryId],sqlTemplateFormState:t.sqlTemplateFormState}}
case r.rY.INSIGHTS_UPDATE_SQL_QUERY_OVERRIDE:return{...e,[t.analyticsQueryId]:{...e[t.analyticsQueryId],sqlQueryOverride:t.sqlQueryOverride}}
case r.rY.INSIGHTS_RESET_SQL_QUERY_OVERRIDE:return{...e,[t.analyticsQueryId]:i()({...e[t.analyticsQueryId]},{$unset:["sqlQueryOverride"]})}
default:return e}}},131675:(e,t,n)=>{n.d(t,{Et:()=>r,KE:()=>m,RW:()=>p,Vl:()=>s,_D:()=>l,bC:()=>c,kC:()=>o,pM:()=>d,xf:()=>u})
var a=n(256605),i=n(18694)
const r=[a.Fw.CHARACTER_VARYING,a.Fw.JSON,a.Fw.JSONB],s={type:i.qb.TEXT},o={selected:!1,typeInfo:s,validationError:null},l={filterType:i.Dq.IS_ONE_OF,rawValues:"",validationError:null,values:[]},c={selectedTable:null,excludeDuplicates:!1,formType:i.dm.BASIC_BIOENTITY},d={[i.Dq.EQUALS]:"equals",[i.Dq.GTE]:"is at least",[i.Dq.IS_ONE_OF]:"is one of",[i.Dq.IS_NONE_OF]:"is none of",[i.Dq.IS_NOT_NULL]:"is not null",[i.Dq.IS_NULL]:"is null",[i.Dq.LTE]:"is at most",[i.Dq.NOT_EQUALS]:"not equals"},u={[a.Fw.BOOLEAN]:!1,[a.Fw.CHARACTER_VARYING]:!0,[a.Fw.DATE]:!1,[a.Fw.DOUBLE]:!1,[a.Fw.INTEGER]:!1,[a.Fw.JSON]:!0,[a.Fw.JSONB]:!0,[a.Fw.NUMERIC]:!1,[a.Fw.TIMESTAMP]:!1},m=['"'],p=["'","{{","}}"]},18694:(e,t,n)=>{n.d(t,{Cn:()=>isFormStateInitialized,Dq:()=>r,dm:()=>a,jL:()=>assertIsFormStateInitialized,qb:()=>i})
var a,i,r,s=n(232606)
!function(e){e.BASIC_BIOENTITY="BASIC_BIOENTITY"}(a||(a={}))
!function(e){e.BIOENTITY="BIOENTITY"
e.TEXT="TEXT"}(i||(i={}))
!function(e){e.EQUALS="EQUALS"
e.GTE="GTE"
e.IS_ONE_OF="IS_ONE_OF"
e.IS_NONE_OF="IS_NONE_OF"
e.IS_NOT_NULL="IS_NOT_NULL"
e.IS_NULL="IS_NULL"
e.LTE="LTE"
e.NOT_EQUALS="NOT_EQUALS"}(r||(r={}))
function isFormStateInitialized(e){return null!=e.selectedTable}function assertIsFormStateInitialized(e){isFormStateInitialized(e)||(0,s.hu)(!1,"Expected selectedTable to not be null")}},337195:(e,t,n)=>{n.d(t,{nQ:()=>convertGQLToRESTAnalyticsQuery,pM:()=>convertRESTToGQLAnalyticsQuery,yG:()=>r})
var a=n(769784),i=n(335609)
const r={fragment:a.Ps`
  fragment GraphQLAnalyticsQuerySpec on AnalyticsQueryNode {
    id
    name
    description
    sqlQuery
  }
`,fragmentName:"GraphQLAnalyticsQuerySpec"}
function convertGQLToRESTAnalyticsQuery(e){return(0,i.Z)(e,"id","name","description","sqlQuery")}function convertRESTToGQLAnalyticsQuery(e){return{__typename:"AnalyticsQueryNode",...(0,i.Z)(e,"id","name","description","sqlQuery")}}},247950:(e,t,n)=>{n.d(t,{NN:()=>areLocalSQLQueriesUnsaved,k5:()=>readLocalSQLQueryOverride,mr:()=>resetLocalSQLQueryOverrides,nd:()=>writeLocalSQLQueryOverride,ts:()=>resetLocalSQLQueryOverride,z6:()=>isLocalSQLQueryUnsaved})
var a=n(166459),i=n(290222)
function readLocalSQLQueryOverride(e){var t
return null===(t=(0,a.getStore)().getState().ui.insights.blockEditorUIs[e])||void 0===t?void 0:t.sqlQueryOverride}function writeLocalSQLQueryOverride(e,t){(0,a.getStore)().dispatch((0,i.IU)(e,t))}function resetLocalSQLQueryOverride(e){(0,a.getStore)().dispatch((0,i.Hh)(e))}function resetLocalSQLQueryOverrides(e){e.analyticsQueries.forEach((e=>{resetLocalSQLQueryOverride(e.id)}))}function isLocalSQLQueryUnsaved({id:e,sqlQuery:t}){var n
return(null!==(n=readLocalSQLQueryOverride(e))&&void 0!==n?n:t)!==t}function areLocalSQLQueriesUnsaved(e){return e.analyticsQueries.some((e=>isLocalSQLQueryUnsaved(e)))}},314647:(e,t,n)=>{n.d(t,{ZP:()=>reduceBlockViewStates,aR:()=>BlockViewStateSelector})
var a=n(64558),i=n(402604),r=n(85802)
const s={maskingState:null,regressionState:null},o={}
class BlockViewStateSelector{constructor(e){this.state=e
this.state=e}getBlockViewState(e){var t
return null!==(t=this.state.ui.insights.blockViewStates[e])&&void 0!==t?t:s}getBlockViewStates(e){return(0,a.m8)(e.map((e=>[e,this.getBlockViewState(e)])))}getMaskingState(e){return this.getBlockViewState(e).maskingState}getRegressionState(e){return this.getBlockViewState(e).regressionState}}function reduceBlockViewStates(e=o,t){switch(t.type){case r._d.INSIGHTS_UPDATE_ALL_BLOCK_VIEW_STATES_FOR_BLOCK:{const{analyticsQueryId:n,blockViewStateUpdate:a}=t,r=Object.keys(e)
return(0,i.i1)(r,n).reduce(((e,t)=>({...e,[t]:{...e[t],...a}})),e)}case r._d.INSIGHTS_UPDATE_BLOCK_VIEW_STATE:{const{blockViewStateId:n,blockViewStateUpdate:a}=t
return{...e,[n]:{...e[n],...a}}}default:return e}}},386091:(e,t,n)=>{n.d(t,{A3:()=>u,CA:()=>g,Ll:()=>p,NE:()=>c,Qp:()=>d,RR:()=>A,SM:()=>_,V6:()=>T,Xr:()=>f,cY:()=>I,kI:()=>m,ml:()=>h,oV:()=>S,vm:()=>y,xw:()=>E})
var a=n(769784),i=n(289419),r=n(256605),s=n(554578),o=n(850709),l=n(184408)
const c={fragment:a.Ps`
  fragment AnalyticsVisualization on AnalyticsVisualizationNode {
    id
    parameters {
      ... on AnalyticsVisualizationBarChartParametersNode {
        aggregationType
        barChartType
        errorBarType
        seriesColumnName
        sortDirection
        xAxisColumnName
        yAxisColumnName
        yAxisMin
        yAxisMax
        yAxisScale
      }
      ... on AnalyticsVisualizationHeatmapParametersNode {
        gradientDirection
        metricColumnName
        xAxisColumnName
        yAxisColumnName
      }
      ... on AnalyticsVisualizationLineChartParametersNode {
        seriesColumnName
        xAxisColumnName
        xAxisScale
        yAxisColumnName
        yAxisIncludesZero
        yAxisScale
      }
      ... on AnalyticsVisualizationScatterPlotParametersNode {
        aggregationType
        colorPalette
        errorBarType
        legendLocation
        outlierConfig {
          outlierSetting
          qValue
        }
        regressionConfig
        rowIdColumnName
        seriesColumnName
        xAxisColumnName
        xAxisScale
        yAxisColumnName
        yAxisIncludesZero
        yAxisMin
        yAxisMax
        yAxisScale
      }
      ... on AnalyticsVisualizationTableParametersNode {
        displayColumnsJson
      }
      ... on AnalyticsVisualizationPieChartParametersNode {
        aggregationType
        legendLocation
        measureColumnName
        showPercentageInLabel
        showSliceNameInLabel
        showValueInLabel
        sliceColumnName
      }
    }
  }
`,fragmentName:"AnalyticsVisualization"},d={[l.nB.BAR_CHART]:"Bar chart",[l.nB.HEATMAP]:"Heatmap",[l.nB.LINE_CHART]:"Line chart",[l.nB.PIE_CHART]:"Pie chart",[l.nB.SCATTER_PLOT]:"Scatter plot",[l.nB.TABLE]:"Table"},u={[l.nB.BAR_CHART]:"analyze",[l.nB.HEATMAP]:"heatmap",[l.nB.LINE_CHART]:"line-chart",[l.nB.PIE_CHART]:"pie-chart",[l.nB.SCATTER_PLOT]:"scatter-plot",[l.nB.TABLE]:"table"},m={AnalyticsVisualizationBarChartParametersNode:l.nB.BAR_CHART,AnalyticsVisualizationHeatmapParametersNode:l.nB.HEATMAP,AnalyticsVisualizationLineChartParametersNode:l.nB.LINE_CHART,AnalyticsVisualizationPieChartParametersNode:l.nB.PIE_CHART,AnalyticsVisualizationScatterPlotParametersNode:l.nB.SCATTER_PLOT,AnalyticsVisualizationTableParametersNode:l.nB.TABLE},p={[l.nB.BAR_CHART]:"AnalyticsVisualizationBarChartParametersNode",[l.nB.HEATMAP]:"AnalyticsVisualizationHeatmapParametersNode",[l.nB.LINE_CHART]:"AnalyticsVisualizationLineChartParametersNode",[l.nB.PIE_CHART]:"AnalyticsVisualizationPieChartParametersNode",[l.nB.SCATTER_PLOT]:"AnalyticsVisualizationScatterPlotParametersNode",[l.nB.TABLE]:"AnalyticsVisualizationTableParametersNode"},h={[l.nB.BAR_CHART]:!0,[l.nB.HEATMAP]:!0,[l.nB.LINE_CHART]:!0,[l.nB.PIE_CHART]:!0,[l.nB.SCATTER_PLOT]:!0,[l.nB.TABLE]:!1},E={[l.nB.BAR_CHART]:!0,[l.nB.HEATMAP]:!0,[l.nB.LINE_CHART]:!0,[l.nB.PIE_CHART]:!0,[l.nB.SCATTER_PLOT]:!0,[l.nB.TABLE]:!1},S={[r.S1.LEFT]:s.L.LEFT,[r.S1.RIGHT]:s.L.RIGHT,[r.S1.TOP]:s.L.TOP},T={[r.gA.LINEAR]:o.OZ.LINEAR,[r.gA.LOG]:o.OZ.LOG},g={[r.FP.COUNT]:"Count",[r.FP.MEAN]:"Mean",[r.FP.SUM]:"Sum"},f={[r.dA.STANDARD_DEVIATION]:"Standard deviation",[r.dA.STANDARD_ERROR]:"Standard error"},I={[r.S1.LEFT]:"Left",[r.S1.RIGHT]:"Right",[r.S1.TOP]:"Top"},A=r.BL.DISCRETE,y={apiIdentifiedObjects:i.p.NAME,blobs:i.p.WAREHOUSE_BLOB_DICT},_={[r.SM.ASCENDING]:"Ascending",[r.SM.DESCENDING]:"Descending"}},184408:(e,t,n)=>{n.d(t,{Wo:()=>isVisualizationTypeParameters,nB:()=>a,qw:()=>isRegressionTypeChartParameters})
var a,i=n(386091)
!function(e){e.BAR_CHART="BAR_CHART"
e.HEATMAP="HEATMAP"
e.LINE_CHART="LINE_CHART"
e.PIE_CHART="PIE_CHART"
e.SCATTER_PLOT="SCATTER_PLOT"
e.TABLE="TABLE"}(a||(a={}))
function isRegressionTypeChartParameters(e){return e.hasOwnProperty("regressionConfig")}function isVisualizationTypeParameters(e,t){return i.Ll[t]===e.__typename}},316028:(e,t,n)=>{n.d(t,{S:()=>h,Z:()=>S})
var a=n(769784),i=n(692013),r=n(989526),s=n(751512),o=n(91092),l=n(965131),c=n(697134),d=n(830180),u=n(778223),m=n(465534),p=n(956435)
const h=a.Ps`
  query GetResultBlobs($ids: [StrictString!]!) @skipAudit @engComponent(name: INSIGHTS) {
    resultBlobs(ids: $ids) {
      ... on ResultBlobNode {
        id
        name
        url
        previewFileJson
        pdfPreviewFileJson
        uploadStatus
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("InaccessibleInfo").fragment}
`
const E=i.mM.create({blobLink:{width:200}}),S=function QueryingBlobLinkList({blobIds:e,chipSize:t=u.TK.SMALL}){return r.createElement(s.ZP,{query:h,variables:{ids:e},renderLoading:()=>r.createElement(r.Fragment,null,e.map((e=>r.createElement("span",{key:e},r.createElement(m.Z,{size:t})))))},(e=>e.resultBlobs.some((e=>(0,c.CZ)(e)))?r.createElement(p.Z,{size:t}):r.createElement(d.JF,{blobs:e.resultBlobs.map((e=>(0,l.tY)("ResultBlob",e))),chipSize:t,blobClassName:(0,i.iv)(E.blobLink)})))}},439707:(e,t,n)=>{n.d(t,{Ao:()=>p,Fn:()=>m,PB:()=>l,dM:()=>c,e:()=>u,id:()=>o,wL:()=>d})
var a=n(769784),i=n(459830),r=n(808844),s=n(248762)
const o={fragment:a.Ps`
  fragment AnalyticsParameterValue on AnalyticsParameterValueNode {
    config {
      id
    }
    valueJson
  }
`,fragmentName:"AnalyticsParameterValue"},l={AnalyticsParameterBioentityLinkConfigNode:s.r.BIOENTITY_LINK,AnalyticsParameterDateConfigNode:s.r.DATE,AnalyticsParameterEntryLinkConfigNode:s.r.ENTRY_LINK,AnalyticsParameterFolderLinkConfigNode:s.r.FOLDER_LINK,AnalyticsParameterNumberConfigNode:s.r.NUMBER,AnalyticsParameterProcessLinkConfigNode:s.r.PROCESS_LINK,AnalyticsParameterProcessTaskLinkConfigNode:s.r.PROCESS_TASK_LINK,AnalyticsParameterProjectLinkConfigNode:s.r.PROJECT_LINK,AnalyticsParameterSelectorConfigNode:s.r.SELECTOR,AnalyticsParameterStorableLinkConfigNode:s.r.STORABLE_LINK,AnalyticsParameterStringConfigNode:s.r.STRING,AnalyticsParameterTeamLinkConfigNode:s.r.TEAM_LINK,AnalyticsParameterUserLinkConfigNode:s.r.USER_LINK},c={[s.r.BIOENTITY_LINK]:"AnalyticsParameterBioentityLinkConfigNode",[s.r.DATE]:"AnalyticsParameterDateConfigNode",[s.r.ENTRY_LINK]:"AnalyticsParameterEntryLinkConfigNode",[s.r.FOLDER_LINK]:"AnalyticsParameterFolderLinkConfigNode",[s.r.NUMBER]:"AnalyticsParameterNumberConfigNode",[s.r.PROCESS_LINK]:"AnalyticsParameterProcessLinkConfigNode",[s.r.PROCESS_TASK_LINK]:"AnalyticsParameterProcessTaskLinkConfigNode",[s.r.PROJECT_LINK]:"AnalyticsParameterProjectLinkConfigNode",[s.r.SELECTOR]:"AnalyticsParameterSelectorConfigNode",[s.r.STORABLE_LINK]:"AnalyticsParameterStorableLinkConfigNode",[s.r.STRING]:"AnalyticsParameterStringConfigNode",[s.r.TEAM_LINK]:"AnalyticsParameterTeamLinkConfigNode",[s.r.USER_LINK]:"AnalyticsParameterUserLinkConfigNode"},d={[s.r.BIOENTITY_LINK]:"entity",[s.r.DATE]:"date",[s.r.ENTRY_LINK]:"entry",[s.r.FOLDER_LINK]:"folder",[s.r.NUMBER]:"number",[s.r.PROCESS_LINK]:(0,r.E2)(i.PROCESS),[s.r.PROCESS_TASK_LINK]:"workflow task",[s.r.PROJECT_LINK]:"project",[s.r.SELECTOR]:"dropdown",[s.r.STORABLE_LINK]:"inventory",[s.r.STRING]:"text",[s.r.TEAM_LINK]:"team",[s.r.USER_LINK]:"user"},u=[s.r.DATE,s.r.NUMBER,s.r.STRING],m=[s.r.SELECTOR,s.r.BIOENTITY_LINK,s.r.ENTRY_LINK,s.r.FOLDER_LINK,s.r.PROCESS_LINK,s.r.PROCESS_TASK_LINK,s.r.PROJECT_LINK,s.r.STORABLE_LINK,s.r.TEAM_LINK,s.r.USER_LINK],p={[s.r.BIOENTITY_LINK]:!0,[s.r.DATE]:!1,[s.r.ENTRY_LINK]:!0,[s.r.FOLDER_LINK]:!1,[s.r.NUMBER]:!1,[s.r.PROCESS_LINK]:!0,[s.r.PROCESS_TASK_LINK]:!0,[s.r.PROJECT_LINK]:!1,[s.r.SELECTOR]:!0,[s.r.STORABLE_LINK]:!0,[s.r.STRING]:!1,[s.r.TEAM_LINK]:!0,[s.r.USER_LINK]:!0}},701086:(e,t,n)=>{n.d(t,{L:()=>convertGQLToRESTParameterValue,f:()=>convertRESTToGQLParameterValue})
var a=n(439707)
function convertGQLToRESTParameterValue(e){const{__typename:t,config:n,...a}=e
return{...a,configId:n.id}}function convertRESTToGQLParameterValue(e,t){const{configId:n,...i}=e
return{...i,__typename:"AnalyticsParameterValueNode",config:{__typename:a.dM[t],id:n}}}},782353:(e,t,n)=>{n.d(t,{QG:()=>restGetConfigForValue,YG:()=>gqlGetValueJsonForConfig,uz:()=>restGetValueJsonForConfig})
var a=n(232606)
function baseGetValueJsonForConfig(e,t,n){const a=t.find((t=>e(t)===n))
return a?a.valueJson:null}function gqlGetValueJsonForConfig(e,t){return baseGetValueJsonForConfig((e=>e.config.id),e,t)}function restGetConfigForValue(e,t){const n=e.find((e=>e.id===t.configId));(0,a.hu)(void 0!==n,"Could not find config associated to ParameterValue")
return n}function restGetValueJsonForConfig(e,t){return baseGetValueJsonForConfig((e=>e.configId),e,t)}},909428:(e,t,n)=>{n.d(t,{Z:()=>getParameterNamesInSQLQueries})
var a=n(531041)
function getParameterNamesInSQLQueries(e){return a.default.union(...e.map((e=>function getParameterNamesInSQLQuery(e){const t=[],n=/{{(.+?)}}/g
let i
for(;null!=(i=n.exec(e));)t.push(i[1])
return a.default.unique(t)}(e))))}},591410:(e,t,n)=>{n.d(t,{T:()=>getTypesafeParameterTypeAndConfigSettings,Z:()=>getParameterTypeAndConfigSetting})
var a=n(38317),i=n(464070)
function getParameterTypeAndConfigSetting(e){return{type:(0,i.Z)(e),configSetting:getConfigSetting(e)}}function getTypesafeParameterTypeAndConfigSettings(e){return{type:(0,i.Z)(e),configSetting:getConfigSetting(e)}}function getConfigSetting(e){return(0,a.C)(e,"__typename","systemName","id")}},467412:(e,t,n)=>{n.d(t,{t:()=>getDefaultAnalyticsSearchParams})
var a=n(294120),i=n(872543),r=n(374669),s=n(459830),o=n(62315),l=n(232125)
function findTypesFilter(e){const t=e.findIndex((e=>e.key===o.Vm.TYPES))
return t<0?{filter:null,index:null}:{filter:e[t],index:t}}function addDefaultFilters(e){const t=[...e]
findTypesFilter(e).filter||t.push(function getDefaultTypeFilter(){return{...(0,o.QW)(o.Vm.TYPES),value:(0,l.Z)()?[s.ANALYTICS_DASHBOARD,s.ANALYSIS]:[s.ANALYTICS_DASHBOARD]}}())
return t}function getDefaultAnalyticsSearchFilters(){let e=(0,r.hN)(a.$0.ANALYTICS)
e=function removeInvalidFilters(e){const t=[...e]
if(!(0,l.Z)()){const{filter:n,index:a}=findTypesFilter(e)
null!=a&&(null==n?void 0:n.value.includes(s.ANALYSIS))&&t.splice(a,1)}return t}(e)
e=addDefaultFilters(e)
return e}function getDefaultAnalyticsSearchParams(){return{filters:getDefaultAnalyticsSearchFilters(),offset:0,limit:(0,i.z3)(),query:"",sorts:r.i_(a.$0.ANALYTICS)}}},232125:(e,t,n)=>{n.d(t,{Z:()=>includeAnalysesInSearch})
var a=n(348920)
function includeAnalysesInSearch(){return a.ZP.ENABLE_ANALYSIS_TOOL}},908318:(e,t,n)=>{n.d(t,{IO:()=>updateConnectionSchema,Re:()=>bulkUnarchive,_C:()=>updateCollaborators,_m:()=>createConnectionSchema,hM:()=>connectionSchemaURL,j1:()=>connectionSchemasURL,uc:()=>bulkArchive})
var a=n(771398)
function connectionSchemasURL(){return"/connection-schemas"}function connectionSchemaURL(e){return`/connection-schemas/${e}`}function bulkArchive(e,t){return a.s0({url:"/1/api/connection-schemas:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return a.s0({url:"/1/api/connection-schemas:bulk-unarchive",data:{ids:e}})}function updateConnectionSchema(e){return a.Ry({url:`/1/api/connection-schemas/${e.schemaId}`,data:{schemaName:e.schemaName,sqlIdentifier:e.sqlIdentifier,spec:e.spec}})}function createConnectionSchema(e){return a.s0({url:"/1/api/connection-schemas",data:e})}function updateCollaborators(e,t){return a.Ry({url:`/1/api/connection-schemas/${e}/collaborators`,data:t})}},408446:(e,t,n)=>{n.d(t,{HZ:()=>updateConnection,I5:()=>createConnection,Re:()=>bulkUnarchive,WY:()=>getInstrumentServiceDetails,Zm:()=>updateConnectionOwnableInfo,dr:()=>listAdapters,ds:()=>connectionURL,uP:()=>getAdapter,uc:()=>bulkArchive})
var a=n(771398),i=n(8747)
function connectionURL(e){return`/connections/${e}`}function createConnection(e){return a.s0({url:"/1/api/connections",data:e})}function updateConnection(e,t){return a.Ry({url:`/1/api/connections/${e}`,data:t})}function updateConnectionOwnableInfo(e,t){return a.Ry({url:`/1/api/connections/${e}/collaborators`,data:t})}function bulkArchive(e,t){return i.s0({url:"/1/api/connections:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return i.s0({url:"/1/api/connections:bulk-unarchive",data:{ids:e}})}function listAdapters(){return a.UJ("/1/api/instruments/adapters")}function getAdapter(e){return a.UJ(`/1/api/instruments/adapters/${e}`)}function getInstrumentServiceDetails(e){return a.UJ(`/1/api/connections/${e}/info`)}},145242:(e,t,n)=>{n.d(t,{fr:()=>q,ZP:()=>QueryingConnectionDetails})
var a=n(769784),i=n(989526),r=n(157530),s=n(402360),o=n(367780),l=n(7060),c=n(714529),d=n(348920),u=n(171471),m=n(204026),p=n(751512),h=n(91092),E=n(697134),S=n(350885),T=n(408446),g=n(47789),f=n(600664),I=n(22422),A=n(876831),y=n(528431),_=n(172459),C=n(251808),R=n(281100),N=n(309718),O=n(103593),b=n(102176),v=n(59860),P=n(334148),L=n(73374),D=n(502633),M=n(232606),w=n(459830),F=n(626054),k=n(184997),U=n(965131),x=n(476604)
const B=a.Ps`
  query ConnectionOwnerAndCollaboratorsQuery($connectionId: StrictString!)
  @skipAudit
  @engComponent(name: INSTRUMENTS) {
    connection(id: $connectionId) {
      ... on OwnableInterface {
        ...OwnerAndCollaboratorInfoGraphQL
        ...OwnablePermissionsGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,h.f)("OwnerAndCollaboratorInfo").fragment}
  ${(0,h.f)("OwnablePermissions").fragment}
  ${(0,h.f)("InaccessibleInfo").fragment}
`
function ConnectionCollaboratorsModal(e){return i.createElement(F.Z,{ownableType:w.CONNECTION,existingOwnable:e.connectionOwnerAndCollaboratorInfo,onRequestClose:e.onRequestClose,navigateOnSuccess:!1,doSubmit:t=>async function handleUpdate(t){await(0,T.Zm)(e.connectionId,{collaborators:(0,k.fr)(t.collaborators),owner:t.owner.handle,ownerInfo:t.ownerInfo})}({...t,collaborators:t.collaborators}),enableName:!1,enableDescription:!1,isReadOnly:!e.currentUserPermissions.admin})}const Z=function QueryingConnectionCollaboratorsModal(e){return i.createElement(p.ZP,{query:B,renderLoading:()=>i.createElement(x.b,null),variables:{connectionId:e.connectionId}},(t=>{(0,M.hu)(!(0,E.CZ)(t.connection),"Expected connection to be accessible")
const n=(0,U.tY)("OwnerAndCollaboratorInfo",t.connection),a=(0,U.tY)("OwnablePermissions",t.connection)
return i.createElement(ConnectionCollaboratorsModal,{...e,connectionOwnerAndCollaboratorInfo:n,currentUserPermissions:a.permissions})}))},q=a.Ps`
  query ConnectionQuery($connectionId: StrictString!) @skipAudit @engComponent(name: INSTRUMENTS) {
    connection(id: $connectionId) {
      ... on ConnectionNode {
        id
        name
        humanId
        permissions {
          readable
          writable
          archivable
          unarchivable
        }
        schema {
          id
          name
          archiveRecord {
            purpose
          }
        }
        creator {
          id
          name
          handle
          avatarUrl
        }
        dataCatalogFolder {
          id
        }
        createdAt
        fields
        ...HasArchiveRecordGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,h.f)("HasArchiveRecord").fragment}
  ${(0,h.f)("InaccessibleInfo").fragment}
`
function ConnectionDetails(e){var t,n,a
const c=e.connection,p=c.id,h=c.permissions,E=h.writable,S=null===(t=e.status)||void 0===t?void 0:t.value
return i.createElement("div",{className:"react-tab-container"},i.createElement("div",null,i.createElement("div",null,i.createElement(v.Z,{bufferRowReset:!0},i.createElement(O.Z,{xs:6},i.createElement(A.Z,{initialAlias:c.name,isFullWidth:!0,isHeader:!0,isWritable:E,complete:async t=>{await(0,T.HZ)(p,{name:t})
e.refetch()},placeholder:"Name"}),i.createElement(s.Z,{item:{...c,archiveRecord:c.archiveRecord}})),i.createElement(O.Z,{xs:6},i.createElement("div",{className:"u-justify-content-end"},i.createElement(o.Z,{className:"metadata-header-button-spacing-left",isArchivable:Boolean(h.archivable),isUnarchivable:Boolean(h.unarchivable),item:c,getAnalyticsMetadata:()=>({actionOrigin:u.D2.CONNECTION_PAGE}),onArchive:async(t,n)=>{await(0,T.uc)(t,n)
e.refetch()},onUnarchive:async t=>{await(0,T.Re)(t)
e.refetch()}}),i.createElement(l.Z,{className:"metadata-header-button-spacing-left",ids:[p]}),i.createElement(P.Co,{className:"metadata-header-button-spacing-left",icon:"settings",buttonStyle:P.ZJ.TERTIARY_BLUE,size:P.qE.SMALL,onClick:()=>(0,D.Z)(Z,{connectionId:p})}))))),i.createElement("div",null,i.createElement(v.Z,{bufferRowReset:!0},S?i.createElement(O.Z,{xs:12},i.createElement(g.Z,{status:S})):null))),i.createElement("div",{className:"u-spacing-top"},i.createElement(b.Z,null,i.createElement(v.Z,{bufferRowReset:!0},i.createElement(O.Z,{xs:6},i.createElement(L.Dx,null,"Creator"),i.createElement("div",null,i.createElement(R.Z,{className:"u-mini-spacing-right",size:N.D.XXSMALL,entity:c.creator}),c.creator.name)),i.createElement(O.Z,{xs:6},i.createElement(L.Dx,null,"Type"),i.createElement("div",null,(0,r.H3)(c.schema))))),i.createElement("div",{className:"u-spacing-top"},i.createElement(b.Z,null,i.createElement(v.Z,{bufferRowReset:!0},i.createElement(O.Z,{xs:6},i.createElement(L.Dx,null,"Benchling Gateway"),i.createElement("div",null,null===(n=e.gateway)||void 0===n?void 0:n.name)),d.ZP.FILES_ENABLE&&i.createElement(O.Z,{xs:6},i.createElement(L.Dx,null,"Data Catalog Folder"),i.createElement(m.Z,{value:null===(a=c.dataCatalogFolder)||void 0===a?void 0:a.id,onChange:async t=>{await(0,T.HZ)(p,{dataCatalogFolderId:t.target.value})
e.refetch()},showInventory:!0,readOnly:!E,unsetOnFetchFail:!1}))))),i.createElement("div",{className:"u-spacing-top"},i.createElement(_.Z,{className:"bufferRowReset u-small-spacing-top",itemLinkAllowed:!1,isWritable:E,onUpdateTags:async t=>{const n=(0,C.UR)(t)
await(0,T.HZ)(p,{tags:n})
e.refetch()},tags:c.fields,tagPopovers:e.fieldInfos,customEditors:(0,f.Z)(e.fieldTypes)}))))}function poll(e,t){setTimeout((()=>{e()
poll(e,t)}),t)}function QueryingConnectionDetails(e){const t=e.connectionId,n=(0,p.IJ)(q,{variables:{connectionId:t}}),[a,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(null),[l,u]=(0,i.useState)({}),[m,h]=(0,i.useState)({}),[g,f]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(0,T.WY)(t).then((e=>{r(e);(0,I.rm)(e.gatewayId).then((e=>{o(e)}));(0,T.uP)(e.instrumentName).then((e=>{u(Object.fromEntries(e.fields.map((e=>[e.id,e.info]))))
h(Object.fromEntries(e.fields.map((e=>[e.id,e.fieldType?e.fieldType:null]))))}))})).finally((()=>{f(!0)}))}),[t])
d.ZP.INSTRUMENTS_ENABLE_CONNECTION_DETAILS_POLLING&&poll((()=>{(0,T.WY)(t).then((e=>{r(e)}))}),1e4)
if(n.type!==p.NI.SUCCESS)return i.createElement(y.d,null)
const A=n.data.connection
if((0,E.CZ)(A))return i.createElement(c.Z,{inaccessibleInfo:A,modelType:"connection"})
const _=g?null!=(null==a?void 0:a.id)?a.status:{value:S.Q.SERVICE_UNAVAILABLE,timestamp:(new Date).toISOString()}:null
return i.createElement(ConnectionDetails,{connection:A,refetch:()=>n.refetch({connectionId:t}),gateway:s,status:_,fieldInfos:l,fieldTypes:m})}},553811:(e,t,n)=>{n.d(t,{ZP:()=>O,mc:()=>getDefaultConnectionSearchParams})
var a=n(989526),i=n(171471),r=n(459830),s=n(294120),o=n(256605),l=n(484827),c=n(619174),d=n(749334),u=n(872543),m=n(62315),p=n(374669),h=n(68526),E=n(343106),S=n(692013),T=n(531041),g=n(382857),f=n(305466),I=n(868710),A=n(334148),y=n(865486),_=n(472347),C=n(502633),R=n(884521)
function NewConnectionDropdown(e){const[t,n]=(0,a.useState)(!1),i=e.connectionSchemas.length>0
let r
!function(e){e.GENERIC="generic"
e.INSTRUMENT="instrument"}(r||(r={}))
const s=T.default.sortBy(e.connectionSchemas.filter((e=>!(0,g.ZP)(e))),(function getConnectionType(e){return"file-watcher-adapter"===e.integrationAdapterId?r.GENERIC:r.INSTRUMENT}))
const o=i?a.createElement(_.Z,{scrollable:!0,className:(0,S.iv)(N.pullRight),width:y.ZP.WIDTHS.MEDIUM,height:y.ZP.HEIGHTS.MEDIUM,onSelect:function onSelect(e){(0,C.Z)(R.Z,{connectionSchema:e})},optionDatas:s.map((e=>({name:e.name,value:e})))}):null
return a.createElement("div",{className:"u-display-inline-block dropdown"},a.createElement(f.ZP,{onRequestClose:()=>{n(!1)},open:t,menu:o,shouldCloseOnInsideClick:!0},a.createElement(I.ZP,{title:i?"Create...":"Loading connection options...",placement:I.TQ.BOTTOM,container:"body"},a.createElement(A.Co,{buttonStyle:A.ZJ.TERTIARY_BLUE,disabled:!i,icon:"compose",onClick:()=>{n(!0)},size:A.qE.SMALL}))))}const N=S.mM.create({pullRight:{right:0}})
function ConnectionSidepanelCrumbs(e){return e.activeSavedSearch?a.createElement(l.bJ,{crumbs:[a.createElement(l.Ak,{key:"connections",text:"Connections",onClick:()=>{e.onSearch(h._j(e.searchParams,[],getDefaultConnectionFilters()))
e.onSelectSavedSearch(void 0)}}),a.createElement(l.Ak,{key:"root",text:e.activeSavedSearch.name})],settingsIcon:e.settingsComponents}):a.createElement(l.bJ,{crumbs:[a.createElement("span",{key:"root"},"Connections")],settingsIcon:e.settingsComponents})}function getDefaultConnectionFilters(){const e=(0,p.hN)(s.$0.CONNECTIONS)
e.find((e=>e.key===m.Vm.TYPES))||e.push({...(0,m.QW)(m.Vm.TYPES),value:[r.CONNECTION]})
return e}function getDefaultConnectionSearchParams(){return{filters:getDefaultConnectionFilters(),offset:0,limit:(0,u.z3)(),query:"",sorts:(0,p.i_)(s.$0.CONNECTIONS)}}const O=(0,E.ZP)((function ConnectionSidepanelListing(e){var t
const n=null!==(t=e.schemasByType[r.CONNECTION_SCHEMA])&&void 0!==t?t:[]
return a.createElement("div",{className:"sidepanel"},a.createElement(c.ZP,{...e,actionSource:i.D2.CONNECTIONS_SIDEPANEL,savedSearchSection:o.yd.CONNECTIONS,additionalHeaderButtons:a.createElement(NewConnectionDropdown,{connectionSchemas:n}),availableSortKeys:[m.bo.SORT_NAME_KEY,m.bo.SORT_MODIFIED_AT_KEY,m.bo.SORT_CREATED_AT_KEY],availableTypes:[r.CONNECTION],makeCrumbs:t=>a.createElement(ConnectionSidepanelCrumbs,{activeSavedSearch:e.activeSavedSearch,onSelectSavedSearch:e.onSelectSavedSearch,onSearch:e.onSearch,searchParams:e.searchParams,settingsComponents:t}),extraPrimaryFilterOptions:[],preservedFilterKeys:[],section:s.$0.CONNECTIONS,sectionTabs:e.connectionsTab}))}),m.Sc.CONNECTIONS,s.SA.CONNECTIONS,{defaultSearchParams:getDefaultConnectionSearchParams(),getNavigationUpdate:function getConnectionsURL(e,t){return t.isExpanded?{url:(0,d.q7)("/connections/listing",t.searchParams,t.filterErrors),options:{replace:e.isExpanded===t.isExpanded}}:null}})},656039:(e,t,n)=>{n.d(t,{Y6:()=>l,Yl:()=>i,jS:()=>a,t$:()=>isErrorFileStatus,tH:()=>s,u2:()=>r})
var a,i,r,s,o=n(97737)
!function(e){e.ERRORED="ERRORED"
e.NOT_UPLOADED="NOT_UPLOADED"
e.UPLOADED="UPLOADED"
e.FORMAT_ERROR="FORMAT_ERROR"}(a||(a={}))
function isErrorFileStatus(e){return[a.ERRORED,a.FORMAT_ERROR].includes(e)}!function(e){e.PENDING="PENDING"
e.PROCESSING="PROCESSING"
e.DONE="DONE"
e.ERROR="ERROR"}(i||(i={}))
!function(e){e.INTERCHANGE="INTERCHANGE"
e.ORIGINAL="ORIGINAL"
e.TRANSFORM="TRANSFORM"}(r||(r={}))
!function(e){e.PROCESS="PROCESS"
e.RETRIEVE="RETRIEVE"}(s||(s={}))
const l={statusByStep:{[s.RETRIEVE]:o.cV.UNVISITED,[s.PROCESS]:o.cV.UNVISITED},currentStepKey:s.RETRIEVE,selectedRowIndices:new Set,isImporting:!1,instrumentData:[],instrumentQueryFilter:[]}},285560:(e,t,n)=>{n.d(t,{C8:()=>getOrCreateFile,Lc:()=>createBlobs,TP:()=>parseInstrumentData,aG:()=>pollInstrumentQueryStatus,dG:()=>createCopyObjectInstrumentQuery,q6:()=>searchInstrumentData})
var a=n(64558),i=n(771398),r=n(8747),s=n(656039)
function searchInstrumentData(e){return i.s0({url:"/1/api/instruments/instrument-data",data:e})}function createBlobs(e){return r.ty({url:"/1/api/instruments/instrument-data/blobs",data:{instrumentDataIds:e}}).then((({blobs:e})=>e))}function getOrCreateFile(e){return r.ty({url:"/1/api/instruments/instrument-data/file",data:e}).then((({fileId:e})=>e))}function parseInstrumentData(e,t){return i.s0({url:"/1/api/instruments/instrument-data/get-spreadsheet-columns",data:{instrumentDataId:e.id,delimiter:t}})}function createCopyObjectInstrumentQuery(e){return i.s0({url:"/1/api/instruments/instrument-queries",data:{connectionId:e.connectionId,command:"COPY_OBJECT",params:{file_id:e.id}}})}async function pollInstrumentQueryStatus(e){return await async function pollUntil(e,t,n=5e3,i=3e5,r=100){let s=0,o=0
for(;s<r&&o<i;){const i=await e()
if(t(i))return i
s+=1
o+=n
await(0,a._v)(n)}if(s>=r)throw new Error(`Polling failed after ${s} retries. Please try again later.`)
throw new Error(`Polling failed after ${o} milliseconds. Please try again later.`)}((()=>function getInstrumentQuery(e){return i.UJ(`/1/api/instruments/instrument-queries/${e}`)}(e)),(e=>e.status===s.Yl.DONE))}},22422:(e,t,n)=>{n.d(t,{$K:()=>instrumentGatewaysURL,JC:()=>getInstaller,Op:()=>createInstallerTokenFile,aK:()=>archiveGateway,oB:()=>listPendingUpgradesForGateway,p0:()=>getGatewayInstaller,qx:()=>approveRollout,rG:()=>createGateway,rm:()=>getGateway,zo:()=>listGateways})
var a=n(771398),i=n(8747)
function instrumentGatewaysURL(){return"/instrument-gateways"}function getGateway(e){return a.UJ(`/1/api/instruments/gateways/${e}`)}function listGateways(){return a.UJ("/1/api/instruments/gateways")}function createGateway(e){return a.s0({url:"/1/api/instruments/gateways",data:{name:e}})}function getInstaller(e){return a.UJ(`/1/api/instruments/gateways/${e}/installer`)}function getGatewayInstaller(){return a.UJ("/1/api/instruments/gateway-installer")}function createInstallerTokenFile(){return a.s0({url:"/1/api/instruments/create-installer-token-file"})}function archiveGateway(e){return i.s0({url:`/1/api/instruments/gateways/${e}:archive`})}function listPendingUpgradesForGateway(e){return a.UJ(`/1/api/instruments/gateways/${e}/pending-upgrades`)}function approveRollout(e,t){return a.s0({url:`/1/api/instruments/gateways/${e}/pending-upgrades/${t}:approve`})}},731412:(e,t,n)=>{n.d(t,{NJ:()=>getTags,Ps:()=>deleteAlias,Ti:()=>overrideValidationStatus,Zh:()=>getHoistedTags,Zt:()=>addAlias,aR:()=>updateRegistryCollections,ky:()=>pollValidationState,mZ:()=>bulkUpdateTagSchema,rG:()=>loadBioentityAliasInfos,ru:()=>updateAliasWithDataMods,zD:()=>load})
var a=n(64558),i=n(531041),r=n(609630),s=n(348920),o=n(675649),l=n(136701),c=n(69152),d=n(787004),u=n(343748),m=n(947730),p=n(467248),h=n(974913),E=n(380490),S=n(166459),T=n(386382),g=n(280034)
function load(e,{bioentityAliasInfos:t}){m.Z.dispatch({actionType:d.a4x,fileId:e,bioentityAliasInfos:t})}function getHoistedTags(e){l.Zh(e).done((t=>{const{hoistedTagsGraphById:n}=t
m.Z.dispatch({actionType:d.rAz,fileId:e,hoistedTagsGraphById:n})})).fail(h.ZP.notifyError)}function getTags(e){m.Z.dispatch({actionType:d.Ude})
u.bh([e]).done((e=>{const{data:t}=e
m.Z.dispatch({actionType:d.JFe,tagData:t})})).fail((e=>{m.Z.dispatch({actionType:d.Mso})
h.ZP.notifyError(e)}))}async function loadBioentityAliasInfos(e){m.Z.dispatch({actionType:d.YAd})
const t=await l.yu(e)
m.Z.dispatch({actionType:d.yoq,bioentityAliasInfosById:t})}function addAlias(e,t){return l.Zt(e,t).then((t=>{m.Z.dispatch({actionType:d.nfT,bioentityAliasInfo:t,fileId:e})
h.ZP.success("Added alias successfully")})).catch(h.ZP.notifyError)}function deleteAlias(e,t){l.Ps(e,t).done((n=>{m.Z.dispatch({actionType:d.X1f,alias:t,fileId:e})
h.ZP.success("Deleted alias successfully")})).fail(h.ZP.notifyError)}async function updateAliasWithDataMods(e,t,n,a){let i
await(0,r.GE)({changeSummary:a?(0,T.P_)({apiIds:[e],action:T.wV.MODIFY}):"",onRequestClose:()=>{i=t},onRequestSubmit:async()=>{i=await async function updateAlias(e,t,n){try{await l.xJ(e,t,n)
m.Z.dispatch({actionType:d.d2o,oldAlias:t,alias:n,fileId:e})
h.ZP.success("Updated alias successfully")
return n}catch(e){m.Z.dispatch({actionType:d.XTj})
h.ZP.notifyError(e)
return t}}(e,t,n)}},s.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS&&a,{module:"REGISTRY",actionOrigin:"inventory_registry_search_ui",modifiedAction:T.wV.MODIFY,numModifiedTotalItems:1,entryId:null})
return i}function updateRegistryCollections(e,{inOrgCollection:t,inPersonalCollection:n}){l.aR(e,{inOrgCollection:t,inPersonalCollection:n}).done((t=>{const n=t
m.Z.dispatch({actionType:d.B5G,newFileInfo:n})
for(const e of Object.keys(n))m.Z.dispatch({actionType:d.oe2,id:e,name:n[e].name,bioentityAliasInfos:n[e].bioentityAliasInfos})
h.ZP.success(`Updated registry collections for ${e.length}\n         ${o._6(e.length,"file")}.`)})).fail(h.ZP.notifyError)}function bulkUpdateTagSchema(e,t,n){p.Z.bulkUpdateTagSchema(e,t,n).done((e=>{const t=(0,S.getStore)().getState().models.fileSummariesById,n=Object.keys(e).reduce(((n,a)=>{e[a]&&t[a]&&(n[a]={...t[a],...e[a]})
return n}),{});(0,S.getStore)().dispatch(E.wb(n,[]))
for(const t of Object.keys(e)){m.Z.dispatch({actionType:d.DQR,fileId:t,tagSchema:e[t].tagSchema,tags:e[t].tags});(0,S.getStore)().dispatch({type:d.DQR,fileId:t,tagSchema:e[t].tagSchema,tags:e[t].tags})}h.ZP.success("Schema set successfully.")})).fail(h.ZP.notifyError)}async function overrideValidationStatus(e){const{schemaValidationStateByBioentityId:t}=await l.Ti(e)
try{m.Z.dispatch({actionType:d.Pgk,schemaValidationStateByBioentityId:t})
h.ZP.success("Successfully overrode validation checks.")}catch(e){h.ZP.notifyError(e)}}function fetchExtras(e){for(const t of e)(0,c.Z)(t,{forceFetch:!0})}async function pollValidationState(e){fetchExtras(e)
for(let t=0;t<12;t++){const t=await u.C6(e),{fileSummariesById:n}=t,r=i.default.mapObject(n,(e=>e.schemaValidationState))
m.Z.dispatch({actionType:d.Pgk,schemaValidationStateByBioentityId:r})
if(Object.values(n).every((({schemaValidationState:e})=>!e||e.status!==g.TC.VALIDATING))){fetchExtras(e)
break}await(0,a._v)(5e3)}}},925256:(e,t,n)=>{n.d(t,{Kg:()=>a,gc:()=>getTenantLevelInventorySettingsURL,nX:()=>i})
function getTenantLevelInventorySettingsURL(){return"/inventory-settings"}var a
!function(e){e.OVERCAPACITY="OVERCAPACITY"
e.ITEM_TYPES_DISALLOWED="ITEM_TYPES_DISALLOWED"
e.NON_LOCATION_ITEMS_DISALLOWED="NON_LOCATION_ITEMS_DISALLOWED"}(a||(a={}))
const i={[a.OVERCAPACITY]:"Over capacity",[a.ITEM_TYPES_DISALLOWED]:"Item types disallowed",[a.NON_LOCATION_ITEMS_DISALLOWED]:"Non-location items disallowed"}},273887:(e,t,n)=>{n.d(t,{Z:()=>u})
var a=n(64558),i=n(767807),r=n.n(i),s=n(531041),o=n(787004),l=n(947730),c=n(391028),d=n(416615)
function _addToMap(e,t,n){const a=e.get(t),i=r()(a,{$push:[n]})
e.set(t,i)}class InventoryFileStore extends c.Z{setFileStates(e){this.fileStates=e}resetState(){this.bioentityAliasInfosMap=new d.Z
this.hoistedTagsMap=new Map
this.isLoadingAliases=!1
this.isLoadingTags=!1}getIsLoadingAliases(){return this.isLoadingAliases}getIsLoadingTags(){return this.isLoadingTags}getBioentityAliasInfos(e){return this.bioentityAliasInfosMap.get(e)}getHoistedTags(e){return this.hoistedTagsMap.get(e)}payloadHandler(e){switch(e.actionType){case o.a4x:{const{fileId:t,bioentityAliasInfos:n}=e
this.bioentityAliasInfosMap.set(t,n)
this.emitChange()}break
case o.YAd:this.isLoadingAliases=!0
this.emitChange()
break
case o.yoq:{this.isLoadingAliases=!1
const{bioentityAliasInfosById:t}=e
for(const e of Object.keys(t))this.bioentityAliasInfosMap.set(e,t[e])}this.emitChange()
break
case o.sC4:{const{bioentityAliasInfosById:t}=e
for(const e of Object.keys(t))if(this.bioentityAliasInfosMap.has(e)){const n=new Set(this.getBioentityAliasInfos(e).map((e=>e.alias)))
for(const a of t[e])n.has(a.alias)||_addToMap(this.bioentityAliasInfosMap,e,a)}else this.bioentityAliasInfosMap.set(e,t[e])}this.emitChange()
break
case o.nfT:{const{fileId:t,bioentityAliasInfo:n}=e
if(!this.bioentityAliasInfosMap.has(t))break
_addToMap(this.bioentityAliasInfosMap,t,n)
this.emitChange()}break
case o.X1f:{const{fileId:t,alias:n}=e
if(!this.bioentityAliasInfosMap.has(t))break;(function _removeFromMap(e,t,n){const a=e.get(t),i=s.default.findIndex(a,(e=>n(e)))
if(-1===i)return!1
const o=r()(a,{$splice:[[i,1]]})
e.set(t,o)
return!0})(this.bioentityAliasInfosMap,t,(e=>e.alias===n))&&this.emitChange()}break
case o.d2o:{const{fileId:t,oldAlias:n,alias:a}=e
if(!this.bioentityAliasInfosMap.has(t))break
!function _updateMap(e,t,n,a){const i=e.get(t),o=s.default.findIndex(i,(e=>a(e))),l=r()(i[o],n),c=r()(i,{$splice:[[o,1,l]]})
e.set(t,c)}(this.bioentityAliasInfosMap,t,{alias:{$set:a}},(e=>e.alias===n))
this.emitChange()}break
case o.XTj:this.emitChange()
break
case o.Ude:this.isLoadingTags=!0
this.emitChange()
break
case o.JFe:case o.Mso:this.isLoadingTags=!1
this.emitChange()
break
case o.rAz:{const{fileId:t,hoistedTagsGraphById:n}=e
this.hoistedTagsMap.set(t,function _prepareHoistedTagsForStore(e){const t=[]
Object.entries(e).forEach((([e,n])=>{n.forEach((n=>{const i={...n,tagSchemaGraphId:(0,a.Lk)(e)}
t.push(i)}))}))
return t}(n))
this.emitChange()}break
case o.B5G:{const{newFileInfo:t}=e
for(const e of Object.keys(t))this.bioentityAliasInfosMap.set(e,t[e].bioentityAliasInfos)
this.emitChange()}break
case o.DQR:{const{fileId:t,tagSchema:n,tags:a}=e,i=this.fileStates.get(t)
if(null!=i){i.model().setTagSchema(n)
i.model().setTags(a)}this.emitChange()}break
case o.oe2:{const{id:t,bioentityAliasInfos:n}=e
n&&this.bioentityAliasInfosMap.set(t,n)
this.emitChange()}break
case o.DdP:this.emitChange()}return!0}}const u=new InventoryFileStore(l.Z)},118967:(e,t,n)=>{n.d(t,{Z:()=>SampleRolesPartiesSearchInput})
var a=n(989526),i=n(851422),r=n(838811),s=n(194170),o=n(198438),l=n(220798)
function SampleRolesPartiesSearchInput(e){var t
const n=(null===(t=e.typedValue)||void 0===t?void 0:t.type)===i.BaseTypedValueType.PARTIES?e.typedValue.partySummaries:[],handleSetValue=t=>{e.onSetCellData("",{typedValue:t})}
return a.createElement(o.D,{placeholder:"Search for user or team",enableNewEntityInput:!0,allowEmails:!0,allowTeams:!0,allowOrganizations:!1,allowBenchlingApps:e.allowBenchlingApps,shouldAllowMultiple:!0,userSearchType:o.t.All,onChange:t=>{e.handleUpdateTypedValue((0,s.jU)(t))},value:n,size:l.I.SMALL,emptyText:"No results found",onKeyDown:t=>{(0,r.Z)({event:t,value:e.typedValue,onSetValue:handleSetValue,onEscape:e.onEscape,onTabKey:e.onTabKey})}})}},353623:(e,t,n)=>{n.d(t,{P:()=>SampleRestrictionStatusEditor,d:()=>EditableSampleRestrictionStatusField})
var a=n(989526),i=n(136765),r=n(884743),s=n(465342),o=n(253075),l=n(946948)
function SampleRestrictionStatusEditor(e){return a.createElement(l.Z,{title:"",options:[{label:i.H2[i.nY.UNRESTRICTED],value:i.nY.UNRESTRICTED,dataTestAttrs:{component:"SampleControlRoles",element:"setUnrestrictedStatus"}},{label:i.H2[i.nY.RESTRICTED],value:i.nY.RESTRICTED,dataTestAttrs:{component:"SampleControlRoles",element:"setRestrictedStatus"}}],onChange:e.onChangeRestrictionStatus,selectedValue:e.restrictionStatus,isVertical:!e.isHorizontal,disabled:e.isReadOnly,hasBottomSpacing:!1})}function EditableSampleRestrictionStatusField(e){var t
const n=null!==(t=e.item.restrictionStatus)&&void 0!==t?t:i.nY.UNRESTRICTED,[l,c]=(0,a.useState)(n),[d,u]=(0,a.useState)(!1);(0,a.useEffect)((()=>{c(n)}),[d,n])
const m=(0,s.fn)(e.item),p=a.createElement(r.V,{item:e.item,itemSupportsSampleStatus:m})
return a.createElement(o.Z,{editor:a.createElement(SampleRestrictionStatusEditor,{restrictionStatus:l,onChangeRestrictionStatus:function onChangeRestrictionStatus(e){c(e)}}),isBeingEdited:d,isCompleteEnabled:!0,isWritable:!e.isDisabled&&m,viewer:p,onCancel:function handleCancel(){c(n)
u(!1)},onComplete:function handleComplete(){e.onComplete(n,l)
u(!1)},onEdit:function handleEdit(){u(!0)},isFullWidth:!0,dataTestAttrs:{component:"SampleControlRoles",element:"restrictionStatus"}})}},273155:(e,t,n)=>{n.d(t,{EX:()=>getRestrictedSampleUsersDisplayText,G9:()=>getRemoveSampleRestrictionOrSampleOwnersWarningText,T3:()=>getRestrictedSampleUsersHeaderText,tX:()=>getEditRestrictedSampleUsersDisabledMessage})
var a=n(477956),i=n(922805)
function getRestrictedSampleUsersHeaderText(){return(0,i.Eq)(a.F.V2)?"Restricted sample users":"Authorized users"}function getRestrictedSampleUsersDisplayText(){return getRestrictedSampleUsersHeaderText().toLowerCase()}function getEditRestrictedSampleUsersDisabledMessage(){return`You must ${(0,i.Eq)(a.F.V2)?"have permission":"be a sample owner"} to edit ${getRestrictedSampleUsersDisplayText()}`}function getRemoveSampleRestrictionOrSampleOwnersWarningText(){return`This will also remove all ${getRestrictedSampleUsersDisplayText()} and allow anyone to use this container.`}},314533:(e,t,n)=>{n.d(t,{Z:()=>SampleRestrictionStatusTypedValueSelector})
var a=n(989526),i=n(232606),r=n(136765),s=n(898766),o=n(851422)
function SampleRestrictionStatusTypedValueSelector(e){var t
const n=Object.values(r.nY).map((e=>({node:a.createElement("span",null,r.H2[e]),onUpdateKey:e}))),l=(null===(t=e.typedValue)||void 0===t?void 0:t.type)===o.BaseTypedValueType.SAMPLE_RESTRICTION_STATUS?e.typedValue.status:r.nY.UNRESTRICTED,c=r.H2[l]
return e.locked?a.createElement("span",null,c):a.createElement("div",{className:"u-position-relative"},a.createElement(s.Z,{locked:!1,isSelected:!0,staticDisplay:c,options:n,onUpdate:t=>{const n=Object.values(r.nY).find((e=>e===t));(0,i.Gp)(null!=n,`Invalid status selected: ${n}`)
e.onUpdate({type:o.BaseTypedValueType.SAMPLE_RESTRICTION_STATUS,status:n})},fullWidth:!0,lightHoverBackground:!0}))}},465342:(e,t,n)=>{n.d(t,{Cm:()=>getRestrictionAccessHeaderText,Fn:()=>canCurrentUserEditRestrictedSampleUsers,GF:()=>canCurrentUserSetSpecifiedRestrictionStatus,JK:()=>isItemRestricted,K9:()=>getRestrictionStatusText,LN:()=>isItemAvailableToCurrentUser,O0:()=>hasSampleOwners,OU:()=>getRestrictionStatusStringFromEnum,Pq:()=>getEditSampleRestrictionStatusDisabledMessage,Qj:()=>getRestrictionAccessDisplayText,V7:()=>canCurrentUserEditSampleOwners,XG:()=>getSampleOwnersText,_B:()=>getCICOWarningText,aQ:()=>getRestrictionStatusFromCaseInsensitiveLabel,cQ:()=>isFixedPlateWell,dV:()=>canCurrentUserEditAnyRestrictionStatus,fn:()=>doesItemSupportSampleStatus,fs:()=>canCurrentUserEditRestrictionStatus,lL:()=>doesItemHaveBlockingStatusWarning,nS:()=>hasRestrictedSampleUsers,p5:()=>getBlockingStatusWarningTooltip,q9:()=>getSampleStatusTooltip,r0:()=>queryForItemSampleSupport,t1:()=>doesCurrentUserHaveAccessForItem,u3:()=>getValidRestrictionStatusesForContainer,vS:()=>canCurrentUserUnrestrictSample,xg:()=>getCICOStatusText,zY:()=>isItemAvailable})
var a=n(769784),i=n(232606),r=n(136765),s=n(681896),o=n(91092),l=n(697134),c=n(477956),d=n(922805),u=n(319977),m=n(730981),p=n(379346),h=n(10584),E=n(808844)
const S=a.Ps`
  query IsContainerFixedPlateWellQuery($containerIds: [StrictString!]!)
  @skipAudit
  @engComponent(name: INVENTORY) {
    containers(ids: $containerIds) {
      ... on ContainerNode {
        id
        parentStorable {
          ... on StorableInterface {
            id
            storableSchema {
              ... on PlateSchemaNode {
                id
                plateSchemaType
              }
            }
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("InaccessibleInfo").fragment}
`
function isFixedPlateWell(e){const t=e.parentStorable
return!(null==t||function isParentInaccessible(e){return"InaccessibleInfoNode"===e.__typename}(t)||!function isPlate(e){return e.hasOwnProperty("plateSchemaType")}(t.storableSchema))&&t.storableSchema.plateSchemaType===m.Ch.FIXED_PLATE}function doesItemSupportSampleStatus(e){return p.ZP.isContainer(e.id)&&!isFixedPlateWell(e)}async function queryForItemSampleSupport(e){return p.ZP.isContainer(e)&&!await async function queryForFixedPlateWellhood(e){const{containers:t}=await(0,s.doQuerySafe)({query:S},{variables:{containerIds:[e]}}),n=t[0];(0,i.hu)(!(0,l.CZ)(n),"Container must be accessible.")
return isFixedPlateWell(n)}(e)}function getCICOStatusText(e,t,{hideAssignee:n,includeTimeAndComment:a=!1}){if(!t)return"N/A"
const i=e.checkOutStatusInfo
return null==i?"Available":getCICOWarningText(i,{hideAssignee:n,includeTimeAndComment:a})}function getCICOWarningText(e,{hideAssignee:t,includeTimeAndComment:n}){const a=function checkOutStatusInfoToStatusText(e){return(0,E.kC)((0,E.Vx)(e.status))}(e)
let i
i=t||null==e.assignee?a:e.isAssignedToCurrentUser&&!(0,u.HU)(e.assignee.id)?`${a} for you`:`${a} for ${e.assignee.name}`
return n?`${i} on ${(0,h.UT)(e.createdAt)}${e.comment?`\n"${e.comment}"`:""}`:i}function getRestrictionAccessHeaderText(){return(0,d.Eq)(c.F.V2)?"Restriction access":"Authorization"}function getRestrictionAccessDisplayText(e){var t
if(!isItemRestricted(e))return r.uh[r.n0.NOT_APPLICABLE]
const n=(0,d.Eq)(c.F.V2)?r.uh[r.n0.ACCESS_GRANTED]:"Authorized",a=(0,d.Eq)(c.F.V2)?r.uh[r.n0.NO_ACCESS]:"Unauthorized"
return(null===(t=e.sampleRoles)||void 0===t?void 0:t.isCurrentUserRestrictedSampleUser)?n:a}function isItemAvailable(e){return null==e||null==e.checkOutStatusInfo||e.checkOutStatusInfo.status===r.vH.AVAILABLE}function isItemAvailableToCurrentUser(e){var t
return isItemAvailable(e)||Boolean(null===(t=null==e?void 0:e.checkOutStatusInfo)||void 0===t?void 0:t.isAssignedToCurrentUser)}function isItemRestricted(e){return(0,d.Eq)(c.F.V2)?e.restrictionStatus===r.nY.RESTRICTED:hasSampleOwners(e)}function getSampleOwnersText(e,t){var n,a,i
if(0===(null!==(i=null===(a=null===(n=e.sampleRoles)||void 0===n?void 0:n.sampleOwners)||void 0===a?void 0:a.length)&&void 0!==i?i:0))return t?"None":"N/A"
return e.sampleRoles.sampleOwners.map((e=>e.name)).join(", ")}function getRestrictionStatusFromCaseInsensitiveLabel(e){const t=e.toUpperCase().trim()
return Object.values(r.nY).includes(t)?t:"N/A"===e.toUpperCase().trim()?r.nY.NOT_APPLICABLE:null}function getValidRestrictionStatusesForContainer(){return Object.values(r.nY).filter((e=>e!==r.nY.NOT_APPLICABLE))}function getRestrictionStatusStringFromEnum(e){return r.H2[e]}function getRestrictionStatusText(e,t){var n
return t?getRestrictionStatusStringFromEnum(null!==(n=e.restrictionStatus)&&void 0!==n?n:r.nY.UNRESTRICTED):"N/A"}function hasSampleOwners(e){var t,n,a
return(null!==(a=null===(n=null===(t=null==e?void 0:e.sampleRoles)||void 0===t?void 0:t.sampleOwners)||void 0===n?void 0:n.length)&&void 0!==a?a:0)>0}function doesCurrentUserHaveAccessForItem(e){var t
return null==e||!isItemRestricted(e)||Boolean(null===(t=null==e?void 0:e.sampleRoles)||void 0===t?void 0:t.isCurrentUserRestrictedSampleUser)}function doesItemHaveBlockingStatusWarning(e){return!doesCurrentUserHaveAccessForItem(e)&&(0,d.Eq)(c.F.V3)}function getBlockingStatusWarningTooltip(e){return doesItemHaveBlockingStatusWarning(e)?"You must be a restricted sample user to edit this item":null}function hasRestrictedSampleUsers(e){var t,n,a
return(null!==(a=null===(n=null===(t=e.sampleRoles)||void 0===t?void 0:t.restrictedSampleUsers)||void 0===n?void 0:n.length)&&void 0!==a?a:0)>0}function canCurrentUserEditRestrictionStatus(e){var t,n,a,i
return e.restrictionStatus===r.nY.RESTRICTED?null!==(n=null===(t=e.permissions)||void 0===t?void 0:t.canUnrestrictSamples)&&void 0!==n&&n:null!==(i=null===(a=e.permissions)||void 0===a?void 0:a.canRestrictSamples)&&void 0!==i&&i}function canCurrentUserEditAnyRestrictionStatus(e){var t,n,a,i
return null!==(n=null===(t=e.permissions)||void 0===t?void 0:t.canRestrictSamples)&&void 0!==n&&n||null!==(i=null===(a=e.permissions)||void 0===a?void 0:a.canUnrestrictSamples)&&void 0!==i&&i}function canCurrentUserSetSpecifiedRestrictionStatus(e,t){return t===r.nY.RESTRICTED?function canCurrentUserRestrictSample(e){var t,n
return e.restrictionStatus!==r.nY.UNRESTRICTED||null!==(n=null===(t=e.permissions)||void 0===t?void 0:t.canRestrictSamples)&&void 0!==n&&n}(e):canCurrentUserUnrestrictSample(e)}function canCurrentUserUnrestrictSample(e){var t,n,a,i,s,o
const l=0===(null!==(n=null===(t=e.sampleRoles)||void 0===t?void 0:t.restrictedSampleUsers)&&void 0!==n?n:[]).length||null!==(i=null===(a=e.permissions)||void 0===a?void 0:a.canEditRestrictedSampleUsers)&&void 0!==i&&i
return e.restrictionStatus!==r.nY.RESTRICTED||null!==(o=null===(s=e.permissions)||void 0===s?void 0:s.canUnrestrictSamples)&&void 0!==o&&o&&l}function canCurrentUserEditSampleOwners(e){var t,n
return(null===(t=e.permissions)||void 0===t?void 0:t.admin)||null!=(null===(n=e.sampleRoles)||void 0===n?void 0:n.sampleOwners)&&0===e.sampleRoles.sampleOwners.length}function canCurrentUserEditRestrictedSampleUsers(e,t=!0){var n,a,i,s,o
const l=Boolean(null===(n=e.sampleRoles)||void 0===n?void 0:n.isCurrentUserSampleOwner)
return(0,d.Eq)(c.F.V2)?e.restrictionStatus===r.nY.RESTRICTED?l||null!==(i=null===(a=e.permissions)||void 0===a?void 0:a.canEditRestrictedSampleUsers)&&void 0!==i&&i:t&&null!==(o=null===(s=e.permissions)||void 0===s?void 0:s.canRestrictSamples)&&void 0!==o&&o:l}function getSampleStatusTooltip(e,{includeAvailability:t,includeAuthorization:n,hideAssignee:a=!1}){const i=n&&!doesCurrentUserHaveAccessForItem(e)?getRestrictionAccessDisplayText(e):"",r=t&&!isItemAvailable(e)?getCICOWarningText(e.checkOutStatusInfo,{hideAssignee:a,includeTimeAndComment:!0}):""
return i+(i&&r?"\n":"")+r}function getEditSampleRestrictionStatusDisabledMessage(e,t){return`Sorry, you have insufficient permissions to ${e===r.nY.RESTRICTED?"unrestrict":"restrict"} ${t?"this sample":"one or more of the selected samples"}.`}},328867:(e,t,n)=>{n.d(t,{CC:()=>checkSamplesForStatusWarnings,F:()=>SampleStatusWarning,RO:()=>canProceedWithSamples,Tz:()=>checkForSampleStatusWarnings,VD:()=>conditionallyRenderSampleStatusWarning,uk:()=>h})
var a=n(769784),i=n(989526),r=n(681896),s=n(91092),o=n(697134),l=n(477956),c=n(922805),d=n(465342),u=n(255776),m=n(804083),p=n(379346)
const h=a.Ps`
  query SampleStatusWarningQuery($sampleIds: [StrictString!]!) @skipAudit @engComponent(name: INVENTORY) {
    storables(ids: $sampleIds) {
      ... on StorableInterface {
        id
        sortKey: name
      }
      ... on ContainerNode {
        id
        checkOutStatusInfo: checkOutStatusInfoJson
        sampleRoles {
          ...SampleRolesGraphQL
        }
        restrictionStatus
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,s.f)("SampleRoles").fragment}
  ${(0,s.f)("InaccessibleInfo").fragment}
`
function checkForWarnings(e,t,n=!1,a=!1){const i=e.filter((e=>!(0,d.LN)(e)||!(0,d.t1)(e)))
if(a||i.length>0){const a=e.reduce(((e,t)=>({...e,[t.id]:t})),{})
return{shouldShowWarning:!0,samples:(n?i.map((e=>e.id)):t).map((e=>{var t
return null!==(t=a[e])&&void 0!==t?t:{id:e}}))}}return{shouldShowWarning:!1}}function checkSamplesForStatusWarnings({samples:e,showOnlySamplesWithWarnings:t=!1}){if(!(0,c.Eq)(l.F.V1))return{shouldShowWarning:!1}
return checkForWarnings(e.map((({id:e,name:t,checkOutStatusInfo:n,sampleRoles:a,restrictionStatus:i})=>({id:e,sortKey:t,checkOutStatusInfo:n,sampleRoles:a,restrictionStatus:i}))),e.map((({id:e})=>e)),t)}async function checkForSampleStatusWarnings({sampleIds:e,showOnlySamplesWithWarnings:t=!1,shouldAlwaysShowWarning:n=!1}){const a=e.filter((e=>p.ZP.isStorable(e)))
if(!n&&!(0,c.Eq)(l.F.V1))return{shouldShowWarning:!1}
return checkForWarnings((await(0,r.doQuerySafe)({query:h},{variables:{sampleIds:a}})).storables.flatMap((e=>(0,o.CZ)(e)?[]:[e])),e,t,n)}function canProceedWithSamples(e,t,n){return!t||n&&e.length>0}function SampleStatusWarning(e){var t
const[n,a]=(0,i.useState)(!0)
return i.createElement(i.Fragment,null,i.createElement(m.Z,{canDeselectSamples:null===(t=e.canSelectMultiple)||void 0===t||t,shouldProceed:e.shouldProceed,onChangeShouldProceed:e.setShouldProceed,onChangeHasOverridableWarnings:a,hasOverridableWarnings:n,trackingParamsWithSampleIds:{...e.trackingParams,sampleIds:e.sampleIds},samples:e.samples,selectedSampleIds:e.selectedSampleIds,setSelectedSampleIds:e.setSelectedSampleIds}),i.createElement(u.Z,{samples:e.samples,allowSelection:!n,selectedSampleIds:e.selectedSampleIds,setSelectedSampleIds:e.setSelectedSampleIds,canSelectMultiple:e.canSelectMultiple}))}function conditionallyRenderSampleStatusWarning({shouldShowStatusWarning:e,samples:t,trackingParams:n,selectedSampleIds:a,setSelectedSampleIds:r,shouldProceed:s,setShouldProceed:o,canSelectMultiple:l}){return e&&null!=t?i.createElement(SampleStatusWarning,{sampleIds:t.map((({id:e})=>e)),selectedSampleIds:a,setSelectedSampleIds:r,shouldProceed:s,setShouldProceed:o,trackingParams:n,samples:t,canSelectMultiple:l}):null}},301001:(e,t,n)=>{n.d(t,{Cx:()=>getAutomationInputFileAndCopiedOutputFile,DD:()=>startProcessingAutomationOutputFile,TW:()=>removeBlobFromInputFile,VM:()=>createAutomationInputFileBlob,_A:()=>bulkUploadAutomationOutputFileBlobs,a3:()=>clearAutomationOutputFileBlob,cY:()=>updateAutomationOutputFileParams,g_:()=>bulkUpdateAutomationOutputFileBlobs,hg:()=>cancelCustomTransform,hm:()=>fetchAutomationOutputFileAndStructuredTables,m5:()=>getAutomationFileStatus,yQ:()=>updateAutomationErrorFileBlob,zo:()=>getProcessingSummaryStatistics})
var a=n(771398),i=n(8747)
function createAutomationInputFileBlob(e,t,n){return a.s0({url:"/1/api/assay-runs:create-automation-input-file-blob",data:{assayRunId:e,configName:t,copyToOutputFile:n}}).then((e=>i.Q5(e.status_url)))}function removeBlobFromInputFile(e,t){return a.s0({url:"/1/api/automation-files:remove-blob-from-automation-input-file",data:{runId:e,configName:t}})}function bulkUploadAutomationOutputFileBlobs({runId:e,configName:t,blobIds:n,outputFileType:i}){return a.s0({url:"/1/api/automation-files:bulk-upload-automation-output-file-blobs",data:{runId:e,configName:t,blobIds:n,outputFileType:i}})}function clearAutomationOutputFileBlob(e){return a.s0({url:"/1/api/automation-files:update-automation-output-file-blob",data:{runId:null,configName:null,automationOutputFileId:e,blobId:null}})}function bulkUpdateAutomationOutputFileBlobs({runId:e,outputFiles:t}){return a.s0({url:"/1/api/automation-files:bulk-update-automation-output-file-blobs",data:{runId:e,outputFiles:t}})}function updateAutomationOutputFileParams(e,t){return a.s0({url:"/1/api/automation-files:update-automation-output-file-params",data:{runId:null,configName:null,automationOutputFileId:e,...t}})}function fetchAutomationOutputFileAndStructuredTables(e,t){return a.s0({url:`/1/api/automation-files/${e}/file-and-structured-tables`,data:{fileId:t}})}function getAutomationInputFileAndCopiedOutputFile(e,t){return a.s0({url:`/1/api/automation-files/${e}/file-and-copied-output-file`,data:{copiedAutomationOutputFileId:t}})}function getAutomationFileStatus(e){return a.UJ(`/1/api/automation-files/${e}/status`)}function startProcessingAutomationOutputFile(e,t){return i.by({contentType:"application/json",data:JSON.stringify({assayRunId:null,configName:null,automationOutputFileId:e,entryId:t}),type:"POST",dataType:"json",url:"/1/api/assay-runs:process-automation-output-file"})}function updateAutomationErrorFileBlob(e,t,n){return a.s0({url:"/1/api/automation-files:update-automation-error-file-blob",data:{runId:e,configName:t,blobId:n}})}function cancelCustomTransform(e){return a.Ry({url:"/1/api/automation-files:cancel-custom-transform",data:{automationFileId:e}})}function getProcessingSummaryStatistics(e){return a.UJ(`/1/api/automation-files/${e}/get-processing-summary-statistics`,{automationOutputFileId:e})}},270497:(e,t,n)=>{n.d(t,{L:()=>resolveInputFileAndTransformsStatuses,Z:()=>getStatusForInputFileViewer})
var a=n(977989)
function getStatusForInputFileViewer(e){var t,n
const a=null!==(n=null===(t=e.transformFiles)||void 0===t?void 0:t.map((e=>null==e?void 0:e.status)))&&void 0!==n?n:[]
return resolveInputFileAndTransformsStatuses(e.status,a)}function resolveInputFileAndTransformsStatuses(e,t){if(t.length&&e===a.q.SUCCEEDED){const e=t.filter((e=>void 0!==e))
return e.some((e=>e===a.q.FAILED))?a.q.FAILED:e.every((e=>e===a.q.SUCCEEDED))?a.q.SUCCEEDED:a.q.RUNNING}return e}},356e3:(e,t,n)=>{n.d(t,{IE:()=>fetchBartenderLabelTemplates,KQ:()=>bartenderRequestPreview,Yw:()=>fetchBartenderPrinters,c0:()=>bartenderPrintItems,uR:()=>makePlainBartenderServer})
var a=n(64558),i=n(232606),r=n(525098)
function bartenderUrl(e,t){return`${e}${e.endsWith("/")?"":"/"}${t}`}class BartenderError extends r.Z{}function isBartenderDataEntryRequiredResponse(e){return!1===e.success&&"DataEntryRequired"===e.statusCode}function isBartenderPrintSuccessResponse(e){return!0===e.success}async function fetchBartenderPrinters(e,t){const n=await fetch(bartenderUrl(e,"api/v1/printers"),{signal:null==t?void 0:t.signal})
if(!n.ok)throw new BartenderError(`${n.status} ${n.statusText}`)
const a=await n.json()
if(null==a.serverPrinters)throw new BartenderError("Unexpected response from server")
return a.serverPrinters}async function fetchBartenderLabelTemplates(e,t){const n=bartenderUrl(e,"api/v1/libraries"),a=await fetch(n,{signal:null==t?void 0:t.signal})
if(!a.ok)throw new BartenderError(`${a.status} ${a.statusText}`)
const i=await a.json()
if(!Array.isArray(i))throw new BartenderError("Unexpected response from server")
const r=i.find((e=>"Librarian"===e.name))
if(null==r)throw new BartenderError('Bartender library "Librarian" not found')
const s=bartenderUrl(e,`api/v1/libraries/${r.id}`),o=await fetch(s,{signal:null==t?void 0:t.signal})
if(!o.ok)throw new BartenderError(`${o.status} ${o.statusText}`)
const l=await o.json()
if(null==l.library||null==l.contents)throw new BartenderError("Unexpected response from server")
return l.contents.map((e=>({libraryId:r.id,relativePath:e})))}function postJson(e,t,n){return fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),signal:null==n?void 0:n.signal})}async function makeInitialPrintRequest({bartenderBaseUrl:e,labelTemplate:t,printer:n,copies:a,abortController:i}){return await postJson(bartenderUrl(e,"api/v1/print"),{libraryID:t.libraryId,relativePath:t.relativePath,printer:n,copies:a},i)}async function makeFollowupPrintRequest({bartenderBaseUrl:e,abortController:t,labelTemplate:n,labelParams:i,printer:r,copies:s,dataEntryRequiredResponse:o}){var l,c
const d=bartenderUrl(e,"api/v1/print"),u={libraryID:n.libraryId,relativePath:n.relativePath,printer:r,copies:s,printRequestID:o.printRequestID,dataEntryControls:(0,a.m8)(Object.entries(o.requiredDataEntryControls).map((([e,t])=>{var n
return[e,null!==(n=i[e.toLowerCase()])&&void 0!==n?n:""]})))},m=await postJson(d,u,t)
let p
try{p=await m.json()}catch(e){throw new BartenderError(`[2] ${m.status} ${m.statusText} (could not parse response body)`)}if(!0===p.success)return p
throw!1===p.success?new BartenderError(`[2] ${p.statusCode} ${p.error}: ${null!==(c=null===(l=p.printMessages)||void 0===l?void 0:l.join("\n"))&&void 0!==c?c:""}`):new BartenderError(`[2] ${m.status} ${m.statusText}: unexpected response from server`)}async function loadResponseJson(e){var t,n
let a
try{a=await e.json()}catch(t){throw new BartenderError(`[1] ${e.status} ${e.statusText} (could not parse response body)`)}if(!isBartenderPrintSuccessResponse(a)&&!isBartenderDataEntryRequiredResponse(a))throw!1===a.success?new BartenderError(`[1] ${a.statusCode} ${a.error}: ${null!==(n=null===(t=a.printMessages)||void 0===t?void 0:t.join("\n"))&&void 0!==n?n:""}`):new BartenderError(`[1] ${e.status} ${e.statusText}: unexpected response from server`)
return a}function bartenderPrintItems({bartenderBaseUrl:e,labelTemplate:t,printableItemsLabelParams:n,printer:a,copies:i}){let r=0,s=0,o=Promise.resolve()
const l=[...Array(n.length)].map((()=>makeInitialPrintRequest({bartenderBaseUrl:e,labelTemplate:t,printer:a,copies:i}).then((e=>loadResponseJson(e))).then((l=>{if(isBartenderDataEntryRequiredResponse(l)){const c=n[s]
s++
o=o.then((()=>makeFollowupPrintRequest({bartenderBaseUrl:e,labelTemplate:t,labelParams:c,printer:a,copies:i,dataEntryRequiredResponse:l}))).then((e=>{r++}))}else isBartenderPrintSuccessResponse(l)&&r++}))))
let c=null
return Promise.allSettled(l).then((e=>{for(const t of e)if("rejected"===t.status){c=t.reason
break}return o})).catch((e=>{c=e})).then((()=>({numSuccessfulPrints:r,error:c})))}async function bartenderRequestPreview({bartenderBaseUrl:e,abortController:t,labelTemplate:n,labelParams:a}){const r=await async function bartenderPrintItem({bartenderBaseUrl:e,abortController:t,labelTemplate:n,labelParams:a,printer:r,copies:s}){const o=await makeInitialPrintRequest({bartenderBaseUrl:e,labelTemplate:n,printer:r,copies:s,abortController:t}),l=await loadResponseJson(o)
if(isBartenderDataEntryRequiredResponse(l))return await makeFollowupPrintRequest({bartenderBaseUrl:e,abortController:t,labelTemplate:n,labelParams:a,printer:r,copies:s,dataEntryRequiredResponse:l});(0,i.hu)(isBartenderPrintSuccessResponse(l),"Response is not a bartender print success response")
return l}({bartenderBaseUrl:e,abortController:t,labelTemplate:n,labelParams:a,printer:"PDF",copies:1})
if(null==r.filePath)throw new BartenderError('Problem requesting print preview: response from BarTender server does not contain "filePath".')
return r.filePath}function makePlainBartenderServer({url:e,name:t}){return{url:e,name:t}}},315978:(e,t,n)=>{n.d(t,{Dn:()=>LabelPrintingActions_createLabelTemplate,SE:()=>LabelPrintingActions_createPrinter,kM:()=>LabelPrintingActions_deleteLabelTemplate,dA:()=>LabelPrintingActions_deletePrinter,j9:()=>LabelPrintingActions_fetchLabelTemplates,LI:()=>LabelPrintingActions_fetchPrinters,cg:()=>printLabels,Jr:()=>LabelPrintingActions_updateLabelTemplate,CN:()=>LabelPrintingActions_updatePrinter})
var a=n(675649),i=n(787004),r=n(998656),s=n(771398)
var o=n(947730),l=n(974913),c=n(216101)
function printLabels(e,t,n,a=1){return r.cg(e,t,n,a).done((({error:e})=>{l.ZP.success("Labels sent to printer")
if(e){const t=Object.keys(e)
t.length>0&&l.ZP.error(function formatPrinterErrors(e){return`Some labels failed to print for the following reasons:\n\t- ${e.join("\n\t- ")}`}(t))}})).fail(l.ZP.notifyError)}function LabelPrintingActions_fetchPrinters(){(function fetchPrinters(){return s.xA("/1/api/printers")})().done((({data:e})=>{o.Z.dispatch({actionType:i.I6H,printers:e})})).fail(l.ZP.notifyError)}function LabelPrintingActions_createPrinter(e,t,{name:n,address:r,port:d,description:u}){(function createPrinter(e){return s.ty({url:"/1/api/printers",data:e})})({registryId:e,name:n,address:r,port:d,description:u}).done((({printer:n})=>{o.Z.dispatch({actionType:i.o4f,printer:n})
a.c4(null,c.getRegistryPrintersUrl(t,e))
l.ZP.success("Created printer successfully")})).fail(l.ZP.notifyError)}function LabelPrintingActions_updatePrinter(e,{name:t,address:n,port:a,description:r}){o.Z.dispatch({actionType:i.xJK});(function updatePrinter(e,t){return s.Yh({url:`/1/api/printers/${e}`,data:t})})(e,{name:t,address:n,port:a,description:r}).done((({printer:e})=>{o.Z.dispatch({actionType:i.pHS,printer:e})
l.ZP.success("Updated printer successfully")})).fail((e=>{l.ZP.notifyError(e)
o.Z.dispatch({actionType:i.zVQ})}))}function LabelPrintingActions_deletePrinter(e){(function deletePrinter(e){return s.$v({url:`/1/api/printers/${e}`})})(e).done((()=>{o.Z.dispatch({actionType:i.MY9,printerId:e})
l.ZP.success("Printer deleted")})).fail(l.ZP.notifyError)}function LabelPrintingActions_fetchLabelTemplates(){(function fetchLabelTemplates(){return s.xA("/1/api/label-templates")})().done((({data:e})=>{o.Z.dispatch({actionType:i.GTe,labelTemplates:e})})).fail(l.ZP.notifyError)}function LabelPrintingActions_createLabelTemplate(e,t,{name:n,zplTemplate:r}){(function createLabelTemplate(e){return s.ty({url:"/1/api/label-templates",data:e})})({registryId:e,name:n,zplTemplate:r}).done((({labelTemplate:n})=>{o.Z.dispatch({actionType:i.JoM,labelTemplate:n})
a.c4(null,c.getRegistryLabelTemplatesUrl(t,e))
l.ZP.success("Created label template successfully")})).fail(l.ZP.notifyError)}function LabelPrintingActions_updateLabelTemplate(e,{name:t,zplTemplate:n}){o.Z.dispatch({actionType:i.dlL});(function updateLabelTemplate(e,t){return s.Yh({url:`/1/api/label-templates/${e}`,data:t})})(e,{name:t,zplTemplate:n}).done((({labelTemplate:e})=>{o.Z.dispatch({actionType:i.O4G,labelTemplate:e})
l.ZP.success("Updated label template successfully")})).fail((e=>{l.ZP.notifyError(e)
o.Z.dispatch({actionType:i.dS9})}))}function LabelPrintingActions_deleteLabelTemplate(e){(function deleteLabelTemplate(e){return s.$v({url:`/1/api/label-templates/${e}`})})(e).done((()=>{o.Z.dispatch({actionType:i.BVr,labelTemplateId:e})
l.ZP.success("Label template deleted")})).fail(l.ZP.notifyError)}},392911:(e,t,n)=>{n.d(t,{G2:()=>a.G2,Xt:()=>i,pI:()=>r,qe:()=>getTenantLevelLabelPrintingSettingsURL})
var a=n(256605)
const i=[a.G2.REMOTE_PRINT_SERVER,a.G2.LEGACY_HTTP,a.G2.LEGACY_TCP],r={[a.G2.BARTENDER]:"BarTender",[a.G2.ZEBRA_BROWSER_PRINT]:"Zebra browser print",[a.G2.REMOTE_PRINT_SERVER]:"Remote print application",[a.G2.LEGACY_HTTP]:"Legacy HTTP print",[a.G2.LEGACY_TCP]:"Legacy TCP print"}
function getTenantLevelLabelPrintingSettingsURL(){return"/label-printing-settings"}},998656:(e,t,n)=>{n.d(t,{Yy:()=>putLabelPrintingConfig,cg:()=>printLabels,if:()=>bulkGetFilledLabelTemplate,nS:()=>logPrint})
var a=n(771398),i=n(8747)
function printLabels(e,t,n,a=1){return i.ty({url:"/1/api/label-printing:print-labels",data:{itemIds:e,labelTemplateId:t,printerId:n,copies:a}})}function logPrint(e,t,n=1){return a.s0({url:"/1/api/label-printing:log-print",data:{itemIds:e,labelTemplateName:t,copies:n}})}function bulkGetFilledLabelTemplate(e,t){return a.s0({url:"/1/api/label-printing:bulk-get-filled-label-template",data:{itemIds:e,labelTemplateId:t}})}function putLabelPrintingConfig(e){return a.sA({url:"/1/api/label-printing-config",data:e})}},921554:(e,t,n)=>{n.d(t,{C2:()=>o,Cj:()=>i,Z_:()=>s,fT:()=>r,o6:()=>stringToPastelColor,u_:()=>stringToColor,ub:()=>hslTupleToCSSAttr,vx:()=>l,wC:()=>randomPastelColor})
var a=n(85758)
const i=["#F7977A","#F9AD81","#FDC68A","#FFF79A","#C4DF9B","#A2D39C","#82CA9D","#7BCDC8","#6ECFF6","#7EA7D8","#8493CA","#8882BE","#A187BE","#BC8DBF","#F49AC2","#F6989D"],r="#C7B0E3",s="#84B0DC",o=["#F58A5E","#FAAC61","#FFEF86","#F8D3A9","#B1FF67","#75C6A9","#B7E6D7","#85DAE9",s,"#9EAFD2",r,"#FF9CCD","#D6B295","#D59687","#B4ABAC","#C6C9D1"]
function hslTupleToCSSAttr(e,t,n){return`hsl(${e},${t}%,${n}%)`}function randomPastelColor(){const e=Math.floor(Math.random()*o.length)
return o[e]}function stringToIndex(e,t){let n=0
for(let t=0;t<e.length;t++){n=(n<<5)-n+e.charCodeAt(t)
n|=0}return(n%t+t)%t}function stringToPastelColor(e){const t=stringToIndex(e,o.length)
return o[t]}function stringToColor(e,t){const n=stringToIndex(e,360)
return a.hsl(n,1,t).toString()}const l=[],c=[0,1,2,3]
for(let e=0;e<c.length;e++){const t=c[e],n=[0,1,2,3]
for(let e=0;e<n.length;e++){const a=n[e]
l.push(o[t+4*a])}}},133240:(e,t,n)=>{n.d(t,{$C:()=>listingComplete,Dx:()=>listingMarkStale,K8:()=>listingFail,Kp:()=>l,Lm:()=>s,PE:()=>listingRestart,Tn:()=>o,Zi:()=>listingStart})
var a=n(602652),i=n(756258)
const r={offset:a.number.isRequired,limit:a.number.isRequired,total:a.number.isRequired,isExact:a.bool},s=a.shape(r),o=a.shape({...r,totalWithHidden:a.number.isRequired}),l=a.shape({isLoading:a.bool.isRequired,isStale:a.bool.isRequired,loadSuccess:a.bool.isRequired,items:a.array,pagination:(0,i.Z)(o,(e=>e.loadSuccess)),param:a.any})
function listingStart(e){return{isLoading:!0,isStale:!1,loadSuccess:!1,items:null,pagination:null,param:e}}function listingRestart(e){return{...e,isStale:!1,isLoading:!0}}function listingMarkStale(e){return{...e,isStale:!0}}function listingComplete(e,t,n){return{...e,isLoading:!1,isStale:!1,loadSuccess:!0,items:t,pagination:n}}function listingFail(e){return{...e,isLoading:!1,isStale:!1,loadSuccess:!1,items:null,pagination:null}}},391028:(e,t,n)=>{n.d(t,{O:()=>l,Z:()=>c})
var a=n(440281),i=n.n(a),r=n(531041),s=n(232606),o=n(126059)
const l="change"
class Store{static initClass(){this.__STORES=[]}constructor(e){this.dispatchIndex=e.register((e=>{(0,s.hu)(null!=e.actionType,"Undefined payload action dispatched to store")
return this.payloadHandler(e)}))
this.resetState()
Store.__STORES.push(this)}__serverBootstrap(e){return r.default.extend(this,e)}payloadHandler(e){throw new Error("payloadHandler has not been implemented")}resetState(){throw new Error("resetState has not been implemented")}connect(e){return t=>(0,o.Z)(this,e,t)}emitChange(e){return this.trigger(l,e)}addChangeListener(e){return this.on(l,e)}removeChangeListener(e){if(null==e)throw new Error("Attempted to removeChangeListener with null callback")
return this.off(l,e)}}Store.initClass()
r.default.extend(Store.prototype,i().Events)
const c=Store},138966:(e,t,n)=>{n.d(t,{Re:()=>clearNavigationWarnings,UC:()=>getPreviousURL,ZP:()=>navigateToURL,rJ:()=>registerNavigationWarning})
var a=n(440281),i=n.n(a)
const r=new Map
function registerNavigationWarning(e){const t=Symbol(e)
r.set(t,e)
return()=>{r.delete(t)}}function clearNavigationWarnings(){r.clear()}let s=null
function getPreviousURL(){return null!=s?s:document.referrer}function navigateToURL(e,{skipTrigger:t=!1,replace:n=!1}={}){const a=window.location.pathname+window.location.search
if(a===e)return!1
if(r.size>0){const e=[...r.values()].reverse().join("\n")
if(!window.confirm(e))return!1}s=a
i().history.navigate(e,{trigger:!t,replace:n})
document.documentElement.scrollTop=0
document.body.scrollTop=0
return!0}},630089:(e,t,n)=>{n.d(t,{Z:()=>d})
var a=n(602652),i=n(989526),r=n(531041),s=n(675649),o=n(138966),l=n(430092),c=n(843059)
function disallowedPropType(e,t,n){return null!=e[t]?new Error(`${t} should not be specified.`):null}class BenchLink extends i.Component{constructor(){super(...arguments)
this.onClick=e=>{if(!s.Gn(e))return
const t=this.props.fileId||c.Z.getFileIdForUrl(this.props.href),n=s.QW(this.props.href)
if(null!=t&&null!=n){e.preventDefault()
r.default.defer((()=>{(0,o.ZP)(n)}))}}}componentDidMount(){const e=[this.props.href],t=[]
r.default.defer((()=>{l.Z.syncLinks(e,t)}))}UNSAFE_componentWillReceiveProps(e){if(this.props.href===e.href)return
const t=[e.href],n=[this.props.href]
r.default.defer((()=>{l.Z.syncLinks(t,n)}))}componentWillUnmount(){const e=[],t=[this.props.href]
r.default.defer((()=>{l.Z.syncLinks(e,t)}))}render(){return i.createElement("a",{...r.default.omit(this.props,"fileId"),onClick:this.onClick,target:"_blank",rel:"noopener noreferrer"})}}BenchLink.propTypes={href:a.string.isRequired,fileId:a.string,onClick:disallowedPropType,target:disallowedPropType,children:a.node}
const d=BenchLink},441527:(e,t,n)=>{n.d(t,{$t:()=>getSchemaFieldsForLookupStep,HY:()=>hasLookupStepContext,Jb:()=>getLookupInfoArrayForLookupConfig,NL:()=>mapSchemaInterfaceGraphQLToSchemaInterfaceExtendingSchema,Nx:()=>getConstantReplicationFactor,QJ:()=>getStepItemWithSourceDestinationType,RJ:()=>getIconForLookupStepInfo,Sm:()=>getLookupStepInfoWithType,Y3:()=>filterOptionsForFieldType,au:()=>getItemStringForLookupStepType,b0:()=>isFieldStep,bM:()=>getPlateOrBoxContainerLabel,ct:()=>getItemTypeForResultsStep,ed:()=>getObjectTypesForLookupStepInfo,gW:()=>canFieldBePlate,ku:()=>N,n0:()=>getFollowingStepTypes,oe:()=>getRequiredLinkSchema,pc:()=>inferTypeFromLookupStepInfo,pr:()=>getLookupStepSchemaId,r2:()=>O,xH:()=>canFieldBeBox,xZ:()=>getStepDisplayInfo,zP:()=>getLinkSchemaForLookupStep})
var a=n(157530),i=n(382857),r=n(232606),s=n(814099),o=n(323539),l=n(348920),c=n(675649),d=n(459830),u=n(264867),m=n(379112),p=n(552648),h=n(877288),E=n(730981),S=n(407307),T=n(497790),g=n(217042),f=n(379346),I=n(556543),A=n(901113),y=n(878385),_=n(514946),C=n(863940)
const R=[C.fN.SCHEMA_FIELD,C.fN.FILTER],N=[C.fN.ALIASES,C.fN.BARCODE,C.fN.CHEMICAL_STRUCTURE,C.fN.CONCENTRATION,C.fN.COUNT,C.fN.NAME,C.fN.QUANTITY,C.fN.REGISTRY_IDENTIFIER,C.fN.RESIDUES,C.fN.WELL_COORDINATES]
function isFieldStep(e){return R.includes(e.type)}function hasLookupStepContext(e){return null!=e.lookupStepContext}function getLookupStepInfoWithType(e){if(hasLookupStepContext(e)){return getStepItemWithSourceDestinationType(e)}return e}function getStepItemWithSourceDestinationType(e){const t=e.lookupStepContext
let n=t.length-1,a=t[n]
for(;a&&C.eF.includes(a.lookupStep.type);){n-=1
a=t[n]}return a}function _canFieldBeStorableOfType(e,t){if(e.fieldType!==T.FieldType.STORABLE_LINK)return!1
const n=(0,T.getRequiredLinkStorableSchema)(e)
if(null==n)return!0
switch(t){case d.StorableItem.CONTAINER:return f.ZP.isContainerSchema(n.id)
case d.StorableItem.PLATE:return f.ZP.isPlateSchema(n.id)
case d.StorableItem.BOX:return f.ZP.isBoxSchema(n.id)
case d.StorableItem.LOCATION:return f.ZP.isLocationSchema(n.id)
default:(0,r.hu)(!1,"Unexpected storable type")
return null}}function canFieldBeBox(e){return _canFieldBeStorableOfType(e,d.StorableItem.BOX)}function canFieldBePlate(e){return _canFieldBeStorableOfType(e,d.StorableItem.PLATE)}function getPlateOrBoxContainerLabel(e,t,n){if(canFieldBePlate(e)&&null!=n){const e=null==n?void 0:n.plateSchemaType
return e===E.Ju.FIXED_PLATE?"Well":e===E.Ju.MATRIX_PLATE?"Container":t}return canFieldBePlate(e)?t:"Container"}function getIconForLookupStepInfo(e){switch(e.lookupStep.type){case C.fN.REPLICATES:return"number"
case C.fN.FILTER:case C.fN.FILTER_BY_ORIGIN:return"filter"
case C.fN.LATEST:return"filter-menu"
case C.fN.SAMPLE_OWNERS:case C.fN.AUTHORIZED_USERS:return"team"
case C.fN.SOURCE:case C.fN.DESTINATION:if(hasLookupStepContext(e)){const t=getStepItemWithSourceDestinationType(e)
if(t)return getIconForLookupStepInfo(t)}return"unknown"
default:{const t=inferTypeFromLookupStepInfo(e)
return!t||t.typeDef instanceof m.hB||(0,u.fF)(t.typeDef)?"unknown":p.o[t.typeDef]}}}const O=[C.vA.EQ,C.vA.NE,C.vA.LT,C.vA.LE,C.vA.GE,C.vA.GT,C.vA.ISNULL,C.vA.NOTNULL]
function filterOptionsForFieldType(e){switch(e){case T.FieldType.TEXT:case T.FieldType.LONG_TEXT:case T.FieldType.SELECTOR:return O.filter((e=>!C.aq.includes(e)))
case T.FieldType.INTEGER:case T.FieldType.FLOAT:return O
default:return[C.vA.ISNULL,C.vA.NOTNULL]}}function getSchemaFieldsForLookupStep(e,t,n){const a=e.fields.filter((e=>T.FieldType.BATCH_LINK!==e.fieldType))
return n?a.filter((e=>n(e,t))):a}function inferTypeFromLookupStepInfo(e){var t
const n=null!==(t=getLookupStepInfoWithType(e))&&void 0!==t?t:e,a=n.lookupStep
return[...C.eF,C.fN.SOURCE,C.fN.DESTINATION].includes(a.type)?null:a.type!==C.fN.SCHEMA_FIELD&&a.type!==C.fN.CONTAINER_BY_GRID_POSITION||null!=a.schemaField&&null!=n.schemaField?(0,_.L)(a,n.parentSchema,n.linkSchema):null}function getLookupStepSchemaId(e){var t,n,a,i
const s=getLookupStepInfoWithType(e),o=s?s.lookupStep:e.lookupStep
if(o.type===C.fN.NOTEBOOK_COLUMN_TYPECHECK){if(o.notebookColumnItemType===C.Mu.CONTAINER)return null!==(t=o.notebookColumnStorableSchema)&&void 0!==t?t:null
if(o.notebookColumnItemType===C.Mu.ENTITY)return null!==(n=o.notebookColumnEntitySchema)&&void 0!==n?n:null;(0,r.Gp)(!1,`Unexpected Notebook lookup item type ${(0,A.vE)(o.notebookColumnItemType)}`)
return null}return function stepHasBoxSchema(e){return e.hasOwnProperty("boxSchema")&&null!=e.boxSchema}(o)?o.boxSchema:function stepHasContainerSchema(e){return e.hasOwnProperty("containerSchema")&&null!=e.containerSchema}(o)?o.containerSchema:function stepHasEntitySchema(e){return e.hasOwnProperty("entitySchema")&&null!=e.entitySchema}(o)?o.entitySchema:function stepHasLocationSchema(e){return e.hasOwnProperty("locationSchema")&&null!=e.locationSchema}(o)?o.locationSchema:function stepHasPlateSchema(e){return e.hasOwnProperty("plateSchema")&&null!=e.plateSchema}(o)?o.plateSchema:o.type===C.fN.FLOWCHART_PROCESS_TASK?o.processTaskSchema:null!==(i=null===(a=null==s?void 0:s.linkSchema)||void 0===a?void 0:a.id)&&void 0!==i?i:null}function getObjectTypesForLookupStepInfo(e){const isInferredType=(...e)=>!!(null==a?void 0:a.typeDef)&&e.includes(null==a?void 0:a.typeDef),t=getLookupStepInfoWithType(e),n=t?t.lookupStep:e.lookupStep,a=inferTypeFromLookupStepInfo(e),i=!!a&&isInferredType(u.i0.STORABLE,u.i0.BOX)
let r=!!a&&isInferredType(u.i0.STORABLE,u.i0.CONTAINER)
const s=!!a&&isInferredType(u.i0.STORABLE,u.i0.PLATE),o=!!a&&isInferredType(u.i0.STORABLE,u.i0.LOCATION),l=!!a&&(0,u.wk)(a.typeDef,u.i0.BIOENTITY),c=!!a&&(!!isInferredType(u.i0.SEQUENCE,u.i0.PROTEIN)||isInferredType(u.i0.BIOENTITY)&&!(e.linkSchema&&(0,g.Pf)(e.linkSchema))),d=!!a&&isInferredType(u.i0.MOLECULE),m=n.type===C.fN.PROCESS_TASK
let p=r&&n.type!==C.fN.BOX_CONTAINERS,h=r&&n.type!==C.fN.WELLS
if(n.type===C.fN.CONTAINER_BY_GRID_POSITION&&e.schemaField){h=canFieldBeBox(e.schemaField)
p=canFieldBePlate(e.schemaField)}const E=function isSourceOrDestinationStep(e){return e.lookupStep.type===C.fN.SOURCE||e.lookupStep.type===C.fN.DESTINATION}(e),S=Boolean(e.hasPlateLayout)&&s&&E
if(S){p=!0
r=!0}return{isBoxStep:i,isBoxContainerStep:h,isContainerStep:r,isPlateStep:s,isPlateContainerStep:p,isEntityStep:l,isLocationStep:o,isResiduesSupportedStep:c,isChemicalStructureSupportedStep:d,isPlateLayoutStep:S,isProcessTaskStep:m}}function getFollowingStepTypes(e,t){const{isBoxStep:n,isBoxContainerStep:a,isContainerStep:i,isPlateStep:r,isPlateContainerStep:c,isEntityStep:d,isLocationStep:u,isProcessTaskStep:m}=getObjectTypesForLookupStepInfo(e),p=[]
if(i){a&&p.push(C.fN.BOX)
c&&p.push(C.fN.PLATE)
p.push(C.fN.CONTENTS)}if(d){const t=getLookupStepInfoWithType(e),n=null==t?void 0:t.linkSchema,a=n&&n.isContainable;(0,o.cr)({feature:s.TD.INVENTORY_CREATE})&&(a||null==n)&&p.push(C.fN.CONTAINER)
l.ZP.REGISTRY_ENABLE_CHILD_ENTITIES&&p.push(C.fN.CHILD_ENTITIES)}r&&p.push(C.fN.WELLS)
n&&p.push(C.fN.BOX_CONTAINERS)
m&&p.push(C.fN.FLOWCHART_PROCESS_TASK);(i||r||n||u)&&p.push(C.fN.LOCATION);(i||r||n||d)&&(0,o.cr)({feature:s.gm.RESULTS_CREATE})&&p.push(C.fN.RESULTS)
return p.filter((e=>t.includes(e)))}function getConstantReplicationFactor(e){return e.numberLookupConfig.lookupSteps[0].type===C.fN.CONSTANT&&"number"==typeof e.numberLookupConfig.lookupSteps[0].value?e.numberLookupConfig.lookupSteps[0].value:null}function getLookupInfoArrayForLookupConfig(e){const t=[]
for(const n of e){t.push(n)
n.modifierLookupSteps&&t.push(...n.modifierLookupSteps)
n.filterLookupSteps&&t.push(...n.filterLookupSteps)
n.collapsingLookupSteps&&t.push(...n.collapsingLookupSteps)}return t}function getStepDisplayInfo(e){var t,n
const r=getLookupStepInfoWithType(e),s=r?r.lookupStep:e.lookupStep,o=null==r?void 0:r.linkSchema
switch(s.type){case C.fN.SAMPLE_OWNERS:case C.fN.AUTHORIZED_USERS:return{name:`${e.name}`}
case C.fN.COUNT:{const t=e.parentSchema
if(t){const n=t.allFields.find((e=>e.apiId===s.schemaField||e.systemName===s.schemaField))
if(n){return{name:`Count (${(0,a.H3)((0,S.t)(n))})`,isArchived:!e.shouldSkipValidation&&(0,S.Z)(n)}}}return{name:"Count",isDeleted:!e.shouldSkipValidation}}case C.fN.CONSTANT:return{name:`${s.value}`}
case C.fN.CONCENTRATION:return{name:`${e.name} (${s.concentrationUnits})`}
case C.fN.QUANTITY:return{name:`${e.name} (${s.volumeUnits})`}
case C.fN.BOX:return{name:o?(0,a.H3)(o):"Any Box",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.CHILD_ENTITIES:return{name:o?(0,a.H3)(o):h.Hq,isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.CONTAINER:return{name:o?(0,a.H3)(o):"Any Container",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.CONTENTS:return{name:o?(0,a.H3)(o):s.entitySchemaType?"Any ".concat((0,I.yw)({folderItemType:s.entitySchemaType})):h.Hq,isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.LOCATION:return{name:o?(0,a.H3)(o):"Any Location",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.PLATE:return{name:o?(0,a.H3)(o):"Any Plate",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.RESULTS:return{name:o?(0,a.H3)(o):"Any Result",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.SCHEMA_FIELD:return{name:(0,a.H3)({...e.schemaField,id:null!==(n=null===(t=e.schemaField)||void 0===t?void 0:t.apiId)&&void 0!==n?n:"",name:o&&e.schemaField?`${e.schemaField.displayName} (${o.name})`:e.name}),isArchived:!(e.shouldSkipValidation||!e.schemaField)&&(0,S.Z)(e.schemaField),tooltip:o&&e.schemaField?"Field name (Linked schema)":null,isDeleted:!e.shouldSkipValidation&&null==e.schemaField}
case C.fN.FILTER_BY_ORIGIN:return{name:o?(0,a.H3)(o):"Filter By Origin",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.CONTAINER_BY_GRID_POSITION:{const t="Well/container"
return{name:e.schemaField?getPlateOrBoxContainerLabel(e.schemaField,t,e.linkSchema):t,isArchived:!(e.shouldSkipValidation||!e.schemaField)&&(0,S.Z)(e.schemaField),tooltip:e.name,isDeleted:!e.shouldSkipValidation&&null==e.schemaField}}case C.fN.FLOWCHART_PROCESS_TASK:return{name:"Flowchart task",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
case C.fN.PROCESS_TASK:return{name:"Task",isArchived:!(e.shouldSkipValidation||!o)&&(0,i.ZP)(o)}
default:return{name:e.name}}}function getItemStringForLookupStepType(e,t=!1){let n=""
switch(e){case C.fN.CONTENTS:n="content"
break
case C.fN.RESULTS:n="result"
break
default:n="item"}return(0,c._6)(t?2:1,n)}function getItemTypeForResultsStep(e){const{isEntityStep:t,isContainerStep:n,isPlateStep:a,isBoxStep:i}=getObjectTypesForLookupStepInfo(e),s=[n,a,i].filter((e=>e));(0,r.hu)(t||n||a||i,"Expected step before results step to be an entity or storable step.")
return t?"entity":s.length>1?"inventory item":n?"container":a?"plate":"box"}function mapSchemaInterfaceGraphQLToSchemaInterfaceExtendingSchema(e){const t=e.fields.map((e=>({id:e.id,dbId:e.id,apiId:e.apiId,name:e.displayName,systemName:e.systemName,displayName:e.displayName,fieldType:e.fieldType,isRequired:e.isRequired,isMulti:e.isMulti,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,requiredLink:e.requiredLinkJson,schemaFieldSelectorId:e.schemaFieldSelectorId,archiveRecord:null}))),n=e.baseBioentityType?{folderItemType:e.baseBioentityType.folderItemType,sequenceType:e.baseBioentityType.sequenceType}:null
return{id:e.id,name:e.name,baseBioentityType:n,allFields:t,fields:t,archiveRecord:e.archiveRecord}}function getRequiredLinkSchema(e){const t=(0,T.getRequiredLinkSchemaId)(e)
if(null==t)return null
if(f.ZP.isTagSchema(t))return(0,y.y4)(t)
if(f.ZP.isAssaySchema(t))return(0,y.RY)(t)
if(f.ZP.isSchemaInterface(t)){const e=(0,y.i)(t)
if(!e){(0,r.Gp)(null!=e,`FC investigation needed: Unexpectedly cannot find schema interface in cache for id ${t}. This is likely due to improper hydration of a lookup config.`)
return null}return mapSchemaInterfaceGraphQLToSchemaInterfaceExtendingSchema(e)}(0,r.hu)(f.ZP.isStorableSchema(t),`Unexpected schema id ${t}`)
return(0,y.o4)(t)}function getLinkSchemaForFieldStep(e,t){if(null!=t){const n=t.allFields.find((({apiId:t,systemName:n})=>t===e.schemaField||n===e.schemaField))
return n?getRequiredLinkSchema(n):null}return null}function getLinkSchemaForLookupStep(e,t){var n,a,i
switch(e.type){case C.fN.SCHEMA_FIELD:return getLinkSchemaForFieldStep(e,t)
case C.fN.BOX:case C.fN.PLACEHOLDER_BOXES:return e.boxSchema?(0,y.uk)(e.boxSchema):null
case C.fN.BOX_CONTAINERS:case C.fN.WELLS:{if(null==t)return null
const e=null!==(n=t.containerSchemaId)&&void 0!==n?n:null
return e?(0,y.gM)(e):null}case C.fN.CHILD_ENTITIES:case C.fN.CONTENTS:case C.fN.SCHEMA_IDENTITY:return e.entitySchema?(0,y.y4)(e.entitySchema):null
case C.fN.PLATE:case C.fN.PLACEHOLDER_PLATES:return e.plateSchema?(0,y.Nb)(e.plateSchema):null
case C.fN.LOCATION:return e.locationSchema?(0,y.bV)(e.locationSchema):null
case C.fN.CONTAINER:return e.containerSchema?(0,y.gM)(e.containerSchema):null
case C.fN.CONTAINER_BY_GRID_POSITION:{const n=getLinkSchemaForFieldStep(e,t),i=null!==(a=null==n?void 0:n.containerSchemaId)&&void 0!==a?a:null
return i?(0,y.gM)(i):null}case C.fN.RESULTS:if(null==e.linkedBySchemaField)return null
for(const t of(0,y.n1)())if(null!=t)for(const n of t.allFields)if(e.linkedBySchemaField===n.apiId)return t
return null
case C.fN.TASK_FINDER_PROCESS_TASKS:if(null==e.linkedBySchemaField)return null
for(const t of(0,y.PQ)())if(null!=t)for(const n of t.allFields)if(e.linkedBySchemaField===n.apiId)return t
return null
case C.fN.FLOWCHART_PROCESS_TASK:return(0,y.ex)(e.processTaskSchema)
case C.fN.PROCESS_TASK:return null==t?null:null!==(i=(0,y.PQ)().find((e=>{var n
return(null===(n=e.outputSchema)||void 0===n?void 0:n.id)===t.id})))&&void 0!==i?i:null
case C.fN.NOTEBOOK_COLUMN_TYPECHECK:return e.notebookColumnItemType===C.Mu.CONTAINER?e.notebookColumnStorableSchema?(0,y.o4)(e.notebookColumnStorableSchema):null:e.notebookColumnEntitySchema?(0,y.y4)(e.notebookColumnEntitySchema):null
default:return null}}},514946:(e,t,n)=>{n.d(t,{L:()=>inferTypeFromNonModifierStep,Z:()=>inferTypeFromLookupConfig})
var a=n(232606),i=n(264867),r=n(379112),s=n(901444),o=n(497790),l=n(863940),c=n(441527)
function getLookupStepIdxToInferFrom(e){(0,a.hu)(e.length>0,"Expected at least one lookup step")
const t=e[e.length-1]
return l.eF.includes(t.type)?getLookupStepIdxToInferFrom(e.slice(0,-1)):e.length-1}function inferTypeFromNonModifierStep(e,t,n){var c,d
switch(e.type){case l.fN.SCHEMA_FIELD:(0,a.hu)(null!=t,"Expected a schema to be defined to look up a schema field.")
return function getSchemaFieldType(e,t,n){var i
const r=t.allFields.find((({apiId:t,systemName:n})=>t===e.schemaField||n===e.schemaField));(0,a.hu)(null!=r,`Expected to find the schema field ${e.schemaField} in ${t.name}`)
const l=(0,o.getRequiredLinkFolderItemType)(r)
return{typeDef:(0,s.aC)(null!=n?n:null,l,o.FIELD_TYPE_TO_LEAF_TYPE[r.fieldType]),linkSchema:n,linkSelectorId:null!==(i=r.schemaFieldSelectorId)&&void 0!==i?i:void 0,isStepMultiplex:r.isMulti,isStepSnapshot:r.isSnapshot}}(e,t,n)
case l.fN.ALIASES:return{typeDef:i.i0.TEXT,isStepMultiplex:!0,isStepSnapshot:!1}
case l.fN.CHEMICAL_STRUCTURE:return{typeDef:i.i0.BLOB,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.BARCODE:case l.fN.NAME:case l.fN.REGISTRY_IDENTIFIER:case l.fN.RESIDUES:case l.fN.WELL_COORDINATES:return{typeDef:i.i0.TEXT,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.QUANTITY:case l.fN.CONCENTRATION:return{typeDef:i.i0.DECIMAL,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.COUNT:return{typeDef:i.i0.INTEGER,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.BOX:return{typeDef:i.i0.BOX,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.BOX_CONTAINERS:return{typeDef:i.i0.CONTAINER,linkSchema:n,isStepMultiplex:!0,isStepSnapshot:!1}
case l.fN.CHILD_ENTITIES:return{typeDef:(0,s.aC)(n,null,i.i0.BIOENTITY),linkSchema:n,isStepMultiplex:!0,isStepSnapshot:!1}
case l.fN.PLATE:return{typeDef:i.i0.PLATE,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.LOCATION:return{typeDef:i.i0.LOCATION,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.WELLS:case l.fN.CONTAINER:return{typeDef:i.i0.CONTAINER,linkSchema:n,isStepMultiplex:!0,isStepSnapshot:!1}
case l.fN.CONTAINER_BY_GRID_POSITION:return{typeDef:i.i0.CONTAINER,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.CONTENTS:{const t=null!==(c=e.entitySchemaType||(null==n?void 0:n.folderItemType))&&void 0!==c?c:null
return{typeDef:(0,s.aC)(null!=n?n:null,t,i.i0.BIOENTITY),linkSchema:n,isStepMultiplex:!0,isStepSnapshot:!1}}case l.fN.SCHEMA_IDENTITY:return{typeDef:null!=n?(0,s.EV)(n):i.i0.BIOENTITY,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.RESULTS:return{typeDef:i.i0.RESULT,linkSchema:n,isStepMultiplex:!0,isStepSnapshot:!1}
case l.fN.FLOWCHART_PROCESS_TASK:case l.fN.PROCESS_TASK:return{typeDef:i.i0.PROCESS_TASK,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.TASK_FINDER_PROCESS_TASKS:return{typeDef:i.i0.PROCESS_TASK,linkSchema:n,isStepMultiplex:!0,isStepSnapshot:!1}
case l.fN.CONSTANT:return{typeDef:"number"==typeof e.value?Number.isInteger(e.value)?i.i0.INTEGER:i.i0.DECIMAL:i.i0.TEXT,linkSchema:null,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.NOTEBOOK_COLUMN_TYPECHECK:{if(e.notebookColumnItemType===l.Mu.CONTAINER)return{typeDef:i.i0.CONTAINER,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1};(0,a.hu)(e.notebookColumnItemType===l.Mu.ENTITY,`Unsupported notebookColumnItemType ${e.notebookColumnItemType}`)
const t=null!==(d=null==n?void 0:n.folderItemType)&&void 0!==d?d:null
return{typeDef:(0,s.aC)(null!=n?n:null,t,i.i0.BIOENTITY),linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}}case l.fN.PLACEHOLDER_BOXES:return{typeDef:i.i0.BOX,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.PLACEHOLDER_PLATES:return{typeDef:i.i0.PLATE,linkSchema:n,isStepMultiplex:!1,isStepSnapshot:!1}
case l.fN.SAMPLE_OWNERS:case l.fN.AUTHORIZED_USERS:return{typeDef:new r.EJ(new Set([i.i0.USER,i.i0.TEAM])),isStepMultiplex:!0,isStepSnapshot:!1}
default:(0,a.hu)(!1,`Unsupported step type ${e.type}.`)}}function doesLookupConfigHaveMultiCardinality(e,t){const n=[]
for(let t=0;t<e.lookupSteps.length;t++){const a=e.lookupSteps[t]
l.eF.includes(a.type)?n[n.length-1].modifierSteps.push(a):n.push({modifierSteps:[],baseStepIdx:t})}return n.some((e=>function doesLookupStepGroupHaveMultiCardinality({modifierSteps:e,baseStepIdx:t},n){return!!n[t].isStepMultiplex&&!e.some((({type:e})=>l.oi.includes(e)))}(e,t)))}function inferTypeFromLookupConfig(e,t){(0,a.hu)(e.lookupSteps.length>0,"Expected at least one lookup step")
const n=getLookupStepIdxToInferFrom(e.lookupSteps),i=function getAllStepTypes(e,t){var n
const i=[]
let r=null
for(const a of e.lookupSteps)if(l.eF.includes(a.type))i.push(null)
else{const e=null!=r?null!==(n=r.linkSchema)&&void 0!==n?n:null:t
r=inferTypeFromNonModifierStep(a,e,(0,c.zP)(a,e))
i.push(r)}(0,a.hu)(i.length===e.lookupSteps.length,"Expected one inferred type per step")
return i}(e,t),r=i[n];(0,a.hu)(null!=r,"Expected lookup step to have a non-modifier type")
const s=doesLookupConfigHaveMultiCardinality(e,i)
return{typeDef:r.typeDef,linkSchema:r.linkSchema,...null!=r.linkSelectorId?{linkSelectorId:r.linkSelectorId}:{},isMultiplex:s,isSnapshot:i.some((e=>e&&e.isStepSnapshot))}}},3132:(e,t,n)=>{var a={}
n.r(a)
n.d(a,{adminGet:()=>adminGet,adminPost:()=>adminPost})
n(899320),n(903489)
var i=n(724953),r=n(210660),s=n(440281),o=n.n(s),l=n(250965),c=n.n(l),d=n(989526),u=n(938454),m=n(441116),p=n(323539),h=n(468943),E=n(814099),S=n(348920),T=n(675649),g=n(263137),f=n(73374),I=n(69934),A=n(479977),y=n(973625),_=n(634489),C=n(692013),R=n(764403),N=n.n(R),O=n(334148),b=n(271359),v=n(761974),P=n(36424),L=n(831144),D=n(502633),M=n(685370),w=n(954240),F=n(801455),k=n(665704),U=n(865486),x=n(924982),B=n(205986)
class ClonePolicyModal extends d.Component{constructor(){super(...arguments)
this.state={name:"",policy:null}
this._handleCreatePolicy=()=>{this.props.onRequestSubmit({name:this.state.name,policyId:this.state.policy.id})}
this._handleSelectPolicy=e=>{this.setState({policy:e})}
this._handleChangeName=e=>{this.setState({name:e.target.value})}}render(){const e=Boolean(this.state.name&&this.state.policy)
return d.createElement(B.ZP,{buttons:[{text:"Save",submit:!0,disabled:!e}],onRequestClose:this.props.onRequestClose,onRequestSubmit:this._handleCreatePolicy,title:"Clone access policy"},d.createElement(k.Z,{label:"Name",value:this.state.name,onChange:this._handleChangeName}),d.createElement("div",{className:"u-spacing-top"},d.createElement(F.Z,{label:"Access policy"}),d.createElement(w.ZP,{displayName:this.state.policy?this.state.policy.name:"Select one...",menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL},this.props.policies.map((e=>d.createElement(x.Z,{key:e.id,onSelect:this._handleSelectPolicy,value:e},e.name))))})))}}const Z=C.mM.create({actionRow:{display:"flex",alignItems:"center",justifyContent:"space-between",":hover .deleteIcon":{display:"block"}},deleteIcon:{display:"none",color:b.TG,":hover":{color:b.Zl,pointer:"cursor"}}})
class PoliciesListing extends d.Component{constructor(){super(...arguments)
this._handleOpenPolicy=(e,t)=>{(0,T.c4)(e,this.props.getPolicyURL(t))}
this._handleDeletePolicy=async e=>{await Promise.resolve(M.iG("Delete access policy",`Are you sure you want to delete ${e.name}?`,O.ZJ.NEGATIVE,{promiseCompatible:!0,enableRedesign:!0}))&&this.props.deletePolicy(e.id)}
this._handleClonePolicy=async()=>{const e=await(0,D.Z)(ClonePolicyModal,{policies:this.props.policies})
if(!e)return
const{policyId:t,name:n}=e
this.props.clonePolicy(t,n)}
this._handleReorderPolicies=(e,t)=>{const n=this.props.policies.findIndex((t=>t.id===e)),a=[...this.props.policies],[i]=a.splice(n,1)
a.splice(t,0,i)
const r=a.map((e=>e.id))
this.props.reorderPolicies(r)}}render(){return d.createElement(L.Z,{headerCells:[{key:"name",contents:d.createElement("div",null,"Name",this.props.policies.length>0&&this.props.policies.every((e=>e.permissions.writable))&&d.createElement(v.Z,{onClick:this._handleClonePolicy}))}],isDraggingDisabled:this.props.policies.some((e=>!e.permissions.writable)),onReorderRow:this._handleReorderPolicies,noRowsText:"No policies",rows:this.props.policies.map((e=>({id:e.id,cells:[{key:e.id,contents:d.createElement("div",{className:(0,C.iv)(Z.actionRow)},d.createElement("a",{href:this.props.getPolicyURL(e.id),onClick:t=>{this._handleOpenPolicy(t,e.id)}},e.name),e.permissions.writable&&d.createElement("div",{className:N()("deleteIcon",(0,C.iv)(Z.deleteIcon)),onClick:()=>{this._handleDeletePolicy(e)}},d.createElement(P.Z,{icon:"format-delete"})))}]})))})}}class DataPoliciesListingConnector extends _.C{enhanceProps(){return{dataPolicies:(0,I.Z)(this.reduxState().models.policies.dataPolicies)}}}const q=DataPoliciesListingConnector.connect((function DataPoliciesListing(e){return d.createElement(PoliciesListing,{policies:e.dataPolicies,getPolicyURL:A.TO,deletePolicy:y.BI,clonePolicy:y.$i,reorderPolicies:y.d0})}))
const G=function DataPoliciesPage(){const e=S.ZP.PERMISSIONS_ENABLE_SCHEMA_POLICY_CONFIGURATION?"General access policies":"Access policies"
d.useEffect((()=>{(0,T._w)(e)}),[e])
return d.createElement("div",{className:"settingsPage",...(0,g.Z)({component:"DataPoliciesPage",element:"root"})},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement(f.R6,null,e),d.createElement("div",{className:"u-spacing-top"},d.createElement(q,null))))}
var V=n(212300),H=n(476604),W=n(673448),Y=n(84587),$=n.n(Y),K=n(615439),z=n.n(K),Q=n(7060),j=n(138966),J=n(435826),X=n(105916),ee=n(103593),te=n(102176),ne=n(59860),ae=n(567e3),ie=n(232606),re=n(473446)
let se=function makeTenantProvisionableCapabilitiesSetFromBootstrap(){var e
if(!(null===(e=window.bootstrap)||void 0===e?void 0:e.tenantProvisionableCapabilities))return null
return new Set(window.bootstrap.tenantProvisionableCapabilities)}()
function isCapabilityEnabledForTenant(e){const t=E.Ze
if(S.ZP.IDENTITY_ENABLE_CAPABILITY_GATING&&!t.includes(e)){(0,ie.Gp)(null!=se,"Tried to check tenantProvisionableCapabilities but it was not available")
return null!=se&&se.has(e)}return(0,re.ly)(e)}var oe=n(933388),le=n(125440),ce=n(776105),de=n(601790),ue=n(531041),me=n(106664),pe=n(554475)
function getConditionDisplayName(e,t,n){const a=ue.default.indexBy(n,"condition"),i=t.map((t=>{const n=(0,me.ul)(e,t)
return n?n.condition:null})),r=ue.default.unique(i)
if(1===r.length){const e=r[0]
return e?(0,ie.Gp)(Boolean(a[e]),"Expected condition to exist in policyTemplate.json")?a[e].name:e:"Not granted"}return"Mixed permissions"}class ConditionDropdown extends d.Component{constructor(){super(...arguments)
this._handleSelectCondition=e=>{const t=this.props.policyStatements.filter((e=>!this.props.actionRowData.actionItemTypes.some((t=>t.action===e.action&&t.itemType===e.itemType))))
if(e)for(const n of this.props.actionRowData.actionItemTypes)t.push({action:n.action,itemType:n.itemType,condition:e})
this.props.onUpdateStatements(t)}}render(){return d.createElement(w.ZP,{displayName:getConditionDisplayName(this.props.policyStatements,this.props.actionRowData.actionItemTypes,this.props.actionRowData.conditionOptions),disabled:!this.props.isWritable||this.props.actionRowData.disabled,menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,value:2},d.createElement(pe.Z,null,d.createElement(x.Z,{value:null,onSelect:this._handleSelectCondition},"Not granted")),d.createElement(pe.Z,null,this.props.actionRowData.conditionOptions.map((e=>d.createElement(x.Z,{key:e.condition,onSelect:this._handleSelectCondition,value:e.condition},e.name)))))})}}const he=ConditionDropdown
var Ee=n(131689)
function DescriptionHelpButton(e){return d.createElement(le.Z,{renderContent:()=>d.createElement("div",{className:"u-pre-wrap u-normal-font-weight"},e.description),iconClassName:"u-mini-spacing-left"})}const Se=function ItemTypeTable(e){const t=function getFeatureFlaggedItemTypeOption(e){switch(e.itemType){case oe.qG.PROCESS_TASK_GROUP:case oe.qG.PROCESS_TASK:case oe.qG.PROCESS_OUTPUT:return S.ZP.WORKFLOWS_ENABLE?e:null
case oe.qG.WORKFLOW:return{...e,name:S.ZP.WORKFLOWS_ENABLE?"Legacy Workflows":"Workflows"}
case oe.qG.BATCH:return(0,ce.Z)()?e:null
case oe.qG.ANALYSIS:return S.ZP.ENABLE_ANALYSIS_TOOL?e:null
case oe.qG.CONNECTION:return isCapabilityEnabledForTenant(E.e2.LAB_AUTOMATION)&&S.ZP.INSTRUMENTS_ENABLE?e:null
case oe.qG.STUDY:return S.ZP.STUDIES_ENABLE?e:null
case oe.qG.FILE:return S.ZP.FILES_ENABLE?e:null
default:return e}}(e.itemTypeOption)
if(!t)return null
const n=(0,Ee.Z)(t.itemType,t.actionOptions)
return d.createElement("div",{className:"policyPage"},d.createElement(de.iA,{numRows:n.length,getRowClassName:e=>n[e].level>0?"simpleTable-row--noShadow":""},d.createElement(de.sg,{header:d.createElement(de.bL,null,t.name,t.description&&d.createElement(DescriptionHelpButton,{description:t.description})),renderCell:e=>{const t=n[e]
return d.createElement(de.bL,null,d.createElement("div",{style:{marginLeft:20*t.level+"px"}},t.name,t.description&&d.createElement(DescriptionHelpButton,{description:t.description})))}}),d.createElement(de.sg,{header:d.createElement(de.bL,null),renderCell:t=>d.createElement(de.bL,null,d.createElement(he,{actionRowData:n[t],policyStatements:e.policyStatements,onUpdateStatements:e.onUpdateStatements,isWritable:e.isWritable}))})))}
function PolicyStatementsEditor(e){return d.createElement("div",{...(0,g.Z)({component:"PolicyStatementEditor",element:"root"})},e.policyTemplate.itemTypeOptions.map(((t,n)=>d.createElement(Se,{key:n,itemTypeOption:t,policyStatements:e.policyStatements,onUpdateStatements:e.onUpdateStatements,isWritable:e.isWritable}))))}const Te=C.mM.create({container:{height:"100%",paddingBottom:40}})
function getComparableSpec(e){return{...e,statements:(0,ae.Z)(e.statements,[e=>$()(e)])}}class PolicyEditor extends d.Component{constructor(){super(...arguments)
this._handleChangeName=e=>{const t=e.target.value
this.props.onUpdateSpec({name:t})}
this._handleDiscardChanges=()=>{this.props.onUpdateSpec(this.props.initialSpec)}
this._handleUpdatePolicyStatements=e=>{this.props.onUpdateSpec({statements:e})}}_navigateToPoliciesListing(){(0,j.ZP)(this.props.policiesURL)}_hasChanges(){return!z()(getComparableSpec(this.props.initialSpec),getComparableSpec(this.props.spec))}render(){return d.createElement("div",{className:(0,C.iv)(Te.container)},this._hasChanges()&&d.createElement(X.Z,{text:"Permissions changed",onSave:this.props.onSaveSpec,onDiscard:this._handleDiscardChanges}),d.createElement(J.Z,{onClickTitle:()=>{this._navigateToPoliciesListing()},subtitle:this.props.policy.name,title:this.props.listingsTitle,toolbar:d.createElement(Q.Z,{ids:[this.props.policy.id]})},d.createElement("div",null,this.props.isWritable&&d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(k.Z,{label:"Name",onChange:this._handleChangeName,value:this.props.spec.name})))),d.createElement(PolicyStatementsEditor,{policyTemplate:this.props.policyTemplate,policyStatements:this.props.spec.statements,onUpdateStatements:this._handleUpdatePolicyStatements,isWritable:this.props.isWritable}))))}}const ge=PolicyEditor
function PolicyPage(e){const[t,n]=d.useState(e.initialSpec),[a,i]=d.useState(e.initialSpec)
d.useEffect((()=>{(0,T._w)(`${e.policy.name} - Access Policies`)}),[e.policy])
return d.createElement(ge,{policy:e.policy,spec:a,initialSpec:t,onUpdateSpec:e=>{i({...a,...e})},onSaveSpec:async()=>{const t=await e.updatePolicy(a)
if(t){n(t)
i(t)}},isWritable:e.policy.permissions.writable,listingsTitle:e.listingsTitle,policiesURL:e.policiesURL,policyTemplate:e.policyTemplate})}class DataPolicyPage extends d.Component{constructor(){super(...arguments)
this.state={initialSpec:null}
this._updatePolicy=async e=>{const{spec:t}=await y.aB(this.props.dataPolicyId,e)
return t}}async componentDidMount(){const e=(await y.tp()).specByDataPolicyId[this.props.dataPolicy.id]
this.setState({initialSpec:e})}render(){if(!this.state.initialSpec)return d.createElement(H.b,null)
const e=W
return d.createElement(PolicyPage,{policy:this.props.dataPolicy,initialSpec:this.state.initialSpec,updatePolicy:this._updatePolicy,listingsTitle:"Policies",policiesURL:A.z8(),policyTemplate:e})}}const fe=(0,V.$j)((function mapStateToProps(e,t){return{dataPolicy:e.models.policies.dataPolicies.find((e=>e.id===t.dataPolicyId))}}))(DataPolicyPage)
var Ie=n(171471),Ae=n(576118),ye=n.n(Ae),_e=n(459830),Ce=n(108696),Re=n(484827),Ne=n(476031),Oe=n(62335),be=n(929123),ve=n(868710),Pe=n(361974),Le=n(920672),De=n(369706),Me=n(413714)
function RenameModal({initialName:e,onRequestSubmit:t,onRequestClose:n}){const[a,i]=(0,d.useState)(e)
return d.createElement(B.ZP,{title:"Rename form",large:!1,buttons:[{text:"Save",submit:!0,disabled:!a.length}],onRequestClose:n,onRequestSubmit:()=>{t(a)}},d.createElement(te.Z,null,d.createElement(be.Z,null,"Name"),d.createElement("input",{type:"text",value:a,onChange:e=>{i((0,Ne.Z)(e.target.value))},autoFocus:!0})))}function FormDefinitionPageHeader(e){const t=[],n=Boolean(e.archivePurpose)
n||t.push({icon:"edit",contents:d.createElement("span",null,"Rename"),onSelect:()=>{(0,D.Z)(RenameModal,{initialName:e.name,onRequestSubmit:e.onUpdateName})}},{icon:"move",contents:d.createElement("span",null,"Move"),onSelect:()=>{(0,D.Z)(Oe.c,{initialTemplateCollectionId:e.templateCollectionId,onRequestSubmit:e.onUpdateTemplateCollectionId,title:"Move form"})}})
if(e.id){n?t.push({icon:"unarchive",contents:d.createElement("span",null,"Unarchive"),onSelect:e.onUnarchive}):t.push({icon:"archive",contents:d.createElement("span",null,"Archive"),onSelect:e.onArchive})
t.push({icon:"audit-trail",contents:d.createElement("span",null,"Export audit logs"),onSelect:()=>{e.id&&Ce.dV([e.id])}})}let a
n?a="Archived form cannot be edited":e.isSubmittable||(a="No changes to save")
return d.createElement("span",{className:"u-lr-split"},d.createElement(Re.ZP,{crumbs:[d.createElement("span",{key:"form-template-name",className:"u-display-inline-block u-small-padding-left"},n?d.createElement("span",{className:"u-faded"},e.name," (",e.archivePurpose,")"):d.createElement(De.Z,{requestChange:e.onUpdateName,value:e.name,disableEditsWithTooltip:n?"Archived form cannot be renamed":null}))],className:"breadcrumbs--large"}),d.createElement("div",{className:"u-vertical-center-items"},d.createElement(Le.Z,{text:a,placement:Pe.ZH.BOTTOM,isDisabled:!a},d.createElement(O.Co,{disabled:Boolean(a),buttonStyle:O.ZJ.SECONDARY,text:e.saveButtonText,size:O.qE.SMALL,onClick:e.onClickSave})),d.createElement(Me.Z,{buttonProps:{size:O.qE.SMALL},menuProps:{dropLeft:!0},options:t,tooltipPlacement:ve.TQ.LEFT})))}var we=n(302210),Fe=n(828969),ke=n(863405),Ue=n(929945),xe=n(422794),Be=n(357444),Ze=n(821186),qe=n(383628),Ge=n(35991),Ve=n(973103)
function FormInstancePreview({formDefinitionContent:e,formDesignerState:t}){const[n,a]=(0,d.useState)((0,Ve.ih)(e)),[i,r]=(0,d.useState)()
if(e!==i){a((0,Ve.ih)(e,n))
r(e)}const[s,o]=(0,d.useState)({}),[l,c]=(0,d.useState)({}),u=(0,Ue.ZP)({includeArchivedSelectors:!1});(0,d.useEffect)((()=>{t&&(0,Ue.VD)(u)&&[...t.actionMap.values()].forEach((e=>{if(e.selectedSchema){const n=(0,Ze.Z)({name:e.selectedSchema.name,taskSchema:e.selectedSchema,tableLocation:Be.$o.CREATE_MODAL,locked:!1,selectorsById:u}),a=(0,xe.SA)(n,Fe.Vb.generateFormActionConfigs(t))
c(a)
o((0,xe.AT)(n,Fe.Vb.generateFormDefinition(t),a))}}))}),[t,e,u])
return d.createElement("div",null,d.createElement("div",{className:"u-spacing-bottom"},d.createElement(qe.ZP,{bannerType:qe.ct.INFO,text:"This is a preview only.",supportingInfo:"Entering values into the form fields will not create any new data."})),d.createElement(Ge.S,{formDefinitionContent:e,formInstanceTableState:s,onUpdateFormInstanceTableState:o,fieldKeyToTableColumnIndex:l}))}var He=n(298663),We=n(127081),Ye=n(745826),$e=n(990031),Ke=n(379346)
const ze=/forms\/create/,Qe=new RegExp(`/workflow-task-schemas/${Ke.ZP.typeToApiPrefix(_e.PROCESS_TASK_SCHEMA)}`),je=/\/template-collections\/\w/
function getFormDefinitionActionOrigin(){const e=(0,j.UC)()
return ze.test(e)?Ie.D2.FORMS_CREATE_FORM_DEFINITION_DESIGNER:Qe.test(e)?Ie.D2.SETTINGS_TASK_SCHEMA_PAGE:je.test(e)?Ie.D2.NOTEBOOK_TEMPLATE_COLLECTION_PAGE:Ie.D2.UI_UNDETERMINED}var Je
!function(e){e.BUILDER="BUILDER"
e.PREVIEW="PREVIEW"}(Je||(Je={}))
function ResponsiveLayout({designer:e,preview:t}){const{ref:n,width:a}=(0,He.Z)(),i=a&&a<1e3,[r,s]=(0,d.useState)(Je.BUILDER)
return d.createElement("div",{className:"u-width-full u-height-full",ref:n},i?d.createElement(Ye.Xl,{activeTab:r,onRequestTabChange:s,className:"u-padding"},d.createElement(Ye.OK,{tabKey:Je.BUILDER,title:"Builder"},d.createElement("div",{className:(0,C.iv)(Xe.designerTabContainer)},e)),d.createElement(Ye.OK,{tabKey:Je.PREVIEW,title:"Preview"},d.createElement("div",{className:(0,C.iv)(Xe.previewTabContainer)},t))):d.createElement("div",{className:(0,C.iv)(Xe.twoColumnContainer)},d.createElement("div",{className:N()("u-padding u-flex-grow",(0,C.iv)(Xe.designerColumnContainer))},e),d.createElement("div",{className:N()("u-padding u-flex-grow",(0,C.iv)(Xe.previewColumnContainer))},t)))}function SharedFormDefinitionPage(e){var t
const[n,a]=(0,d.useState)(e.initialFormDesignerState),i=void 0===e.id,[r,s]=(0,d.useState)(e.initialFormDesignerState),o=(0,d.useMemo)((()=>i||!(0,Fe.Q5)(r,n)),[i,r,n]),l=(0,d.useMemo)((()=>{if(!e.name||!n.sections||!e.autofixUpdates&&!o)return!1
const t=Fe.Vb.generateFormActionConfigs(n)
return Boolean(null==t?void 0:t.length)&&t.every((e=>e.schemaId))}),[e.name,e.autofixUpdates,o,n]);(0,We.Z)(o,`Are you sure you want to exit with unsaved changes to "${e.name}"?`)
const[c,u]=(0,d.useState)(!1),m=d.createElement(d.Fragment,null,e.autofixUpdates&&!c?d.createElement(ke.ZP,{taskSchemaName:e.autofixTaskSchemaName,taskSchemaURL:e.autofixTaskSchemaURL,updates:e.autofixUpdates,onDismiss:()=>{u(!0)}}):null,d.createElement(we.Z,{state:n,setState:a,lockActions:!0,actionToSchemas:e.actionToSchemas,formDefinitionId:null!==(t=e.id)&&void 0!==t?t:null,sessionId:e.sessionId,actionOrigin:e.actionOrigin})),p=d.createElement(FormInstancePreview,{formDefinitionContent:Fe.Vb.generateFormDefinition(n),formDesignerState:n})
return d.createElement($e.Z,{header:d.createElement(FormDefinitionPageHeader,{id:e.id,name:e.name,templateCollectionId:e.templateCollectionId,onUpdateTemplateCollectionId:e.setTemplateCollectionId,saveButtonText:e.saveButtonText,isSubmittable:l,onUpdateName:e.setName,onClickSave:async()=>{ye()(n)
const t=Fe.Vb.generateFormDefinition(n),a=Fe.Vb.generateFormActionConfigs(n)
await e.onSave(t,a,o)&&s(n)},archivePurpose:e.archivePurpose,onArchive:e.onArchive,onUnarchive:e.onUnarchive}),backgroundColor:$e.v.WHITE},d.createElement(ResponsiveLayout,{designer:m,preview:p}))}const Xe=C.mM.create({twoColumnContainer:{display:"flex",minHeight:"100%"},designerColumnContainer:{paddingLeft:30,minWidth:0},previewColumnContainer:{background:b.bs,borderLeft:`1px solid ${b.tN}`,minWidth:0},designerTabContainer:{maxWidth:600,paddingLeft:6},previewTabContainer:{maxWidth:600,marginLeft:"auto",marginRight:"auto"}})
var et=n(76787),tt=n(523171),nt=n(751512),at=n(697134),it=n(751693),rt=n(974913),st=n(883026)
function CreateFormDefinitionPage(){const[e]=(0,d.useState)(h.Vr()),{queryKey:t}=(0,T.he)(window.location.href),n=t.taskSchemaId,a=(0,T.$5)(t.name||"");(0,d.useEffect)((()=>{h.L9(Ie.ln.OPENED_FORM_DESIGNER,{session_id:e,action_method:Ie.LY.CREATE_FORM_DEFINITION,action_origin:getFormDefinitionActionOrigin(),name:a,template_collection_id:t.templateCollection,task_schema_id:n})}),[t,e,a,n])
const[i,r]=(0,d.useState)(a),[s,o]=(0,d.useState)(t.templateCollection||"")
const l=(0,nt.A4)(tt.we,{variables:{actionIdentifier:we.p.identifier,schemaId:n},fetchPolicy:"network-only",skip:!n}),c=(0,nt.A4)(tt.Sx,{fetchPolicy:"cache-and-network",skip:Boolean(n)}),u=n?l:c
if(u.type===nt.NI.PENDING)return d.createElement(H.b,null)
if(u.type===nt.NI.ERROR||!u.data)return d.createElement(qe.ZP,{bannerType:qe.ct.ERROR,text:"Unable to load Form Designer"})
const m=n?u.data.formAction:void 0,p=u.data.processTaskSchemas,E={action:we.p,lockAction:!0}
if(n){const e=p.find((e=>e.id===n))
if(e){E.schema=e
E.lockSchema=!0}else rt.ZP.error(`Could not find schema ${n}`)}m&&!(0,at.CZ)(m)&&(E.formAction=m)
const S=(0,Fe.KK)({initialActions:[E]}),g={[we.p.identifier]:p}
return d.createElement(SharedFormDefinitionPage,{name:i,setName:r,templateCollectionId:s,setTemplateCollectionId:function setTemplateCollectionId(e){it.Z.activateCollection(e)
o(e)},onSave:async(e,t)=>{if(!Ke.ZP.isTemplateCollection(s)){rt.ZP.error("Invalid template collection. Please choose a template collection that you have write access to.")
return!1}const n=t[0].schemaId,{formDefinitionId:a}=await(0,st.jI)((0,et.Np)(i,s,e,t,n),"Creating form...");(0,j.Re)()
rt.ZP.success(`Created form "${i}"`);(0,j.ZP)((0,et.r4)(a),{replace:!0})
return!0},saveButtonText:"Create",initialFormDesignerState:S,actionToSchemas:g,sessionId:e,actionOrigin:Ie.D2.FORMS_CREATE_FORM_DEFINITION_DESIGNER})}var ot=n(769784),lt=n(804589),ct=n(996447),dt=n(238807),ut=n(91092),mt=n(456765)
function InaccessibleFormWarning(){return d.createElement("span",null,"The form you were trying to access is no longer available. It may have been deleted or moved into a collection you do not have access to.")}const pt=ot.Ps`
  query FormDefinitionQuery($formDefinitionId: StrictString!) @skipAudit @engComponent(name: FORMS) {
    formDefinition(id: $formDefinitionId) {
      ... on FormDefinitionNode {
        id
        name
        isValid
        templateCollection {
          id
        }
        latestFormDefinitionVersion {
          id
          version
          actionConfigs {
            actionId
            schema {
              id
              name
              fields
              allFields
              executionType
              canSetAssigneeOnTaskCreation
            }
            sectionKey
            parameters {
              actionParameterId
              formFieldKey
            }
          }
          definition {
            sections
          }
        }
        archiveRecord {
          purpose
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function EditFormDefinitionPage({formDefinitionId:e}){const[t]=(0,d.useState)(h.Vr()),[n,a]=(0,d.useState)(""),[i,r]=(0,d.useState)(""),[s,o]=(0,d.useState)(null),[l,c]=(0,d.useState)(!1),[u,m]=(0,d.useState)(""),[p,E]=(0,d.useState)(""),[S,T]=(0,d.useState)("");(0,d.useEffect)((()=>{u&&p&&S&&h.L9(Ie.ln.OPENED_FORM_DESIGNER,{session_id:t,action_method:Ie.LY.UPDATE_FORM_DEFINITION,action_origin:getFormDefinitionActionOrigin(),form_definition_id:e,name:u,template_collection_id:p,task_schema_id:S})}),[t,e,u,p,S])
async function updateFormName(t){await(0,st.jI)((0,et.R2)(e,t),"Updating form name...")
a(t)}async function moveForm(t){await(0,st.jI)((0,et.gy)(e,t),"Moving form...")
it.Z.activateCollection(t)
r(t)}function onArchive(){const a={id:e,name:n}
ct.bA({items:[a],onArchive:(e,n,a)=>{(0,lt.np)(e)(e,n,a,(()=>{o(n);(0,dt.$6)(e,{action_origin:Ie.D2.FORMS_EDIT_FORM_DEFINITION_DESIGNER,session_id:t})}))}})}function onUnarchive(){(0,lt.cI)([e])([e],void 0,(()=>{o(null);(0,dt.HJ)([e],{action_origin:Ie.D2.FORMS_EDIT_FORM_DEFINITION_DESIGNER,session_id:t})}))}return d.createElement(nt.ZP,{query:pt,renderLoading:()=>d.createElement(H.b,null),variables:{formDefinitionId:e},fetchPolicy:"network-only",onCompleted:({formDefinition:e})=>{var t,n
if(!(0,at.CZ)(e)){a(e.name)
r(e.templateCollection.id)
it.Z.activateCollection(e.templateCollection.id)
o(null!==(n=null===(t=e.archiveRecord)||void 0===t?void 0:t.purpose)&&void 0!==n?n:null)
c(e.isValid)
m(e.name)
E(e.templateCollection.id)
T(e.latestFormDefinitionVersion.actionConfigs[0].schema.id)}}},(({formDefinition:a})=>{if((0,at.CZ)(a))return d.createElement(InaccessibleFormWarning,null)
{const r=a.latestFormDefinitionVersion.actionConfigs[0].schema
return d.createElement(nt.ZP,{query:tt.zW,renderLoading:()=>d.createElement(H.b,null),variables:{actionIdentifier:we.p.identifier,schemaId:r.id},fetchPolicy:"network-only"},(({formAction:o})=>{if((0,at.CZ)(o))return d.createElement(InaccessibleFormWarning,null)
const[u,m]=(0,Fe.BK)(a.latestFormDefinitionVersion,[o],{lockAction:!0,lockSchema:!0}),p={[we.p.identifier]:[r]}
return d.createElement(SharedFormDefinitionPage,{id:a.id,name:n||a.name,setName:updateFormName,templateCollectionId:i||a.templateCollection.id,setTemplateCollectionId:moveForm,archivePurpose:null!=s?s:void 0,onArchive,onUnarchive,onSave:(a,i,r)=>async function onUpdateFormDefinition(a,i,r,s){if(!l){c(!0)
h.L9(Ie.ln.FIXED_INVALID_FORM_DEFINITION,{session_id:t,action_method:Ie.LY.UPDATE_FORM_DEFINITION,action_origin:Ie.D2.FORMS_EDIT_FORM_DEFINITION_DESIGNER,form_definition_id:e,task_schema_id:S,autofix_changes:r,additional_user_changes:s})}await(0,st.jI)((0,et.vd)(e,a,i),"Updating form...")
rt.ZP.success(`Updated form "${n}"`)
return!0}(a,i,m.map((e=>e.toAnalyticsString())),r),saveButtonText:"Save",initialFormDesignerState:u,autofixTaskSchemaName:r.name,autofixTaskSchemaURL:(0,mt.k_)(r.id),autofixUpdates:l?void 0:m,actionToSchemas:p,sessionId:t,actionOrigin:Ie.D2.FORMS_EDIT_FORM_DEFINITION_DESIGNER})}))}}))}var ht=n(634168),Et=n(989652),St=n(64558)
const Tt=ot.Ps`
  query SchemaPoliciesListingQuery($limitOffsetInput: LimitOffsetInput!)
  @skipAudit
  @engComponent(name: PERMISSIONS) {
    schemaPolicyListing(limitOffsetInput: $limitOffsetInput) {
      schemaPolicies {
        id
        name
        permissions {
          readable
          writable
        }
      }
    }
  }
`,gt={limitOffsetInput:{limit:3,offset:0}}
function SchemaPoliciesListing(){const e=(0,nt.IJ)(Tt,{variables:gt})
if(e.type===nt.NI.ERROR){rt.ZP.error("Could not load schema policies; try reloading the page.")
return null}if(e.type===nt.NI.PENDING)return d.createElement(H.b,null)
{const t=e.data.schemaPolicyListing.schemaPolicies
return d.createElement(PoliciesListing,{policies:t,getPolicyURL:A.ZL,deletePolicy:e=>Promise.reject(new Error("Not implemented")),clonePolicy:e=>Promise.reject(new Error("Not implemented")),reorderPolicies:e=>Promise.reject(new Error("Not implemented"))})}}function SchemaPoliciesPoliciesTab(){const e={Connection:isCapabilityEnabledForTenant(E.e2.LAB_AUTOMATION)&&S.ZP.INSTRUMENTS_ENABLE,Entity:!0,Result:S.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_PERMISSIONS,Request:S.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_REQUEST_PERMISSIONS,Run:S.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_PERMISSIONS,Interface:S.ZP.SCHEMAS_ENABLE_INTERFACES},t=(0,St.SL)(Object.keys(e).filter((t=>e[t]))),n=t.reduce(((e,n,a)=>0===a?n:a!==t.length-1?`${e}, ${n}`:`${e} and ${n}`),"")
return d.createElement(d.Fragment,null,d.createElement("p",null,"Assign Schema Access Policies to control how users interact with schema definitions and their objects. Schema Access Policies work in conjunction with Registry and Project permissions to provide specific control over the information users have access to."),d.createElement("p",null,"All users of an organization have default access to all schemas associated with that organization. Default access means that users can view schema definitions and their objects. Granting additional Schema Access Policies will control where schemas are listed in the product, who can create and edit schema objects, and who can manage schema access."),d.createElement("p",null," ","At this time, Schema Access Policies only apply to ",n," Schemas."," ",d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.benchling.com/hc/articles/9684210957581"},"Learn more")),d.createElement("div",{className:"u-spacing-top"},d.createElement(SchemaPoliciesListing,null)))}var ft=n(771398)
var It=n(681896)
async function DefaultSchemaCollaboratorsConfigurationActions_updateDefaultSchemaCollaboratorsConfiguration(e,t){const n=await function updateDefaultSchemaCollaboratorsConfiguration(e,t){return ft.Ry({url:`/1/api/default_schema_collaborators_configuration/${e}`,data:t})}(e,t);(0,It.writeFragmentsToCache)((0,ut.f)("DefaultSchemaCollaboratorsConfiguration"),[n])}var At=n(505258),yt=n(56063),_t=n(669324),Ct=n(872153)
function _getDefaultSchemaPolicyId(e){return e.length>0?e[0].id:""}function DefaultSchemaCollaboratorsSection(e){const t=!e.currentUserPermissions.writable
const n=(0,Ct.ZP)()
if(n.queryResultType===nt.NI.PENDING)return d.createElement(H.b,null)
if(n.queryResultType!==nt.NI.SUCCESS){rt.ZP.error("Could not load schema policies; try reloading the page.")
return null}{const a=n.schemaPolicies,i={showSchemaCreatorRow:!0,creatorPolicy:e.getAdminSchemaPolicy(a)}
return d.createElement("div",null,d.createElement(_t.Z,{getAdminPolicyId:function _getAdminSchemaPolicyId(t){return e.getAdminSchemaPolicy(t).id},getDefaultPolicyId:_getDefaultSchemaPolicyId,collaborators:e.collaborators,policies:a,labelText:"Default Options",creatorRowPropsGroup:i,enableAuditors:!1,isReadOnly:t,onUpdate:function _handleUpdate(t){t.collaborators&&e.onUpdate(t.collaborators)},policyType:yt.Mi.SCHEMA}),!t&&e.onSubmit&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,className:"pull-right",onClick:function _handleSubmit(){e.onSubmit&&e.onSubmit().then((()=>{rt.ZP.success("Successfully saved default schema collaborator settings.")})).catch(rt.ZP.notifyError)},size:O.qE.MEDIUM,disabled:e.saveButtonDisabled,text:"Save"}))}}var Rt=n(256605),Nt=n(334089),Ot=n(808844)
const bt=ot.Ps`
  query DefaultSchemaCollaborationConfigurationsListingQuery @skipAudit @engComponent(name: PERMISSIONS) {
    currentUser {
      id
      organizations {
        id
        name
        schemaCollaborationDefaultConfigurations {
          ...DefaultSchemaCollaboratorsConfigurationGraphQL
        }
      }
    }
  }
  ${(0,ut.f)("DefaultSchemaCollaboratorsConfiguration").fragment}
`,vt={[Rt.l.ENTITY]:"entity",[Rt.l.RESULT]:"result",[Rt.l.RUN]:"run",[Rt.l.CONNECTION]:"connection",[Rt.l.INTERFACE]:"interface",[Rt.l.STUDY]:"study"}
function enabledSchemaTypes(){if(!(0,p.cr)({feature:E.ed.REGISTRY_ADMIN}))return[]
const e=isCapabilityEnabledForTenant(E.e2.LAB_AUTOMATION),t=e&&S.ZP.INSTRUMENTS_ENABLE
return[...S.ZP.PERMISSIONS_ENABLE_TAG_SCHEMA_PERMISSIONS?[Rt.l.ENTITY]:[],...S.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_PERMISSIONS&&(0,p.cr)({feature:E.gm.RESULTS_ADMIN})?[Rt.l.RESULT]:[],...S.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_PERMISSIONS&&e?[Rt.l.RUN]:[],...t?[Rt.l.CONNECTION]:[],...S.ZP.SCHEMAS_ENABLE_INTERFACES?[Rt.l.INTERFACE]:[],...S.ZP.STUDIES_ENABLE?[Rt.l.STUDY]:[]]}function OrganizationSettingsSection(e){return d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Organization"),0===e.organizations.length?d.createElement(w.ZP,{menu:d.createElement(U.ZP,null),disabled:!0,displayName:"No organizations"}):d.createElement(OrganizationDropdownAndContent,{...e}))}function OrganizationDropdownAndContent(e){const[t,n]=d.useState(e.organizations[0])
return d.createElement(d.Fragment,null,d.createElement(w.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,value:t},e.organizations.map((e=>d.createElement(x.Z,{key:e.id,value:e,onSelect:n},e.name)))),displayName:t.name}),d.createElement(OrganizationContent,{organization:t}))}function getEnabledSchemaTypesForOrg(e){return e.schemaCollaborationDefaultConfigurations.map((e=>e.schemaType)).filter((e=>enabledSchemaTypes().includes(e)))}function getDefaultSchemaTypeForOrg(e){const t=getEnabledSchemaTypesForOrg(e)
return t.length>0?t[0]:void 0}function OrganizationContent(e){const[t,n]=d.useState(getDefaultSchemaTypeForOrg(e.organization))
d.useEffect((()=>{n(getDefaultSchemaTypeForOrg(e.organization))}),[e.organization])
return null==t?d.createElement("div",null,"No eligible schema types."):d.createElement("div",{className:N()((0,C.iv)(Pt.container))},d.createElement("div",{className:(0,C.iv)(Pt.sidebarContainer)},d.createElement(SchemaTypeSidebar,{activeSchemaType:t,schemaTypes:getEnabledSchemaTypesForOrg(e.organization),onClick:n})),d.createElement("div",{className:(0,C.iv)(Pt.collaboratorSectionContainer)},d.createElement(SchemaPoliciesSettingsTab_CollaboratorsSection,{organization:e.organization,activeSchemaType:t})))}function SchemaPoliciesSettingsTab_CollaboratorsSection(e){const[t,n]=d.useState(!1),[a,i]=d.useState(e.organization.schemaCollaborationDefaultConfigurations.find((t=>t.schemaType===e.activeSchemaType))),[r,s]=d.useState((0,yt.x2)(a,e.organization)),[o,l]=d.useState(!0)
d.useEffect((()=>{const t=e.organization.schemaCollaborationDefaultConfigurations.find((t=>t.schemaType===e.activeSchemaType))
if(null==t)return
const a=(0,It.readFragmentFromCache)((0,ut.f)("DefaultSchemaCollaboratorsConfiguration"),t.id)
i(a)
s((0,yt.x2)(a,e.organization))
l(!0)
n(!1)}),[e.activeSchemaType,e.organization])
return t?d.createElement(H.b,null):null==a?d.createElement("div",null,"No eligible schema types."):d.createElement(DefaultSchemaCollaboratorsSection,{collaborators:r,currentUserPermissions:a.currentUserPermissionsJson,onUpdate:function _handleDefaultCollaboratorsUpdate(e){l(!1)
s(e)},onSubmit:async()=>{n(!0)
const e=(0,yt.ao)(r)
await DefaultSchemaCollaboratorsConfigurationActions_updateDefaultSchemaCollaboratorsConfiguration(a.id,{collaborations:e})
i((0,It.readFragmentFromCache)((0,ut.f)("DefaultSchemaCollaboratorsConfiguration"),a.id))
n(!1)},getAdminSchemaPolicy:At.Ux,saveButtonDisabled:o})}function SchemaTypeSidebar(e){const t=(0,St.MZ)(e.schemaTypes,(e=>vt[e]))
return d.createElement(d.Fragment,null,t.map((t=>d.createElement(Nt.Z,{key:t,active:e.activeSchemaType===t,icon:d.createElement("span"),name:(0,Ot.kC)(vt[t]),clickHandler:()=>{e.onClick(t)}}))))}function SchemaPoliciesSettingsTab(e){const t=enabledSchemaTypes().map((e=>vt[e]))
return d.createElement("div",null,d.createElement(f.zV,null,"Default Schema Access Policy Options"),d.createElement("p",null,"Configure the default schema access policy options when any new"," ",(0,Ot.Dw)(t,"or").toLowerCase()," schemas are created in this organization. Default options will only be shown when creating new schemas."),d.createElement(OrganizationSettingsSection,{organizations:e.organizations}))}function QueryingSchemaPoliciesSettingsTab(){return d.createElement(nt.ZP,{query:bt,renderLoading:()=>d.createElement(H.b,null)},(e=>{var t,n
return d.createElement(SchemaPoliciesSettingsTab,{organizations:null!==(n=null===(t=e.currentUser)||void 0===t?void 0:t.organizations)&&void 0!==n?n:[]})}))}const Pt=C.mM.create({container:{display:"flex",height:"100%",marginTop:15},containerRow:{height:"100%"},collaboratorSectionContainer:{marginLeft:15},sidebarContainer:{padding:"0 15px",minWidth:170}})
var Lt
!function(e){e.POLICIES_TAB="POLICIES_TAB"
e.SETTINGS_TAB="SETTINGS_TAB"}(Lt||(Lt={}))
const Dt={policies:Lt.POLICIES_TAB,settings:Lt.SETTINGS_TAB},Mt=(0,ue.invert)(Dt),wt={[Lt.POLICIES_TAB]:"Policies",[Lt.SETTINGS_TAB]:"Settings"}
function SchemaPoliciesPage(e){d.useEffect((()=>{(0,T._w)("Schema Access Policies")}),[])
const t=[Lt.POLICIES_TAB]
S.ZP.PERMISSIONS_ENABLE_SCHEMA_ACCESS_POLICIES_SETTINGS_TAB&&t.push(Lt.SETTINGS_TAB)
const n=(()=>{switch(e.activeTab){case Lt.POLICIES_TAB:return d.createElement(SchemaPoliciesPoliciesTab,null)
case Lt.SETTINGS_TAB:return d.createElement(QueryingSchemaPoliciesSettingsTab,null)
default:return null}})()
return d.createElement(SchemaPoliciesPageContainer,null,t.length>1?d.createElement("div",{className:(0,C.iv)(Ft.tabContainer)},d.createElement(Et.Z,{className:(0,C.iv)(Ft.sectionTabs),tabs:Object.keys(wt).map((t=>({handleClick:()=>{(0,j.ZP)((0,A.hk)(Mt[t]))},text:wt[t],isActive:e.activeTab===t})))}),d.createElement("div",{className:(0,C.iv)(Ft.bodyContainer)},n)):n)}function SchemaPoliciesPageContainer(e){return d.createElement("div",{className:"settingsPage"},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement(f.R6,null,"Schema access policies"),e.children))}const Ft=C.mM.create({bodyContainer:{borderTop:`1px solid ${b.tN}`,paddingTop:"29px"},sectionTabs:ht.S1,tabContainer:{display:"flex",flexDirection:"column"}}),kt=JSON.parse('{"itemTypeOptions":[{"description":null,"itemType":"SCHEMA","name":"Schema Definitions","actionOptions":[{"description":null,"name":"View Schema Definition","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Controls where schemas are actively listed for a user to read. When granted, schemas are actively listed in:\\n\\n- Schema listing in the registry settings\\n- Schema dropdown when linking from a different schema\\n- Schema dropdowns in notebook templates\\n- Search filters\\n- APIs to list schemas","name":"List Schema Definition","disabled":true,"action":"LIST_DEFINITION","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit Schema Definition","disabled":true,"action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Archive Schema Definition","disabled":true,"action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true},{"description":null,"name":"Write Schema Definition","disabled":true,"action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true}]},{"description":null,"itemType":"SCHEMA","name":"Schema Objects","actionOptions":[{"description":null,"name":"View Schema Objects","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Create Schema Objects","disabled":true,"action":"CREATE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Register Schema Objects","disabled":true,"action":"REGISTER","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]}]}'),Ut=ot.Ps`
  query SchemaPolicyPageQuery($id: StrictString!) @skipAudit @engComponent(name: PERMISSIONS) {
    schemaPolicy(id: $id) {
      ... on SchemaPolicyNode {
        id
        name
        permissions {
          readable
          writable
        }
        policyStatements {
          itemType
          action
          condition
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function SchemaPolicyPage(e){const t=(0,nt.IJ)(Ut,{variables:{id:e.schemaPolicyId}})
if(t.type===nt.NI.ERROR){rt.ZP.error("Could not load schema policy; try reloading the page.")
return null}if(t.type===nt.NI.PENDING)return d.createElement(H.b,null)
{const e=t.data.schemaPolicy;(0,ie.hu)(function isAccessible(e){return!(0,at.CZ)(e)}(e),"Expected policy currently being viewed to be readable")
const n=kt
return d.createElement(PolicyPage,{policy:e,initialSpec:{name:e.name,statements:e.policyStatements},listingsTitle:"Schema Access Policies",policiesURL:A.N0(),policyTemplate:n,updatePolicy:e=>Promise.reject(new Error("Not implemented"))})}}var xt=n(40563),Bt=n(826242),Zt=n(615109),qt=n(294120),Gt=n(922633),Vt=n(537076),Ht=n(465428),Wt=n(10584),Yt=n(472347)
const $t={[Rt.gG.EVENTBRIDGE]:"AWS EventBridge",[Rt.gG.WEBHOOK]:"Webhook",[Rt.gG.APP]:"Webhook URL"}
function isEventBridgeSubscription(e){return"EventbridgeEventSubscriptionNode"===e.__typename}function isAppSubscription(e){return"AppEventSubscriptionNode"===e.__typename}var Kt=n(748048)
var zt=n(314670)
const Qt=ot.Ps`
  query ListEventInfo @skipAudit @engComponent(name: EVENTS) {
    eventInfoListing {
      eventInfos {
        description
        version
        versionedEventType
        deprecationDate
      }
    }
  }
`
function makeOptionDatas(e,t){const n=e.filter((e=>null!=e.deprecationDate)),a=e.filter((e=>null==e.deprecationDate)),i=ue.default.groupBy(ue.default.sortBy(a,"versionedEventType"),"version"),r=Object.keys(i).sort(),s=[]
for(const e of r){s.push({name:e,isHeader:!0})
for(const n of i[e])s.push({name:n.versionedEventType,value:n.versionedEventType,disabled:t.includes(n.versionedEventType)})}if(n.length>0){s.push({name:"Deprecated",isHeader:!0})
for(const e of n)s.push({name:e.versionedEventType,value:e.versionedEventType,disabled:t.includes(e.versionedEventType)})}return s}function EventTypesSection(e){function handleAddEventType(t){e.onChangeEventTypes([...e.eventTypes,t])}return d.createElement(nt.ZP,{query:Qt,renderLoading:nt.ZP.DEFAULT_RENDER_LOADING},(t=>d.createElement("div",{className:N()("container",(0,C.iv)(jt.container))},d.createElement(w.ZP,{className:"u-small-spacing-top u-small-spacing-bottom",menu:d.createElement(Yt.Z,{width:U.ZP.WIDTHS.FULL,optionDatas:makeOptionDatas(t.eventInfoListing.eventInfos,e.eventTypes),onSelect:handleAddEventType}),displayName:"Add event type...",dataTestAttrs:{component:"SelectDropdown",element:"eventType"}}),d.createElement(ne.Z,{className:"u-faded"},d.createElement(ee.Z,{xs:4},"Event Type"),d.createElement(ee.Z,{xs:8},"Description")),d.createElement("hr",{className:(0,C.iv)(jt.hr)}),e.eventTypes.length?e.eventTypes.map((n=>d.createElement(ne.Z,{key:n,className:"u-small-padding-bottom"},d.createElement(ee.Z,{xs:4},d.createElement("div",{className:N()("u-no-padding","u-overflow-wrap-break-word")},n)),d.createElement(ee.Z,{id:"__description-column",xs:7},function getDescriptionFromVersionedEventType(e,t){const n=e.find((e=>e.versionedEventType===t));(0,ie.Gp)(null!=n,`Expected matching eventInfo for type ${t}`)
return n?n.description:""}(t.eventInfoListing.eventInfos,n)),d.createElement(ee.Z,{xs:1},d.createElement(P.Z,{icon:"close",className:N()((0,C.iv)(jt.removeIcon),"u-faded u-pointer"),onClick:()=>{!function handleRemoveEventType(t){e.onChangeEventTypes(e.eventTypes.filter((e=>e!==t)))}(n)}}))))):d.createElement(ne.Z,{className:"u-small-padding-bottom u-faded"},d.createElement(ee.Z,{xs:12},"No event types selected")),function isAlphaBetaSelected(t){return void 0!==t.find((t=>t.version===Rt.S8.V2_BETA&&e.eventTypes.includes(t.versionedEventType)||t.version===Rt.S8.V2_ALPHA&&e.eventTypes.includes(t.versionedEventType)))}(t.eventInfoListing.eventInfos)&&d.createElement("div",{id:"__alpha-beta-warning"},d.createElement(zt.Z,{className:"u-mini-spacing-right"}),"Selected at least one"," ",d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/events-reference#v2-alpha-events-reference",onClick:()=>{trackDocumentationClick("alpha")}},"alpha"," "),"or"," ",d.createElement("a",{id:"__beta_link",target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/events-reference#v2-beta-events-reference",onClick:()=>{trackDocumentationClick("beta")}},"beta"," "),"event."),function isDeprecatedSelected(t){return void 0!==t.find((t=>null!=t.deprecationDate&&e.eventTypes.includes(t.versionedEventType)))}(t.eventInfoListing.eventInfos)&&d.createElement("div",{id:"__deprecated-warning"},d.createElement(zt.Z,{className:"u-mini-spacing-right"}),"Selected at least one deprecated event."))))}const jt=C.mM.create({container:{backgroundColor:b.bs},hr:{marginTop:9,marginBottom:6,borderWidth:1,borderColor:b.pF},removeIcon:{height:"10px",width:"10px",marginTop:3}})
function CreateEventbridgeEventSubscriptionModal(e){const[t,n]=(0,d.useState)(""),[a,i]=(0,d.useState)(""),[r,s]=(0,d.useState)(""),[o,l]=(0,d.useState)([]),c=Rt.gG.EVENTBRIDGE
function isDuplicateSubscription(){return e.existingSubscriptions.some((e=>!!isEventBridgeSubscription(e)&&(e.awsAccountId===t&&e.awsRegion===a)))}return d.createElement(B.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:async function handleSubmit(){const n=await async function create(e){const t=await(0,Kt.WO)(e);(0,It.writeFragmentsToCache)((0,ut.f)("EventSubscription"),[t.eventSubscription])
return t.eventSubscription}({destinationType:c,awsAccountId:t,awsRegion:a,eventTypes:o,eventBusName:r})
rt.ZP.success(`Successfully created EventBridge subscription *${n.name}*`)
e.onRequestSubmit()},title:"Create Subscription",buttons:[{text:"Create",submit:!0,style:O.ZJ.SECONDARY,disabled:isDuplicateSubscription(),dataTestAttrs:{component:"EventSubscriptionCreateModal",element:"createButton"}}]},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(be.Z,null,"Delivery Method"),d.createElement(w.ZP,{disabled:!0,menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,value:c},d.createElement(x.Z,{key:c,value:c},$t[c])),displayName:$t[c]}))),d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(be.Z,null,"AWS Region"),d.createElement(w.ZP,{dataTestAttrs:{component:"SelectDropdown",element:"region"},menu:d.createElement(Yt.Z,{width:U.ZP.WIDTHS.FULL,optionDatas:e.availableAwsRegions.map((e=>({value:e,name:e}))),onSelect:e=>{i(e)}}),displayName:a||"Select region..."})))),d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(k.Z,{label:"AWS Account ID",value:t,onChange:e=>{n(e.target.value)},placeholder:"000000000000",dataTestAttrs:{component:"TextField",element:"awsAccountId"}}))),d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(k.Z,{label:"Event Bus Name",value:r,onChange:e=>{s(e.target.value)},dataTestAttrs:{component:"TextField",element:"appName"},placeholder:"event-bus-name"})))),d.createElement(EventTypesSection,{eventTypes:o,onChangeEventTypes:l}),isDuplicateSubscription()&&d.createElement(ne.Z,null,d.createElement("div",{className:"text-warning u-padding"},"You may only have one subscription for an account and region combination.")))}var Jt=n(954587)
function UpdateEventSubscriptionModal(e){const[t,n]=(0,d.useState)(e.eventSubscription.eventTypes)
return d.createElement(B.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:async function handleSubmit(){if(isAppSubscription(e.eventSubscription))(0,ie.Gp)(isAppSubscription(e.eventSubscription),"attempted to update app subscription in event listing")
else{await async function update(e,t){const n=await(0,Kt.$x)(e,t);(0,It.writeFragmentsToCache)((0,ut.f)("EventSubscription"),[n.eventSubscription])
return n.eventSubscription}(e.eventSubscription.id,{eventTypes:t,paused:!e.expired&&!isAppSubscription(e.eventSubscription)&&e.eventSubscription.paused})
rt.ZP.success(`Successfully updated event subscription *${e.eventSubscription.name}*`)
e.onRequestSubmit()}},title:e.expired?"Resubscribe to expired subscription":"Update Subscription",buttons:[{text:e.expired?"Resubscribe":"Update",submit:!0,style:O.ZJ.SECONDARY,dataTestAttrs:{component:"EventSubscriptionUpdateModal",element:"updateButton"}}]},d.createElement("div",{className:"u-small-spacing-bottom"},e.expired&&d.createElement("div",{className:"u-small-spacing-bottom"},d.createElement(Jt.Z,null,d.createElement("span",null,"This subscription expired because no corresponding event bus was set up in AWS within two weeks. Resubscribing will create a new partner event source in your AWS account. The"," ",d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/events-getting-started#receiving-events",onClick:()=>{trackDocumentationClick("receiving-events")}},"documentation")," ","includes detailed instructions to complete AWS EventBridge setup."))),d.createElement("div",null,d.createElement(F.Z,{label:"Subscription:"}),d.createElement("code",null,e.eventSubscription.name)),isEventBridgeSubscription(e.eventSubscription)&&d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement(F.Z,{label:"AWS Account:"}),d.createElement("code",null,e.eventSubscription.awsAccountId)),d.createElement("div",null,d.createElement(F.Z,{label:"AWS Region:"}),d.createElement("code",null,e.eventSubscription.awsRegion)))),d.createElement(EventTypesSection,{eventTypes:t,onChangeEventTypes:n}))}const Xt=ot.Ps`
  query ListEventSubscriptions @noReadOnly @skipAudit @engComponent(name: EVENTS) {
    eventSubscriptionsListing {
      eventSubscriptions {
        ...EventSubscriptionGraphQL
      }
      availableAwsRegions
    }
  }
  ${(0,ut.f)("EventSubscription").fragment}
`
var en
!function(e){e.ACTIVE="Active"
e.PENDING="Pending"
e.EXPIRED="Expired"}(en||(en={}))
function getEventSubscriptionStatus(e){return isEventBridgeSubscription(e)&&e.paused?en.EXPIRED:isEventBridgeSubscription(e)&&null!=e.expiresAt?en.PENDING:en.ACTIVE}function getTooltipTextByStatus(e,t){if(isAppSubscription(t))return"App is configured to receive events"
switch(e){case en.ACTIVE:return"Event subscription is active and has an associated AWS Event Bus."
case en.EXPIRED:return"Delete or re-subscribe to this expired subscription."
default:(0,ie.Gp)(e===en.PENDING,`Expected state to be in [${Object.keys(en)}]. Actual: ${e}`)
return"Activate subscription by associating an AWS Event Bus in the target AWS account before the expiration date."}}function DeliveryInformation(e){const{subscription:t,rowIndex:n}=e
return isEventBridgeSubscription(t)?d.createElement(de.bL,null,d.createElement("div",null,"AWS Account:",d.createElement("code",{...(0,g.Z)({component:"EventSubscription",element:"awsAccountId",index:n.toString()})},t.awsAccountId)),d.createElement("div",null,"AWS Region:",d.createElement("code",{...(0,g.Z)({component:"EventSubscription",element:"region",index:n.toString()})},t.awsRegion))):isAppSubscription(t)?d.createElement(de.bL,null,d.createElement("div",null,"App: ",t.name)):d.createElement(de.bL,null)}function EventSubscriptionsTable(e){function handleOpenUpdateModal(t,n){h.KK(Ie.$Z.OPENED_EVENT_SUBSCRIPTION_UPDATE_MODAL);(0,D.Z)(UpdateEventSubscriptionModal,{eventSubscription:t,expired:n,onRequestSubmit:()=>{e.onRefreshListing()}})}function EventSubscriptionStatusCell(e){const t=getEventSubscriptionStatus(e.eventSubscription)
return d.createElement(de.bL,null,d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:getTooltipTextByStatus(t,e.eventSubscription)},d.createElement("div",{className:"u-display-inline-block",...(0,g.Z)(e.dataTestAttrs)},d.createElement(P.Z,{className:N()("u-mini-spacing-right",(0,C.iv)(t===en.ACTIVE&&tn.active,t===en.PENDING&&tn.pending,t===en.EXPIRED&&tn.expired)),icon:"dot"}),t,isEventBridgeSubscription(e.eventSubscription)&&t===en.PENDING&&d.createElement("div",null,"Expires On: ",(0,Wt.UT)(e.eventSubscription.expiresAt)))))}function UpdateEventSubscriptionIconCell(e){const t=getEventSubscriptionStatus(e.eventSubscription)===en.EXPIRED
return d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:t?"Re-subscribe":"Edit"},d.createElement(P.Z,{className:N()("updateIcon",(0,C.iv)(tn.updateIcon)),onClick:n=>{handleOpenUpdateModal(e.eventSubscription,t)},icon:t?"refresh":"edit",dataTestAttrs:e.dataTestAttrs}))}return d.createElement(de.iA,{numRows:e.eventSubscriptions.length,emptyTableText:"No event subscriptions",getRowClassName:()=>(0,C.iv)(tn.tableRow)},d.createElement(de.sg,{header:d.createElement(de.bL,null,"Subscription",d.createElement(v.Z,{onClick:function handleOpenCreateModal(){h.KK(Ie.$Z.OPENED_EVENT_SUBSCRIPTION_CREATE_MODAL);(0,D.Z)(CreateEventbridgeEventSubscriptionModal,{availableAwsRegions:e.availableAwsRegions,existingSubscriptions:e.eventSubscriptions,onRequestSubmit:()=>{e.onRefreshListing()}})}}),d.createElement(Q.Z,{className:"u-spacing-left",buttonSize:O.qE.MINI,ids:e.eventSubscriptions.map((e=>e.id))})),renderCell:t=>e.eventSubscriptions[t].name}),d.createElement(de.sg,{header:"Status",renderCell:t=>{const n=e.eventSubscriptions[t],a=getEventSubscriptionStatus(n)
return isAppSubscription(n)||isEventBridgeSubscription(n)?d.createElement(EventSubscriptionStatusCell,{eventSubscription:n,dataTestAttrs:{component:"EventSubscription",element:"status",key:a,index:t.toString()}}):d.createElement(de.bL,null)}}),d.createElement(de.sg,{header:"Delivery Method",renderCell:t=>$t[e.eventSubscriptions[t].destinationType]}),d.createElement(de.sg,{header:"Delivery Information",renderCell:t=>d.createElement(DeliveryInformation,{subscription:e.eventSubscriptions[t],rowIndex:t})}),d.createElement(de.sg,{header:"Event Types",renderCell:t=>d.createElement(de.bL,null,e.eventSubscriptions[t].eventTypes.map(((e,n)=>d.createElement(d.Fragment,{key:e},d.createElement("div",null,d.createElement("code",{...(0,g.Z)({component:"EventSubscription",element:"eventType",index:t.toString()})},e))))))}),d.createElement(de.sg,{renderCell:t=>d.createElement(de.bL,{className:"u-text-align-right"},isEventBridgeSubscription(e.eventSubscriptions[t])?d.createElement("div",{className:"u-display-inline-block"},d.createElement(UpdateEventSubscriptionIconCell,{eventSubscription:e.eventSubscriptions[t],dataTestAttrs:{component:"EventSubscription",element:"updateButton",index:t.toString()}}),d.createElement(P.Z,{className:N()("deleteIcon","u-spacing-left",(0,C.iv)(tn.deleteIcon)),onClick:n=>{!async function handleDeleteSubscription(t){if(isAppSubscription(t)){(0,ie.Gp)(isAppSubscription(t),"attempted to delete app subscription in event listing page")
return}if(await M.iG("Delete Subscription",`Clicking OK will delete the subscription ${t.name} permanently.`,"danger",{promiseCompatible:!0})){await Kt.O6(t.id)
rt.ZP.success("Successfully deleted subscription")
e.onRefreshListing()}}(e.eventSubscriptions[t])},icon:"format-delete"})):null)}))}function EventSubscriptionsListing(){return d.createElement(nt.ZP,{query:Xt,renderLoading:nt.ZP.DEFAULT_RENDER_LOADING},((e,{refetch:t})=>{return d.createElement("div",null,d.createElement(EventSubscriptionsTable,{availableAwsRegions:e.eventSubscriptionsListing.availableAwsRegions,eventSubscriptions:(n=e.eventSubscriptionsListing.eventSubscriptions,n.filter((e=>isEventBridgeSubscription(e)||isAppSubscription(e)&&!e.paused))),onRefreshListing:t}))
var n}))}const tn=C.mM.create({tableRow:{":hover .deleteIcon":{visibility:"visible"},":hover .updateIcon":{visibility:"visible"}},updateIcon:{color:b.TG,visibility:"hidden",cursor:"pointer",":hover":{color:b.t0,visibility:"visible"}},deleteIcon:{color:b.TG,visibility:"hidden",cursor:"pointer",":hover":{color:b.Zl,visibility:"visible"}},pending:{color:b.t0},active:{color:b.ZA},expired:{color:b.TG}})
function trackDocumentationClick(e){h.KK(Ie.$Z.OPENED_EVENTS_DOCUMENTATION,{documentation_type:e})}function EventSubscriptionsPage(){(0,T._w)("Events")
h.KK(Ie.$Z.OPENED_DEVELOPER_CONSOLE)
return d.createElement("div",{className:"settingsPage legacy-font-proxima-13"},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement(f.R6,null,"Events"),d.createElement("p",{id:"__documentation-info"},"For information about how to configure and use events, read our"," ",d.createElement("a",{id:"__getting_started_link",target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/events-getting-started",onClick:()=>{trackDocumentationClick("getting-started")}},"Events Getting Started Guide")," ","and our"," ",d.createElement("a",{id:"__developer_platform_overview_link",target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/developer-platform-overview",onClick:()=>{trackDocumentationClick("developer-platform-overview")}},"Developer Platform Overview"),"."),d.createElement("div",{className:"u-spacing-top"},d.createElement(EventSubscriptionsListing,null))))}var nn=n(83691),an=n(676328),rn=n(900793),sn=n(277542),on=n(20859)
const ln={display:"inline-block",width:250},cn=ot.Ps`
  fragment APIKeyTableAPIKey on BenchlingAppNode {
    id
    apiKey {
      ... on InaccessibleInfoNode {
        invalidId
      }
      ... on APIKeyNode {
        key
        createdAt
      }
    }
  }
`
function KeyColumn(e){const[t,n]=d.useState(!1)
return d.createElement(d.Fragment,null,d.createElement("div",{className:(0,C.iv)(dn.secretContainer)},t?d.createElement("span",null,e.bkey):d.createElement("span",{className:(0,C.iv)(dn.secret)},"           ")),d.createElement("div",{className:"pull-right"},d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy API Key"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.SMALL,className:"u-spacing-left",icon:"copy",onClick:()=>(0,on.Z)(e.bkey,{showToastOnSuccess:!0,toastText:"Copied API key to clipboard."})})),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:t?"Hide API Key":"Show API Key"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.SMALL,className:"u-mini-spacing-left",icon:t?"eye-slash":"eye",onClick:()=>{n(!t)}}))))}function KeyTable(e){const regenerateKey=async()=>{await e.onRegenerate()},t=0===e.keys.length
return d.createElement("div",{className:N()("u-spacing-top container",(0,C.iv)(dn.tableWrapper))},e.lifecycleManagement!==Rt.o4.AUTOMATIC&&d.createElement(ne.Z,null,d.createElement(ee.Z,{md:8,className:(0,C.iv)(dn.pullLeft)},d.createElement(f.Dx,null,e.title)),d.createElement(ee.Z,{md:4,className:(0,C.iv)(dn.noRightPadding)},d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY_WHITE,size:O.qE.SMALL,onClick:t?regenerateKey:()=>(0,D.Z)(ConfirmRegenerateAPIKeyModal,{handleRegenerateKey:regenerateKey,appName:e.appName}),className:"pull-right",text:t?"Generate Key":"Regenerate Key"}))),d.createElement(ne.Z,null,d.createElement(de.iA,{numRows:e.keys.length,overflowVisible:!0,emptyTableText:"No key"},d.createElement(de.sg,{header:"Key",renderCell:t=>d.createElement(de.bL,null,d.createElement(KeyColumn,{bkey:e.keys[t].key}))}),d.createElement(de.sg,{header:"Created",renderCell:t=>d.createElement(de.bL,null,(0,Wt.UT)(e.keys[t].createdAt),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Delete API Key"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.SMALL,className:"u-spacing-left",icon:"delete",onClick:async()=>{await e.onDelete()}})))}))))}function ConfirmDeleteAPIKeyModal({handleDelete:e,appName:t,onRequestClose:n,onRequestSubmit:a}){return d.createElement(B.ZP,{onRequestClose:n,onRequestSubmit:async function handleSubmit(){await e()
a()},title:"Confirm API Key Deletion",buttons:[{text:"Delete API Key",submit:!0,style:O.ZJ.NEGATIVE}]},"Confirm youd like to remove ",t,"'s API key. Access for any future requests using this API key will be revoked.")}function ConfirmRegenerateAPIKeyModal({handleRegenerateKey:e,appName:t,onRequestClose:n,onRequestSubmit:a}){return d.createElement(B.ZP,{onRequestClose:n,onRequestSubmit:async function handleSubmit(){await e()
a()},title:"Confirm API Key Regeneration",buttons:[{text:"Regenerate API Key",submit:!0,style:O.ZJ.SECONDARY}]},"Generating a new API key will delete ",t,"'s current one.")}function ApiKeyTable({apiKeys:e,appName:t,handleRegenerateKey:n,handleDelete:a,lifecycleManagement:i}){return d.createElement(KeyTable,{appName:t,title:"API Key",keys:e,onDelete:()=>(0,D.Z)(ConfirmDeleteAPIKeyModal,{appName:t,handleDelete:a}),onRegenerate:n,lifecycleManagement:i})}const dn=C.mM.create({secretContainer:ln,secret:{fontSize:20},pullLeft:{paddingLeft:0},tableWrapper:{marginLeft:0},noRightPadding:{paddingRight:0}}),un=ot.ZP`
  fragment ClientCredentialSectionCredential on BenchlingAppNode {
    id
    oauthCredential {
      ... on InaccessibleInfoNode {
        invalidId
      }
      ... on OAuthCredentialNode {
        clientId
        clientSecrets {
          suffix
        }
      }
    }
  }
`
function ClientSecretTable(e){const regenerateSecret=async()=>{await e.onRegenerate()},deleteSecret=async()=>{await e.onDelete()},t=0===e.clientSecrets.length
return d.createElement("div",{className:N()("u-spacing-top container",(0,C.iv)(mn.tableWrapper)),...(0,g.Z)(e.dataTestAttrs)},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:8,className:(0,C.iv)(mn.pullLeft)},d.createElement("strong",null,"Client ID"))),d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6,className:N()("u-width-full",(0,C.iv)(mn.grayBox))},d.createElement("div",null,d.createElement("span",{...(0,g.Z)({component:"ClientSecretTable",element:"clientId"})},e.clientId),d.createElement("div",{className:"pull-right"},d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy Client ID Key"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.MINI,className:(0,C.iv)(mn.noRightPadding),icon:"copy",onClick:()=>(0,on.Z)(e.clientId,{showToastOnSuccess:!0,toastText:"Copied Client ID to clipboard."})})))))),function shouldEnableRollingCredentials(e,t){return e!==Rt.o4.AUTOMATIC||t}(e.lifecycleManagement,e.isGlobal)&&d.createElement(ne.Z,null,d.createElement(ee.Z,{md:0,className:(0,C.iv)(mn.noRightPadding)},d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY_WHITE,size:O.qE.SMALL,onClick:t?regenerateSecret:()=>(0,D.Z)(ConfirmRegenerateClientSecretModal,{handleRegenerateSecret:regenerateSecret,appName:e.appName}),className:"pull-right",text:t?"Generate Secret":"Regenerate Secret",dataTestAttrs:{component:"ClientSecretTable",element:"generateSecretButton"}}))),d.createElement(ne.Z,null,d.createElement(de.iA,{numRows:e.clientSecrets.length,overflowVisible:!0,emptyTableText:"No associated client secrets"},d.createElement(de.sg,{header:"Client Secret",renderCell:t=>d.createElement(de.bL,null,d.createElement("div",{className:(0,C.iv)(mn.secretContainer)},d.createElement("span",null,"**********",e.clientSecrets[t].suffix)),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Delete Client Secret"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.SMALL,className:"u-spacing-left",icon:"delete",onClick:()=>{(0,D.Z)(ConfirmDeleteClientSecretModal,{appName:e.appName,handleDelete:deleteSecret})}})))}))))}function ConfirmDeleteClientSecretModal({handleDelete:e,appName:t,onRequestClose:n,onRequestSubmit:a}){return d.createElement(B.ZP,{onRequestClose:n,onRequestSubmit:function handleSubmit(){e()
a()},title:"Confirm Client Secret Deletion",buttons:[{text:"Delete Client Secret",submit:!0,style:O.ZJ.NEGATIVE}]},"Confirm youd like to remove ",d.createElement("b",null,t),"'s Client Secret. Access for any future requests using this Client Secret will be revoked.")}function ConfirmRegenerateClientSecretModal({handleRegenerateSecret:e,appName:t,onRequestClose:n,onRequestSubmit:a}){return d.createElement(B.ZP,{onRequestClose:n,onRequestSubmit:async function handleSubmit(){await e()
a()},title:"Confirm Client Secret Regeneration",buttons:[{text:"Regenerate Client Secret",submit:!0,style:O.ZJ.SECONDARY}]},"Generating a new Client Secret will delete ",d.createElement("b",null,t),"'s current one.")}function ClientCredentialSection({clientSecrets:e,appName:t,clientId:n,handleRegenerateSecret:a,handleDelete:i,lifecycleManagement:r,isGlobal:s}){return d.createElement(ClientSecretTable,{appName:t,title:"Client Secrets",clientSecrets:e,onDelete:i,onRegenerate:a,clientId:n,lifecycleManagement:r,isGlobal:s,dataTestAttrs:{component:"ClientCredentialSection",element:"client"}})}const mn=C.mM.create({secretContainer:{display:"inline-block",width:"calc(100% - 50px)"},secret:{fontSize:20},pullLeft:{paddingLeft:0},tableWrapper:{marginLeft:0},noRightPadding:{paddingRight:0},grayBox:{backgroundColor:b.bs,padding:10}})
function DisplayClientSecretModal({clientSecret:e,onRequestClose:t,onRequestSubmit:n}){const[a,i]=d.useState(!1)
return d.createElement(B.ZP,{onRequestClose:t,onRequestSubmit:n,title:"Generated Client Secret",buttons:[{text:"Okay",submit:!0,style:O.ZJ.SECONDARY,dataTestAttrs:{component:"DisplayClientSecretModal",element:"okButton"}}]},d.createElement("div",{className:N()("u-spacing-top container",(0,C.iv)(pn.tableWrapper))},d.createElement(ne.Z,{className:N()("u-lr-split",(0,C.iv)(pn.grayBox))},d.createElement(zt.Z,{className:"u-tiny-spacing-right"}),d.createElement("span",null,d.createElement("strong",null,"Copy the following secret down before closing this modal. The secret isnt stored and cant be retrieved later."))),d.createElement(ne.Z,null,d.createElement(ee.Z,{md:8,className:(0,C.iv)(pn.pullLeft)},d.createElement("strong",null,"Client Secret"))),d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6,className:N()("u-width-full",(0,C.iv)(pn.grayBox))},d.createElement("span",{id:"__client-secret",...(0,g.Z)({component:"DisplayClientSecretModal",element:"clientSecret"})},a?d.createElement("span",null,e):d.createElement("span",{className:(0,C.iv)(pn.secret)},"                   ")),d.createElement("div",{className:"pull-right"},d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy Client Secret"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.MINI,className:"u-spacing-left",icon:"copy",onClick:()=>(0,on.Z)(e,{showToastOnSuccess:!0,toastText:"Copied Client Secret to clipboard."})})),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:a?"Hide Client Secret":"Show Client Secret"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.SMALL,className:"u-mini-spacing-left",icon:a?"eye-slash":"eye",onClick:()=>{i(!a)}})))))))}const pn=C.mM.create({secretContainer:ln,secret:{fontSize:20},pullLeft:{paddingLeft:0},tableWrapper:{marginLeft:0},noRightPadding:{paddingRight:0},grayBox:{backgroundColor:b.bs,padding:10}})
function ClipboardButton(e){return d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy public key"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.MINI,className:(0,C.iv)(hn.upperRight),icon:"copy",onClick:()=>(0,on.Z)(e.getValue(),{showToastOnSuccess:!0,toastText:"Copied public key to clipboard."})}))}function PublicKeySection(e){var t
return d.createElement("div",null,d.createElement("h3",{className:N()("header--header3")},"Public Key"),d.createElement("div",{className:(0,C.iv)(hn.sectionDescription)},"This key is used to encrypt values stored securely in app configs."),d.createElement("div",{className:(0,C.iv)(hn.textParent)},d.createElement(De.Z,{inputClassName:(0,C.iv)(hn.editableTextFieldClass),emptyValueAllowed:!0,placeholder:"Public Key for encrypting secure_text app config items",value:null!==(t=e.value)&&void 0!==t?t:"",requestChange:e.onChangePublicKey,type:De.T.TEXTAREA}),null!=e.value&&d.createElement(ClipboardButton,{getValue:function getValue(){var t
return null!==(t=e.value)&&void 0!==t?t:""}})))}const hn=C.mM.create({sectionDescription:{marginBottom:"15px"},textParent:{position:"relative"},upperRight:{position:"absolute",right:"1em",top:"1em"},editableTextFieldClass:{minHeight:180,resize:"none"}}),En=ot.Ps`
  fragment WebhookConfigurationSectionWebhookConfiguration on BenchlingAppNode {
    id
    webhookConfigurations {
      ... on InaccessibleInfoNode {
        invalidId
      }
      ... on WebhookConfigurationNode {
        id
        endpointPublicKeySet
        webhookUrl
      }
    }
  }
`
function WebhookConfigurationSection({onUpdateWebhookURL:e,webhookConfigurations:t,hasFeatures:n,hasMessageSubscriptions:a,lifecycleManagement:i}){var r;(0,ie.Gp)(t.length<=1,"Expected to render WebhookConfigurationSection only where there less than or equal to one webhookConfiguration")
const s=null===(r=t[0])||void 0===r?void 0:r.webhookUrl,o=[].concat(["features"].filter((()=>n&&!s)),["message subscriptions"].filter((()=>a&&!s)),["an AUTOMATIC lifecycle management"].filter((()=>i===Rt.o4.AUTOMATIC&&!s)))
return d.createElement("div",null,d.createElement(f.BB,{className:"u-spacing-top"},"Webhook Connection"),d.createElement("div",null,o.length>0&&d.createElement("div",{className:(0,C.iv)(Sn.missingWebhookUrlWarning)},d.createElement(qe.ZP,{bannerType:qe.ct.WARNING,text:"Add Webhook URL",supportingInfo:`Apps with ${o.join(", ")} require webhooks.`})),d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"Webhook URL",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{emptyValueAllowed:!0,requestChange:e,type:De.T.TEXT,value:s}))),"To learn more about verifying webhooks, visit our"," ",d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/webhook-verification"},"webhook verification documentation."))}const Sn=C.mM.create({missingWebhookUrlWarning:{marginBottom:10}}),Tn="BENCHLING_APP_SETTINGS_TAB",gn=ot.Ps`
  query getBenchlingAppQueryLegacy($benchlingAppId: StrictString!, $forDeveloper: StrictBoolean)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    benchlingApp(id: $benchlingAppId, forDeveloper: $forDeveloper) {
      ... on BenchlingAppNode {
        ...BenchlingAppGraphQL
        ...APIKeyTableAPIKey
        ...ClientCredentialSectionCredential
        ...WebhookConfigurationSectionWebhookConfiguration
        publicKey
        isPrivate
        eventSubscription {
          id
          eventTypes
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("BenchlingApp").fragment}
  ${cn}
  ${un}
  ${En}
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function BenchlingAppPageLegacy(e){const t=e.id
return d.createElement(nt.ZP,{query:gn,renderLoading:()=>d.createElement(H.b,null),variables:{benchlingAppId:t,forDeveloper:!0}},((e,{refetch:t})=>!(0,at.CZ)(e.benchlingApp)&&function currentTenantIsOwningTenant(e){return e.owningTenant.isCurrentTenant}(e.benchlingApp)?d.createElement(BenchlingAppSettings,{benchlingApp:e.benchlingApp,refetchBenchlingApp:t}):d.createElement("div",null,d.createElement(qe.ZP,{bannerType:qe.ct.ERROR,text:"You do not have access to manage this app."}))))}function BenchlingAppSettings({benchlingApp:e,refetchBenchlingApp:t}){var n,a,i
const{id:r,name:s,publicKey:o}=e,l=null!==(n=e.description)&&void 0!==n?n:"",c={name:s,description:l};(0,d.useEffect)((()=>{T._w(`${s} - Benchling Apps`)}),[s])
async function handleSubmitDefinition(e){const n=await rn.dg(r,e)
t()
rt.ZP.success(`Successfully updated app *${n.name}*`)}async function handleSubmitDefinitionVersion(n){const a=await rn.Ms(r,e.versionNumber,n)
t()
rt.ZP.success(`Successfully updated app *${a.name}*`)}function getVersionLockedTooltip(){return!0===e.isPrivate||null==e.isPrivate?null:"This field can not be edited because the current app version is no longer private"}return d.createElement(J.Z,{onClickTitle:()=>{(0,j.ZP)(sn.TC)},subtitle:s,title:"Apps",toolbar:d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"View app in the workspace",onClick:()=>{(0,j.ZP)(e.url)}})},d.createElement(Ye.Xl,{activeTab:Tn,className:N()((0,C.iv)(fn.maxWidth),"u-flex-grow"),onRequestTabChange:()=>{}},d.createElement(Ye.OK,{tabKey:Tn,title:"Settings"},e.appDefinitionId&&d.createElement("div",{className:(0,C.iv)(fn.benchlingAppMetadataField)},d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"ID",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{isDisabled:!0,requestChange:()=>{},type:De.T.TEXT,value:e.appDefinitionId}))),d.createElement("div",{className:(0,C.iv)(fn.benchlingAppMetadataField)},d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:e.appDefinitionId?"Installation ID":"ID",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{isDisabled:!0,requestChange:()=>{},type:De.T.TEXT,value:r}))),e.versionNumber&&d.createElement("div",{className:(0,C.iv)(fn.benchlingAppMetadataField)},d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"Version",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{isDisabled:!0,requestChange:()=>{},type:De.T.TEXT,value:e.versionNumber}))),d.createElement("div",{className:(0,C.iv)(fn.benchlingAppMetadataField)},d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"Name",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{disableEditsWithTooltip:getVersionLockedTooltip(),requestChange:e=>{handleSubmitDefinitionVersion({...c,name:e})},type:De.T.TEXT,value:s,dataTestAttrs:{component:"EditableTextField",element:"name"}}))),d.createElement("div",{className:(0,C.iv)(fn.benchlingAppMetadataField)},d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"Description",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{disableEditsWithTooltip:getVersionLockedTooltip(),emptyValueAllowed:!0,requestChange:e=>{handleSubmitDefinitionVersion({...c,description:e})},type:De.T.TEXTAREA,value:l,isFullWidth:!0,dataTestAttrs:{component:"EditableTextField",element:"description"}}))),d.createElement("div",{className:(0,C.iv)(fn.benchlingAppMetadataField)},d.createElement(PublicKeySection,{value:o,onChangePublicKey:e=>{handleSubmitDefinition({publicKey:e})}})),d.createElement(f.BB,{className:"u-spacing-top"},"Credentials"),"Apps require data access and permissions to operate. Refer to"," ",d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/getting-started-benchling-apps#permissioning-apps"},"this guide")," ","to grant and confirm this app's access.",e.oauthCredential&&!(0,at.CZ)(e.oauthCredential)&&d.createElement(ClientCredentialSection,{appName:e.name,clientSecrets:e.oauthCredential.clientSecrets,clientId:e.oauthCredential.clientId,handleDelete:async function handleDeleteClientSecret(){await(0,sn.Ir)(e.id)
t()
rt.ZP.success("Successfully deleted Client Secret")},handleRegenerateSecret:async function handleRegenerateClientSecret(){const n=await(0,sn.gh)(e.id);(0,D.Z)(DisplayClientSecretModal,{clientSecret:n.clientSecret,onRequestClose:()=>{t()
rt.ZP.success("Successfully generated a new Client Secret")},onRequestSubmit:()=>{t()
rt.ZP.success("Successfully generated a new Client Secret")}})},lifecycleManagement:e.lifecycleManagement,isGlobal:e.isGlobal}),S.ZP.ENABLE_BENCHLING_APP_API_KEY_UI&&e.apiKey&&!(0,at.CZ)(e.apiKey)&&d.createElement(ApiKeyTable,{appName:e.name,apiKeys:[e.apiKey],handleDelete:async function handleDeleteAPIKey(){await(0,sn.Xi)(e.id)
t()
rt.ZP.success("Successfully deleted API Key")},handleRegenerateKey:async function handleRegenerateAPIKey(){await(0,sn.Or)(e.id)
t()
rt.ZP.success("Successfully generated a new API Key")},lifecycleManagement:e.lifecycleManagement}),!e.webhookConfigurations.some((e=>(0,at.CZ)(e)))&&d.createElement(WebhookConfigurationSection,{webhookConfigurations:e.webhookConfigurations,onUpdateWebhookURL:e=>{handleSubmitDefinition({webhookUrl:e})},hasFeatures:e.features.length>0,lifecycleManagement:e.lifecycleManagement,hasMessageSubscriptions:(null!==(i=null===(a=e.eventSubscription)||void 0===a?void 0:a.eventTypes.length)&&void 0!==i?i:0)>0}))))}const fn=C.mM.create({benchlingAppMetadataField:{marginBottom:15},maxWidth:{maxWidth:"70em"}})
var In=n(393686)
const An=ot.ZP`
  fragment ClientCredentialSectionCredential on BenchlingAppNode {
    id
    oauthCredential {
      ... on InaccessibleInfoNode {
        invalidId
      }
      ... on OAuthCredentialNode {
        clientId
        clientSecrets {
          suffix
        }
      }
    }
  }
`
function ClientID({clientId:e}){return d.createElement(ee.Z,{md:6,className:N()("u-width-full",(0,C.iv)(yn.grayBox))},d.createElement("div",null,d.createElement("span",{...(0,g.Z)({component:"ClientSecretTable",element:"clientId"})},e),d.createElement("div",{className:"pull-right"},d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy Client ID Key"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.MINI,className:(0,C.iv)(yn.noRightPadding),icon:"copy",onClick:()=>(0,on.Z)(e,{showToastOnSuccess:!0,toastText:"Copied Client ID to clipboard."})})))))}function ClientCredentialSection_ClientSecretTable(e){const regenerateSecret=async()=>{await e.onRegenerate()},deleteSecret=async()=>{await e.onDelete()},t=0===e.clientSecrets.length
return d.createElement("div",{className:N()((0,C.iv)(yn.tableWrapper)),...(0,g.Z)(e.dataTestAttrs)},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6,className:(0,C.iv)(yn.pullLeft)},d.createElement(f.Dx,null,"Client Secret")),d.createElement(ee.Z,{md:6,className:(0,C.iv)(yn.noRightPadding)},function ClientCredentialSection_shouldEnableRollingCredentials(e,t){return e!==Rt.o4.AUTOMATIC||t}(e.lifecycleManagement,e.isGlobal)&&d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY_WHITE,size:O.qE.SMALL,onClick:t?regenerateSecret:()=>(0,D.Z)(ClientCredentialSection_ConfirmRegenerateClientSecretModal,{handleRegenerateSecret:regenerateSecret,appName:e.appName}),className:"pull-right",text:t?"Generate Secret":"Regenerate Secret",dataTestAttrs:{component:"ClientSecretTable",element:"generateSecretButton"}}))),d.createElement(ne.Z,null,d.createElement(de.iA,{numRows:e.clientSecrets.length,overflowVisible:!0,emptyTableText:"No associated client secrets"},d.createElement(de.sg,{renderCell:t=>d.createElement(de.bL,null,d.createElement("div",{className:(0,C.iv)(yn.secretContainer)},d.createElement("span",null,"**********",e.clientSecrets[t].suffix)),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Delete Client Secret"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.SMALL,className:"u-spacing-left",icon:"delete",onClick:()=>{(0,D.Z)(ClientCredentialSection_ConfirmDeleteClientSecretModal,{appName:e.appName,handleDelete:deleteSecret})}})))}))))}function ClientCredentialSection_ConfirmDeleteClientSecretModal({handleDelete:e,appName:t,onRequestClose:n,onRequestSubmit:a}){return d.createElement(B.ZP,{onRequestClose:n,onRequestSubmit:function handleSubmit(){e()
a()},title:"Confirm Client Secret Deletion",buttons:[{text:"Delete Client Secret",submit:!0,style:O.ZJ.NEGATIVE}]},"Confirm youd like to remove ",d.createElement("b",null,t),"'s Client Secret. Access for any future requests using this Client Secret will be revoked.")}function ClientCredentialSection_ConfirmRegenerateClientSecretModal({handleRegenerateSecret:e,appName:t,onRequestClose:n,onRequestSubmit:a}){return d.createElement(B.ZP,{onRequestClose:n,onRequestSubmit:async function handleSubmit(){await e()
a()},title:"Confirm Client Secret Regeneration",buttons:[{text:"Regenerate Client Secret",submit:!0,style:O.ZJ.SECONDARY}]},"Generating a new Client Secret will delete ",d.createElement("b",null,t),"'s current one.")}function ClientCredentialSection_ClientCredentialSection({clientSecrets:e,appName:t,clientId:n,handleRegenerateSecret:a,handleDelete:i,lifecycleManagement:r,isGlobal:s}){return d.createElement(ClientCredentialSection_ClientSecretTable,{appName:t,title:"Client Secrets",clientSecrets:e,onDelete:i,onRegenerate:a,clientId:n,lifecycleManagement:r,isGlobal:s,dataTestAttrs:{component:"ClientCredentialSection",element:"client"}})}const yn=C.mM.create({secretContainer:{display:"inline-block",width:"calc(100% - 50px)"},secret:{fontSize:20},pullLeft:{paddingLeft:0},tableWrapper:{marginLeft:0,display:"inline-block",width:"60%"},noRightPadding:{paddingRight:0},grayBox:{backgroundColor:b.bs,padding:10}})
function PublicKeySection_ClipboardButton(e){return d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy public key"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.MINI,className:(0,C.iv)(_n.upperRight),icon:"copy",onClick:()=>(0,on.Z)(e.getValue(),{showToastOnSuccess:!0,toastText:"Copied public key to clipboard."})}))}function PublicKeySection_PublicKeySection(e){var t
return d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppPublicKey"),label:"Public Key",labelStyle:F.Z.STYLES.LABEL,help:"This key is used to encrypt values stored securely in app configs."},d.createElement(De.Z,{inputClassName:(0,C.iv)(_n.editableTextFieldClass),emptyValueAllowed:!0,placeholder:"Public Key for encrypting secure_text app config items",value:null!==(t=e.value)&&void 0!==t?t:"",requestChange:e.onChangePublicKey,type:De.T.TEXTAREA}),null!=e.value&&d.createElement(PublicKeySection_ClipboardButton,{getValue:function getValue(){var t
return null!==(t=e.value)&&void 0!==t?t:""}}))}const _n=C.mM.create({sectionDescription:{marginBottom:"15px"},textParent:{position:"relative"},upperRight:{position:"absolute",right:"1em",top:"1em"},editableTextFieldClass:{minHeight:180,resize:"none"}})
function BenchlingAppCredentials({benchlingApp:e,refetchBenchlingApp:t,handleSubmitDefinition:n}){const a=d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/getting-started-benchling-apps#permissioning-apps"},"this guide"),i=e.oauthCredential.clientId
return d.createElement(d.Fragment,null,d.createElement(ne.Z,{className:(0,C.iv)(Cn.pullLeft)},d.createElement(f.BB,{className:(0,C.iv)(Cn.sectionHead)},"Credentials"),d.createElement("div",null,"Apps require data access and permissions to operate. Refer to ",a," to grant and confirm this app's access.")),d.createElement(ne.Z,{className:(0,C.iv)(Cn.pullLeft)},d.createElement(ee.Z,{md:5,className:(0,C.iv)(Cn.noRowIndent)},d.createElement(f.Dx,null,"Client ID"),d.createElement(ClientID,{clientId:i})),d.createElement(ee.Z,{md:7},e.oauthCredential&&!(0,at.CZ)(e.oauthCredential)&&d.createElement(ClientCredentialSection_ClientCredentialSection,{appName:e.name,clientSecrets:e.oauthCredential.clientSecrets,clientId:e.oauthCredential.clientId,handleDelete:async function handleDeleteClientSecret(){await(0,sn.Ir)(e.id)
t()
rt.ZP.success("Successfully deleted Client Secret")},handleRegenerateSecret:async function handleRegenerateClientSecret(){const n=await(0,sn.gh)(e.id);(0,D.Z)(DisplayClientSecretModal,{clientSecret:n.clientSecret,onRequestClose:()=>{t()
rt.ZP.success("Successfully generated a new Client Secret")},onRequestSubmit:()=>{t()
rt.ZP.success("Successfully generated a new Client Secret")}})},lifecycleManagement:e.lifecycleManagement,isGlobal:e.isGlobal}))),d.createElement(ne.Z,{className:(0,C.iv)(Cn.pullLeft)},S.ZP.ENABLE_BENCHLING_APP_API_KEY_UI&&e.apiKey&&!(0,at.CZ)(e.apiKey)&&d.createElement(ApiKeyTable,{appName:e.name,apiKeys:[e.apiKey],handleDelete:async function handleDeleteAPIKey(){await(0,sn.Xi)(e.id)
t()
rt.ZP.success("Successfully deleted API Key")},handleRegenerateKey:async function handleRegenerateAPIKey(){await(0,sn.Or)(e.id)
t()
rt.ZP.success("Successfully generated a new API Key")},lifecycleManagement:e.lifecycleManagement})),d.createElement(ne.Z,{className:(0,C.iv)(Cn.pullLeft)},d.createElement(PublicKeySection_PublicKeySection,{value:e.publicKey,onChangePublicKey:e=>{n({publicKey:e})}})))}const Cn=C.mM.create({pullLeft:{marginLeft:"0px"},noRowIndent:{marginLeft:"-15px"},sectionHead:{marginTop:"16px"}}),Rn=ot.Ps`
  fragment WebhookConfigurationSectionWebhookConfiguration on BenchlingAppNode {
    id
    webhookConfigurations {
      ... on InaccessibleInfoNode {
        invalidId
      }
      ... on WebhookConfigurationNode {
        id
        endpointPublicKeySet
        webhookUrl
      }
    }
  }
`
function WebhookConfigurationSection_WebhookConfigurationSection({onUpdateWebhookURL:e,webhookConfigurations:t}){var n;(0,ie.Gp)(t.length<=1,"Expected to render WebhookConfigurationSection only where there less than or equal to one webhookConfiguration")
const a=null===(n=t[0])||void 0===n?void 0:n.webhookUrl,i=d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/webhook-verification"},"webhook verification documentation"),r=d.createElement("span",null,"To learn more about verifying webhooks, visit our ",i,".")
return d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"Webhook URL",labelStyle:F.Z.STYLES.LABEL,help:r},d.createElement(De.Z,{emptyValueAllowed:!0,requestChange:e,type:De.T.TEXT,value:a}))}function BenchlingAppOverview({benchlingApp:e,refetchBenchlingApp:t}){const{id:n}=e
async function handleSubmitDefinition(e){const a=await rn.dg(n,e)
t()
rt.ZP.success(`Successfully updated app *${a.name}*`)}return d.createElement("div",null,d.createElement(BenchlingAppGlobalInformation,{benchlingApp:e,refetchBenchlingApp:t,handleSubmitDefinition}),d.createElement(BenchlingAppInstallInformation,{benchlingApp:e}),d.createElement(BenchlingAppCredentials,{benchlingApp:e,refetchBenchlingApp:t,handleSubmitDefinition}),d.createElement(BenchlingAppDistributionSettings,{benchlingApp:e}))}function BenchlingAppGlobalInformation({benchlingApp:e,refetchBenchlingApp:t,handleSubmitDefinition:n}){var a
const i=null!==(a=e.appDefinitionId)&&void 0!==a?a:d.createElement("div",{className:N()((0,C.iv)(Nn.missing))},"None (tenant-only app)")
return d.createElement("div",null,d.createElement(f.BB,null,"Global Information"),d.createElement("div",null,"Information about your app that is globally used for any version of this app."),d.createElement(BenchlingAppSettingsRow,null,d.createElement(In.ZP,{label:"App ID",name:"appId",value:i,isBeingCreated:!1,onChange:()=>{},isWritable:!1}),d.createElement(In.ZP,{label:"Creator",name:"creator",value:e.creator.name,isBeingCreated:!1,onChange:()=>{},isWritable:!1}),!e.webhookConfigurations.some((e=>(0,at.CZ)(e)))&&d.createElement(WebhookConfigurationSection_WebhookConfigurationSection,{webhookConfigurations:e.webhookConfigurations,onUpdateWebhookURL:e=>{n({webhookUrl:e})}})))}function BenchlingAppInstallInformation({benchlingApp:e}){return d.createElement("div",null,d.createElement(f.BB,{className:(0,C.iv)(Nn.sectionHead)},"Install Information"),d.createElement(BenchlingAppSettingsRow,null,d.createElement(In.ZP,{label:"Install ID",name:"installId",value:e.id,isBeingCreated:!1,onChange:()=>{},isWritable:!1})))}function BenchlingAppDistributionSettings({benchlingApp:e}){return d.createElement("div",null,d.createElement(f.BB,{className:(0,C.iv)(Nn.sectionHead)},"Distribution Settings"),d.createElement("span",null,"Manage how your app can be installed and used by consumers."),d.createElement(BenchlingAppSettingsRow,{className:(0,C.iv)(Nn.sectionHead)},d.createElement(In.ZP,{label:"Audience",name:"audience",value:e.audience===Rt.CY.PUBLIC?"Public":"Private",isBeingCreated:!1,onChange:()=>{},isWritable:!1})))}function BenchlingAppSettingsRow(e){return d.createElement("div",{className:N()(e.className,(0,C.iv)(Nn.settingsRow))},d.Children.map(e.children,(e=>d.createElement("div",{className:(0,C.iv)(Nn.settingsColumn)},d.createElement("div",{className:N()((0,C.iv)(Nn.settingsField),"u-base-text")},e)))))}const Nn=C.mM.create({settingsRow:{display:"flex",flexDirection:"row",alignItems:"flex-start",width:"100%",marginBottom:"24px"},settingsColumn:{flex:.33,minWidth:0},settingsField:{width:"80%",marginBottom:"0"},sectionHead:{marginTop:"16px"},missing:{color:b.pp},benchlingAppMetadataField:{marginBottom:15}})
var On=n(23261),bn=n.n(On),vn=n(536105),Pn=n.n(vn),Ln=n(173220)
const Dn=10,Mn="ten_",wn="https://",Fn=["benchling.com","bnch.org","bnchdev.org","bnch.us:5000"],kn=Math.min(...Fn.map((e=>e.length))),Un=wn.length+kn
function ManageAllowList(e){const t=e.allowList.map((e=>({id:e.tenantId,isUnsaved:!1}))),[n,a]=(0,d.useState)(null),[i,r]=(0,d.useState)(!1),[s,o]=(0,d.useState)(null),[l,c]=(0,d.useState)(null),[u,m]=(0,d.useState)(t),[p,h]=(0,d.useState)(new Date),E=(0,d.useCallback)((e=>Fn.some((t=>e.toLowerCase().includes(t)))),[]),S=(0,d.useCallback)((e=>u.filter((t=>t.id===e)).length>0),[u]),T=(0,d.useCallback)((async e=>{const t=new Date
let n=null
try{n=await(0,rn.MY)(e)}catch(e){}if(t>p){h(t)
return null==n||(0,sn.xi)(n)?null:n}return null}),[]);(0,d.useEffect)((()=>{if(u.length>=Dn){o(null)
c(null)
r(!1)
a(null)
return}if(n&&n.length>Mn.length+1&&n.startsWith(Mn)){o(n)
c(null)
r(!S(n))
return}let e=n||""
n&&n.length>wn.length&&!n.startsWith(wn)&&(e=`https://${n}`)
if(e.length>Un&&E(e))T(e).then((e=>{if(null==e){o(null)
c(null)
r(!1)}else{o(e.id)
c(e.url)
r(null!=e.id&&!S(e.id))}}))
else{o(null)
c(null)
r(!1)}}),[n,u.length,T,S,E])
return d.createElement(B.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:function onSubmit(){if(u.length>Dn)throw new Error("Cannot exceed limit of 10 tenants.")
const t=u.map((e=>e.id))
e.handleSubmitDefinitionVersion({allowList:t})
e.onRequestClose()},title:"Share with tenants",buttons:[{text:"Save",submit:!0,style:O.ZJ.PRIMARY,disabled:!u.some((e=>e.isUnsaved))}]},d.createElement("p",null,"Manage tenants that can install your app. Generate install URLs for up to 10 tenants."),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:6},d.createElement(Ln.ZP,{value:n,clearType:Ln.Nl.X,onChange:e=>{a(e.target.value)},onEscape:()=>{a(null)},placeholder:"Tenant URL or ID",disabled:u.length>=Dn})),d.createElement(ee.Z,null,d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:u.length>=Dn?"You have added the maximum number of tenants":i?`Permanently add ${s} to this app's Allow List.`:s?"This tenant has already been added":"Enter a tenant URL or ID"},d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"Add",disabled:!i,onClick:function onAdd(){null==s||S(s)?rt.ZP.error("Something went wrong, please try again."):m([...u,{id:s,url:l,isUnsaved:!0}])}})))),n&&n.length>5?d.createElement(AllowListMatch,{id:s}):null,u.length>=Dn&&d.createElement(LimitExceededBanner,null),d.createElement(AllowListTable,{appDefinitionId:e.appDefinitionId,rows:u,onRemove:function onRemove(e){m(u.filter((t=>t.id!==e)))}}))}function LimitExceededBanner(){return d.createElement("div",{className:(0,C.iv)(xn.limitExceededBanner)},d.createElement(qe.ZP,{bannerType:qe.ct.INFO,text:"Youve reached the limit",supportingInfo:"Share the app version with up to 10 tenants.\n    Manage your list to share with different tenants."}))}function AllowListMatch({id:e}){return null==e?d.createElement(ne.Z,{className:(0,C.iv)(xn.allowListRow)},d.createElement(P.Z,{icon:"question",color:b.TG,className:(0,C.iv)(xn.inline)}),d.createElement("div",{className:(0,C.iv)(xn.inline)},"Unknown tenant")):d.createElement(ne.Z,{className:(0,C.iv)(xn.allowListRow)},d.createElement(P.Z,{icon:"check",color:b.xO,className:(0,C.iv)(xn.inline)}),d.createElement("div",{className:(0,C.iv)(xn.inline)},d.createElement("b",null,"ID:")," ",e))}function AllowListTable({appDefinitionId:e,rows:t,onRemove:n}){return d.createElement("div",{className:(0,C.iv)(xn.allowListTable)},d.createElement(ne.Z,{className:(0,C.iv)(xn.allowListHeader)},d.createElement(ee.Z,{md:2},"Tenant ID"),d.createElement(ee.Z,{md:10},"Install URL")),t.map(((t,a)=>{var i
const r=null!==(i=t.url)&&void 0!==i?i:"https://<HOST>",s=t.isUnsaved?xn.newEntry:null,o=t.isUnsaved?"Remove this tenant":"Access to this tenant cannot be removed",l=t.isUnsaved?(0,C.iv)(xn.removeIcon):(0,C.iv)(xn.hidden),c=d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:o},t.isUnsaved?d.createElement(P.Z,{icon:"close",className:l,onClick:()=>{n(t.id)}}):d.createElement("div",{className:(0,C.iv)(xn.hidden)}))
return d.createElement(ne.Z,{key:a,className:(0,C.iv)(xn.allowListRow,s)},d.createElement(ee.Z,{md:2},t.id),d.createElement(ee.Z,{md:9},function urlForRow(e,t){const n=56,a=`${t}/app-catalog/apps/${e}/install`,i=a.length>n?d.createElement(d.Fragment,null,a.substring(0,n),""):a
return d.createElement(d.Fragment,null,d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy install URL"},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,size:O.qE.MINI,className:(0,C.iv)(xn.copyToClipboardIcon),icon:"copy",onClick:()=>(0,on.Z)(a,{showToastOnSuccess:!0,toastText:`Copied install URL to clipboard: ${a})}`})})),d.createElement("a",{target:"_blank",href:a,rel:"noreferrer"},i))}(e,r)),d.createElement(ee.Z,{md:1},c))})))}const xn=C.mM.create({allowListHeader:{backgroundColor:b.bs,fontWeight:"bold",padding:10},unknownName:{color:b.TG,fontStyle:"italic"},inline:{display:"inline-block",marginLeft:15},allowListRow:{padding:10,":hover":{backgroundColor:b.tN}},allowListTable:{marginTop:"1em"},grayBox:{backgroundColor:b.bs,padding:10},limitExceededBanner:{marginTop:16,marginBottom:8},copyToClipboardIcon:{display:"inline-block",color:b.TG},hidden:{height:24,width:20,backgroundColor:(0,b.a7)("#FFFFFF",0)},removeIcon:{display:"inline-block",color:b.TG,":hover":{color:b.hM}},newEntry:{color:"#000"}}),Bn="VERSION_BASIC_INFORMATION"
function BenchlingAppVersionPane(e){var t,n
const a=e.benchlingApp.isGlobal&&null!=e.version&&e.version.publicationState!==Rt.xC.PRIVATE,i=null!==(n=null===(t=e.version)||void 0===t?void 0:t.allowList)&&void 0!==n?n:[]
return d.createElement(d.Fragment,null,d.createElement(VersionPaneHeader,{isPublished:a,appDefinitionId:e.benchlingApp.appDefinitionId,allowList:i,handleSubmitDefinitionVersion:e.handleSubmitDefinitionVersion}),d.createElement(Ye.Xl,{activeTab:Bn,paneClassName:"u-flex-grow",className:N()((0,C.iv)(Zn.infoPane),"u-flex-grow"),onRequestTabChange:()=>{}},d.createElement(Ye.OK,{tabKey:Bn,title:"Basic Information"},d.createElement(BasicInfoPane,{benchlingApp:e.benchlingApp,version:e.version,isPublished:a,handleSubmitDefinitionVersion:e.handleSubmitDefinitionVersion}))),e.benchlingApp.appDefinitionId?d.createElement(VersionPaneFooter,{version:e.version}):null)}function VersionPaneHeader(e){return d.createElement("div",{className:N()((0,C.iv)(Zn.paneHeader))},e.isPublished&&d.createElement("div",{className:N()((0,C.iv)(Zn.lockedWarning))},"Published versions are locked from editing"),null!=e.appDefinitionId&&d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"Share",dataTestAttrs:{component:"BenchlingAppListing",element:"shareButton"},onClick:()=>{null!=e.appDefinitionId&&(0,D.Z)(ManageAllowList,{appDefinitionId:e.appDefinitionId,allowList:e.allowList,handleSubmitDefinitionVersion:e.handleSubmitDefinitionVersion})}}))}function VersionPaneFooter({version:e}){const t=null==e?void 0:e.createdAt,n=null==e?void 0:e.modifiedAt,a=t?Pn()(new Date(t)).format(Yn):null,i=n?Pn()(new Date(n)).format(Yn):null
return d.createElement("div",{className:N()((0,C.iv)(Zn.border,Zn.footer))},d.createElement(BenchlingAppSettingsRow,{className:(0,C.iv)(Zn.bottomless)},(null==e?void 0:e.createdAt)?d.createElement("div",null,d.createElement(be.Z,{className:N()((0,C.iv)(Zn.spaceRight))},"Created on:"),a):null,(null==e?void 0:e.modifiedAt)?d.createElement("div",null,d.createElement(be.Z,{className:N()((0,C.iv)(Zn.spaceRight))},"Modified:"),i):null))}function BasicInfoPane({benchlingApp:e,version:t,isPublished:n,handleSubmitDefinitionVersion:a}){if(null==t)return d.createElement("p",null,"No versions have been created for this app yet.")
const{name:i,description:r}=t,s=r?{name:i,description:r}:{name:i}
function getVersionLockedTooltip(){return null==t?null:n?"This field cannot be edited because the current app version has been published":e.versionNumber!==t.versionId?`Visit version ${e.versionNumber} of this app to make changes to this field.`:null}return d.createElement(d.Fragment,null,e.versionNumber&&d.createElement(an.Z,{className:N()("u-flex-grow","simpleton"),id:ue.default.uniqueId("benchlingAppDetail"),label:"Version",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{isFullWidth:!1,isDisabled:!0,requestChange:()=>{},type:De.T.TEXT,value:t.versionId})),d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"Name",labelStyle:F.Z.STYLES.LABEL},d.createElement(De.Z,{disableEditsWithTooltip:getVersionLockedTooltip(),requestChange:e=>{a({...s,name:e})},type:De.T.TEXT,value:t.name,dataTestAttrs:{component:"EditableTextField",element:"name"}})),d.createElement(an.Z,{id:ue.default.uniqueId("benchlingAppDetail"),label:"Description",labelStyle:F.Z.STYLES.LABEL}," ",d.createElement(De.Z,{disableEditsWithTooltip:getVersionLockedTooltip(),emptyValueAllowed:!0,requestChange:e=>{a({...s,description:e})},type:De.T.TEXTAREA,value:null!=r?r:"",dataTestAttrs:{component:"EditableTextField",element:"description"}})))}const Zn=C.mM.create({paneHeader:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingTop:12,minHeight:"2em"},spaceRight:{marginRight:".4em"},infoPane:{display:"flex",flexDirection:"column",maxWidth:"70em",minHeight:"30em"},footer:{marginLeft:-16,marginRight:-16,marginBottom:-1},border:{border:"solid 1px",borderColor:b.pF,padding:16},bottomless:{marginBottom:0},lockedWarning:{fontStyle:"italic",marginRight:"15px",color:b.TG}})
var qn,Gn=n(239685)
!function(e){e[e.Published=0]="Published"
e[e.Drafts=1]="Drafts"
e[e.History=2]="History"}(qn||(qn={}))
function VersionHistoryItem(e){const t=e.version.createdAt,n=t?d.createElement("div",null,"Created on ",Pn()(new Date(t)).format(Yn)):null
return d.createElement("div",{className:(0,C.iv)(Wn.listItem,Wn.hover,e.isSelected?Wn.selected:null),onClick:function handleClick(){e.selectVersion(e.version)}},d.createElement("div",{className:(0,C.iv)(Wn.versionName)},"Version ",e.version.versionId),n)}function VersionCategoryHeader(e){const t=Vn[e.category],n=`${Hn[e.category]}${e.showZero?" (0)":""}`
return d.createElement("div",{className:(0,C.iv)(Wn.listItem,Wn.header)},d.createElement(P.Z,{icon:t,className:(0,C.iv)(Wn.icon)}),n)}function VersionNewDraft({app:e,currentVersions:t,onRequestSubmit:n}){return d.createElement("div",{className:(0,C.iv)(Wn.listItem,Wn.newDraft)},d.createElement("a",{onClick:function openNewDraftModal(){(0,D.Z)(Gn.ZP,{appId:e.id,name:e.name,description:e.description||"",isPrivate:e.isPrivate||!0,currentVersions:t,onRequestSubmit:n})}},"+ Create a new draft"))}const Vn={[qn.Published]:"star",[qn.Drafts]:"clock-rotate-left",[qn.History]:"paper-plane"},Hn={[qn.Published]:"Currently Published",[qn.Drafts]:"Drafts",[qn.History]:"Publish History"},Wn=C.mM.create({listItem:{padding:12,border:"solid 1px",borderColor:b.pF,color:b.pp,fontSize:12,marginTop:-1,marginLeft:-1,marginRight:-1},newDraft:{textAlign:"center"},versionName:{fontSize:14,color:b.Rl},header:{textTransform:"uppercase"},hover:{":hover":{backgroundColor:b.tN,cursor:"pointer"}},selected:{backgroundColor:b.bs},icon:{fontSize:16,marginRight:8}}),Yn="MMM D, YYYY"
function BenchlingAppVersionHistory(e){const t=e.benchlingApp,n=e.versions,[a,i]=(0,d.useState)(null),r=[...n].sort((function compareVersions(e,t){return bn().compare(e.versionId,t.versionId)})).reverse(),s=null!=a?a:function getDefaultSelection(){var e
const a=n.filter((e=>e.versionId===t.versionNumber))
if(1===a.length)return a[0]
if(t.isGlobal)return n.length>0?n[0]:null
const i=null!==(e=t.versionNumber)&&void 0!==e?e:sn.aw
return{__typename:"BenchlingAppDefinitionVersionNode",id:`${t.appDefinitionId}:${i}`,versionId:i,name:t.name,description:t.description,publicationState:Rt.xC.PRIVATE,allowList:[],createdAt:null,modifiedAt:null}}()
return d.createElement("div",{className:N()((0,C.iv)($n.twoColumnParent))},d.createElement(ee.Z,{md:3,className:N()((0,C.iv)($n.leftCol))},s?d.createElement(VersionsHistoryList,{app:t,isGlobal:t.isGlobal,versions:r,selectedVersion:s,selectVersion:i,onRequestNewVersion:e.refetchBenchlingApp}):null),d.createElement(ee.Z,{md:9,className:N()((0,C.iv)($n.versionPane,$n.border))},d.createElement(BenchlingAppVersionPane,{benchlingApp:t,version:s,handleSubmitDefinitionVersion:async function handleSubmitDefinitionVersion(n){var a
const i=await rn.Ms(t.id,null!==(a=null==s?void 0:s.versionId)&&void 0!==a?a:null,n)
e.refetchBenchlingApp()
rt.ZP.success(`Successfully updated app *${i.name}* `)}})))}function VersionsHistoryList(e){const t=e.isGlobal,n=function getCurrentlyPublishedVersion(){const e=getPublishedVersions()
if(e.length>0)return e[0]
return null}()
function getDraftVersions(){return t?e.versions.filter((e=>e.publicationState===Rt.xC.PRIVATE)):[e.selectedVersion]}function getPublishedVersions(){return e.versions.filter((e=>e.publicationState!==Rt.xC.PRIVATE))}const a=e.versions.map((e=>e.versionId))
return d.createElement(d.Fragment,null,t&&d.createElement(VersionNewDraft,{app:e.app,currentVersions:a,onRequestSubmit:e.onRequestNewVersion}),t&&n&&d.createElement(VersionCategoryHeader,{category:qn.Published}),t&&n&&d.createElement(VersionHistoryItem,{version:n,isSelected:e.selectedVersion.versionId===n.versionId,selectVersion:e.selectVersion,key:-1}),t&&d.createElement(VersionCategoryHeader,{category:qn.Drafts,showZero:0===getDraftVersions().length}),getDraftVersions().map(((t,n)=>d.createElement(VersionHistoryItem,{version:t,isSelected:e.selectedVersion.versionId===t.versionId,selectVersion:e.selectVersion,key:n}))),t&&n&&d.createElement(VersionCategoryHeader,{category:qn.History,showZero:0===getPublishedVersions().length}),getPublishedVersions().map(((t,n)=>d.createElement(VersionHistoryItem,{version:t,isSelected:e.selectedVersion.versionId===t.versionId,selectVersion:e.selectVersion,key:n}))))}const $n=C.mM.create({twoColumnParent:{display:"flex",position:"relative"},versionPane:{flex:"0 0 75%",left:"25%"},leftCol:{position:"absolute",left:0,top:0,bottom:0,right:"75%",overflow:"auto",padding:0,border:"solid 1px",borderColor:b.pF,marginLeft:1,marginRight:1},border:{border:"solid 1px",borderColor:b.pF}})
var Kn
!function(e){e.OVERVIEW="overview"
e.VERSIONS="versions"}(Kn||(Kn={}))
const zn=ot.Ps`
  query getBenchlingAppQuery($benchlingAppId: StrictString!, $forDeveloper: StrictBoolean)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    benchlingApp(id: $benchlingAppId, forDeveloper: $forDeveloper) {
      ...InaccessibleInfoGraphQL
      ... on BenchlingAppNode {
        ...BenchlingAppGraphQL
        ...APIKeyTableAPIKey
        ...ClientCredentialSectionCredential
        ...WebhookConfigurationSectionWebhookConfiguration
        creator {
          id
          name
        }
        publicKey
        audience
        isPrivate
        definitionVersionListing {
          ... on ErrorNode {
            message
          }
          ... on BenchlingAppDefinitionVersionListingNode {
            versions {
              id
              versionId
              name
              description
              publicationState
              allowList {
                tenantId
              }
              createdAt
              modifiedAt
            }
          }
        }
      }
    }
  }
  ${(0,ut.f)("BenchlingApp").fragment}
  ${cn}
  ${An}
  ${Rn}
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function BenchlingGlobalAppPage(e){const t=e.id,[n,a]=(0,d.useState)(Kn.OVERVIEW)
return d.createElement(nt.ZP,{query:zn,renderLoading:()=>d.createElement(H.b,null),variables:{benchlingAppId:t,forDeveloper:!0}},((e,{refetch:t})=>!(0,at.CZ)(e.benchlingApp)&&function BenchlingGlobalAppPage_currentTenantIsOwningTenant(e){return e.owningTenant.isCurrentTenant}(e.benchlingApp)?d.createElement(BenchlingGlobalAppPage_BenchlingAppSettings,{currentTab:n,setCurrentTab:a,benchlingApp:e.benchlingApp,refetchBenchlingApp:t}):d.createElement("div",null,d.createElement(qe.ZP,{bannerType:qe.ct.ERROR,text:"You do not have access to manage this app."}))))}function BenchlingGlobalAppPage_BenchlingAppSettings(e){const{name:t}=e.benchlingApp;(0,d.useEffect)((()=>{T._w(`${t} - Benchling Apps`)}),[t])
const n=e.benchlingApp.definitionVersionListing,a="ErrorNode"===n.__typename,i=a?`Could not retrieve version history: ${n.message}`:"",r=a?[]:n.versions
a&&rt.ZP.error(i)
return d.createElement(J.Z,{onClickTitle:()=>{(0,j.ZP)(sn.TC)},subtitle:t,title:"Apps",toolbar:d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"View app in the workspace",onClick:()=>{(0,j.ZP)(e.benchlingApp.url)}})},d.createElement(Ye.Xl,{activeTab:e.currentTab,className:N()((0,C.iv)(Qn.maxWidth),"u-flex-grow"),onRequestTabChange:e.setCurrentTab},d.createElement(Ye.OK,{tabKey:Kn.OVERVIEW,title:"Overview"},d.createElement(BenchlingAppOverview,{benchlingApp:e.benchlingApp,refetchBenchlingApp:e.refetchBenchlingApp})),d.createElement(Ye.OK,{tabKey:Kn.VERSIONS,title:"Version History"},a?d.createElement("div",null,"Error: ",i):d.createElement(BenchlingAppVersionHistory,{versions:r,benchlingApp:e.benchlingApp,refetchBenchlingApp:e.refetchBenchlingApp}))))}const Qn=C.mM.create({benchlingAppMetadataField:{marginBottom:15},maxWidth:{maxWidth:"70em"}})
function BenchlingAppPage({id:e}){return S.ZP.ENABLE_BENCHLING_APPS_GLOBAL_DEFINITIONS_UI?d.createElement(BenchlingGlobalAppPage,{id:e}):d.createElement(BenchlingAppPageLegacy,{id:e})}function AppCanvasBuilder(){(0,d.useEffect)((()=>{(0,T._w)("App Canvas Builder")}),[])
return d.createElement("div",{className:"settingsPage font-proxima-13",...(0,g.Z)({component:"AppCanvasBuilder",element:"root"})},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",null,"App Canvas Builder")))}var jn=n(946948),Jn=n(901138)
const Xn=Rt.o4.AUTOMATIC
function CreateBenchlingAppPageLegacy(){const[e,t]=(0,d.useState)(!1)
const[n,a]=(0,d.useState)(""),[i,r]=(0,d.useState)(""),[s,o]=(0,d.useState)(Xn),[l,c]=(0,d.useState)("")
return d.createElement(J.Z,{onClickTitle:()=>{(0,j.ZP)(sn.TC)},subtitle:"Create An App",title:"Apps"},d.createElement("div",{className:"u-flex-grow u-min-width-zero"},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:8},d.createElement("h4",null,"Basic Settings"),d.createElement("div",{className:(0,C.iv)(ea.benchlingAppMetadataField)},d.createElement(k.Z,{label:"Name",value:n,onChange:e=>{a(e.target.value)},placeholder:"Name your app",dataTestAttrs:{component:"TextField",element:"benchlingAppName"}})),d.createElement("div",{className:(0,C.iv)(ea.benchlingAppMetadataField)},d.createElement(an.Z,{id:"benchlingAppDescription",label:"Description",labelStyle:F.Z.STYLES.LABEL},d.createElement("textarea",{name:"description",value:i,onChange:e=>{r(e.target.value)},rows:3,placeholder:"Describe what your app will be used for and what it should do. You can use this for your own reference. Collaborators and tenant admins will use this to understand what your app is for.",...(0,g.Z)({component:"textarea",element:"benchlingAppDescription"})}))),d.createElement("div",{className:(0,C.iv)(ea.benchlingAppMetadataField)},d.createElement(jn.Z,{title:"Lifecycle Management",options:[{label:"Automatic",value:Rt.o4.AUTOMATIC,dataTestAttrs:{component:"RadioButtonSelector",element:"Automatic"}},{label:"Manual",value:Rt.o4.MANUAL,dataTestAttrs:{component:"RadioButtonSelector",element:"Manual"}}],isVertical:!0,selectedValue:s,onChange:o})),d.createElement("div",{className:(0,C.iv)(ea.benchlingAppMetadataField)},d.createElement(k.Z,{label:"Webhook URL",value:l,onChange:e=>{c(e.target.value)},placeholder:"Provide a webhook URL for your app to receive events",dataTestAttrs:{component:"TextField",element:"benchlingAppWebhookUrl"}})),d.createElement(O.Co,{size:O.qE.MEDIUM,buttonStyle:O.ZJ.PRIMARY,onClick:async function handleCreate(){if(!e)try{t(!0)
const e=""===l?null:l,a=await rn.T0({name:n,description:i,lifecycleManagement:s,webhookUrl:e})
rt.ZP.success(`Created app ${a.name}`);(0,Jn.EQ)(a.id)}finally{t(!1)}},text:"Create",dataTestAttrs:{component:"Button",key:"Create"}}))))))}const ea=C.mM.create({benchlingAppMetadataField:{marginBottom:15}})
var ta=n(776065),na=n(294337),aa=n(518155)
class CreateAssemblyLink extends o().View{render(){c()(document).on("click",".js-create-new-assembly",(e=>{e.preventDefault();(0,D.Z)(aa.C,{})}));(0,na.Z)("#create/assembly",(()=>{(0,D.Z)(aa.C,{})}))
return this}}const ia=CreateAssemblyLink
var ra=n(879052),sa=n(3472),oa=n(179957)
class CreateSourceHashView extends o().View{render(){function openModal(){(0,D.Z)(oa.Z,{})}c()(document).on("click",".js-create-new-project",(e=>{e.preventDefault()
openModal()}));(0,na.Z)("#create/project",openModal)
return this}}const la=CreateSourceHashView
var ca=n(99100)
class CreateExportHashView extends o().View{render(){function callback(){ca.Z.open()}c()(document).on("click",".js-create-new-export",(e=>{e.preventDefault()
callback()}));(0,na.Z)("#create/export",callback)
return this}}const da=CreateExportHashView
var ua=n(612105),ma=n(26481)
class CreateCRISPRLink extends o().View{render(){c()(document).on("click",".js-create-new-crispr",(e=>{e.preventDefault();(0,ua.G)()}));(0,na.Z)("#create/crispr",(()=>{(0,ua.G)()
ma.Z.close()}))
return this}}const pa=CreateCRISPRLink
var ha=n(629656),Ea=n(111253)
class CreateHRTemplateLink extends o().View{render(){const onRequestClose=()=>{ha.xv(Ea.Z)},openImportSequenceForHRTemplateModal=()=>{ha.bA(Ea.Z,d.createElement(Ea.Z,{onRequestClose}))}
c()(document).on("click",".js-create-new-hr-template",(e=>{e.preventDefault()
openImportSequenceForHRTemplateModal()
h.j("hr_template","open_import_modal_from_create")}));(0,na.Z)("#create/hr-template",(()=>{openImportSequenceForHRTemplateModal()
h.j("hr_template","open_import_modal_from_hash")}))
return this}}const Sa=CreateHRTemplateLink
var Ta=n(189143),ga=n(869e3)
class BulkImportLink extends o().View{render(){(0,na.Z)("#import/tags",ga.Z.open)
c()(document).on("click",".js-import-tags",(e=>{e.preventDefault()
ga.Z.open()}));(0,na.Z)("#import/inventory-files",Ta.Z.open)
c()(document).on("click",".js-import-inventory-files",(e=>{e.preventDefault()
Ta.Z.open()}))
return this}}const fa=BulkImportLink
var Ia=n(767807),Aa=n.n(Ia),ya=n(999053),_a=n(204026),Ca=n(563663),Ra=n(102385),Na=n(158490)
const Oa="ERRORED",ba="RECOVERED"
class DataRecoveryModal extends d.Component{constructor(){super(...arguments)
this._computeRecoverable=(e,t,n)=>_e.ENTRY===Ke.ZP.apiIdToType(e)&&!t&&!n
this.isRecoverable=e=>{const t=this.getDraft(e)
return this._computeRecoverable(e,t.recovered,t.dismissed)}
this.hasUnrecoverableDocumentTypes=()=>this.state.drafts.some((e=>_e.ENTRY!==Ke.ZP.apiIdToType(e.apiId)))
this.hasFailures=()=>this.state.drafts.some((e=>e.status===Oa))
this.recoverData=()=>{this.setState({posting:!0})
const e=[]
for(const{draftId:t,cidIdMap:n,apiId:a,item:i,timestamp:r,folder:s,selected:o}of Array.from(this.state.drafts))if(o){(0,ie.hu)(this.isRecoverable(a),"data is not recoverable")
if(null==this.refs[`${i.id}FolderSelector`].state.fetchedName){rt.ZP.error(`Folder must be specified for ${i.name}`)
this.setState({posting:!1})
return}const o=ya.Z.recoverData({name:`${i.name} ${Wt.UT(r)} - RECOVERED`,folderId:s,entry:Na.Z.prepareForSave(i,n),apiId:a}).done(this.successHandler.bind(this,a,t,s)).fail(this.failHandler.bind(this,a,s))
e.push(o)}if(0!==e.length)c().when(...Array.from(e||[])).done((()=>{rt.ZP.success("Files recovered successfully.")
rt.ZP.close(Ca.Z.RECOVERY_ID)})).always((()=>{this._isMounted&&this.setState({posting:!1})}))
else{rt.ZP.error("No files selected.")
this.setState({posting:!1})}}
this.failHandler=(e,t,n)=>{if(this._isMounted){h.j("data_recovery","error",{file_api_id:e,folder_api_id:t})
rt.ZP.notifyError(n)
this.updateDraft(e,{status:Oa})}}
this.successHandler=(e,t,n,a)=>{if(!this._isMounted)return
h.j("data_recovery","recover_file",{file_api_id:e,folder_api_id:n})
this.updateDraft(e,{status:ba,selected:!1})
const i=Ca.Z.getLocalDrafts()
i[t].recovered=!0
Ca.Z.setLocalDrafts(i)
ta.Z.openFile(a.id)}
this.requestRecovery=async()=>{await Ca.Z.requestRecovery()
rt.ZP.success("Data sent. Please contact Benchling support to finish the recovery.",{id:Ca.Z.RECOVERY_ID})}
this.updateSelected=(e,t)=>{this.updateDraft(e,{selected:t})}
this.rowClickHandler=(e,t)=>{c()(t.target).is("td")&&!this.rowDisabled(e)&&this.updateSelected(e,!this.getDraft(e).selected)}
this.getDraft=e=>ue.default.findWhere(this.state.drafts,{apiId:e})
this.updateDraft=(e,t)=>{this.setState({drafts:this.state.drafts.map((n=>n.apiId===e?Aa()(n,{$merge:t}):n))})}
this.rowDisabled=e=>!this.isRecoverable(e)
this.rowStyle=e=>this.getDraft(e).status===ba?"success":this.getDraft(e).status===Oa?"danger":this.rowDisabled(e)?"faded":""
this.setFolder=(e,t)=>{this.updateDraft(e,{folder:t})}
this.dismiss=()=>{this.props.onDismiss()
rt.ZP.close(Ca.Z.RECOVERY_ID)
this.props.onRequestClose()}
this.toggleShowAll=()=>{this.setState({showAll:!this.state.showAll})}
this.isSubmitDisabled=()=>this.state.posting||this.state.drafts.every((e=>!e.selected))
this.state={drafts:(()=>{const e=[],t=Ca.Z.getLocalDrafts()
for(const n in t){const a=t[n]
if(Ca.Z.isRecoverable(a)){const{item:t,timestamp:i,recovered:r,dismissed:s,cidIdMap:o}=a,l=Ca.Z.apiIdFromDraftId(n)
e.push({apiId:l,cidIdMap:o,dismissed:s,draftId:n,folder:null!=t.folder?t.folder.api_identifier:void 0,item:t,recovered:r,selected:this._computeRecoverable(l,r,s),status:r?ba:null,timestamp:i})}}return e})(),posting:!1,showAll:!1}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return d.createElement(B.ZP,{enableRedesign:!1,title:"Recover Data",onRequestClose:this.props.onRequestClose,onRequestSubmit:this.recoverData,buttons:[{key:"dismiss",text:"Dismiss",onClick:this.dismiss,style:"danger",pullLeft:!0},{key:"recover",text:"Recover",submit:!0,disabled:this.isSubmitDisabled()},{key:"cancel",text:"Close",cancel:!0,disabled:this.state.posting}]},d.createElement("p",null,"Select the entries below that you wish to auto-recover. A recovered copy of each entry will be     placed into its selected folder."),this.hasUnrecoverableDocumentTypes()&&d.createElement("p",null,"Note: non-entry files cannot be auto-recovered at the moment."),Ra.Z.hasEnterprisePlan()&&(this.hasUnrecoverableDocumentTypes()||this.hasFailures())&&d.createElement("p",null,d.createElement("a",{onClick:()=>this.requestRecovery()},"Click here")," to request manual recovery."),d.createElement("table",{className:"table table-hover table-condensed table-valign-middle-cells"},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",null),d.createElement("th",null,"Type"),d.createElement("th",null,"Name"),d.createElement("th",null,"Modified"),d.createElement("th",null,"Folder"))),d.createElement("tbody",null,(()=>{if(0===this.state.drafts.length)return d.createElement("tr",null,d.createElement("td",{colSpan:5},"No unsaved drafts found."))
{let e=!1
const t=(()=>{const t=[]
for(const{apiId:n,item:a,timestamp:i,recovered:r,dismissed:s}of Array.from(this.state.drafts))this.state.showAll||!r&&!s?t.push(d.createElement("tr",{key:n,onClick:this.rowClickHandler.bind(this,n),className:this.rowStyle(n)},d.createElement("td",null,d.createElement("input",{type:"checkbox",checked:this.getDraft(n).selected,onChange:e=>{this.updateSelected(n,e.target.checked)},disabled:this.rowDisabled(n)})),d.createElement("td",null,(0,Ot.E2)(Ke.ZP.apiIdToType(n))),d.createElement("td",null,a.name),d.createElement("td",null,Wt.UT(i)),d.createElement("td",null,d.createElement(_a.Z,{ref:`${n}FolderSelector`,readOnly:this.rowDisabled(n),showNotebook:!0,value:this.getDraft(n).folder,onChange:e=>{this.setFolder(n,e.target.value)},unsetOnFetchFail:!0})))):e=!0
return t})();(e||this.state.showAll)&&t.push(d.createElement("tr",{key:"toggle-show-all"},d.createElement("td",{colSpan:5},d.createElement("a",{onClick:this.toggleShowAll},this.state.showAll?"Hide recovered or dismissed drafts.":"Show all unsaved drafts."))))
return t}})())))}}const va=DataRecoveryModal
function dismiss(){const e=Ca.Z.getLocalDrafts()
for(const t in e){const n=e[t]
Ca.Z.isRecoverable(n)&&(e[t].dismissed=!0)}Ca.Z.setLocalDrafts(e)}function checkHash(){(0,na.Z)(Ca.Z.RECOVERY_HASH,(()=>{h.j("data_recovery","open_modal")
ha.bA(va,d.createElement(va,{onRequestClose:function(){ha.xv(va)},onDismiss:dismiss}))}))}class DataRecoveryHashView extends o().View{render(){if(Ca.Z.recoverableDataExist()){h.j("data_recovery","see_prompt")
rt.ZP.warn(`We recovered unsaved changes to your files. [Click here](${Ca.Z.RECOVERY_HASH}) to recover this data.`,{duration:0,id:Ca.Z.RECOVERY_ID,onClose:dismiss})}c()(window).on("hashchange",checkHash)
checkHash()}}const Pa=DataRecoveryHashView
var La=n(451605),Da=n(390462)
const Ma=function getFolderPath(e){let t=`${e.name}`
for(;null!=e.parent;){t=`${e.parent.name}/${t}`
e=e.parent}return t}
var wa=n(427478),Fa=n(855917)
class BatchSequenceImportView extends o().View{trackOpenModal(e){h.j("sequence","open_create_sequence_modal",{product:Ie.XC.MOLBIO,createdFrom:e,importFlow:wa._p.CHROMOSOME})}handleCreate(){c()(document).on("click",".js-batch-sequence-import",(e=>{e.preventDefault();(0,Fa.TU)()
this.trackOpenModal("global")}));(0,na.Z)("#batch-sequence-import",(()=>{(0,Fa.TU)()
this.trackOpenModal("hash")}))}render(){this.handleCreate()
return this}}const ka=BatchSequenceImportView
var Ua=n(241581)
class ImportSequenceHashView extends o().View{render(){function openModal(e){const t={}
null!=e&&-1!==e.indexOf("dbimport")&&(t.initialTab=wa._p.DB);(0,D.Z)(Ua.Z,t)}c()(document).on("click",".js-import-sequence",(e=>{e.preventDefault()
openModal()}));(0,na.Z)("#import-sequence",openModal)
return this}}const xa=ImportSequenceHashView
var Ba=n(763089),Za=n(356304),qa=n(340729)
class CreateImportOligoView extends o().View{handleCreate(){function callback(){(0,D.Z)(qa.Z,{})}c()(document).on("click",".js-create-new-oligo",(e=>{e.preventDefault()
callback()}))
const{hash:e}=window.location
if(0===e.indexOf("#create/oligo")){callback()
window.location.hash=""}}handleImport(){(0,na.Z)("#import-oligo",(function callback(){(0,Fa.QF)(null)}))}render(){this.handleCreate()
this.handleImport()
return this}}const Ga=CreateImportOligoView
var Va=n(170025),Ha=n(55873),Wa=n(535937),Ya=n(496022),$a=n(345619),Ka=n(402337)
function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}const za="CreateProtocolModal"
class CreateProtocolModal extends d.Component{constructor(...e){super(...e)
_defineProperty(this,"createProtocol",((e,t)=>$a.Z.create({name:e,folder:t}).then((e=>e.id))))}static close(){ha.xv(za)}static open(e,t){null==t&&(t={})
t=ue.default.extend({},t,{onRequestClose:()=>ha.xv(za)})
ha.bA(za,d.createElement(e,t))}render(){return d.createElement(Ka.Z,_extends({},ue.default.extend({},this.props,{title:"Create protocol",create:this.createProtocol,showNotebook:!0,folderDefaultsKey:Da.O.NOTEBOOK}),{dataTestAttrs:{component:"CreateProtocolModal",element:"modal"}}))}}const Qa=CreateProtocolModal,{INVENTORY_SECTION:ja}=sa
class CreateFromHashView extends o().View{bindTemplateCreate(e,t){function callback(){ha.bA(Wa.Z,d.createElement(Wa.Z,{onRequestClose:()=>{c()("#fileLoading").addClass("hidden")
ha.xv(Wa.Z)},onSubmit:(e,t)=>{Za.Z.createThenOpen(e,t.id).done((()=>{c()("#fileLoading").addClass("hidden")
ha.xv(Wa.Z)}))}}))}c()(document).on("click",e,(e=>{e.preventDefault()
callback()}));(0,na.Z)(t,callback)}bindFolderCreate(e,t){function callback(){ha.bA(La.Z,d.createElement(La.Z,{onRequestClose:()=>ha.xv(La.Z),successCallback:e=>{(0,Ba.Z)(e,ja)}}))}c()(document).on("click",e,(e=>{e.preventDefault()
callback()}));(0,na.Z)(t,callback)}bindBasicCreate(e,t,n,a,i=!1){null==a&&(a={})
const r=i?()=>(0,D.Z)(n,a):()=>n.open(n,a)
c()(document).on("click",e,(e=>{e.preventDefault()
r()}));(0,na.Z)(t,r)}render(){(new ra.Z).render()
this.bindBasicCreate(".js-create-new-sequence","#create/sequence",Ua.Z,{initialTab:wa._p.RAW},!0);(new ka).render();(new pa).render();(new Sa).render();(new fa).render();(new ia).render();(new xa).render()
this.bindBasicCreate(".js-create-new-entry","#create/entry",Ya.Z,{onCreate:function onCreateEntry({folder:e}){rt.ZP.success(`Created entry in **${e.source.name}**.`)}});(new Ga).render()
this.bindBasicCreate(".js-create-new-protocol","#create/protocol",Qa,{onCreate:function onCreateProtcol(e){const t=Ma(e.folder)
rt.ZP.success(`Created protocol in **${t}**.`)}})
c()(document).on("click",".js-create-new-protein",(e=>{e.preventDefault()
Ha.Z.promptCreateAndOpen(Da.Z.get(Da.O.INVENTORY))}))
c()(document).on("click",".js-import-proteins",(e=>{e.preventDefault();(0,Va.g)("IMPORT_PROTEIN_MODAL_KEY")}));(new la).render();(new da).render();(new Pa).render()
this.bindTemplateCreate(".js-create-template","#create/template")
this.bindFolderCreate(".js-create-new-folder","#create/folder")
return this}}const Ja=CreateFromHashView
var Xa=n(506276),ei=n(699418),ti=n(579807),ni=n(389760)
const ai=function CreateInstrumentGatewayModal(e){const[t,n]=(0,d.useState)(""),[a,i]=(0,d.useState)(null)
return d.createElement(B.ZP,{buttons:[{style:O.ZJ.SECONDARY,submit:!0,text:"Submit"}],onRequestClose:e.onRequestClose,onRequestSubmit:()=>{const n=function validate(e,t){if(""===e)return"Name is required"
for(const n of t)if(n.name===e)return"Name must not be the same as an existing gateway."
return null}(t,e.existingGateways)
null==n?e.onRequestSubmit(t):i(n)},title:"Create instrument gateway",bannerProps:a?{bannerType:qe.ct.ERROR,text:a}:null},d.createElement(k.Z,{label:"Name",isRequired:!0,value:t,onChange:e=>{n(e.target.value)},hasError:null!=a}))}
var ii
!function(e){e.HEALTHY="HEALTHY"
e.UNHEALTHY="UNHEALTHY"
e.UNREGISTERED="UNREGISTERED"}(ii||(ii={}))
var ri=n(22422)
const si=function UpgradeGatewayModal(e){const[t,n]=(0,d.useState)([]),[a,i]=(0,d.useState)(!0),refetch=()=>{i(!0);(0,ri.oB)(e.gatewayId).then((({pendingUpgrades:e})=>{n(e)
i(!1)}))};(0,ni.Z)(refetch)
return d.createElement(B.ZP,{buttons:[{style:O.ZJ.SECONDARY,cancel:!0,text:"Close"}],onRequestClose:e.onRequestClose,title:"Upgrade adapters installed on gateway"},a?d.createElement(H.b,null):0===t.length?"No available upgrades":t.map((t=>d.createElement(O.Co,{key:t.id,buttonStyle:O.ZJ.TERTIARY_GRAY,size:O.qE.SMALL,onClick:async()=>{await(0,ri.qx)(e.gatewayId,t.id)
refetch()},text:`Upgrade ${t.adapter.displayName} to ${t.version}`,icon:"paperclip"}))))}
function DownloadInstallerCell(e){return d.createElement(de.bL,null,d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,size:O.qE.SMALL,onClick:async()=>{const{downloadUrl:t}=await(0,ri.JC)(e.gateway.id);(0,T.gG)(t)},disabled:e.gateway.status!==ii.UNREGISTERED||e.gateway.isArchived,icon:"download"}))}function ArchiveCell(e){return d.createElement(de.bL,null,d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,size:O.qE.SMALL,onClick:()=>{(0,M.iG)("Archive Gateway?","Archiving this gateway will archive all connections associated with it and is not reversible. To re-connect to the instrument, you will need to install a new gateway and create new connections.",O.ZJ.WARNING,{acceptText:"Archive Gateway",rejectText:"Cancel",promiseCompatible:!0,onSubmit:()=>{(0,st.jI)((0,ri.aK)(e.gateway.id),"Archiving gateway...").then((()=>{e.refetch()}))}})},icon:"archive",disabled:e.gateway.isArchived}))}function UpgradeCell(e){const[t,n]=(0,d.useState)([]),refetch=()=>{(0,ri.oB)(e.gateway.id).then((({pendingUpgrades:e})=>{n(e)}))};(0,ni.Z)(refetch)
return d.createElement(de.bL,null,d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,size:O.qE.SMALL,onClick:()=>(0,D.Z)(si,{gatewayId:e.gateway.id,onRequestClose:refetch}),disabled:0===t.length,icon:"download"}))}function DownloadGatewayModal(e){return d.createElement(B.ZP,{buttons:[{style:O.ZJ.TERTIARY_GRAY,text:"Generate installer token",onClick:async()=>{const{downloadUrl:e}=await(0,ri.Op)();(0,T.gG)(e)}},{style:O.ZJ.PRIMARY,cancel:!0,text:"Done"}],title:"Download gateway",onRequestClose:e.onRequestClose,closeable:!0},'The gateway installer can be found in your browser downloads folder. Please additionally download an installer token by clicking on the "Generate installer token" button below.',d.createElement("br",null),d.createElement("br",null),"During the gateway installation process, you will be prompted to upload this installer token which expires in 1 hour.",d.createElement("br",null),d.createElement("br",null),'If a new token file needs to be generated once this modal has been closed, you can generate a new token from the "Download" dropdown.')}function DownloadTokenModal(e){return d.createElement(B.ZP,{buttons:[{style:O.ZJ.PRIMARY,cancel:!0,text:"Done"}],title:"Generate new installer token",onRequestClose:e.onRequestClose,closeable:!0},"The installer token file can be found in your browser downloads folder.",d.createElement("br",null),d.createElement("br",null),"During the gateway installation process, you will be prompted to upload an installer token which expires in 1 hour.")}const oi={[ii.HEALTHY]:"healthy",[ii.UNHEALTHY]:"unhealthy",[ii.UNREGISTERED]:"unregistered"},li={[ii.HEALTHY]:"Open",[ii.UNHEALTHY]:"Error",[ii.UNREGISTERED]:"Pending install"},ci={[ii.HEALTHY]:"request-executed",[ii.UNHEALTHY]:"request-failed",[ii.UNREGISTERED]:"request-in-progress"}
function StatusCell(e){return d.createElement(de.bL,null,d.createElement(ve.ZP,{placement:ve.TQ.AUTO,title:e.gateway.componentStatuses.join("\n").concat("\n\n",e.gateway.deploymentStatuses.join("\n"))},d.createElement(P.Z,{className:(0,C.iv)(di.statusIcon,di[oi[e.gateway.status]]),icon:ci[e.gateway.status]}),(0,Ot.kC)(li[e.gateway.status])))}function InstrumentGatewaysPage(e){(0,T._w)("Benchling Gateways")
const{instrumentGateways:t}=e
return null==t?d.createElement(H.b,null):d.createElement("div",{className:"settingsPage"},d.createElement("div",{className:"settingsPage-contentWrapper",...(0,g.Z)({component:"settingsPageContainer",element:"root"})},d.createElement("div",{className:"u-lr-split"},d.createElement("div",{style:{width:"70%"}},d.createElement(f.R6,null,"Benchling Gateways"),d.createElement("p",{className:"help-block"},"A Benchling gateway serves as a home for all of your instrument software adapters. The recommended setup is to have one gateway per PC in the lab. Please download and install the gateway and input the associated installer token so that Benchling can establish a connection with the installed gateway.")),d.createElement("div",{style:{float:"right"}},!S.ZP.INSTRUMENTS_ENABLE_BASE_INSTALLER_FLOW&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,onClick:()=>{(0,D.Z)(ai,{existingGateways:t,onRequestSubmit:t=>{(0,st.jI)((0,ri.rG)(t),"Setting up instrument gateway...").then((()=>{e.refetch()}))}})},size:O.qE.SMALL,text:"Create instrument gateway"}),S.ZP.INSTRUMENTS_ENABLE_BASE_INSTALLER_FLOW&&d.createElement("div",{className:"buttonGroup"},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,size:O.qE.SMALL,type:"button",isDropdown:!0,text:"Download"}),d.createElement("ul",{className:"dropdown-menu pull-right"},d.createElement("li",null,d.createElement("a",{onClick:async()=>{const{downloadUrl:t}=await(0,ri.p0)();(0,T.gG)(t);(0,D.Z)(DownloadGatewayModal,{onRequestClose:e.refetch})}},"Download gateway")),d.createElement("li",null,d.createElement("a",{onClick:async()=>{const{downloadUrl:t}=await(0,ri.Op)();(0,T.gG)(t);(0,D.Z)(DownloadTokenModal,{onRequestClose:e.refetch})}},"Generate new installer token")))))),d.createElement(de.iA,{numRows:t.length,overflowVisible:!0,className:(0,C.iv)(di.table)},d.createElement(de.sg,{header:"Name",renderCell:e=>d.createElement(de.bL,null,d.createElement("span",{className:N()({faded:t[e].isArchived})},t[e].name))}),d.createElement(de.sg,{header:"Status",renderCell:e=>d.createElement(StatusCell,{gateway:t[e]})}),!S.ZP.INSTRUMENTS_ENABLE_BASE_INSTALLER_FLOW&&d.createElement(de.sg,{header:"Download installer",renderCell:e=>d.createElement(DownloadInstallerCell,{gateway:t[e]})}),d.createElement(de.sg,{header:"Upgrade",renderCell:n=>d.createElement(UpgradeCell,{gateway:t[n],refetch:e.refetch})}),d.createElement(de.sg,{header:"Archive",renderCell:n=>d.createElement(ArchiveCell,{gateway:t[n],refetch:e.refetch})}))))}function InstrumentGatewaysPageDataFetcher(){const[e,t]=(0,d.useState)(null),refetch=()=>{(0,ri.zo)().then((({gateways:e})=>{t((0,St.UY)(e,"name"))}))};(0,ni.Z)(refetch)
return null==e?d.createElement(H.b,null):d.createElement(InstrumentGatewaysPage,{instrumentGateways:e,refetch})}const di=C.mM.create({header:{alignItems:"center",display:"flex",justifyContent:"space-between"},table:{marginTop:"35px"},statusIcon:{marginRight:"6px"},healthy:{color:b.ZA},unhealthy:{color:b.hM},unregistered:{color:b.TG}})
var ui=n(746779),mi=n(248270),pi=n(198604),hi=n(380659),Ei=n(721641),Si=n(714700),Ti=n(408446),gi=n(578624),fi=n(563071),Ii=n(908318),Ai=n(965131),yi=n(832472),_i=n(348679)
function ConnectionSchemaFieldTableRow(e){return d.createElement(_i.Ly,{...e,includeSnapshotField:!1})}var Ci=n(382857),Ri=n(687317),Ni=n(235136),Oi=n(888994),bi=n(501202)
function AdapterSelector(e){const[t,n]=(0,d.useState)([]);(0,ni.Z)((()=>{(0,Ti.dr)().then((({instrumentAdapters:e})=>{n(e)}))}))
const a=t.find((t=>t.id===e.value))
return d.createElement(an.Z,{id:ue.default.uniqueId("adapterId"),label:"Integration Adapter",labelStyle:F.Z.STYLES.LABEL,isRequired:!0},null==e.schema?d.createElement(w.ZP,{className:(0,C.iv)(vi.dropdown),displayName:a?a.displayName:"None",menu:d.createElement(U.ZP,{value:e.value,height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,scrollable:!0},t.map((t=>d.createElement(x.Z,{key:t.id,value:t.id,onSelect:()=>{e.onChange(t.id)}},t.displayName))))}):d.createElement("span",{className:"settingsPageContainer-readOnlyValue"},null==a?void 0:a.displayName))}const vi=C.mM.create({dropdown:{flex:1}}),Pi={component:"ConnectionSchemaMetadataSection"},Li={name:{...Pi,element:"schemaName"},owner:{...Pi,element:"ownerName"},warehouseTable:{...Pi,element:"warehouseTable"}}
function ConnectionSchemaMetadataSection(e){var t
const n=null!=e.schema&&(0,Ci.ZP)(e.schema),a=null==e.schema
return d.createElement(d.Fragment,null,d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataRow1)},d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataColumn)},d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataField)},d.createElement(Ri.Z,{isWritable:!n,name:e.name,onNameChange:e.onNameChange,schema:e.schema,dataTestAttrs:Li.name}))),d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataColumn)},d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataField)},d.createElement(Ni.Z,{ownerId:e.ownerId,ownerChoices:e.ownerChoices,onOwnerChange:e.onOwnerChange,schema:e.schema,dataTestAttrs:Li.owner}))),d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataColumn)},S.ZP.ENABLE_WAREHOUSE&&!e.hideWarehouseTableName&&d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataField)},d.createElement(bi.Z,{isWritable:e.isEditableWarehouseTableName&&!n,schema:e.schema,sqlIdentifier:e.sqlIdentifier||"",onSqlIdentifierChange:e.onSqlIdentifierChange,dataTestAttrs:Li.warehouseTable})))),d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataRow2)},d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataColumn)},d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataField)},d.createElement(Oi.Z,{isBeingCreated:a,isRequired:!0,isWritable:!n,prefix:e.idPrefix,onPrefixChange:e.onIdPrefixChange}))),d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataColumn)},d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataField)},d.createElement(AdapterSelector,{value:null!==(t=e.adapterId)&&void 0!==t?t:null,onChange:e.onAdapterIdChange,schema:e.schema}))),d.createElement("div",{className:(0,C.iv)(Mi.schemaMetadataColumn)})))}const Di={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},Mi=C.mM.create({ownerDropdown:{flex:1},schemaMetadataRow1:{...Di,marginBottom:"10px"},schemaMetadataRow2:{...Di,marginBottom:"32px"},schemaMetadataColumn:{flex:.3,minWidth:0},schemaMetadataField:{width:"auto",marginBottom:"0"}})
function getSpecForRequest(e,t){return{fields:(0,yi.S)(e),idPrefix:t}}const wi=ot.ZP`
  query ConnectionSchemaMetadataSettingsQuery @skipAudit @engComponent(name: INSTRUMENTS) {
    ...AllSchemasGraphQL
  }
  ${(0,ut.f)("AllSchemas").fragment}
`
function ConnectionSchemaMetadataSettings(e){var t,n,a
const i=(0,nt.IJ)(wi),r=(0,d.useMemo)((()=>{if(i.type===nt.NI.SUCCESS){const e=(0,Ai.tY)("AllSchemas",i.data)
return{assaySchemas:[...e.runSchemas,...e.requestSchemas,...e.resultSchemas],tagSchemas:e.tagSchemas,storableSchemas:[...e.containerSchemas,...e.boxSchemas,...e.locationSchemas,...e.plateSchemas]}}return{assaySchemas:[],tagSchemas:[],storableSchemas:[]}}),[i])
let s=null
e.name?e.idPrefix?e.adapterId?(null===(t=e.fields)||void 0===t?void 0:t.some((e=>!e.name)))&&(s="Schema fields must all have names"):s="Schema needs an integration adapter":s="Schema needs a prefix":s="Schema needs a name"
return d.createElement("div",{className:"u-flex-grow u-min-width-zero"},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ConnectionSchemaMetadataSection,{isEditableWarehouseTableName:S.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME&&e.shouldAllowSchemaUpdates,adapterId:e.adapterId,name:e.name,ownerId:e.ownerId,ownerChoices:e.ownerChoices,sqlIdentifier:e.sqlIdentifier,idPrefix:e.idPrefix,onAdapterIdChange:e.setAdapterId,onNameChange:e.setName,onOwnerChange:t=>{e.setOwnerId(t.id)},onSqlIdentifierChange:e.setSqlIdentifier,onIdPrefixChange:e.setIdPrefix,schema:e.schema})),d.createElement("div",{className:(0,C.iv)(Fi.fieldSection)},i.type===nt.NI.SUCCESS?d.createElement(gi.ZP,{schemaId:e.schema?e.schema.id:null,schema:e.schema,schemaHasData:null===(n=e.schema)||void 0===n?void 0:n.hasData,schemaFieldDependentsSummariesById:e.schemaFieldDependentsSummariesById,isBeingCreated:null==e.schema,isDisabled:!e.shouldAllowSchemaUpdates,itemClass:ConnectionSchemaFieldTableRow,fields:e.fields||[],onFieldsChange:e.setFields,schemaType:"connection",tagSchemas:r.tagSchemas,storableSchemas:r.storableSchemas,assaySchemas:r.assaySchemas,savingState:Vt.SavingState.COMPLETED,ownerUrlId:(null===(a=(0,yi.V)(e.ownerId))||void 0===a?void 0:a.url_identifier)||"",ownerId:e.ownerId,shouldShowIsRequired:!0,shouldShowIsIntegration:!1,shouldShowIsParentLink:!1,dataTestAttrs:{component:"ConnectionSchemaMetadataSettings",element:"fieldTable"}}):d.createElement(gi.Bk,{schemaType:"connection"})),e.handleNext&&d.createElement(ve.pf,{tooltipTitle:s},d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.SECONDARY,disabled:null!=s,onClick:e.handleNext,size:O.qE.MEDIUM,text:"Next"})))}const Fi=C.mM.create({fieldSection:{marginBottom:"32px"}})
function ConnectionSchemaCreateFlow(e){var t
const[n,a]=(0,d.useState)(""),[i,r]=(0,d.useState)(""),[s,o]=(0,d.useState)(null===(t=e.ownerChoices[0])||void 0===t?void 0:t.id),[l,c]=(0,d.useState)(null),[u,m]=(0,d.useState)(null),[p,h]=(0,d.useState)([]),[E,g]=(0,d.useState)([])
const handleAdapterChange=async e=>{a(e)
const t=await(0,Ti.uP)(e)
g(t.fields.map((e=>function createSchemaFieldFromAdapterField(e){const t=(0,gi.NW)(e.displayName,e.id)
t.isRequired=e.isRequired
return t}(e))))}
return d.createElement(fi.Z,{createSchema:function createSchema(e){const t=getSpecForRequest([...p,...E],u||"")
t&&(0,st.jI)((async()=>{const{schemaId:a}=await(0,Ii._m)({ownerId:s,name:i,spec:t,sqlIdentifier:S.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME&&l?l:null,collaborators:e,adapterId:n})
T.c4(null,(0,Ii.hM)(a))})(),"Creating schema...")},defaultSchemaCollaboratorsSchemaType:Rt.l.CONNECTION,metadataTitle:"Connection Schema Settings",isSchemaPermissionsEnabled:!0,ownerId:s,organizations:e.organizations,renderMetadataSettings:function renderMetadataSettings(t){return d.createElement(ConnectionSchemaMetadataSettings,{adapterId:n,setAdapterId:handleAdapterChange,name:i,setName:r,ownerId:s,setOwnerId:o,sqlIdentifier:l,setSqlIdentifier:c,idPrefix:u,setIdPrefix:m,fields:p,setFields:h,shouldAllowSchemaUpdates:!0,schema:null,schemaFieldDependentsSummariesById:e.schemaFieldDependentsSummariesById,ownerChoices:e.ownerChoices,schemaPermissions:e.schemaPermissions,handleNext:t})}})}var ki=n(563019),Ui=n(958876)
const xi=ot.Ps`
  query ConnectionSchemaPermissionSettingsQuery($connectionSchemaId: StrictString!) @skipAudit {
    connectionSchema(id: $connectionSchemaId) {
      ... on PoliceableInterface {
        id
        currentUserPermissionsJson
        ...CollaboratorInfoGraphQL
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,ut.f)("CollaboratorInfo").fragment}
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function ExistingConnectionSchemaPermissionSettings({connectionSchema:e,refetch:t}){const n=(0,Ai.tY)("CollaboratorInfo",e),[{collaborators:a,minimalCollaborators:i},r]=(0,ki.U9)(n.collaborators)
return d.createElement(Ui.K,{id:e.id,isReadOnly:!e.currentUserPermissionsJson.definitionEditable,collaborators:a,onUpdate:r,onSubmit:async()=>{await async function updateConnectionSchemaCollaborators(e,t){const n=await(0,Ii._C)(e,t);(0,It.writeFragmentsToCache)((0,ut.f)("CollaboratorInfo"),[n.schema])}(e.id,{collaborators:i})
await t()}})}const Bi=function QueryingConnectionSchemaPermissionSettings({connectionSchemaId:e}){const t=(0,nt.IJ)(xi,{variables:{connectionSchemaId:e}})
if(t.type===nt.NI.ERROR)return null
if(t.type===nt.NI.PENDING)return d.createElement(H.b,null);(0,ie.hu)(!(0,at.CZ)(t.data.connectionSchema),"Expected connection schema to be accessible.")
return d.createElement(ExistingConnectionSchemaPermissionSettings,{connectionSchema:t.data.connectionSchema,refetch:async()=>{await t.refetch()}})}
var Zi
!function(e){e.CONNECTION_SCHEMA_EDITOR="CONNECTION_SCHEMA_EDITOR"
e.CONNECTION_SCHEMA_ACCESS_POLICIES="CONNECTION_SCHEMA_ACCESS_POLICIES"}(Zi||(Zi={}))
function ExistingConnectionSchemaEditor(e){const[t,n]=(0,d.useState)(Zi.CONNECTION_SCHEMA_EDITOR),updateSchema=t=>{(0,st.jI)((async()=>{var n,a
await(0,Ii.IO)({schemaId:e.schema.id,schemaName:null!==(n=t.schemaName)&&void 0!==n?n:e.schema.name,sqlIdentifier:S.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME&&null!=t.sqlIdentifier?t.sqlIdentifier:null,spec:null!==(a=t.spec)&&void 0!==a?a:getSpecForRequest(e.schema.allFields,e.schema.prefix)})
e.refetch()
rt.ZP.success("Updated schema successfully")})(),"Updating...")}
return d.createElement(Ye.Xl,{activeTab:t,onRequestTabChange:e=>{n(e)},className:"u-flex-grow"},d.createElement(Ye.OK,{tabKey:Zi.CONNECTION_SCHEMA_EDITOR,title:"Connection Schema Settings"},d.createElement(ConnectionSchemaMetadataSettings,{adapterId:e.schema.integrationAdapterId,setAdapterId:e=>{(0,ie.Gp)(!1,"Adapter ID cannot be changed after creation")},name:e.schema.name,setName:e=>{updateSchema({schemaName:e})},ownerId:e.schema.organization.id,setOwnerId:St.ZT,sqlIdentifier:e.schema.sqlIdentifier,setSqlIdentifier:e=>{updateSchema({sqlIdentifier:e})},idPrefix:e.schema.prefix,setIdPrefix:t=>{const n=getSpecForRequest(e.schema.allFields,t)
updateSchema({spec:n})},fields:e.schema.allFields,setFields:t=>{const n=t.map((e=>{const{cid:t,...n}=e
return n}))
if(z()(n,e.schema.allFields))return
const a=getSpecForRequest(t,e.schema.prefix)
updateSchema({spec:a})},shouldAllowSchemaUpdates:null!=e.schemaPermissions&&!0===e.schemaPermissions.definitionEditable,schemaId:e.schemaId,schema:e.schema,schemaFieldDependentsSummariesById:e.schemaFieldDependentsSummariesById,ownerChoices:e.ownerChoices,schemaPermissions:e.schemaPermissions})),d.createElement(Ye.OK,{tabKey:Zi.CONNECTION_SCHEMA_ACCESS_POLICIES,title:"Access Policies"},d.createElement(Bi,{connectionSchemaId:e.schema?e.schema.id:""})))}function ConnectionSchemaEditor(e){const t=(0,Si.u)()
if(!e.schemaId&&0===t.length)return d.createElement(pi.Z,null);(0,mi.Z)(e.schema,Ei.R.CONNECTION)
return d.createElement(J.Z,{title:"Connection Schemas",subtitle:e.schemaId?e.schema.name:"Create Connection Schema",onClickTitle:()=>{T.c4(null,(0,Ii.j1)())},toolbar:e.schema&&d.createElement(hi.Z,{schemaId:e.schema.id,schemaType:Ei.R.CONNECTION})},e.schemaId?d.createElement(ExistingConnectionSchemaEditor,{schemaId:e.schemaId,schema:e.schema,schemaFieldDependentsSummariesById:e.schemaFieldDependentsSummariesById,ownerChoices:t,schemaPermissions:e.schemaPermissions,refetch:e.refetch}):d.createElement(ConnectionSchemaCreateFlow,{schemaFieldDependentsSummariesById:e.schemaFieldDependentsSummariesById,ownerChoices:t,schemaPermissions:e.schemaPermissions,organizations:e.organizations}))}const qi=ot.ZP`
  query ConnectionSchemaEditorQuery @skipAudit @engComponent(name: INSTRUMENTS) {
    currentUser {
      id
      organizations {
        ... on OrganizationNode {
          ...OrganizationDefaultSchemaCollaboratorsConfiguration
        }
      }
    }
  }
  ${ui.G}
`,Gi=ot.ZP`
  query ConnectionSchemaQuery($id: StrictString!) @skipAudit @engComponent(name: INSTRUMENTS) {
    connectionSchema(id: $id) {
      ... on ConnectionSchemaNode {
        id
        name
        allFields {
          id
          apiId
          dependentsSummaries
        }
        allFieldsJson
        fieldsJson
        integrationAdapterId
        organization
        prefix
        sqlIdentifier
        archiveRecord {
          purpose
        }
        hasData
        ... on PoliceableInterface {
          id
          currentUserPermissionsJson
        }
      }
    }
  }
`
C.mM.create({fieldSection:{marginBottom:"32px"}})
const Vi=function QueryingConnectionSchemaEditor(e){const t=(0,nt.IJ)(qi),n=(0,nt.A4)(Gi,{variables:{id:e.schemaId},skip:null==e.schemaId,renderCachedDataWhenRefetching:!0})
if(n.type===nt.NI.PENDING||n.type===nt.NI.ERROR||t.type!==nt.NI.SUCCESS)return d.createElement(H.b,null)
let a=null
if(n.type===nt.NI.SUCCESS){const e=n.data.connectionSchema;(0,at.CZ)(e)||(a=e)}const i=a?(0,St.m8)(a.allFields.map((e=>[e.apiId,e.dependentsSummaries]))):{},r=null==a?void 0:a.currentUserPermissionsJson,s=t.data.currentUser.organizations
return d.createElement(ConnectionSchemaEditor,{schemaId:e.schemaId,schema:a?function connectionSchemaToSchema(e){return{...e,fields:e.fieldsJson,allFields:e.allFieldsJson}}(a):null,schemaFieldDependentsSummariesById:i,schemaPermissions:r,organizations:s,refetch:()=>n.refetch({id:e.schemaId})})}
var Hi=n(620080),Wi=n(905362),Yi=n(727493)
class PresentationalConnectionSchemasPage extends d.Component{constructor(){super(...arguments)
this.bulkArchiveConnectionSchemas=async(e,t)=>{try{await(0,st.jI)((0,Ii.uc)(e,(0,Hi.R0)(t,e)),"Archiving...")
rt.ZP.success("Items successfully archived.")}catch(e){rt.ZP.notifyError(e)}this.props.refetch()}
this.bulkUnarchiveConnectionSchemas=async e=>{try{await(0,Ii.Re)(e)
rt.ZP.success("Items successfully unarchived.")}catch(e){rt.ZP.notifyError(e)}this.props.refetch()}}render(){T._w("Connection Schemas")
return d.createElement(Yi.Z,{schemas:this.props.connectionSchemas,schemaType:Ei.R.CONNECTION,urlForSchema:Ii.hM,archiveSchemas:this.bulkArchiveConnectionSchemas,unarchiveSchemas:this.bulkUnarchiveConnectionSchemas,isWritable:this.props.areOrganizationSchemasCreatable})}}const $i=ot.Ps`
  query ConnectionSchemasPageQuery @skipAudit @engComponent(name: INSTRUMENTS) {
    connectionSchemas {
      id
      name
      archiveRecord {
        purpose
      }
    }
  }
`
function ConnectionSchemasPage(){const e=(0,Wi.Z)(),t=e.queryResultType===nt.NI.SUCCESS&&e.areOrganizationSchemasCreatable,n=(0,nt.IJ)($i,{fetchPolicy:"cache-and-network"}),a=n.type===nt.NI.SUCCESS?ue.default.sortBy(n.data.connectionSchemas,(({name:e})=>e.toLowerCase())):null
return d.createElement(PresentationalConnectionSchemasPage,{connectionSchemas:a,areOrganizationSchemasCreatable:t,refetch:n.refetch})}var Ki=n(553811),zi=n(805937),Qi=n(198964),ji=n(129270),Ji=n(10708),Xi=n(759345),er=n(927517),tr=n(356e3)
function BartenderServerStatus(e){var t,n,a,i
return null!=(null===(t=e.status)||void 0===t?void 0:t.numLabelTemplates)&&null!=(null===(n=e.status)||void 0===n?void 0:n.numPrinters)?d.createElement("div",null,d.createElement(P.Z,{className:(0,C.iv)(nr.green),icon:"dot"})," Online"):null!=(null===(a=e.status)||void 0===a?void 0:a.error)?d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement(P.Z,{className:(0,C.iv)(nr.orange),icon:"warning"})," Error"),d.createElement("div",{className:(0,C.iv)(nr.errorMessage)},null===(i=e.status)||void 0===i?void 0:i.error.replace(/^\w*Error: /,""))):d.createElement(H.Z,null)}function BartenderServerTable(e){const[t,n]=(0,d.useState)({}),[a,i]=(0,d.useState)(null),[r,s]=(0,d.useState)(!1),[o,l]=(0,d.useState)(!1);(0,d.useEffect)((()=>{const t=new AbortController
let a=!0
for(const i of e.bartenderServers)(0,tr.Yw)(i.url,t).then((e=>{a&&n((t=>({...t,[i.url]:{...t[i.url],numPrinters:e.filter((e=>"PDF"!==e)).length}})))})).catch((e=>{a&&!(0,ft.D_)(e)&&n((t=>({...t,[i.url]:{...t[i.url],error:String(e).toString()}})))}))
return function cleanup(){a=!1
t.abort()}}),[e.bartenderServers]);(0,d.useEffect)((()=>{const t=new AbortController
let a=!0
for(const i of e.bartenderServers)(0,tr.IE)(i.url,t).then((e=>{a&&n((t=>({...t,[i.url]:{...t[i.url],numLabelTemplates:e.length}})))})).catch((e=>{a&&!(0,ft.D_)(e)&&n((t=>({...t,[i.url]:{...t[i.url],error:String(e).toString()}})))}))
return function cleanup(){a=!1
t.abort()}}),[e.bartenderServers])
const getViewModeRow=n=>{var r,s
return{id:n.url,cells:[{key:`${n.url}:url`,contents:d.createElement(d.Fragment,null,n.url)},{key:`${n.url}:name`,contents:d.createElement(d.Fragment,null,n.name)},{key:`${n.url}:status`,contents:d.createElement(BartenderServerStatus,{status:t[n.url]}),cellClassName:"simpleDivTable-cell--narrow"},{key:`${n.url}:printers`,contents:d.createElement(d.Fragment,null,null===(r=t[n.url])||void 0===r?void 0:r.numPrinters),cellClassName:"simpleDivTable-cell--narrow"},{key:`${n.url}:labelTemplates`,contents:d.createElement(d.Fragment,null,null===(s=t[n.url])||void 0===s?void 0:s.numLabelTemplates),cellClassName:"simpleDivTable-cell--narrow"}],actionGroup:e.isWritable&&null==a?d.createElement("div",{className:"registry-actionGroup"},d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Delete"},d.createElement("span",{className:N()((0,C.iv)(nr.singleButton),"metadata-action faded u-danger-pointer"),onClick:()=>{t=n.url,M.iG("Delete print server?","You won't be able to undo this action.",O.ZJ.PRIMARY,{acceptText:"Delete",enableRedesign:!0}).done((()=>{e.onChange(e.bartenderServers.filter((e=>e.url!==t)))}))
var t}},d.createElement(P.Z,{icon:"delete"}))),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Edit"},d.createElement("span",{className:N()((0,C.iv)(nr.singleButton),"metadata-action faded u-primary-pointer"),onClick:()=>{(e=>{var t
null==a&&i({typename:"EditingBartenderServer",url:e.url,newUrl:e.url,newName:null!==(t=e.name)&&void 0!==t?t:""})})(n)}},d.createElement(P.Z,{icon:"edit"})))):null}},handleClickCancel=()=>{i(null)
s(!1)
l(!1)},urlIsNonEmpty=()=>null!=a&&""!==(null==a?void 0:a.newUrl.trim()),urlIsDuplicate=()=>e.bartenderServers.filter((e=>e.url!==(null==a?void 0:a.url))).some((e=>e.url===(null==a?void 0:a.newUrl.trim()))),isNewUrlValid=()=>urlIsNonEmpty()&&!urlIsDuplicate(),nameIsDuplicate=()=>e.bartenderServers.filter((e=>e.url!==(null==a?void 0:a.url))).some((e=>e.name===(null==a?void 0:a.newName.trim()))),isNewNameValid=()=>null!=a&&(""===(null==a?void 0:a.newName.trim())||!nameIsDuplicate()),handleClickSave=()=>{const t=e.bartenderServers.findIndex((e=>e.url===(null==a?void 0:a.url)))
if(!isNewUrlValid()||!isNewNameValid()){isNewUrlValid()||l(!0)
isNewNameValid()||s(!0)
return}s(!1)
l(!1)
const n={url:a.newUrl.trim(),name:a.newName.trim()||null},r=[...e.bartenderServers]
t>=0?r[t]=n:r.push(n)
i(null)
e.onChange(r)},handleKeyDown=e=>{if(er.isEnterKey(e)){e.preventDefault()
handleClickSave()}else if(er.isEscapeKey(e)){e.preventDefault()
handleClickCancel()}}
return d.createElement(L.Z,{headerCells:[{key:"url",contents:d.createElement(d.Fragment,null,"BarTender servers",e.isWritable&&d.createElement(P.Z,{className:N()({"simpleDivTable-addButton":!0,"simpleDivTable-addButton--disabled":null!=a}),icon:"compose",onClick:()=>{null==a&&i({typename:"EditingBartenderServer",url:null,newUrl:"",newName:""})}})),contentsClassName:(0,C.iv)(nr.nearBlack)},{key:"name",contents:d.createElement(d.Fragment,null,"Display name")},{key:"status",contents:d.createElement(d.Fragment,null,"Status"),cellClassName:"simpleDivTable-cell--narrow"},{key:"printers",contents:d.createElement(d.Fragment,null,"Printers"),cellClassName:"simpleDivTable-cell--narrow"},{key:"labelTemplates",contents:d.createElement(d.Fragment,null,"Label templates"),cellClassName:"simpleDivTable-cell--narrow"}],isDraggingDisabled:!e.isWritable||null!=a,onReorderRow:(t,n)=>{const a=[...e.bartenderServers],i=e.bartenderServers.findIndex((e=>e.url===t)),r=e.bartenderServers[i]
a.splice(i,1)
a.splice(n,0,r)
e.onChange(a)},noRowsText:"You don't have any BarTender servers configured.",rows:[...e.bartenderServers.map((e=>(null==a?void 0:a.url)===e.url?a:e)),...null!=a&&null==a.url?[a]:[]].map((e=>{return function isEditingBartenderServer(e){return"EditingBartenderServer"===e.typename}(e)?(n=e,{id:"editingBartenderServer",cells:[{key:"editingBartenderServer:newUrl",contents:d.createElement(d.Fragment,null,d.createElement(Xi.Z,{value:n.newUrl,onChange:e=>{i({...a,newUrl:e.target.value})},placeholder:"URL",autoFocus:!0,hasError:!isNewUrlValid(),onKeyDown:handleKeyDown}),o&&!isNewUrlValid()&&d.createElement(Ji.Z,{error:urlIsNonEmpty()?urlIsDuplicate()?"URL already in use":null:"URL cannot be empty"}))},{key:"editingBartenderServer:newName",contents:d.createElement(d.Fragment,null,d.createElement(Xi.Z,{value:n.newName,onChange:e=>{i({...a,newName:e.target.value})},placeholder:"Display name (optional)",hasError:!isNewNameValid(),onKeyDown:handleKeyDown}),r&&!isNewNameValid()&&d.createElement(Ji.Z,{error:nameIsDuplicate()?"Name already in use":null}))},{key:"editingBartenderServer:status",contents:null!=n.url?d.createElement(BartenderServerStatus,{status:t[n.url]}):"",cellClassName:"simpleDivTable-cell--narrow",contentsClassName:(0,C.iv)(nr.faded)},{key:"editingBartenderServer:printers",contents:null!=n.url?d.createElement(d.Fragment,null,null===(s=t[n.url])||void 0===s?void 0:s.numPrinters):"",cellClassName:"simpleDivTable-cell--narrow",contentsClassName:(0,C.iv)(nr.faded)},{key:"editingBartenderServer:labelTemplates",contents:null!=n.url?d.createElement(d.Fragment,null,null===(l=t[n.url])||void 0===l?void 0:l.numLabelTemplates):"",cellClassName:"simpleDivTable-cell--narrow",contentsClassName:(0,C.iv)(nr.faded)}],actionGroup:d.createElement("div",{className:N()("registry-actionGroup",(0,C.iv)(nr.alwaysVisible))},d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Cancel"},d.createElement("span",{className:N()((0,C.iv)(nr.singleButton),"metadata-action faded u-danger-pointer"),onClick:handleClickCancel},d.createElement(P.Z,{className:"metadata-action-icon--close",icon:"close"}))),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Save"},d.createElement("span",{className:N()((0,C.iv)(nr.singleButton),"metadata-action faded u-primary-pointer"),onClick:handleClickSave},d.createElement(P.Z,{className:N()("metadata-action-icon--complete"),icon:"check"})))),rowClassName:(0,C.iv)(nr.alignItemsTop)}):getViewModeRow(e)
var n,s,l})),dataTestAttrs:{component:"BartenderServerTable",element:"root"}})}const nr=C.mM.create({nearBlack:{color:b.Rl},orange:{color:b.ud},green:{color:b.ZA},singleButton:{marginLeft:"6px",marginRight:"6px",padding:0},faded:{opacity:.5},alwaysVisible:{visibility:"visible"},alignItemsTop:{alignItems:"flex-start"},errorMessage:{...ji.XI,whiteSpace:"normal"}})
var ar=n(392911),ir=n(253075),rr=n(540332)
function LegacyPrintMethodWarning({persistedPrintMethod:e}){return d.createElement("div",{className:(0,C.iv)(sr.marginLeftMinus4)},d.createElement(Jt.Z,null,"If you want to switch back to the"," ",d.createElement("strong",null,ar.pI[e].toLowerCase())," option, you'll need to contact Benchling Support."))}function PrintMethodInput({printMethods:e,selectedPrintMethod:t,onSelectPrintMethod:n}){return d.createElement("div",{className:(0,C.iv)(sr.dropdownFullWidth)},d.createElement(w.ZP,{displayName:ar.pI[t],menu:d.createElement(U.ZP,{value:t,isMulti:!1},e.map((e=>d.createElement(x.Z,{value:e,key:e,onSelect:n,dataTestAttrs:{component:"PrintMethodOption",key:e}},ar.pI[e])))),dataTestAttrs:{component:"PrintMethodInput",element:"dropdown"}}))}function PrintMethodDisplay({persistedPrintMethod:e}){return d.createElement("span",{className:(0,C.iv)(sr.viewer)},ar.pI[e])}function EditablePrintMethod(e){const{data:t,updateDraftData:n,isEditing:a,startEditing:i,stopEditing:r}=(0,rr.Z)({selectedPrintMethod:e.persistedPrintMethod}),s=[...ar.Xt.includes(e.persistedPrintMethod)?[e.persistedPrintMethod]:[],ar.G2.BARTENDER,ar.G2.ZEBRA_BROWSER_PRINT]
return d.createElement(d.Fragment,null,d.createElement(ir.Z,{editor:d.createElement(PrintMethodInput,{printMethods:s,selectedPrintMethod:t.selectedPrintMethod,onSelectPrintMethod:e=>{n({selectedPrintMethod:e})}}),viewer:d.createElement(PrintMethodDisplay,{persistedPrintMethod:e.persistedPrintMethod}),isBeingEdited:a,isWritable:e.isWritable,isCompleteEnabled:!0,onEdit:i,onCancel:r,onComplete:()=>{e.onChange(t.selectedPrintMethod)
r()}}),ar.Xt.includes(e.persistedPrintMethod)&&t.selectedPrintMethod!==e.persistedPrintMethod&&d.createElement(LegacyPrintMethodWarning,{persistedPrintMethod:e.persistedPrintMethod}))}const sr=C.mM.create({viewer:{maxWidth:"100%",overflowWrap:"normal"},dropdownFullWidth:{width:"100%"},marginLeftMinus4:{marginLeft:"-4px"}})
var or=n(998656)
const lr=ot.Ps`
  query LabelPrintingSettingsQuery @skipAudit @engComponent(name: INVENTORY) {
    currentTenant {
      id
      name
      tenantAdminData {
        ... on TenantAdminDataNode {
          id
          configOverrides(keys: ["INVENTORY_LABEL_PRINTING_METHOD", "INVENTORY_BARTENDER_SERVERS"]) {
            id
          }
        }
      }
    }
    currentUser {
      id
      isTenantAdmin
    }
    labelPrintingConfig {
      id
      tenantConfiguredPrintingMethod
      bartenderServers {
        id
        name
        url
      }
    }
  }
`
function LabelPrintingSettingsPageContent({conf:e,onPersistChanges:t}){const{currentUser:n,labelPrintingConfig:{tenantConfiguredPrintingMethod:a,bartenderServers:i}}=e
return d.createElement(d.Fragment,null,d.createElement(ne.Z,null,d.createElement(ee.Z,{md:5},d.createElement("div",{className:(0,C.iv)(cr.marginTop24px)},d.createElement(F.Z,{label:"Print method"})),d.createElement(EditablePrintMethod,{persistedPrintMethod:a,isWritable:Boolean(null==n?void 0:n.isTenantAdmin),onChange:n=>{(0,It.writeQuery)({query:lr},{...e,labelPrintingConfig:{...e.labelPrintingConfig,tenantConfiguredPrintingMethod:n}})
t({labelPrintingMethod:n,bartenderServers:i.map((e=>(0,tr.uR)(e)))})}}))),a===ar.G2.BARTENDER&&d.createElement("div",{className:(0,C.iv)(cr.marginTop18px)},d.createElement(qe.ZP,{bannerType:qe.ct.INFO,text:"BarTender runs on your local network.",supportingInfo:d.createElement(d.Fragment,null,"All communication with BarTender happens between your browser and the local BarTender server. This means your information and your printers arent accessible to Benchlings servers."," ",d.createElement("a",{href:"https://help.benchling.com/hc/articles/9684240594573",target:"_blank",rel:"noopener noreferrer"},"Learn more")),action:{actionType:qe.J7.ACCORDION}}),d.createElement("div",{className:(0,C.iv)(cr.marginTop24px)},d.createElement(BartenderServerTable,{bartenderServers:i,isWritable:Boolean(null==n?void 0:n.isTenantAdmin),onChange:n=>{(0,It.writeQuery)({query:lr},{...e,labelPrintingConfig:{...e.labelPrintingConfig,bartenderServers:n.map((t=>({...t,__typename:"BartenderServerNode",id:`bartender_server-${e.currentTenant.name}-${t.url}`})))}})
t({labelPrintingMethod:a,bartenderServers:n.map((e=>(0,tr.uR)(e)))})}}))))}function LabelPrintingSettingsAuditLogsButton({conf:e}){const t="TenantAdminDataNode"===e.currentTenant.tenantAdminData.__typename?e.currentTenant.tenantAdminData.configOverrides.map((({id:e})=>e)):null
return null==t?null:d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.MEDIUM,dropLeft:!0},d.createElement(x.Z,{icon:"audit-trail",onSelect:()=>{Ce.dV(t)}},zi.QU))},d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,isDropdown:!0,size:O.qE.SMALL,text:"Export"}))}function LabelPrintingSettingsPage(){(0,T._w)("Label Printing Settings")
const e=(0,nt.IJ)(lr,{renderCachedDataWhenRefetching:!0}),handlePersistChanges=async t=>{try{await(0,or.Yy)(t)
rt.ZP.success("Label printing settings successfully updated.")}finally{e.refetch()}}
let t,n=null
if(e.type===nt.NI.ERROR){const e="Unable to load label printing configuration. Please try again."
rt.ZP.error(e)
t=d.createElement("p",null,e)}else if(e.type===nt.NI.SUCCESS){t=d.createElement(LabelPrintingSettingsPageContent,{conf:e.data,onPersistChanges:handlePersistChanges})
n=d.createElement(LabelPrintingSettingsAuditLogsButton,{conf:e.data})}else t=d.createElement(H.Z,null)
return d.createElement("div",{className:"settingsPageContainer-scrollContainer"},d.createElement("div",{className:"settingsPage"},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",{className:"u-lr-split"},d.createElement(f.R6,{className:N()("settingsPage-header",(0,C.iv)(cr.headerMargin))},"Label printing"),n),d.createElement("p",null,"Configure a label printing method for your tenant. This will take precedence over any label printing settings in your registry."," ",d.createElement("a",{href:"https://help.benchling.com/hc/articles/9684247711373",target:"_blank",rel:"noopener noreferrer"},"Learn more")),t)))}const cr=C.mM.create({headerMargin:{marginBottom:"8px"},marginTop18px:{marginTop:"18px"},marginTop24px:{marginTop:"24px"}})
var dr=n(229329)
const ur=ot.Ps`
  query InventorySettingsQuery @skipAudit @engComponent(name: INVENTORY) {
    currentTenant {
      id
      name
      tenantAdminData {
        ... on TenantAdminDataNode {
          id
          configOverrides(keys: ["INVENTORY_ENABLE_ARCHIVE_ENTITY_IN_CONTAINER_OPTION"]) {
            id
          }
        }
      }
    }
    currentUser {
      id
      isTenantAdmin
    }
    inventoryConfig {
      ... on InventoryConfigNode {
        id
        enableArchiveEntityInContainerOption
      }
      ... on InaccessibleInfoNode {
        invalidId
        canRequestAccess
      }
    }
  }
`
function InventorySettingsPageContent({conf:e,onPersistChanges:t}){var n
return d.createElement("div",null,!(0,at.CZ)(e.inventoryConfig)&&d.createElement("div",{className:(0,C.iv)(mr.settingsPageSection)},d.createElement(In.DU,{label:"Archiving Containers"}),d.createElement(dr.Z,{id:"enable-archive-entity-option",checked:Boolean(e.inventoryConfig.enableArchiveEntityInContainerOption),onChange:n=>{const a=Boolean(n.target.checked);(0,It.writeQuery)({query:ur},{...e,inventoryConfig:{enableArchiveEntityInContainerOption:a}})
t({enableArchiveEntityInContainerOption:a})},disabled:!(null===(n=e.currentUser)||void 0===n?void 0:n.isTenantAdmin),label:"When a container is archived, choose to also archive the entity it stores.",helpText:"Enabling this feature displays an option to archive the entity stored in a container being archived, and removes the archived entity from all other containers that store it."})))}function InventorySettingsPage(){(0,T._w)("General Inventory Settings")
const e=(0,nt.IJ)(ur,{renderCachedDataWhenRefetching:!0}),handlePersistChanges=async t=>{try{await function updateInventoryConfig(e){return ft.Ry({url:"/1/api/inventory-config",data:e})}(t)
rt.ZP.success("Inventory settings successfully updated.")}finally{e.refetch()}},t=function getMainContent(){if(e.type===nt.NI.ERROR){const e="Unable to load inventory configuration. Please try again."
rt.ZP.error(e)
return d.createElement("p",null,e)}if(e.type===nt.NI.SUCCESS)return d.createElement(InventorySettingsPageContent,{conf:e.data,onPersistChanges:handlePersistChanges})
return d.createElement(H.Z,null)}()
return d.createElement("div",{className:"settingsPageContainer-scrollContainer"},d.createElement("div",{className:"settingsPage"},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",{className:"u-lr-split"},d.createElement(f.R6,{className:N()("settingsPage-header",(0,C.iv)(mr.settingsPageHeader))},"General inventory settings")),t)))}const mr=C.mM.create({settingsPageHeader:{marginBottom:"8px"},settingsPageSection:{marginTop:"18px"}})
var pr,hr=n(289924)
!function(e){e.CREATE="CREATE"
e.EDIT="EDIT"
e.VIEW="VIEW"}(pr||(pr={}))
const Er={[pr.CREATE]:"Add monomers",[pr.EDIT]:"Edit monomers",[pr.VIEW]:"View monomers"}
function MonomerConfigurationPageContainer({children:e,methodTitle:t,purpose:n=pr.CREATE}){const a=Er[n];(0,d.useEffect)((()=>{(0,T._w)(a)}),[a])
return d.createElement("div",{className:(0,C.iv)(Sr.container,n!==pr.EDIT&&Sr.marginBottom)},d.createElement("div",{className:(0,C.iv)(Sr.header)},d.createElement("span",{className:(0,C.iv)(Sr.library),onClick:()=>{(0,j.ZP)("/monomers")}},"Monomer library /"),d.createElement("div",{className:(0,C.iv)(Sr.subtitle)},a)),d.createElement("div",{className:(0,C.iv)(Sr.borderBottom,n!==pr.EDIT&&Sr.marginBottom)}),d.createElement("div",{className:(0,C.iv)(Sr.creationMethodSection)},t&&d.createElement("div",{className:(0,C.iv)(Sr.creationMethodHeader)},d.createElement(f.R6,null,t),n===pr.CREATE&&d.createElement("div",{className:(0,C.iv)(Sr.changeMethod)},d.createElement(hr.Z,{onMouseDown:()=>{(0,j.ZP)("/monomers/create")}},"Change method"))),d.createElement("div",null,e)))}const Sr=C.mM.create({creationMethodSection:{marginLeft:40},changeMethod:{paddingBottom:2},creationMethodHeader:{display:"flex",flexDirection:"row",gap:12,alignItems:"center"},header:{marginLeft:40},borderBottom:{borderBottom:`1px solid ${b.tN}`,marginTop:16},subtitle:ji.nX,library:{color:b.pp,cursor:"pointer",...ji.cf,":hover":{color:b.t0}},container:{marginTop:40},marginBottom:{marginBottom:16}})
function MonomerCreationMethodButton({icon:e,text:t,url:n}){return d.createElement("div",{className:(0,C.iv)(Tr.methodButton),onClick:()=>{(0,j.ZP)(n)}},d.createElement("div",{className:(0,C.iv)(Tr.iconWrapper)},d.createElement(P.Z,{className:(0,C.iv)(Tr.icon),icon:e,dataTestAttrs:{component:"MonomerCreationMethodPicker",element:"creationMethodButton"}})),d.createElement("div",{className:(0,C.iv)(Tr.methodText)},t))}function MonomerCreationMethodPicker(){return d.createElement(MonomerConfigurationPageContainer,null,d.createElement("span",{className:(0,C.iv)(Tr.header)},"Select method for adding monomer(s)"),d.createElement(MonomerCreationMethodButton,{icon:"search",text:"Search HELM library",url:"/monomers/create/helm-library"}),d.createElement(MonomerCreationMethodButton,{icon:"upload",text:"Upload CSV",url:"/monomers/create/bulk-csv"}),d.createElement(MonomerCreationMethodButton,{icon:"compose",text:"Create new monomer",url:"/monomers/create/manual"}))}const Tr=C.mM.create({header:{...ji.nX,color:b.Rl,marginTop:20,marginBottom:4},methodButton:{display:"flex",alignItems:"center",width:280,marginTop:12,borderRadius:4,padding:6,cursor:"pointer",border:`1px solid ${b.tN}`,background:"white",":hover":{background:b.bs}},iconWrapper:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:26,height:26,borderRadius:4,background:b.tN},icon:{fill:b.pp},methodText:{...ji.cf,marginLeft:8}})
var gr=n(253397),fr=n(372721),Ir=n(256039),Ar=n(890711),yr=n(185837),_r=n(18378),Cr=n(87209),Rr=n(953403),Nr=n(485992)
function MonomerCreateFromCSVPage(){var e
const[t,n]=(0,d.useState)(null),[a,i]=(0,d.useState)(null),[r,s]=(0,d.useState)(!1),[o,l]=(0,d.useState)(null),[c,u]=(0,d.useState)(fr.$M),m=null!=o&&!r&&null!=t&&null==t.csvFormattingValidationError&&(null===(e=t.monomerValidationOutputs)||void 0===e?void 0:e.every((e=>e.isValid))),p=d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,text:"Import monomers",size:O.qE.MEDIUM,disabled:!m,onClick:async()=>{if(null!=a)try{Cr.$Z("Importing...")
const e=await(0,Nr.tU)(a)
rt.ZP.success(`Imported ${e.length} monomers`);(0,j.ZP)("/monomers")}catch(e){rt.ZP.notifyError(e)}finally{Cr.Cp()}},dataTestAttrs:{component:"MonomerCreateFromCSVPage",element:"createButton"}}),h=d.createElement("div",{className:(0,C.iv)(Or.fileSection)},d.createElement("div",{className:(0,C.iv)(Or.bannerContainer)},d.createElement(qe.ZP,{bannerType:qe.ct.INFO,text:'The CSV file must define name, symbol, "smiles", and naturalAnalog" columns. It can also include an optional  "customMolecularWeight" column.',supportingInfo:"Acceptable natural analog values include IUPAC bases, r, and p.",action:{actionType:qe.J7.CUSTOM,actionText:"Download CSV template",actionOnClick:()=>{(0,T.gG)(Ir.bk)}}})),d.createElement("div",{className:(0,C.iv)(Or.fileChooserContainer)},null==o?d.createElement("div",{className:(0,C.iv)(Or.flex1,Or.fileChooser)},d.createElement(Ar.Z,{onSelectFiles:async e=>{l(e)
s(!0)
const t=await Rr.ws(e)
if(t)try{i(t)
const a=await(0,Nr.iT)(e.name,t)
n(a);(e=>{if(null==e)return
const t=[]
for(const[n,a]of e.entries()){if(a.isValid)continue
const e=[]
for(const t of Object.values(a.errors))null!=t&&e.push({row:n,errorCode:fr.Ol.OTHER_ERROR,errorMessage:t})
0===e.length&&e.push({row:n,errorCode:fr.Ol.OTHER_ERROR,errorMessage:"Row is missing at least one required field value."})
t.push(...e)}u({...fr.$M,otherErrors:t})})(a.monomerValidationOutputs)}catch(e){ft.d0(e)&&rt.ZP.notifyError(e)}finally{s(!1)}},multiple:!1})):d.createElement("div",{className:(0,C.iv)(Or.flex1)},d.createElement(yr.Z,null,d.createElement(_r.Z,{file:o,onRequestRemove:()=>{l(null)}}))))),E=d.createElement("div",null,null==o?null:r?d.createElement(H.b,null):null!=(null==t?void 0:t.csvFormattingValidationError)?d.createElement(qe.ZP,{bannerType:qe.ct.ERROR,text:t.csvFormattingValidationError}):d.createElement(gr.Z,{spreadsheetType:gr.u.SPREADSHEET,resolvableErrorStatuses:{},errorData:c}))
return d.createElement("div",{className:(0,C.iv)(Or.pageContainer),...(0,g.Z)({component:"MonomerCreateFromCSVPage",element:"root"})},d.createElement(MonomerConfigurationPageContainer,{methodTitle:"Upload CSV"}),d.createElement("div",{className:(0,C.iv)(Or.middleSection)},h,d.createElement("span",{className:(0,C.iv)(Or.uploadReviewText)},"Upload review"),d.createElement("span",{className:(0,C.iv)(Or.subtext)},"Review spreadsheet interpretation and errors"),E),d.createElement("div",{className:(0,C.iv)(Or.submitBar)},d.createElement("div",{className:(0,C.iv)(Or.buttonsContainer)},d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,onClick:()=>{(0,j.ZP)("/monomers")},size:O.qE.MEDIUM,text:"Cancel"}),p)))}const Or=C.mM.create({pageContainer:{display:"flex",flexDirection:"column",height:"100%",overflowY:"scroll"},submitBar:{flex:"0 0 auto",boxSizing:"border-box",padding:16,gap:10,boxShadow:"0px -2px 4px rgba(92, 124, 131, 0.1)"},buttonsContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},middleSection:{marginLeft:40,marginRight:40,flex:1,flexDirection:"column",display:"flex"},uploadReviewText:{...ji.gt,color:b.Rl,marginBottom:4},subtext:{...ji.cf,color:b.pp,marginBottom:16},columnSubtext:{...ji.cf,color:b.TG},fileSection:{display:"flex",flexDirection:"column",marginBottom:4},fileChooserContainer:{maxWidth:450,display:"flex",minHeight:100,alignItems:"center"},flex1:{flex:1},fileChooser:{marginLeft:-10},bannerContainer:{maxWidth:1050}})
var br=n(778223),vr=n(158716),Pr=n(63573),Lr=n(849109),Dr=n(818382)
const Mr=ot.Ps`
  query SmilesChemicalStructureQuery($smiles: StrictString!)
  @skipAudit
  @engComponent(name: MODIFIED_BIOLOGICS) {
    smilesChemicalStructureImage(smiles: $smiles) {
      chemicalStructureImage {
        ... on SVGNode {
          base64Svg
        }
        ... on ErrorNode {
          message
        }
      }
    }
  }
`
const wr=d.memo((function SmilesChemicalStructure({smiles:e,className:t,svgClassName:n}){return d.createElement(nt.ZP,{query:Mr,renderLoading:()=>d.createElement(H.b,null),renderCachedDataWhenRefetching:!0,variables:{smiles:e}},(({smilesChemicalStructureImage:e})=>{const a=e.chemicalStructureImage,i="SVGNode"===a.__typename?a.base64Svg:null,r="ErrorNode"===a.__typename?a.message:null
return d.createElement("div",{className:t},null!=i&&d.createElement("img",{className:n,src:`data:image/svg+xml;base64,${i}`}),null!=r&&d.createElement("div",null,r))}))})),Fr=[{header:"Name",accessorKey:"name",flexGrow:1,isCollapsible:!1,isSortable:!0,sortKey:"name"},{header:"Symbol",accessorKey:"symbol",isCollapsible:!0,isSortable:!0,sortKey:"symbol"},{header:"Chemical structure",accessorKey:"chemicalStructureImage",flexGrow:1,isCollapsible:!0,isSortable:!1},{header:"Natural analogue",accessorKey:"naturalAnalogue",isCollapsible:!0,isSortable:!0,sortKey:"naturalAnalogue"},{header:"Monomer type",accessorKey:"monomerType",isCollapsible:!0,isSortable:!0,sortKey:"monomerType"},{header:"SMILES",accessorKey:"smiles",flexGrow:1,isCollapsible:!0,isSortable:!0,sortKey:"smiles",wrapText:!0}]
function MonomerLibraryHELMPage({viewOnly:e=!1}){const[t,n]=(0,d.useState)([]),[a,i]=(0,d.useState)([]),[r,s]=(0,d.useState)("");(0,d.useEffect)((()=>{(async()=>{const e=await Dr.hc.fetch()
n(e.filter((e=>"RNA"===e.polymerType)))})()}),[])
const getMonInfo=e=>`${e.monomerType.toLowerCase()}-${e.symbol}`,o=a.map((e=>{var n
const r=null===(n=t.find((t=>getMonInfo(t)===e)))||void 0===n?void 0:n.name
return d.createElement(br.ZP,{className:(0,C.iv)(kr.monomerChip),key:e,size:br.TK.SMALL,text:r,onRemove:()=>{i(a.filter((t=>t!==e)))}})}))
return d.createElement("div",{className:(0,C.iv)(kr.pageContainer),...(0,g.Z)({component:"MonomerLibraryHELMPage",element:"root"})},d.createElement(MonomerConfigurationPageContainer,{methodTitle:"Search HELM Library",purpose:e?pr.VIEW:pr.CREATE}),d.createElement("div",{className:(0,C.iv)(kr.selectedMonomersSection)},d.createElement("span",{className:(0,C.iv)(kr.boldHeader)},"Selected monomers"),d.createElement("div",{className:(0,C.iv)(kr.selectedMonomerChips)},a.length>0?d.createElement(vr.gK,{chips:o,chipSize:br.TK.SMALL,maxChips:8,isVertical:!1}):d.createElement("span",{className:(0,C.iv)(kr.noneSelectedText)},"None selected"))),d.createElement(nt.ZP,{query:Ir.V,renderLoading:()=>d.createElement(H.b,null),renderCachedDataWhenRefetching:!0},(({monomers:n},{refetch:o})=>{const l=new Set(n.map((e=>getMonInfo(e)))),c=t.filter((e=>""===r||e.name.toLowerCase().includes(r.toLowerCase())||e.symbol.toLowerCase().includes(r.toLowerCase()))).map((e=>{const t=l.has(getMonInfo(e))
return{id:getMonInfo(e),isSelected:a.includes(getMonInfo(e)),displayAsSelected:t,isSelectorDisabled:t,tooltipText:t?"Already added to the monomer library":void 0,data:{name:e.name,symbol:e.symbol,naturalAnalogue:e.naturalAnalog,monomerType:e.monomerType,smiles:e.smiles,chemicalStructureImage:d.createElement(wr,{smiles:e.smiles,className:(0,C.iv)(kr.chemicalStructureContainer),svgClassName:(0,C.iv)(kr.chemicalStructureSvg)})}}})),u=d.createElement(Lr.ZP,{className:(0,C.iv)(kr.table),canResizeColumns:!0,columns:Fr,getRowContentHeight:()=>150,emptyTableText:"No monomers were found.",getSortValue:(e,t)=>e.data[t],initialRows:c,initialSort:[{sortKey:"name"}],tableKey:Pr.Uw.MONOMER_LISTING_TABLE,calcLeftPadding:()=>40,matchParentHeight:!0,rowSelectionMode:Pr.rT.MULTIPLE,onRowsSelect:(e,t)=>{const n=e.map((e=>getMonInfo(e.data)))
let r
if(t){const e=n.filter((e=>!a.includes(e)&&!l.has(e)))
r=a.concat(e)}else r=a.filter((e=>!n.includes(e)))
i(r)},onRowClick:e=>{l.has(getMonInfo(e.data))||(a.includes(getMonInfo(e.data))?i(a.filter((t=>t!==getMonInfo(e.data)))):i(a.concat(getMonInfo(e.data))))},isCompact:!0})
return d.createElement(d.Fragment,null,d.createElement("div",{className:(0,C.iv)(kr.tableSection)},d.createElement("div",{className:(0,C.iv)(kr.tableHeaderSection)},d.createElement("span",{className:(0,C.iv)(kr.boldHeader)},"HELM Library"),d.createElement(Ln.ZP,{className:(0,C.iv)(kr.searchBar),clearType:Ln.Nl.X,onChange:e=>{s(e.target.value)},onEscape:()=>{s("")},placeholder:"Search by symbol or name",value:r})),t.length>0?u:d.createElement(H.b,null)),d.createElement("div",{className:(0,C.iv)(kr.submitBar)},d.createElement("div",{className:(0,C.iv)(kr.buttonsContainer)},d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,onClick:()=>{(0,j.ZP)("/monomers")},size:O.qE.MEDIUM,text:"Cancel"}),d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,text:e?`Copy ${a.length} symbols`:`Add (${a.length}) monomers`,size:O.qE.MEDIUM,disabled:0===a.length,onClick:e?()=>{const e=a.map((e=>{const n=t.find((t=>getMonInfo(t)===e));(0,ie.hu)(null!=n,`Could not find HELM library monomer for ${e}`)
return n.symbol}));(0,on.Z)(e.join(", "),{showToastOnSuccess:!0,toastText:`Copied (${e.length}) monomer symbols to clipboard`})}:async()=>{const e=a.map((e=>{const n=t.find((t=>getMonInfo(t)===e));(0,ie.hu)(null!=n,`Could not find HELM library monomer for ${e}`)
const{name:a,symbol:i,naturalAnalog:r,smiles:s}=n
return{name:a,symbol:i,naturalAnalogue:r,smiles:s}}))
try{Cr.$Z("Creating...")
const t=await(0,Nr.Qe)(e)
await o()
rt.ZP.success(`Imported (${t.length}) monomers into library`);(0,j.ZP)("/monomers")}catch(e){rt.ZP.notifyError(e)}finally{Cr.Cp()}},dataTestAttrs:{component:"MonomerLibraryHELMPage",element:"addMonomersButton"}}))))})))}const kr=C.mM.create({chemicalStructureContainer:{height:"150px",textAlign:"center"},chemicalStructureSvg:{width:"100%",height:"100%"},pageContainer:{display:"flex",flexDirection:"column",height:"100%"},table:{height:"100%"},tableSection:{flex:1,display:"flex",flexDirection:"column",borderTop:`1px solid ${b.tN}`},selectedMonomersSection:{flex:"0 0 auto",marginLeft:40,maxHeight:120,minHeight:65},selectedMonomerChips:{overflowY:"auto",maxHeight:85,marginTop:8},monomerChip:{marginBottom:8},boldHeader:{...ji.cf,fontWeight:"bold"},tableHeaderSection:{margin:"17px 0px 23px 40px"},submitBar:{flex:"0 0 auto",boxSizing:"border-box",padding:16,gap:10},cancelButton:{color:b.hM,":hover":{cursor:"pointer",color:b.JF}},buttonsContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},searchBar:{width:350,marginTop:4},noneSelectedText:{...ji.cf,color:b.TG,marginTop:8}})
function MonomerStructureAndWeightConfigurationPane({smilesInput:e,customMolecularWeight:t,onChangeCustomMolecularWeight:n,calculatedMolecularWeight:a,validationErrors:i,editingMolecularWeight:r,onChangeEditingMolecularWeight:s,structureImage:o,hasCustomWeightError:l,onChangeHasCustomWeightError:c}){var u
const updateHasCustomWeightError=e=>{if(null==e)c(!1)
else if(null!=i.molecularWeight)c(!0)
else{const t=(0,St.p3)(e)
c(null==t||t<0)}},m=d.createElement("div",{className:(0,C.iv)(Ur.molecularWeightSection)},d.createElement("span",null,"Molecular weight: "),d.createElement("div",{className:(0,C.iv)(Ur.molecularWeightInputRightSection)},d.createElement(k.Z,{className:(0,C.iv)(Ur.molecularWeightInput),onChange:e=>{n(e.target.value)
updateHasCustomWeightError(e.target.value)},value:null!==(u=null!=t?t:null==a?void 0:a.toFixed(3))&&void 0!==u?u:"",hasError:l,disabled:!r,dataTestAttrs:{component:"MonomerStructureAndWeightConfigurationPane",element:"weightField"}}),r?d.createElement("div",{className:(0,C.iv)(Ur.molecularWeightButtons)},d.createElement(ve.ZP,{title:"Reset to calculated weight"},d.createElement(P.Z,{className:(0,C.iv)(Ur.iconButtonCursor),icon:"close",onClick:()=>{n(null)
updateHasCustomWeightError(null)
s(!1)}})),d.createElement(ve.ZP,{title:"Save custom weight"},d.createElement(P.Z,{className:(0,C.iv)(Ur.iconButtonBlueLight),icon:"check",onClick:()=>{s(!1)},dataTestAttrs:{component:"MonomerStructureAndWeightConfigurationPane",element:"saveWeightButton"}}))):d.createElement("div",null,d.createElement("span",{className:(0,C.iv)(Ur.editMolecularWeight),onClick:()=>{s(!0)},...(0,g.Z)({component:"MonomerStructureAndWeightConfigurationPane",element:"editWeightButton"})},"Edit"))))
return d.createElement("div",{className:(0,C.iv)(Ur.chemicalStructurePaneOuter)},d.createElement("div",{className:(0,C.iv)(Ur.chemicalStructurePaneInner)},d.createElement("div",{className:(0,C.iv)(Ur.chemicalStructureHeader)},d.createElement("span",null,"Chemical structure")),d.createElement("div",{className:(0,C.iv)(Ur.bottomBorder)}),m,""!==e?d.createElement("div",{className:(0,C.iv)(Ur.chemicalStructureContainer)},null!=o&&d.createElement("img",{className:(0,C.iv)(Ur.chemicalStructureSvg),src:`data:image/svg+xml;base64,${o}`}),null!=i.structureImage&&d.createElement("div",null,i.structureImage)):null))}const Ur=C.mM.create({chemicalStructurePaneOuter:{width:"50%",display:"flex",flexDirection:"column",background:b.bs,padding:8},chemicalStructurePaneInner:{display:"flex",flexDirection:"column",boxShadow:"0px 2px 4px rgba(92, 124, 131, 0.2)",background:b.Cj,borderRadius:4,height:"100%"},chemicalStructureContainer:{flex:1,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:b.hM},chemicalStructureSvg:{height:"70%",width:"70%"},chemicalStructureHeader:{flex:"0 0 auto",...ji.gt,fontWeight:"bold",margin:12},bottomBorder:{borderBottom:`1px solid ${b.tN}`,width:"100%"},molecularWeightSection:{flex:"0 0 auto",marginLeft:12,marginTop:8,display:"flex",gap:12,flexDirection:"row",alignItems:"center",...ji.gt},molecularWeightInputRightSection:{display:"flex",gap:12,alignItems:"center"},molecularWeightButtons:{display:"flex",gap:12,flexDirection:"row",alignItems:"center"},editMolecularWeight:{...ji.cf,color:b.t0,cursor:"pointer"},iconButtonCursor:{cursor:"pointer",width:10,height:10},iconButtonBlueLight:{cursor:"pointer",color:b.t0},molecularWeightInput:{maxWidth:75,display:"flex",justifyContent:"center",...ji.cf}})
var xr=n(97737),Br=n(610789),Zr=n(297020)
function MonomerConfigureAttachmentPointsSection({attachmentPointsInput:e,onChangeAttachmentPointsInput:t,calculatedAttachmentPoints:n,allowNonWildcardCapGroupSelection:a}){const textFieldWithLabel=(e,t)=>d.createElement("div",null,d.createElement("div",{className:(0,C.iv)(qr.textFieldSubheader)},d.createElement("span",null,t)),d.createElement("div",{className:(0,C.iv)(qr.grayTextField)},d.createElement("span",null,e)))
return d.createElement("div",null,null!=n&&n.length>0?n.map(((n,i)=>{let r=null
n===Ir.Lt?null!=(null==e?void 0:e[i])&&(r=e[i]):r=n
return d.createElement("div",{className:(0,C.iv)(qr.attachmentPointInputs),key:i},d.createElement("div",{className:(0,C.iv)(qr.flex1)},textFieldWithLabel(`R${i+1}`,"Attachment point")),d.createElement("div",{className:(0,C.iv)(qr.flex1)},d.createElement("div",{className:(0,C.iv)(qr.textFieldSubheader)},d.createElement("span",null,"Capping group")),d.createElement(w.ZP,{alwaysDropDown:!0,displayName:null!=r?r:"Select group",disabled:n!==Ir.Lt&&!a,menu:d.createElement(U.ZP,{value:r,width:Zr.zL.FULL},Object.values(Rt.tb).map((n=>d.createElement(x.Z,{key:n,value:n,isSelected:r===n,onSelect:n=>{t(null!=e?[...e.slice(0,i),n,...e.slice(i+1)]:[n])}},n)))),dataTestAttrs:{component:"MonomerConfigureAttachmentPointsSection",element:"attachmentPointDropdown"}})))})):d.createElement("div",{className:(0,C.iv)(qr.attachmentPointInputs)},d.createElement("div",{className:(0,C.iv)(qr.flex1)},textFieldWithLabel("","Attachment point")),d.createElement("div",{className:(0,C.iv)(qr.flex1)},d.createElement("div",{className:(0,C.iv)(qr.textFieldSubheader)},d.createElement("span",null,"Capping group")),d.createElement(w.ZP,{displayName:"Select group",disabled:!0,menu:d.createElement("div",null)}))))}const qr=C.mM.create({attachmentPointInputs:{display:"flex",flexDirection:"row",gap:13,marginBottom:16},textFieldSubheader:{fontWeight:"bold",marginBottom:4,...ji.cf},flex1:{flex:1},grayTextField:{padding:"3px 10px",background:Br.W,border:Br.S,boxSizing:"border-box",borderRadius:"4px",height:28,...ji.cf}})
var Gr=n(134749)
function MonomerManualCreationBuildPane({smilesInput:e,onChangeSmilesInput:t,canonicalSmiles:n,attachmentPointsInput:a,onChangeAttachmentPointsInput:i,calculatedAttachmentPoints:r,validationErrors:s}){var o
const l=null!==(o=s.smiles)&&void 0!==o?o:s.attachmentPoints!==Ir.Ez?s.attachmentPoints:null
return d.createElement("div",{className:(0,C.iv)(Vr.paneContainer)},d.createElement("div",{className:(0,C.iv)(Vr.inputSmilesHeader)},d.createElement("span",null,"Input SMILES")),d.createElement(k.Z,{className:(0,C.iv)(Vr.inputSmilesField),value:e,onChange:e=>{t(e.target.value)},placeholder:"Enter SMILES notation",autoFocus:!0,hasError:null!=l,error:null!=l?{message:l,style:Gr.P1.INFO}:null,dataTestAttrs:{component:"MonomerManualCreationBuildPane",element:"smilesInput"}}),d.createElement("div",null,d.createElement("div",{className:(0,C.iv)(Vr.textFieldSubheader)},d.createElement("span",null,"Canonical SMILES")),d.createElement("div",{className:(0,C.iv)(Vr.grayTextFieldContainer)},d.createElement("span",{className:(0,C.iv)(Vr.grayTextField)},n))),d.createElement("div",null,d.createElement("div",{className:(0,C.iv)(Vr.attachmentPointsHeader)},d.createElement("span",null,"Configure attachment points")),d.createElement("div",{className:(0,C.iv)(Vr.attachmentPointsSubheader)},d.createElement("span",null,"Assign capping groups for each attachment point")),d.createElement(MonomerConfigureAttachmentPointsSection,{attachmentPointsInput:a,onChangeAttachmentPointsInput:i,calculatedAttachmentPoints:r})))}const Vr=C.mM.create({paneContainer:{marginLeft:40,marginRight:40},inputSmilesHeader:{...ji.dY,marginTop:18},inputSmilesField:{marginBottom:12},textFieldSubheader:{fontWeight:"bold",marginBottom:4,...ji.cf},flex1:{flex:1},grayTextFieldContainer:{display:"flex"},grayTextField:{...ji.cf,padding:"3px 10px",background:Br.W,border:Br.S,boxSizing:"border-box",borderRadius:"4px",overflowWrap:"anywhere",minHeight:28,width:"100%"},attachmentPointsHeader:{...ji.dY,marginTop:32,marginBottom:4},attachmentPointsSubheader:{...ji.cf,color:b.pp,marginBottom:16}})
var Hr=n(198210),Wr=n(226576),Yr=n(364172)
const $r={[Ir.Zp.SUGAR]:e=>d.createElement(Yr.Z,{cx:8,cy:8,radius:6,stroke:e}),[Ir.Zp.BASE]:e=>d.createElement(Wr.Z,{cx:8,cy:8,radius:7,fill:e})}
function MonomerColorMenu({selectedColor:e,nucleotideComponent:t,onSelectColor:n,allUsedColors:a,onSetIsOpen:i}){const r=t===Ir.Zp.BASE?Ir.oJ:Ir.rZ,[s,o]=r.reduce((([e,t],n)=>a.includes(n.toUpperCase())?[[...e,n],t]:[e,[...t,n]]),[[],[]]),[l,c]=(0,d.useState)(!r.includes(e.toUpperCase())),u=t===Ir.Zp.BASE?Ir.Qw:Ir.K4,m=[{header:"Recommended colors",colors:o},{header:"Recently used",colors:s}]
return d.createElement("div",{className:`menu ${(0,C.iv)(Kr.menuContainer)}`},[...m.map((({header:t,colors:a})=>a.length>0?d.createElement("div",{key:t,className:(0,C.iv)(Kr.colorSection)},d.createElement("p",{className:(0,C.iv)(Kr.colorHeader)},t),d.createElement("ul",{className:"menu-body"},a.map((t=>d.createElement("li",{key:t,className:`${(0,C.iv)(Kr.colorOption)} ${t.toUpperCase()===e.toUpperCase()&&(0,C.iv)(Kr.activeOption)}`,style:{backgroundColor:t},onClick:()=>{n(t)
i(!1)}}))))):null)),d.createElement("div",{key:"Custom",className:(0,C.iv)(Kr.customColorSection)},d.createElement(dr.Z,{id:"use-custom-color-checkbox",label:"Use custom color",checked:l,onChange:t=>{if(t.target.checked)c(!0)
else{r.includes(e)||n(u)
c(!1)}},labelStyle:Gr.gF.SUBLABEL,className:(0,C.iv)(Kr.customColorCheckbox)}),l&&d.createElement("input",{type:"Color",value:e,className:(0,C.iv)(Kr.colorInput),onChange:e=>{n(e.target.value)}}))])}function MonomerColorDropdown({selectedColor:e,nucleotideComponent:t,monomerId:n,onSelectColor:a,isDisabled:i,allUsedColors:r}){const[s,o]=(0,d.useState)(void 0)
return d.createElement(Qi.ZP,{key:n,menu:d.createElement(MonomerColorMenu,{selectedColor:e,nucleotideComponent:t,onSelectColor:a,allUsedColors:r,onSetIsOpen:o}),isOpen:s,closeOnInsideClick:!1,onToggle:o,alwaysDropUp:!0},d.createElement(O.Co,{hideDropdownCaret:!1,isDropdown:!0,size:O.qE.SMALL,buttonStyle:O.ZJ.TERTIARY_WHITE,fullWidth:!1,icon:d.createElement("svg",{className:(0,C.iv)(Kr.visualSvg),viewBox:"0 0 16 16"},$r[t](e)),disabled:i,dataTestAttrs:{component:"MonomerColorDropdown",element:"dropdownButton"}}))}const Kr=C.mM.create({visualSvg:{width:"14px",height:"14px"},menuContainer:{width:"200px",padding:"10px 12px"},colorSection:{":not(:first-child)":{marginTop:"8px"}},colorHeader:{...ji.E0,color:b.pp},colorOption:{width:"15px",height:"15px",display:"inline-block",marginRight:"3px",cursor:"pointer"},activeOption:{boxShadow:"inset 0px 0px 0px 1px black, inset 0px 0px 0px 2px white"},colorInput:{padding:0,margin:0,width:17,height:21,minHeight:21,marginTop:2,border:"none",cursor:"pointer"},customColorCheckbox:{marginRight:5},customColorSection:{":not(:first-child)":{marginTop:"8px"},display:"flex",alignItems:"center"}})
var zr=n(737376)
function MonomerVisualSymbolDropdown({selectedSymbol:e,monomerId:t,onSelectSymbol:n,isDisabled:a}){return d.createElement(Qi.ZP,{key:t,menu:d.createElement(U.ZP,{height:Zr.Bl.MEDIUM,width:Zr.zL.MEDIUM,scrollable:!0},Ir.D5.map((t=>d.createElement(x.Z,{key:t,value:t,isSelected:t===e,onSelect:n},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"modifiedPhosphate",width:"10",height:"10"},d.createElement(zr.ZP,{size:10,offsetX:0,offsetY:0,symbol:t})),d.createElement("span",{className:(0,C.iv)(Qr.symbolOption)},Ir.fP[t])))))},d.createElement(O.Co,{hideDropdownCaret:!1,isDropdown:!0,size:O.qE.SMALL,buttonStyle:O.ZJ.TERTIARY_WHITE,disabled:a,icon:d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"modifiedPhosphate",width:"14",height:"14"},d.createElement(zr.ZP,{size:10,offsetX:0,offsetY:0,symbol:e})),dataTestAttrs:{component:"MonomerVisualSymbolDropdown",element:"dropdownButton"}}))}const Qr=C.mM.create({symbolOption:{marginLeft:"8px"}})
function MonomerManualCreationDefinePane({name:e,onChangeName:t,symbol:n,onChangeSymbol:a,visualSymbol:i,onChangeVisualSymbol:r,visualColor:s,onChangeVisualColor:o,naturalAnalogue:l,onChangeNaturalAnalogue:c,validationErrors:u}){const m=Ir.lE[l],p=d.createElement(nt.ZP,{query:Ir.V,renderLoading:()=>d.createElement(H.b,null),renderCachedDataWhenRefetching:!0},(({monomers:e})=>{const t=Array.from(new Set(e.filter((e=>![Ir.Qw,Ir.K4,null].includes(e.color))).map((e=>e.color))))
return m===Ir.Zp.PHOSPHATE?d.createElement(MonomerVisualSymbolDropdown,{selectedSymbol:i,onSelectSymbol:r}):d.createElement(MonomerColorDropdown,{selectedColor:s,nucleotideComponent:m,onSelectColor:o,allUsedColors:t})})),[h,E]=(0,d.useState)(Ir.Ws.includes(l)),S=Ir.qC[Ir.AN[l]],T=h?d.createElement(Hr.Z,{size:O.qE.MEDIUM,options:Ir.Ws.map((e=>({id:e,buttonProps:{text:(0,Dr.lB)(e)}}))),selection:l,onChangeSelection:c}):d.createElement(Hr.Z,{size:O.qE.MEDIUM,options:Ir.xn.map((e=>({id:e,buttonProps:{text:(0,Dr.lB)(e)}}))),selection:l,onChangeSelection:c}),textFieldWithLabel=(e,t)=>d.createElement("div",{className:(0,C.iv)(jr.flex1)},d.createElement("div",{className:(0,C.iv)(jr.textFieldSubheader)},d.createElement("span",null,t)),d.createElement("div",{className:(0,C.iv)(jr.grayTextField)},d.createElement("span",null,e)))
return d.createElement("div",{className:(0,C.iv)(jr.paneContainer)},d.createElement("div",{className:(0,C.iv)(jr.header)},d.createElement("span",null,"Define new monomer settings")),d.createElement(k.Z,{className:(0,C.iv)(jr.marginBottom16),value:e,onChange:e=>{t(e.target.value)},label:"Name",labelStyle:Gr.WS.LABEL,isRequired:!0,autoFocus:!0,dataTestAttrs:{component:"MonomerManualCreationDefinePane",element:"nameInput"}}),d.createElement("div",{className:(0,C.iv)(jr.textFieldSubheader)},d.createElement("span",null,"Natural analog")),d.createElement(Hr.Z,{size:O.qE.MEDIUM,options:["Common","Degenerate"].map((e=>({id:e,buttonProps:{text:e}}))),selection:h?"Common":"Degenerate",onChangeSelection:e=>{E("Common"===e)}}),d.createElement("div",{className:(0,C.iv)(jr.naturalAnaloguesToggle)},T),d.createElement("div",{className:(0,C.iv)(jr.horizontalFieldsSection,jr.marginBottom16)},d.createElement(k.Z,{className:(0,C.iv)(jr.flex1),value:n,onChange:e=>{a(e.target.value)},label:"Symbol",labelStyle:Gr.WS.LABEL,isRequired:!0,hasError:null!=u.symbol,error:null!=u.symbol?{message:u.symbol,style:Gr.P1.INFO}:null,dataTestAttrs:{component:"MonomerManualCreationDefinePane",element:"symbolInput"}}),d.createElement("div",{className:(0,C.iv)(jr.flex1)},d.createElement("div",{className:(0,C.iv)(jr.visualSubheader,jr.flex1)},d.createElement("span",null,"Visual")),d.createElement("div",{className:(0,C.iv)(jr.flex1)},p))),d.createElement("div",{className:(0,C.iv)(jr.horizontalFieldsSection)},textFieldWithLabel(S,"Monomer type"),textFieldWithLabel("RNA","Polymer type")))}const jr=C.mM.create({paneContainer:{marginLeft:40,marginRight:40},header:{...ji.dY,marginTop:18,marginBottom:12},horizontalFieldsSection:{display:"flex",flexDirection:"row",gap:12,alignItems:"flex-start"},marginBottom16:{marginBottom:16},textFieldSubheader:{fontWeight:"bold",marginBottom:4,...ji.cf},visualSubheader:{fontWeight:"bold",marginBottom:3,...ji.cf},flex1:{flex:1},grayTextField:{padding:"3px 10px",background:Br.W,border:Br.S,boxSizing:"border-box",borderRadius:"4px",height:28,...ji.cf},naturalAnaloguesToggle:{marginTop:16,marginBottom:16},fullWidth:{width:"100%"}})
var Jr
!function(e){e.BUILD="BUILD"
e.DEFINE="DEFINE"}(Jr||(Jr={}))
function MonomerManualCreationPage(){const[e,t]=(0,d.useState)(Jr.BUILD),[n,a]=(0,d.useState)(!1),[i,r]=(0,d.useState)(!1),[s,o]=(0,d.useState)(""),[l,c]=(0,d.useState)(null),[u,m]=(0,d.useState)(null),[p,h]=(0,d.useState)(null),[E,S]=(0,d.useState)(!1),[T,f]=(0,d.useState)(null),[I,A]=(0,d.useState)([]),[y,_]=(0,d.useState)(Rt.E$.DIAMOND_FILLED),[R,N]=(0,d.useState)(Rt.TF.R_LOWER),[b,v]=(0,d.useState)(Ir.K4),[P,L]=(0,d.useState)(""),[D,M]=(0,d.useState)(""),[w,F]=(0,d.useState)(null),[k,U]=(0,d.useState)({smiles:null,symbol:null,attachmentPoints:null,molecularWeight:null,structureImage:null,naturalAnalogue:null,customMolecularWeight:null}),[x,B]=(0,d.useState)(!1);(0,d.useEffect)((()=>{const e={smiles:s};(async()=>{var t,n
const a=await(0,Nr.zt)([e]),{properties:i}=a[0]
A(i.attachmentPoints)
f(null!==(n=null===(t=i.attachmentPoints)||void 0===t?void 0:t.map((e=>e!==Ir.Lt?e:null)))&&void 0!==n?n:null)})()}),[s]);(0,d.useEffect)((()=>{const e={name:D,symbol:P,naturalAnalogue:(0,Dr.lB)(R),smiles:s,capGroups:T,customMolecularWeight:null!=u?(0,St.p3)(u):null};(async()=>{const t=await(0,Nr.zt)([e]),{properties:n,errors:i,isValid:s}=t[0]
c(n.canonicalSmiles)
h(n.molecularWeight)
F(n.structureImage)
U(i)
const o=i.smiles||i.attachmentPoints
a(!o)
r(s)})()}),[D,P,R,s,T,u]);(0,d.useEffect)((()=>{const e=Ir.lE[R]
v(e===Ir.Zp.SUGAR?Ir.K4:Ir.Qw)}),[R])
const Z={[Jr.BUILD]:n?xr.cV.DONE:xr.cV.UNVISITED,[Jr.DEFINE]:i?xr.cV.DONE:xr.cV.UNVISITED},q=d.createElement("div",null,d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,text:"Next: Define",size:O.qE.MEDIUM,disabled:!n,onClick:()=>{t(Jr.DEFINE)},dataTestAttrs:{component:"MonomerManualCreationPage",element:"nextButton"}})),G=d.createElement("div",{className:(0,C.iv)(Xr.definePaneButtons)},d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,text:"Back",size:O.qE.MEDIUM,onClick:()=>{t(Jr.BUILD)}}),d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,text:"Add new monomer",size:O.qE.MEDIUM,disabled:!i||E||x,onClick:async()=>{(0,ie.hu)([D,P,R].every((e=>null!=e)),"Unexpected null input fields received for monomer creation.")
const e=Ir.lE[R],t={name:D,symbol:P,naturalAnalogue:(0,Dr.lB)(R),smiles:null!=l?l:"",visualSymbol:e===Ir.Zp.PHOSPHATE?y:void 0,color:e!==Ir.Zp.PHOSPHATE?b:void 0,customMolecularWeight:null!=u?(0,St.p3)(u):null}
try{Cr.$Z("Creating...")
const e=await(0,Nr.Qe)([t])
rt.ZP.success(`Created monomer ${e[0].symbol}`);(0,j.ZP)("/monomers")}catch(e){rt.ZP.notifyError(e)}finally{Cr.Cp()}},dataTestAttrs:{component:"MonomerManualCreationPage",element:"addButton"}})),V=e===Jr.BUILD?q:G,H=[{key:Jr.BUILD,title:"Build"},{key:Jr.DEFINE,title:"Define"}]
return d.createElement("div",{className:(0,C.iv)(Xr.pageContainer),...(0,g.Z)({component:"MonomerManualCreationPage",element:"root"})},d.createElement(MonomerConfigurationPageContainer,{methodTitle:"Create new monomer"}),d.createElement("div",{className:(0,C.iv)(Xr.stepNav)},d.createElement(xr.ZP,{steps:H,statusByStep:Z,currentStepKey:e,onUpdateCurrentStep:()=>{}})),d.createElement("div",{className:(0,C.iv)(Xr.middleSectionContainer)},d.createElement("div",{className:(0,C.iv)(Xr.monomerPropertiesPane)},e===Jr.BUILD?d.createElement(MonomerManualCreationBuildPane,{smilesInput:s,onChangeSmilesInput:o,canonicalSmiles:l,attachmentPointsInput:T,onChangeAttachmentPointsInput:f,calculatedAttachmentPoints:I,validationErrors:k}):d.createElement(MonomerManualCreationDefinePane,{name:D,onChangeName:M,symbol:P,onChangeSymbol:L,visualSymbol:y,onChangeVisualSymbol:_,visualColor:b,onChangeVisualColor:v,naturalAnalogue:R,onChangeNaturalAnalogue:N,validationErrors:k})),d.createElement(MonomerStructureAndWeightConfigurationPane,{smilesInput:s,customMolecularWeight:u,calculatedMolecularWeight:p,onChangeCustomMolecularWeight:m,validationErrors:k,editingMolecularWeight:E,onChangeEditingMolecularWeight:S,structureImage:w,hasCustomWeightError:x,onChangeHasCustomWeightError:B})),d.createElement("div",{className:(0,C.iv)(Xr.submitBar)},d.createElement("div",{className:(0,C.iv)(Xr.buttonsContainer)},d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,onClick:()=>{(0,j.ZP)("/monomers")},size:O.qE.MEDIUM,text:"Cancel"}),V)))}const Xr=C.mM.create({pageContainer:{display:"flex",flexDirection:"column",height:"100%",overflowY:"scroll"},stepNav:{paddingLeft:40,paddingBottom:20,borderBottom:`1px solid ${b.tN}`,flex:"0 0 auto"},middleSectionContainer:{display:"flex",flexDirection:"row",flex:1},monomerPropertiesPane:{width:"50%",borderRight:`1px solid ${b.tN}`},submitBar:{flex:"0 0 auto",boxSizing:"border-box",padding:16,gap:10,boxShadow:"0px -2px 4px rgba(92, 124, 131, 0.1)"},buttonsContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},definePaneButtons:{display:"flex",gap:12}})
function MonomerManualEditPageContents({monomerId:e,initialName:t,initialSmilesInput:n,initialCustomMolecularWeight:a,initialSymbol:i,naturalAnalogue:r}){var s,o
const[l,c]=(0,d.useState)(n),[u,m]=(0,d.useState)(null),[p,h]=(0,d.useState)(null!==(s=null==a?void 0:a.toFixed(3))&&void 0!==s?s:null),[E,S]=(0,d.useState)(null),[T,f]=(0,d.useState)(!1),[I,A]=(0,d.useState)(null),[y,_]=(0,d.useState)([]),[R,N]=(0,d.useState)(t),[b,v]=(0,d.useState)(i),[P,L]=(0,d.useState)(null),[D,M]=(0,d.useState)({smiles:null,symbol:null,attachmentPoints:null,molecularWeight:null,structureImage:null,naturalAnalogue:null,customMolecularWeight:null}),[w,F]=(0,d.useState)(!1),[U,x]=(0,d.useState)(!0),[B,Z]=(0,d.useState)(!1),[q,G]=(0,d.useState)(!1),[V,H]=(0,d.useState)(!1),W=R!==t||l!==n||p!==a||b!==i,Y=(0,d.useCallback)((async(e,t)=>{var n,a
Z(!0)
const r=e.symbol===i,s=await(0,Nr.zt)([e],r);(0,ie.hu)(1===s.length,"Expected exactly one monomer validation output")
const{properties:o,errors:l,isValid:d}=s[0]
m(o.canonicalSmiles)
_(o.attachmentPoints)
A(null!==(a=null===(n=o.attachmentPoints)||void 0===n?void 0:n.map((e=>e!==Ir.Lt?e:null)))&&void 0!==a?a:null)
S(o.molecularWeight)
L(o.structureImage)
M(l)
F(d)
t&&null!=o.canonicalSmiles&&c(o.canonicalSmiles)
Z(!1)}),[i]);(0,d.useEffect)((()=>{const e={name:t,smiles:n,customMolecularWeight:a,symbol:i,naturalAnalogue:(0,Dr.lB)(r)}
Y(e,!1)}),[n,t,a,i,r,Y])
const $=null!==(o=D.smiles)&&void 0!==o?o:D.attachmentPoints
return d.createElement("div",{className:(0,C.iv)(es.pageContainer),...(0,g.Z)({component:"MonomerManualEditPage",element:"root"})},d.createElement(MonomerConfigurationPageContainer,{purpose:pr.EDIT}),d.createElement("div",{className:(0,C.iv)(es.middleSectionContainer)},d.createElement("div",{className:(0,C.iv)(es.monomerPropertiesPane)},d.createElement("div",{className:(0,C.iv)(es.paneContainer)},d.createElement(k.Z,{className:(0,C.iv)(es.marginBottom16),value:R,onChange:e=>{(e=>{N(e)
const t={name:e,smiles:l,capGroups:I,customMolecularWeight:null!=p?(0,St.p3)(p):null,symbol:b,naturalAnalogue:(0,Dr.lB)(r)}
Y(t,!1)})(e.target.value)},label:"Name",labelStyle:Gr.WS.LABEL,isRequired:!0,autoFocus:!0,dataTestAttrs:{component:"MonomerManualEditPage",element:"nameInput"}}),d.createElement(k.Z,{className:(0,C.iv)(es.marginBottom16),value:b,onChange:e=>{(e=>{v(e)
const t={name:R,smiles:l,capGroups:I,customMolecularWeight:null!=p?(0,St.p3)(p):null,symbol:e,naturalAnalogue:(0,Dr.lB)(r)}
Y(t,!1)})(e.target.value)},label:"Symbol",labelStyle:Gr.WS.LABEL,isRequired:!0,hasError:null!=D.symbol,error:null!=D.symbol?{message:D.symbol,style:Gr.P1.INFO}:null,dataTestAttrs:{component:"MonomerManualEditPage",element:"symbolInput"}}),d.createElement("div",{className:(0,C.iv)(es.canonicalSmiles)},d.createElement("div",{className:(0,C.iv)(es.textFieldSubheader)},d.createElement("span",null,"Canonical SMILES")),d.createElement("div",{className:(0,C.iv)(es.grayTextFieldContainer)},d.createElement("span",{className:(0,C.iv)(es.grayTextField)},u))),d.createElement("div",{className:(0,C.iv)(es.marginBottom16)},d.createElement(Hr.Z,{size:O.qE.MEDIUM,options:["Edit SMILES","Edit capping groups"].map((e=>({id:e,buttonProps:{text:e}}))),selection:U?"Edit SMILES":"Edit capping groups",onChangeSelection:e=>{x("Edit SMILES"===e)},isFullWidth:!0})),U?d.createElement(k.Z,{className:(0,C.iv)(es.inputSmilesField),value:l,onChange:e=>{(e=>{c(e)
const t={name:R,smiles:e,customMolecularWeight:null!=p?(0,St.p3)(p):null,symbol:b,naturalAnalogue:(0,Dr.lB)(r)}
Y(t,!1)})(e.target.value)},label:"SMILES",placeholder:"Enter SMILES notation",autoFocus:!0,hasError:null!=$,error:null!=$?{message:$,style:Gr.P1.INFO}:null,dataTestAttrs:{component:"MonomerManualEditPage",element:"smilesInput"}}):d.createElement(MonomerConfigureAttachmentPointsSection,{attachmentPointsInput:I,onChangeAttachmentPointsInput:e=>{const t={name:R,smiles:l,capGroups:e,customMolecularWeight:null!=p?(0,St.p3)(p):null,symbol:b,naturalAnalogue:(0,Dr.lB)(r)}
Y(t,!0)},calculatedAttachmentPoints:y,allowNonWildcardCapGroupSelection:!0}))),d.createElement(MonomerStructureAndWeightConfigurationPane,{smilesInput:l,customMolecularWeight:p,calculatedMolecularWeight:E,onChangeCustomMolecularWeight:e=>{h(e)},validationErrors:D,editingMolecularWeight:T,onChangeEditingMolecularWeight:f,structureImage:P,hasCustomWeightError:V,onChangeHasCustomWeightError:H})),d.createElement("div",{className:(0,C.iv)(es.submitBar)},d.createElement("div",{className:(0,C.iv)(es.buttonsContainer)},d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,onClick:()=>{(0,j.ZP)("/monomers")},size:O.qE.MEDIUM,text:"Cancel"}),d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,text:q?"Saving...":"Save monomer",size:O.qE.MEDIUM,disabled:q||B||!w||T||0===R.length||V||!W,onClick:async()=>{(0,ie.hu)([R,b].every((e=>null!=e)),"Unexpected null input fields received for monomer update.")
const t={name:R,smiles:null!=u?u:"",customMolecularWeight:null!=p?(0,St.p3)(p):null,symbol:b}
try{G(!0)
await(0,Nr.YZ)(e,t)
rt.ZP.success("Saved monomer");(0,j.ZP)("/monomers")}catch(e){rt.ZP.notifyError(e)}finally{G(!1)}},dataTestAttrs:{component:"MonomerManualEditPage",element:"saveMonomerButton"}}))))}function MonomerManualEditPage({monomerId:e}){return d.createElement(nt.ZP,{query:Ir.ni,renderLoading:()=>d.createElement(H.b,null),renderCachedDataWhenRefetching:!0,variables:{id:e}},(({monomer:t})=>{if("MonomerNode"===t.__typename){if(!t.isNatural)return d.createElement(MonomerManualEditPageContents,{monomerId:e,initialName:t.name,initialCustomMolecularWeight:t.customMolecularWeight,initialSmilesInput:t.canonicalSmiles,initialSymbol:t.symbol,naturalAnalogue:t.naturalAnalogue})
rt.ZP.info("Cannot edit a natural monomer")}(0,j.ZP)("/monomers")
return null}))}const es=C.mM.create({pageContainer:{display:"flex",flexDirection:"column",height:"100%",overflowY:"scroll"},middleSectionContainer:{display:"flex",flexDirection:"row",flex:1},monomerPropertiesPane:{width:"50%",borderRight:`1px solid ${b.tN}`},submitBar:{flex:"0 0 auto",boxSizing:"border-box",padding:16,gap:10,boxShadow:"0px -2px 4px rgba(92, 124, 131, 0.1)"},buttonsContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},marginBottom16:{marginBottom:16},paneContainer:{marginLeft:40,marginRight:40,marginTop:20},inputSmilesField:{marginBottom:12},textFieldSubheader:{fontWeight:"bold",marginBottom:4,...ji.cf},grayTextFieldContainer:{display:"flex"},grayTextField:{...ji.cf,padding:"3px 10px",background:Br.W,border:Br.S,boxSizing:"border-box",borderRadius:"4px",overflowWrap:"anywhere",minHeight:28,width:"100%"},canonicalSmiles:{paddingBottom:16,marginBottom:16,borderBottom:`1px solid ${b.pF}`}})
var ts=n(788836)
function isMonomerManagementEnabledForUser(){const e=ts.Z.currentUser()
return(null==e?void 0:e.isTenantAdmin)&&S.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES}var as=n(52145)
function EmptyPage(e){const t=!ts.Z.currentUser()
return d.createElement("div",{className:"emptyPage-body"},d.createElement("img",{className:"emptyPage-icon",src:"/static/img/complete.png"}),d.createElement("div",{className:"emptyPage-text"},t?d.createElement("div",null,d.createElement("p",null,d.createElement("strong",null,"Welcome to Benchling!")),d.createElement("p",null,d.createElement("a",{href:"/signin"},"Sign in")," to view data.")):d.createElement("div",null,d.createElement("p",null,d.createElement("strong",null,"Your workspace is empty!")),d.createElement("p",null,"Use the navigation bar on the left to open or create data."))))}var is=n(91278),rs=n(669265),ss=n(627259),os=n(749334),ls=n(392113),cs=n(618762),ds=n(98190),us=n(764677),ms=n(836291),ps=n(184997),hs=n(213851),Es=n(898808),Ss=n(864480),Ts=n(75359),gs=n(405945),fs=n(257846),Is=n(626054),As=n(579635),ys=n(250965)
class CreateTemplateCollectionModal extends d.Component{createCollection({name:e,description:t,owner:n,collaborators:a,ownerInfo:i}){return As.Z.create({name:e,description:t,owner:n,collaborators:a,ownerInfo:i}).always((()=>{ys("#fileLoading").addClass("hidden")})).done((e=>{(0,It.writeFragmentsToCache)((0,ut.f)("TemplateCollectionSummary"),[{__typename:"TemplateCollectionNode",...e}])})).fail(rt.ZP.notifyError)}render(){return d.createElement(Is.Z,{onRequestClose:this.props.onRequestClose,ownableType:_e.TEMPLATE_COLLECTION,doSubmit:S.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR?e=>this.createCollection({...e,collaborators:e.collaborators}):e=>As.Z.create({...e,collaborators:e.collaborators})})}}const _s=CreateTemplateCollectionModal,Cs=[{name:"Name",width:3},{name:"Owner",width:3},{name:"Created",width:3},{name:"Last Modified",width:3}],Rs={limit:200,offset:0}
function TemplateBanner(){return d.createElement(Ss.Z,{seenBannerPreference:hs.m},d.createElement("div",{className:"u-vertical-flex u-justify-content-start"},d.createElement(Ss.Q,{title:"Templates for notebook entries",subtitle:"Save time with reusable entries",oversized:!0}),d.createElement("div",{className:"u-flex-display u-spacing-top u-small-spacing-bottom"},d.createElement(Ss.Q,{title:"Make a template collection",subtitle:"Use template collections to share your templates with collaborators",stepNumber:1,oversized:!1}),d.createElement(Ss.Q,{title:"Create a template",subtitle:"Add content that you want to reuse across multiple entries.",stepNumber:2,oversized:!1}),d.createElement(Ss.Q,{title:"Create an entry",subtitle:"Get started by clicking 'Create entry from template' in your project folder.",stepNumber:3,oversized:!1}))))}const Ns=ot.Ps`
  query TemplateCollectionsPageQuery(
    $limitOffsetInput: LimitOffsetInput
    $searchInput: StrictString
    $archivePurposes: [StrictString]
  ) @skipAudit @engComponent(name: NOTEBOOK) {
    templateCollectionListing(
      limitOffsetInput: $limitOffsetInput
      searchInput: $searchInput
      archivePurposes: $archivePurposes
    ) {
      collections {
        id
        name
        archiveRecord {
          purpose
        }
        ownerJson
        url
        createdAt
        modifiedAt
        currentUserPermissions {
          archivable
        }
      }
      total
    }
  }
`,Os=C.mM.create({searchInput:{marginRight:10,width:200},centerVertically:{display:"flex",alignItems:"center"},learnMoreText:{fontSize:"7px",fontWeight:ji.KB},learnMoreButton:{padding:"0px 4px",marginLeft:"10px",height:"14px"},centerColumnHorizontally:{height:"70vh",justifyContent:"center",flexDirection:"column"},emptyComponent:{paddingLeft:"30%",paddingRight:"30%"},headerDescription:{margin:"0px",color:b.Rl,...ji.cf},darkGray:{color:b.pp},subDescription:{margin:"20px"},reviewDescription:{...ji.E0},icon:{margin:"20px",width:"69px",height:"69px"}})
function getFilteredCollections(e,t){const n=e?e.filter((e=>fs.Z.caseInsensitiveContains(e.name,t))):[]
n.sort(((e,t)=>{const n=e.name.toUpperCase(),a=t.name.toUpperCase()
return n<a?-1:n>a?1:0}))
return n}function mapTemplateCollectionToRowValue(e){return[d.createElement("div",null,e.archiveRecord?`${e.name} (${e.archiveRecord.purpose})`:e.name),e.ownerJson.name,(0,Wt.UT)(e.createdAt,{showTime:!1}),(0,Wt.UT)(e.modifiedAt,{showTime:!1})]}function TemplateCollectionsTable(){const[e,t]=(0,d.useState)(""),[n,a]=(0,d.useState)(Rs),[i,r]=(0,d.useState)([us.BH])
function setOffset(e){a((t=>({...t,offset:e})))}const s=(0,nt.IJ)(Ns,{variables:{limitOffsetInput:n,searchInput:e,archivePurposes:i},fetchPolicy:"network-only"})
if(s.type===nt.NI.ERROR){rt.ZP.error("Error occured while loading template collections; try reloading the page.")
return null}const{data:o}=s,l=o?o.templateCollectionListing.total:0,c=o?o.templateCollectionListing.collections:[],u=s.type===nt.NI.SUCCESS&&c?S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION?c.map(((e,t)=>{var n
return{id:e.id,isArchived:(0,Ci.ZP)(e),isArchivable:Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.archivable),itemIndex:t,values:mapTemplateCollectionToRowValue(e)}})):getFilteredCollections(c,e).map(((e,t)=>({id:e.id,isArchived:(0,Ci.ZP)(e),isArchivable:Boolean(e.currentUserPermissions.archivable),itemIndex:t,values:mapTemplateCollectionToRowValue(e)}))):[],m=0===(0,ps.UP)().length,p=s.type===nt.NI.PENDING||m
return d.createElement("div",null,d.createElement(Es.ZP,{columnHeaders:Cs,customCreateButton:d.createElement("div",null,d.createElement(ve.ZP,{title:m?"Please contact your administrator to create a template collection":"New Collection",placement:ve.TQ.BOTTOM,container:"body"},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,text:"Create collection",size:O.qE.SMALL,onClick:()=>{(0,D.Z)(_s,{})},disabled:p}))),emptyMessage:d.createElement("div",{className:(0,C.iv)(Os.emptyComponent,Os.centerColumnHorizontally,Os.centerVertically)},d.createElement(P.Z,{className:(0,C.iv)(Os.icon,Os.darkGray),icon:"benchling"}),d.createElement("div",{className:(0,C.iv)(Os.headerDescription)},"Nothing here!")),isLoading:s.type===nt.NI.PENDING,rows:u,getEditUrl:t=>S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION?c[t].url:getFilteredCollections(c,e)[t].url,writable:!0,onArchive:S.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING?e=>{!function onTemplateCollectionArchive(e,t){const n=e.filter((e=>!e.archiveRecord))
ct.bA({items:n,onArchive:(e,n,a)=>{(0,lt.np)(e)(e,n,a,t)}})}([c[e]],s.refetch)}:null,onUnarchive:S.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING?e=>{!function onTemplateCollectionUnarchive(e,t){const n=e.filter((e=>e.archiveRecord)).map((e=>e.id));(0,lt.cI)(n)(n,void 0,t)}([c[e]],s.refetch)}:null,leftSubheaderNode:d.createElement("div",null,d.createElement("div",{className:"u-flex-display"},d.createElement(Ln.ZP,{className:(0,C.iv)(Os.searchInput),borderRadius:Ln.cM.LARGE,placeholder:"Search",value:e,onChange:e=>{t(e.target.value)
setOffset(0)},onEscape:()=>{t("")
setOffset(0)}}),S.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING&&d.createElement(ms.Z,{itemIds:s.type===nt.NI.PENDING?[]:c.map((e=>e.id)),onChangePurposes:r,selectedPurposes:i})),S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION&&d.createElement(Ts.Z,{allowFastForwardAndBackward:!0,isLoading:s.type===nt.NI.PENDING,pagination:{...n,total:l},resultDescription:"template collection",setOffset}))}),l>n.limit&&S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION&&d.createElement(Ts.Z,{allowFastForwardAndBackward:!0,isLoading:s.type===nt.NI.PENDING,pagination:{...n,total:l},resultDescription:"template collection",setOffset}))}function TemplateCollectionsPage(e){(0,T._w)("Template collections")
return d.createElement("div",{className:"u-flex-display u-vertical-flex u-height-full"},d.createElement("div",{className:"u-flex-none"},d.createElement(TemplateBanner,null)),d.createElement("div",{className:"u-flex-full-height"},d.createElement(gs.Z,{title:"My collections"},d.createElement(TemplateCollectionsTable,{...e}))))}var bs=n(57985)
function CreateCard({text:e,short:t=!1,disabled:n=!1,onClick:a}){return d.createElement("a",{className:N()("createCard","card",{"card--short":t,"card--disabled":n}),onClick:a},d.createElement("div",{className:"createCard-text"},d.createElement(P.Z,{className:"createCard-icon",icon:"plus-large"}),e))}var vs=n(602652),Ps=n.n(vs)
function ItemCard(e){return d.createElement("a",{className:N()("itemCard","card",{"card--short":e.short}),href:e.href,onClick:e=>{(0,T.c4)(e)},...(0,g.Z)({component:"ItemCard",element:"root"})},d.createElement("div",{className:"itemCard-title"},e.title),null!=e.subtitle&&d.createElement("div",{className:"itemCard-subtitle"},e.subtitle),e.short?void 0:[d.createElement("div",{key:"fade",className:"itemCard-fade"}),d.createElement("div",{key:"desc",className:"itemCard-desc"},e.description)])}ItemCard.propTypes={title:vs.string.isRequired,subtitle:vs.string,description:vs.string,href:vs.string.isRequired,short:vs.bool.isRequired}
ItemCard.defaultProps={short:!1}
const Ls=ItemCard
var Ds=n(195300)
function LegacyTemplateCollectionsPage_TemplateBanner(){return d.createElement(Ss.Z,{seenBannerPreference:hs.m},d.createElement("div",{className:"u-vertical-flex u-justify-content-start"},d.createElement(Ss.Q,{title:"Templates for notebook entries",subtitle:"Save time with reusable entries",oversized:!0}),d.createElement("div",{className:"u-flex-display u-spacing-top u-small-spacing-bottom"},d.createElement(Ss.Q,{title:"Make a template collection",subtitle:"Use template collections to share your templates with collaborators",stepNumber:1,oversized:!1}),d.createElement(Ss.Q,{title:"Create a template",subtitle:"Add content that you want to reuse across multiple entries.",stepNumber:2,oversized:!1}),d.createElement(Ss.Q,{title:"Create an entry",subtitle:"Get started by clicking 'Create entry from template' in your project folder.",stepNumber:3,oversized:!1}))))}class TemplateCollectionsPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[bs.Z]}enhanceProps(){return{collections:this.templateStore().getCollections()}}}const Ms=TemplateCollectionsPageConnector.connect((function LegacyTemplateCollectionsPage(e){const[t,n]=(0,d.useState)(!1);(0,T._w)("Template collections")
const a=0===(0,ps.UP)().length
return d.createElement("div",{className:"u-flex-display u-vertical-flex u-height-full"},d.createElement("div",{className:"u-flex-none"},d.createElement(LegacyTemplateCollectionsPage_TemplateBanner,null)),d.createElement("div",{className:"u-flex-full-height"},d.createElement(gs.Z,{title:"My collections",dataTestAttrs:{component:"LegacyTemplateCollectionsPage",element:"root"}},null==e.collections?d.createElement(H.Z,null):d.createElement("div",{className:"cardContainer"},d.createElement(ve.ZP,{title:a?"Please contact your administrator to create a template collection":"New Collection",placement:ve.TQ.BOTTOM,container:"body"},d.createElement(CreateCard,{key:"create",text:"New Collection",onClick:a?()=>{}:function showCreateModal(){n(!0)},short:!0,disabled:a})),e.collections.map((e=>d.createElement(Ls,{key:e.id,title:e.name,subtitle:(0,Ot.co)((0,Ot.hx)(void 0===e.counts.template?{}:{template:e.counts.template})),href:e.url,short:!0})))),d.createElement(Ds.Z,{open:t},d.createElement(_s,{onRequestClose:function closeCreateModal(){n(!1)}})))))}))
var ws=n(991828)
class TemplateCollectionPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[bs.Z]}enhanceProps(){return{collection:this.templateStore().getCollection()}}}const Fs="TEMPLATE_COLLECTION_MODAL_CONTAINER_KEY"
const ks=TemplateCollectionPageConnector.connect((function LegacyTemplateCollectionPage(e){const[t,n]=(0,d.useState)(!1)
function handleSubmit(e,t,n,a,i){Za.Z.createThenOpen(e,t.id,n,a,i).done((()=>{ha.xv(Fs)}))}e.collection&&(0,T._w)(`${e.collection.name} - Template Collections`)
return d.createElement(gs.Z,{breadcrumbs:[{name:"Template Collections",url:As.Z.collectionsURL()}],title:null!=e.collection?e.collection.name:void 0,type:(0,Ot.E2)(_e.TEMPLATE_COLLECTION),isSettingsShown:null!=e.collection?t:void 0,onChangeIsSettingsShown:function handleChangeIsSettingsShown(e){n(e)},dataTestAttrs:{component:"LegacyTemplateCollectionPage",element:"root"}},null==e.collection?d.createElement(H.Z,null):d.createElement("div",{className:"cardContainer"},e.collection.permissions.appendable?d.createElement(CreateCard,{key:"create",text:"New Template",onClick:function createClickHandler(){ha.bA(Fs,d.createElement(Wa.Z,{onRequestClose:()=>{ha.xv(Fs)},onSubmit:handleSubmit,initialTemplateCollection:e.collection}))}}):void 0,e.collection.templates?e.collection.templates.map((e=>d.createElement(Ls,{key:e.id,title:e.name,href:e.editURL,description:e.preview,short:!1}))):[]),null!=e.collection?d.createElement(Ds.Z,{open:t},d.createElement(ws.Z,{templateCollection:e.collection,onRequestClose:function settingsCloseHandler(){n(!1)}})):void 0)}))
var Us=n(295178),xs=n(408783),Bs=n(924768),Zs=n(744898),qs=n(539593),Gs=n(848640),Vs=n(338158),Hs=n.n(Vs),Ws=n(426608)
const Ys=/(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})/gi
function EmailInput({emails:e,onChangeEmails:t,size:n,focusOnMount:a}){const i=d.useRef(null);(0,ni.Z)((()=>{a&&i.current&&i.current.focus()}))
return d.createElement("div",{className:"u-flex-grow"},d.createElement(Ws.ZP,{addKeys:[9,13,186,188],onChange:e=>{t(ue.default.unique(e.flatMap((e=>function extractEmailAddresses(e){return[...e.matchAll(Ys)].map((e=>e[0]))}(e.text)))))},placeholder:"Enter email addresses",size:n,value:e.map((e=>({id:e,text:e}))),ref:i}))}var $s=n(220798)
class EmailInvite extends d.Component{constructor(){super(...arguments)
this.reCaptcha=null
this.state={emails:[],invitePending:!1}
this._handleLoadRecaptcha=()=>{this.state.invitePending&&this._reset()}
this._handleVerifyCallback=e=>{if(this.state.invitePending){this.props.onInvite(this.state.emails,e)
this.setState({invitePending:!1,emails:[]})}else(0,ie.Gp)(!1,"Expecting invitePending to be true")}
this._handleInviteClicked=()=>{this.setState({invitePending:!0})
this._reset()}}UNSAFE_componentWillMount(){if(!document.getElementById("recaptcha-script")){const e=document.createElement("script")
e.async=!0
e.defer=!0
e.src="https://www.google.com/recaptcha/api.js?render=explicit"
e.id="recaptcha-script"
document.body.appendChild(e)}}_reset(){if(this.reCaptcha){this.reCaptcha.reset()
this.reCaptcha.execute()}}render(){return d.createElement("div",{className:"u-spacing-top"},d.createElement(Hs(),{ref:e=>{this.reCaptcha=e},size:"invisible",render:"explicit",sitekey:S.ZP.AUTH_RECAPTCHA_KEY,onloadCallback:this._handleLoadRecaptcha,verifyCallback:this._handleVerifyCallback,badge:"bottomleft"}),d.createElement("div",{className:"u-flex-display"},d.createElement(EmailInput,{emails:this.state.emails,onChangeEmails:e=>{this.setState({emails:e})},size:this.props.emailChipSize,focusOnMount:!0}),d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,className:"u-mini-spacing-left",onClick:this._handleInviteClicked,size:this.props.buttonSize,text:"Invite",disabled:this.state.invitePending})))}}EmailInvite.defaultProps={buttonSize:O.qE.LARGE,emailChipSize:$s.I.LARGE}
const Ks=EmailInvite
class InviteUserModal extends d.Component{constructor(){super(...arguments)
this.inviteMembers=(e,t)=>{if(0!==e.length){Gs.pS({emails:e,recaptcha:t})
h.j("onboarding","invite_users",{count:e.length,source:"invite-user-modal"})
this.props.onRequestClose()}else rt.ZP.error("Please specify an email address to invite.")}}componentDidMount(){h.j("onboarding","viewed_invite_users_modal")}render(){return d.createElement(B.ZP,{onRequestClose:this.props.onRequestClose,title:"Thanks for being a great Benchling user!",wrapInForm:!1},d.createElement("div",null,this.props.copy,d.createElement(Ks,{onInvite:this.inviteMembers,buttonSize:O.qE.SMALL,emailChipSize:$s.I.SMALL})))}}const zs=InviteUserModal
var Qs=n(259219),js=n(45219),Js=n(263174),Xs=n(216090),eo=n(432128),to=n(455884)
function CreateProcessTaskSchemaPage(){return d.createElement(to.default,{schemaId:null})}var no=n(402360)
const ao="Execution type: All"
function ProcessTaskSchemaExecutionTypeDropdown(e){const t=(0,Be.dk)(),isAllEnabledOptions=e=>e.length===t.length,_handleSelectExecutionType=n=>{const a=Array.isArray(n)?n:[n]
if(isAllEnabledOptions(a))isAllEnabledOptions(e.selectedExecutionTypes)?e.onChangeExecutionTypes([]):e.onChangeExecutionTypes(t)
else{a.every((t=>e.selectedExecutionTypes.includes(t)))?e.onChangeExecutionTypes(ue.default.difference(e.selectedExecutionTypes,a)):e.onChangeExecutionTypes(ue.default.union(e.selectedExecutionTypes,a))}}
return d.createElement(w.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.MEDIUM,value:e.selectedExecutionTypes,isMulti:!0,isValueEqual:(n,a)=>a===ao?t.length===e.selectedExecutionTypes.length:n===a},d.createElement(pe.Z,null,d.createElement(x.Z,{value:ao,onSelect:()=>{_handleSelectExecutionType(t)}},ao)),d.createElement(pe.Z,null,t.sort().map((e=>d.createElement(x.Z,{key:e,value:e,onSelect:()=>{_handleSelectExecutionType(e)}},Be.TC[e]))))),displayName:e.selectedExecutionTypes.length?e.selectedExecutionTypes.length===t.length?ao:`Execution type: ${(0,Ot.Dw)(e.selectedExecutionTypes.map((e=>Be.TC[e])))}`:"Filter by execution type..."})}function ProcessTaskSchemasListing(e){const[t,n]=(0,d.useState)((0,Be.dk)().sort().map((e=>e)))
T._w("Workflow Schemas")
return d.createElement(Yi.Z,{schemas:e.processTaskSchemas,schemaType:Ei.R.PROCESS,columnHeaders:[{name:"Schemas",width:8},{name:"Execution Type",width:4}],customSearchControls:d.createElement(ProcessTaskSchemaExecutionTypeDropdown,{onChangeExecutionTypes:e=>{n(e)},selectedExecutionTypes:t}),customFilterCallback:e=>e.filter((e=>t.includes(e.executionType))),navigateToCreate:()=>{T.c4(null,mt.fL())},urlForSchema:e=>mt.k_(e),archiveSchemas:async(t,n)=>{try{await(0,st.jI)(mt.uc(t,(0,Hi.R0)(n,t)),"Archiving...")
rt.ZP.success("Items successfully archived.")}catch(e){rt.ZP.notifyError(e)}e.refetch()},unarchiveSchemas:async t=>{try{await mt.Re(t)
rt.ZP.success("Items successfully unarchived.")}catch(e){rt.ZP.notifyError(e)}e.refetch()},isWritable:e.areOrganizationSchemasCreatable,mapSchemaToRowValue:e=>[d.createElement("span",{className:"u-small-spacing-left"},e.name,d.createElement(no.Z,{item:e})),Be.TC[e.executionType]]})}const io=ot.Ps`
  query ProcessTaskSchemasPageQuery($platformFeature: ProcessPlatformFeatureType!)
  @skipAudit
  @engComponent(name: WORKFLOWS) {
    processTaskSchemasSupportingPlatformFeature(platformFeature: $platformFeature) {
      id
      name
      archiveRecord {
        purpose
      }
      executionType
      isUserConfigurationDisabled
    }
  }
`
function ProcessTaskSchemasPage(){const e=(0,Wi.Z)(),t=e.queryResultType===nt.NI.SUCCESS&&e.areOrganizationSchemasCreatable
return d.createElement(nt.ZP,{query:io,variables:{platformFeature:Rt.Nk.SCHEMA_CONFIG},renderLoading:()=>d.createElement(ProcessTaskSchemasListing,{processTaskSchemas:null,areOrganizationSchemasCreatable:t}),fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0},((e,{refetch:n})=>d.createElement(ProcessTaskSchemasListing,{processTaskSchemas:e.processTaskSchemasSupportingPlatformFeature.filter((e=>!e.isUserConfigurationDisabled)),areOrganizationSchemasCreatable:t,refetch:async()=>{await n()}})))}var ro=n(676276),so=n(166459),oo=n(839810),lo=n(837127),co=n(930113),uo=n(276637),mo=n(640411),po=(n(855501),n(581946),n(514306),n(492262))
const ho=Ps().shape({value:Ps().string.isRequired,onChange:Ps().func.isRequired})
function ConfigureSchemaSpec({link:e,readOnly:t=!1}){return d.createElement("div",{className:(0,C.iv)(Eo.section)},d.createElement("div",{className:"settingsPageContainer-label"},"JSON Spec"),d.createElement(po.ZP,{mode:"json",theme:"github",enableBasicAutocompletion:!0,value:e.value,onChange:t=>{e.onChange({target:{value:t}})},readOnly:t,width:"100%"}))}ConfigureSchemaSpec.propTypes={link:ho.isRequired,readOnly:Ps().bool}
const Eo=C.mM.create({section:{marginBottom:30}})
var So=n(563009),To=n(368734),go=n(633418)
class CreateSchemaConnector extends _.C{enhanceProps(){const e=this.reduxState().ui.schemaConfig,{errorState:t,ownerChoices:n,ownerId:a,name:i,sqlIdentifier:r,specString:s,sessionId:o}=e,{errors:l,errorMessage:c}=null!=t?t:{errors:null,errorMessage:null}
return{errors:l,errorMessage:c,ownerChoices:n,ownerId:a,name:null==i?"":i,sqlIdentifier:r,specString:null==s?"":s,sessionId:o}}}const fo={[Ei.R.ASSAY_REQUEST]:{fields:[],idPrefix:"",samplesSchema:[],taskSchemas:[]},[Ei.R.ASSAY_RUN]:{fields:[]},[Ei.R.ASSAY_RESULT]:{fields:[]},[Ei.R.REQUEST_TASK]:{fields:[]},[Ei.R.CONNECTION]:{fields:[],idPrefix:""},[Ei.R.SCHEMA_INTERFACE]:{fields:[]},[Ei.R.STUDY]:{fields:[]}}
class CreateSchemaPage extends d.Component{constructor(){super(...arguments)
this._handleCreate=()=>{let e
try{e=JSON.parse(this.props.specString)}catch(e){(0,so.getStore)().dispatch(So.HO({errors:[],errorMessage:"Spec is not valid JSON"}))
return}this.props.createSchema({ownerId:this.props.ownerId,name:this.props.name,schemaType:this.props.schemaType,sqlIdentifier:this.props.sqlIdentifier||null,spec:e,sessionId:this.props.sessionId})}
this._handleNavigateToSchemaListing=()=>{T.c4(null,this.props.listingUrl)}}componentDidMount(){(0,so.getStore)().dispatch(So.UW());(0,so.getStore)().dispatch(So.JI(null,fo[this.props.schemaType]))}render(){if(null==this.props.ownerChoices)return d.createElement(H.Z,{key:"throbber"})
if(0===this.props.ownerChoices.length)return d.createElement("div",null,"You must be an admin of an org to create schemas.")
const e=Ei.q[this.props.schemaType]
return d.createElement(J.Z,{onClickTitle:this._handleNavigateToSchemaListing,title:`${e} Schemas`,subtitle:`Create ${e} Schema`},d.createElement("div",{className:"u-flex-grow"},d.createElement(mo.ZP,{isEditableWarehouseTableName:!0,hideWarehouseTableName:!this.props.canCreateWarehouseTableName,name:this.props.name,sqlIdentifier:this.props.sqlIdentifier,ownerId:this.props.ownerId,ownerChoices:this.props.ownerChoices,onNameChange:e=>{(0,so.getStore)().dispatch(So.Qh(e))},onOwnerChange:e=>{(0,so.getStore)().dispatch(So.I_(e.id))},onSqlIdentifierChange:e=>{(0,so.getStore)().dispatch(So.AZ(e))}}),d.createElement("div",null,d.createElement(go.Z,{errors:this.props.errors,errorMessage:this.props.errorMessage}),d.createElement(ConfigureSchemaSpec,{link:{value:this.props.specString,onChange:e=>{(0,so.getStore)().dispatch(So.RZ(e.target.value))}}})),d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.SECONDARY,disabled:!this.props.name||!this.props.specString,onClick:this._handleCreate,size:O.qE.MEDIUM,text:"Create",dataTestAttrs:{component:"CreateSchemaPage",key:To.Z.SUBMIT}}),(this.props.schemaType===Ei.R.ASSAY_RUN||this.props.schemaType===Ei.R.ASSAY_RESULT)&&d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.TERTIARY_GRAY,size:O.qE.MEDIUM,onClick:()=>{T.c4(null,uo.Zr(this.props.schemaType))},text:"Edit in UI",dataTestAttrs:{component:"CreateSchemaPage",element:"switchUI"}})))}}const Io=CreateSchemaConnector.connect(CreateSchemaPage)
class CreateRequestTaskSchemaPage extends d.PureComponent{render(){return d.createElement(Io,{schemaType:Ei.R.REQUEST_TASK,createSchema:this.props.createSchema,listingUrl:lo.k4(),canCreateWarehouseTableName:!1})}}const Ao=(0,V.$j)(null,{createSchema:co.Ew})(CreateRequestTaskSchemaPage)
class RequestTaskSchemasPage extends d.Component{constructor(){super(...arguments)
this._handleNavigateToCreate=()=>{T.c4(null,lo.nH())}}render(){return d.createElement(Yi.Z,{schemas:this.props.taskSchemas,schemaType:Ei.R.REQUEST_TASK,navigateToCreate:this._handleNavigateToCreate,urlForSchema:lo.u6,archiveSchemas:(e,t)=>{(0,so.getStore)().dispatch((0,Hi.pw)(e,t))},unarchiveSchemas:e=>{(0,so.getStore)().dispatch((0,Hi.z2)(e))},isWritable:this.props.areOrganizationSchemasCreatable})}}const yo=ot.Ps`
  query RequestTaskSchemasPageQuery @skipAudit @engComponent(name: REQUESTS) {
    ...AllRequestTaskSchemasGraphQL
  }
  ${(0,ut.f)("AllRequestTaskSchemas").fragment}
`
function QueryingRequestTaskSchemasPage(e){T._w("Task Schemas")
const t=(0,Wi.Z)(),n=t.queryResultType===nt.NI.SUCCESS&&t.areOrganizationSchemasCreatable
return d.createElement(nt.ZP,{query:yo,renderLoading:()=>d.createElement(RequestTaskSchemasPage,{taskSchemas:null,areOrganizationSchemasCreatable:n}),fetchPolicy:"cache-and-network"},(e=>d.createElement(RequestTaskSchemasPage,{taskSchemas:(0,Ai.NA)("RequestTaskSchema",e.requestTaskSchemas),areOrganizationSchemasCreatable:n})))}var _o=n(17086),Co=n(730216),Ro=n(377249),No=n(975732),Oo=n(415269),bo=n(457110)
const DataTableConfigModalComponents_Section=e=>d.createElement(te.Z,null,d.createElement(be.Z,{className:"legacy-font-proxima-13 u-small-spacing-bottom"},e.title),e.children)
var vo=n(179829),Po=n(396213),Lo=n(301141),Do=n(453580),Mo=n(946795),wo=n(497790)
class SetDataTableColumnTypeModal extends d.Component{constructor(e){super(e)
this._handleSubmit=()=>{this.props.onRequestSubmit({selectedFieldType:this.state.selectedFieldType})}
this._handleFieldTypeSelect=e=>{this.setState({selectedFieldType:e})}
this.state={selectedFieldType:e.initialFieldType}}_getButtons(){return[{key:"set",onClick:this._handleSubmit,style:O.ZJ.PRIMARY,submit:!0,disabled:!1,text:"Set"}]}_getFieldTypeOptions(){return bo.yZ.filter((e=>this.props.allowPrimaryLinkTypes||!Mo.bh.includes(e))).map((e=>wo.FIELD_TYPES_BY_TYPE_STRING[e])).map((e=>d.createElement(x.Z,{value:e,onSelect:this._handleFieldTypeSelect,key:e.type},e.label)))}render(){return d.createElement(B.ZP,{title:"Set column type",onRequestClose:this.props.onRequestClose,buttons:this._getButtons()},d.createElement("div",null,d.createElement(be.Z,null,`${this.props.column.name} type:`),d.createElement("span",{className:"u-spacing-left"},d.createElement(w.ZP,{displayName:this.state.selectedFieldType.label,menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.MEDIUM,value:this.state.selectedFieldType},this._getFieldTypeOptions())}))))}}SetDataTableColumnTypeModal.propTypes={onRequestClose:Ps().func.isRequired,onRequestSubmit:Ps().func.isRequired,column:Do.qJ.isRequired,initialFieldType:Ps().shape({type:Ps().string.isRequired,label:Ps().string.isRequired}).isRequired}
const Fo=SetDataTableColumnTypeModal
var ko=n(605604),Uo=n(783851),xo=n(69258),Bo=n(121160),Zo=n(851422),qo=n(128963),Go=n(208029),Vo=n(896986)
class DataTableConfigGenerateModalConnector extends _.C{constructor(){super(...arguments)
this.stores=[vo.Z,qo.Z]}enhanceProps(){const e=this.dataTableConfigStore().getDataTableConfigs(),t=this.props.assaySchema.id
return{loaded:Boolean(e),publishedConfig:e?ue.default.find(e,(e=>e.assaySchema.id===t)):void 0,selectorsById:this.getOrFetchMultipleRequired(Ro.V.SCHEMA_FIELD_SELECTOR_BY_ID,(0,Uo.BR)(this.props.assaySchema.fields))}}}class DataTableConfigGenerateModal extends d.Component{constructor(e){super(e)
this._handlePublishErrors=({errors:e,message:t})=>{this.setState({errors:e,errorMessage:t})}
this._handlePublish=()=>{var e,t
0!==(null!==(t=null===(e=this.state.dataTableConfig)||void 0===e?void 0:e.columns.length)&&void 0!==t?t:0)?Oo.n(this.state.dataTableConfig,{columnTypesByCid:this.state.columnTypesByCid,fieldIdsToDelete:ue.default.pluck((0,bo.dA)(this.props.assaySchema,this.state.dataTableConfig.columns,this.state.hiddenFieldIds),"id"),onSuccess:this.props.onRequestClose,onError:this._handlePublishErrors}):rt.ZP.error("Please include at least one column in the table.")}
this._handleConfigTableUpdate=(e,{table:t})=>{const n=(0,Lo.MQ)(this.state.dataTableConfig,t),a=this._getColumnTypesByCid(n),i=(0,bo.Kj)(this.props.assaySchema,n.columns),r=this.state.hiddenFieldIds.filter((e=>i.includes(e)))
this.setState({dataTableConfig:n,hiddenFieldIds:r,columnTypesByCid:a})}
this._getExtraContextMenuOptions=e=>{const{dataTableConfig:t}=this.state
if(null==e)return null
const{minIndex:n,maxIndex:a}=e,i=[],r=a-n+1,s=this._getFieldIdsToHide(e,t).length
r!==t.columns.length&&r===s&&i.push({key:"hide-column-option",name:this._getHideColumnText(e),click:()=>{this._handleHideColumns(e)}})
1===r&&i.push({key:"field-type-option",name:"Edit type...",click:()=>this._openEditFieldTypeModal(n)})
return i}
e.loaded?this.state={...this._getStateFromProps(e),errors:null,errorMessage:null}:this.state={dataTableConfig:null,columnTypesByCid:{},errors:null,errorMessage:null,hiddenFieldIds:[]}}componentDidMount(){Oo.L()}UNSAFE_componentWillReceiveProps(e){z()(e,this.props)||this.setState(this._getStateFromProps(e))}_schemaHasPrimaryLinkField(){return Boolean((0,Mo.HA)(this.props.assaySchema))}_getWarnings(e,t,n,a){const i=(0,bo.dA)(e,t.columns,a),r=(0,bo.u1)(t,n,e)
return[...i.map((e=>`Field "${e.displayName}" will be deleted from the schema.`)),...r]}_getStateFromProps(e){let t,n
if(e.publishedConfig&&e.publishedConfig.columns.length>0){const a=e.publishedConfig
t=(0,Co.Z)(a);(0,bo.g8)(t,{})
n=(0,bo.Kj)(e.assaySchema,t.columns)}else if(e.publishedConfig&&0===e.publishedConfig.columns.length){const a=e.publishedConfig
t=(0,Co.Z)(a);(0,bo.g8)(t,{})
t={...t,columns:(0,No.g)(e.assaySchema,e.selectorsById)}
n=(0,bo.Kj)(e.assaySchema,t.columns)}else{t=(0,No.Z)(e.assaySchema,e.selectorsById)
n=[]}return{dataTableConfig:t,hiddenFieldIds:n,columnTypesByCid:{}}}_getColumnTypesByCid(e){return ue.default.object(e.columns.map((e=>[e.cid,this.state.columnTypesByCid[e.cid]?this.state.columnTypesByCid[e.cid]:(0,bo.XB)(e,this.props.assaySchema)])))}async _openEditFieldTypeModal(e){const{dataTableConfig:t,columnTypesByCid:n}=this.state,a=t.columns[e]
let i=n[a.cid]
if(null==i){const e=(0,Vo.eI)(t.assaySchema,a)
null!=e&&(i=e.fieldType)}const r=null==i?wo.TEXT_TYPE:wo.FIELD_TYPES_BY_TYPE_STRING[i],s=await(0,D.Z)(Fo,{column:a,initialFieldType:r,allowPrimaryLinkTypes:this._schemaHasPrimaryLinkField()})
if(s){const e=Aa()(n,{[a.cid]:{$set:s.selectedFieldType.type}})
this.setState({dataTableConfig:t,columnTypesByCid:e})}}_getHideColumnText(e){if(e.minIndex!==e.maxIndex){const[t,n]=Array.from([e.minIndex,e.maxIndex].map((e=>Bo.Z.util.colNumberToLetters(e))))
return`Hide columns ${t} - ${n}`}return"Hide column"}_getFieldIdsToHide(e,t){const n=[]
for(let a=e.minIndex;a<=e.maxIndex;a++){const e=t.columns[a]
null!=e&&null!=e.tagSchemaFieldId&&n.push(e.tagSchemaFieldId)}return n}_handleHideColumns(e){const{dataTableConfig:t}=this.state,n=[...this.state.hiddenFieldIds,...this._getFieldIdsToHide(e,t)],a=Aa()(t,{columns:{$set:t.columns.filter(((e,t)=>null==e.tagSchemaFieldId||!n.includes(e.tagSchemaFieldId)))}}),i=this._getColumnTypesByCid(a)
this.setState({dataTableConfig:a,columnTypesByCid:i,hiddenFieldIds:n})}renderBody(){if(!this.props.loaded)return d.createElement("div",{className:"text-center"},d.createElement(H.Z,null))
const{dataTableConfig:e,errorMessage:t,errors:n,columnTypesByCid:a,hiddenFieldIds:i}=this.state,r=this._getWarnings(this.props.assaySchema,e,a,i),s=(0,Lo.kP)(e,!1,{alwaysAllowColumnRename:!0,columnTypesByCid:a}),o=(0,Mo.HA)(this.props.assaySchema)
if(S.ZP.ELN_ENABLE_INSERT_NEW_RESULTS_TABLE&&null!=o){s.rowLabels=[o.displayName]
s._rowHeader=d.createElement(xo.Z,{index:0,dim:Zo.TableDimension.COLUMN,label:o.displayName,isLeftAlign:!1,numDims:2})}return d.createElement("div",null,e&&d.createElement(DataTableConfigModalComponents_Section,{title:""},d.createElement("div",{className:"modal-mediocre-tableWrapper"},d.createElement(ko.ZP,{...ko.W9,table:s,cid:"modal-table-new",locked:!1,viewer:!1,hideFormulaBox:!0,icon:"table",insertableColumnInfos:(0,Lo.fS)(e,this.props.selectorsById),enableFormulas:!1,hasPlaceholderRows:!0,storeState:()=>{},tableLabel:Go.D6.Result,updateHandler:this._handleConfigTableUpdate,isLeftAlignColumnHeader:!0,getExtraContextMenuOptions:this._getExtraContextMenuOptions}))),r.length>0&&d.createElement(DataTableConfigModalComponents_Section,{title:"The following warnings were encountered:"},r.map(((e,t)=>d.createElement("div",{key:t},d.createElement(P.Z,{icon:"warning",className:"u-dark-warning-color u-tiny-spacing-right"}),e)))),(null!=n&&n.length>0||null!=t)&&d.createElement(DataTableConfigModalComponents_Section,{title:"The following errors were encountered:"},d.createElement(go.Z,{errors:n,errorMessage:t,key:"errors"})))}render(){return d.createElement(B.ZP,{title:`Configure ${Go.D6.Result_Table}`,closeableOnEscapeKey:!1,fullWidth:!0,onRequestClose:this.props.onRequestClose,onRequestSubmit:this._handlePublish,className:"mediocre",buttons:[{text:"Publish",submit:!0,style:O.ZJ.PRIMARY,disabled:!this.props.loaded}]},this.renderBody())}}DataTableConfigGenerateModal.propTypes={assaySchema:Ps().object.isRequired,onRequestClose:Ps().func.isRequired,loaded:Ps().bool.isRequired,publishedConfig:Po.hw,selectorsById:Ps().objectOf(Ps().object).isRequired}
const Ho=DataTableConfigGenerateModalConnector.connect(DataTableConfigGenerateModal)
var Wo=n(590441),Yo=n(787004),$o=n(947730),Ko=n(190919),zo=n(554353)
var Qo=n(807693),jo=n(865886),Jo=n(224921),Xo=n(780188),el=n(857711)
const tl="ASSAY_SCHEMA_TAB"
function schemaHasRequestTemplates(e){return Boolean(e&&"requestTemplateIds"in e&&e.requestTemplateIds&&e.requestTemplateIds.length>0)}class SchemaEditSection extends d.Component{constructor(){super(...arguments)
this.state={isDataTableModalOpen:!1}
this._openDataTableModal=()=>{h.KK(Ie.k3.OPENED_CONFIGURE_RESULT_TABLE_MODAL)
this.setState({isDataTableModalOpen:!0})}
this._handleCloseDataTableModal=()=>{this.setState({isDataTableModalOpen:!1})}
this._newIdProvided=(e,t)=>{for(const n of t)if(!e.includes(n)||t.filter((e=>e===n)).length>1)return!0
return!1}
this._specHasNewFieldIds=e=>{if(!Array.isArray(null==e?void 0:e.fields))return!1
const t=e.fields.map((({id:e})=>e)).filter((e=>null!=e)),n=this.props.schema?this.props.schema.allFields.map((e=>e.apiId)):[]
if(this._newIdProvided(n,t))return!0
if(Array.isArray(e.samplesSchema)){const t=e.samplesSchema.map((e=>e.id)).filter((e=>null!=e)),n=this.props.schema&&this.props.schema.sampleGroupSchema?this.props.schema.sampleGroupSchema.allFields.map((e=>e.apiId)):[]
if(this._newIdProvided(n,t))return!0}return!1}
this._handleUpdate=async()=>{let e
try{e=JSON.parse(this.props.specString)}catch(e){(0,so.getStore)().dispatch(So.HO({errors:[],errorMessage:"Spec is not valid JSON"}))
return}if(this._specHasNewFieldIds(e)){if(!await Promise.resolve(M.iG("New field ID provided",d.createElement("p",null,"You have specified an ID for a new field, but all new field IDs will be ignored because they are autogenerated by the system.",d.createElement("br",null),d.createElement("br",null),"Select ",d.createElement("b",null,"OK")," to acknowledge that new field IDs will be ignored and proceed with the update, or"," ",d.createElement("b",null,"Go Back")," to continue editing the JSON."),O.ZJ.PRIMARY,{acceptText:"OK",rejectText:"Go Back",enableRedesign:!0,promiseCompatible:!0,medium:!0})))return}this.props.updateSchema({schemaId:this.props.schemaId,schemaName:this.props.name,sqlIdentifier:this.props.isEditableWarehouseTableName&&null!=this.props.warehouseTableName?this.props.warehouseTableName||"":null,spec:e,isSpecJsonFormat:!0})}}componentDidMount(){(0,so.getStore)().dispatch(So.UW())
this.props.fetchSchema(this.props.schemaId,!0)}componentDidUpdate(e){if(e.schemaId!==this.props.schemaId){(0,so.getStore)().dispatch(So.UW())
this.props.fetchSchema(this.props.schemaId,!0)}}render(){var e,t
if(this.props.isConfigureDataTableEnabled&&null==this.props.schema||null==this.props.specString)return d.createElement("div",{className:"u-flex-grow"},d.createElement(H.Z,{key:"throbber"}))
const n=null!=this.props.schema&&(0,Ci.ZP)(this.props.schema)
return d.createElement("div",{className:"u-flex-grow"},this.props.allowEditMetadata&&d.createElement(mo.ZP,{isEditableWarehouseTableName:this.props.isEditableWarehouseTableName,hideWarehouseTableName:null==this.props.warehouseTableName,name:this.props.name,sqlIdentifier:this.props.warehouseTableName,schema:this.props.schema,onNameChange:e=>{(0,so.getStore)().dispatch(So.Qh(e))},onOwnerChange:St.ZT,onSqlIdentifierChange:e=>{(0,so.getStore)().dispatch(So.AZ(e))}}),d.createElement(go.Z,{errors:this.props.errors,errorMessage:this.props.errorMessage}),d.createElement("div",null,d.createElement(ConfigureSchemaSpec,{link:{value:this.props.specString,onChange:e=>{(0,so.getStore)().dispatch(So.RZ(e.target.value))}},readOnly:n})),d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.SECONDARY,disabled:n||!this.props.specString,onClick:this._handleUpdate,size:O.qE.MEDIUM,text:"Update",dataTestAttrs:{component:"SchemaEditSection",key:To.Z.SUBMIT}}),(this.props.schemaType===Ei.R.ASSAY_RUN||this.props.schemaType===Ei.R.ASSAY_RESULT)&&d.createElement(ve.ZP,{disabled:null==(null===(e=this.props.schema)||void 0===e?void 0:e.derivedParent),title:"This schema can only be edited with JSON because it has a derived parent"},d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.TERTIARY_GRAY,disabled:null!=(null===(t=this.props.schema)||void 0===t?void 0:t.derivedParent),onClick:()=>{h.L9(Ie.x4.CLICKED_EDIT_SCHEMA_VIA_UI,{schema_type:this.props.schemaType===Rt.nc.ASSAY_RUN?_e.RUN_SCHEMA:_e.RESULT_SCHEMA,schema_id:this.props.schemaId,session_id:this.props.sessionId})
T.c4(null,uo.mp(this.props.schemaType,this.props.schemaId))},size:O.qE.MEDIUM,text:"Edit in UI",dataTestAttrs:{component:"SchemaEditSection",element:"switchUI"}})),this.props.isConfigureDataTableEnabled&&d.createElement("span",null,this.state.isDataTableModalOpen&&d.createElement(Ds.Z,{key:"data-table-modal",open:!0},d.createElement(Ho,{assaySchema:this.props.schema,onRequestClose:this._handleCloseDataTableModal})),d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.TERTIARY_GRAY,disabled:n,onClick:this._openDataTableModal,size:O.qE.MEDIUM,text:`Configure ${Go.D6.Result_Table}`})),this.props.isCreateRequestTemplateEnabled&&!schemaHasRequestTemplates(this.props.schema)&&d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.TERTIARY_GRAY,disabled:n,onClick:()=>{!async function createRequestTemplate(e){const{requestSchema:t,template:n}=await Ko.Sx(e)
$o.Z.dispatch({actionType:Yo.C1l,assaySchema:t});(0,so.getStore)().dispatch((0,zo.Xz)(n))
rt.ZP.success("Created request template successfully")}(this.props.schemaId)},size:O.qE.MEDIUM,text:"Create Request Template"}))}}SchemaEditSection.propTypes={allowEditMetadata:Ps().bool.isRequired,name:Ps().string,schemaId:Ps().string.isRequired,isConfigureDataTableEnabled:Ps().bool.isRequired,isCreateRequestTemplateEnabled:Ps().bool.isRequired,isEditableWarehouseTableName:Ps().bool.isRequired,warehouseTableName:Ps().string,ownerName:Ps().string,schemaType:Ps().oneOf(Object.keys(Ei.R)).isRequired,errors:Ps().arrayOf(Ps().string.isRequired),errorMessage:Ps().string,schema:Ps().oneOfType([Xo.vB,Wo.eM]),specString:Ps().string,fetchSchema:Ps().func.isRequired,updateSchema:Ps().func.isRequired}
SchemaEditSection.defaultProps={isConfigureDataTableEnabled:!1,isCreateRequestTemplateEnabled:!1}
class AssaySchemaEditSectionConnector extends _.C{constructor(){super(...arguments)
this.stores=[Jo.Z]}getEditingName(e,t){return null!=e?e:t?t.name:""}getEditingWarehouseTableName(e,t){return null!=e?e:t&&t.sqlIdentifier}trackLabAutomationConfigUpdates(e,t,n,a){const i={action_origin:Rt.D2.SETTINGS_ASSAY_SCHEMA_PAGE_JSON,action_method:Rt.LY.SETTINGS_EDIT,schema_type:e.schemaType,schema_id:e.schemaId,session_id:a}
t&&h.L9(Ie.k3.UPDATED_INPUT_FILE_CONFIG,i)
n&&h.L9(Ie.k3.UPDATED_OUTPUT_FILE_CONFIG,i)}enhanceProps(){const e=Jo.Z.getAssaySchema(this.props.schemaId),{name:t,specString:n,sqlIdentifier:a,errorState:i,sessionId:r,hasUnsavedInputFileConfigData:s,hasUnsavedOutputFileConfigData:o}=this.reduxState().ui.schemaConfig,{errors:l,errorMessage:c}=null!=i?i:{errors:null,errorMessage:null}
return{allowEditMetadata:!0,errors:l,errorMessage:c,name:this.getEditingName(t,e),schema:e,specString:n,fetchSchema:(e,t=!0)=>{jo._L(e,t)},updateSchema:async e=>{try{await _o.S8({analyticsMetadata:{actionOrigin:Rt.D2.SETTINGS_ASSAY_SCHEMA_PAGE_JSON}},null,(()=>{(0,st.jI)(jo.sr({...e,sessionId:r}),"Updating...")}))}catch(e){if(!(0,ft.d0)(e))throw e}this.trackLabAutomationConfigUpdates(this.props,s,o,r)},warehouseTableName:this.getEditingWarehouseTableName(a,e),ownerName:e&&e.organization.name,sessionId:r}}}const nl=AssaySchemaEditSectionConnector.connect(SchemaEditSection)
class RequestTemplateEditSectionConnector extends _.C{enhanceProps(){const{specString:e,errorState:t,sessionId:n}=this.reduxState().ui.schemaConfig,{errors:a,errorMessage:i}=null!=t?t:{errors:null,errorMessage:null}
return{allowEditMetadata:!1,errors:a,errorMessage:i,specString:e,sessionId:n,fetchSchema:e=>{this.dispatch((0,zo.Z5)(e))},updateSchema:({schemaId:e,schemaName:t,sqlIdentifier:n,spec:a,isSpecJsonFormat:i})=>{this.dispatch((0,zo.Yn)(e,a))}}}}const al=RequestTemplateEditSectionConnector.connect(SchemaEditSection)
class SchemaPage extends d.Component{constructor(){super(...arguments)
this.state={activeTab:tl}
this._handleNavigateToSchemas=()=>{T.c4(null,this.props.listingUrl)}
this._handleSetActiveTab=e=>{this.setState({activeTab:e})}}render(){(0,mi.Z)(this.props.schema,this.props.schemaType)
const e=this.props.schema?d.createElement("span",null,this.props.schema.name,d.createElement(no.Z,{item:this.props.schema})):"",t=Ei.q[this.props.schemaType],n=this.props.editSectionClass
return d.createElement(J.Z,{onClickTitle:this._handleNavigateToSchemas,subtitle:e,title:`${t} Schemas`,toolbar:this.props.schema&&d.createElement(el.Z,{schemaId:this.props.schema.id,schemaType:this.props.schemaType,isSpecJsonFormat:!0})},d.createElement(Ye.Xl,{activeTab:this.state.activeTab,className:"u-flex-grow",onRequestTabChange:this._handleSetActiveTab},d.createElement(Ye.OK,{tabKey:tl,title:`${t} Settings`},d.createElement(n,{schemaId:this.props.schemaId,isConfigureDataTableEnabled:(0,Lo.C0)()&&this.props.schemaType===Ei.R.ASSAY_RESULT,isCreateRequestTemplateEnabled:this.props.schemaType===Ei.R.ASSAY_REQUEST,isEditableWarehouseTableName:S.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME&&Object.keys(Xo.aJ).includes(this.props.schemaType),schemaType:this.props.schemaType})),schemaHasRequestTemplates(this.props.schema)&&d.createElement(Ye.OK,{tabKey:"REQUEST_TEMPLATE_SCHEMA_TAB",title:"Template Settings"},d.createElement(al,{schemaId:this.props.schema.requestTemplateIds[0],schemaType:this.props.schemaType,isEditableWarehouseTableName:!1})),function shouldRenderPermissionSettingsTab(e){return S.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_PERMISSIONS&&S.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_REQUEST_PERMISSIONS&&null!=e}(this.props.schema)&&d.createElement(Ye.OK,{tabKey:"ASSAY_SCHEMA_ACCESS_POLICIES",title:"Access Policies"},d.createElement(Qo.ZP,{assaySchemaId:this.props.schema?this.props.schema.id:""}))))}}SchemaPage.propTypes={schemaId:Ps().string.isRequired,schemaType:Ps().oneOf(Object.keys(Ei.R)).isRequired,editSectionClass:Ps().func.isRequired,schema:Ps().oneOfType([Xo.vB,Wo.eM]),listingUrl:Ps().string.isRequired}
const il=Jo.Z.connect(((e,t)=>({editSectionClass:nl,schema:e.getAssaySchema(t.schemaId),listingUrl:uo.VO(t.schemaType)})))(SchemaPage)
class RequestTaskSchemaEditConnector extends _.C{getEditingName(e,t){return null!=e?e:t?t.name:""}enhanceProps(){const{requestTaskSchemasById:e}=this.reduxState().models.requests.schemas,t=null==e?null:e[this.props.schemaId],{name:n,specString:a,errorState:i,sessionId:r}=this.reduxState().ui.schemaConfig,{errors:s,errorMessage:o}=null!=i?i:{errors:null,errorMessage:null}
return{allowEditMetadata:!0,errors:s,errorMessage:o,name:this.getEditingName(n,t),schema:t,specString:a,fetchSchema:e=>{(0,so.getStore)().dispatch(co._L(e))},updateSchema:({schemaId:e,schemaName:t,sqlIdentifier:n,spec:a})=>{(0,so.getStore)().dispatch(co.Vc({schemaId:e,schemaName:t,spec:a}))},warehouseTableName:t&&t.sqlIdentifier,ownerName:t&&t.organization.name,sessionId:r}}}const rl=RequestTaskSchemaEditConnector.connect(SchemaEditSection),sl=(0,V.$j)(((e,t)=>{const{requestTaskSchemasById:n}=e.models.requests.schemas
return{editSectionClass:rl,listingUrl:lo.k4(),schema:n?n[t.schemaId]:null}}))(SchemaPage)
var ol=n(609630),ll=n(315727),cl=n(895640),dl=n(741522),ul=n(876831),ml=n(778095),pl=n(286708),hl=n(216101),El=n(386382)
class RegistrySettingsMemberRow extends d.Component{constructor(){super(...arguments)
this.state={isBeingEdited:!1}
this._handleCancel=()=>{this.setState({isBeingEdited:!1})}
this._handleComplete=e=>{this.setState({isBeingEdited:!1})
this.props.onComplete(this.props.index,e)}
this._handleEdit=()=>{this.setState({isBeingEdited:!0})}}render(){return d.createElement(ne.Z,{className:N()("registrySettingsTable-row u-vertical-center-items",{"is-beingEdited":this.state.isBeingEdited})},d.createElement(ee.Z,{xs:4,className:"registrySettingsTable-col"},this.props.member.handle),d.createElement(ee.Z,{xs:4,className:"registrySettingsTable-col"},this.props.member.name),d.createElement(ee.Z,{xs:4},d.createElement(ul.Z,{complete:this._handleComplete,cancel:this._handleCancel,edit:this._handleEdit,initialAlias:this.props.member.initials,initialIsBeingEdited:!1,isWritable:this.props.isRegistryWritable,placeholder:"Enter option name",validate:this.props.validateInitials})))}}const Sl=RegistrySettingsMemberRow
var Tl=n(659133),gl=n(712893)
class DeleteOrArchiveRegistryButton extends d.Component{constructor(){super(...arguments)
this.canDelete=()=>{const e=hl.hasSettingsAccess(this.props.registry),t=!Ra.Z.hasEnterprisePlan()
return e&&t}
this.handleConfirmDelete=()=>{var e
const t=null===(e=this.props.registry)||void 0===e?void 0:e.rootFolder.api_identifier,n=Tl.Z.getSourceNameAndOwnerComponent(this.props.registry,!1)
gl.Z.open({deleteDescription:d.createElement("span",null,"the registry ",d.createElement("strong",null,n)),doDelete:this.props.onDelete,fileIds:[t]})}
this.handleOpenArchiveModal=()=>{ct.bA({items:[this.props.registry],onArchive:Hi.Jv})}}render(){return this.canDelete()?d.createElement(O.Co,{buttonStyle:O.ZJ.NEGATIVE,onClick:S.ZP.ENABLE_ARCHIVING_V2?this.handleOpenArchiveModal:this.handleConfirmDelete,size:O.qE.MEDIUM,text:S.ZP.ENABLE_ARCHIVING_V2?"Archive Registry":"Delete Registry"}):null}}const fl=DeleteOrArchiveRegistryButton
class DeleteOrArchiveRegistryButtonContainerConnector extends _.C{constructor(){super(...arguments)
this.stores=[ml.Z]}enhanceProps(){return{registry:this.navStore().getSource(this.props.registryId)}}}class DeleteOrArchiveRegistryButtonContainer extends d.Component{constructor(){super(...arguments)
this.handleDelete=()=>{oo.Z.delete(this.props.registryId)}}componentDidMount(){this.props.registry||ta.Z.fetchSources()}render(){return this.props.registry?d.createElement(fl,{onDelete:this.handleDelete,registry:this.props.registry}):d.createElement(H.Z,null)}}DeleteOrArchiveRegistryButtonContainer.propTypes={registryId:Ps().string.isRequired}
const Il=DeleteOrArchiveRegistryButtonContainerConnector.connect(DeleteOrArchiveRegistryButtonContainer)
var Al=n(709759)
class RegistryCollaboratorsSectionConnector extends _.C{enhanceProps(){return{collaborators:this.getOrFetchRequired(Ro.V.COLLABORATORS_BY_SOURCE_ID,this.props.registry.id),dataPolicies:(0,I.Z)(this.reduxState().models.policies.dataPolicies)}}}class RegistryCollaboratorsSection extends d.Component{constructor(e){super(e)
this._handleSubmit=()=>{this.setState({isSubmitting:!0});(0,ol.Kz)({changeSummary:(0,El.P_)({itemCounts:{[El.HM.REGISTRY]:1},action:El.wV.MODIFY}),onRequestClose:()=>{this._cancelSubmitAction()},onRequestSubmit:()=>{dl.Z.update(this.props.registry.id,{ownerInfo:this.state.ownerInfo,collaborators:this.state.collaborators.filter((({id:e})=>e!==this.state.owner.id))}).then((({collaborators:e})=>{(0,so.getStore)().dispatch((0,Al.IH)(Ro.V.COLLABORATORS_BY_SOURCE_ID,{[this.props.registry.id]:e}))
rt.ZP.success("Successfully updated collaborators.")})).catch((e=>{rt.ZP.notifyError(e)})).finally((()=>{this._cancelSubmitAction()}))}},S.ZP.REGISTRY_SETTINGS_ENABLE_DATA_MOD_REASONS,{module:"REGISTRY",actionOrigin:"registry_settings_general_update_collaborators",modifiedAction:"REGISTRY_SETTINGS_COLLABORATORS",numModifiedTotalItems:1,entryId:null})}
this._handleUpdate=e=>{e.collaborators&&this.setState({collaborators:e.collaborators})
e.ownerInfo&&this.setState({ownerInfo:e.ownerInfo})
e.owner&&this.setState({owner:e.owner})}
this._getAdminDataPolicyId=e=>(0,At.Uj)(e).id
this._getDefaultDataPolicyId=e=>(0,At.Kh)(e).id
this._isMounted=!0
this.state={collaborators:e.collaborators,isSubmitting:!1,ownerInfo:e.registry.ownerInfo,owner:e.registry.s_owner}}componentWillUnmount(){this._isMounted=!1}UNSAFE_componentWillReceiveProps(e){e.registry.id!==this.props.registry.id&&this.setState({collaborators:e.collaborators,ownerInfo:e.registry.ownerInfo,owner:e.registry.s_owner})}_cancelSubmitAction(){this._isMounted&&this.setState({isSubmitting:!1})}render(){const e=!this.props.registry.permissions.admin
return d.createElement("div",null,d.createElement(_t.Z,{getAdminPolicyId:this._getAdminDataPolicyId,getDefaultPolicyId:this._getDefaultDataPolicyId,collaborators:this.state.collaborators,enableAuditors:!1,isReadOnly:e,policeableId:this.props.registry.id,owner:this.state.owner,ownerInfo:this.state.ownerInfo,onUpdate:this._handleUpdate,policies:this.props.dataPolicies,policyType:yt.Mi.DATA}),!e&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,disabled:this.state.isSubmitting,onClick:this._handleSubmit,size:O.qE.MEDIUM,text:"Update collaborators",dataTestAttrs:{component:"RegistryCollaboratorsSection",element:"updateButton"}}))}}RegistryCollaboratorsSection.propTypes={collaborators:vs.arrayOf(yt.fN).isRequired,registry:Vt.REGISTRY_SHAPE,dataPolicies:vs.arrayOf(oe.iN.isRequired)}
const yl=RegistryCollaboratorsSectionConnector.connect(RegistryCollaboratorsSection),_l=/^[a-zA-Z]*$/
class RegistryGeneralSettingsPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[ts.Z,ml.Z,pl.Z]}enhanceProps(){const e=this.navStore().getSource(this.props.registryId),t=this.entityStore().currentUser().organizations.find((e=>e.url_identifier===this.props.ownerUrlId))
return{isWritable:Boolean(e)&&hl.hasSettingsAccess(e),members:null!=t?this.entityStore().getMembersForGroup(t.id):null,orgInitials:null!=t?this.entityStore().getEntity(t.id).initials:null,registry:this.navStore().getSource(this.props.registryId)}}}class RegistryGeneralSettingsPage extends d.Component{constructor(){super(...arguments)
this._getOrganizationId=(e=this.props.ownerUrlId)=>{const t=ts.Z.currentUser().organizations.find((t=>t.url_identifier===e))
return null==t?void 0:t.id}
this._handleSetMemberInitials=(e,t)=>{const n={[this.props.members[e].id]:t}
m.FH(this._getOrganizationId(),{initialsByUserId:n})}
this._handleSetOrgInitials=e=>{m.FH(this._getOrganizationId(),{orgInitials:e,initialsByUserId:{}})}
this._validateInitials=(e,t)=>{if(!_l.test(t)){rt.ZP.error("Initials can only contain letters (no numbers, spaces, or special characters)")
return!1}return!0}
this._validateOrgInitials=async(e,t)=>{if(!this._validateInitials(e,t))return!1
return await M.iG("Change Organization Initials?",`This will change how Registry IDs are generated. We use the schema prefix along with the organization initials (e.g. p${t}001).`,"danger",{promiseCompatible:!0})}
this._validateMemberInitials=(e,t)=>{if(!this._validateInitials(e,t))return!1
if(e&&e.toLowerCase()!==t.toLowerCase()&&this.props.members.some((e=>Boolean(e.initials)&&e.initials.toLowerCase()===t.toLowerCase()))){rt.ZP.error("Another member of the organization already has those initials")
return!1}return!0}}componentDidMount(){this.props.members||null==this._getOrganizationId()||m.Mv(this._getOrganizationId())
this.props.registry||ta.Z.fetchSources()}componentWillReceiveProps(e){if(e.ownerUrlId!==this.props.ownerUrlId&&null!=this._getOrganizationId()){ts.Z.getMembersForGroup(this._getOrganizationId(e.ownerUrlId))||m.Mv(this._getOrganizationId(e.ownerUrlId))}}render(){(0,T._w)("General - Registry Settings")
const e=Ra.Z.hasEnterprisePlan(),t=this.props.members?this.props.members.map(((e,t)=>d.createElement(Sl,{key:e.handle,member:e,index:t,isRegistryWritable:this.props.isWritable,onComplete:this._handleSetMemberInitials,validateInitials:this._validateMemberInitials}))):d.createElement("div",{className:"u-spacing-top"},d.createElement(H.Z,null))
return d.createElement("div",{className:"settingsPage",...(0,g.Z)({component:"RegistryGeneralSettingsPage",element:"root"})},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",{className:(0,C.iv)(Rl.header)},d.createElement(f.R6,{className:"settingsPage-header"},"General settings"),d.createElement(Q.Z,{ids:null!=this.props.registry?[this.props.registry.id]:[],buttonSize:O.qE.MEDIUM,buttonStyle:O.ZJ.TERTIARY_GRAY})),this.props.registry&&e&&d.createElement("div",null,d.createElement(ne.Z,{className:"u-spacing"}),d.createElement(f.zV,null,"Permissions"),S.ZP.PERMISSIONS_ENABLE_NEW_COLLABORATION_UI?d.createElement(RegistryCollaborationManagementContent,{key:this.props.registryId,registry:this.props.registry,readOnly:!this.props.registry.permissions.admin}):d.createElement(yl,{registry:this.props.registry})),this.props.registry&&!this.props.registry.disablePersonalCollections&&d.createElement("div",null,d.createElement(ne.Z,{className:"u-spacing"}),d.createElement(f.zV,null,"Collections"),d.createElement(ne.Z,null,d.createElement(ee.Z,{xs:4},d.createElement(ne.Z,{className:"registrySettingsTable-headerRow"},d.createElement(ee.Z,{xs:12,className:"registrySettingsTable-primaryHeader"},"Organization Initials",d.createElement(le.Z,{iconClassName:"u-mini-spacing-left",renderContent:()=>d.createElement("div",{className:"u-normal-font-weight u-no-text-transform"},'Used to generate IDs when entities are registered (e.g. "BN" will generate IDs like pBN001)'),placement:Pe.ZH.BOTTOM}))),d.createElement(ne.Z,{className:N()("registrySettingsTable-row","borderless")},d.createElement(ee.Z,{xs:12,className:"registrySettings-field"},d.createElement(ul.Z,{allowEmpty:!0,complete:this._handleSetOrgInitials,initialAlias:this.props.orgInitials,isWritable:this.props.isWritable,placeholder:"Enter organization initials",validate:this._validateOrgInitials}))))),d.createElement(ne.Z,{className:"u-spacing"}),d.createElement(ne.Z,{className:"registrySettingsTable-headerRow"},d.createElement(ee.Z,{xs:4,className:"registrySettingsTable-primaryHeader"},"Member Username"),d.createElement(ee.Z,{xs:4},"Name"),d.createElement(ee.Z,{xs:4},"Initials")),t),d.createElement(ne.Z,{className:"u-spacing"}),d.createElement(Il,{registryId:this.props.registryId})))}}const Cl=RegistryGeneralSettingsPageConnector.connect(RegistryGeneralSettingsPage)
function RegistryCollaborationManagementContent({registry:e,readOnly:t}){const[n,a]=(0,cl.Z)(e.id),[i,r]=d.useState(!1)
d.useEffect((()=>{n.queryResultType===nt.NI.PENDING?Cr.$Z():Cr.Cp()}),[n.queryResultType])
if(n.queryResultType===nt.NI.ERROR){rt.ZP.error("Could not load collaborators; try reloading the page.")
return d.createElement(d.Fragment,null)}if(n.queryResultType!==nt.NI.SUCCESS)return d.createElement(d.Fragment,null)
const _handleSubmit=async()=>{r(!0)
await(async(e,t)=>{await(0,ol.GE)({changeSummary:(0,El.P_)({itemCounts:{[El.HM.REGISTRY]:1},action:El.wV.MODIFY}),onRequestClose:()=>{},onRequestSubmit:()=>{var n,a
const[i,r]=(0,St.uK)(t,(e=>{var t
return null!==(t=e.fromOwnership)&&void 0!==t&&t})),s=i.filter((e=>e.policy!==ll.p$)).find((e=>e.organizationRole===Js.OrganizationPermissionRole.MEMBER))
dl.Z.update(e,{collaborations:(0,yt.E9)(r),ownerInfo:{type:"organization",memberDataPolicyId:null!==(a=null===(n=null==s?void 0:s.policy)||void 0===n?void 0:n.id)&&void 0!==a?a:null}}).then((()=>{rt.ZP.success("Successfully updated collaborators.")})).catch((e=>{rt.ZP.notifyError(e)}))}},S.ZP.REGISTRY_SETTINGS_ENABLE_DATA_MOD_REASONS,{module:"REGISTRY",actionOrigin:"registry_settings_general_update_collaborators",modifiedAction:"REGISTRY_SETTINGS_COLLABORATORS",numModifiedTotalItems:1,entryId:null})})(e.id,n.collaborations).then((async()=>{var e,t
await(null!==(t=null===(e=a.refetch)||void 0===e?void 0:e.call(a))&&void 0!==t?t:Promise.resolve())})).finally((()=>{r(!1)}))}
let s=n.collaborations
void 0===s.find((e=>e.fromOwnership))&&(s=[...s,{__typename:"CollaborationNode",party:{__typename:"OrganizationNode",avatarUrl:e.s_owner.avatar_url,admin:!1,...e.s_owner},organizationRole:Js.OrganizationPermissionRole.MEMBER,teamRole:null,auditor:null,fromOwnership:!0,resource:{__typename:"RestrictedResourceNode",id:e.id,name:e.name,type:"registry"},policy:ll.p$}])
return d.createElement("div",null,d.createElement("div",{className:"u-large-padding-bottom"},d.createElement(ll.gY,{...n,...a,collaborations:s,isReadOnly:t||i,renderAuditorColumn:!1})),d.createElement("div",{className:(0,C.iv)(Rl.buttonsDiv)},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,size:O.qE.MEDIUM,text:"Save",disabled:t,onClick:async()=>{await _handleSubmit()},dataTestAttrs:{component:"RegistryCollaborationManagementContent",element:"saveButton"}})))}const Rl=C.mM.create({header:{display:"flex",justifyContent:"space-between"},buttonsDiv:{display:"flex",gap:5,flexDirection:"row"}})
var Nl=n(567739),Ol=n(759426),bl=n(490776),vl=n(328002)
class RegistrySelectorsSettingsPage extends d.Component{constructor(){super(...arguments)
this.state={selectedArchivePurposes:[us.BH],searchQuery:""}
this.getShownSelectors=()=>{var e
let t=null!==(e=Ol.F(this.props.selectors,this.state.selectedArchivePurposes))&&void 0!==e?e:[]
""!==this.state.searchQuery&&(t=t.filter((e=>fs.Z.caseInsensitiveContains(e.name,this.state.searchQuery))))
return t}
this.handleChangeSelectedArchivePurposes=e=>{this.setState({selectedArchivePurposes:e})}
this.handleCreate=()=>{T.c4(null,hl.getCreateSchemaFieldSelectorUrl(this.props.ownerUrlId,this.props.registryId))}
this.getEditUrl=e=>{const t=this.getShownSelectors()[e]
return hl.getSchemaFieldSelectorSettingsUrl(this.props.ownerUrlId,this.props.registryId,t.id)}
this.handleArchive=e=>{const t=this.getShownSelectors()[e]
ct.bA({items:[t],onArchive:Hi.JT})}
this.handleUnarchive=e=>{const t=this.getShownSelectors()[e]
Hi.Q0([t.id])}
this.handleDelete=e=>{const t=this.getShownSelectors()[e]
M.iG(`Delete "${t.name}"`,"Are you sure you want to delete this dropdown?","danger").done(vl.Z.delete.bind(null,t.id))}}componentDidMount(){bl.Z.fetchForRegistry(this.props.registryId)}componentDidUpdate(){bl.Z.fetchForRegistry(this.props.registryId)}render(){(0,T._w)("Dropdowns - Registry Settings")
let e
this.getShownSelectors()&&(e=this.getShownSelectors().map(((e,t)=>({id:e.id,itemIndex:t,isArchived:(0,Ci.ZP)(e),values:[d.createElement("span",{className:"u-small-spacing-left"},e.name,d.createElement(no.Z,{item:e})),ue.default.pluck(e.schemaFieldSelectorOptions,"name").join(", ")]}))))
const t=null==this.props.selectors
return d.createElement("div",{className:"settingsPage",...(0,g.Z)({component:"RegistrySelectorsSettingsPage",element:"root"})},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement(Es.ZP,{tableName:"Dropdowns",columnHeaders:[{name:"Name",width:4},{name:"Options",width:8}],emptyMessage:"This registry has no dropdowns",isLoading:t,onArchive:this.handleArchive,onCreate:this.handleCreate,onDelete:this.handleDelete,allowDeleteAfterArchive:eo.Z.get(Vt.RegistryPreferences.ENABLE_DROPDOWN_DELETE),getEditUrl:this.getEditUrl,onUnarchive:this.handleUnarchive,rows:e,leftSubheaderNode:t?null:d.createElement("div",{className:"u-flex-display"},d.createElement(Ln.ZP,{className:(0,C.iv)(Pl.searchInput),borderRadius:Ln.cM.LARGE,placeholder:"Search",value:this.state.searchQuery,onChange:e=>{this.setState({searchQuery:e.target.value})},onEscape:()=>{this.setState({searchQuery:""})}}),d.createElement(ms.Z,{itemIds:this.props.selectors.map((e=>e.id)),onChangePurposes:this.handleChangeSelectedArchivePurposes,selectedPurposes:this.state.selectedArchivePurposes})),writable:this.props.isWritable})))}}const Pl=C.mM.create({searchInput:{marginRight:10,width:200}}),Ll=qo.Z.connect((function mapSchemaFieldSelectorStoreToProps(e,{registryId:t}){return{selectors:e.getOrderedSelectorsForRegistry(t,{includeArchived:!0})}}))((function QueryingRegistrySelectorsSettingsPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(RegistrySelectorsSettingsPage,{...e,isWritable:t})}))
var Dl=n(556543)
const bioentityTypeToHumanName=e=>null==e?"None":(0,Dl.yw)({schema:{folderItemType:e.folderItemType,sequenceType:e.sequenceType}})
function SchemaInterfaceBaseBioentityTypeDropdown(e){const t=[null,...[{folderItemType:_e.BASIC_FOLDER_ITEM,sequenceType:null},{folderItemType:_e.SEQUENCE,sequenceType:Vt.SequenceSchemaType.DNA_SEQUENCE},{folderItemType:_e.SEQUENCE,sequenceType:Vt.SequenceSchemaType.OLIGO},{folderItemType:_e.SEQUENCE,sequenceType:Vt.SequenceSchemaType.RNA_SEQUENCE},{folderItemType:_e.SEQUENCE,sequenceType:Vt.SequenceSchemaType.RNA_OLIGO},{folderItemType:_e.PROTEIN,sequenceType:null},S.ZP.CHEMISTRY_ENABLE_MOLECULE&&{folderItemType:_e.MOLECULE,sequenceType:null},{folderItemType:_e.MIXTURE,sequenceType:null}].filter((e=>Boolean(e)))]
return d.createElement(an.Z,{id:ue.default.uniqueId("baseBioentityType"),label:"Entity Type",labelStyle:F.Z.STYLES.LABEL,isRequired:!1},d.createElement(w.ZP,{className:(0,C.iv)(Ml.dropdown),displayName:bioentityTypeToHumanName(e.bioentityType),disabled:!e.canSetBaseBioentityType,dataTestAttrs:e.dataTestAttrs,menu:d.createElement(U.ZP,{value:e.bioentityType,height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,scrollable:!0},t.map((t=>{const n=$()(t)
return d.createElement(x.Z,{key:n,value:n,onSelect:()=>{e.onBioentityTypeChanged(t)}},bioentityTypeToHumanName(t))})))}))}const Ml=C.mM.create({dropdown:{flex:1}})
var wl=n(433888)
const Fl=[{name:"Schema Interfaces",width:4},{name:"Organization",width:4},{name:"Entity Type",width:4}]
class PresentationalSchemaInterfacesPage extends d.Component{constructor(){super(...arguments)
this.handleNavigateToCreate=()=>{T.c4(null,(0,wl.Yt)())}
this.bulkArchiveSchemaInterfaces=async(e,t)=>{try{await(0,st.jI)((0,wl.uc)(e,t),"Archiving...")
rt.ZP.success("Items successfully archived.")}catch(e){rt.ZP.notifyError(e)}this.props.refetch()}
this.bulkUnarchiveSchemaInterfaces=async e=>{try{await(0,st.jI)((0,wl.Re)(e))
rt.ZP.success("Items successfully unarchived.")}catch(e){rt.ZP.notifyError(e)}this.props.refetch()}}render(){T._w("Schema Interfaces")
return d.createElement(Yi.Z,{schemas:this.props.schemaInterfaces,schemaType:Ei.R.SCHEMA_INTERFACE,columnHeaders:Fl,navigateToCreate:this.handleNavigateToCreate,urlForSchema:wl.Tz,archiveSchemas:this.bulkArchiveSchemaInterfaces,unarchiveSchemas:this.bulkUnarchiveSchemaInterfaces,isWritable:this.props.areOrganizationSchemasCreatable,mapSchemaToRowValue:e=>[d.createElement("span",null,e.name),d.createElement("span",null,e.organization.name),d.createElement("span",null,bioentityTypeToHumanName(e.baseBioentityType))]})}}const kl=ot.Ps`
  query SchemaInterfacesPageQuery($paginationParameters: SequencePaginationParameters)
  @skipAudit
  @engComponent(name: SCHEMAS) {
    schemaInterfaceListing(paginationParameters: $paginationParameters) {
      schemaInterfaces {
        id
        name
        organization {
          id
          name
        }
        baseBioentityType {
          folderItemType
          sequenceType
        }
        ...HasArchiveRecordGraphQL
      }
      lastSeenApiId
    }
  }
  ${(0,ut.f)("HasArchiveRecord").fragment}
`
function SchemaInterfacesPage(){const e=(0,Wi.Z)(),t=e.queryResultType===nt.NI.SUCCESS&&e.areOrganizationSchemasCreatable,n=(0,nt.IJ)(kl,{fetchPolicy:"cache-and-network",variables:{paginationParameters:{limit:200,lastSeenApiId:null}}}),a=n.type===nt.NI.SUCCESS?[...n.data.schemaInterfaceListing.schemaInterfaces].sort(((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))):null
return d.createElement(PresentationalSchemaInterfacesPage,{schemaInterfaces:a,areOrganizationSchemasCreatable:t,refetch:n.refetch})}var Ul=n(119369),xl=n(334450),Bl=n(690331),Zl=n(605209)
function ImplementingSchemasTable(e){var t,n,a,i
const r=null==e.interface,s=null!==(i=null===(a=null===(n=null===(t=e.interface)||void 0===t?void 0:t.schemas)||void 0===n?void 0:n.map((e=>(0,Ai.tY)("TagSchema",e))))||void 0===a?void 0:a.sort((({name:e},{name:t})=>e.toLowerCase().localeCompare(t.toLowerCase()))))&&void 0!==i?i:[],o=(0,St.m8)(s.map(((e,t)=>(0,St.LI)(e.id,t)))),mapSchemaToRowValue=e=>[d.createElement("div",null,d.createElement(P.Z,{className:"typeIcon u-small-spacing-left",icon:e.iconId}),d.createElement("span",{className:"u-small-spacing-left"},e.name,d.createElement(no.Z,{item:e}))),(0,Dl.yw)({schema:e}),ue.default.pluck(e.fields,"name").join(", ")],l=s.map((e=>({id:e.id,itemIndex:o[e.id],isArchived:(0,Ci.ZP)(e),values:mapSchemaToRowValue(e)})))
return d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",{className:"u-large-spacing-bottom"},d.createElement("p",null,"This interface has been applied to the following entity schemas:")),d.createElement(Es.ZP,{columnHeaders:[{name:"Schemas",width:4},{name:"Entity Type",width:2},{name:"Entity Fields",width:6}],emptyMessage:"There are no schemas implementing this interface.",isLoading:r,rows:l,getEditUrl:t=>{if(null!=e.interface){const n=s[t]
return hl.getTagSchemaSettingsUrl(e.interface.organization.urlIdentifier,n.registryId,n.id)}return null},writable:!1,leftSubheaderNode:null}))}var ql=n(38317),Gl=n(153875)
const Vl=function SchemaInterfaceEditFieldTable(e){return d.createElement(Gl.Z,{...e,onFieldsChange:t=>{const{addedFields:n,removedFields:a,updatedFields:i}=((e,t)=>{const n=[],a=[],i=t.filter((t=>!e.find((e=>e.apiId===t.apiId))))
e.forEach((e=>{if(e.apiId){const n=t.find((t=>t.apiId===e.apiId))
n&&(z()(n,e)||a.push(e))}else n.push(e)}))
return{addedFields:n,removedFields:i,updatedFields:a}})(t,e.fields)
if(n.length+a.length+i.length>1)e.onFieldChangeError()
else{n.length&&e.onFieldAdd(n[0])
a.length&&e.onFieldRemove(a[0].apiId)
i.length&&e.onFieldUpdate(i[0])}},isBeingCreated:!1})}
var Hl=n(270671),Wl=n(655189),Yl=n(679027),$l=n(795824),Kl=n(4177)
function SchemaInterfacePrefixInput(e){const[t,n]=d.useState(!1)
const a=d.createElement("div",{className:(0,C.iv)(zl.prefixInput)},d.createElement(Oi.Z,{isBeingCreated:null==e.interface,isRequired:e.isRequired,isWritable:e.isWritable,prefix:e.prefix,onPrefixChange:function validateAndChangePrefix(t){if(""===t&&null!=e.interface&&e.interface.schemas.length>0)n(!0)
else{e.onPrefixChange(t)
n(!1)}},dataTestAttrs:e.dataTestAttrs,emptyValueAllowed:!0}))
return t?d.createElement(an.Z,{id:ue.default.uniqueId("schemaInterfacePrefixInput"),error:{message:"Prefix cannot be unset while schemas implement this interface",style:Gr.P1.ERROR}},a):a}const zl=C.mM.create({prefixInput:{width:"100%"}}),Ql={component:"SchemaInterfaceMetadataSection"},jl={name:{...Ql,element:"schemaInterfaceName"},baseBioentityType:{...Ql,element:"schemaInterfaceBaseBioentityType"},owner:{...Ql,element:"ownerName"},warehouseTable:{...Ql,element:"warehouseTable"},prefix:{...Ql,element:"schemaInterfacePrefix"}}
function SchemaInterfaceMetadataSection(e){var t,n,a,i,r
return d.createElement(d.Fragment,null,d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataRow1)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataColumn1)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataField)},d.createElement(Ri.Z,{isWritable:!0,name:e.name,onNameChange:e.onNameChange,schema:e.interface,dataTestAttrs:jl.name}))),d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataColumn2)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataField)},d.createElement(Ni.Z,{ownerId:e.ownerId,ownerChoices:e.ownerChoices,onOwnerChange:e.onOwnerChange,schema:e.interface,dataTestAttrs:jl.owner,ownerLabel:"Organization"})))),d.createElement("div",{className:S.ZP.SCHEMAS_ENABLE_INTERFACE_REGISTRY_ID_AND_NAMING_FEATURES?(0,C.iv)(Xl.schemaMetadataRow1):(0,C.iv)(Xl.schemaMetadataRow2)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataColumn1)},!e.hideWarehouseTableName&&d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataField)},d.createElement(bi.Z,{isWritable:e.isEditableWarehouseTableName,schema:e.interface,sqlIdentifier:e.sqlIdentifier||"",onSqlIdentifierChange:e.onSqlIdentifierChange,dataTestAttrs:jl.warehouseTable}))),d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataColumn2)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataField)},d.createElement(SchemaInterfaceBaseBioentityTypeDropdown,{bioentityType:e.baseBioentityType,onBioentityTypeChanged:e.onBaseBioentityTypeChange,canSetBaseBioentityType:e.canSetBaseBioentityType,dataTestAttrs:jl.baseBioentityType})))),S.ZP.SCHEMAS_ENABLE_INTERFACE_REGISTRY_ID_AND_NAMING_FEATURES&&d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataRow2)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataColumn1)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataField)},d.createElement(SchemaInterfacePrefixInput,{interface:e.interface,isRequired:!1,isWritable:!0,prefix:e.prefix,onPrefixChange:e.onPrefixChange,dataTestAttrs:jl.prefix}))),null!=e.nameTemplateParts&&null!=e.fields&&null!=e.labelingStrategies&&e.onNameTemplateChange&&d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataColumn2)},d.createElement("div",{className:(0,C.iv)(Xl.schemaMetadataField)},d.createElement(Kl.Z,{nameTemplateParts:e.nameTemplateParts,schemaFields:e.fields.map((e=>(0,Gl.T)(e))),bioentityType:null!==(n=null===(t=e.baseBioentityType)||void 0===t?void 0:t.folderItemType)&&void 0!==n?n:"",sequenceType:null!==(i=null===(a=e.baseBioentityType)||void 0===a?void 0:a.sequenceType)&&void 0!==i?i:null,isWritable:!0,setNameTemplateParts:e.onNameTemplateChange,shouldOrderNamePartsBySequence:null!==(r=e.shouldOrderPartsBySequence)&&void 0!==r&&r,labelingStrategies:e.labelingStrategies})))))}const Jl={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},Xl=C.mM.create({ownerDropdown:{flex:1},schemaMetadataRow1:{...Jl,marginBottom:"10px"},schemaMetadataRow2:{...Jl,marginBottom:"32px"},schemaMetadataColumn1:{flex:.33,minWidth:0},schemaMetadataColumn2:{flex:.63,minWidth:0},schemaMetadataField:{width:"auto",marginBottom:"0"}})
var ec=n(480322)
const filterFieldsByFieldTypes=(e,t)=>t.filter((t=>t.fieldType===e))
function SchemaInterfaceMetadataSettings(e){var t,n
let a=null
e.name||(a="Schema needs a name")
const i=null==e.constraint||!e.constraint.uniqueResidues&&!e.constraint.uniqueCanonicalSmiles
return d.createElement("div",{className:"u-flex-grow u-min-width-zero"},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement(SchemaInterfaceMetadataSection,{isEditableWarehouseTableName:S.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME,name:e.name,ownerId:e.ownerId,ownerChoices:e.ownerChoices,sqlIdentifier:e.sqlIdentifier,onNameChange:e.setName,onOwnerChange:t=>{e.setOwnerId(t.id)},onSqlIdentifierChange:e.setSqlIdentifier,interface:e.interface,baseBioentityType:e.baseBioentityType,onBaseBioentityTypeChange:t=>{if(null==t||!(n=null==t?void 0:t.sequenceType,null!=n&&[Vt.SequenceSchemaType.DNA_SEQUENCE,Vt.SequenceSchemaType.RNA_SEQUENCE].includes(n))){const n=filterFieldsByFieldTypes(wo.FIELD_TYPES.PART_LINK.type,e.fields),a=filterFieldsByFieldTypes(wo.FIELD_TYPES.TRANSLATION_LINK.type,e.fields)
if(n.length>0||a.length>0){const e=bioentityTypeToHumanName(t),i=n.map((e=>`${e.displayName} (part link)`)).concat(a.map((e=>`${e.displayName} (translation link)`)))
rt.ZP.error(`Part and translation link fields are not supported for '${e}' entity type.           In order to update the entity type to '${e}', the following field(s) need to be updated or removed:           ${i.join(", ")}`)
return}}var n
e.setBaseBioentityType(t)},canSetBaseBioentityType:i,prefix:e.prefix,onPrefixChange:e.setPrefix,nameTemplateParts:e.nameTemplateParts,shouldOrderPartsBySequence:e.shouldOrderPartsBySequence,onNameTemplateChange:e.setNameTemplate,labelingStrategies:e.labelingStrategies,fields:e.fields}),S.ZP.SCHEMAS_ENABLE_INTERFACE_CONSTRAINTS&&d.createElement(Wl.Z,{constraint:e.constraint,folderItemType:null!==(n=null===(t=e.baseBioentityType)||void 0===t?void 0:t.folderItemType)&&void 0!==n?n:null,onAddClick:async()=>{var t,n,a
const i=e.fields.map((e=>(0,Gl.T)(e))).filter((e=>!e.isComputed&&null==e.archiveRecord)),r=await(0,D.Z)(Yl.Z,{bioentityType:null!==(n=null===(t=e.baseBioentityType)||void 0===t?void 0:t.folderItemType)&&void 0!==n?n:null,schemaFields:i,tableType:Wl.T.INTERFACE})
null!=r&&(null!=(null===(a=e.interface)||void 0===a?void 0:a.constraint)?rt.ZP.error("You may not add more than one constraint."):e.setConstraint(r))},onRemoveClick:()=>{M.iG("Remove constraint","Are you sure you want to remove this constraint?","danger",{enableRedesign:!0}).done((()=>{e.setConstraint(null)}))},writable:!0,tableType:Wl.T.INTERFACE}),d.createElement("div",{className:"u-large-spacing-bottom"},d.createElement($l.Z,{interfaceConstraintErrors:e.interfaceConstraintErrors,onClickAction:e=>{(0,j.ZP)((0,hl.getTagSchemaSettingsUrl)(e.ownerUrlId,e.registryId,e.id))},actionText:"View schema",errorsToRender:ec.X$})),S.ZP.SCHEMAS_ENABLE_INTERFACE_FIELDS&&e.fieldTable,d.createElement("div",{className:"u-large-spacing-bottom"},d.createElement($l.Z,{interfaceConstraintErrors:e.interfaceConstraintErrors,onClickAction:e=>{(0,j.ZP)((0,hl.getTagSchemaSettingsUrl)(e.ownerUrlId,e.registryId,e.id))},actionText:"View schema",errorsToRender:ec.rS})),S.ZP.SCHEMAS_ENABLE_INTERFACE_REGISTRY_ID_AND_NAMING_FEATURES&&(()=>{var t
if(e.interfaceId){const n=(null===(t=e.interface)||void 0===t?void 0:t.organization.id)||""
return ts.Z.getEntity(n).autoEnablePlan===Js.Plan.ELN_PRO}return Ra.Z.hasEnterprisePlan()})()&&d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(Hl.Z,{labelingStrategies:e.labelingStrategies,onChange:e.setLabelingStrategies,nameTemplateParts:e.nameTemplateParts,isWritable:!0,enforceLabelingStrategies:e.enforceLabelingStrategies,setEnforceLabelingStrategies:e.setEnforceLabelingStrategies}))),e.handleNext&&d.createElement(ve.pf,{tooltipTitle:a},d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.SECONDARY,disabled:null!=a,onClick:e.handleNext,size:O.qE.MEDIUM,text:"Next",dataTestAttrs:{component:"SchemaInterfaceMetadataSettings",element:"nextButton"}})))}function isValidSchemaInterfacePolicy(e){var t
return e.id!==(null===(t=S.ZP.PERMISSIONS_DEFAULT_SCHEMA_POLICIES)||void 0===t?void 0:t.create_policy_id)}const tc=ot.Ps`
  query SchemaInterfacePermissionSettingsQuery($schemaInterfaceId: StrictString!)
  @skipAudit
  @engComponent(name: SCHEMAS) {
    schemaInterface(id: $schemaInterfaceId) {
      ... on PoliceableInterface {
        id
        currentUserPermissionsJson
        ...CollaboratorInfoGraphQL
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,ut.f)("CollaboratorInfo").fragment}
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function ExistingSchemaInterfacePermissionSettings({schemaInterface:e,refetch:t}){const n=(0,Ai.tY)("CollaboratorInfo",e),[{collaborators:a,minimalCollaborators:i},r]=(0,ki.U9)(n.collaborators)
return d.createElement(Ui.K,{id:e.id,isReadOnly:!e.currentUserPermissionsJson.definitionEditable,collaborators:a,onUpdate:r,onSubmit:async()=>{await async function updateSchemaInterfaceCollaborators(e,t){const n=await(0,wl._C)(e,t);(0,It.writeFragmentsToCache)((0,ut.f)("CollaboratorInfo"),[n.interface])}(e.id,{collaborators:i})
await t()},policyPredicate:isValidSchemaInterfacePolicy})}const nc=function QueryingSchemaInterfacePermissionSettings({schemaInterfaceId:e}){const t=(0,nt.IJ)(tc,{variables:{schemaInterfaceId:e}})
if(t.type===nt.NI.ERROR)return null
if(t.type===nt.NI.PENDING)return d.createElement(H.b,null);(0,ie.hu)(!(0,at.CZ)(t.data.schemaInterface),"Expected schema interface to be accessible.")
return d.createElement(ExistingSchemaInterfacePermissionSettings,{schemaInterface:t.data.schemaInterface,refetch:async()=>{await t.refetch()}})}
var ac
!function(e){e.SCHEMA_INTERFACE_EDITOR="SCHEMA_INTERFACE_EDITOR"
e.SCHEMA_INTERFACE_ACCESS_POLICIES="SCHEMA_INTERFACE_ACCESS_POLICIES"
e.SCHEMA_INTERFACE_IMPLEMENTING_SCHEMAS="SCHEMA_INTERFACE_IMPLEMENTING_SCHEMAS"}(ac||(ac={}))
function ExistingSchemaInterfaceEditor(e){const t=e.interface.baseBioentityType,n=e.interface.fields.map((e=>({...(0,ql.C)(e,"__typename","requiredLinkJson"),fieldType:e.fieldType,requiredLink:e.requiredLinkJson}))),a=e.interface.constraint?{...(0,ql.C)(e.interface.constraint,"__typename","fieldsJson"),fields:e.interface.constraint.fieldsJson}:null,i=e.interface.labelingStrategies,r=e.interface.nameTemplates.length>0?e.interface.nameTemplates[0]:null,s=(null!=r?r.nameTemplateParts:[]).map((e=>(0,St.m8)(Object.entries(e).filter((([e,t])=>null!=t&&"__typename"!==e))))),o=e.interface.prefix,l=null!=r&&r.shouldOrderPartsBySequence,[c,u]=(0,d.useState)(ac.SCHEMA_INTERFACE_EDITOR),[m,p]=(0,d.useState)(Vt.SavingState.COMPLETED),[h,E]=(0,d.useState)([]),[S,T]=(0,d.useState)(i.length>0),handleLabelingStrategiesChange=e=>{updateInterface({labelingStrategies:e})},updateInterface=t=>{(0,st.jI)((async()=>{await(0,wl.bx)(e.interface.id,t).then((async()=>{await e.refetch()
rt.ZP.success("Updated schema interface successfully.")
E([])})).catch((e=>{var t
if(null===(t=e.responseJSON)||void 0===t?void 0:t.interfaceConstraintError){const t=(0,ec.Nq)(e.responseJSON)
t&&E(t)}rt.ZP.notifyError(e)}))})(),"Updating...")},f=(0,nt.IJ)(Zl.ro,{variables:{interfaceId:e.interface.id},renderCachedDataWhenRefetching:!0,fetchPolicy:"cache-and-network",pollInterval:12e4})
let I=!0
if(f.type===nt.NI.SUCCESS){0===(0,at.i2)(f.data.schemaInterface).schemas.length&&(I=!1)}return d.createElement("div",{className:"u-flex-grow",...(0,g.Z)({component:"ExistingSchemaInterfaceEditor",element:"root"})},d.createElement(Ye.Xl,{activeTab:c,onRequestTabChange:e=>{u(e)},className:"u-flex-grow"},d.createElement(Ye.OK,{tabKey:ac.SCHEMA_INTERFACE_EDITOR,title:"Schema Interface Settings"},d.createElement(SchemaInterfaceMetadataSettings,{interfaceId:e.interface.id,interface:e.interface,ownerId:"",setOwnerId:St.ZT,name:e.interface.name,setName:e=>{updateInterface({name:e})},sqlIdentifier:e.interface.sqlIdentifier,setSqlIdentifier:e=>{updateInterface({sqlIdentifier:e})},constraint:a,setConstraint:e=>{const t=e?(0,wl.Ky)(e):null
updateInterface({constraint:t})},ownerChoices:e.ownerChoices,fields:n,fieldTable:d.createElement("div",{className:"u-large-spacing-bottom"},d.createElement(Vl,{onFieldAdd:t=>{(0,st.jI)((async()=>{p(Vt.SavingState.PENDING)
await(0,wl.pb)({interfaceId:e.interface.id,field:(0,ql.C)(t,"apiId","id")}).then((async()=>{await e.refetch()
rt.ZP.success("Updated schema interface successfully.")
E([])
p(Vt.SavingState.SUCCESS)})).catch((e=>{var t
if(null===(t=e.responseJSON)||void 0===t?void 0:t.interfaceConstraintError){const t=(0,ec.Nq)(e.responseJSON)
t&&E(t)}p(Vt.SavingState.FAILURE)
rt.ZP.notifyError(e)}))})(),"Updating...")},onFieldRemove:t=>{(0,st.jI)((async()=>{p(Vt.SavingState.PENDING)
try{await(0,wl.gL)({interfaceId:e.interface.id,fieldId:t})
await e.refetch()
rt.ZP.success("Updated schema successfully.")
p(Vt.SavingState.SUCCESS)}catch(e){p(Vt.SavingState.FAILURE)
throw e}})(),"Updating...")},onFieldUpdate:async t=>{await(0,st.jI)((async()=>{p(Vt.SavingState.PENDING)
await(0,wl.GT)({interfaceId:e.interface.id,fieldId:t.apiId,field:(0,ql.C)(t,"apiId","id")})
await e.refetch()
rt.ZP.success("Updated schema interface successfully.")
p(Vt.SavingState.SUCCESS)
E([])})(),"Updating...")},onFieldChangeError:()=>{(0,st.jI)((async()=>{p(Vt.SavingState.PENDING)
await e.refetch()
rt.ZP.error("An error occured trying to save field changes. Please try again.")
p(Vt.SavingState.FAILURE)})(),"Updating...")},ownerId:e.interface.organization.id,ownerUrlId:e.interface.organization.urlIdentifier,isDisabled:!1,fields:n,savingState:m,storableSchemas:e.linkableSchemas.storableSchemas,tagSchemas:e.linkableSchemas.tagSchemas,submissionWarnings:I?[d.createElement(Zl.MJ,{interfaceId:e.interface.id,key:"interface-propagation"})]:[],baseBioentityType:t})),interfaceConstraintErrors:h,baseBioentityType:t,setBaseBioentityType:e=>{updateInterface({baseBioentityType:e})},prefix:o,setPrefix:e=>{updateInterface({prefix:e})},enforceLabelingStrategies:S,setEnforceLabelingStrategies:e=>{T(e)
if(e){const e=Bl.SE()
handleLabelingStrategiesChange(e)
updateInterface({labelingStrategies:e})}else handleLabelingStrategiesChange([])},labelingStrategies:i,setLabelingStrategies:handleLabelingStrategiesChange,nameTemplateParts:s,shouldOrderPartsBySequence:l,setNameTemplate:async(t,n)=>{await(0,wl.Nl)(e.interface.id,t,n).then((async()=>{await e.refetch()
rt.ZP.success("Set name template successfully.")}))}})),d.createElement(Ye.OK,{tabKey:ac.SCHEMA_INTERFACE_ACCESS_POLICIES,title:"Access Policies"},d.createElement(nc,{schemaInterfaceId:e.interface.id})),d.createElement(Ye.OK,{tabKey:ac.SCHEMA_INTERFACE_IMPLEMENTING_SCHEMAS,title:"Schemas"},d.createElement(ImplementingSchemasTable,{interface:e.interface}))))}const ic=function SchemaInterfaceCreateFieldTable(e){return d.createElement(Gl.Z,{...e,isBeingCreated:!0,submissionWarnings:[]})}
function SchemaInterfaceCreateFlow(e){var t
const[n,a]=(0,d.useState)(""),[i,r]=(0,d.useState)(null===(t=e.ownerChoices[0])||void 0===t?void 0:t.id),[s,o]=(0,d.useState)(null),[l,c]=(0,d.useState)([]),[u,m]=(0,d.useState)(null),[p,h]=(0,d.useState)(null),[E,f]=(0,d.useState)(""),[I,A]=(0,d.useState)([]),[y,_]=(0,d.useState)(!1)
const handleEnforceLabelingStrategiesChange=e=>{_(e)
if(!1===e)A([])
else{const e=Bl.SE()
A(e)}}
return d.createElement("div",{className:"u-flex-grow",...(0,g.Z)({component:"SchemaInterfaceCreateFlow",element:"root"})},d.createElement(fi.Z,{createSchema:function createInterface(e){(0,st.jI)((async()=>{const t=await(0,wl.e9)({name:n,organizationId:i,sqlIdentifier:S.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME&&s?s:null,baseBioentityType:u,constraint:p&&(0,wl.le)(p),prefix:E,labelingStrategies:I,collaborators:e,fields:l.map((e=>(0,ql.C)(e,"apiId","id")))})
T.c4(null,(0,wl.Tz)(t.id))})(),"Creating schema interface...")},defaultSchemaCollaboratorsSchemaType:Rt.l.INTERFACE,metadataTitle:"Schema Interface Settings",isSchemaPermissionsEnabled:!0,ownerId:i,organizations:e.organizations,policyPredicate:isValidSchemaInterfacePolicy,renderMetadataSettings:function renderMetadataSettings(t){return d.createElement(SchemaInterfaceMetadataSettings,{interface:null,name:n,setName:a,ownerId:i,setOwnerId:r,sqlIdentifier:s,setSqlIdentifier:o,ownerChoices:e.ownerChoices,baseBioentityType:u,setBaseBioentityType:m,prefix:E,setPrefix:f,enforceLabelingStrategies:y,setEnforceLabelingStrategies:handleEnforceLabelingStrategiesChange,labelingStrategies:I,setLabelingStrategies:A,nameTemplateParts:[],constraint:p,setConstraint:h,handleNext:t,fields:l,fieldTable:d.createElement(ic,{ownerId:i,ownerUrlId:"",isDisabled:!1,fields:l,savingState:Vt.SavingState.COMPLETED,onFieldsChange:c,tagSchemas:e.linkableSchemas.tagSchemas,storableSchemas:e.linkableSchemas.storableSchemas,baseBioentityType:u})})}}))}function SchemaInterfaceEditor(e){const t=(0,Si.u)()
return e.interfaceId||0!==t.length?d.createElement(J.Z,{title:"Schema Interfaces",subtitle:e.interface?e.interface.name:"Create Schema Interface",onClickTitle:()=>{T.c4(null,(0,wl.Tz)(""))},toolbar:e.interface&&d.createElement(hi.Z,{schemaId:e.interface.id,schemaType:Ei.R.SCHEMA_INTERFACE})},e.interface?d.createElement(ExistingSchemaInterfaceEditor,{interfaceId:e.interfaceId,interface:e.interface,ownerChoices:t,schemaPermissions:e.schemaPermissions,refetch:e.refetch,linkableSchemas:e.linkableSchemas}):d.createElement(SchemaInterfaceCreateFlow,{ownerChoices:t,organizations:e.organizations,linkableSchemas:e.linkableSchemas})):d.createElement(pi.Z,{pluralName:"schema interfaces"})}const rc=ot.ZP`
  query SchemaInterfaceEditorQuery @skipAudit @engComponent(name: SCHEMAS) {
    currentUser {
      id
      organizations {
        ... on OrganizationNode {
          ...OrganizationDefaultSchemaCollaboratorsConfiguration
        }
      }
    }
  }
  ${ui.G}
`,sc=ot.ZP`
  query SchemaInterfaceQuery($id: StrictString!) @skipAudit @engComponent(name: SCHEMAS) {
    schemaInterface(id: $id) {
      ... on SchemaInterfaceNode {
        id
        name
        organization {
          id
          name
          urlIdentifier
        }
        sqlIdentifier
        ... on PoliceableInterface {
          id
          currentUserPermissionsJson
        }
        schemas {
          ...TagSchemaGraphQL
        }
        fields {
          id
          apiId
          systemName
          displayName
          fieldType
          isRequired
          isMulti
          schemaFieldSelectorId
          requiredLinkJson
        }
        baseBioentityType {
          folderItemType
          sequenceType
        }
        constraint {
          id
          fieldsJson
          status
          uniqueResidues
          areUniqueResiduesCaseSensitive
          uniqueCanonicalSmiles
          source {
            id
            name
          }
        }
        labelingStrategies
        prefix
        nameTemplates {
          linkedItemId
          templateType
          shouldOrderPartsBySequence
          nameTemplateParts {
            datetimeFormat
            fieldId
            text
            type
          }
        }
      }
      ...HasArchiveRecordGraphQL
    }
  }
  ${(0,ut.f)("TagSchema").fragment}
  ${(0,ut.f)("HasArchiveRecord").fragment}
`
const oc=function QueryingSchemaInterfaceEditor(e){const t=(0,nt.IJ)(rc),n=(0,nt.A4)(sc,{variables:{id:e.interfaceId},skip:null==e.interfaceId,renderCachedDataWhenRefetching:!0}),a=(0,nt.IJ)(xl._),i=(0,nt.IJ)(Ul.z)
if(n.type===nt.NI.PENDING||t.type===nt.NI.PENDING||a.type===nt.NI.PENDING||i.type===nt.NI.PENDING)return d.createElement(H.b,null)
if(n.type===nt.NI.ERROR||t.type===nt.NI.ERROR||a.type===nt.NI.ERROR||i.type===nt.NI.ERROR){rt.ZP.error("Could not load schema interface; try reloading the page.")
return null}let r=null
if(n.type===nt.NI.SUCCESS){const e=n.data.schemaInterface;(0,at.CZ)(e)||(r=e)}const s=null==r?void 0:r.currentUserPermissionsJson,o=t.data.currentUser.organizations,l={tagSchemas:(0,Ai.NA)("TagSchema",a.data.tagSchemas),storableSchemas:[...(0,Ai.NA)("ContainerSchema",i.data.containerSchemas),...(0,Ai.NA)("BoxSchema",i.data.boxSchemas),...(0,Ai.NA)("LocationSchema",i.data.locationSchemas),...(0,Ai.NA)("PlateSchema",i.data.plateSchemas)]}
return d.createElement(SchemaInterfaceEditor,{interfaceId:e.interfaceId,interface:r,schemaPermissions:s,organizations:o,refetch:()=>n.refetch({id:e.interfaceId}),linkableSchemas:l})}
var lc=n(320727),cc=n(330791),dc=n(676159),uc=n(992463),mc=n(805884)
function SchemaSettingsPageContainer(e){return d.createElement(J.Z,{onClickTitle:e.onNavigateToListing,subtitle:e.schema?d.createElement("span",null,e.schema.name,d.createElement(no.Z,{item:e.schema})):"",title:`${(0,Ot.co)((0,Ot.E2)(e.schemaType))}s`,toolbar:e.schema&&Ra.Z.hasEnterprisePlan()&&d.createElement(hi.Z,{onExportSpreadsheetTemplate:e.onExportSpreadsheetTemplate,schemaId:e.schema.id,schemaType:e.schemaType})},e.children)}SchemaSettingsPageContainer.propTypes={children:Ps().node.isRequired,onExportSpreadsheetTemplate:Ps().func,onNavigateToListing:Ps().func.isRequired,schema:Ps().shape({name:Ps().string.isRequired,id:Ps().string.isRequired}),schemaType:Ps().oneOf(Object.values(_e)).isRequired}
var pc=n(838549),hc=n(869797),Ec=n(331471),Sc=n(136701),Tc=n(280034),fc=n(62315)
function gqlTagSchemaWithValidationSummariesToREST(e){const t=function gqlTagSchemaWithStatusSummaryToREST(e){const t=(0,Ai.tY)("TagSchema",e),n=e.validationStatusSummary?(0,Ai.tY)("TagSchemaValidationStatusSummary",e):null
return{...t,validationStatusSummary:n?n.validationStatusSummary:null}}(e),n=e.validationErrorLabelSummary?(0,Ai.tY)("TagSchemaValidationErrorLabelSummary",e):null
return{...t,validationErrorLabelSummary:n?n.validationErrorLabelSummary:null}}const Ic=ot.Ps`
  query TagSchemaValidationSettingsQuery($tagSchemaId: StrictString!)
  @skipAudit
  @engComponent(name: REGISTRY) {
    tagSchema(id: $tagSchemaId) {
      ...TagSchemaGraphQL
      ...TagSchemaValidationStatusSummaryGraphQL
      ...TagSchemaValidationErrorLabelSummaryGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("TagSchema").fragment}
  ${(0,ut.f)("TagSchemaValidationErrorLabelSummary").fragment}
  ${(0,ut.f)("TagSchemaValidationStatusSummary").fragment}
  ${(0,ut.f)("InaccessibleInfo").fragment}
`,Ac=[Tc.WX.CONSTRAINT_VIOLATION,Tc.WX.INVALID_LINK,Tc.WX.INVALID_VALUE,Tc.WX.MISSING_REQUIRED,Tc.WX.INVALID_MULTIPLE_LINK,Tc.WX.OTHER]
function getDefaultRowSelection(e){return(0,St.m8)(Ac.map((t=>[t,e])))}function getValidationSearchUrl(e,t,n){return(0,os.q7)("/search",{offset:0,limit:25,sorts:[{key:fc.bo.SORT_MODIFIED_AT_KEY,reverse:!0}],filters:[{key:fc.Vm.SCHEMA,operator:fc.EF.IS_ONE_OF,value:[e.id]},{key:fc.Vm.TYPES,operator:fc.EF.IS_ONE_OF,value:(0,Dl.Qg)(e)},{key:fc.Vm.SCHEMA_VALIDATION_STATUS,operator:fc.EF.IS_ONE_OF,value:[t]},...n?[{key:fc.Vm.SCHEMA_VALIDATION_ERROR_LABEL,operator:fc.EF.IS_ONE_OF,value:[n]}]:[]],query:""},[null,null,null,...n?[null]:[]])}function ValidationErrorLabelSummaryRow(e){let t=0
switch(e.errorLabel){case Tc.WX.CONSTRAINT_VIOLATION:t=e.errorLabelSummary.numConstraintViolation
break
case Tc.WX.INVALID_LINK:t=e.errorLabelSummary.numInvalidLink
break
case Tc.WX.INVALID_MULTIPLE_LINK:t=e.errorLabelSummary.numInvalidMultipleLink
break
case Tc.WX.INVALID_VALUE:t=e.errorLabelSummary.numInvalidValue
break
case Tc.WX.MISSING_REQUIRED:t=e.errorLabelSummary.numMissingRequired
break
case Tc.WX.OTHER:t=e.errorLabelSummary.numOther
break
default:(0,ie.Gp)(!1,`Error label not handled: ${e.errorLabel} (using 0 as fallback value)`)}return d.createElement("div",{className:"simpleDivTable-row"},d.createElement("div",{className:`simpleDivTable-cell ${(0,C.iv)(yc.checkboxCell)}`},d.createElement("input",{type:"checkbox",checked:e.isSelected,onChange:t=>{e.onChangeSelected(t.target.checked)}})),d.createElement("div",{className:"simpleDivTable-cell"},(0,Tc.UF)(e.errorLabel)),d.createElement("div",{className:"simpleDivTable-cell"},t?d.createElement("a",{href:getValidationSearchUrl(e.tagSchema,Tc.TC.FAILED,e.errorLabel),className:(0,C.iv)(yc.failureTypeCountCell)},t):null))}function ValidationStatusSummaryCell(e){if(!e.tagSchema.validationStatusSummary)return d.createElement("td",null)
const t=e.status===Tc.TC.OVERRIDDEN?e.tagSchema.validationStatusSummary.numOverridden:e.tagSchema.validationStatusSummary.numFailed
return d.createElement("td",null,t?d.createElement("a",{className:(0,C.iv)(yc.summaryTableLink),href:getValidationSearchUrl(e.tagSchema,e.status)},t):d.createElement("span",{className:(0,C.iv)(yc.summaryTableLink)},t))}function FailureCountPopoverContent(){return d.createElement("div",{className:"tagSchemaSettings-popover"},d.createElement("p",null,"This column contains a count of entities for this schema that failed validation, broken out by each failure type. Entities whose validation failure has been overridden are not included in these counts."),d.createElement("p",null,"Each value in this column links to a search for entities for this schema that failed validation with a failure type that corresponds to its row."),d.createElement("p",null,d.createElement("strong",null,"Note:")," A single entity may fail validation for more than one reason, causing it to be counted more than once in this column."))}function TagSchemaValidationSettings(e){const[t,n]=(0,d.useState)(!1)
return e.tagSchema&&e.tagSchema.validationStatusSummary&&e.tagSchema.validationErrorLabelSummary?d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("table",{className:(0,C.iv)(yc.summaryTable)},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",null,"Entities with Failures"),d.createElement("th",null,"Entities with Overridden Failures"))),d.createElement("tbody",null,d.createElement("tr",null,d.createElement(ValidationStatusSummaryCell,{tagSchema:e.tagSchema,status:Tc.TC.FAILED}),d.createElement(ValidationStatusSummaryCell,{tagSchema:e.tagSchema,status:Tc.TC.OVERRIDDEN})))),d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_WHITE,className:(0,C.iv)(yc.overrideButton),text:"Override Validation Checks",disabled:t,onClick:async()=>{n(!0)
await e.onOverrideValidationChecks()
n(!1)},size:O.qE.SMALL}),d.createElement("div",{className:`simpleDivTable ${(0,C.iv)(yc.failureTypeTable)}`},d.createElement("div",{className:"simpleDivTable-header"},d.createElement("div",{className:`simpleDivTable-headerCell ${(0,C.iv)(yc.checkboxCell)}`},d.createElement("input",{type:"checkbox",checked:Object.entries(e.isSelectedByErrorLabel).every((e=>e[1])),onChange:t=>{e.onChangeSelection(getDefaultRowSelection(t.target.checked))}})),d.createElement("div",{className:"simpleDivTable-headerCell"},"Failure Type"),d.createElement("div",{className:"simpleDivTable-headerCell"},d.createElement("span",{className:(0,C.iv)(yc.failureTypeCountCell)},"Count"),d.createElement(le.Z,{title:"Validation Failure Type / Count",renderContent:()=>d.createElement(FailureCountPopoverContent,null),iconClassName:"tagSchemaSettings-helpIcon u-tiny-spacing-left"}))),Ac.map((t=>d.createElement(ValidationErrorLabelSummaryRow,{key:t,tagSchema:e.tagSchema,errorLabel:t,errorLabelSummary:e.tagSchema.validationErrorLabelSummary,isSelected:e.isSelectedByErrorLabel[t],onChangeSelected:n=>{e.onChangeSelection({...e.isSelectedByErrorLabel,[t]:n})}}))))):null}const yc=C.mM.create({summaryTable:{marginBottom:10},summaryTableLink:{display:"inline-block",width:250,padding:"5px 0"},overrideButton:{marginBottom:10,float:"right"},failureTypeTable:{clear:"both"},checkboxCell:{maxWidth:40},failureTypeCountCell:{display:"inline-block",width:"100%",maxWidth:50,textAlign:"right"}})
function QueryingTagSchemaValidationSettings(e){const[t,n]=(0,d.useState)(getDefaultRowSelection(!1)),a=(0,nt.IJ)(Ic,{variables:{tagSchemaId:e.tagSchemaId},fetchPolicy:"cache-and-network",pollInterval:15e3,renderCachedDataWhenRefetching:!0})
if(a.type!==nt.NI.SUCCESS)return d.createElement(H.Z,null);(0,ie.hu)(!(0,at.CZ)(a.data.tagSchema),"Expected tag schema to be accessible.")
return d.createElement(TagSchemaValidationSettings,{...e,tagSchema:gqlTagSchemaWithValidationSummariesToREST(a.data.tagSchema),onOverrideValidationChecks:async()=>{const i=Object.entries(t).filter((e=>e[1])).map((e=>e[0]))
if(i.length){await Sc.Vp(e.tagSchemaId,i)
n(getDefaultRowSelection(!1))}a.refetch()},onChangeSelection:e=>{n(e)},isSelectedByErrorLabel:t})}var _c,Cc=n(815949),Rc=n(75804)
!function(e){e.FILE="FILE"
e.VALIDATION="VALIDATION"
e.RELEVANT_TEMPLATES="RELEVANT_TEMPLATES"
e.ACCESS_POLICIES="ACCESS POLICIES"
e.SPREADSHEET_MAPPINGS="SPREADSHEET MAPPINGS"}(_c||(_c={}))
class TagSchemaSettingsPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[ml.Z,dc.Z,Rc.Z]}enhanceProps(){const e=this.navStore().getSource(this.props.registryId)
return{isWritable:Boolean(e&&hl.hasSettingsAccess(e)),tagSchema:this.tagSchemaStore().getTagSchemaById(this.props.tagSchemaId),tagSchemaStoreIsLoading:this.tagSchemaStore().getIsFetching(),registry:e,registryTagSchemas:this.tagSchemaStore().getTagSchemas({registryId:this.props.registryId})}}}class TagSchemaSettingsPage extends d.Component{constructor(){super(...arguments)
this.state={activeTab:_c.FILE}
this.handleSetActiveTab=e=>{this.setState({activeTab:e})
this.navigateToUrlForSettingsTab(e)}
this.handleClickSchemas=()=>{T.c4(null,hl.getRegistrySchemasSettingsUrl(this.props.ownerUrlId,this.props.registryId))}
this.handleExportSpreadsheetTemplate=()=>{Cc.lS(this.props.tagSchemaId)}}trackOpenTabEvent(e){e===_c.RELEVANT_TEMPLATES&&(0,cc.iu)({schemaId:this.props.tagSchemaId,schemaType:_e.TAG_SCHEMA,isAdmin:ts.Z.currentUser().organizations.some((e=>e.admin))})}componentDidMount(){this.fetchOnUpdate(null,this.props)
if(this.props.activeTab){this.handleSetActiveTab(this.props.activeTab)
this.trackOpenTabEvent(this.props.activeTab)}}componentDidUpdate(e,t){this.fetchOnUpdate(e,this.props)
if(e.activeTab!==this.props.activeTab){this.handleSetActiveTab(this.props.activeTab||_c.FILE)
this.trackOpenTabEvent(this.props.activeTab||_c.FILE)}}fetchOnUpdate(e,t){t.registryTagSchemas||e&&e.tagSchemaStoreIsLoading||t.tagSchemaStoreIsLoading||Cc.he()}navigateToUrlForSettingsTab(e){const t=function routeSectionForSettingsTab(e){return{[_c.FILE]:"",[_c.VALIDATION]:"/validation",[_c.RELEVANT_TEMPLATES]:"/relevant-templates",[_c.ACCESS_POLICIES]:"/access-policies",[_c.SPREADSHEET_MAPPINGS]:"/spreadsheet-mappings"}[e]}(e),n=hl.getTagSchemaSettingsUrl(this.props.ownerUrlId,this.props.registryId,this.props.tagSchemaId);(0,j.ZP)(`${n}${t}`)}shouldRenderRelevantTemplatesTab(){return S.ZP.SCHEMAS_UI_ENABLE_RELEVANT_TEMPLATES_TAB&&null!=this.props.tagSchema&&this.props.tagSchema.folderItemType!==_e.ENTRY}shouldRenderValidationSettingsTab(){return S.ZP.REGISTRY_ENABLE_ASYNC_VALIDATION_SETTINGS_TAB&&null!=this.props.tagSchema&&(0,Vt.isRegistrySupportedType)(this.props.tagSchema.folderItemType)}shouldRenderPermissionSettingsTab(){return S.ZP.PERMISSIONS_ENABLE_TAG_SCHEMA_PERMISSIONS&&null!=this.props.tagSchemaId}shouldRenderSpreadsheetMappingsTab(){return S.ZP.REGISTRY_ENABLE_SPREADSHEET_COLUMNS_MAPPING&&null!=this.props.tagSchema}getSanitizedActiveTab(){return this.state.activeTab===_c.VALIDATION&&!this.shouldRenderValidationSettingsTab()||this.state.activeTab===_c.ACCESS_POLICIES&&!this.shouldRenderPermissionSettingsTab()||this.state.activeTab===_c.RELEVANT_TEMPLATES&&!this.shouldRenderRelevantTemplatesTab()?_c.FILE:this.state.activeTab}render(){this.props.tagSchema&&T._w(`${this.props.tagSchema.name} - ${(0,pc.Z)()}`)
let e=null;[_c.FILE,_c.VALIDATION,_c.RELEVANT_TEMPLATES,_c.ACCESS_POLICIES,_c.SPREADSHEET_MAPPINGS].includes(this.state.activeTab)&&(e=this.props.tagSchema)
return d.createElement(SchemaSettingsPageContainer,{onExportSpreadsheetTemplate:this.handleExportSpreadsheetTemplate,onNavigateToListing:this.handleClickSchemas,schema:e,schemaType:_e.TAG_SCHEMA},d.createElement("div",{className:"u-flex-grow",...(0,g.Z)({component:"RegistrySettingsPage",element:"root"})},d.createElement(Ye.Xl,{activeTab:this.getSanitizedActiveTab(),className:"u-flex-grow",onRequestTabChange:this.handleSetActiveTab},d.createElement(Ye.OK,{tabKey:_c.FILE,title:"Entity Settings"},d.createElement(hc.ZP,{key:this.props.tagSchemaId,isWritable:this.props.isWritable,ownerUrlId:this.props.ownerUrlId,registryId:this.props.registryId,tagSchemaId:this.props.tagSchemaId})),this.shouldRenderPermissionSettingsTab()&&d.createElement(Ye.OK,{tabKey:_c.ACCESS_POLICIES,title:"Access Policies"},d.createElement(Ec.ZP,{tagSchemaId:this.props.tagSchemaId})),this.shouldRenderRelevantTemplatesTab()&&d.createElement(Ye.OK,{tabKey:_c.RELEVANT_TEMPLATES,title:uc.lT},d.createElement(mc.ZP,{schemaId:this.props.tagSchemaId,schemaOrgUrlId:this.props.ownerUrlId})),this.shouldRenderValidationSettingsTab()&&d.createElement(Ye.OK,{tabKey:_c.VALIDATION,title:"Validation Failures"},d.createElement(QueryingTagSchemaValidationSettings,{tagSchemaId:this.props.tagSchemaId})),this.shouldRenderSpreadsheetMappingsTab()&&d.createElement(Ye.OK,{tabKey:_c.SPREADSHEET_MAPPINGS,title:"Spreadsheet Mappings"},d.createElement(lc.ZP,{tagSchemaId:this.props.tagSchemaId,schemaFields:this.props.tagSchema.allFields})))))}}TagSchemaSettingsPage.propTypes={ownerUrlId:Ps().string.isRequired,registryId:Ps().string.isRequired,tagSchemaId:Ps().string,activeTab:Ps().string}
const Nc=TagSchemaSettingsPageConnector.connect(TagSchemaSettingsPage)
var Oc
!function(e){e.FILE="FILE"
e.ACCESS_POLICIES="ACCESS_POLICIES"}(Oc||(Oc={}))
const bc=ot.Ps`
  query TagSchemaCreateFlowRegistryOwnerQuery($registryId: StrictString!)
  @skipAudit
  @engComponent(name: REGISTRY) {
    registry(id: $registryId) {
      ... on RegistryNode {
        id
        organization {
          ... on OrganizationNode {
            ...OrganizationDefaultSchemaCollaboratorsConfiguration
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("InaccessibleInfo").fragment}
  ${ui.G}
`
class TagSchemaCreateFlowConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[Rc.Z]}enhanceProps(){return{saving:this.tagSchemaStore().getSavingState()}}}function TagSchemaCreateFlow(e){d.useEffect((()=>{if(hl.isSavingFinished(e.saving)){Cc.KG()
e.saving===Vt.SavingState.CREATE_SUCCESS&&T.c4(null,hl.getRegistrySchemasSettingsUrl(e.ownerUrlId,e.registryId))}}),[e.ownerUrlId,e.registryId,e.saving])
const[t,n]=d.useState(Oc.FILE),[{fileSettingParams:a,shouldCreateBatchSchema:i},r]=(0,hc.l1)(),[s,o]=d.useState([]),[{collaborators:l,minimalCollaborators:c},u]=(0,ki.Gw)(e.organization),m=ue.default.compact([{key:Oc.FILE,title:"Entity Settings",isNextOrCreateButtonEnabled:()=>function hasRequiredFileFields(e){return e.prefix.trim().length>0&&e.name.trim().length>0&&null!=e.folderItemType&&null!=e.labelingStrategies&&e.labelingStrategies.length>0}(a),validateFields:()=>null!=a&&function verifyFields(e){for(const t of e)if(ue.default.where(e,{name:t.name}).length>1){rt.ZP.error("You may not add two fields with the same name.")
return!1}return!0}(a.fields)},S.ZP.PERMISSIONS_ENABLE_TAG_SCHEMA_PERMISSIONS&&{key:Oc.ACCESS_POLICIES,title:"Access Policies",isNextOrCreateButtonEnabled:()=>l.length>0,validateFields:()=>!0}]),p=m.findIndex((e=>e.key===t))
return d.createElement(SchemaSettingsPageContainer,{onNavigateToListing:function handleClickSchemas(){T.c4(null,hl.getRegistrySchemasSettingsUrl(e.ownerUrlId,e.registryId))},schema:null,schemaType:_e.TAG_SCHEMA},d.createElement("div",{className:"u-flex-grow",...(0,g.Z)({component:"RegistrySettingsPage",element:"root"})},d.createElement(HeaderNavigation,{steps:m,currentStepKey:t,setCurrentStep:n},d.createElement(d.Fragment,null,t===Oc.FILE&&d.createElement(hc.ZP,{isWritable:!0,ownerUrlId:e.ownerUrlId,registryId:e.registryId,tagSchemaId:null,createSchemaParams:{fileSettingParams:a,shouldCreateBatchSchema:i},setCreateSchemaParams:r,interfaceConstraintErrors:s}),t===Oc.ACCESS_POLICIES&&d.createElement(Ec.wK,{isReadOnly:!1,collaborators:l,onUpdate:u}))),d.createElement("div",{className:(0,C.iv)(Pc.buttonContainer)},0!==p&&d.createElement(O.Co,{buttonStyle:O.ZJ.LINK,text:"Back",className:"u-small-spacing-left",onClick:()=>{n(m[p-1].key)}}),p===m.length-1?d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.MEDIUM,text:"Create",className:"u-small-spacing-left",disabled:!m[p].isNextOrCreateButtonEnabled(),onClick:()=>{m[p].validateFields()&&async function handleCreateSchema(){if(!a)return
const t={...a,folderItemType:a.folderItemType,registryId:e.registryId,...S.ZP.PERMISSIONS_ENABLE_TAG_SCHEMA_PERMISSIONS&&{collaborators:c}}
i?Cc.JY(t):await(0,st.jI)((async()=>{try{await Cc.Ue(t)}catch(e){const t=(0,ec.uc)(e.responseJSON)
if(null==t)throw e
o(t)
n(m[0].key)}})(),"Saving...")}()},dataTestAttrs:{component:"TagSchemaCreateFlow",element:"createButton"}}):d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.MEDIUM,text:"Next",className:"u-small-spacing-left",disabled:!m[p].isNextOrCreateButtonEnabled(),onClick:()=>{m[p].validateFields()&&n(m[p+1].key)},dataTestAttrs:{component:"TagSchemaCreateFlow",element:"nextButton"}}))))}function HeaderNavigation(e){return 1===e.steps.length?d.createElement(Ye.Xl,{activeTab:e.currentStepKey,className:"u-flex-grow",onRequestTabChange:e.setCurrentStep},d.createElement(Ye.OK,{tabKey:e.steps[0].key,title:e.steps[0].title},e.children)):d.createElement("div",null,d.createElement(xr.ZP,{steps:e.steps,statusByStep:{[Oc.FILE]:xr.cV.UNVISITED,[Oc.ACCESS_POLICIES]:xr.cV.UNVISITED},currentStepKey:e.currentStepKey,onUpdateCurrentStep:e.setCurrentStep}),e.children)}const vc=TagSchemaCreateFlowConnector.connect((function QueryingTagSchemaCreateFlow(e){const t=(0,nt.IJ)(bc,{variables:{registryId:e.registryId}})
if(t.type===nt.NI.PENDING)return d.createElement(H.b,null)
if(t.type===nt.NI.ERROR)return null;(0,ie.hu)(!(0,at.CZ)(t.data.registry),"Expecting registry to be accessible")
return d.createElement(TagSchemaCreateFlow,{...e,organization:t.data.registry.organization})})),Pc=C.mM.create({buttonContainer:{float:"right"}})
var Lc=n(276281),Dc=n(946166),Mc=n(730981),wc=n(170121)
function useQueryingStorableSchemaSettings(e,t){const n=(0,nt.IJ)(xl._),a=(0,nt.IJ)(Ul.z),i=(0,nt.IJ)(wc.t,{variables:{registryId:e.registryId}})
if(n.type===nt.NI.PENDING||a.type===nt.NI.PENDING||i.type===nt.NI.PENDING)return d.createElement(H.Z,null)
if(n.type===nt.NI.SUCCESS&&a.type===nt.NI.SUCCESS&&i.type===nt.NI.SUCCESS){const r=n.data.tagSchemas.filter((t=>t.registry.id===e.registryId)),s=a.data.boxSchemas.filter((t=>t.registry.id===e.registryId)),o=a.data.containerSchemas.filter((t=>t.registry.id===e.registryId)),l=a.data.locationSchemas.filter((t=>t.registry.id===e.registryId)),c=a.data.plateSchemas.filter((t=>t.registry.id===e.registryId));(0,ie.hu)(!(0,at.CZ)(i.data.registry),"Expecting registry to be accessible")
return t({tagSchemas:(0,Ai.NA)("TagSchema",r),storableSchemas:[...(0,Ai.NA)("PlateSchema",c),...(0,Ai.NA)("BoxSchema",s),...(0,Ai.NA)("ContainerSchema",o),...(0,Ai.NA)("LocationSchema",l)],registry:(0,Ai.tY)("RegistrySummary",i.data.registry)})}return null}var Fc=n(443375),kc=n(714200)
function StorableFieldTableRow(e){var t,n
return d.createElement(kc.Z,{availableFieldOptions:(0,Fc._K)({initialField:e.initialField,schemaFieldSelectors:e.schemaFieldSelectors,storableSchemas:null!==(t=e.storableSchemas)&&void 0!==t?t:[],tagSchemas:null!==(n=e.tagSchemas)&&void 0!==n?n:[],schemaInterfaces:e.schemaInterfaces,includeJSONField:!1,includeAssayLinks:!1,includeBatchLinks:!1,includeGenericBioentityLinks:!0,includeBooleanField:!1,includeSnapshotField:!1,includeSequenceLinks:!1,includeArchivedSchemas:!0}),...e,shouldShowWarehouseWarning:!0,isUneditable:e.initialField.isUneditable})}var Uc=n(340020)
class ContainerSchemaSubheader extends d.Component{constructor(){super(...arguments)
this._handleArchiveContainerSchema=()=>{this.props.onArchiveContainerSchema(this.props.containerSchema.id)}
this._handleCopyContainerSchema=()=>{(0,on.Z)(this.props.containerSchema.id,{showToastOnSuccess:!0})}
this._handleUnarchiveContainerSchema=()=>{this.props.onUnarchiveContainerSchema(this.props.containerSchema.id)}
this._handleDeleteContainerSchema=()=>{this.props.onDeleteContainerSchema(this.props.containerSchema.id)}
this._handleExportAuditLogs=()=>{Ce.dV([this.props.containerSchema.id])}}render(){return d.createElement("div",null,this.props.isWritable&&!(0,Ci.ZP)(this.props.containerSchema)&&d.createElement(P.Z,{className:"simpleDivTable-subheaderButton pull-right",icon:S.ZP.ENABLE_ARCHIVING_V2?"archive":"delete",onClick:S.ZP.ENABLE_ARCHIVING_V2?this._handleArchiveContainerSchema:this._handleDeleteContainerSchema}),this.props.isWritable&&(0,Ci.ZP)(this.props.containerSchema)&&S.ZP.ENABLE_ARCHIVING_V2&&d.createElement(P.Z,{className:"simpleDivTable-subheaderButton pull-right",icon:"unarchive",onClick:this._handleUnarchiveContainerSchema}),d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:zi.QU},d.createElement(P.Z,{className:"simpleDivTable-subheaderButton pull-right u-small-spacing-right",icon:"audit-trail",onClick:this._handleExportAuditLogs})),Boolean(eo.Z.get("ENABLE_COPY_API_ID"))&&d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy API ID"},d.createElement(P.Z,{className:"simpleDivTable-subheaderButton pull-right u-small-spacing-right",icon:"note-code",onClick:this._handleCopyContainerSchema})))}}const xc=ContainerSchemaSubheader
function ContainerSchemaSettings(e){const isWritable=()=>e.isWritable&&!(0,Ci.ZP)(e.containerSchema),handleUpdateContainerSchema=t=>{e.onUpdateContainerSchema(e.containerSchema.id,{...e.containerSchema,...t})},t=S.ZP.SCHEMAS_ENABLE_SCHEMA_FIELD_DESCRIPTION_FOR_TABLES_SUPPORTED_SCHEMAS,{containerSchema:n,savingState:a,onConfirmDeleteField:i}=e
return d.createElement("div",{className:N()("sampleSchemaSettings-containerTable",{"u-faded":(0,Ci.ZP)(n)}),key:n.id},d.createElement("div",{className:"sampleSchemaSettings-containerTable-name"},d.createElement("div",{className:"sampleSchemaSettings-containerTable-nameContainer"},d.createElement("div",{className:"sampleSchemaSettings-containerTable-nameHeader"},"Name"),isWritable()?d.createElement(De.Z,{requestChange:e=>{handleUpdateContainerSchema({name:e})},isDisabled:!1,value:n.name,dataTestAttrs:{component:"ContainerSchemaSettings",element:"nameField"}}):d.createElement("span",null,n.name,d.createElement(no.Z,{item:n}))),d.createElement("div",{className:"sampleSchemaSettings-containerTable-nameContainer"},d.createElement("div",{className:"sampleSchemaSettings-containerTable-nameHeader"},"ID Prefix"),d.createElement(De.Z,{requestChange:e=>{handleUpdateContainerSchema({prefix:e})},isDisabled:!isWritable(),value:n.prefix})),d.createElement("div",{className:"sampleSchemaSettings-containerTable-nameContainer"},d.createElement(Uc.ZP,{onChange:e=>{handleUpdateContainerSchema({sqlIdentifier:e})},forContainerSchema:!0,isWritable:isWritable(),sqlIdentifier:n.sqlIdentifier}))),d.createElement(gi.ZP,{tagSchemas:e.tagSchemas,storableSchemas:e.storableSchemas,schemaId:n.id,schema:n,fields:n.allFields,isBeingCreated:e.isBeingCreated,shouldShowIsParentLink:!1,shouldShowIsRequired:!1,shouldShowIsIntegration:!1,shouldShowDescription:t,isDisabled:!isWritable(),handleDeleteConfirmation:i,itemClass:StorableFieldTableRow,onFieldsChange:e=>{(t=e,ue.default.some(t,(e=>0===e.name.length)))||handleUpdateContainerSchema({allFields:e})
var t},registryId:e.registryId,ownerUrlId:e.ownerUrlId,ownerId:e.ownerId,savingState:a,schemaType:_e.CONTAINER,subheader:d.createElement(xc,{containerSchema:n,isWritable:e.isWritable,onArchiveContainerSchema:e.onArchiveContainerSchema,onDeleteContainerSchema:e.onDeleteContainerSchema,onUnarchiveContainerSchema:e.onUnarchiveContainerSchema}),dataTestAttrs:e.dataTestAttrs}))}ContainerSchemaSettings.propTypes={containerSchema:Mc.lV.isRequired,isWritable:Ps().bool.isRequired,onArchiveContainerSchema:Ps().func.isRequired,onConfirmDeleteField:Ps().func.isRequired,onDeleteContainerSchema:Ps().func.isRequired,onUnarchiveContainerSchema:Ps().func.isRequired,onUpdateContainerSchema:Ps().func.isRequired,registryId:Ps().string.isRequired,ownerUrlId:Ps().string.isRequired,savingState:Ps().oneOf(Object.keys(Vt.SAVING_STATES)).isRequired}
class CreateContainerSchemaModal extends d.Component{constructor(){super(...arguments)
this.state={name:"",prefix:""}
this._handleSubmit=()=>{if(this.props.allContainerSchemas.some((({name:e})=>e===this.state.name))){rt.ZP.warn("Name must not match an existing container schema!")
return}if(this.props.allContainerSchemas.some((({prefix:e})=>e===this.state.prefix))){rt.ZP.warn("Prefix must not match an existing container schema!")
return}const e={name:this.state.name,prefix:this.state.prefix,allFields:[]}
Lc.B8(this.props.registryId,e)
ha.xv("ADD_CONTAINER_SCHEMA_MODAL")}
this._disableSubmit=()=>0===this.state.name.length||0===this.state.prefix.length
this._handleClose=()=>{ha.xv("ADD_CONTAINER_SCHEMA_MODAL")}}static open({allContainerSchemas:e,registryId:t}){ha.bA("ADD_CONTAINER_SCHEMA_MODAL",d.createElement(CreateContainerSchemaModal,{allContainerSchemas:e,registryId:t}))}render(){return d.createElement(B.ZP,{title:"Create container schema",buttons:[{text:"Create",submit:!0,style:O.ZJ.PRIMARY,disabled:this._disableSubmit()}],onRequestSubmit:this._handleSubmit,onRequestClose:this._handleClose},d.createElement("div",null,d.createElement("div",null,"To create a new container schema, please enter a prefix and name. Once submitted, you will be able to add new fields."),d.createElement(ne.Z,{className:"u-spacing-top"},d.createElement(ee.Z,{xs:6},d.createElement(k.Z,{autoFocus:!0,className:"u-mini-spacing-left",label:"Prefix",labelStyle:k.Z.LABEL_STYLES.LABEL,onChange:e=>{this.setState({prefix:e.target.value})},type:Gr.Lq.TEXT,value:this.state.prefix,dataTestAttrs:{component:"CreateContainerSchemaModal",element:"prefixField"}})),d.createElement(ee.Z,{xs:6},d.createElement(k.Z,{className:"u-mini-spacing-left",label:"Name",labelStyle:k.Z.LABEL_STYLES.LABEL,onChange:e=>{this.setState({name:e.target.value})},type:Gr.Lq.TEXT,value:this.state.name,dataTestAttrs:{component:"CreateContainerSchemaModal",element:"nameField"}})))))}}const Bc=CreateContainerSchemaModal
function ContainerSchemasListing(e){const[t,n]=(0,d.useState)([us.BH]),getShownSchemas=()=>{var n
return Ol.F(null!==(n=e.containerSchemas)&&void 0!==n?n:null,ue.default.flatten(t))},handleConfirmDeleteField=e=>{M.iG("Confirm Delete","Are you sure you wish to delete this field? This action cannot be undone, and will remove the field\n      and its associated data from all containers.").done((()=>{e(Dc.Zk)}))},handleArchiveContainerSchema=e=>{const t=getShownSchemas().find((t=>t.id===e))
ct.bA({items:[t],onArchive:Hi.Af})},handleUnarchiveContainerSchema=e=>{Hi.QR([e])},handleDeleteContainerSchema=e=>{Lc.I1(e)},handleUpdateContainerSchema=(e,t)=>{Lc.JD(e,t)}
return d.createElement("div",{className:"containerSchemasListing settingsPage"},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",{className:"u-lr-split"},d.createElement("h2",{className:"header--header1"},"Container schemas"),e.isWritable&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,onClick:()=>{Bc.open({allContainerSchemas:getShownSchemas(),registryId:e.registryId})},size:O.qE.SMALL,text:"Create",dataTestAttrs:{component:"ContainerSchemaCreateFlow",element:"createButton"}})),null!=e.containerSchemas&&d.createElement("div",{className:"u-spacing-bottom u-lr-split"},d.createElement(ms.Z,{itemIds:e.containerSchemas.map((e=>e.id)),onChangePurposes:e=>{n(e)},selectedPurposes:t})),getShownSchemas()?0===getShownSchemas().length?d.createElement("div",{className:"u-faded"},"No container schemas"):getShownSchemas().map((t=>d.createElement(ContainerSchemaSettings,{tagSchemas:e.tagSchemas,storableSchemas:e.storableSchemas,key:t.id,containerSchema:t,isWritable:e.isWritable,isBeingCreated:!t,onArchiveContainerSchema:handleArchiveContainerSchema,onConfirmDeleteField:handleConfirmDeleteField,onDeleteContainerSchema:handleDeleteContainerSchema,onUpdateContainerSchema:handleUpdateContainerSchema,onUnarchiveContainerSchema:handleUnarchiveContainerSchema,registryId:e.registryId,ownerId:e.registry.s_owner.id,ownerUrlId:e.ownerUrlId,savingState:e.savingState,dataTestAttrs:{component:"ContainerSchemaSettings",element:"schemaSettingsTable",key:t.id}}))):d.createElement(H.Z,null)))}ContainerSchemasListing.propTypes={containerSchemas:Ps().arrayOf(Mc.lV),isWritable:Ps().bool.isRequired,registryId:Ps().string.isRequired,ownerUrlId:Ps().string.isRequired,savingState:Ps().oneOf(Object.keys(Vt.SAVING_STATES)).isRequired}
ContainerSchemasListing.defaultProps={isWritable:!1}
function QueryingContainerSchemasListing(e){return useQueryingStorableSchemaSettings(e,(t=>d.createElement(ContainerSchemasListing,{...e,...t})))}class ContainerSchemasPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[dc.Z]}enhanceProps(){return{containerSchemas:this.sampleSchemaStore().getContainerSchemas(this.props.registryId,{includeArchived:!0}),savingState:this.sampleSchemaStore().getSavingState()}}}class ContainerSchemasPage extends d.Component{componentDidMount(){Lc.uz()}render(){(0,T._w)("Container Schemas - Registry Settings")
return d.createElement(QueryingContainerSchemasListing,{containerSchemas:this.props.containerSchemas,isWritable:this.props.isWritable,registryId:this.props.registryId,ownerUrlId:this.props.ownerUrlId,savingState:this.props.savingState})}}const Zc=ContainerSchemasPageConnector.connect((function QueryingContainerSchemasPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(ContainerSchemasPage,{...e,isWritable:t})}))
var qc=n(133832)
const Gc={[qc.k8.BOX_SCHEMA]:Ei.R.BOX,[qc.k8.PLATE_SCHEMA]:Ei.R.PLATE}
class GridSchemasListing extends d.Component{constructor(){super(...arguments)
this.handleCreate=()=>{T.c4(null,hl.getCreateGridSchemaUrl(this.props.ownerUrlId,this.props.registryId,this.props.gridSchemaClass))}
this.urlForSchema=e=>hl.getGridSchemaSettingsUrl(this.props.ownerUrlId,this.props.registryId,e,this.props.gridSchemaClass)
this.handleDelete=e=>{Lc.zn(e,this.props.gridSchemaClass)}}render(){const e=this.props.gridSchemaClass===_e.PLATE_SCHEMA,t=[{name:"Schemas",width:3},{name:"Size",width:2},...e?[{name:"Type",width:3}]:[],{name:"Fields",width:4}]
return d.createElement(Yi.Z,{columnHeaders:t,schemas:this.props.gridSchemas,schemaType:Gc[this.props.gridSchemaClass],navigateToCreate:this.handleCreate,urlForSchema:this.urlForSchema,archiveSchemas:Hi.Af,unarchiveSchemas:Hi.QR,deleteSchema:this.handleDelete,isWritable:this.props.isWritable,mapSchemaToRowValue:t=>[d.createElement("span",{className:"u-small-spacing-left"},t.name,d.createElement(no.Z,{item:t})),(t.width*t.height).toString(),...e?[Mc.lZ[t.plateSchemaType]]:[],t.fields.map((({displayName:e})=>e)).join(", ")]})}}GridSchemasListing.propTypes={gridSchemaClass:Ps().oneOf(qc.Iv).isRequired,gridSchemas:Ps().arrayOf(Mc.wv),isWritable:Ps().bool.isRequired,ownerUrlId:Ps().string.isRequired,registryId:Ps().string.isRequired}
const Vc=GridSchemasListing
function GridSchemasPage_extends(){GridSchemasPage_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return GridSchemasPage_extends.apply(this,arguments)}function GridSchemasPage_defineProperty(e,t,n){(t=function GridSchemasPage_toPropertyKey(e){var t=function GridSchemasPage_toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class GridSchemasPageConnector extends _.C{constructor(...e){super(...e)
GridSchemasPage_defineProperty(this,"shouldSubscribeToRedux",!1)
GridSchemasPage_defineProperty(this,"stores",[dc.Z])}enhanceProps(){return{gridSchemas:this.sampleSchemaStore().getGridSchemas(this.props.registryId,this.props.gridSchemaClass,{includeArchived:!0})}}}class GridSchemasPage extends d.Component{componentDidMount(){Lc.gS(this.props.gridSchemaClass)}render(){(0,T._w)(`${qc.n6[this.props.gridSchemaClass]} Schemas - Registry Settings`)
return d.createElement(Vc,{gridSchemaClass:this.props.gridSchemaClass,gridSchemas:this.props.gridSchemas,isWritable:this.props.isWritable,ownerUrlId:this.props.ownerUrlId,registryId:this.props.registryId})}}GridSchemasPage_defineProperty(GridSchemasPage,"propTypes",{gridSchemaClass:Ps().oneOf(qc.Iv).isRequired,ownerUrlId:Ps().string.isRequired,registryId:Ps().string.isRequired,isWritable:Ps().bool.isRequired,gridSchemas:Ps().arrayOf(Mc.wv)})
const Hc=GridSchemasPageConnector.connect((function QueryingGridSchemasPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(GridSchemasPage,GridSchemasPage_extends({},e,{isWritable:t}))}))
var Wc=n(404565),Yc=n(866219)
function GridSchemaSettings(e){var t,n
const[a,i]=(0,d.useState)(null!==(t=e.gridSchema)&&void 0!==t?t:{name:"",prefix:"",sqlIdentifier:"",height:e.gridSchemaClass===_e.PLATE_SCHEMA?8:10,width:e.gridSchemaClass===_e.PLATE_SCHEMA?12:10,containerSchemaId:null,allFields:[]}),isWritable=()=>{var t
return e.isWritable&&!(0,Ci.ZP)({...a,id:null!==(t=a.id)&&void 0!==t?t:""})};(0,d.useEffect)((()=>{e.gridSchema&&i(e.gridSchema)}),[e.gridSchema])
const handleChangeSchema=t=>{const n={...a,...t}
i(n)
e.isBeingCreated||handleSubmit(null,n)},handleSubmit=(t,n)=>{n=null!=n?n:a
const i=hl.sanitizeFields(n.allFields),r={...n,allFields:i,fields:i}
e.isBeingCreated?e.onCreate(r):e.onUpdate(r)},getSizeName=(e,t)=>`${e*t} (${e} x ${t})`,r=Object.keys(Mc.lZ).map((e=>({name:Mc.lZ[e],handleOnClick:()=>{handleChangeSchema({plateSchemaType:e})}}))),s=(()=>{const e=S.ZP.INVENTORY_CUSTOM_PLATE_SIZES.map((e=>[e.rows,e.columns]))
return Mc.qZ.concat(e).sort(((e,t)=>e[0]<=t[0]&&e[1]<=t[1]?1:-1))})().map((([e,t])=>({name:getSizeName(e,t),handleOnClick:()=>{handleChangeSchema({height:e,width:t})}}))),o=S.ZP.SCHEMAS_ENABLE_SCHEMA_FIELD_DESCRIPTION_FOR_TABLES_SUPPORTED_SCHEMAS
return d.createElement("div",{className:"u-flex-grow"},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:4},d.createElement(In.ZP,{isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:isWritable(),label:"Prefix",name:"prefix",onChange:e=>{handleChangeSchema({prefix:e})},value:a.prefix})),d.createElement(ee.Z,{sm:e.gridSchema?4:8},d.createElement(In.ZP,{isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:isWritable(),label:"Name",name:"name",onChange:e=>{handleChangeSchema({name:e})},value:a.name})),e.gridSchema&&d.createElement(ee.Z,{sm:4},d.createElement(Uc.ZP,{onChange:e=>{handleChangeSchema({sqlIdentifier:e})},isWritable:isWritable()&&!e.isBeingCreated,sqlIdentifier:a.sqlIdentifier})))),d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,e.gridSchemaClass===_e.PLATE_SCHEMA?[d.createElement(ee.Z,{sm:4,key:"size"},d.createElement("div",null,d.createElement(In.DU,{label:"Size",name:"size",isRequired:!0}),d.createElement(Yc.Z,{disabled:!isWritable(),displayName:getSizeName(a.height,a.width),items:[s]}))),d.createElement(ee.Z,{sm:4,key:"type"},d.createElement(In.DU,{label:"Type",name:"type",isRequired:!0}),d.createElement(Yc.Z,{disabled:!isWritable(),displayName:Mc.lZ[null!==(n=a.plateSchemaType)&&void 0!==n?n:""]||"Select type...",items:[r]}))]:[d.createElement(ee.Z,{sm:4,key:"height"},d.createElement("div",{className:"u-lr-split"},d.createElement("div",{className:"u-flex-grow"},d.createElement(In.ZP,{isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:isWritable(),label:"Height",name:"height",type:De.T.NUMBER,onChange:e=>{handleChangeSchema({height:e})},value:a.height})))),d.createElement(ee.Z,{sm:4,key:"width"},d.createElement("div",{className:"u-lr-split"},d.createElement("div",{className:"u-flex-grow u-tiny-spacing-left"},d.createElement(In.ZP,{isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:isWritable(),label:"Width",name:"width",type:De.T.NUMBER,onChange:e=>{handleChangeSchema({width:e})},value:a.width}))))],d.createElement(ee.Z,{sm:4},d.createElement(In.DU,{label:"Container Schema",name:"containerSchema"}),d.createElement(Wc.ZP,{isDisabled:!isWritable(),onChange:e=>{handleChangeSchema({containerSchemaId:e?e.id:null})},registryId:e.registryId,selectedContainerSchemaId:a.containerSchemaId})))),d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},d.createElement(gi.ZP,{schemaId:e.gridSchema?e.gridSchema.id:null,schema:e.gridSchema,isBeingCreated:e.isBeingCreated,shouldShowIsIntegration:!1,shouldShowIsRequired:!1,shouldShowIsParentLink:!1,shouldShowDescription:o,isDisabled:!isWritable(),fields:a.allFields,itemClass:StorableFieldTableRow,onFieldsChange:e=>{handleChangeSchema({allFields:e})},registryId:e.registryId,ownerId:e.registry.s_owner.id,ownerUrlId:e.ownerUrlId,savingState:e.savingState,schemaType:qc.n6[e.gridSchemaClass],handleDeleteConfirmation:e=>{M.iG("Confirm Delete","Are you sure you want to delete this plate field?\n         All values corresponding to this plate field will be deleted. This action cannot be undone.","danger").done((()=>{e(Dc.Zk)}))},tagSchemas:e.tagSchemas,storableSchemas:e.storableSchemas})))),e.isBeingCreated&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,disabled:!isWritable(),onClick:handleSubmit,size:O.qE.MEDIUM,text:"Create"}))}GridSchemaSettings.propTypes={containerSchemas:Ps().arrayOf(Mc.lV).isRequired,gridSchema:Mc.wv,gridSchemaClass:Ps().oneOf(qc.Iv).isRequired,isBeingCreated:Ps().bool.isRequired,isWritable:Ps().bool.isRequired,onCreate:Ps().func.isRequired,onUpdate:Ps().func.isRequired,registryId:Ps().string.isRequired,ownerUrlId:Ps().string.isRequired,savingState:Ps().oneOf(Object.keys(Vt.SAVING_STATES)).isRequired}
GridSchemaSettings.defaultProps={containerSchemas:[]}
function QueryingGridSchemaSettings(e){return useQueryingStorableSchemaSettings(e,(t=>d.createElement(GridSchemaSettings,{...e,...t})))}class GridSchemaSettingsPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[dc.Z]}enhanceProps(){let e={containerSchemas:dc.Z.getContainerSchemas(this.props.registryId),savingState:dc.Z.getSavingState()}
if(this.props.gridSchemaId){const t=dc.Z.getGridSchema(this.props.gridSchemaId,this.props.gridSchemaClass)
e={...e,gridSchema:t}}return e}}class GridSchemaSettingsPage extends d.Component{constructor(){super(...arguments)
this._fetchGridSchemas=()=>{Lc.uz()
Lc.gS(this.props.gridSchemaClass)}
this._handleNavigateToGridSchemas=()=>{T.c4(null,hl.getRegistryGridSchemasUrl(this.props.ownerUrlId,this.props.registryId,this.props.gridSchemaClass))}
this._handleCreate=e=>{Lc.Bj(this.props.registryId,e,this.props.gridSchemaClass,this._handleNavigateToGridSchemas)}
this._handleUpdate=e=>{(0,ie.hu)(null!=this.props.gridSchemaId,"gridSchemaId must exist for update.")
this.props.gridSchemaId&&Lc.EE(this.props.gridSchemaId,e,this.props.gridSchemaClass)}
this._updateWindowTitle=()=>{this.props.gridSchema&&T._w(`${this.props.gridSchema.name} - ${qc.n6[this.props.gridSchemaClass]} Schemas`)}}componentDidMount(){this._fetchGridSchemas()}componentDidUpdate(e,t){e.gridSchemaClass!==this.props.gridSchemaClass&&this._fetchGridSchemas()
e.savingState===Vt.SavingState.PENDING&&hl.isSavingFinished(this.props.savingState)&&Lc.KG()}render(){this._updateWindowTitle()
return d.createElement(SchemaSettingsPageContainer,{onNavigateToListing:this._handleNavigateToGridSchemas,schema:this.props.gridSchemaId&&this.props.gridSchema?this.props.gridSchema:null,schemaType:this.props.gridSchemaClass},this.props.gridSchemaId&&!this.props.gridSchema||!this.props.containerSchemas?d.createElement(H.Z,null):d.createElement(QueryingGridSchemaSettings,{containerSchemas:this.props.containerSchemas,gridSchema:this.props.gridSchema,gridSchemaClass:this.props.gridSchemaClass,isBeingCreated:!this.props.gridSchemaId,isWritable:this.props.isWritable,onCreate:this._handleCreate,onUpdate:this._handleUpdate,registryId:this.props.registryId,ownerUrlId:this.props.ownerUrlId,savingState:this.props.savingState}))}}const $c=GridSchemaSettingsPageConnector.connect((function QueryingGridSchemaSettingsPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(GridSchemaSettingsPage,{...e,isWritable:t})}))
var Kc=n(315978),zc=n(795110)
class LabelTemplatesListingConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[zc.Z]}enhanceProps(){return{labelTemplates:this.storableStore().getLabelTemplates(this.props.registryId)}}}class LabelTemplatesListing extends d.Component{constructor(){super(...arguments)
this._getEditUrl=e=>{const t=this.props.labelTemplates[e].id
return hl.getLabelTemplateSettingsUrl(this.props.ownerUrlId,this.props.registryId,t)}
this._handleDelete=e=>{const t=this.props.labelTemplates[e]
M.iG(`Delete ${t.name}`,"Are you sure you want to delete this label template?").done((()=>{Kc.kM(t.id)}))}}componentDidMount(){Kc.j9()}render(){let e
this.props.labelTemplates&&(e=this.props.labelTemplates.map(((e,t)=>({itemIndex:t,values:[e.name]}))))
return d.createElement(Es.ZP,{columnHeaders:[{name:"Name",width:12}],emptyMessage:"This registry has no label templates.",isLoading:!this.props.labelTemplates,onDelete:this._handleDelete,getEditUrl:this._getEditUrl,rows:e,writable:this.props.isWritable})}}const Qc=LabelTemplatesListingConnector.connect(LabelTemplatesListing)
class PrintersListingConnector extends _.C{constructor(){super(...arguments)
this.stores=[zc.Z]}enhanceProps(){return{printers:this.storableStore().getPrinters(this.props.registryId)}}}class PrintersListing extends d.Component{constructor(){super(...arguments)
this._getEditUrl=e=>{const t=this.props.printers[e].id
return hl.getPrinterSettingsUrl(this.props.ownerUrlId,this.props.registryId,t)}
this._handleDelete=e=>{const t=this.props.printers[e]
M.iG(`Delete ${t.name}`,"Are you sure you want to delete this printer?").done((()=>{Kc.dA(t.id)}))}}componentDidMount(){Kc.LI()}render(){let e
this.props.printers&&(e=this.props.printers.map(((e,t)=>({itemIndex:t,values:[e.name,e.address,e.port]}))))
return d.createElement(Es.ZP,{columnHeaders:[{name:"Name",width:5},{name:"Address",width:4},{name:"Port",width:3}],emptyMessage:"Please contact Benchling support before configuring printers.",isLoading:!this.props.printers,onDelete:this._handleDelete,getEditUrl:this._getEditUrl,rows:e,writable:this.props.isWritable})}}const jc=PrintersListingConnector.connect(PrintersListing),Jc=ot.Ps`
  query LabelPrintingSettingsContainerQuery @skipAudit @engComponent(name: INVENTORY) {
    labelPrintingConfig {
      id
      tenantConfiguredPrintingMethod
    }
  }
`
function LabelPrintingSettingsContainer(e){const t=(0,nt.IJ)(Jc);(0,T._w)("Label Printing - Registry Settings")
return d.createElement("div",{className:"settingsPage"},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",{className:N()("u-lr-split",(0,C.iv)(ed.settingsPageHader))},d.createElement(f.R6,null,"Label printing"),e.isWritable&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,onClick:()=>{if(e.activeTab===_e.LABEL_TEMPLATE)(0,j.ZP)(hl.getCreateLabelTemplateUrl(e.ownerUrlId,e.registryId))
else{(0,ie.hu)(e.activeTab===_e.PRINTER,"Invalid tab");(0,j.ZP)(hl.getCreatePrinterUrl(e.ownerUrlId,e.registryId))}},size:O.qE.SMALL,text:e.activeTab===_e.LABEL_TEMPLATE?"Create Label Template":"Create Printer"})),t.type===nt.NI.SUCCESS&&t.data.labelPrintingConfig.tenantConfiguredPrintingMethod===ar.G2.BARTENDER&&d.createElement("div",{className:(0,C.iv)(ed.marginTop35px)},d.createElement(Jt.Z,null,d.createElement(d.Fragment,null,"Your tenant is using BarTender as its printing method, which overrides any label printing settings in this registry. To change your tenant's printing method, go to"," ",d.createElement("a",{href:"/label-printing-settings",onClick:T.c4},"Label Printing"),"."))),d.createElement(Ye.Xl,{activeTab:e.activeTab,className:N()("u-flex-grow",(0,C.iv)(ed.marginTop35px)),onRequestTabChange:t=>{if(t===_e.LABEL_TEMPLATE)(0,j.ZP)(hl.getRegistryLabelTemplatesUrl(e.ownerUrlId,e.registryId))
else{(0,ie.hu)(t===_e.PRINTER,"Invalid tab");(0,j.ZP)(hl.getRegistryPrintersUrl(e.ownerUrlId,e.registryId))}}},d.createElement(Ye.OK,{tabKey:_e.LABEL_TEMPLATE,title:"Label Templates"},d.createElement(Qc,{isWritable:e.isWritable,ownerUrlId:e.ownerUrlId,registryId:e.registryId})),d.createElement(Ye.OK,{tabKey:_e.PRINTER,title:"Printers"},d.createElement(jc,{isWritable:e.isWritable,ownerUrlId:e.ownerUrlId,registryId:e.registryId})))))}const Xc=function QueryingLabelPrintingSettingsContainer(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(LabelPrintingSettingsContainer,{...e,isWritable:t})},ed=C.mM.create({settingsPageHader:{alignItems:"center",display:"flex"},marginTop35px:{marginTop:"35px"}})
const{SAVING_STATES:td}=Vt
class LabelTemplateSettings extends d.PureComponent{constructor(e){super(e)
this.UNSAFE_componentWillReceiveProps=e=>{e.labelTemplate&&this.setState({labelTemplateContent:e.labelTemplate})}
this.componentDidUpdate=(e,t)=>{const n=e.savingState===td.PENDING,a=this.props.savingState===td.PENDING
!n&&a?Cr.$Z("Saving..."):n&&!a&&Cr.Cp()}
this._handleSubmit=(e,t=this.state.labelTemplateContent)=>{this.props.isBeingCreated?this.props.onCreate(t):this.props.onUpdate(t)}
this._handleChangeName=e=>{const t={...this.state.labelTemplateContent,name:e}
this.setState({labelTemplateContent:t})
this.props.isBeingCreated||this._handleSubmit(null,t)}
this._handleChangeZplTemplate=e=>{this.setState({labelTemplateContent:{...this.state.labelTemplateContent,zplTemplate:e}})}
this._updateZplTemplatePreview=()=>{this.setState({generatingPreview:!0});(function generateLabelTemplatePreview(e){return(0,ft.ty)({url:"/1/api/label-templates:preview",data:{zplTemplate:e},untracked:!0})})(this.state.labelTemplateContent.zplTemplate).done((e=>{this.setState({base64Preview:e.data,generatingPreview:!1})})).fail((e=>{this.setState({base64Preview:null,altText:e.responseJSON.userMessage,generatingPreview:!1})}))}
this._getFirstColumnSize=()=>S.ZP.INVENTORY_ENABLE_ZPL_LABEL_PREVIEW?6:12
let t
t=this.props.labelTemplate?this.props.labelTemplate:{name:"",zplTemplate:""}
this.state={labelTemplateContent:t,base64Preview:null,altText:"Refresh preview to view label template",generatingPreview:!1}}render(){return d.createElement("div",{className:"u-flex-grow labelTemplateSettings"},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},d.createElement(In.ZP,{isBeingCreated:this.props.isBeingCreated,isRequired:!0,isWritable:this.props.isWritable,label:"Name",name:"name",onChange:this._handleChangeName,value:this.state.labelTemplateContent.name}))),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:this._getFirstColumnSize()},d.createElement(In.DU,{isRequired:!0,label:"ZPL Template",name:"zplTemplate"}),d.createElement(po.ZP,{enableBasicAutocompletion:!1,onChange:this._handleChangeZplTemplate,readOnly:!this.props.isWritable,theme:"github",value:this.state.labelTemplateContent.zplTemplate,width:"auto",height:ad})),S.ZP.INVENTORY_ENABLE_ZPL_LABEL_PREVIEW&&d.createElement(ee.Z,{sm:6,className:(0,C.iv)(id.specificHeight)},d.createElement(In.DU,{isRequired:!1,label:"Preview",name:"preview"}),d.createElement(ImagePreview,{base64Preview:this.state.base64Preview,altText:this.state.altText,generatingPreview:this.state.generatingPreview}))),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:this._getFirstColumnSize()},!this.props.isBeingCreated&&d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,className:"u-tiny-spacing-top",disabled:!this.props.isWritable,onClick:this._handleSubmit,size:O.qE.MEDIUM,text:"Update ZPL Template"})),S.ZP.INVENTORY_ENABLE_ZPL_LABEL_PREVIEW&&d.createElement(ee.Z,{sm:6},d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,className:"u-tiny-spacing-top",onClick:this._updateZplTemplatePreview,size:O.qE.MEDIUM,text:"Refresh Preview",disabled:this.state.generatingPreview})))),this.props.isBeingCreated&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,disabled:!this.props.isWritable,onClick:this._handleSubmit,size:O.qE.MEDIUM,text:"Create"}))}}LabelTemplateSettings.propTypes={isBeingCreated:Ps().bool.isRequired,isWritable:Ps().bool.isRequired,onCreate:Ps().func.isRequired,onUpdate:Ps().func.isRequired,labelTemplate:qc._f,savingState:Ps().oneOf(Object.keys(td)).isRequired}
const nd=LabelTemplateSettings,ad="500px",id=C.mM.create({specificHeight:{height:ad},maxWidthFillHeight:{maxWidth:"100%",height:"100%"}})
function ImagePreview(e){return e.generatingPreview?d.createElement(H.b,null):e.base64Preview?d.createElement("img",{className:(0,C.iv)(id.maxWidthFillHeight),src:`data:image/png;base64,${e.base64Preview}`}):d.createElement("span",null,e.altText)}class LabelTemplateSettingsPageConnector extends _.C{constructor(){super(...arguments)
this.stores=[zc.Z]
this.shouldSubscribeToRedux=!1}enhanceProps(){let e={savingState:this.storableStore().getSavingState()}
this.props.labelTemplateId&&(e={...e,labelTemplate:this.storableStore().getLabelTemplate(this.props.labelTemplateId)})
return{...e}}}class LabelTemplateSettingsPage extends d.Component{constructor(){super(...arguments)
this._fetchLabelTemplates=()=>{Kc.j9()}
this._handleNavigateToLabelTemplates=()=>{(0,j.ZP)(hl.getRegistryLabelTemplatesUrl(this.props.ownerUrlId,this.props.registryId))}
this._handleCreate=e=>{Kc.Dn(this.props.registryId,this.props.ownerUrlId,e)}
this._handleUpdate=e=>{(0,ie.hu)(null!=this.props.labelTemplateId,"labelTemplateId must exist for update.")
this.props.labelTemplateId&&Kc.Jr(this.props.labelTemplateId,e)}}componentDidMount(){this._fetchLabelTemplates()}componentDidUpdate(e){e.savingState===Vt.SavingState.PENDING&&hl.isSavingFinished(this.props.savingState)&&u.resetSavingState()
this.props.labelTemplateId!==e.labelTemplateId&&this._fetchLabelTemplates()}render(){this.props.labelTemplate&&(0,T._w)(`${this.props.labelTemplate.name} - Label Templates`)
return d.createElement(J.Z,{onClickTitle:this._handleNavigateToLabelTemplates,subtitle:this.props.labelTemplateId&&this.props.labelTemplate?this.props.labelTemplate.name:"",title:"Label Templates",toolbar:this.props.labelTemplateId&&d.createElement(Q.Z,{ids:[this.props.labelTemplateId],buttonSize:O.qE.MEDIUM,buttonStyle:O.ZJ.TERTIARY_GRAY})},this.props.labelTemplateId&&!this.props.labelTemplate?d.createElement(H.Z,null):d.createElement(nd,{isBeingCreated:!this.props.labelTemplateId,isWritable:this.props.isWritable,labelTemplate:this.props.labelTemplate,onCreate:this._handleCreate,onUpdate:this._handleUpdate,savingState:this.props.savingState}))}}const rd=LabelTemplateSettingsPageConnector.connect((function QueryingLabelTemplateSettingsPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(LabelTemplateSettingsPage,{...e,isWritable:t})})),{SAVING_STATES:sd}=Vt
class PrinterSettings extends d.Component{constructor(e){super(e)
this._handleChangePrinter=e=>{const t=Aa()(this.state.printer,{$merge:e})
this.setState({printer:t})
this.props.isBeingCreated||this._handleSubmit(null,t)}
this._handleSubmit=(e,t=this.state.printer)=>{this.props.isBeingCreated?this.props.onCreate(t):this.props.onUpdate(t)}
this._handleChangeName=e=>{this._handleChangePrinter({name:e})}
this._handleChangeAddress=e=>{this._handleChangePrinter({address:e})}
this._handleChangePort=e=>{this._handleChangePrinter({port:e})}
this._handleChangeDescription=e=>{this._handleChangePrinter({description:e})}
let t
t=e.printer?e.printer:{name:"",address:"",port:"",description:""}
this.state={printer:t}}UNSAFE_componentWillReceiveProps(e){e.printer&&this.setState({printer:e.printer})}componentDidUpdate(e,t){const n=e.savingState===sd.PENDING,a=this.props.savingState===sd.PENDING
!n&&a?Cr.$Z("Saving..."):n&&!a&&Cr.Cp()}render(){return d.createElement("div",{className:"u-flex-grow"},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:5},d.createElement(In.ZP,{isBeingCreated:this.props.isBeingCreated,isRequired:!0,isWritable:this.props.isWritable,label:"Name",name:"name",onChange:this._handleChangeName,value:this.state.printer.name})),d.createElement(ee.Z,{sm:5},d.createElement(In.ZP,{isBeingCreated:this.props.isBeingCreated,isRequired:!0,isWritable:this.props.isWritable,label:"Address",name:"address",onChange:this._handleChangeAddress,value:this.state.printer.address})),d.createElement(ee.Z,{sm:2},d.createElement(In.ZP,{isBeingCreated:this.props.isBeingCreated,isWritable:this.props.isWritable,label:"Port",name:"port",onChange:this._handleChangePort,type:De.T.NUMBER,value:this.state.printer.port}))),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},d.createElement(In.ZP,{isBeingCreated:this.props.isBeingCreated,isWritable:this.props.isWritable,label:"Description",name:"description",onChange:this._handleChangeDescription,value:this.state.printer.description})))),this.props.isBeingCreated&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,disabled:!this.props.isWritable,onClick:this._handleSubmit,size:O.qE.MEDIUM,text:"Create"}))}}const od=PrinterSettings,{SAVING_STATES:ld}=Vt
class PrinterSettingsPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[ml.Z,zc.Z]}enhanceProps(){const e=this.navStore().getSource(this.props.registryId)
let t={savingState:this.storableStore().getSavingState()}
this.props.printerId&&(t={...t,printer:this.storableStore().getPrinter(this.props.printerId)})
return{isWritable:Boolean(e)&&hl.hasSettingsAccess(e),...t}}}class PrinterSettingsPage extends d.Component{constructor(){super(...arguments)
this._fetchPrinters=()=>{Kc.LI()}
this._handleNavigateToPrinters=()=>{(0,j.ZP)(hl.getRegistryPrintersUrl(this.props.ownerUrlId,this.props.registryId))}
this._handleCreate=e=>{Kc.SE(this.props.registryId,this.props.ownerUrlId,e)}
this._handleUpdate=e=>{(0,ie.hu)(null!=this.props.printerId,"printerId must exist for update.")
this.props.printerId&&Kc.CN(this.props.printerId,e)}}componentDidMount(){this._fetchPrinters()}componentDidUpdate(e,t){this.props.printerId!==e.printerId&&this._fetchPrinters()
e.savingState===ld.PENDING&&hl.isSavingFinished(this.props.savingState)&&u.resetSavingState()}render(){this.props.printer&&(0,T._w)(`${this.props.printer.name} - Printers`)
return d.createElement(J.Z,{onClickTitle:this._handleNavigateToPrinters,subtitle:this.props.printerId&&this.props.printer?this.props.printer.name:"",title:"Printers",toolbar:this.props.printerId&&d.createElement(Q.Z,{ids:[this.props.printerId],buttonSize:O.qE.MEDIUM,buttonStyle:O.ZJ.TERTIARY_GRAY})},this.props.printerId&&!this.props.printer?d.createElement(H.Z,null):d.createElement(od,{isBeingCreated:!this.props.printerId,isWritable:this.props.isWritable,printer:this.props.printer,onCreate:this._handleCreate,onUpdate:this._handleUpdate,savingState:this.props.savingState}))}}const cd=PrinterSettingsPageConnector.connect(PrinterSettingsPage)
var dd=n(610977)
class LocationSchemasListing extends d.Component{constructor(){super(...arguments)
this.handleCreate=()=>{T.c4(null,hl.getCreateLocationSchemaUrl(this.props.ownerUrlId,this.props.registryId))}
this.urlForSchema=e=>hl.getLocationSchemaSettingsUrl(this.props.ownerUrlId,this.props.registryId,e)
this.mapSchemaToRowValue=e=>[d.createElement("span",{className:"u-small-spacing-left"},e.name,d.createElement(no.Z,{item:e})),e.fields.map((e=>e.displayName)).join(", "),...(0,dd.g)()?this.renderValidationSummaryColumns(e):[]]}renderValidationSummaryColumns(e){if(!(0,dd.g)())return[]
if(0===e.numValidationFailures)return[d.createElement("span",null)]
const t=`${hl.getLocationSchemaSettingsUrl(this.props.ownerUrlId,this.props.registryId,e.id)}/validation`
return[d.createElement("div",{onClick:e=>{e.stopPropagation()
e.preventDefault();(0,j.ZP)(t)},className:(0,C.iv)(ud.validationSummaryLink)},e.numValidationFailures)]}render(){const e=[{name:"Schemas",width:4},{name:"Fields",width:(0,dd.g)()?6:8},...(0,dd.g)()?[{name:"Validation Failures",width:2}]:[]]
return d.createElement(Yi.Z,{columnHeaders:e,schemas:this.props.locationSchemas,schemaType:Ei.R.LOCATION,navigateToCreate:this.handleCreate,urlForSchema:this.urlForSchema,archiveSchemas:Hi.Af,unarchiveSchemas:Hi.QR,deleteSchema:Lc.xQ,isWritable:this.props.isWritable,mapSchemaToRowValue:this.mapSchemaToRowValue})}}const ud=C.mM.create({validationSummaryLink:{display:"inline-block",height:"100%",width:"75%",float:"left",textAlign:"center",color:b.t0,padding:"17px 0 14px",margin:"-17px 0 -14px",":hover":{color:b.Ej,textDecoration:"underline"}}}),md=LocationSchemasListing,pd=ot.Ps`
  query LocationSchemasSettingsPageWithAddedInfoQuery($registryId: StrictString!)
  @skipAudit
  @engComponent(name: INVENTORY) {
    registry(id: $registryId) {
      ... on RegistryNode {
        id
        locationSchemas {
          id
          name
          fields: fieldsJson
          numValidationFailures
          ...HasArchiveRecordGraphQL
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("HasArchiveRecord").fragment}
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function LocationSchemasPage(e){d.useEffect((()=>{(0,T._w)("Location Schemas - Registry Settings")}),[])
return d.createElement(md,{isWritable:e.isWritable,locationSchemas:e.locationSchemas,ownerUrlId:e.ownerUrlId,registryId:e.registryId})}const hd=function QueryingLocationSchemasPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId),n=(0,nt.IJ)(pd,{variables:{registryId:e.registryId}}),a=n.type===nt.NI.SUCCESS?n.data.registry:null
a&&(0,ie.hu)(!(0,at.CZ)(a),"Expected registry to be accessible")
const i=null!=a?(0,ae.Z)(a.locationSchemas,[{accessor:({name:e})=>e,naturalSort:!0}]):null
return d.createElement(LocationSchemasPage,{...e,locationSchemas:i,isWritable:t})},{SAVING_STATES:Ed}=Vt
function LocationSchemaSettings(e){var t
const[n,a]=(0,d.useState)(null!==(t=e.locationSchema)&&void 0!==t?t:{name:"",prefix:"",sqlIdentifier:"",allFields:[]}),isWritable=()=>{var t
return e.isWritable&&!(0,Ci.ZP)({...n,id:null!==(t=n.id)&&void 0!==t?t:""})};(0,d.useEffect)((()=>{e.locationSchema&&a(e.locationSchema)}),[e.locationSchema])
const handleChangeSchema=t=>{const i=Aa()(n,{$merge:t})
a(i)
e.isBeingCreated||handleSubmit(null,i)},handleSubmit=(t,a)=>{a=null!=a?a:n
const i=hl.sanitizeFields(a.allFields),r={...a,allFields:i,fields:i}
e.isBeingCreated?e.onCreate(r):e.onUpdate(r)}
return d.createElement("div",{className:"u-flex-grow"},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:e.locationSchema?4:6},d.createElement(In.ZP,{isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:isWritable(),label:"Prefix",name:"prefix",onChange:e=>{handleChangeSchema({prefix:e})},value:n.prefix})),d.createElement(ee.Z,{sm:e.locationSchema?4:6},d.createElement(In.ZP,{isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:isWritable(),label:"Name",name:"name",onChange:e=>{handleChangeSchema({name:e})},value:n.name})),e.locationSchema&&d.createElement(ee.Z,{sm:4},d.createElement(Uc.ZP,{onChange:e=>{handleChangeSchema({sqlIdentifier:e})},isWritable:isWritable()&&!e.isBeingCreated,sqlIdentifier:n.sqlIdentifier})))),d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},d.createElement(gi.ZP,{shouldShowIsParentLink:!1,shouldShowIsRequired:!1,shouldShowIsIntegration:!1,schemaId:e.locationSchema?e.locationSchema.id:null,schema:e.locationSchema,fields:n.allFields,handleDeleteConfirmation:e=>{M.iG("Confirm Delete","Are you sure you want to delete this location field?\n      All values corresponding to this location field will be deleted. This action cannot be undone.","danger").done((()=>{e(Dc.Zk)}))},isBeingCreated:e.isBeingCreated,isDisabled:!isWritable(),itemClass:StorableFieldTableRow,onFieldsChange:e=>{handleChangeSchema({allFields:e})},registryId:e.registryId,ownerUrlId:e.ownerUrlId,ownerId:e.registry.s_owner.id,savingState:e.savingState,schemaType:"location",tagSchemas:e.tagSchemas,storableSchemas:e.storableSchemas})))),e.isBeingCreated&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,disabled:!isWritable(),onClick:handleSubmit,size:O.qE.MEDIUM,text:"Create"}))}LocationSchemaSettings.propTypes={isBeingCreated:Ps().bool.isRequired,isWritable:Ps().bool.isRequired,locationSchema:Mc.yA,onCreate:Ps().func.isRequired,onUpdate:Ps().func.isRequired,registryId:Ps().string.isRequired,ownerUrlId:Ps().string.isRequired,savingState:Ps().oneOf(Object.keys(Ed)).isRequired}
function QueryingLocationSchemaSettings(e){return useQueryingStorableSchemaSettings(e,(t=>d.createElement(LocationSchemaSettings,{...e,...t})))}class LocationSchemaSettingsPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[dc.Z]}enhanceProps(){const e={savingState:this.sampleSchemaStore().getSavingState()}
this.props.locationSchemaId&&Object.assign(e,{locationSchema:this.sampleSchemaStore().getLocationSchema(this.props.locationSchemaId)})
return e}}var Sd
!function(e){e.SCHEMA="SCHEMA"
e.VALIDATION="VALIDATION"}(Sd||(Sd={}))
class LocationSchemaSettingsPage extends d.Component{constructor(){super(...arguments)
this.fetchLocationSchemas=()=>{Lc.Yd()}
this.handleNavigateToLocationSchemas=()=>{T.c4(null,hl.getRegistryLocationSchemasUrl(this.props.ownerUrlId,this.props.registryId))}
this.handleCreate=e=>{Lc.YJ(this.props.registryId,this.props.ownerUrlId,e)}
this.handleUpdate=e=>{(0,ie.hu)(null!=this.props.locationSchemaId,"locationSchemaId must exist for update.")
this.props.locationSchemaId&&Lc.Le(this.props.locationSchemaId,e)}
this.navigateToUrlForSettingsTab=e=>{if(!this.props.locationSchemaId)return
const t=function LocationSchemaSettingsPage_routeSectionForSettingsTab(e){return{[Sd.SCHEMA]:"",[Sd.VALIDATION]:"/validation"}[e]}(e),n=hl.getLocationSchemaSettingsUrl(this.props.ownerUrlId,this.props.registryId,this.props.locationSchemaId);(0,j.ZP)(`${n}${t}`)}
this.shouldRenderTabs=()=>null!=this.props.locationSchema&&this.shouldRenderValidationSettingsTab()}componentDidMount(){this.fetchLocationSchemas()}componentDidUpdate(e){e.savingState===Vt.SavingState.PENDING&&hl.isSavingFinished(this.props.savingState)&&Lc.KG()}shouldRenderValidationSettingsTab(){return S.ZP.INVENTORY_ENABLE_LOCATION_CAPACITY&&null!=this.props.locationSchema}getSanitizedActiveTab(){return this.props.activeTab!==Sd.VALIDATION||this.shouldRenderValidationSettingsTab()?this.props.activeTab:Sd.SCHEMA}render(){this.props.locationSchema&&T._w(`${this.props.locationSchema.name} - Location Schemas`)
const e=d.createElement(QueryingLocationSchemaSettings,{isBeingCreated:!this.props.locationSchemaId,isWritable:this.props.isWritable,locationSchema:this.props.locationSchema,registryId:this.props.registryId,ownerUrlId:this.props.ownerUrlId,onCreate:this.handleCreate,onUpdate:this.handleUpdate,savingState:this.props.savingState})
return d.createElement(SchemaSettingsPageContainer,{onNavigateToListing:this.handleNavigateToLocationSchemas,schema:this.props.locationSchemaId&&this.props.locationSchema?this.props.locationSchema:null,schemaType:_e.LOCATION_SCHEMA},this.props.locationSchemaId&&!this.props.locationSchema?d.createElement(H.Z,null):this.shouldRenderTabs()?d.createElement(Ye.Xl,{activeTab:this.getSanitizedActiveTab(),className:"u-flex-grow",onRequestTabChange:this.navigateToUrlForSettingsTab},d.createElement(Ye.OK,{tabKey:Sd.SCHEMA,title:"Location schema settings"},e),this.shouldRenderValidationSettingsTab()&&d.createElement(Ye.OK,{tabKey:Sd.VALIDATION,title:"Validation failures"},d.createElement("div",null,"Validation is not yet enabled for locations."))):e)}}const Td=LocationSchemaSettingsPageConnector.connect((function QueryingLocationSchemaSettingsPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(LocationSchemaSettingsPage,{...e,isWritable:t})}))
function DraggableAliasField(e){return d.createElement("div",{className:"simpleDivTable-rowContainer selectorSettings-simpleDivTable-rowContainer"},d.createElement("a",{className:N()("u-primary-pointer simpleDivTable-action simpleDivTable-action--move",{faded:!e.isDragging,"u-primary-color":e.isDragging,invisible:!e.isEditable}),onMouseDown:e.onDragStart},d.createElement(P.Z,{icon:"arrows-up-down-left-right"})),d.createElement("div",{className:"selectorSettings-simpleDivTable-row"},d.createElement(ul.Z,{...e})))}var gd=n(684321)
class ImportSchemaFieldSelectorOptionsModal extends d.Component{constructor(){super(...arguments)
this.state={optionsText:"",invalidOptionNames:[],repeatedOptionNames:[]}
this._handleSubmit=()=>{const e=this.state.optionsText.split("\n").map((e=>e.trim())).filter((e=>""!==e)),t=e.filter((e=>this.props.existingOptionNames.includes(e)))
let n=e.filter(((t,n)=>e.indexOf(t)!==n))
n=[...new Set(n)]
t.length>0||n.length>0?this.setState({invalidOptionNames:t,repeatedOptionNames:n}):this.props.onRequestSubmit(e)}
this._handleChangeOptionsText=e=>{this.setState({optionsText:e.target.value})}}_getButtons(){return[{key:"import",style:O.ZJ.PRIMARY,disabled:!this.state.optionsText,submit:!0,text:"Import options"}]}render(){return d.createElement(B.ZP,{className:"schemaFieldSelectorOptionsModal",title:"Import options",onRequestClose:this.props.onRequestClose,onRequestSubmit:this._handleSubmit,buttons:this._getButtons()},d.createElement("div",null,d.createElement("span",null,"Enter the desired options, one option per line."),d.createElement("textarea",{autoFocus:!0,onChange:this._handleChangeOptionsText,value:this.state.optionsText,rows:8}),this.state.invalidOptionNames.length>0&&d.createElement("div",{className:"alert alert-danger u-mini-spacing-top u-mini-spacing-bottom"},d.createElement("span",null,"The following options already exist for the dropdown; please remove them."),d.createElement("ul",null,this.state.invalidOptionNames.map(((e,t)=>d.createElement("li",{key:t},e))))),this.state.repeatedOptionNames.length>0&&d.createElement("div",{className:"alert alert-danger u-mini-spacing-top u-mini-spacing-bottom"},d.createElement("span",null,"The following options were repeated; please remove duplicate lines."),d.createElement("ul",null,this.state.repeatedOptionNames.map(((e,t)=>d.createElement("li",{key:t},e)))))))}}ImportSchemaFieldSelectorOptionsModal.propTypes={onRequestClose:Ps().func.isRequired,onRequestSubmit:Ps().func.isRequired,existingOptionNames:Ps().arrayOf(Ps().string.isRequired).isRequired}
const fd=ImportSchemaFieldSelectorOptionsModal
var Id=n(88941),Ad=n(666743)
function sanitizeName(e){return e.trim()}class SchemaFieldSelectorSettingsPageConnector extends _.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[qo.Z]}enhanceProps(){return{selector:this.props.selectorId?this.schemaFieldSelectorStore().getSelectorById(this.props.selectorId):null,registrySelectors:this.schemaFieldSelectorStore().getOrderedSelectorsForRegistry(this.props.registryId),selectorOptionToUpdate:this.schemaFieldSelectorStore().getSelectorOptionToUpdate()}}}class SchemaFieldSelectorSettingsPage extends d.Component{constructor(e){var t
super(e)
this.handleChangeSelectedArchivePurposes=e=>{this.setState({selectedArchivePurposes:e})}
this.handleMoveOption=e=>{const t=(0,St.m8)(this.state.options.map((e=>[e.id,e]))),n=this.state.options.map((e=>e.id)).filter((t=>!e.includes(t))),a=[...e,...n].map((e=>t[e]))
this.setState({options:a})}
this.handleMoveOptionComplete=()=>{this.props.selectorId&&this.updateSelector(null,this.state.options)}
this.isExistingSchemaFieldSelectorOption=e=>void 0!==e.id
this.filterToExistingSchemaFieldSelectorOptions=e=>e.filter((e=>this.isExistingSchemaFieldSelectorOption(e)))
this.getVisibleExistingOptions=()=>{if(this.props.selectorId){const e=Ol.F(this.filterToExistingSchemaFieldSelectorOptions(this.state.options),this.state.selectedArchivePurposes.flat())
if(null==e)return[]
const t=e.filter((e=>(0,Ci.ZP)(e)))
return[...e.filter((e=>!(0,Ci.ZP)(e))),...t]}return this.filterToExistingSchemaFieldSelectorOptions(this.state.options)}
this.isWritable=()=>this.props.isWritable&&!this.state.archiveRecord
this.validateSelectorName=(e,t)=>{const n=sanitizeName(t)
if(e!==n&&this.state.registrySelectorNames.includes(n)){rt.ZP.error("A dropdown with that name already exists in the registry")
return!1}return!0}
this.validateOptionName=(e,t)=>{const n=sanitizeName(t)
if(e!==n&&this.state.options.some((e=>e.name===n))){rt.ZP.error("You cannot have two options with the same name")
return!1}return!0}
this.validateCreateOptions=()=>{const e=this.state.options.map((e=>e.name)).map((e=>sanitizeName(e)))
if(!e.every((e=>e.length))){rt.ZP.error("Every option must have a name")
return!1}if(e.length!==new Set(e).size){rt.ZP.error("You cannot have two options with the same name")
return!1}return!0}
this.createOption=(e,t)=>{this.hideNewOptionField(t)
const n=[...this.state.options,{name:sanitizeName(e)}]
this.setState({options:n})
this.props.selectorId&&this.updateSelector(null,n)}
this.confirmRemoveOptionWithTags=e=>{const t=this.state.options.filter((t=>!this.isExistingSchemaFieldSelectorOption(t)||t.id!==e.id))
this.updateSelector(null,t,e)}
this.confirmRenameOptionWithTags=(e,t)=>{const n=this.state.options.map((n=>this.isExistingSchemaFieldSelectorOption(n)&&n.id===e.id?{...n,name:sanitizeName(t)}:n))
this.updateSelector(null,n,e)}
this.confirmArchiveOptionWithTags=e=>{const t=this.state.options.map((t=>this.isExistingSchemaFieldSelectorOption(t)&&t.id===e.id?{...t,archiveRecord:{...t.archiveRecord,purpose:e.newArchiveRecord.purpose}}:t))
this.updateSelector(null,t,e)}
this.handleArchiveOption=(e,t)=>{(0,ie.hu)(1===e.length,"Expected only one selector option")
const n=this.state.options.map((n=>this.isExistingSchemaFieldSelectorOption(n)&&n.id===e[0]?{...n,archiveRecord:{...n.archiveRecord,purpose:t}}:n))
this.updateSelector(null,n)}
this.handleOpenArchiveModal=e=>{ct.bA({items:[e],onArchive:this.handleArchiveOption})}
this.unarchiveOption=e=>{const t=this.state.options.map((t=>t.name===e?{...t,archiveRecord:null}:t))
this.updateSelector(null,t)}
this.removeOption=e=>{const t=this.state.options.filter((t=>t.name!==e))
this.updateSelector(null,t)}
this.renameOption=(e,t)=>{if(e===t)return
const n=this.state.options.map((n=>n.name===e?{...n,name:sanitizeName(t)}:n))
this.setState({options:n})
this.updateSelector(null,n)}
this.renameSelector=(e,t)=>{const n=sanitizeName(t)
if(e===n)return
const a=n||e
this.props.selectorId?this.updateSelector(a):this.setState({name:a})}
this.hideNewOptionField=e=>{this.props.selectorId?this.setState({isOptionBeingCreated:!1}):this.setState({options:this.state.options.filter(((t,n)=>n!==e))})}
this.handleStartCreatingOption=()=>{this.props.selectorId?this.setState({isOptionBeingCreated:!0}):this.setState({options:[...this.state.options,{name:""}]})}
this.handleSetNewOptionName=(e,t)=>{this.setState({options:this.state.options.map(((n,a)=>a===e?{...n,name:t}:n))})}
this.handleReturnToRegistry=()=>{T.c4(null,hl.getRegistrySelectorsSettingsUrl(this.props.ownerUrlId,this.props.registryId))}
this.handleCreateSelector=()=>{if(this.state.name&&this.validateSelectorName(null,this.state.name)&&this.validateCreateOptions()){Cr.$Z("Saving...")
const e=this.state.options.map((e=>({...e,name:sanitizeName(e.name)})))
vl.Z.create({name:sanitizeName(this.state.name),schemaFieldSelectorOptions:e,registryId:this.props.registryId}).then((()=>{this.handleReturnToRegistry()})).always((()=>{Cr.Cp()}))}}
this.handleImportOptions=async()=>{const e=this.state.options.map((e=>e.name)),t=await(0,D.Z)(fd,{existingOptionNames:e})
if(null==t)return
const n=t.map((e=>({name:e}))),a=[...this.state.options,...n]
this.props.selectorId?this.updateSelector(null,a):this.setState({options:a})}
this.handleAlphabetizeOptions=()=>{const e=(0,St.UY)(this.state.options,"name")
this.props.selectorId?this.updateSelector(null,e):this.setState({options:e})}
this.updateSelector=(e,t,n)=>{Cr.$Z("Saving...")
vl.Z.update(this.props.registryId,this.props.selectorId,{...e&&{name:e},schemaFieldSelectorOptions:t,selectorOptionToUpdate:n}).always((()=>{Cr.Cp()}))}
this.openConfirmationModal=e=>{const{numLinkedTags:t,newName:n,newArchiveRecord:a,shouldDelete:i}=e,r=T._6(t,"field")
i?M.iG("Delete Option",`This option is used as a field value in ${t} file ${r}.\n        Deleting will reset the values of all fields using this option. Are you sure you want to delete?`,"danger").done((()=>{this.confirmRemoveOptionWithTags(e)})).fail((()=>{vl.Z.cancelUpdate()})):a?M.iG("Archive Option",`This option is used as a field value in ${t} file ${r}.\n           Archiving it will not change the values of fields using this option, but it will hide search filter\n           options for it. Are you sure you want to archive?`,"danger").done((()=>{this.confirmArchiveOptionWithTags(e)})).fail((()=>{vl.Z.cancelUpdate()})):M.iG("Rename Option",`This option is used as a value in ${t} file ${r}. Renaming\n        will change the values of all fields using this option to "${n}". Are you sure you want to\n        rename?`,"danger").done((()=>{this.confirmRenameOptionWithTags(e,n)})).fail((()=>{vl.Z.cancelUpdate()}))}
this.getRowDataForOptions=()=>this.getVisibleExistingOptions().map((e=>({id:e.id,itemProps:{archive:(0,Ci.ZP)(e)?null:()=>{this.handleOpenArchiveModal(e)},className:N()("selectorSettings-field",{"u-faded":(0,Ci.ZP)(e)}),complete:(0,Ci.ZP)(e)?null:t=>{this.renameOption(e.name,t)},id:e.id,initialAlias:e.name,isEditable:this.isWritable()&&!(0,Ci.ZP)(e),isWritable:this.isWritable(),placeholder:"Enter option name",remove:(0,Ci.ZP)(e)||S.ZP.ENABLE_ARCHIVING_V2?null:this.removeOption,unarchive:(0,Ci.ZP)(e)?this.unarchiveOption:null,validate:this.validateOptionName,isFullWidth:!0,onDragStart:St.ZT},itemClass:DraggableAliasField})))
let n,a,i=[]
bl.Z.fetchForRegistry(e.registryId)
if(e.selectorId){const t=e.selector
if(t){n=t.name
i=t.allSchemaFieldSelectorOptions
a=t.archiveRecord}}else{n=""
i=[]}let r=[us.BH]
a&&(r=[...r,a.purpose])
this.state={archiveRecord:a,isOptionBeingCreated:!1,loading:!this.props.registrySelectors,name:n,options:i,registrySelectorNames:(null!==(t=e.registrySelectors)&&void 0!==t?t:[]).map((e=>e.name)),selectedArchivePurposes:r}}componentDidMount(){this.state.loading&&Cr.$Z()}componentDidUpdate(e,t){!this.state.loading&&t.loading&&Cr.Cp()
if(!z()(this.props.selector,e.selector)||!z()(this.props.registrySelectors,e.registrySelectors)||!z()(this.props.selectorOptionToUpdate,e.selectorOptionToUpdate)){const{selectorOptionToUpdate:e,registrySelectors:t,selector:n}=this.props
e&&this.openConfirmationModal(e)
this.setState({loading:!this.props.registrySelectors,registrySelectorNames:(null!=t?t:[]).map((e=>e.name)),options:[],...n&&{name:n.name,options:n.allSchemaFieldSelectorOptions,archiveRecord:n.archiveRecord}})}}render(){var e,t,n,a
this.props.selector&&T._w(`${this.props.selector.name} - Dropdowns`)
if(this.state.loading)return d.createElement(H.Z,null)
let i
i=this.props.selectorId?d.createElement(Ad.Z,{itemDatas:this.getRowDataForOptions(),onMoveItem:this.handleMoveOption,onMoveItemEnd:this.handleMoveOptionComplete}):this.state.options.map(((e,t)=>d.createElement("div",{className:"selectorSettings-row",key:t},d.createElement(NewSelectorOptionField,{index:t,onRemove:this.hideNewOptionField,onChange:this.handleSetNewOptionName,value:e.name}))))
return d.createElement("div",{className:"settingsPage",...(0,g.Z)({component:"SchemaFieldSelectorSettingsPage",element:"root"})},d.createElement("div",{className:"settingsPage-contentWrapper"},d.createElement("div",{className:"u-lr-split"},d.createElement("div",null,d.createElement("span",{className:"settingsPageContainer-banner",onClick:this.handleReturnToRegistry},"Dropdowns /"),d.createElement("div",{className:"legacy-font-proxima-17"},this.props.selectorId&&d.createElement("span",null,this.state.name||"New Dropdown",d.createElement(no.Z,{item:{id:this.props.selectorId,name:null!==(t=null===(e=this.props.selector)||void 0===e?void 0:e.name)&&void 0!==t?t:"",archiveRecord:this.state.archiveRecord}})))),this.props.selectorId&&Ra.Z.hasEnterprisePlan()&&d.createElement(Q.Z,{ids:[this.props.selectorId]})),d.createElement("div",{className:"registrySettings-body"},d.createElement(ee.Z,{sm:1}),d.createElement(ee.Z,{sm:11},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement("div",{className:"metadata-header"},"Name"),d.createElement("div",null,this.props.selectorId?d.createElement(ul.Z,{className:"selectorSettings-field",complete:e=>{this.renameSelector(this.state.name,e)},initialAlias:this.state.name,isWritable:this.isWritable(),key:"selector name",placeholder:"Enter dropdown name",validate:this.validateSelectorName}):d.createElement("div",{className:"selectorSettings-nameInput"},d.createElement(Id.Z,{autoFocus:!0,onChange:e=>{this.setState({name:sanitizeName(e.target.value)})},placeholder:"Enter dropdown name",dataTestAttrs:{component:"SchemaFieldSelectorSettingsPage",element:"nameInput"}})))),d.createElement("div",{className:"settingsPageContainer-section"},d.createElement("div",null,d.createElement("div",{className:"metadata-header"},d.createElement("div",{className:"u-lr-split"},d.createElement("div",null,"Options",this.isWritable()&&d.createElement(v.Z,{onClick:this.handleStartCreatingOption})),this.isWritable()&&d.createElement("div",null,d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,onClick:this.handleImportOptions,size:O.qE.MINI,text:"Import Options"}),d.createElement(O.Co,{className:"pull-right u-mini-spacing-left",buttonStyle:O.ZJ.SECONDARY,disabled:this.state.isOptionBeingCreated||!(null===(n=this.state.options)||void 0===n?void 0:n.length),onClick:this.handleAlphabetizeOptions,size:O.qE.MINI,text:"Alphabetize"}))),!this.state.loading&&d.createElement("div",{className:"u-flex-display u-small-spacing-top"},d.createElement(ms.Z,{itemIds:this.state.options.map((e=>e.id)),onChangePurposes:this.handleChangeSelectedArchivePurposes,selectedPurposes:this.state.selectedArchivePurposes})))),i,d.createElement("div",null,this.state.isOptionBeingCreated&&d.createElement(ul.Z,{cancel:this.hideNewOptionField,className:"selectorSettings-field",complete:this.createOption,initialIsBeingEdited:!0,isWritable:this.isWritable(),key:"new option",placeholder:"Enter option name",validate:this.validateOptionName})),d.createElement("div",null,0===this.state.options.length&&!this.state.isOptionBeingCreated&&"This dropdown has no options"),d.createElement("div",{className:"u-small-spacing-top"},!this.props.selectorId&&d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,disabled:0===(null!==(a=this.state.name)&&void 0!==a?a:"").trim().length,onClick:this.handleCreateSelector,size:O.qE.MEDIUM,text:"Create",dataTestAttrs:{component:"SchemaFieldSelectorSettingsPage",element:"createButton"}})))))))}}function NewSelectorOptionField({index:e,value:t,onChange:n,onRemove:a}){return d.createElement("div",{className:"selectorSettings-creatingOptionRow"},d.createElement("div",{className:"metadata-field-col"},d.createElement(Id.Z,{autoFocus:!0,onChange:t=>{n(e,t.target.value)},placeholder:"Enter option name",value:t})),d.createElement(gd.Z,{isEditing:!1,remove:()=>{a(e)}}))}const yd=SchemaFieldSelectorSettingsPageConnector.connect((function QueryingSchemaFieldSelectorSettingsPage(e){const t=hl.useIsRegistryWritableQuery(e.registryId)
return d.createElement(SchemaFieldSelectorSettingsPage,{...e,isWritable:t})}))
var _d=n(389595)
const StudySchemasPage=e=>{(0,d.useEffect)((()=>{T._w("Study Schemas")}))
return d.createElement(Yi.Z,{schemas:e.schemas,errorMessage:e.errorMessage,schemaType:Ei.R.STUDY,navigateToCreate:()=>{T.c4(null,(0,_d.so)())},urlForSchema:_d.Gu,archiveSchemas:async(t,n)=>{try{await(0,st.jI)((async()=>{await _o.S8({analyticsMetadata:{actionOrigin:Rt.D2.SETTINGS_STUDY_SCHEMA_PAGE}},null,(async()=>{await(0,_d.uc)(t,(0,Hi.R0)(n,t))
rt.ZP.success("Study schema successfully archived.")}))})(),"Archiving...")}catch(e){rt.ZP.notifyError(e)}e.refetch()},unarchiveSchemas:async t=>{try{await _o.S8({analyticsMetadata:{actionOrigin:Rt.D2.SETTINGS_STUDY_SCHEMA_PAGE}},null,(async()=>{await(0,_d.Re)(t)
rt.ZP.success("Study schema successfully unarchived.")}))}catch(e){rt.ZP.notifyError(e)}e.refetch()},isWritable:e.areOrganizationSchemasCreatable})},Cd=ot.Ps`
  query StudySchemasPageQuery @skipAudit @engComponent(name: STUDIES) {
    studySchemas {
      id
      name
      archiveRecord {
        purpose
      }
    }
  }
`
function ConnectedStudySchemasPage(){const e=(0,Wi.Z)(),t=e.queryResultType===nt.NI.SUCCESS&&e.areOrganizationSchemasCreatable,n=(0,nt.IJ)(Cd,{fetchPolicy:"cache-and-network"}),a=n.type===nt.NI.SUCCESS?(0,St.UY)(n.data.studySchemas,"name"):null
return d.createElement(StudySchemasPage,{schemas:a,errorMessage:n.type===nt.NI.ERROR?"Error loading study schemas":void 0,areOrganizationSchemasCreatable:t,refetch:n.refetch})}function StudySchemaFieldTableRow(e){const t=(0,Fc._K)({initialField:e.initialField,schemaFieldSelectors:e.schemaFieldSelectors,assaySchemas:[],batchSchemas:[],storableSchemas:[],tagSchemas:[],schemaInterfaces:[],includeBooleanField:!0,includeJSONField:!0,includeAssayLinks:!1,includeBatchLinks:!1,includeEntryLinks:!1,includeGenericBioentityLinks:!1,includeSnapshotField:!1,includeSequenceLinks:!1,includeDnaSequenceSpecificLinks:!1,includeArchivedSchemas:!1,sequenceSchemaType:null})
return d.createElement(kc.Z,{...e,availableFieldOptions:t,isUneditable:e.initialField.isUneditable})}function StudySchemaMetadataSettings_Row({children:e}){return d.createElement("div",{className:(0,C.iv)(Rd.schemaMetadataRow)},e)}function StudySchemaMetadataSettings_Col({children:e}){return d.createElement("div",{className:(0,C.iv)(Rd.schemaMetadataColumn)},e)}function FieldWrapper({children:e}){return d.createElement("div",{className:(0,C.iv)(Rd.schemaMetadataField)},e)}function StudySchemaMetadataSettings({ownerId:e,setOwnerId:t,name:n,setName:a,prefix:i,setPrefix:r,fields:s,setFields:o,handleNext:l,ownerChoices:c,isBeingCreated:u,schemaId:m,schema:p}){var h
let E=null
n?i?(null==s?void 0:s.some((e=>!e.name)))&&(E="Schema fields must all have names"):E="Schema needs a prefix":E="Schema needs a name"
return d.createElement("div",{className:"u-flex-grow u-min-width-zero"},d.createElement("div",{className:"settingsPageContainer-section"},d.createElement(StudySchemaMetadataSettings_Row,null,d.createElement(d.Fragment,null,d.createElement(StudySchemaMetadataSettings_Col,null,d.createElement(FieldWrapper,null,d.createElement(Oi.Z,{isBeingCreated:u,isRequired:!0,isWritable:!0,onPrefixChange:r,prefix:i,dataTestAttrs:{component:"StudySchemaEditor",element:"prefixInput"}}))),d.createElement(StudySchemaMetadataSettings_Col,null,d.createElement(FieldWrapper,null,d.createElement(Ri.Z,{isWritable:!0,schema:p,onNameChange:a,name:n,dataTestAttrs:{component:"StudySchemaEditor",element:"nameInput"}}))),d.createElement(StudySchemaMetadataSettings_Col,null,d.createElement(FieldWrapper,null,d.createElement(Ni.Z,{ownerId:e,ownerChoices:c,onOwnerChange:e=>{t(e.id)},schema:null,dataTestAttrs:Li.owner})))))),d.createElement("div",{className:(0,C.iv)(Rd.fieldSection)},d.createElement(gi.ZP,{schemaId:m,isBeingCreated:u,schemaHasData:!1,isDisabled:!1,itemClass:StudySchemaFieldTableRow,fields:s,onFieldsChange:o,schemaType:"study",tagSchemas:[],batchSchemas:[],storableSchemas:[],assaySchemas:[],ownerUrlId:(null===(h=(0,yi.V)(e))||void 0===h?void 0:h.url_identifier)||"",ownerId:e,shouldShowIsRequired:!0,shouldShowIsIntegration:!1,shouldShowIsParentLink:!1,dataTestAttrs:{component:"StudySchemaCreateFlow",element:"fieldTable"},savingState:Vt.SavingState.COMPLETED})),l?d.createElement(ve.pf,{tooltipTitle:E},d.createElement(O.Co,{className:"u-small-spacing-right",buttonStyle:O.ZJ.SECONDARY,onClick:l,size:O.qE.MEDIUM,text:"Next",disabled:null!=E,dataTestAttrs:{component:"StudySchemaMetadataSettings",element:"nextButton"}})):null)}const Rd=C.mM.create({fieldSection:{marginTop:"32px",marginBottom:"32px"},schemaMetadataRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",marginBottom:"32px"},schemaMetadataColumn:{flex:.3,minWidth:0},schemaMetadataField:{width:"auto",marginBottom:"0"}}),Nd=ot.Ps`
  query StudySchemaPermissionSettingsQuery($studySchemaId: StrictString!)
  @skipAudit
  @engComponent(name: STUDIES) {
    studySchema(id: $studySchemaId) {
      ... on PoliceableInterface {
        id
        currentUserPermissionsJson
        ...CollaboratorInfoGraphQL
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,ut.f)("CollaboratorInfo").fragment}
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function ExistingStudySchemaPermissionSettings({studySchema:e,refetch:t}){const n=(0,Ai.tY)("CollaboratorInfo",e),[{collaborators:a,minimalCollaborators:i},r]=(0,ki.U9)(n.collaborators)
return d.createElement(Ui.K,{id:e.id,isReadOnly:!e.currentUserPermissionsJson.definitionEditable,collaborators:a,onUpdate:r,onSubmit:async()=>{await async function updateStudySchemaCollaborators(e,t){const n=await(0,_d._C)(e,t);(0,It.writeFragmentsToCache)((0,ut.f)("CollaboratorInfo"),[n.schema])}(e.id,{collaborators:i})
t()}})}const Od=function QueryingStudySchemaPermissionSettings({studySchemaId:e}){const t=(0,nt.IJ)(Nd,{variables:{studySchemaId:e}})
if(t.type===nt.NI.ERROR)return null
if(t.type===nt.NI.PENDING)return d.createElement(H.b,null);(0,ie.hu)(!(0,at.CZ)(t.data.studySchema),"Expected study schema to be accessible.")
return d.createElement(ExistingStudySchemaPermissionSettings,{studySchema:t.data.studySchema,refetch:async()=>{await t.refetch()}})}
var bd
!function(e){e.STUDY_SCHEMA_EDITOR="STUDY_SCHEMA_EDITOR"
e.STUDY_SCHEMA_ACCESS_POLICIES="STUDY_SCHEMA_ACCESS_POLICIES"}(bd||(bd={}))
function ExistingStudySchemaEditor_getSpecForRequest(e,t){return{fields:(0,yi.S)(e),idPrefix:t}}function ExistingStudySchemaEditor(e){const[t,n]=(0,d.useState)(bd.STUDY_SCHEMA_EDITOR),updateSchema=({name:t,spec:n})=>{(0,st.jI)((async()=>{await _o.S8({analyticsMetadata:{actionOrigin:Rt.D2.SETTINGS_STUDY_SCHEMA_PAGE}},null,(async()=>{if(null!=await(0,_d.af)((0,_d.pI)({schemaId:e.schema.id,name:t||e.schema.name,spec:n||ExistingStudySchemaEditor_getSpecForRequest(e.schema.allFields,e.schema.prefix)}))){rt.ZP.success("Updated study schema successfully")
e.refetch()}}))})(),"Updating study schema...")}
return d.createElement(Ye.Xl,{onRequestTabChange:e=>{n(e)},activeTab:t,className:"u-flex-grow"},d.createElement(Ye.OK,{tabKey:bd.STUDY_SCHEMA_EDITOR,title:"Study Schema Settings"},d.createElement(StudySchemaMetadataSettings,{ownerId:e.schema.organization.id,setOwnerId:St.ZT,name:e.schema.name,setName:e=>{updateSchema({name:e})},prefix:e.schema.prefix,setPrefix:t=>{updateSchema({spec:ExistingStudySchemaEditor_getSpecForRequest(e.schema.allFields,t)})},fields:e.schema.allFields,setFields:t=>{const n=t.map((e=>{const{cid:t,...n}=e
return n}))
z()(n,e.schema.allFields)||updateSchema({spec:ExistingStudySchemaEditor_getSpecForRequest(t,e.schema.prefix)})},ownerChoices:e.ownerChoices,isBeingCreated:!1,schemaId:e.schema.id,schema:e.schema})),d.createElement(Ye.OK,{tabKey:bd.STUDY_SCHEMA_ACCESS_POLICIES,title:"Access Policies"},d.createElement(Od,{studySchemaId:e.schema.id})))}var vd=n(910237)
function StudySchemaCreateFlow(e){var t
const[n,a]=(0,d.useState)(null===(t=e.ownerChoices[0])||void 0===t?void 0:t.id),[i,r]=(0,d.useState)([]),[s,o]=(0,d.useState)(""),[l,c]=(0,d.useState)("")
return d.createElement(fi.Z,{createSchema:function createSchema(e){const t={fields:(0,hl.sanitizeFields)(i).map((e=>({...e,systemName:(0,vd.Z)(e.displayName)}))),idPrefix:l};(0,st.jI)((async()=>{await _o.S8({analyticsMetadata:{actionOrigin:Rt.D2.SETTINGS_STUDY_SCHEMA_PAGE,actionMethod:Rt.LY.CREATE_BUTTON}},null,(async()=>{const a=await(0,_d.af)((0,_d.TK)({ownerId:n,name:s,spec:t,collaborators:e}))
if(null!=a){T.c4(null,(0,_d.Gu)(a.schemaId))
rt.ZP.success("Successfully created study schema.")}}))})(),"Creating study schema...")},defaultSchemaCollaboratorsSchemaType:Rt.l.STUDY,metadataTitle:"Study Schema Settings",isSchemaPermissionsEnabled:!0,ownerId:n,organizations:e.organizations,renderMetadataSettings:function renderMetadataSettings(t){return d.createElement(StudySchemaMetadataSettings,{ownerId:n,setOwnerId:a,name:s,setName:o,prefix:l,setPrefix:c,fields:i,setFields:r,handleNext:t,ownerChoices:e.ownerChoices,isBeingCreated:!0})}})}const Pd=ot.ZP`
  query StudySchemaEditorQuery @skipAudit {
    currentUser {
      id
      organizations {
        ... on OrganizationNode {
          ...OrganizationDefaultSchemaCollaboratorsConfiguration
        }
      }
    }
  }
  ${ui.G}
`,Ld=ot.ZP`
  query StudySchemaQuery($schemaId: StrictString!) @skipAudit @engComponent(name: STUDIES) {
    studySchema(id: $schemaId) {
      ... on StudySchemaNode {
        id
        name
        prefix
        fields: fieldsJson
        allFields: allFieldsJson
        organization {
          id
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("InaccessibleInfo").fragment}
`,StudySchemaEditor=e=>{const t=(0,Si.u)()
return 0===t.length?d.createElement(pi.Z,{pluralName:"study schemas"}):d.createElement(J.Z,{onClickTitle:()=>{T.c4(null,(0,_d.$_)())},subtitle:e.schema?e.schema.name:"Create Study Schema",title:"Study Schemas"},e.schema?d.createElement(ExistingStudySchemaEditor,{schema:e.schema,ownerChoices:t,refetch:e.refetch}):d.createElement(StudySchemaCreateFlow,{organizations:e.organizations,ownerChoices:t,schemaPermissions:null}))},study_schemas_StudySchemaEditor=({schemaId:e})=>d.createElement(nt.ZP,{query:Ld,renderLoading:()=>d.createElement(H.b,null),variables:{schemaId:e},skip:null==e,fetchPolicy:"cache-and-network"},((e,{refetch:t})=>{const n=null==e?void 0:e.studySchema
if((0,at.CZ)(n)){rt.ZP.error("You do not have access to this study schema.",{id:n.invalidId})
return d.createElement(H.Z,null)}return d.createElement(nt.ZP,{query:Pd,renderLoading:()=>d.createElement(H.b,null)},(({currentUser:e},{refetch:a})=>d.createElement(StudySchemaEditor,{organizations:e.organizations,schema:null!=n?n:void 0,refetch:()=>{t()
a()}})))}))
var Dd=n(57266)
function CreateAssaySchemaPage(e){return d.createElement(Io,{schemaType:e.schemaType,createSchema:function createAssaySchema(e){_o.gW({analyticsMetadata:{actionOrigin:Rt.D2.SETTINGS_ASSAY_SCHEMA_PAGE_JSON,actionMethod:Rt.LY.CREATE_BUTTON}},null,(()=>{jo.xS(e)}))},listingUrl:uo.VO(e.schemaType),canCreateWarehouseTableName:S.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME})}var Md=n(621768)
const{Section:wd}=Md,Fd={ASSAY_REQUEST:wd.REQUEST_SCHEMAS,REQUEST_TASK:wd.REQUEST_TASK_SCHEMAS}
var kd=n(305487),Ud=n(671509),xd=n(505074),Bd=n(231496),Zd=n(966248),qd=n(210554),Gd=n(140474),Vd=n(23062),Hd=n(722938),Wd=n(367780),Yd=n(254864)
const $d=[{name:"Any natural analog",value:[]},{name:"Any sugar",value:[Rt.TF.D_LOWER,Rt.TF.R_LOWER]},{name:"Any base",value:[Rt.TF.A,Rt.TF.C,Rt.TF.G,Rt.TF.T,Rt.TF.U]},...Ir.Ws.map((e=>({name:Ir.vZ[e],value:[e],metadata:Ir.Tg[e]}))),{name:"Degenerate",isHeader:!0},...Ir.xn.map((e=>({name:Ir.vZ[e],value:[e],metadata:`${Ir.Tg[e]} ${Ir.eA[e]}`})))]
function MonomerListingFilters({archivePurposes:e,handleNaturalAnalogueFilter:t,handleArchivePurposeFilter:n,handleQueryFilter:a,monomerIds:i,naturalAnalogues:r,query:s}){return d.createElement("div",{className:(0,C.iv)(Kd.filters)},d.createElement(Ln.ZP,{className:(0,C.iv)(Kd.search),clearType:Ln.Nl.X,onChange:e=>{a(e.target.value)},onEscape:()=>{a("")},placeholder:"Monomer name or symbol",value:s}),d.createElement(w.ZP,{className:(0,C.iv)(Kd.dropdown),menu:d.createElement(Yt.Z,{width:Zr.zL.SMALL,selectedValue:r,optionDatas:$d,onSelect:t}),displayName:(o=r,0===o.length?"Filter by natural analog":2===o.length?"Filtering by: Any sugar":5===o.length?"Filtering by: Any base":`Filtering by: ${Ir.vZ[o[0]]}`)}),d.createElement(ms.Z,{selectedPurposes:e,onChangePurposes:n,itemIds:i}))
var o}const Kd=C.mM.create({filters:{marginTop:"20px",marginBottom:"20px",display:"flex",alignItems:"center"},search:{marginRight:"10px",marginTop:"6px",marginBottom:"6px",width:267,verticalAlign:"middle"},dropdown:{display:"flex",verticalAlign:"middle",marginRight:"10px"}}),zd=[{header:"Name",accessorKey:"name",flexGrow:1,isCollapsible:!1,isSortable:!0,sortKey:"name"},{header:"Symbol",accessorKey:"symbol",isCollapsible:!0,isSortable:!0,sortKey:"symbol"},{header:"Chemical structure",accessorKey:"chemicalStructureImage",flexGrow:1,isCollapsible:!0,isSortable:!1},{header:"Visual",accessorKey:"visualElement",isCollapsible:!0,isSortable:!1},{header:"Natural Analogue",accessorKey:"naturalAnalogue",isCollapsible:!0,isSortable:!0,sortKey:"naturalAnalogue"},{header:"Polymer Type",accessorKey:"polymerType",isCollapsible:!0,isSortable:!0,sortKey:"polymerType"},{header:"Monomer Type",accessorKey:"monomerType",isCollapsible:!0,isSortable:!0,sortKey:"monomerType"},{header:"Canonical SMILES",accessorKey:"canonicalSmiles",flexGrow:1,isCollapsible:!0,isSortable:!1,sortKey:"canonicalSmiles",wrapText:!0},{header:"Original SMILES",accessorKey:"originalSmiles",flexGrow:1,isCollapsible:!0,isSortable:!1,sortKey:"originalSmiles",wrapText:!0},{header:"Calculated molecular weight",accessorKey:"calculatedMolecularWeight",flexGrow:1,isCollapsible:!0,isSortable:!0,sortKey:"calculatedMolecularWeight",wrapText:!0},{header:"Custom molecular weight",accessorKey:"customMolecularWeight",flexGrow:1,isCollapsible:!0,isSortable:!1,wrapText:!0},{header:"ID",accessorKey:"id",flexGrow:1,isCollapsible:!0,isSortable:!0,wrapText:!0},{header:"Actions",accessorKey:"actions",isCollapsible:!1,isSortable:!1}]
function getMonomerVisual(e){var t,n,a
const i=Ir.lE[e.naturalAnalogue]
return i===Ir.Zp.PHOSPHATE?null!==(t=e.visualSymbol)&&void 0!==t?t:Rt.E$.DIAMOND_FILLED:i===Ir.Zp.SUGAR?null!==(n=e.color)&&void 0!==n?n:Ir.K4:null!==(a=e.color)&&void 0!==a?a:Ir.Qw}function MonomerListing(){(0,d.useEffect)((()=>{(0,T._w)("Monomers")}),[])
const[e,t]=(0,d.useState)([]),[n,a]=(0,d.useState)([us.BH]),[i,r]=(0,d.useState)(""),s=ts.Z.currentUser().isTenantAdmin,downloadCsv=async e=>{try{rt.ZP.info("Downloading monomers...")
const{s3Location:t}=await(0,Nr.MZ)(e);(0,T.gG)(t)}catch(e){ft.d0(e)&&rt.ZP.notifyError(e)
throw e}}
return d.createElement("div",{className:(0,C.iv)(Qd.monomerPage),...(0,g.Z)({component:"MonomerListing",element:"root"})},d.createElement("div",{className:(0,C.iv)(Qd.monomerListing)},d.createElement(f.R6,{className:(0,C.iv)(Qd.headerSection)},"Monomer library"),d.createElement(nt.ZP,{query:Ir.V,renderLoading:()=>d.createElement(H.b,null),fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0},(({monomers:o},{refetch:l})=>{const c=o.reduce(((e,t)=>({...e,[t.id]:getMonomerVisual(t)})),{}),u=Object.values(c).filter((e=>![Ir.Qw,Ir.K4,...Object.values(Rt.E$)].includes(e.toUpperCase()))),m=o.filter((t=>0===e.length||e.includes(t.naturalAnalogue))).filter((e=>n.includes(us.BH)&&!e.archiveRecord||e.archiveRecord&&n.includes(e.archiveRecord.purpose))).filter((e=>""===i||e.name.toLowerCase().includes(i.toLowerCase())||e.symbol.toLowerCase().includes(i.toLowerCase()))).map((e=>{var t
const n=Ir.lE[e.naturalAnalogue],a=!s||Boolean(e.archiveRecord),i=d.createElement("div",{className:(0,C.iv)(Qd.actionButtons)},isMonomerManagementEnabledForUser()&&!e.isNatural&&d.createElement(Wd.Z,{item:e,onArchive:async(e,t)=>{Cr.$Z()
await(0,Nr.Dl)(e,t)
await l()
Cr.Cp()},onUnarchive:async e=>{Cr.$Z()
await(0,Nr._l)(e)
await l()
Cr.Cp()},isArchivable:s,isUnarchivable:s}),isMonomerManagementEnabledForUser()&&!e.isNatural&&!e.archiveRecord&&d.createElement(ve.ZP,{title:"Edit"},d.createElement(O.Co,{icon:"edit",onClick:()=>{(0,j.ZP)(`/monomers/${e.id}/edit`)},size:O.qE.SMALL,buttonStyle:O.ZJ.TERTIARY_GRAY,dataTestAttrs:{component:"MonomerListing",element:"editButton"}})),d.createElement(ve.ZP,{title:zi.QU},d.createElement(O.Co,{icon:"audit-trail",onClick:()=>{(0,Ce.dV)([e.id])},size:O.qE.SMALL,buttonStyle:O.ZJ.TERTIARY_GRAY})))
return{id:e.id,data:{name:e.name,symbol:e.symbol,naturalAnalogue:Ir.vZ[e.naturalAnalogue],polymerType:e.polymerType,monomerType:Ir.qC[e.monomerType],canonicalSmiles:e.canonicalSmiles,originalSmiles:e.originalSmiles,isNatural:e.isNatural,calculatedMolecularWeight:null!==(t=e.calculatedMolecularWeight)&&void 0!==t?t:0,customMolecularWeight:e.customMolecularWeight,id:e.id,chemicalStructureImage:d.createElement(Yd.Z,{chemicalStructureImage:e.chemicalStructureImage,className:(0,C.iv)(Qd.chemicalStructureContainer),svgClassName:(0,C.iv)(Qd.chemicalStructureSvg)}),visualElement:n===Ir.Zp.PHOSPHATE?d.createElement(MonomerVisualSymbolDropdown,{selectedSymbol:c[e.id],monomerId:e.id,onSelectSymbol:async t=>{await(0,Nr.YZ)(e.id,{visualSymbol:t})
l()},isDisabled:a}):d.createElement(MonomerColorDropdown,{selectedColor:c[e.id],nucleotideComponent:n,monomerId:e.id,onSelectColor:async t=>{await(0,Nr.YZ)(e.id,{color:t})
l()},isDisabled:a,allUsedColors:u}),actions:i}}}))
return d.createElement("div",null,d.createElement("div",{className:(0,C.iv)(Qd.headerSection)},d.createElement("div",{className:"u-lr-split u-spacing-right"},d.createElement(MonomerListingFilters,{handleArchivePurposeFilter:a,handleNaturalAnalogueFilter:t,handleQueryFilter:r,archivePurposes:n,naturalAnalogues:e,query:i,monomerIds:o.map((e=>e.id))}),d.createElement("div",{className:(0,C.iv)(Qd.topButtons)},d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.MEDIUM},[d.createElement(x.Z,{key:1,onSelect:()=>{downloadCsv(!1)}},"Export as CSV with all fields"),d.createElement(x.Z,{key:2,onSelect:()=>{downloadCsv(!0)}},"Export as CSV for reimport into Benchling")])},d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,size:O.qE.SMALL,icon:"export",isDropdown:!0})),d.createElement(ve.ZP,{title:"Export audit logs for all monomers"},d.createElement(O.Co,{icon:"audit-trail",onClick:()=>{(0,Ce.dV)(o.map((e=>e.id)))},size:O.qE.SMALL,buttonStyle:O.ZJ.TERTIARY_GRAY})),isMonomerManagementEnabledForUser()?d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"Add new monomer",onClick:()=>{(0,j.ZP)("/monomers/create")},dataTestAttrs:{component:"MonomerListing",element:"addNewMonomerButton"}}):d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,size:O.qE.SMALL,text:"Browse HELM Library",onClick:()=>{(0,j.ZP)("/monomers/view/helm-library")}})))),d.createElement(Lr.ZP,{canResizeColumns:!0,columns:zd,getRowContentHeight:()=>80,emptyTableText:"No monomers were found.",getSortValue:(e,t)=>e.data[t],initialRows:m,initialSort:[{sortKey:"name"}],tableKey:Pr.Uw.MONOMER_LISTING_TABLE,calcLeftPadding:()=>40}))}))))}const Qd=C.mM.create({monomerListing:{margin:"40px 0"},monomerPage:{overflowY:"auto",height:"100%"},headerSection:{marginLeft:"40px"},chemicalStructureContainer:{height:"80px",textAlign:"center"},chemicalStructureSvg:{width:"100%",height:"100%"},topButtons:{display:"flex",justifyContent:"space-between",gap:4},actionButtons:{display:"flex",justifyContent:"space-evenly"}})
var jd,Jd=n(954505),Xd=n(512902),eu=n(178570),tu=n(226778)
!function(e){e.TEXT="TEXT"
e.DROPDOWN="DROPDOWN"}(jd||(jd={}))
function ReviewLifecycleConfigurationField({id:e,className:t,optionDatas:n,dropdownLabel:a,selectedOption:i,handleSelectionChange:r,disabled:s,disabledRenderType:o=jd.DROPDOWN,help:l,dataTestAttrs:c}){const u=ue.default.uniqueId(e)
return d.createElement("div",{className:t},d.createElement(an.Z,{id:u,label:a,labelStyle:F.Z.STYLES.LABEL,help:l,isRequired:!s},s&&o===jd.TEXT?d.createElement("div",null,i.name.toString()):d.createElement(w.ZP,{id:u,className:(0,C.iv)(nu.flexGrow),displayName:i.name,menu:d.createElement(U.ZP,{value:i.name,height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,scrollable:!0},n.map((e=>d.createElement(x.Z,{className:e.className,key:e.name.toString(),value:e,onSelect:r},e.name)))),dataTestAttrs:c,disabled:s})))}const nu=C.mM.create({flexGrow:{flex:1}})
var au=n(7232),iu=n(361038)
function ReviewLifecycleUpdateConfirmationModal({reviewLifecycleName:e,numProjectsUsingReviewLifecycle:t,onRequestClose:n,onRequestSubmit:a}){return d.createElement(B.ZP,{closeable:!0,title:"Update entry review process",onRequestClose:n,onRequestSubmit:a,buttons:[{text:"Cancel Update",cancel:!0,style:O.ZJ.TERTIARY_GRAY},{text:"Confirm Update",submit:!0,style:O.ZJ.NEGATIVE}]},d.createElement("p",null,"Are you sure you want to update ",d.createElement("b",null,e),"? There"," ",(0,T._6)(t,"is","are")," ",d.createElement("b",null,t)," ",(0,T._6)(t,"project")," associated with it.",S.ZP.ENABLE_RETRACT_ACTIVE_REVIEWS_ON_REVIEW_PROCESS_UPDATE?d.createElement(d.Fragment,null,"Entries currently ",d.createElement("b",null,"In Review")," will be reset to ",d.createElement("b",null,"In Progress")," and must be resent for review."):d.createElement(d.Fragment,null,"Entries sent for review after this update will be using the updated Review Process. Entries currently in review won't be affected.")))}var ru=n(583960)
function ReviewStageDropdown(e){return d.createElement(w.ZP,{displayName:e.selectedDropdownOption.name,className:(0,C.iv)(su.dropdown),dataTestAttrs:e.dataTestAttrs,menu:d.createElement(Yt.Z,{selectedValue:e.selectedDropdownOption.name,height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,scrollable:!0,optionDatas:e.allDropdownOptions,onSelect:t=>{e.onSelectDropdownOption(e.allDropdownOptions.filter((e=>e.value===t))[0])}})})}const su=C.mM.create({dropdown:{flex:"0.9",whiteSpace:"normal"}})
function ReviewStageTextField({fieldValue:e,handleSelectionChange:t,dataTestAttrs:n}){return d.createElement("div",{className:(0,C.iv)(ou.textField)},d.createElement(Id.Z,{className:"u-flex-grow",onChange:e=>{t(e.target.value)},value:e,dataTestAttrs:n}))}const ou=C.mM.create({textField:{flex:"0.9",whiteSpace:"normal"}}),lu="ReviewStageTable"
function ReorderableListContainer({stageNodes:e,setName:t,removeReviewStage:n,setDefinition:a,setReviewerType:i,setActionLabel:r,reorderStages:s,actionLabelOptions:o,reviewerTypeOptions:l,disabled:c}){return d.createElement(Ad.Z,{itemDatas:e.map(((s,u)=>((s,u)=>({id:s.clientId,itemClass:ru.Z,itemProps:{isDraggingDisabled:Boolean(c),rowContainerClassName:(0,C.iv)(du.rowContainer),dragHandleClassName:(0,C.iv)(du.dragHandle),row:{id:s.clientId,cells:[{key:`${s.clientId}-name`,contents:d.createElement("div",{className:(0,C.iv)(du.selectItemContainer,du.dropdownContainer)},c?d.createElement("div",null,s.name):d.createElement(ReviewStageTextField,{fieldValue:s.name,handleSelectionChange:n=>{t(e,u,n)},dataTestAttrs:{component:lu,element:"reviewStageName"}}))},{key:`${s.clientId}-reviewerType`,contents:d.createElement("div",{className:(0,C.iv)(du.selectItemContainer,du.dropdownContainer)},c?d.createElement("div",null,s.reviewerType.name):d.createElement(ReviewStageDropdown,{selectedDropdownOption:s.reviewerType,allDropdownOptions:l,onSelectDropdownOption:t=>{(0,ie.hu)(t.value!==Rt.Ir.AUTHOR||(0,as.bP)(),"Cannot select author as reviewer if self-reviews are not enabled");(0,ie.hu)(t.value!==Rt.Ir.TEAM||(0,as.bW)(),"Cannot select a team as a reviewer if team reviews are not enabled")
i(e,u,t)},dataTestAttrs:{component:lu,element:"reviewerTypeDropdown"}}))},{key:`${s.clientId}-actionLabel`,contents:d.createElement("div",{className:(0,C.iv)(du.selectItemContainer,du.dropdownContainer)},c?d.createElement("div",null,s.actionLabel.name):d.createElement(ReviewStageDropdown,{selectedDropdownOption:s.actionLabel,allDropdownOptions:o,onSelectDropdownOption:t=>{r(e,u,t)},dataTestAttrs:{component:lu,element:"actionLabelDropdown"}}))},{key:`${s.clientId}-definition`,contents:d.createElement("div",{className:(0,C.iv)(du.selectItemContainer,du.dropdownContainer)},c?d.createElement("div",null,s.definition):d.createElement(ReviewStageTextField,{fieldValue:s.definition,handleSelectionChange:t=>{a(e,u,t)},dataTestAttrs:{component:lu,element:"reviewStageDefinition"}}))},{key:`${s.clientId}-delete`,cellClassName:"simpleDivTable-actionGroupContainer",contents:d.createElement("div",{className:(0,C.iv)(du.buttonContainer)},c?null:d.createElement(ve.pf,{tooltipTitle:"Remove review stage"},d.createElement(O.Co,{buttonStyle:O.ZJ.LINK,className:N()((0,C.iv)(du.singleButton),(0,C.iv)(du.deleteButton)),icon:"delete",onClick:()=>{n(e,u)},dataTestAttrs:{component:lu,element:"removeReviewStage"}})))}]}}}))(s,u))),onMoveItem:e=>{s(e)},onMoveItemEnd:St.ZT})}const cu="tagSchemaSettings-helpIcon u-tiny-spacing-left"
function ReviewStageTable({stageNodes:e,onUpdateReviewStages:t,setName:n,removeReviewStage:a,setDefinition:i,setReviewerType:r,setActionLabel:s,reorderStages:o,actionLabelsMenuOptions:l,reviewerTypeMenuOptions:c,disabled:u}){return d.createElement("div",{className:(0,C.iv)(du.listWrapper)},d.createElement("div",{className:N()("simpleDivTable-header",(0,C.iv)(du.selectItemContainer))},d.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Review Stage Name",!u&&d.createElement(d.Fragment,null,d.createElement(F.S,null),d.createElement(le.Z,{renderContent:()=>"The name of the stage that will be shown throughout the review experience in entries, audit logs, etc.",iconClassName:cu}),d.createElement(v.Z,{onClick:()=>{e.length>=20?rt.ZP.error("Entry review process cannot have more than 20 stages."):t([...e,createBlankStageNode(c)])},dataTestAttrs:{component:"ReviewStageTable",element:"addRow"}}))),d.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Reviewer",!u&&d.createElement(d.Fragment,null,d.createElement(F.S,null),d.createElement(le.Z,{renderContent:()=>"The set of users who can be selected to review a stage in an entry.",iconClassName:cu}))),d.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Action Label",!u&&d.createElement(d.Fragment,null,d.createElement(F.S,null),d.createElement(le.Z,{renderContent:()=>"The button label a reviewer will click when completing the stage.",iconClassName:cu}))),d.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Definition",d.createElement(le.Z,{renderContent:()=>"Shown to Reviewers when completing a stage. Can be used to better define the meaning of the signature, link to documents/policies, etc.",iconClassName:cu}))),d.createElement(ReorderableListContainer,{stageNodes:e,setName:n,setDefinition:i,setActionLabel:s,setReviewerType:r,reorderStages:o,removeReviewStage:a,actionLabelOptions:l,reviewerTypeOptions:c,disabled:u}))}const du=C.mM.create({dragHandle:{marginRight:0,width:"16px"},buttonContainer:{marginLeft:"15px"},singleButton:{marginLeft:"6px",padding:"0px",boxShadow:"none"},rowContainer:{marginLeft:"-16px"},selectItemContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},dropdownContainer:{display:"flex",flexDirection:"row"},listWrapper:{border:`1px solid ${b.tN}`},deleteButton:{paddingLeft:"8px",paddingRight:"8px",color:b.pF,":hover":{color:b.hM}}})
var uu=n(688620)
const mu=[Rt.rF.PARALLEL,Rt.rF.SEQUENTIAL,Rt.rF.SELF_REVIEW],pu=ot.Ps`
  query ReviewLifecycleConfigurationQuery($reviewLifecycleId: StrictString!)
  @skipAudit
  @engComponent(name: NOTEBOOK) {
    reviewLifecycle(id: $reviewLifecycleId) {
      ... on ReviewLifecycleNode {
        id
        archiveRecord {
          purpose
        }
        numProjectsUsingReviewLifecycle
        organization {
          id
          name
          admin
          teams {
            id
            name
          }
        }
        currentVersion {
          id
          name
          lifecycleType
          terminalState
          reviewStages {
            id
            name
            action
            reviewerType
            description
            selectedTeam {
              id
              name
            }
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("InaccessibleInfo").fragment}
`,hu=ot.Ps`
  query OrganizationsTeamQuery($organizationIds: [StrictString!]!) @skipAudit @engComponent(name: NOTEBOOK) {
    organizations(ids: $organizationIds) {
      ... on OrganizationNode {
        id
        name
        teams {
          id
          name
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,ut.f)("InaccessibleInfo").fragment}
`
function onBeforeUnloadHandler(e){e.preventDefault()
e.returnValue=""}const createBlankStageNode=e=>({name:"",reviewerType:e.filter((e=>e.value===Rt.Ir.PROJECT_MEMBERS))[0],actionLabel:au.hW.filter((e=>e.value===Rt.OQ.ACCEPT))[0],definition:"",clientId:(0,eu.Z)(),previousVersionReviewLifecycleStageId:null})
function findMatchingReviewer(e,t){return t.reviewerType===Rt.Ir.TEAM?e.filter((e=>{var n
return e.value===(null===(n=t.selectedTeam)||void 0===n?void 0:n.id)}))[0]:e.filter((e=>e.value===t.reviewerType))[0]}function generateInitialStageNodes(e,t,n){return(null==t?void 0:t.currentVersion.lifecycleType)&&(e===t.currentVersion.lifecycleType||au.pW.includes(null==t?void 0:t.currentVersion.lifecycleType)&&au.pW.includes(e))?t.currentVersion.reviewStages.map((e=>({name:e.name,reviewerType:findMatchingReviewer(n,e),actionLabel:au.hW.filter((t=>t.value===e.action))[0],definition:e.description,clientId:(0,eu.Z)(),previousVersionReviewLifecycleStageId:e.id}))):[createBlankStageNode(n)]}function hasReviewLifecycleBeenEdited({reviewLifecycleName:e,reviewLifecycleType:t,completionStatus:n,stageNodes:a},{currentVersion:i}){const r=i.reviewStages
return e!==i.name||t!==i.lifecycleType||n!==i.terminalState||(a.length!==r.length||null!=a.find(((e,t)=>e.name!==r[t].name||e.reviewerType&&e.reviewerType.value!==r[t].reviewerType&&!function isSameTeamReviewerType(e,t){return t.reviewerType===Rt.Ir.TEAM&&Boolean(t.selectedTeam)&&e.reviewerType.name===t.selectedTeam.name}(e,r[t])||e.definition!==r[t].description||e.actionLabel.value!==r[t].action)))}function shouldEnableSaveButton(e,t){return!!(({reviewLifecycleName:e,reviewLifecycleType:t,stageNodes:n})=>t===Rt.rF.SELF_REVIEW?e.trim().length>0&&1===n.length:!n.some((e=>0===e.name.trim().length))&&e.trim().length>0&&n.length>0)(t)&&(!e||hasReviewLifecycleBeenEdited(t,e))}function navigateToReviewLifecycleListing(){T.c4(null,iu.Fj())}function ReviewLifecycleConfigurationEditor({reviewLifecycle:e,organizations:t,refetch:n}){var a,i;(0,ni.Z)((()=>{(0,T._w)("Entry Review Process Editor")}))
let r,s=!1
if(null==e){(0,ie.hu)(null!=t,"")
r=t.map((e=>({value:e.id,name:e.name})));(0,ie.hu)(r.length>0,"")}else{s=!1===e.organization.admin||null!=e.archiveRecord
r=[{value:e.organization.id,name:e.organization.name}]}const[o,l]=(0,d.useState)(null!==(a=r.filter((t=>t.value===(null==e?void 0:e.organization.id)))[0])&&void 0!==a?a:r[0]),[c,u]=(0,d.useState)(null!==(i=null==e?void 0:e.currentVersion.name)&&void 0!==i?i:""),m=function getReviewTypeOptions(){const e=mu.map((e=>({value:e,name:Jd._R[e],className:e===Rt.rF.SELF_REVIEW?(0,C.iv)(Eu.dropdownOptionWithDivider):void 0})))
return(0,as.bP)()?e:e.filter((e=>e.value!==Rt.rF.SELF_REVIEW))}(),[p,h]=(0,d.useState)(function getInitialReviewTypeOptionData(e,t){var n
return null!==(n=t.filter((t=>t.value===(null==e?void 0:e.currentVersion.lifecycleType)))[0])&&void 0!==n?n:t.filter((e=>e.value===Rt.rF.SEQUENTIAL))[0]}(e,m)),[E,S]=(0,d.useState)(function getInitialCompletionStatus(e){var t
return null!==(t=au.Vu.filter((t=>t.value===(null==e?void 0:e.currentVersion.terminalState)))[0])&&void 0!==t?t:au.Vu.filter((e=>e.value===Rt.Ho.ACCEPTED))[0]}(e)),g=null!=e?e.organization.teams:null==t?void 0:t.filter((e=>e.id===o.value))[0].teams,f=function getReviewerTypeOptionDatas(e){const t=au.ds.filter((e=>(e.value!==Rt.Ir.AUTHOR||(0,as.bP)())&&e.value!==Rt.Ir.TEAM))
if((0,as.bW)()&&e.length>0){t.push({name:"Teams",isHeader:!0,className:(0,C.iv)(Eu.dropdownOptionWithDivider)})
t.push(...e.map((e=>({value:e.id,name:e.name}))))}return t}(null!=g?g:[]),[I,A]=(0,d.useState)(generateInitialStageNodes(p.value,e,f)),y=(0,d.useCallback)((()=>({reviewLifecycleName:c,reviewLifecycleType:p.value,completionStatus:E.value,stageNodes:I})),[c,p.value,E,I]);(0,d.useEffect)((()=>{shouldEnableSaveButton(e,y())?window.addEventListener("beforeunload",onBeforeUnloadHandler):window.removeEventListener("beforeunload",onBeforeUnloadHandler)}),[e,y])
const reorderStages=e=>{A(e.map((e=>I.find((t=>t.clientId===e)))))}
function setActionLabel(e,t,n){A((0,Xd.ZP)(e,(e=>{e[t].actionLabel=n})))}function setReviewerType(e,t,n){A((0,Xd.ZP)(e,(e=>{e[t].reviewerType=n})))}function setStageName(e,t,n){A((0,Xd.ZP)(e,(e=>{e[t].name=n})))}function setDefinition(e,t,n){A((0,Xd.ZP)(e,(e=>{e[t].definition=n})))}function removeReviewStage(e,t){A((0,Xd.ZP)(e,(e=>{e.splice(t,1)})))}const handleSubmit=async()=>{let t
t=p.value===Rt.rF.SELF_REVIEW?[{description:au.vP,name:au.Z7,action:I[0].actionLabel.value,reviewerType:Rt.Ir.AUTHOR,previousVersionReviewLifecycleStageId:I[0].previousVersionReviewLifecycleStageId}]:I.map((e=>{const t=Ke.ZP.isTeam(e.reviewerType.value)?Rt.Ir.TEAM:e.reviewerType.value
return{action:e.actionLabel.value,description:""===e.definition?null:e.definition,name:e.name,reviewerType:t,...t===Rt.Ir.TEAM?{selectedTeamId:e.reviewerType.value}:{},previousVersionReviewLifecycleStageId:e.previousVersionReviewLifecycleStageId}}))
if(e){const onRequestSubmit=async()=>{window.onbeforeunload=()=>""
await(0,st.jI)(async function updateReviewLifecycleAndRefetch(){await iu.KH({lifecycleType:p.value,name:c,terminalState:E.value,reviewStages:t,reviewLifecycleId:e.id})
n&&await n()}())
window.onbeforeunload=null}
e.numProjectsUsingReviewLifecycle>0?(0,D.Z)(ReviewLifecycleUpdateConfirmationModal,{reviewLifecycleName:e.currentVersion.name,numProjectsUsingReviewLifecycle:e.numProjectsUsingReviewLifecycle,onRequestSubmit}):await onRequestSubmit()}else{const e=await iu.K9({lifecycleType:p.value,name:c,terminalState:E.value,reviewStages:t.map((e=>(0,ql.C)(e,"previousVersionReviewLifecycleStageId"))),organizationId:o.value})
T.c4(null,(0,iu.y3)(e.id))
window.removeEventListener("beforeunload",onBeforeUnloadHandler)
rt.ZP.success("Created entry review process successfully.")}},_=d.createElement(O.Co,{className:(0,C.iv)(Eu.marginLeft),buttonStyle:O.ZJ.SECONDARY,onClick:()=>{handleSubmit()},size:O.qE.MEDIUM,text:"Save",disabled:!shouldEnableSaveButton(e,y()),dataTestAttrs:{component:"ReviewLifecycleConfigurationEditor",element:"save"}})
return d.createElement(J.Z,{title:"Entry Review Processes",onClickTitle:navigateToReviewLifecycleListing,toolbar:d.createElement(d.Fragment,null,e&&!(0,Ci.ZP)({...e,name:e.currentVersion.name})&&d.createElement(ve.ZP,{title:"Archive"},d.createElement(O.Co,{buttonStyle:O.ZJ.NEGATIVE,className:(0,C.iv)(Eu.marginRight),disabled:s,icon:"archive",onClick:t=>{t.stopPropagation()
t.preventDefault();(0,tu.t)([e],n)},size:O.qE.MEDIUM})),e&&e.organization.admin&&(0,Ci.ZP)({...e,name:e.currentVersion.name})&&d.createElement(ve.ZP,{title:"Unarchive"},d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,className:(0,C.iv)(Eu.marginRight),icon:"unarchive",onClick:async t=>{t.stopPropagation()
t.preventDefault()
await(0,tu._)([e],n)},size:O.qE.MEDIUM})),null!=e?d.createElement(Q.Z,{ids:[e.id],buttonSize:O.qE.MEDIUM,buttonStyle:O.ZJ.TERTIARY_GRAY}):null,!s&&_),subtitle:e&&s?c:(e?"Edit":"Create")+" Entry Review Process"},d.createElement("div",{className:"u-flex-grow u-min-width-zero"},d.createElement("div",{className:"settingsPageContainer-section"}),d.createElement(ReviewLifecycleConfigurationField,{id:"ownerName",className:(0,C.iv)(Eu.fields,Eu.organizationField),dropdownLabel:"Organization",optionDatas:r,selectedOption:o,handleSelectionChange:e=>{l(e)},help:"Organization cannot be modified after review process creation.",disabled:null!=e,disabledRenderType:s?jd.TEXT:jd.DROPDOWN}),d.createElement(uu.Z,{helpArticle:uu.q.CREATE_ENTRY_REVIEW_PROCESS},"Learn what an Entry Review Process is"),d.createElement("div",{className:(0,C.iv)(Eu.rowSection)},d.createElement("div",{className:(0,C.iv)(Eu.columnSection)},d.createElement("div",{className:(0,C.iv)(Eu.metadataField)},d.createElement(ReviewLifecycleConfigurationField,{id:"reviewType",className:(0,C.iv)(Eu.fields),dropdownLabel:"Review Type",optionDatas:m,selectedOption:p,handleSelectionChange:t=>{(0,ie.hu)(t.value!==Rt.rF.SELF_REVIEW||(0,as.bP)(),"Self-reviews are not enabled")
!function setReviewType(t){h(t);[p.value,t.value].includes(Rt.rF.SELF_REVIEW)&&A(generateInitialStageNodes(t.value,e,f))}(t)},dataTestAttrs:{component:"ReviewLifecycleConfigurationEditor",element:"lifecycleTypeDropdown"},disabled:s,disabledRenderType:jd.TEXT}))),d.createElement("div",{className:(0,C.iv)(Eu.columnSection)},d.createElement("div",{className:(0,C.iv)(Eu.metadataField)},s?d.createElement(d.Fragment,null,d.createElement(In.DU,{isRequired:!1,label:"Name",name:"Name"}),d.createElement("div",null,c)):d.createElement(In.ZP,{isBeingCreated:!0,isWritable:!0,isRequired:!0,label:"Name",name:"Name",onChange:e=>{u(e)},value:c,dataTestAttrs:{component:"ReviewLifecycleConfigurationEditor",element:"reviewLifecycleName"}})))),p.value===Rt.rF.SELF_REVIEW?d.createElement("div",{className:(0,C.iv)(Eu.rowSection)},d.createElement("div",{className:(0,C.iv)(Eu.columnSection)},d.createElement("div",{className:(0,C.iv)(Eu.metadataField)},d.createElement(ReviewLifecycleConfigurationField,{id:"reviewerDropdown",className:(0,C.iv)(Eu.fields),dropdownLabel:"Reviewer type",optionDatas:f,selectedOption:{value:Rt.Ir.AUTHOR,name:au.Ro[Rt.Ir.AUTHOR]},handleSelectionChange:St.ZT,disabled:!0,disabledRenderType:s?jd.TEXT:jd.DROPDOWN}))),d.createElement("div",{className:(0,C.iv)(Eu.columnSection)},d.createElement("div",{className:(0,C.iv)(Eu.metadataField)},d.createElement(ReviewLifecycleConfigurationField,{id:"actionLabelDropdown",className:(0,C.iv)(Eu.fields),dropdownLabel:"Action label",optionDatas:au.hW,selectedOption:I[0].actionLabel,handleSelectionChange:e=>{A((0,Xd.ZP)(I,(t=>{t[0].actionLabel=e})))},help:"The button label a reviewer will click when completing the stage.",disabled:s,disabledRenderType:jd.TEXT})))):d.createElement("div",{className:(0,C.iv)(Eu.tableWrapper)},d.createElement(ReviewStageTable,{stageNodes:I,onUpdateReviewStages:A,setName:setStageName,removeReviewStage,setDefinition,setReviewerType,setActionLabel,reorderStages,actionLabelsMenuOptions:au.hW,reviewerTypeMenuOptions:f,dataTestAttrs:{component:"ReviewLifecycleConfigurationEditor",element:"reviewStageTable"},disabled:s})),d.createElement("div",{className:(0,C.iv)(Eu.rowSection)},d.createElement(ReviewLifecycleConfigurationField,{id:"completionStatus",className:(0,C.iv)(Eu.fields),dropdownLabel:"Completion status",optionDatas:au.Vu,selectedOption:E,handleSelectionChange:e=>{S(e)},disabled:s,disabledRenderType:jd.TEXT,help:"Defines the status of the entry once the review is complete."}))))}function QueryingReviewLifecycleConfigurationEditor({reviewLifecycleId:e,organizations:t}){var n
if(e)return d.createElement(nt.ZP,{query:pu,variables:{reviewLifecycleId:e},fetchPolicy:"cache-and-network",renderLoading:()=>d.createElement(H.b,null)},(({reviewLifecycle:e},{refetch:t})=>{(0,ie.hu)(!(0,at.CZ)(e),"Expected review lifecycle data to have been loaded")
return d.createElement(ReviewLifecycleConfigurationEditor,{reviewLifecycle:e,refetch:async()=>{await t()}})}))
const a=null!==(n=null==t?void 0:t.filter((e=>e.admin)))&&void 0!==n?n:[];(0,ie.hu)(a.length>0,"Somehow tried to create review lifecycle without access to any organizations")
return d.createElement(nt.ZP,{query:hu,variables:{organizationIds:a.map((e=>e.id))},fetchPolicy:"cache-and-network",renderLoading:()=>d.createElement(H.b,null)},(({organizations:e})=>{const t=e.filter((e=>!(0,at.CZ)(e)))
return d.createElement(ReviewLifecycleConfigurationEditor,{organizations:t})}))}const Eu=C.mM.create({fields:{width:400},tableWrapper:{marginTop:40,width:"100%"},rowSection:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",width:"100%",marginTop:40},columnSection:{paddingRight:"20px"},metadataField:{width:400,marginBottom:"0",paddingRight:"20px"},marginLeft:{marginLeft:"8px"},organizationField:{paddingBottom:"14px"},dropdownOptionWithDivider:{borderTop:`1px solid ${b.tN}`},marginRight:{marginRight:"8px"}})
var Su=n(443240),Tu=n(740521)
function RunSchemaEditor(e){return d.createElement(Tu.ZP,{schemaId:e.schemaId,schemaType:Rt.nc.ASSAY_RUN,autosave:!1,baseTestAttrs:{component:"RunSchemaEditor"},publishDefaultDataTableConfig:!1})}function ResultSchemaEditor(e){return d.createElement(Tu.ZP,{schemaId:e.schemaId,schemaType:Rt.nc.ASSAY_RESULT,autosave:!0,baseTestAttrs:{component:"ResultSchemaEditor"},publishDefaultDataTableConfig:!0})}var gu=n(80227),fu=n(281100),Iu=n(309718)
const Au="growth-experiment-share-link-metadata-modal"
function ShareMetadataModal(e){const onClose=()=>{ha.xv(Au)
h.L9(Ie.nn.CLOSED_SHARE_LINK_METADATA_MODAL,{metadataIdentifier:e.publicIdentifier})}
return d.createElement(B.ZP,{title:"Welcome to Benchling!",onRequestClose:()=>{onClose()},onRequestSubmit:()=>{onClose()},buttons:[{submit:!0,text:"Open"}],dataTestAttrs:{component:"ShareMetadataModal",element:"root"}},d.createElement("div",null,d.createElement(fu.Z,{entity:e.creator,size:Iu.D.XXSMALL})," ",d.createElement("strong",null,e.creator.name)," has shared a file with you."),d.createElement("div",{className:(0,C.iv)(yu.description)},e.description.split("\n").map((e=>d.createElement("p",{key:e.slice(0,10)},e)))))}const yu=C.mM.create({description:{...ji.H5,color:b.pp,marginTop:"15px"}})
var _u=n(68803),Cu=n(907639)
function QueryingInstallBenchlingAppPage({appDefinitionId:e}){const[t,n]=(0,d.useState)(!0),[a,i]=(0,d.useState)(""),[r,s]=(0,d.useState)(""),[o,l]=(0,d.useState)(""),[c,u]=(0,d.useState)(!1),[m,p]=(0,d.useState)(null);(0,d.useEffect)((()=>{(async()=>{const t=await(0,sn.sR)(e),a=t.benchlingAppDefinition,r=t.benchlingAppInstance
i(a.name)
s(a.description)
l(a.version)
u(t.isLatest)
n(!1)
p(r?r.id:null)})()}),[e])
return t?d.createElement(H.b,null):d.createElement(InstallBenchlingAppPage,{name:a,description:r,version:o,isInstalled:null!=m,isLatest:c,handleInstall:async function handleInstall(){const t=await(0,sn.mA)(e)
rt.ZP.success(`Successfully Installed App ${a}`);(0,Jn.XI)(t.benchlingApp.id)},handleUpgrade:async function handleUpgrade(){const t=await(0,sn.SD)(e)
rt.ZP.success(`Successfully Upgraded App ${a}`);(0,Jn.XI)(t.benchlingApp.id)},handleNavToWorkspace:()=>{null!=m&&(0,Jn.XI)(m)}})}function InstallBenchlingAppPage({name:e,version:t,description:n,isLatest:a,isInstalled:i,handleInstall:r,handleUpgrade:s,handleNavToWorkspace:o}){const[l,c]=(0,d.useState)(!1)
return d.createElement("div",{className:(0,C.iv)(Ru.contentWrapper)},d.createElement("div",{className:(0,C.iv)(Ru.darkGreyText)},"BENCHLING APP"),d.createElement("div",{className:"u-lr-split u-small-spacing-top"},d.createElement("div",null,d.createElement("div",{className:(0,C.iv)(Ru.bigAppNameText)},e),d.createElement("span",{className:(0,C.iv)(Ru.darkGreyText)},"Latest Version: ",t)),d.createElement("div",{className:"u-lr-split"},d.createElement(Le.Z,{text:a?"Latest version already installed":null,isDisabled:!a},d.createElement(O.Co,{size:O.qE.MEDIUM,buttonStyle:O.ZJ.PRIMARY,onClick:()=>{c(!0)
i?s():r()
c(!1)},text:i?"Upgrade":"Install",disabled:l||a})),i&&d.createElement("div",{className:(0,C.iv)(Ru.buttonMargin)},d.createElement(O.Co,{size:O.qE.MEDIUM,buttonStyle:O.ZJ.SECONDARY,onClick:o,text:"View App in the workspace"})))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.Dx,null,"Description"),d.createElement(Cu.Z,{value:n})))}const Ru=C.mM.create({darkGreyText:{color:b.pp},bigAppNameText:{fontSize:"26px"},contentWrapper:{margin:"40px auto",width:"90%"},buttonMargin:{marginLeft:"10px"}})
function ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(n),!0).forEach((function(t){EditorRoutes_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EditorRoutes_defineProperty(e,t,n){(t=function EditorRoutes_toPropertyKey(e){var t=function EditorRoutes_toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}let Nu
0
function _redirectAfterInaccessibleLegacyGatedOpen(e,t){const n=(0,Hd.Hc)([e])
t?(0,Vd.B)(t,n):(0,Vd.C)(n)
_editorBase()}function _editorBase(e){Bs.RM()
if(Nu)e&&e()
else{kd.Z.loadFromServerBootstrap();(0,ro.A9)(d.createElement(EmptyPage,null),c()(".emptyPage-reactMount")[0])
Promise.all([n.e(877),n.e(770),n.e(337),n.e(81),n.e(898),n.e(505),n.e(189)]).then(n.bind(n,646127)).then((({default:t})=>{Nu=new t
Nu.render()
const n=ei.ZP.get().findWhere({active:!0})
n&&n.trigger("open",n);(new Ja).render()
"#tfi"===window.location.hash&&Us.Z.toggleTFIAddModal(!0)
null!=ts.Z.currentUser()&&Ht.Bj().done((({showInviteModal:e})=>{e&&ha.bA(zs,d.createElement(zs,{onRequestClose:()=>ha.xv(zs),copy:d.createElement("div",null,d.createElement("p",null,"Users get the most value out of Benchling when they share notebooks, sequences, oligos, PDFs and other data with colleagues. Invite other scientists who would benefit from using Benchling!"),d.createElement("p",null,"P.S. Get ",d.createElement("strong",null,`${(0,Ot.td)(Gt.ZP.SPACE_ADDITION_SIZES.INVITE_MEMBER)} of\n                       free space for every person you invite and access to`)," ",d.createElement("a",{href:"/invite",target:"_blank",rel:"noreferrer noopener"},"Benchling Gold")," ","after 10."))}))}))
e&&e()}))}}function _sidepanelListing(e,t){(0,so.getStore)().dispatch(ss._c(e,rs.p8[e],t,(0,is.yO)(t.filters)))
_editorBase((()=>xs.s0(e)))}function _openWorkflowScreen(e){_editorBase((()=>{e()
xs.s0(qt.SA.WORKFLOWS)}))}function _editorForApiId(e,t,n){if(e){kd.Z.loadFromServerBootstrap()
ta.Z.openItem(e,t)}_editorBase(n)}const Ou={hotReload(){Nu&&Nu.buffersView.bufferViews.forEach((e=>{e.renderTabIfActive(e.renderedTab,!0)}))},createOrganizationPage(){gu.Z.startRUMView("organization_create")
_editorBase((()=>{m.fq({name:""})}))},organizationPage(e,t){gu.Z.startRUMView("organization_edit")
_editorBase((()=>{const n=Xs.Z.getCurrentOrganization()
Zs.Z.getCurrentScreen()===Js.ORGANIZATION_SCREEN&&n&&n.url_identifier===e?m.wc(n.id,Js.ORGANIZATION_PAGE_SECTION_URL_PARAM_TO_TAB[t]):m.iq(e,t)}))},userPage(e,t){gu.Z.startRUMView("user_edit")
_editorBase((()=>{Zs.Z.getCurrentScreen()!==Js.USER_SCREEN||this.currentEntityId!==e?m.$M(e,t):m.wc(e,Js.USER_PAGE_SECTION_URL_PARAM_TO_TAB[t])}))},dataPoliciesPage(){gu.Z.startRUMView("data_policies_list")
_editorBase((()=>{Nu.renderReact(d.createElement(G,null),Md.Section.DATA_POLICIES)}))},dataPolicyPage(e){gu.Z.startRUMView("data_policy_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(fe,{dataPolicyId:e}),Md.Section.DATA_POLICIES)}))},schemaPoliciesPage(){gu.Z.startRUMView("schema_policies_list")
const e=Lt.POLICIES_TAB
_editorBase((()=>{Nu.renderReact(d.createElement(SchemaPoliciesPage,{activeTab:e}),Md.Section.SCHEMA_POLICIES)}))},schemaPoliciesPageSettingsTab(){const e=Lt.SETTINGS_TAB
_editorBase((()=>{Nu.renderReact(d.createElement(SchemaPoliciesPage,{activeTab:e}),Md.Section.SCHEMA_POLICIES)}))},schemaPolicyPage(e){gu.Z.startRUMView("schema_policy_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(SchemaPolicyPage,{schemaPolicyId:e}),Md.Section.SCHEMA_POLICIES)}))},datasetEditor(e){S.ZP.DATA_FRAMES_ENABLE_DATASET?_editorForApiId(e):(0,Vd.C)("Datasets are not enabled")},formInstance(e){if((0,Xa.u)()){gu.Z.startRUMView("form_instance")
_editorForApiId(e)}else(0,Vd.C)("Forms are not enabled.")},formDefinitionCreate(e){if(!(0,Xa.u)()){(0,Vd.C)("Forms are not enabled.")
return}gu.Z.startRUMView("form_definition_create")
const t=T.he(window.location.href).queryKey.templateCollection
_editorBase((()=>{it.Z.activateCollection(t)
Nu.renderReact(d.createElement(CreateFormDefinitionPage,null),Md.Section.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION)}))},formDefinitionEditor(e,t){if((0,Xa.u)()){gu.Z.startRUMView("form_definition_editor")
_editorBase((()=>{Nu.renderReact(d.createElement(EditFormDefinitionPage,{formDefinitionId:t}),Md.Section.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION)}))}else(0,Vd.C)("Forms are not enabled.")},monomers(){const e=(0,p.XH)({feature:E.Ot.MOLBIO_OPEN})
if(e.enabled)if((0,Dr.cR)()){gu.Z.startRUMView("monomers_list")
_editorBase((()=>{Nu.renderReact(d.createElement(MonomerListing,null),Md.Section.MONOMERS)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")
else(0,Vd.C)(e.userMessage)},monomerCreateMethodPicker(){if(isMonomerManagementEnabledForUser()){gu.Z.startRUMView("monomer_create")
_editorBase((()=>{Nu.renderReact(d.createElement(MonomerCreationMethodPicker,null),Md.Section.MONOMERS)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},monomerCreateFromHELMLibraryPage(){if(isMonomerManagementEnabledForUser()){gu.Z.startRUMView("monomer_create_helm_library")
_editorBase((()=>{Nu.renderReact(d.createElement(MonomerLibraryHELMPage,null),Md.Section.MONOMERS)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},monomerViewHELMLibraryPage(){gu.Z.startRUMView("monomer_view_helm_library")
_editorBase((()=>{Nu.renderReact(d.createElement(MonomerLibraryHELMPage,{viewOnly:!0}),Md.Section.MONOMERS)}))},monomerManualCreationPage(){if(isMonomerManagementEnabledForUser()){gu.Z.startRUMView("monomer_create_manual")
_editorBase((()=>{Nu.renderReact(d.createElement(MonomerManualCreationPage,null),Md.Section.MONOMERS)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},monomerManualEditPage(e){if(isMonomerManagementEnabledForUser()){gu.Z.startRUMView("monomer_edit_manual")
_editorBase((()=>{Nu.renderReact(d.createElement(MonomerManualEditPage,{monomerId:e}),Md.Section.MONOMERS)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},monomerCreateFromCSVPage(){if(isMonomerManagementEnabledForUser()){gu.Z.startRUMView("monomer_create_from_csv")
_editorBase((()=>{Nu.renderReact(d.createElement(MonomerCreateFromCSVPage,null),Md.Section.MONOMERS)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},unitsDictionaryListing(){if(S.ZP.UNITS_ENABLE_UNIT_DICTIONARY){gu.Z.startRUMView("unit_dictionary_settings")
_editorBase((()=>{Nu.renderReact(d.createElement(_u.Z,null),Md.Section.UNIT_DICTIONARY)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},reviewLifecyclesListing(){if((0,as.yR)()){gu.Z.startRUMView("review_lifecycles_list")
_editorBase((()=>{Nu.renderReact(d.createElement(Jd.ZP,{organizationIds:ts.Z.currentUser().organizations.map((e=>e.id))}),Md.Section.REVIEW_LIFECYCLES)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},reviewLifecycleConfiguration(e){if((0,as.yR)()){gu.Z.startRUMView("configure_review_lifecycle")
_editorBase((()=>{Nu.renderReact(d.createElement(QueryingReviewLifecycleConfigurationEditor,{organizations:ts.Z.currentUser().organizations,reviewLifecycleId:e}),Md.Section.REVIEW_LIFECYCLES)}))}else(0,Vd.C)("You do not have access to this feature. Please contact your tenant admin for more information.")},createTeamPage(e){gu.Z.startRUMView("team_create")
_editorBase((()=>{m.Ik(e)}))},teamPage(e,t){gu.Z.startRUMView("team_edit")
_editorBase((()=>{Zs.Z.getCurrentScreen()!==Js.TEAM_SCREEN||this.currentEntityId!==e?m.vB(e,t):m.wc(e,Js.TEAM_PAGE_SECTION_URL_PARAM_TO_TAB[t])}))},tenantAdmin(e){const t=xd.vI[e]
gu.Z.startRUMView(null!=t?`tenant_${e}_edit`:"tenant_edit");(0,so.getStore)().dispatch(Bd.X(t))
_editorBase((()=>Ud.i()))},orgModal(){gu.Z.startRUMView("org_modal")
_editorBase((()=>ti.Z.openSearchOrgModal()))},gettingStartedFlow(){gu.Z.startRUMView("getting_started_flow")
_editorBase((()=>{const e=js.eZ
Object.keys(js.Kb).includes(e)&&h.j("onboarding_page","viewed",{page:js.Kb[e],eventLastModified:"FY22_Q2b3"})
Bs.Nc(e)}))},registryActivationFlow(){gu.Z.startRUMView("registry_activation_flow")
_editorBase((()=>{eo.Z.get(Vt.RegistryPreferences.ENABLE_REGISTRY_ACTIVATION)?Qs.ZS("router"):xs.s0(qt.SA.HOME)}))},roleInfoScreen(){gu.Z.startRUMView("role_info")
_editorBase((()=>{Bs.Nc(js.Lv)}))},elnFolder(e,t,a){const i=`${Ke.ZP.typeToApiPrefix(_e.FOLDER)}_${t.split("-")[0]}`,{queryKey:r}=T.he(window.location.href)
gu.Z.startRUMView("eln_folder")
_editorBase((()=>{const e=window.location.pathname
n(699418).ZP.get().openFolder(i,e,r)}))},calendar(){gu.Z.startRUMView("calendar")
_editorBase((()=>{xs.s0(qt.SA.HOME)}))},projects(){gu.Z.startRUMView("projects")
const{queryKey:e}=T.he(window.location.href),t=(0,cs.MP)(e)
t?_sidepanelListing(qt.$0.PROJECTS,t):_editorBase((()=>{xs.s0(qt.SA.PROJECTS)}))},registries(){gu.Z.startRUMView("registries")
_editorBase((()=>{xs.s0(qt.SA.REGISTRIES)}))},worklists(){gu.Z.startRUMView("worklists")
const{queryKey:e}=T.he(window.location.href),t=(0,cs.t1)(e)
_sidepanelListing(qt.$0.WORKLISTS,t)},worklistItems(){const{queryKey:e}=T.he(window.location.href),{searchParams:t,worklistId:n}=(0,cs.j0)(e)
if(n){gu.Z.startRUMView("worklist_items");(0,so.getStore)().dispatch((0,Gd.zM)(n))
_sidepanelListing(qt.$0.WORKLIST_ITEMS,t)}else{gu.Z.startRUMView("worklists")
_sidepanelListing(qt.$0.WORKLISTS,(0,Su.K)())}},jellyfish(){if(!S.ZP.APP_CORE_ENABLE_FAKE_ITEM_TYPE){(0,Vd.C)("You do not have access to this feature.")
return}gu.Z.startRUMView("jellyfish")
const{queryKey:e}=T.he(window.location.href),t=(0,cs.XO)(e)
_sidepanelListing(qt.$0.JELLYFISH,t)},jellyfishEditor(e){S.ZP.APP_CORE_ENABLE_FAKE_ITEM_TYPE?_editorForApiId(e):(0,Vd.C)("You do not have access to this feature.")},worksheetEditor(e){S.ZP.PROCEDURES_ENABLE_M1?_editorForApiId(e):(0,Vd.C)("You do not have access to this feature.")},search(){gu.Z.startRUMView("search")
const{queryKey:e}=T.he(window.location.href),t=(0,cs.ZN)(e)
_sidepanelListing(qt.$0.SEARCH,t)},connectionSchemas(){if((0,p.Oj)({feature:E.d$.LAB_AUTOMATION_ADMIN})){gu.Z.startRUMView("connection_schemas_list")
_editorBase((()=>{Nu.renderReact(d.createElement(ConnectionSchemasPage,null),Md.Section.CONNECTION_SCHEMAS)}))}else(0,Vd.C)("Instruments are not enabled.")},connectionSchemasCreate(){if((0,p.Oj)({feature:E.d$.LAB_AUTOMATION_ADMIN})){gu.Z.startRUMView("connection_schemas_create")
_editorBase((()=>{Nu.renderReact(d.createElement(Vi,null),Md.Section.CONNECTION_SCHEMAS)}))}else(0,Vd.C)("Instruments are not enabled.")},connectionSchema(e){if((0,p.Oj)({feature:E.d$.LAB_AUTOMATION_OPEN})){gu.Z.startRUMView("connection_schema_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(Vi,{schemaId:e}),Md.Section.CONNECTION_SCHEMAS)}))}else(0,Vd.C)("Instruments are not enabled.")},instrumentGateways(){if((0,p.Oj)({feature:E.d$.LAB_AUTOMATION_DISCOVER})){gu.Z.startRUMView("instrument_gateways_list")
_editorBase((()=>{Nu.renderReact(d.createElement(InstrumentGatewaysPageDataFetcher,null),Md.Section.INSTRUMENT_GATEWAYS)}))}else(0,Vd.C)("Instruments are not enabled.")},connectionListing(){this.sidepanelListing(qt.SA.CONNECTIONS,(0,Ki.mc)())},connectionEditor(e){if((0,p.Oj)({feature:E.d$.LAB_AUTOMATION_OPEN})){gu.Z.startRUMView("connection_editor")
_editorForApiId(e)}else(0,Vd.C)("Instruments are not enabled.")},processTaskSchemas(){const e=(0,p.XH)({feature:E.gx.PROCESSES_ADMIN})
if(e.enabled){gu.Z.startRUMView("process_task_schemas_list")
_editorBase((()=>{Nu.renderReact(d.createElement(ProcessTaskSchemasPage,null),Md.Section.PROCESS_SCHEMAS)}))}else(0,Vd.C)(e.userMessage)},processTaskSchemasCreate(){const e=(0,p.XH)({feature:E.gx.PROCESSES_ADMIN})
if(e.enabled){gu.Z.startRUMView("process_task_schemas_create")
_editorBase((()=>{Nu.renderReact(d.createElement(CreateProcessTaskSchemaPage,null),Md.Section.PROCESS_SCHEMAS)}))}else(0,Vd.C)(e.userMessage)},processTaskSchema(e){const t=(0,p.XH)({feature:E.gx.PROCESSES_ADMIN})
if(t.enabled){gu.Z.startRUMView("process_task_schema_edit")
_editorBase((()=>{const t=(0,d.lazy)((()=>Promise.resolve().then(n.bind(n,455884))))
Nu.renderReact(d.createElement(d.Suspense,{fallback:d.createElement(H.b,null)},d.createElement(t,{schemaId:e,key:e})),Md.Section.PROCESS_SCHEMAS)}))}else(0,Vd.C)(t.userMessage)},requestSchemas(){if(S.ZP.ENABLE_REQUESTS){gu.Z.startRUMView("request_schemas_list")
_editorBase((()=>{Nu.renderReact(d.createElement(Dd.ZP,{schemaType:Ei.R.ASSAY_REQUEST}),Fd[Ei.R.ASSAY_REQUEST])}))}else(0,Vd.C)((0,Hd.Hc)([E.e2.REQUESTS]))},requestSchemasCreate(){if(S.ZP.ENABLE_REQUESTS){gu.Z.startRUMView("request_schemas_create")
_editorBase((()=>{Nu.renderReact(d.createElement(CreateAssaySchemaPage,{schemaType:Ei.R.ASSAY_REQUEST}),Fd[Ei.R.ASSAY_REQUEST])}))}else(0,Vd.C)((0,Hd.Hc)([E.e2.REQUESTS]))},requestSchema(e,t){if(S.ZP.ENABLE_REQUESTS){gu.Z.startRUMView("request_schema_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(il,{schemaId:t,schemaType:Ei.R.ASSAY_REQUEST}),Fd[Ei.R.ASSAY_REQUEST])}))}else(0,Vd.C)((0,Hd.Hc)([E.e2.REQUESTS]))},requestTaskSchemas(){if(S.ZP.ENABLE_REQUESTS){gu.Z.startRUMView("request_task_schemas_list")
_editorBase((()=>{Nu.renderReact(d.createElement(QueryingRequestTaskSchemasPage,null),Fd[Ei.R.REQUEST_TASK])}))}else(0,Vd.C)((0,Hd.Hc)([E.e2.REQUESTS]))},requestTaskSchemaCreate(){if(S.ZP.ENABLE_REQUESTS){gu.Z.startRUMView("request_task_schema_create")
_editorBase((()=>{Nu.renderReact(d.createElement(Ao,null),Fd[Ei.R.REQUEST_TASK])}))}else(0,Vd.C)((0,Hd.Hc)([E.e2.REQUESTS]))},requestTaskSchema(e,t){if(S.ZP.ENABLE_REQUESTS){gu.Z.startRUMView("request_task_schema_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(sl,{schemaId:t,schemaType:Ei.R.REQUEST_TASK}),Fd[Ei.R.REQUEST_TASK])}))}else(0,Vd.C)((0,Hd.Hc)([E.e2.REQUESTS]))},assaySchemas(e){(0,ie.hu)(e!==Xo.aJ.ASSAY_REQUEST,"Use EditorRoutes.requestSchemas() for Requests")
const t=e===Xo.aJ.ASSAY_RUN?[{feature:E.d$.LAB_AUTOMATION_ADMIN}]:[{feature:E.gm.RESULTS_ADMIN}]
if((0,p.or)(t)){gu.Z.startRUMView("assay_schemas_list")
_editorBase((()=>{Nu.renderReact(d.createElement(Dd.ZP,{schemaType:e}),Xo.j_[e])}))}else{const e=(0,p.XH)(t[0]);(0,Vd.C)(e.userMessage)}},assaySchemasCreate(e){(0,ie.hu)(e!==Xo.aJ.ASSAY_REQUEST,"Use EditorRoutes.requestSchemasCreate() for Requests")
const t=e===Xo.aJ.ASSAY_RUN?[{feature:E.d$.LAB_AUTOMATION_ADMIN}]:[{feature:E.gm.RESULTS_ADMIN}]
if((0,p.or)(t)){gu.Z.startRUMView("assay_schema_create")
_editorBase((()=>{Nu.renderReact(d.createElement(CreateAssaySchemaPage,{schemaType:e}),Xo.j_[e])}))}else{const e=(0,p.XH)(t[0]);(0,Vd.C)(e.userMessage)}},assaySchema(e,t,n){(0,ie.hu)(e!==Xo.aJ.ASSAY_REQUEST,"Use EditorRoutes.requestSchema() for Requests")
const a=e===Xo.aJ.ASSAY_RUN?[{feature:E.d$.LAB_AUTOMATION_ADMIN}]:[{feature:E.gm.RESULTS_ADMIN}]
if((0,p.or)(a)){gu.Z.startRUMView("assay_schema_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(il,{schemaId:n,schemaType:e}),Xo.j_[e])}))}else{const e=(0,p.XH)(a[0]);(0,Vd.C)(e.userMessage)}},resultSchemaCreate(){gu.Z.startRUMView("result_schema_create")
_editorBase((()=>{Nu.renderReact(d.createElement(ResultSchemaEditor,null),Xo.j_[Xo.aJ.ASSAY_RESULT])}))},resultSchema(e,t){gu.Z.startRUMView("result_schema_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(ResultSchemaEditor,{schemaId:t}),Xo.j_[Xo.aJ.ASSAY_RESULT])}))},runEditor(e){gu.Z.startRUMView("run_editor")
_editorForApiId(e)},runSchemasCreate(){const e=[{feature:E.d$.LAB_AUTOMATION_ADMIN}]
if((0,p.or)(e)){gu.Z.startRUMView("run_schema_create")
_editorBase((()=>{Nu.renderReact(d.createElement(RunSchemaEditor,null),Xo.j_[Xo.aJ.ASSAY_RUN])}))}else{const t=(0,p.XH)(e[0]);(0,Vd.C)(t.userMessage)}},runSchema(e,t){const n=[{feature:E.d$.LAB_AUTOMATION_ADMIN}]
if((0,p.or)(n)){gu.Z.startRUMView("run_schema_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(RunSchemaEditor,{schemaId:t}),Xo.j_[Xo.aJ.ASSAY_RUN])}))}else{const e=(0,p.XH)(n[0]);(0,Vd.C)(e.userMessage)}},templateEditor(e,t){gu.Z.startRUMView("template_editor")
_editorBase((()=>{ma.Z.openSectionForFileType(_e.TEMPLATE)
ta.Z.openFile(t)}))},subtemplateEditor(e,t){gu.Z.startRUMView("subtemplate_editor")
_editorBase((()=>{ma.Z.openSectionForFileType(_e.SUBTEMPLATE)
ta.Z.openFile(t)}))},templateCollections(e){gu.Z.startRUMView("template_collections_list")
_editorBase((()=>{if(S.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR)Nu.renderReact(d.createElement(TemplateCollectionsPage,null),Md.Section.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTIONS)
else{it.Z.fetchCollections()
Nu.renderReact(d.createElement(Ms,null),Md.Section.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTIONS)}}))},templateCollection(e,t){gu.Z.startRUMView("template_collection_list")
const n=Ke.ZP.prefixApiId(_e.TEMPLATE_COLLECTION,t)
_editorBase((()=>{it.Z.activateCollection(n)
S.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR?Nu.renderReact(d.createElement(ds.ZP,{collectionId:n}),Md.Section.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION):Nu.renderReact(d.createElement(ks,null),Md.Section.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION)}))},stageEntryEditor(e){if(S.ZP.LEGACY_WORKFLOWS_ENABLE){gu.Z.startRUMView("stage_entry_editor")
_editorForApiId(e)}else _redirectAfterInaccessibleLegacyGatedOpen(E.e2.WORKFLOWS,e)},folderItemEditor(e,t){gu.Z.startFolderItemEditRUMView(e)
_editorForApiId(e,t)},sharedFolderItemEditor(){var e
gu.Z.startRUMView("shared_folder_item_editor")
const t=window.bootstrap&&window.bootstrap.sharedFolderItemAPIId
let n
null!=(e=window.bootstrap)&&e.shareLinkMetadata&&(n=()=>ha.bA(Au,d.createElement(ShareMetadataModal,window.bootstrap.shareLinkMetadata)))
_editorForApiId(t,{},n)},registryGeneralSettings(e,t){const n=(0,p.XH)({feature:E.ed.REGISTRY_ADMIN})
if(n.enabled){gu.Z.startRUMView("registry_settings_general")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Cl,{ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_GENERAL)}))}else(0,Vd.C)(n.userMessage)},schemaInterfaces(){gu.Z.startRUMView("schemas_interfaces_list")
_editorBase((()=>{Nu.renderReact(d.createElement(SchemaInterfacesPage,null),Md.Section.SCHEMA_INTERFACE_SETTINGS)}))},schemaInterfaceCreate(){gu.Z.startRUMView("schema_interfaces_create")
_editorBase((()=>{Nu.renderReact(d.createElement(oc,null),Md.Section.SCHEMA_INTERFACE_SETTINGS)}))},schemaInterfaceSettings(e){gu.Z.startRUMView("schema_interface_settings")
_editorBase((()=>{Nu.renderReact(d.createElement(oc,{interfaceId:e}),Md.Section.SCHEMA_INTERFACE_SETTINGS)}))},tagSchemas(e,t){const n=(0,p.XH)({feature:E.ed.REGISTRY_ADMIN})
if(n.enabled){gu.Z.startRUMView("tag_schemas_list")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Nl.ZP,{ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_SCHEMAS)}))}else(0,Vd.C)(n.userMessage)},tagSchemaCreate(e,t){const n=(0,p.XH)({feature:E.ed.REGISTRY_ADMIN})
if(n.enabled){gu.Z.startRUMView("tag_schemas_create")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(vc,{ownerUrlId:e,registryId:t}),Md.Section.TAG_SCHEMA_SETTINGS)}))}else(0,Vd.C)(n.userMessage)},tagSchemaSettings(e,t,n,a){const i=(0,p.XH)({feature:E.ed.REGISTRY_ADMIN})
if(!i.enabled){(0,Vd.C)(i.userMessage)
return}const r=function settingsTabForRouteSection(e){return{"entity-settings":_c.FILE,validation:_c.VALIDATION,"relevant-templates":_c.RELEVANT_TEMPLATES,"access-policies":_c.ACCESS_POLICIES}[e]}(a)
gu.Z.startRUMView(null!=r?`tag_schema_settings_${a}`:"tag_schema_settings")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Nc,{ownerUrlId:e,registryId:t,tagSchemaId:n,activeTab:r}),Md.Section.TAG_SCHEMA_SETTINGS)}))},containerSchemas(e,t){const n=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(n.enabled){gu.Z.startRUMView("container_schemas_list")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Zc,{ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_CONTAINER_SCHEMAS)}))}else(0,Vd.C)(n.userMessage)},_gridSchemas(e,t,n,a){const i=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(i.enabled){gu.Z.startRUMView(`${n}s_list`)
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Hc,{gridSchemaClass:n,ownerUrlId:e,registryId:t}),a)}))}else(0,Vd.C)(i.userMessage)},boxSchemas(e,t){Ou._gridSchemas(e,t,_e.BOX_SCHEMA,Md.Section.REGISTRY_SETTINGS_BOX_SCHEMAS)},plateSchemas(e,t){Ou._gridSchemas(e,t,_e.PLATE_SCHEMA,Md.Section.REGISTRY_SETTINGS_PLATE_SCHEMAS)},_gridSchemaSettings(e,t,n,a,i){const r=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(r.enabled){gu.Z.startRUMView(`${a}_settings`)
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement($c,{gridSchemaClass:a,gridSchemaId:n,ownerUrlId:e,registryId:t}),i)}))}else(0,Vd.C)(r.userMessage)},boxSchemaSettings(e,t,n){Ou._gridSchemaSettings(e,t,n,_e.BOX_SCHEMA,Md.Section.REGISTRY_SETTINGS_BOX_SCHEMAS)},plateSchemaSettings(e,t,n){Ou._gridSchemaSettings(e,t,n,_e.PLATE_SCHEMA,Md.Section.REGISTRY_SETTINGS_PLATE_SCHEMAS)},locationSchemas(e,t){const n=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(n.enabled){gu.Z.startRUMView("location_schemas_list")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(hd,{ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_LOCATION_SCHEMAS)}))}else(0,Vd.C)(n.userMessage)},locationSchemaSettings(e,t,n,a){const i=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(!i.enabled){(0,Vd.C)(i.userMessage)
return}const r=function locationSettingsTabForRouteSection(e){return"validation"===e?Sd.VALIDATION:Sd.SCHEMA}(a)
gu.Z.startRUMView("location_schema_settings")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Td,{ownerUrlId:e,registryId:t,locationSchemaId:n,activeTab:r}),Md.Section.REGISTRY_SETTINGS_LOCATION_SCHEMAS)}))},tenantLevelLabelPrintingSettings(){const e=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
e.enabled?_editorBase((()=>{Nu.renderReact(d.createElement(LabelPrintingSettingsPage,null),Md.Section.TENANT_LEVEL_LABEL_PRINTING_SETTINGS)})):(0,Vd.C)(e.userMessage)},tenantLevelInventorySettings(){const e=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
e.enabled?_editorBase((()=>{Nu.renderReact(d.createElement(InventorySettingsPage,null),Md.Section.TENANT_LEVEL_INVENTORY_SETTINGS)})):(0,Vd.C)(e.userMessage)},labelTemplates(e,t){const n=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(n.enabled){gu.Z.startRUMView("label_templates_list")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Xc,{activeTab:_e.LABEL_TEMPLATE,ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_LABEL_PRINTING)}))}else(0,Vd.C)(n.userMessage)},labelTemplateSettings(e,t,n){const a=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(a.enabled){gu.Z.startRUMView("label_template_settings")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(rd,{ownerUrlId:e,registryId:t,labelTemplateId:n}),Md.Section.REGISTRY_SETTINGS_LABEL_PRINTING)}))}else(0,Vd.C)(a.userMessage)},printers(e,t){const n=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(n.enabled){gu.Z.startRUMView("printers_list")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Xc,{activeTab:_e.PRINTER,ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_LABEL_PRINTING)}))}else(0,Vd.C)(n.userMessage)},printerSettings(e,t,n){const a=(0,p.XH)({feature:E.TD.INVENTORY_ADMIN})
if(a.enabled){gu.Z.startRUMView("printer_settings")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(cd,{ownerUrlId:e,registryId:t,printerId:n}),Md.Section.REGISTRY_SETTINGS_LABEL_PRINTING)}))}else(0,Vd.C)(a.userMessage)},schemaFieldSelectors(e,t){const n=(0,p.XH)({feature:E.ed.REGISTRY_ADMIN})
if(n.enabled){gu.Z.startRUMView("schema_field_selectors_list")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(Ll,{ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_SELECTORS)}))}else(0,Vd.C)(n.userMessage)},createSchemaFieldSelector(e,t){const n=(0,p.XH)({feature:E.ed.REGISTRY_ADMIN})
if(n.enabled){gu.Z.startRUMView("schema_field_selector_create")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(yd,{ownerUrlId:e,registryId:t}),Md.Section.REGISTRY_SETTINGS_SELECTORS)}))}else(0,Vd.C)(n.userMessage)},schemaFieldSelector(e,t,n){const a=(0,p.XH)({feature:E.ed.REGISTRY_ADMIN})
if(a.enabled){gu.Z.startRUMView("schema_field_selector_settings")
_editorBase((()=>{oo.Z.activateRegistry(t)
Nu.renderReact(d.createElement(yd,{ownerUrlId:e,registryId:t,selectorId:n}),Md.Section.REGISTRY_SETTINGS_SELECTORS)}))}else(0,Vd.C)(a.userMessage)},eventSubscriptionsPage(){gu.Z.startRUMView("event_subscriptions_list")
_editorBase((()=>{Nu.renderReact(d.createElement(EventSubscriptionsPage,null),Md.Section.EVENT_SUBSCRIPTIONS)}))},developerBenchlingAppsPage(){gu.Z.startRUMView("benchling_apps_list")
_editorBase((()=>{Nu.renderReact(d.createElement(nn.ZP,null),Md.Section.BENCHLING_APPS_SETTINGS)}))},benchlingAppCanvasBuilderPage(){gu.Z.startRUMView("benchling_app_canvas_builder")
_editorBase((()=>{Nu.renderReact(d.createElement(AppCanvasBuilder,null),Md.Section.BENCHLING_APP_CANVAS_BUILDER)}))},benchlingAppEditor(e){gu.Z.startRUMView("benchling_app_editor")
_editorForApiId(e)},installBenchlingAppPage(e){gu.Z.startRUMView("install_benchling_app_view")
_editorBase((()=>{Nu.renderReact(d.createElement(QueryingInstallBenchlingAppPage,{appDefinitionId:e}))}))},developerBenchlingAppPage(e){gu.Z.startRUMView("benchling_app_view")
_editorBase((()=>{Nu.renderReact(d.createElement(BenchlingAppPage,{id:e}),Md.Section.BENCHLING_APPS_SETTINGS)}))},developerCreateBenchlingAppPage(){gu.Z.startRUMView("benchling_app_create")
_editorBase((()=>{Nu.renderReact(d.createElement(CreateBenchlingAppPageLegacy,null),Md.Section.BENCHLING_APPS_SETTINGS)}))},configMigrationPage(){gu.Z.startRUMView("config_migration")
const e=(0,d.lazy)((()=>Promise.all([n.e(505),n.e(547)]).then(n.bind(n,8978))))
_editorBase((()=>{Nu.renderReact(d.createElement(d.Suspense,{fallback:d.createElement(H.b,null)},d.createElement(e,null)),Md.Section.CONFIG_MIGRATION)}))},containerEditor(e){gu.Z.startRUMView("container_editor")
_editorForApiId(e)},gridEditor(e){gu.Z.startRUMView("grid_editor")
_editorForApiId(Ke.ZP.prefixApiId(_e.GRID,e))},boxEditor(e){gu.Z.startRUMView("box_editor")
_editorForApiId(e)},plateEditor(e){gu.Z.startRUMView("plate_editor")
_editorForApiId(e)},async locationExpandedSearch(e){gu.Z.startRUMView("location_expanded_search")
const t=await u.bulkFetchSummaries([e]);(0,ie.hu)(1===t.length,"Single storable is expected.")
const a=t[0]
_editorBase((()=>{xs.jn()
n(699418).ZP.get().openLocationExpandedSearch(a)}))},locationEditor(e){gu.Z.startRUMView("location_editor")
_editorForApiId(e)},async storage(){gu.Z.startRUMView("storage")
const{queryKey:e}=T.he(window.location.href),t=await(0,cs.me)(e)
t&&(0,so.getStore)().dispatch(ls.openStorageSectionWithRegistry(qt.SA.STORAGE,t.searchParams,t.registry.id))
_editorBase((()=>xs.s0(qt.SA.STORAGE)))},workflowDashboard(){if(!S.ZP.LEGACY_WORKFLOWS_ENABLE){_redirectAfterInaccessibleLegacyGatedOpen(E.e2.WORKFLOWS)
return}gu.Z.startRUMView("legacy_workflows_dashboard")
const{queryKey:e}=T.he(window.location.href),t=(0,cs.go)(e)
_sidepanelListing(qt.$0.WORKFLOWS,t)},workflowDashboardTemplates(){gu.Z.startRUMView("legacy_workflows_templates_list")
_openWorkflowScreen((()=>Zd.Ds()))},workflowDetails(e){if(S.ZP.LEGACY_WORKFLOWS_ENABLE){gu.Z.startRUMView("legacy_workflow_view")
_openWorkflowScreen((()=>Zd.Su(e)))}else _redirectAfterInaccessibleLegacyGatedOpen(E.e2.WORKFLOWS,e)},workflowTemplateView(e){if(S.ZP.LEGACY_WORKFLOWS_ENABLE){gu.Z.startRUMView("legacy_workflow_template_view")
_openWorkflowScreen((()=>qd.kf(e)))}else _redirectAfterInaccessibleLegacyGatedOpen(E.e2.WORKFLOWS,e)},sidepanelListing(e,t){if(e===qt.SA.REQUESTS&&!S.ZP.ENABLE_REQUESTS){_redirectAfterInaccessibleLegacyGatedOpen(E.e2.REQUESTS)
return}if(e===qt.SA.PROCESSES){const e=(0,p.XH)({feature:E.gx.PROCESSES_DISCOVER})
if(!e.enabled){(0,Vd.C)(e.userMessage)
return}h.L9(Ie.Zm.OPENED_WORKFLOW_DASHBOARD)}gu.Z.startRUMView(Object.values(qt.$0).includes(e)?`sidepanel_${e.toLowerCase()}`:gu.Z.unknownRoute)
const{queryKey:n}=T.he(window.location.href),a=os.QC(n)
_sidepanelListing(e,_objectSpread(_objectSpread(_objectSpread({},t),a),{},{filters:qs.sg(t.filters,...a.filters||[])}))},processEditor(e){const t=(0,p.XH)({feature:E.gx.PROCESSES_OPEN})
if(t.enabled){gu.Z.startRUMView("process_editor")
_editorForApiId(e)
h.L9(Ie.Zm.OPENED_TASK_GROUP_DETAILS,{task_group_api_id:e})}else(0,Vd.C)(t.userMessage)},processTaskEditor(e){const t=(0,p.XH)({feature:E.gx.PROCESSES_OPEN})
if(t.enabled){gu.Z.startRUMView("process_task_editor")
_editorForApiId(e)}else(0,Vd.C)(t.userMessage)},requestEditor(e){if(S.ZP.ENABLE_REQUESTS){gu.Z.startRUMView("request_editor")
_editorForApiId(e)}else _redirectAfterInaccessibleLegacyGatedOpen(E.e2.REQUESTS,e)},editor(){gu.Z.startRUMView("editor")
_editorBase((()=>{this._editor()}))},_editor(){null!=window.user&&Us.Z.listAccounts()
!function _redirectForWorkspace(){const e=ei.ZP.get(),{activeId:t,workspaceItems:n}=kd.Z.getState()
t?e.openFolderItem(t):n.length>0?e.openFolderItem(n[0].fileId):e.trigger("no-files")}()},bulkAntibody(){gu.Z.startRUMView("bulk_antibody")
_editorBase((()=>{Bs.Nc(xt.Kb)}))},bulkAssembly(){gu.Z.startRUMView("bulk_assembly")
_editorBase((()=>{Bs.Nc(Bt.YZ)}))},bulkTranslation(){gu.Z.startRUMView("bulk_translation")
_editorBase((()=>{Bs.Nc(Zt.Yc)}))},externalAnalyticsListing(){const e=(0,p.XH)({feature:E.sZ.INSIGHTS_DISCOVER})
if(!e.enabled){(0,Vd.C)(e.userMessage)
_editorBase()
return}gu.Z.startRUMView("sidepanel_analytics_list")
const{queryKey:t}=T.he(window.location.href),n=(0,cs.pW)(t)
_sidepanelListing(qt.$0.ANALYTICS,n)},externalAnalyticsDashboardDetails(e){gu.Z.startRUMView("analytics_dashboard")
_editorForApiId(e)},analysisEditor(e){gu.Z.startRUMView("analysis")
_editorForApiId(e)},studySchemas(){if(S.ZP.STUDIES_ENABLE){gu.Z.startRUMView("study_schemas_list")
_editorBase((()=>{Nu.renderReact(d.createElement(ConnectedStudySchemasPage,null),Md.Section.STUDY_SCHEMAS)}))}else(0,Vd.C)("Studies are not enabled.")},studySchemasCreate(){if(S.ZP.STUDIES_ENABLE){gu.Z.startRUMView("study_schemas_create")
_editorBase((()=>{Nu.renderReact(d.createElement(study_schemas_StudySchemaEditor,null),Md.Section.STUDY_SCHEMAS)}))}else(0,Vd.C)("Studies are not enabled.")},studySchema(e){if(S.ZP.STUDIES_ENABLE){gu.Z.startRUMView("study_schema_view_or_edit")
_editorBase((()=>{Nu.renderReact(d.createElement(study_schemas_StudySchemaEditor,{schemaId:e}),Md.Section.STUDY_SCHEMAS)}))}else(0,Vd.C)("Studies are not enabled.")},procedureEditor(e,t){if(S.ZP.PROCEDURES_ENABLE){gu.Z.startRUMView("procedure_view")
_editorBase((()=>{const e=(0,d.lazy)((()=>Promise.resolve().then(n.bind(n,633856))))
Nu.renderReact(d.createElement(d.Suspense,{fallback:d.createElement(H.b,null)},d.createElement(e,{procedureId:t,key:t})),Md.Section.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION)}))}else(0,Vd.C)("Procedures are not enabled.")},procedureRunEditor(e){S.ZP.PROCEDURES_ENABLE_M1?_editorForApiId(e):(0,Vd.C)("First-class execution is not enabled for Procedures")},fileEditor(e,t){if(S.ZP.FILES_ENABLE){gu.Z.startRUMView("files_view")
_editorForApiId(t)}else(0,Vd.C)("Files are not enabled.")}},bu=Ou
0
var vu=n(508085)
const Pu={domain:"analyses",routes:[{urlPattern:"analytics/analyses/:analysisUrlIdentifier",handler:bu.analysisEditor.bind(bu),legacy:!0}]},Lu={domain:"app-core",routes:[{urlPattern:"jellyfish/listing",handler:bu.jellyfish.bind(bu)},{urlPattern:"jellyfish/:id",handler:bu.jellyfishEditor.bind(bu)}]}
function getSigninURL(e,t){const n=`/ext/saml/signin:begin?idp=${encodeURIComponent(e)}`
return null!=t?`${n}&next=${t}`:n}function SigninChooseProviderPage({providers:e,nextURL:t}){return d.createElement("div",{className:(0,C.iv)(Du.page),...(0,g.Z)({component:"SigninChooseProviderPage",element:"root"})},d.createElement("div",{className:(0,C.iv)(Du.signinContainer)},d.createElement("img",{className:(0,C.iv)(Du.benchlingLogo),src:"/static/img/navy_wordmark_500.png"}),d.createElement("div",{className:(0,C.iv)(Du.instructions)},"Choose a single sign-on provider"),e.map((({name:e,logoURL:n},a)=>d.createElement(d.Fragment,{key:e},d.createElement(O.ZP,{className:(0,C.iv)(Du.providerButton),textClassName:(0,C.iv)(Du.buttonContentWrapper),href:getSigninURL(e,t),buttonStyle:O.ZJ.TERTIARY_WHITE,size:O.qE.LARGE,fullWidth:!0,text:d.createElement("div",{className:(0,C.iv)(Du.buttonContent)},d.createElement("img",{className:(0,C.iv)(Du.providerLogo),src:n,alt:e}),d.createElement("span",{className:(0,C.iv)(Du.signInPrompt)},"Sign in with ",e)),dataTestAttrs:{component:"SigninChooseProviderPage",element:"ButtonLink",key:e}}))))))}const Du=C.mM.create({page:{alignItems:"center",backgroundColor:b.bs,display:"flex",flexDirection:"column",height:"100%"},signinContainer:{alignItems:"center",backgroundColor:b.Cj,borderColor:b.pF,borderRadius:3,borderStyle:"solid",borderWidth:1,display:"flex",flexDirection:"column",marginTop:80,padding:40,width:400},benchlingLogo:{height:42,width:200},instructions:{...ji.Nk,margin:16},providerButton:{margin:8,padding:4},buttonContentWrapper:{width:"100%"},buttonContent:{alignItems:"center",display:"flex",flexDirection:"row",height:40},providerLogo:{flex:1,height:"80%",objectFit:"contain"},signInPrompt:{...ji.Nk,color:b.Rl,flex:3,fontWeight:ji.KB,textAlign:"center"}})
var Mu=n(926025),wu=n(468991)
const Fu="fa-times u-danger-color",ku="fa-check u-success-color",Uu=["username","email","name"]
class GettingStartedView extends o().View{static initClass(){this.prototype.events={'change select[name="affiliation"]':"toggleFields","input input":"delayedAuthenticateField",submit:"disableSubmit","blur input":"handleBlur","blur select":"handleBlur","change select":"handleBlur"}}initialize(){this.debouncedAuthenticateField=(0,Mu.D)(this.authenticateField,500)}getType(){return this.$('select[name="affiliation"]').val()}affiliationChangeHandler(e){this.$(".info-col .info").addClass("hidden")
switch(e){case wu.ZP.PROCLAIMED_ACADEMIC:this.$(".info-col .academic-info").removeClass("hidden")
break
case wu.ZP.PROCLAIMED_COMMERCIAL:this.$(".info-col .commercial-info").removeClass("hidden")
break
case wu.ZP.PROCLAIMED_NONPROFIT:this.$(".info-col .nonprofit-info").removeClass("hidden")
break
default:this.$(".info-col .general-info").removeClass("hidden")}}disableSubmit(e){this.$('button[type="submit"]').attr("disabled",!0).addClass("disabled")}delayedAuthenticateField(e){const t=e.target.id,n=c()(`#${t}`).prevAll(".fieldStatus").find(".fieldStatus-icon")
if(!n.hasClass("hidden")){n.removeClass("fa").removeClass(Fu).removeClass(ku).addClass("spinner")
this.debouncedAuthenticateField(e)}}handleBlur(e){const t=e.target.id
Array.from(Uu).includes(t)&&(e.currentTarget.value=e.currentTarget.value.trim())
"username"===t&&0===e.currentTarget.value.length||this.authenticateField(e)}authenticateField(e){const t=e.target.id
this.authenticateForm().done((e=>{const n=c()(`#${t}`).prevAll(".fieldStatus").find(".fieldStatus-icon"),a=c()(`#${t} ~ .legacy-field-error`),i=null!=e[t]
a.text(i?e[t][0]:"").toggleClass("hidden",!i)
n.addClass("fa").toggleClass(Fu,i).toggleClass(ku,!i).removeClass("hidden spinner")}))}authenticateForm(){let e
const t=new FormData
this.$("input, select").each(((e,n)=>{let a=c()(n).val()
Array.from(Uu).includes(n.id)&&(a=a.trim())
t.append(c()(n).attr("name"),a)}))
return c().ajax({url:null!=(e=this.$("form").data("validate-url"))?e:"/1/api/auth/validate-signup",data:t,processData:!1,contentType:!1,type:"POST"})}toggleFields(e){const t=this.getType(),n=t===wu.ZP.PROCLAIMED_ACADEMIC,a=""!==t&&!n
this.$(".js-academic-email-description").toggleClass("hidden",!n)
this.$(".academic-fields").toggleClass("hidden",!n)
this.$(".commercial-fields").toggleClass("hidden",!a)
"function"==typeof this.affiliationChangeHandler&&this.affiliationChangeHandler(t)}render(){this.toggleFields()
return this}}GettingStartedView.initClass()
const xu=GettingStartedView
const Bu=C.mM.create({header:{fontSize:24},warning:{fontSize:15,color:b.JF,fontWeight:"bold"},bodyText:{fontSize:15},listItem:{marginBottom:5}})
n(260929)
const Zu=C.mM.create({bodyText:{fontSize:15}})
var qu
!function(e){e.DoD="DoD"
e.GenentechPTD="GenentechPTD"}(qu||(qu={}))
function BannerCheckbox({labelText:e,isChecked:t,setIsChecked:n}){return d.createElement(d.Fragment,null,d.createElement("input",{checked:t,id:"banner-checkbox",onChange:e=>{n(e.target.checked)},type:"checkbox"}),d.createElement(F.Z,{htmlFor:"banner-checkbox",className:(0,C.iv)(Hu.checkboxLabel),label:e}))}const Gu="client-banner-modal",Vu={[qu.DoD]:function DoDBanner_DoDBanner(e){return d.createElement(d.Fragment,null,d.createElement("div",{className:(0,C.iv)(Bu.header)},d.createElement("strong",null,"DoD Warning and Consent Banner")),d.createElement("p",{className:(0,C.iv)(Bu.warning)},"You are accessing a U. S. Government (USG) Information System (IS) that is provided for USG-authorized use only. By using this IS (which includes any device attached to this IS), you consent to the following conditions:"),d.createElement("div",{className:(0,C.iv)(Bu.bodyText)},d.createElement("ul",null,d.createElement("li",{className:(0,C.iv)(Bu.listItem)},"The USG routinely intercepts and monitors communications on this IS for purposes including, but not limited to, penetration testing, COMSEC monitoring, network operations and defense, personnel misconduct (PM), law enforcement (LE), and counterintelligence (CI) investigations."),d.createElement("li",{className:(0,C.iv)(Bu.listItem)},"At any time, the USG may inspect and seize data stored on this IS."),d.createElement("li",{className:(0,C.iv)(Bu.listItem)},"Communications using, or data stored on, this IS are not private, are subject to routine monitoring, interception, and search, and may be disclosed or used for any USG authorized purpose."),d.createElement("li",{className:(0,C.iv)(Bu.listItem)},"This IS includes security measures (e.g., authentication and access controls) to protect USG interests--not for your personal benefit or privacy."),d.createElement("li",{className:(0,C.iv)(Bu.listItem)},"Notwithstanding the above, using this IS does not constitute consent to PM, LE or CI investigative searching or monitoring of the content of privileged communications, or work product, related to personal representation or services by attorneys, psychotherapists, or clergy, and their assistants. Such communications and work product are private and confidential. See User Agreement for details."))),d.createElement("div",{className:(0,C.iv)(Bu.bodyText)},d.createElement("p",null,"Welcome to Benchling Informatics for Biological R&D (BIBRD) (Benchlinggov.com)"),d.createElement("p",null,d.createElement("strong",null,"BIBRD is not approved for classified work. STORAGE OF ANY CLASSIFIED INFORMATION IS PROHIBITED.")),d.createElement("p",null,"BIBRD is implemented to facilitate designing and sharing of genetic constructs and for storing experimental data. Users are required to access this service through a Common Access Card (CAC)-restricted computer. By-passing the restriction is a violation of the BIBRD User Agreement. This service is funded through the OSD Applied Research for the Advancement of S&T Priority - Synthetic Biology for Military Environment program."),d.createElement("p",null,"We seek to build a Biotechnology Research Community within DoD. Please join the vision to develop a collaborative and sharing community. Enjoy BIBRD. If you have any problems accessing or any questions regarding this service, please contact your site-specific admin."),e.showRequiredCheckbox&&d.createElement(BannerCheckbox,{isChecked:e.isChecked,setIsChecked:e.setIsChecked,labelText:"I agree with the DoD Warning and Consent Banner as stated above"})))},[qu.GenentechPTD]:function GenentechPTDBanner_GenentechPTDBanner(e){return d.createElement("div",{className:(0,C.iv)(Zu.bodyText)},d.createElement("p",null,"I acknowledge that I am bound by confidentiality obligations imposed through my employment or contractual agreement with Roche in connection with my access to confidential information, including PTD Non-GMP ELN-Benchling and its contents. By entering PTD Non-GMP ELN-Benchling, I confirm that I understand that my activities within PTD Non-GMP ELN-Benchling may be monitored consistent with local law, and all contents and passwords are confidential information, and that unauthorized disclosure or use of such confidential information may result in disciplinary action including termination of my employment or services and/or legal action based on local law."),e.showRequiredCheckbox&&d.createElement(BannerCheckbox,{isChecked:e.isChecked,setIsChecked:e.setIsChecked,labelText:"I acknowledge the obligations as stated above"}))}}
function ClientBannerModal(e){const[t,n]=d.useState(!1)
d.useEffect((()=>{c()("#has_acknowledged_banner").val(t?"true":"false")}),[t])
const a=Vu[e.bannerKey]
return d.createElement(B.ZP,{closeable:!1,large:!0,suppressHeader:!0,onRequestClose:()=>{ha.xv(Gu)},buttons:[{text:"Continue",cancel:!0,disabled:!t&&e.showRequiredCheckbox}]},d.createElement(a,{showRequiredCheckbox:e.showRequiredCheckbox,isChecked:t,setIsChecked:n}))}const Hu=C.mM.create({bannerWrapper:{marginTop:80,marginBottom:10},checkboxLabel:{fontSize:15,fontWeight:"bold",marginLeft:"6px"}})
var Wu=n(841996),Yu=n(919210),$u=n(154378),Ku=n(707521)
function renderReactElement(e){const t=c()(".react-mount")
if(1!==t.length){const e=0===t.length?"no":"multiple"
throw new Error(`Cannot render React component - ${e} .react-mount found`)}ro.A9(e,t[0])}function renderReactComponent(e,t={}){renderReactElement(d.createElement(e,{...t,...window.bootstrap&&window.bootstrap.componentProps}))}var zu=n(111080),Qu=n(593113)
function printerFriendlyViewHandler(){const e=window.bootstrap.itemId,{queryKey:t}=T.he(window.location.href),{itemName:n}=window.bootstrap
!function renderView(e,t,n){gu.Z.startFolderItemViewerRUMView(e)
const a=null!=t.versionId?parseInt(t.versionId,10):null
switch(Ke.ZP.apiIdToType(e)){case _e.ENTRY:Wu.Z.open(e,{versionId:a})
renderReactComponent((0,zu.Z)(ju),getPropsForPrinterFriendlyView(t,e))
break
case _e.TEMPLATE:it.Z.open(e,{versionId:a})
renderReactComponent((0,zu.Z)(Ju),getPropsForPrinterFriendlyView(t,e))
break
case _e.SUBTEMPLATE:$u.Z.open(e,{versionId:a})
renderReactComponent((0,zu.Z)(Xu),getPropsForPrinterFriendlyView(t,e))
break
case _e.PROTOCOL:null!=a?Ku.Z.loadVersion(e,a):Ku.Z.open(e)
renderReactComponent((0,zu.Z)(tm),{id:e})
break
case _e.STAGE_ENTRY:Qu.fetchEntryDetails(e)
renderReactComponent((0,zu.Z)(nm),getPropsForPrinterFriendlyView(t,e))
break
default:Yu.Z.loadVersion(e,t.note)
renderReactComponent((0,zu.Z)(em),{id:e,title:n})}}(e,t,n)}const ju=(0,d.lazy)((()=>Promise.all([n.e(877),n.e(975),n.e(337),n.e(81),n.e(172)]).then(n.bind(n,932594)).then((e=>({default:e.EntryPrinterFriendlyView}))))),Ju=(0,d.lazy)((()=>Promise.all([n.e(877),n.e(975),n.e(337),n.e(81),n.e(172)]).then(n.bind(n,932594)).then((e=>({default:e.TemplatePrinterFriendlyView}))))),Xu=(0,d.lazy)((()=>Promise.all([n.e(877),n.e(975),n.e(337),n.e(81),n.e(172)]).then(n.bind(n,932594)).then((e=>({default:e.SubtemplatePrinterFriendlyView}))))),em=(0,d.lazy)((()=>Promise.all([n.e(877),n.e(975),n.e(337),n.e(81),n.e(172)]).then(n.bind(n,301322)))),tm=(0,d.lazy)((()=>Promise.all([n.e(877),n.e(975),n.e(337),n.e(81),n.e(172)]).then(n.bind(n,252030)))),nm=(0,d.lazy)((()=>Promise.all([n.e(877),n.e(975),n.e(337),n.e(81),n.e(172)]).then(n.bind(n,534200))))
function getPropsForPrinterFriendlyView(e,t){const n=e.protocols&&e.protocols.split(",")||[]
return{id:t,showNote:"true"===e.note,showProtocols:n.map((e=>parseInt(e,10))),indexSlice:getIndexSliceForPrinterFriendlyView(e),showTimestamps:"true"===e.showTimestamps}}function getIndexSliceForPrinterFriendlyView(e){return{start:null!=e.startIndex?parseInt(e.startIndex,10):0,end:null!=e.endIndex?parseInt(e.endIndex,10):1/0}}var am=n(250965)
const im={domain:"auth",routes:[{urlPattern:"signin",handler:function signin(){gu.Z.startRUMView("signin")
_addHashToFormAction(am(".signin-form"))
if(S.ZP.START_BANNER_CONFIG){if("true"===am("#has_acknowledged_banner").val())return
ha.bA(Gu,d.createElement(ClientBannerModal,{bannerKey:S.ZP.START_BANNER_CONFIG.bannerKey,showRequiredCheckbox:S.ZP.START_BANNER_CONFIG.showRequiredCheckbox}))}},legacy:!0},{urlPattern:"signin/choose-provider",handler:function signinChooseProvider(){gu.Z.startRUMView("signin_choose_provider")
if(!window.bootstrap||!window.bootstrap.signinProviders){(0,ie.Gp)(!1,"Expected signinProviders to be specified for the signin/choose-provider endpoint.")
rt.ZP.error("Page data is unexpectedly missing. Try [refreshing the page](?).",{duration:rt.a9})
return}renderReactElement(d.createElement(SigninChooseProviderPage,{providers:window.bootstrap.signinProviders,nextURL:window.bootstrap.nextURL}))},legacy:!0},{urlPattern:"signup",handler:function signup(){gu.Z.startRUMView("signup")
_addHashToFormAction(am(".signup-form"))
new xu({el:am(".sign-up")}).render()
if(S.ZP.START_BANNER_CONFIG){if("true"===am("#has_acknowledged_banner").val())return
ha.bA(Gu,d.createElement(ClientBannerModal,{bannerKey:S.ZP.START_BANNER_CONFIG.bannerKey,showRequiredCheckbox:S.ZP.START_BANNER_CONFIG.showRequiredCheckbox}))}},legacy:!0},{urlPattern:"access-policies",handler:bu.dataPoliciesPage.bind(bu),legacy:!0},{urlPattern:"data-policies/:policyId",handler:bu.dataPolicyPage.bind(bu),legacy:!0},{urlPattern:"s/:apiIdentifier/edit",handler:bu.sharedFolderItemEditor.bind(bu),legacy:!0},{urlPattern:"s/:apiIdentifier/view",handler:printerFriendlyViewHandler,legacy:!0}]}
function _addHashToFormAction(e){e.attr("action",e.attr("action")+window.location.hash)}var rm=n(663961)
const sm={domain:"benchling-apps",routes:[{urlPattern:"apps",handler:function benchlingAppsSidepanel(){bu.sidepanelListing(qt.SA.BENCHLING_APPS,(0,rm.Nf)())},legacy:!0},{urlPattern:"apps/:benchlingAppId",handler:bu.benchlingAppEditor.bind(bu),legacy:!0},{urlPattern:"developer/app-canvas-builder",handler:bu.benchlingAppCanvasBuilderPage.bind(bu),legacy:!1},{urlPattern:"developer/apps",handler:bu.developerBenchlingAppsPage.bind(bu),legacy:!0},{urlPattern:"developer/apps/create",handler:bu.developerCreateBenchlingAppPage.bind(bu),legacy:!0},{urlPattern:"developer/apps/:benchlingAppId",handler:bu.developerBenchlingAppPage.bind(bu),legacy:!0},{urlPattern:"app-catalog/apps/:appDefinitionId/install",handler:bu.installBenchlingAppPage.bind(bu),legacy:!1}]}
const om={domain:"bulk-worflows",routes:[{urlPattern:"bulk-workflows/antibody",handler:bu.bulkAntibody.bind(bu),legacy:!0},{urlPattern:"bulk-workflows/assembly",handler:bu.bulkAssembly.bind(bu),legacy:!0},{urlPattern:"bulk-workflows/translation",handler:bu.bulkTranslation.bind(bu),legacy:!0}]},lm={domain:"calendar",routes:[{urlPattern:"calendar",handler:bu.calendar.bind(bu),legacy:!0}]},cm={domain:"config-migration",routes:[{urlPattern:"config-migration",handler:bu.configMigrationPage.bind(bu),legacy:!0}]}
var dm=n(476947)
function DropdownMenu({options:e,children:t}){return d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.SMALL},e.map(((e,t)=>d.createElement(x.Z,{key:t,onSelect:e.onSelect},e.text))))},t)}const um=ue.default.values(O.qE),mm=ue.default.values(O.ZJ)
class ButtonGuidelines extends d.Component{constructor(){super(...arguments)
this._renderButtonWithStyle=(e,t,n)=>d.createElement(O.Co,{buttonStyle:e,className:N()({"u-mini-spacing-left":t>0}),icon:n?"search":void 0,key:`button-${ue.default.uniqueId()}`,size:O.qE.MEDIUM,text:n?null:e.charAt(0).toUpperCase()+e.substr(1)})
this.render=()=>{const e=ue.default.clone(um).reverse(),t=ue.default.times(5,(e=>({onSelect:St.ZT,text:e})))
return d.createElement("div",{className:"u-padding"},d.createElement("h1",null,"Buttons"),d.createElement("a",{href:"https://zpl.io/ZouraR"},"https://zpl.io/ZouraR"),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"Buttons can take the following sizes and forms:"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Buttons"),d.createElement(dm.Z,null,"Large"),d.createElement(dm.Z,null,"Medium"),d.createElement(dm.Z,null,"Small"),d.createElement(dm.Z,null,"Mini"))),d.createElement("tbody",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Text"),e.map(((e,t)=>d.createElement(dm.Z,{key:`textButton-${t}`},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,size:e,text:"Button"}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Text + Icon"),e.map(((e,t)=>d.createElement(dm.Z,{key:`iconTextButton-${t}`},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,icon:"star",size:e,text:"Button"}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Text Dropdown"),e.map(((e,n)=>d.createElement(dm.Z,{key:`textDropdown-${n}`},d.createElement(DropdownMenu,{options:t},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:e,text:"Button"})))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Icon"),e.map(((e,t)=>d.createElement(dm.Z,{key:`iconButton-${t}`},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,icon:"invite",size:e}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Circle Icon (can be dropdown)"),e.map(((e,n)=>d.createElement(dm.Z,{key:`circleIcon-${n}`},d.createElement(DropdownMenu,{options:t},d.createElement(O.Co,{buttonStyle:O.ZJ.CIRCLE_ICON,icon:"helix",isDropdown:!0,size:e})))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Icon Dropdown"),e.map(((e,n)=>d.createElement(dm.Z,{key:`iconDropdown-${n}`},d.createElement(DropdownMenu,{options:t},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,icon:"split-workspace",isDropdown:!0,size:e}))))))))),d.createElement("div",{className:"u-small-spacing-top"},"Full width button. ",d.createElement("strong",null,"Please use sparingly."),d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,icon:"registry",fullWidth:!0,size:O.qE.MEDIUM,text:"Full Width Button"})),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"The following button styles can be used for text buttons:"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Style"),d.createElement(dm.Z,null,"Variations"))),d.createElement("tbody",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Primary"),d.createElement(dm.Z,null,(()=>[O.ZJ.PRIMARY].map(((e,t)=>this._renderButtonWithStyle(e,t))))())),d.createElement("tr",null,d.createElement(dm.Z,null,"Secondary"),d.createElement(dm.Z,null,(()=>[O.ZJ.SECONDARY,O.ZJ.SECONDARY_WHITE,O.ZJ.SECONDARY_BLACK].map(((e,t)=>this._renderButtonWithStyle(e,t))))())),d.createElement("tr",null,d.createElement(dm.Z,null,"Tertiary"),d.createElement(dm.Z,null,(()=>[O.ZJ.TERTIARY_BLUE,O.ZJ.TERTIARY_GRAY,O.ZJ.TERTIARY_WHITE,O.ZJ.TERTIARY_BLUE_POWDER].map(((e,t)=>this._renderButtonWithStyle(e,t))))())),d.createElement("tr",null,d.createElement(dm.Z,null,"a11y"),d.createElement(dm.Z,null,d.createElement(O.Co,{buttonStyle:O.ZJ.LINK,key:`button-${ue.default.uniqueId()}`,text:"Anchor"}),d.createElement(O.Co,{buttonStyle:O.ZJ.UNBUTTON,className:"u-mini-spacing-left",key:`button-${ue.default.uniqueId()}`},d.createElement("div",{style:{border:"1px solid blue",padding:"0 4px 0 4px"}},"Custom component")))),d.createElement("tr",null,d.createElement(dm.Z,null,"Other"),d.createElement(dm.Z,null,(()=>[O.ZJ.NEGATIVE,O.ZJ.WARNING].map(((e,t)=>this._renderButtonWithStyle(e,t))))()))))),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"The following button styles can be used for icon buttons:"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Style"),d.createElement(dm.Z,null,"Variations"))),d.createElement("tbody",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Primary"),d.createElement(dm.Z,null,(()=>[O.ZJ.PRIMARY].map(((e,t)=>this._renderButtonWithStyle(e,t,!0))))())),d.createElement("tr",null,d.createElement(dm.Z,null,"Secondary"),d.createElement(dm.Z,null,(()=>[O.ZJ.SECONDARY,O.ZJ.SECONDARY_WHITE].map(((e,t)=>this._renderButtonWithStyle(e,t,!0))))())),d.createElement("tr",null,d.createElement(dm.Z,null,"Tertiary"),d.createElement(dm.Z,null,(()=>[O.ZJ.TERTIARY_BLUE,O.ZJ.TERTIARY_WHITE,O.ZJ.TERTIARY_GRAY,O.ZJ.TERTIARY_BLUE_POWDER].map(((e,t)=>this._renderButtonWithStyle(e,t,!0))))())),d.createElement("tr",null,d.createElement(dm.Z,null,"Other"),d.createElement(dm.Z,null,(()=>[O.ZJ.NEGATIVE,O.ZJ.WARNING,O.ZJ.CIRCLE_ICON].map(((e,t)=>this._renderButtonWithStyle(e,t,!0))))()))))),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"Buttons can act as links when using the ButtonLink component:"),d.createElement(O.ZP,{buttonStyle:O.ZJ.PRIMARY,size:O.qE.SMALL,text:"Take me to Benchling!",href:"https://benchling.com/",target:"_blank",onClick:()=>{console.log("meow!")}}),d.createElement(O.ZP,{buttonStyle:O.ZJ.PRIMARY,className:"u-small-spacing-left",size:O.qE.SMALL,text:"I am a disabled link button",href:"https://benchling.com/",disabled:!0})),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"Buttons should have 6px between them:"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Style"),d.createElement(dm.Z,null,"Variations"))),d.createElement("tbody",null,um.map(((e,t)=>d.createElement("tr",{key:`buttonSpacing-${t}`},d.createElement(dm.Z,null,(0,Ot.kC)(e)),d.createElement(dm.Z,null,ue.default.times(2,(t=>d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,className:N()({"u-mini-spacing-left":1===t}),key:`button-${ue.default.uniqueId()}`,size:e,text:"Button"})))))))))),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"Button groups also exist:"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Size"),d.createElement(dm.Z,null,"Styles"),d.createElement(dm.Z,null,"More Styles"))),d.createElement("tbody",null,(()=>{const e=ue.default.without(mm,O.ZJ.SECONDARY_WHITE,O.ZJ.TERTIARY_WHITE,O.ZJ.TERTIARY_BLUE_POWDER,O.ZJ.NEGATIVE,O.ZJ.WARNING,O.ZJ.CIRCLE_ICON),getStyle=t=>e[t%e.length]
return um.map(((e,n)=>d.createElement("tr",{key:`buttonGroup-${n}`},d.createElement(dm.Z,null,(0,Ot.kC)(e)),ue.default.times(2,(a=>d.createElement(dm.Z,{key:`buttonGroup-button-${2*n+a}`},d.createElement("div",{className:"buttonGroup"},d.createElement(O.Co,{buttonStyle:getStyle(2*n+a),size:e,text:"Button"}),d.createElement(O.Co,{buttonStyle:getStyle(2*n+a),icon:"history",size:e,text:"Button"}),d.createElement(DropdownMenu,{options:t},d.createElement(O.Co,{buttonStyle:getStyle(2*n+a),icon:"tutorial",isDropdown:!0,size:e})))))))))})()))),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"You can even make button toolbars!"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Size"),d.createElement(dm.Z,null,"Styles"))),d.createElement("tbody",null,(()=>{const e=ue.default.without(mm,O.ZJ.SECONDARY_WHITE,O.ZJ.TERTIARY_WHITE,O.ZJ.NEGATIVE,O.ZJ.WARNING,O.ZJ.CIRCLE_ICON),getStyle=t=>e[t%e.length]
return um.map(((e,t)=>d.createElement("tr",{key:`buttonToolbar-${t}`},d.createElement(dm.Z,null,(0,Ot.kC)(e)),d.createElement(dm.Z,null,d.createElement("div",{className:"buttonToolbar"},ue.default.times(3,(n=>d.createElement("div",{className:"buttonGroup",key:`buttonGroup-${3*t+n}`},d.createElement(O.Co,{buttonStyle:getStyle(t),icon:"registry",size:e}),d.createElement(O.Co,{buttonStyle:getStyle(t),icon:"history",size:e}),d.createElement(O.Co,{buttonStyle:getStyle(t),icon:"tutorial",size:e})))))))))})()))),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"Buttons can also be active or disabled:"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Style"),d.createElement(dm.Z,null,"Default"),d.createElement(dm.Z,null,"Active"),d.createElement(dm.Z,null,"Disabled"))),d.createElement("tbody",null,mm.map(((e,t)=>d.createElement("tr",{key:`buttonStyle-${t}`},d.createElement(dm.Z,null,e.charAt(0).toUpperCase()+e.substr(1)),ue.default.times(3,(n=>d.createElement(dm.Z,{key:`buttonState-${3*t+n}`},d.createElement(O.Co,{buttonStyle:e,className:N()({"is-active":1===n}),icon:"tutorial",size:O.qE.MEDIUM,disabled:2===n})))))))))))}}}const pm=ButtonGuidelines
function onRemove(){console.log("onRemove!")}function onClick(){console.log("onClick!")}const design_ChipGuidelines=()=>{const e=Object.values(br.TK),t=[{faded:!1,negative:!1},{faded:!0,negative:!1},{faded:!1,negative:!0},{faded:!0,negative:!0}],n=["Chip","Chip + icon","Chip with onRemove","Chip with onClick","Chip with href","Chip with href, onClick","Chip with onClick, onRemove, icon","Chip with onClick, onRemove, svg icon","Chip with tooltipTitle"],a=[e.map((e=>({size:e,text:"Potato Chip"}))),e.map((e=>({size:e,text:"Potato Chip",icon:"star"}))),e.map((e=>({size:e,text:"Potato Chip",onRemove}))),e.map((e=>({size:e,text:"Potato Chip",onClick}))),e.map((e=>({size:e,text:"Potato Chip",href:"http://google.com"}))),e.map((e=>({size:e,text:"Potato Chip",onClick,href:"http://google.com"}))),e.map((e=>({size:e,text:"Potato Chip",icon:"star",onRemove,onClick}))),e.map((e=>({size:e,text:"Potato Chip",icon:"protein",onRemove,onClick}))),e.map((e=>({size:e,text:"Potato Chip",tooltipTitle:"Ashu likes potatoes!"})))],i=[t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip"}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",icon:"star"}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",onRemove}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",onClick}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",href:"http://google.com"}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",onClick,href:"http://google.com"}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",icon:"star",onRemove,onClick}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",icon:"protein",onRemove,onClick}))),t.map((({faded:e,negative:t})=>({faded:e,negative:t,size:br.TK.SMALL,text:"Potato Chip",tooltipTitle:"Ashu likes potatoes!"})))]
return d.createElement("div",{className:"u-padding"},d.createElement("h1",null,"Potato Chips"),d.createElement("a",{href:"https://zpl.io/aB1rDnA"},"Mocks: https://zpl.io/aB1rDnA"),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("p",null,"Chips also have a focused state - click the gray background area of a chip to focus it."),d.createElement("p",null,"Look at the console log to see when events (onClick, onRemove) are fired."),d.createElement("h3",null,"Sizes"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Chip"),d.createElement(dm.Z,null,"Table Cell"),d.createElement(dm.Z,null,"Mini"),d.createElement(dm.Z,null,"Small"))),d.createElement("tbody",null,a.map(((e,t)=>d.createElement("tr",{key:t},d.createElement(dm.Z,null,n[t]),e.map(((e,t)=>d.createElement(dm.Z,{key:t},d.createElement(br.ZP,{...e}))))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Multiple Chips"),a[0].map(((e,t)=>d.createElement(dm.Z,{key:t},d.createElement(br.ZP,{...e}),d.createElement(br.ZP,{...e}),d.createElement(br.ZP,{...e}))))))),d.createElement("h3",null,"Styles"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Chip"),d.createElement(dm.Z,null,"Default"),d.createElement(dm.Z,null,"Faded"),d.createElement(dm.Z,null,"Negative"),d.createElement(dm.Z,null,"Faded and Negative"))),d.createElement("tbody",null,i.map(((e,t)=>d.createElement("tr",{key:t},d.createElement(dm.Z,null,n[t]),e.map(((e,t)=>d.createElement(dm.Z,{key:t},d.createElement(br.ZP,{...e})))))))))))}
var hm=n(755383),Em=n(940878),Sm=n(826478),Tm=n(512262),gm=n(666571),fm=n(124640),Im=n(687201),Am=n(480207)
class ComponentGuidelines extends d.Component{constructor(){super(...arguments)
this.state={checked:!1,iconFilter:"",editableTextFieldValue:"Hello! Hover over me"}
this._handleToggleChecked=()=>{this.setState({checked:!this.state.checked})}
this._shouldDisplayIcon=e=>0===this.state.iconFilter.length||-1!==e.toLowerCase().indexOf(this.state.iconFilter.toLowerCase())}render(){return d.createElement("div",{className:"u-padding"},d.createElement(f.R6,null,"Components"),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Buttons"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/buttons/Button.tsx")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./buttons"},"./buttons")),d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,size:O.qE.MEDIUM,text:"Click Me"})),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Clipboard Text"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/ClipboardText.js")),d.createElement("div",null,"Use ",d.createElement("code",null,"ClipboardText")," to wrap text that you want to be copied to the clipboard!",d.createElement(Tm.Z,{clipboardData:"Jeffy P"},"Click to copy my name!"))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Headers"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/Headers.js")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./headers"},"./headers")),d.createElement(f.R6,null,"Header 1"),d.createElement(f.zV,null,"Header 2"),d.createElement(f.BB,null,"Header 3")),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Help Icon"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/HelpIcon.js")),d.createElement("div",null,"Help icons can be wrapped by tooltips and have ",d.createElement("code",null,"onClick")," handlers:",d.createElement(ve.ZP,{title:"Help me!"},d.createElement(gm.Z,{className:"u-mini-spacing-left",onClick:hm.B}))),d.createElement("div",null,"Use a ",d.createElement("code",null,"HelpButton")," to use popovers:",d.createElement(le.Z,{renderContent:()=>"I can help you!",iconClassName:"u-mini-spacing-left"}))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Add Icon"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/AddIcon.js")),d.createElement("div",null,"Add icons should be used inline and have ",d.createElement("code",null,"onClick")," handlers:",d.createElement(f.BB,null,"My Things",d.createElement(v.Z,{onClick:St.ZT})))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Chips"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/chips/")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./chips"},"./chips")),d.createElement(br.ZP,{size:br.TK.SMALL,text:"pBR322",icon:fm.m.Sequence})),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Field Inputs"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/inputs/")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./field-inputs"},"./field-inputs")),d.createElement("div",{style:{width:"300px"}},d.createElement(k.Z,{placeholder:"Watermark",label:"Label",labelStyle:F.Z.STYLES.LABEL,button:d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"CTA"})})),d.createElement("div",{className:"u-small-spacing-top"},d.createElement(dr.Z,{checked:this.state.checked,label:"Checkbox input",onChange:this._handleToggleChecked,id:"checkbox-a"})),d.createElement("div",{style:{width:"300px"},className:"u-small-spacing-top"},d.createElement(f.BB,null,"Editable Text Field"),d.createElement(De.Z,{isDisabled:!1,requestChange:e=>{this.setState({editableTextFieldValue:e})},value:this.state.editableTextFieldValue}),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/inputs/EditableTextField.tsx")))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Dropdowns"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/dropdowns/"),", ",d.createElement("code",null,"ui-library/menus/")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./dropdowns"},"./dropdowns")),d.createElement("div",null,d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.SMALL},d.createElement(x.Z,{value:1},"Option 1"),d.createElement(x.Z,{value:2},"Option 2"),d.createElement(x.Z,{value:3},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4},"Option 4"),d.createElement(x.Z,{value:5},"Option 5"))))},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Pick an Option!"})))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Select Inputs"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/inputs/")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./select-inputs"},"./select-inputs")),d.createElement("div",{style:{width:"300px"}},d.createElement(Im.Z,{placeholder:"Type something...",optionDatas:[{name:"Option 1",value:"Option 1"},{name:"Option 2",value:"Option 2"},{name:"Option 3",value:"Option 3"}],value:["Option 1","Option 3"]}))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Filter Forms"),d.createElement("div",null,"Code: ",d.createElement("code",null,"search/filters/")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./filter-forms"},"./filter-forms"))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Toasts"),d.createElement("div",null,"Code: ",d.createElement("code",null,"nav/toasts/Toast.js")),d.createElement("div",null,"Guidelines: ",d.createElement("a",{href:"./toasts"},"./toasts")),d.createElement(Em.Z,{message:"A newer version of Benchling is available.",actionText:"Refresh",onActionClick:St.ZT,id:"refresh",type:Sm.pC.INFO})),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.zV,null,"Times"),d.createElement("div",null,"Code: ",d.createElement("code",null,"ui-library/Times.js")),d.createElement("div",{className:"u-small-spacing-top"},d.createElement(f.As,null,"RelativeTime"),d.createElement(Am.i,{datetime:"2017-11-07T22:23:07.888Z"})),d.createElement("div",{className:"u-small-spacing-top"},d.createElement(f.As,null,"LocalTime"),d.createElement(Am.P,{datetime:"2017-11-07T22:23:07.888Z"}))))}}const ym=ComponentGuidelines
var _m=n(914073)
class DropdownGuidelines extends d.Component{constructor(){super(...arguments)
this.state={value:2,multiValue:[1,3]}
this._handleSelect=e=>{rt.ZP.success(`You clicked ${e}!`)
this.setState({value:e})}
this._handleSelectMulti=e=>{rt.ZP.success(`You clicked ${e}!`)
this.state.multiValue.includes(e)?this.setState({multiValue:ue.default.without(this.state.multiValue,e)}):this.setState({multiValue:[...this.state.multiValue,e]})}}render(){return d.createElement("div",{className:"u-spacing"},d.createElement(f.R6,null,"Menus"),d.createElement("div",null,d.createElement("a",{href:"https://zpl.io/aMdgy3m"},"https://zpl.io/aMdgy3m")),d.createElement("div",null,d.createElement("code",null,"ui-library/dropdowns/")),d.createElement("div",null,d.createElement("code",null,"ui-library/menus/")),d.createElement(f.zV,null,"Types"),d.createElement(ne.Z,null,d.createElement(ee.Z,{xs:6},d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Text Only"),d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.MEDIUM,value:this.state.value},d.createElement(x.Z,{value:1,onSelect:this._handleSelect},"Option 1"),d.createElement(x.Z,{value:2,onSelect:this._handleSelect,isDisabled:!0},"Option 2 (Disabled)"),d.createElement(x.Z,{value:3,onSelect:this._handleSelect},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4,onSelect:this._handleSelect},"Option 4"),d.createElement(x.Z,{value:5,onSelect:this._handleSelect},"Option 5"))),!1)},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Text Only"}))),d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Text + Icon"),d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.LARGE,width:U.ZP.WIDTHS.LARGE,value:this.state.value},d.createElement(x.Z,{value:1,icon:"search",onSelect:this._handleSelect},"Option 1"),d.createElement(x.Z,{value:2,icon:"search",onSelect:this._handleSelect},"Option 2"),d.createElement(x.Z,{value:3,icon:"search",onSelect:this._handleSelect},"Option 3"),d.createElement(x.Z,{value:4,icon:"search",onSelect:this._handleSelect},"Option 4"),d.createElement(x.Z,{value:5,icon:"search",onSelect:this._handleSelect},"Option 5"))},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Text + Icon"}))),d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Text + Icon + Metadata"),d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.XLARGE,width:U.ZP.WIDTHS.XLARGE,value:this.state.value},d.createElement(x.Z,{value:1,icon:"search",metadata:"Metadata",onSelect:this._handleSelect},"Option 1"),d.createElement(x.Z,{value:2,icon:"search",metadata:"Metadata",onSelect:this._handleSelect},"Option 2"),d.createElement(x.Z,{value:3,icon:"search",metadata:"Metadata",onSelect:this._handleSelect},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4,onSelect:this._handleSelect},"Option 4"),d.createElement(x.Z,{value:5,onSelect:this._handleSelect},"Option 5"))))},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Text + Icon + Metadata"}))),d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Copy to Clipboard"),d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.XLARGE,width:U.ZP.WIDTHS.XLARGE,value:0},d.createElement(x.Z,{value:0},d.createElement("div",null,"Option 1 (no copy to clipboard)")),d.createElement(x.Z,{value:1,onSelect:()=>{(0,on.Z)("This is the text",{showToastOnSuccess:!0})}},d.createElement("div",null,"Select me to copy to clipboard")))},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Copy to Clipboard"})))),d.createElement(ee.Z,{xs:6},d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Multi-select"),d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.XLARGE,width:U.ZP.WIDTHS.XLARGE,value:this.state.multiValue,isMulti:!0},d.createElement(x.Z,{value:1,icon:"search",metadata:"Metadata",onSelect:this._handleSelectMulti},"Option 1"),d.createElement(x.Z,{value:2,icon:"search",metadata:"Metadata",onSelect:this._handleSelectMulti},"Option 2"),d.createElement(x.Z,{value:3,icon:"search",metadata:"Metadata",onSelect:this._handleSelectMulti},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4,onSelect:this._handleSelectMulti},"Option 4"),d.createElement(x.Z,{value:5,onSelect:this._handleSelectMulti},"Option 5"))))},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Multi"}))),d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Sections"),d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.SMALL,value:this.state.value},d.createElement(pe.Z,null,d.createElement(_m.Z,null,"Section Header"),d.createElement(x.Z,{value:1,onSelect:this._handleSelect},"Option 1"),d.createElement(x.Z,{value:2,onSelect:this._handleSelect},"Option 2")),d.createElement(pe.Z,null,d.createElement(x.Z,{value:3,onSelect:this._handleSelect},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4,onSelect:this._handleSelect},"Option 4"),d.createElement(x.Z,{value:5,onSelect:this._handleSelect},"Option 5")))),d.createElement(pe.Z,null,!1))},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Sections"}))),d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Drop Left"),d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.SMALL,dropLeft:!0,value:this.state.value},d.createElement(x.Z,{value:1,onSelect:this._handleSelect},"Option 1"),d.createElement(x.Z,{value:2,onSelect:this._handleSelect},"Option 2"),d.createElement(x.Z,{value:3,onSelect:this._handleSelect},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4,onSelect:this._handleSelect},"Option 4"),d.createElement(x.Z,{value:5,onSelect:this._handleSelect},"Option 5",d.createElement(U.ZP,null,d.createElement(x.Z,{value:6,onSelect:this._handleSelect},"Option 6"),d.createElement(x.Z,{value:7,onSelect:this._handleSelect},"Option 7"))))))},d.createElement(O.Co,{buttonStyle:O.ZJ.PRIMARY,isDropdown:!0,size:O.qE.MEDIUM,text:"Drop Left"}))))),d.createElement(f.zV,null,"Toggle Types"),d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Select Dropdown"),d.createElement("div",{style:{width:"400px"}},d.createElement(w.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,value:this.state.value},d.createElement(x.Z,{value:1,onSelect:this._handleSelect},"Option 1"),d.createElement(x.Z,{value:2,onSelect:this._handleSelect},"Option 2"),d.createElement(x.Z,{value:3,onSelect:this._handleSelect},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4,onSelect:this._handleSelect},"Option 4"),d.createElement(x.Z,{value:5,onSelect:this._handleSelect},"Option 5")))),displayName:"Pick one..."}))),d.createElement(f.zV,null,"Sizes"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null),d.createElement(dm.Z,null,d.createElement(f.As,null,"Medium")),d.createElement(dm.Z,null,d.createElement(f.As,null,"Large")),d.createElement(dm.Z,null,d.createElement(f.As,null,"X-Large")))),d.createElement("tbody",null,Object.values(U.ZP.WIDTHS).map((e=>d.createElement("tr",{key:e},d.createElement(dm.Z,null,d.createElement(f.As,null,e)),Object.values(U.ZP.HEIGHTS).map((t=>d.createElement(dm.Z,{key:`${e}-${t}`},d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:t,width:e,value:this.state.value},d.createElement(x.Z,{value:1,onSelect:this._handleSelect},"Option 1"),d.createElement(x.Z,{value:2,onSelect:this._handleSelect},"Option 2"),d.createElement(x.Z,{value:3,onSelect:this._handleSelect},"Option 3",d.createElement(U.ZP,null,d.createElement(x.Z,{value:4,onSelect:this._handleSelect},"Option 4"),d.createElement(x.Z,{value:5,onSelect:this._handleSelect},"Option 5"))))},d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,isDropdown:!0,size:O.qE.SMALL,text:`${e} / ${t}`})))))))))))}}const Cm=DropdownGuidelines
var Rm=n(876542)
const Nm=[k.Z,Rm.Z],design_FieldInputGuidelines=()=>d.createElement("div",{className:"u-padding"},d.createElement("h1",null,"Field Inputs"),d.createElement("a",{href:"https://zpl.io/1VUxqv"},"Zeplin mocks"),d.createElement("div",{className:"u-large-spacing-top"},d.createElement("div",{className:"u-small-spacing-bottom"},"Field Inputs can take the following sizes and forms:"),d.createElement("table",null,d.createElement("tbody",null,d.createElement("tr",null,d.createElement(dm.Z,null),d.createElement(dm.Z,null,d.createElement("code",null,"Text")),d.createElement(dm.Z,null,d.createElement("code",null,"DateField"))),d.createElement("tr",null,d.createElement(dm.Z,null,"Field only"),Nm.map((e=>d.createElement(dm.Z,null,d.createElement(e,{placeholder:"Watermark",label:"Label",labelStyle:F.Z.STYLES.HIDDEN,onChange:e=>{console.log(e)}}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Field with label"),Nm.map((e=>d.createElement(dm.Z,null,d.createElement(e,{placeholder:"Watermark",label:"Label",labelStyle:F.Z.STYLES.LABEL,onChange:e=>{console.log(e)}}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Required field"),Nm.map((e=>d.createElement(dm.Z,null,d.createElement(e,{placeholder:"Watermark",label:"Required",labelStyle:F.Z.STYLES.LABEL,isRequired:!0,onChange:e=>{console.log(e)}}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Field with sublabel"),Nm.map((e=>d.createElement(dm.Z,null,d.createElement(e,{placeholder:"Watermark",label:"Sublabel",labelStyle:F.Z.STYLES.SUBLABEL,onChange:e=>{console.log(e)}}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Field with description"),Nm.map((e=>d.createElement(dm.Z,null,d.createElement(e,{placeholder:"Watermark",label:"Label",labelStyle:F.Z.STYLES.LABEL,description:"Description goes here",onChange:e=>{console.log(e)}}))))),d.createElement("tr",null,d.createElement(dm.Z,null,"Field with secondary button"),Nm.map((e=>d.createElement(dm.Z,null,d.createElement(e,{placeholder:"Watermark",label:"Label",labelStyle:F.Z.STYLES.LABEL,button:d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"CTA"}),onChange:e=>{console.log(e)}})))))))))
var Om=n(65301),bm=n(473491),vm=n(175703),Pm=n(562298),Lm=n(949382),Dm=n(844475),Mm=n(368425),wm=n(910692),Fm=n(109441),km=n(306419),Um=n(685504)
const xm={purpose:us.Fj},Bm={__typename:"ArchiveRecordNode",purpose:us.Fj}
var Zm=n(984152),qm=n(977989),Gm=n(863940),Vm=n(130153),Hm=n(407307),Wm=n(603968),Ym=n(162294)
Ym.Decimal.clone({precision:15})
n(18526)
function MockGraphQLProvider_makeTypesafeQueryMock({query:e,variables:t,data:n}){return{__typesafe:!0,request:{query:e,variables:t},result:{data:{__typename:"Query",...n}}}}var $m=n(689729)
const Km={__typename:"PermissionsNode",writable:!0},zm=[{action:oe.aU.READ,itemType:oe.qG.NOTEBOOK,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.LOCATION,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.OTHER,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.BIOENTITY,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.BATCH,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.FOLDER_OR_PROJECT,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.BOX,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.PLATE,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.CONTAINER,condition:oe.gP.ALWAYS}],Qm={id:"datapol_1",name:"Read",isDefault:!0,isAdmin:!1,isHidden:!1,policyStatements:zm,permissions:Km},jm=(oe.aU.APPEND,oe.qG.NOTEBOOK,oe.gP.ALWAYS,oe.aU.READ,oe.qG.NOTEBOOK,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.LOCATION,oe.gP.ALWAYS,oe.aU.READ,oe.qG.LOCATION,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.OTHER,oe.gP.ALWAYS,oe.aU.READ,oe.qG.OTHER,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.BIOENTITY,oe.gP.ALWAYS,oe.aU.READ,oe.qG.BIOENTITY,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.BATCH,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.BATCH,oe.gP.ALWAYS,oe.aU.READ,oe.qG.BATCH,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.FOLDER_OR_PROJECT,oe.gP.ALWAYS,oe.aU.READ,oe.qG.FOLDER_OR_PROJECT,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.BOX,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.BOX,oe.gP.ALWAYS,oe.aU.READ,oe.qG.BOX,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.PLATE,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.PLATE,oe.gP.ALWAYS,oe.aU.READ,oe.qG.PLATE,oe.gP.ALWAYS,oe.aU.READ,oe.qG.CONTAINER,oe.gP.ALWAYS,[{action:oe.aU.WRITE,itemType:oe.qG.NOTEBOOK,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.NOTEBOOK,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.NOTEBOOK,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.LOCATION,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.LOCATION,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.OTHER,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.OTHER,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.OTHER,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.BIOENTITY,condition:oe.gP.ALWAYS},{action:oe.aU.EDIT_POLYMER_FEATURES,itemType:oe.qG.BIOENTITY,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.BIOENTITY,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.BIOENTITY,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.BATCH,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.BATCH,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.BATCH,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.FOLDER_OR_PROJECT,condition:oe.gP.ALWAYS},{action:oe.aU.CREATE_SUBFOLDER,itemType:oe.qG.FOLDER_OR_PROJECT,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.FOLDER_OR_PROJECT,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.FOLDER_OR_PROJECT,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.BOX,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.BOX,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.BOX,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.PLATE,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.PLATE,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.PLATE,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.CONTAINER,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.CONTAINER,condition:oe.gP.ALWAYS}]),Jm={id:"datapol_2",name:"Write",isDefault:!1,isAdmin:!1,isHidden:!1,policyStatements:jm,permissions:Km},Xm=(oe.aU.ADMIN,oe.qG.NOTEBOOK,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.NOTEBOOK,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.NOTEBOOK,oe.gP.ALWAYS,oe.aU.READ,oe.qG.NOTEBOOK,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.LOCATION,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.LOCATION,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.LOCATION,oe.gP.ALWAYS,oe.aU.READ,oe.qG.LOCATION,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.OTHER,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.OTHER,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.OTHER,oe.gP.ALWAYS,oe.aU.READ,oe.qG.OTHER,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.BIOENTITY,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.BIOENTITY,oe.gP.ALWAYS,oe.aU.EDIT_POLYMER_FEATURES,oe.qG.BIOENTITY,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.BIOENTITY,oe.gP.ALWAYS,oe.aU.READ,oe.qG.BIOENTITY,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.BATCH,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.BATCH,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.BATCH,oe.gP.ALWAYS,oe.aU.READ,oe.qG.BATCH,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.FOLDER_OR_PROJECT,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.FOLDER_OR_PROJECT,oe.gP.ALWAYS,oe.aU.CREATE_SUBFOLDER,oe.qG.FOLDER_OR_PROJECT,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.FOLDER_OR_PROJECT,oe.gP.ALWAYS,oe.aU.READ,oe.qG.FOLDER_OR_PROJECT,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.BOX,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.BOX,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.BOX,oe.gP.ALWAYS,oe.aU.READ,oe.qG.BOX,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.PLATE,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.PLATE,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.PLATE,oe.gP.ALWAYS,oe.aU.READ,oe.qG.PLATE,oe.gP.ALWAYS,oe.aU.ADMIN,oe.qG.CONTAINER,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.CONTAINER,oe.gP.ALWAYS,oe.aU.READ,oe.qG.CONTAINER,oe.gP.ALWAYS,{id:"schempol_read",name:"Read",isHidden:!1,policyStatements:[{action:oe.aU.READ,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.REGISTRY,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.REGISTRY,condition:oe.gP.ALWAYS}],permissions:Km}),ep=(oe.aU.WRITE,oe.qG.SCHEMA,oe.gP.ALWAYS,oe.aU.READ,oe.qG.REGISTRY,oe.gP.ALWAYS,oe.aU.APPEND,oe.qG.REGISTRY,oe.gP.ALWAYS,oe.aU.WRITE,oe.qG.REGISTRY,oe.gP.ALWAYS,{id:"schempol_create",name:"Create",isHidden:!1,policyStatements:[{action:oe.aU.LIST_DEFINITION,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS},{action:oe.aU.CREATE,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS},{action:oe.aU.REGISTER,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS}],permissions:Km}),tp={id:"schempol_admin",name:"Admin",isHidden:!1,policyStatements:[{action:oe.aU.READ,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS},{action:oe.aU.ADMIN,itemType:oe.qG.SCHEMA,condition:oe.gP.ALWAYS},{action:oe.aU.READ,itemType:oe.qG.REGISTRY,condition:oe.gP.ALWAYS},{action:oe.aU.APPEND,itemType:oe.qG.REGISTRY,condition:oe.gP.ALWAYS},{action:oe.aU.WRITE,itemType:oe.qG.REGISTRY,condition:oe.gP.ALWAYS},{action:oe.aU.ADMIN,itemType:oe.qG.REGISTRY,condition:oe.gP.ALWAYS}],permissions:Km}
oe.qG.OTHER,MockGraphQLProvider_makeTypesafeQueryMock({query:Ct.qb,data:{schemaPolicyListing:{__typename:"SchemaPolicyListingNode",schemaPolicies:[{...Xm,__typename:"SchemaPolicyNode",policyStatements:[],permissions:Km},{...ep,__typename:"SchemaPolicyNode",policyStatements:[],permissions:Km},{...tp,__typename:"SchemaPolicyNode",policyStatements:[],permissions:Km}]}},variables:{limitOffsetInput:{limit:3,offset:0}}}),MockGraphQLProvider_makeTypesafeQueryMock({query:$m.TC,data:{parties:[]},variables:{ids:[]}})
var np=n(317275)
const ap={__typename:"OrganizationNode",admin:!0,adminGrantsTenantAdmin:!0,allowNonadminsToSetOrgToOwnableOwner:!0,autoEnablePlan:null,autoProvisionedCapabilities:[],avatar_url:"/static/img/no_avatar.jpg",disablePersonalOwnables:!1,defaultOwnableMemberDataPolicyId:Jm.id,disablePublic:!0,email:"org@benchling.com",enableAdminView:!0,handle:"org-handle",id:"ent_ORG_API_ID",institution:null,joinedOn:"2016-11-21T22:25:39.236826+00:00",location:"san francisco",member:!0,name:"test org name",type:"organization",url_identifier:"test_org_name",urlIdentifier:"test_org_name",website:"https://wwww.website.com",permissions:{manageRoles:!0}}
Js.Plan.ELN_PRO,(0,np.Z)(ap,"id","name","handle","url_identifier","admin","member","avatar_url","disablePersonalOwnables","email","disablePublic"),Rt.l.RUN,Rt.l.ENTITY,Js.OrganizationPermissionRole.ADMIN
const ip={__typename:"UserNode",academic:!1,avatar_url:"/static/img/no_avatar.jpg",avatar_url_50:"/static/img/no_avatar.jpg",email:"otheruser@benchling.com",handle:"otherUser",id:"ent_zEKfIFZs",institution:null,isTenantAdmin:!1,joinedOn:"2016-09-20T22:00:29.743158+00:00",name:"Richard Feynman",proclaimed:wu.hc.COMMERCIAL,status:null,suspended:!1,type:"user",url_identifier:"otheruser"},rp=(ip.id,ip.handle,ip.avatar_url,"AEinstein"),sp="ent_Amnvo2nv",op="Albert Einstein"
wu.hc.COMMERCIAL,wu.hc.COMMERCIAL,wu.hc.COMMERCIAL,ip.id,ip.handle,ip.name,yt.El.USER,yt.El.USER,ip.id,ip.handle,ip.name,yt.El.USER,ip.id,ip.handle,ip.name,yt.El.USER,yt.El.TEAM,yt.El.TEAM,yt.El.TEAM,yt.El.ORGANIZATION,ip.id,ip.handle,ip.name,yt.El.USER,yt.El.USER,yt.El.TEAM,yt.El.ORGANIZATION
function getLegacyRESTPermissions(e){const t=(0,ql.Z)(e,"__typename")
return{...t,...(0,St.m8)(Object.entries(t).map((([e,t])=>[e,Boolean(t)])))}}getLegacyRESTPermissions({__typename:"PermissionsNode",admin:!1,appendable:!0,archivable:!0,canEditNamesAndAliases:!0,deletable:!0,movable:null,polymerFeaturesEditable:!0,polymerResiduesEditable:!0,readable:!0,registryIdsChangeable:!0,unarchivable:!1,unregisterable:!0,writable:!0})
const lp={readable:!0,writable:!0,appendable:!0,admin:!0,definitionEditable:!0},cp={__typename:"PermissionsNode",admin:!1,appendable:!0,archivable:!0,batchesWritable:!0,bioentitiesAppendable:!0,canCreateRequest:!0,deletable:!0,locationsCreatable:!1,movable:!1,owner:!0,readable:!0,subfolderCreatable:!0,unarchivable:!1,writable:!0},dp=getLegacyRESTPermissions(cp),up={...lp,definitionEditable:!0,objectsCreatable:!0,objectsRegisterable:!0},mp={archiveRecord:null,id:1,dbId:1,apiId:"tsf_111",name:"my_count",systemName:"my_count",displayName:"My Count",fieldType:wo.FieldType.INTEGER,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,schemaFieldSelectorId:null,requiredLink:null,description:null},pp={id:2,dbId:2,apiId:"tsf_112",name:"my_number",systemName:"my_number",displayName:"My Number",fieldType:wo.FieldType.INTEGER,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,schemaFieldSelectorId:null,requiredLink:null,archiveRecord:{purpose:"Archived"}},hp=(wo.FieldType.BOOLEAN,wo.FieldType.DATETIME,wo.FieldType.JSON,wo.FieldType.BATCH_LINK,wo.FieldType.ENTRY_LINK,wo.FieldType.ASSAY_RUN_LINK,{automationOutputFileConfigs:[],automationInputFileConfigs:[],robotInstructionsConfig:null,allowCreateRunFromNlad:!0,allowInsertRunFromInbox:!0,permissions:up,connectionSchema:null}),Ep={...hp,id:"assaysch_1",name:"Flow Cytometry Run",requestTaskSchemaIds:[],derivedParent:null,sampleGroupSchema:null,sqlIdentifier:"flow_cytometry_run",schemaType:Xo.aJ.ASSAY_RUN,organization:ap,allFields:[mp],fields:[mp],publishedDataTableColumns:null,archiveRecord:null,prefix:"",requestTemplateIds:[],automationOutputFileConfigs:[],automationInputFileConfigs:[],robotInstructionsConfig:null,allowInsertRunFromInbox:!0,allowCreateRunFromNlad:!0},Sp={automationInputFileConfigsJson:[],automationOutputFileConfigsJson:[],robotInstructionsConfigJson:null,allowCreateRunFromNlad:!0,allowInsertRunFromInbox:!0,currentUserPermissionsJson:up,connectionSchema:null},Tp=(Xo.aJ.ASSAY_RUN,Xo.aJ.ASSAY_RUN,Xo.aJ.ASSAY_RUN,{assaysch_1:Ep,assaysch_2:{...hp,id:"assaysch_2",name:"Cell Sample Prep Run",requestTaskSchemaIds:[],derivedParent:null,sampleGroupSchema:null,sqlIdentifier:"cell_sample_prep_run",schemaType:Xo.aJ.ASSAY_RUN,organization:ap,allFields:[],fields:[],publishedDataTableColumns:null,archiveRecord:null,prefix:"",requestTemplateIds:[]},assaysch_3:{...hp,id:"assaysch_3",name:"NGS Run",requestTaskSchemaIds:[],derivedParent:null,sampleGroupSchema:null,sqlIdentifier:"ngs_run",schemaType:Xo.aJ.ASSAY_RUN,organization:ap,allFields:[],fields:[],publishedDataTableColumns:null,archiveRecord:null,prefix:"",requestTemplateIds:[]},assaysch_4:{id:"assaysch_4",name:"Flow Cytometry Result",requestTaskSchemaIds:[],derivedParent:null,sampleGroupSchema:null,sqlIdentifier:"flow_cytometry_result",schemaType:Xo.aJ.ASSAY_RESULT,organization:ap,allFields:[],fields:[],publishedDataTableColumns:null,archiveRecord:null,prefix:"",requestTemplateIds:[],permissions:up}}),gp={id:"assaysch_result_1",name:"Result Schema 1",requestTaskSchemaIds:[],derivedParent:null,sampleGroupSchema:null,sqlIdentifier:"an_ending",schemaType:Xo.aJ.ASSAY_RESULT,organization:ap,allFields:[],fields:[],publishedDataTableColumns:null,archiveRecord:null,prefix:"",requestTemplateIds:[],permissions:up},fp=(Xo.aJ.ASSAY_RESULT,{__typename:"ResultSchemaNode",id:"assaysch_result_1",name:"Result Schema 1",derivedParent:null,sqlIdentifier:"an_ending",schemaType:Xo.aJ.ASSAY_RESULT,organizationJson:ap,allFieldsJson:[],fieldsJson:[],publishedDataTableColumnsJson:null,archiveRecord:null,currentUserPermissionsJson:up}),Ip={...hp,id:"assaysch_run_1",name:"Run Schema 1",requestTaskSchemaIds:[],derivedParent:null,sampleGroupSchema:null,sqlIdentifier:"overdue",schemaType:Xo.aJ.ASSAY_RUN,organization:ap,allFields:[],fields:[],publishedDataTableColumns:null,archiveRecord:null,requestTemplateIds:[],prefix:"",permissions:up}
Xo.aJ.ASSAY_RUN,Xo.aJ.ASSAY_RESULT,Xo.aJ.ASSAY_RUN
var Ap=n(328712),yp=n(579298)
Um.ZP.oneof(...Object.keys(Rt.FF).map((e=>Um.ZP.constant(Rt.FF[e]))))
const _p={...{archived:!1,archiveRecord:null,areSettingsAdminOnly:!1,createdAt:"2016-11-08T19:05:48.402226+00:00",creator:ip,disablePersonalCollections:!0,useStrictValidation:!0,hidden:!1,id:"src_IIHi0wVy",locked:!1,modifiedAt:"2016-11-08T19:06:30.258610+00:00",name:"Enterprise Registry",ownerInfo:{memberDataPolicyId:Jm.id,type:"organization"},public:!1,alwaysShowAncestorFolderNames:!0,rootFolder:{archiveRecord:null,api_identifier:"lib_Tsur0TI6",created_at:"2016-11-08T19:05:48.402226+00:00",description:null,id:23,dbId:23,name:"Enterprise Registry",owner:{avatar_url:"/static/img/no_avatar.jpg",handle:"testOrg",id:"ent_6AF4sRH3",institution:null,joinedOn:"2016-11-08T19:05:41.247326+00:00",name:"testOrg",type:"organization",url_identifier:"testorg"},owner_handle:"testOrg",owner_url:"/testorg/",owner_url_identifier:"testorg",parent:null,type:"ALL",url:"/testorg/f_/Tsur0TI6-enterprise-registry/"},s_owner:ap,sourceType:"registry",starred:!1,url:"/testorg/f_/Tsur0TI6-enterprise-registry/"},collaborators:[ip],description:null,permissions:dp,...dp},Cp=[{api_identifier:"lib_LL2mWCBC",created_at:"2016-11-08T19:05:48.402226+00:00",description:null,id:22,dbId:22,name:"Enterprise Registry",owner:{avatar_url:"/static/img/no_avatar.jpg",handle:"benchling",id:"ent_9vbEqh2J",institution:null,joinedOn:"2016-11-08T19:05:41.189484+00:00",name:"Benchling Lab",type:"organization",url_identifier:"benchling"},owner_handle:"benchling",owner_url:"/benchling/",owner_url_identifier:"benchling",parent:null,source:_p,type:"ALL",url:"/testorg/f_/Tsur0TI6-enterprise-registry/"}],Rp=(Aa()(_p,{permissions:{admin:{$set:!0},locationsCreatable:{$set:!0}}}),_p.rootFolder,_p.rootFolder.api_identifier,Cp[0].source,{__typename:"RegistryNode",archived:!1,archiveRecord:null,areSettingsAdminOnly:!1,createdAt:"2016-11-08T19:05:48.402226+00:00",creatorJson:ip,disablePersonalCollections:!0,useStrictValidation:!0,hidden:!1,id:"src_IIHi0wVy",locked:!1,modifiedAt:"2016-11-08T19:06:30.258610+00:00",name:"Enterprise Registry",ownerInfoJson:{memberDataPolicyId:Jm.id,type:"organization"},public:!1,alwaysShowAncestorFolderNames:!0,rootFolder:{__typename:"FolderNode",archiveRecord:null,id:"lib_Tsur0TI6",createdAt:"2016-11-08T19:05:48.402226+00:00",description:null,dbId:23,name:"Enterprise Registry",ownerJson:{avatar_url:"/static/img/no_avatar.jpg",handle:"testOrg",id:"ent_6AF4sRH3",institution:null,joinedOn:"2016-11-08T19:05:41.247326+00:00",name:"testOrg",type:"organization",url_identifier:"testorg"},ownerUrl:"/testorg/",parentFolders:[],type:"ALL",url:"/testorg/f_/Tsur0TI6-enterprise-registry/"},ownerJson:ap,sourceType:"registry",starred:!1,url:"/testorg/f_/Tsur0TI6-enterprise-registry/"}),Np={...Rp,collaboratorsJson:[ip],description:null,permissions:{...cp,admin:!1,locationsCreatable:!1}}
Aa()(Np,{permissions:{admin:{$set:!0},locationsCreatable:{$set:!0}}})
function deepFreezeObject(e){if("object"!=typeof e||null==e)return e
if(Array.isArray(e))return Object.freeze(e.map((e=>deepFreezeObject(e))))
const t={}
for(const[n,a]of Object.entries(e))t[n]=deepFreezeObject(a)
return Object.freeze(t)}const Op=deepFreezeObject({prefix:"w",registryId:_p.id,name:"Well",allFields:[],fields:[],id:"consch_2v2WzY5S",iconId:"vial",archiveRecord:null,sqlIdentifier:"well"}),bp=(deepFreezeObject((0,Ai.s2)("ContainerSchema",Op)),deepFreezeObject({archiveRecord:null,fieldType:wo.FieldType.TEXT,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,id:11,dbId:11,apiId:"tsf_123",schemaFieldSelectorId:null,name:"vial assay",systemName:"vial_assay",displayName:"vial assay"})),vp=deepFreezeObject({archiveRecord:null,fieldType:wo.FieldType.TEXT,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,id:12,dbId:12,apiId:"tsf_234",schemaFieldSelectorId:null,name:"vial volume",systemName:"vial_volume",displayName:"vial volume"}),Pp=deepFreezeObject({archiveRecord:null,fieldType:wo.FieldType.SELECTOR,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!0,id:25,dbId:25,apiId:"tsf_345",requiredLink:null,schemaFieldSelectorId:"sfs_r1dU5DTZ",name:"Dropdown",systemName:"dropdown",displayName:"Dropdown"}),Lp=deepFreezeObject({prefix:"V",registryId:_p.id,name:"Vial",allFields:[bp,vp,Pp],fields:[bp,vp,Pp],id:"consch_E82zj1xB",iconId:"vial",archiveRecord:null,sqlIdentifier:"vial"}),Dp=deepFreezeObject((0,Ai.s2)("ContainerSchema",Lp)),Mp=deepFreezeObject({archiveRecord:null,fieldType:wo.FieldType.TEXT,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,id:13,dbId:13,apiId:"tsf_12a",schemaFieldSelectorId:null,name:"tube mass",systemName:"tube_mass",displayName:"tube mass"}),wp=deepFreezeObject({archiveRecord:null,fieldType:wo.FieldType.TEXT,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,id:14,dbId:14,apiId:"tsf_12b",schemaFieldSelectorId:null,name:"tube intensity",systemName:"tube_intensity",displayName:"tube intensity"}),Fp=deepFreezeObject({archiveRecord:null,iconId:"vial",id:"consch_MQ6ZYOql",name:"Tube",prefix:"T",registryId:_p.id,sqlIdentifier:"tube"}),kp=deepFreezeObject({...Fp,allFields:[Mp,wp],fields:[Mp,wp]}),Up=(deepFreezeObject((0,Ai.s2)("ContainerSchema",kp)),deepFreezeObject({...Lp,archiveRecord:{purpose:"Made in error"}}),deepFreezeObject({...Dp,archiveRecord:Bm}),deepFreezeObject(ue.default.sortBy([kp,Lp,Op],"name"))),xp=(deepFreezeObject((0,Ai.T2)("ContainerSchema",Up)),Ap.S(yp.a9(Op),yp.a9(Lp),yp.a9(kp)),{name:"val1",assaySchemaName:null,fieldPath:null,literalValue:"LITERALLY",property:wo.ComputedFieldPropertyType.LITERAL})
var Bp=n(335609)
const Zp=[Vt.LabelingStrategy.NEW_IDS,Vt.LabelingStrategy.IDS_FROM_NAMES,Vt.LabelingStrategy.DELETE_NAMES],qp={...lp,definitionEditable:!0,objectsCreatable:!0,objectsRegisterable:!0},Gp={archiveRecord:null,folderItemType:_e.BASIC_FOLDER_ITEM,iconId:"bacteria",id:"ts_mvfiNbmK",name:"Strain",sequenceType:null,shouldCreateAsOligo:!1,sqlIdentifier:"strain"},Vp={...Gp,authParentOption:Vt.AuthParentOption.FOLDER,batchSchemaId:null,childEntitySchemaSummaries:[],constraint:null,constraints:[],containableType:Vt.TagSchemaContainableType.NONE,allFields:[],fields:[],hoistedTagSchemaGraphs:[],includeRegistryIdInChips:!1,isContainable:!1,labelingStrategies:Zp,mixtureSchemaConfig:null,nameTemplateFields:[],nameTemplateParts:[],prefix:"s",registryId:"src_1rD5UL0w",resultSchema:null,shouldOrderNamePartsBySequence:!1,showResidues:!1,useRandomOrgAlias:!1,useOrganizationCollectionAliasForDisplayLabel:!1,permissions:qp},Hp=((0,Ai.s2)("TagSchema",Vp),Vt.TagSchemaContainableType.BATCH,{allFields:[],archiveRecord:null,authParentOption:Vt.AuthParentOption.FOLDER,batchSchemaId:null,childEntitySchemaSummaries:[],constraint:{areUniqueResiduesCaseSensitive:!1,id:2,fields:[],status:Rt.tX.ACTIVE,uniqueResidues:!0,uniqueCanonicalSmiles:!1,source:null},constraints:[{areUniqueResiduesCaseSensitive:!1,id:2,fields:[],status:Rt.tX.ACTIVE,uniqueResidues:!0,uniqueCanonicalSmiles:!1,source:null}],containableType:Vt.TagSchemaContainableType.ENTITY,fields:[],folderItemType:"protein",hoistedTagSchemaGraphs:[],iconId:"protein",id:"ts_2uWT9kUH",includeRegistryIdInChips:!1,isContainable:!0,labelingStrategies:[Vt.LabelingStrategy.KEEP_NAMES,Vt.LabelingStrategy.NEW_IDS],mixtureSchemaConfig:null,name:"Chain",nameTemplateFields:[],nameTemplateParts:[],prefix:"M",registryId:"src_Y4EXiECr",resultSchema:null,sequenceType:null,shouldCreateAsOligo:!1,shouldOrderNamePartsBySequence:!1,showResidues:!1,sqlIdentifier:"chain",useOrganizationCollectionAliasForDisplayLabel:!1,useRandomOrgAlias:!0,permissions:qp}),Wp=((0,Ai.s2)("TagSchema",Hp),{allFields:[],archiveRecord:null,authParentOption:Vt.AuthParentOption.FOLDER,batchSchemaId:null,childEntitySchemaSummaries:[],constraint:null,constraints:[],containableType:Vt.TagSchemaContainableType.NONE,fields:[],folderItemType:"basic_folder_item",hoistedTagSchemaGraphs:[],iconId:"notdef",id:"foobar",includeRegistryIdInChips:!1,isContainable:!1,labelingStrategies:Zp,mixtureSchemaConfig:null,name:"foobar",nameTemplateFields:[],nameTemplateParts:[],prefix:"foobar",registryId:"foobar",resultSchema:null,sequenceType:null,shouldCreateAsOligo:!1,shouldOrderNamePartsBySequence:!1,showResidues:!1,sqlIdentifier:"foobar",useOrganizationCollectionAliasForDisplayLabel:!1,useRandomOrgAlias:!1,permissions:qp}),Yp=(_e.ENTRY,fm.m.Entry,{archiveRecord:null,authParentOption:Vt.AuthParentOption.FOLDER,batchSchemaId:null,childEntitySchemaSummaries:[],constraint:null,constraints:[],containableType:Vt.TagSchemaContainableType.NONE,allFields:[],fields:[],folderItemType:_e.ENTRY,hoistedTagSchemaGraphs:[],iconId:fm.m.Entry,id:"ts_zItHFFpc",includeRegistryIdInChips:!1,isContainable:!1,labelingStrategies:Zp,mixtureSchemaConfig:null,name:"QC Entry",nameTemplateFields:[],nameTemplateParts:[],prefix:"qc",registryId:"src_2K7OuOWF",resultSchema:null,sequenceType:null,shouldCreateAsOligo:!1,shouldOrderNamePartsBySequence:!1,showResidues:!1,sqlIdentifier:"qc_entry",useRandomOrgAlias:!0,useOrganizationCollectionAliasForDisplayLabel:!1,permissions:qp}),$p={id:32,dbId:32,apiId:"tsf_123",fieldType:wo.FieldType.TEXT,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,name:"Cat",displayName:"Cat",systemName:"cat",requiredLink:null,schemaFieldSelectorId:null,archiveRecord:null,description:null},Kp={id:33,dbId:33,apiId:"tsf_234",fieldType:wo.FieldType.TEXT,name:"Status",displayName:"Status",systemName:"status",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,archiveRecord:null,description:null},zp=(wo.FieldType.TEXT,{id:35,dbId:35,apiId:"tsf_SDj19skx",fieldType:wo.FieldType.LONG_TEXT,name:"Description",displayName:"Description",systemName:"description",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,archiveRecord:null}),Qp={id:24,apiId:"tsf_abDSlx22z",dbId:24,fieldType:wo.FieldType.INTEGER,name:"my_count",displayName:"My Count",systemName:"my_count",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,archiveRecord:null},jp={id:224,apiId:"tsf_abDSlx22z",dbId:224,fieldType:wo.FieldType.INTEGER,name:"my_count_2",displayName:"My Count 2",systemName:"my_count_2",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,archiveRecord:null},Jp=(wo.FieldType.INTEGER,{id:34,apiId:"tsf_NvMrc3y7",dbId:34,fieldType:wo.FieldType.FLOAT,name:"Temperature",displayName:"Temperature",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,systemName:"temperature",archiveRecord:null,description:null}),Xp={id:199,apiId:"tsf_float2",dbId:199,fieldType:wo.FieldType.FLOAT,name:"Temperature",displayName:"Temperature",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,systemName:"temperature",archiveRecord:null},eh={id:212,apiId:"tsf_float2",dbId:212,fieldType:wo.FieldType.FLOAT,name:"Temperature",displayName:"Temperature",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,systemName:"temperature",archiveRecord:{purpose:"made in error"}},th={id:34,apiId:"tsf_BaYwxi29",dbId:34,fieldType:wo.FieldType.DATE,name:"Expiration Date",displayName:"Expiration Date",systemName:"expiration_date",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,archiveRecord:null},nh=(wo.FieldType.DATETIME,wo.FieldType.BIOENTITY_LINK,{id:36,apiId:"tsf_jel1lsys",dbId:36,fieldType:wo.FieldType.BIOENTITY_LINK,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!0,name:"Strain",displayName:"Strain",systemName:"strain",requiredLink:{tagSchema:Vp,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null},schemaFieldSelectorId:null,archiveRecord:null}),ah={id:37,apiId:"tsf_jel1lsyt",dbId:37,fieldType:wo.FieldType.BIOENTITY_LINK,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!0,name:"Plasmid 2",displayName:"Plasmid 2",systemName:"plasmid_2",requiredLink:{tagSchema:Vp,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null},schemaFieldSelectorId:null,archiveRecord:null},ih=(wo.FieldType.BIOENTITY_LINK,wo.FieldType.BIOENTITY_LINK,wo.FieldType.BIOENTITY_LINK,{fieldType:wo.FieldType.PART_LINK,id:7,apiId:"tsf_tesISLms",dbId:7,name:"Resistance",displayName:"Resistance",systemName:"resistance",isMulti:!0,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,requiredLink:{tagSchema:{folderItemType:"sequence",iconId:fm.m.Sequence,id:"ts_9oChXdm8",name:"Part Link Resistance",sqlIdentifier:"part_link_resistance",sequenceType:Rt.Ts.DNA_SEQUENCE,shouldCreateAsOligo:!1},folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null},schemaFieldSelectorId:null,archiveRecord:null}),rh={id:"intrfc_In9CyCpP",name:"Schema Interface",archiveRecord:null},sh=(wo.FieldType.BIOENTITY_LINK,{name:"Strain",tagSchemaField:nh,targetFiles:[{url:"/testorg/f/PBDXljD0-enterprise-registry/bfi-teststrain/edit",id:"seq_teststrain",name:"Test strain"}],targetFileTagSchemaId:"ts_9oChXdm8",url:"",value:""}),oh=(wo.FieldType.BIOENTITY_LINK,wo.FieldType.BIOENTITY_LINK,Rt.Ts.DNA_SEQUENCE,wo.FieldType.TRANSLATION_LINK,fm.m.Sequence,Rt.Ts.RNA_SEQUENCE,wo.FieldType.TRANSCRIPTION_LINK,wo.FieldType.BATCH_LINK,{archiveRecord:null,fileTypeName:"Strain",id:"batsch_uyS3GhHV",sqlIdentifier:"strain$batch",name:"Strain Batch",namingScheme:qc.g2.BIOENTITY_NAME,tagSchemaId:"ts_Fonllcne",allFields:[],fields:[],hidden:!1}),lh=(wo.FieldType.BATCH_LINK,{fieldType:wo.FieldType.BATCH_LINK,id:50,apiId:"tsf_baXlinks",dbId:50,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,name:"batch link",displayName:"batch link",systemName:"batch_link",requiredLink:{batchSchema:oh,batchSchemaGraph:{id:4,edges:[{from:{folderItemType:"basic_folder_item",id:"ts_Fonllcne",name:"Strain"},id:2,apiId:"tsf_abc",name:"edge2",systemName:"edge2",to:{folderItemType:"sequence",id:"ts_WudDIIU3",name:"Plasmid"}}]}},schemaFieldSelectorId:null,archiveRecord:null}),ch={fieldType:wo.FieldType.STORABLE_LINK,id:71,apiId:"tsf_sto1FBls",dbId:71,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,name:"storable link",displayName:"storable link",systemName:"storable_link",isMulti:!0,requiredLink:{storableSchema:Fp},schemaFieldSelectorId:null,archiveRecord:null},dh=(_p.id,wo.FieldType.STORABLE_LINK,wo.FieldType.STORABLE_LINK,wo.FieldType.STORABLE_LINK,wo.FieldType.STORABLE_LINK,wo.FieldType.BLOB_LINK,{id:"8ea7dd7a-4242-a7c4-8d88-164728562755",name:"file1.json",link_type:"result_blob",url:"/results/blobs/8ea7dd7a-4242-a7c4-8d88-164728562755/s3-url",previewFile:null,pdfPreviewFile:null,uploadStatus:Wm.V.COMPLETE}),uh=((0,Bp.Z)(dh,"id","name","url"),Wm.V.COMPLETE,Zm.g.IMAGE,Wm.V.ABORTED,{id:"9da6dc0d-313f-4652-a7cc-525475840632",name:"image1.png",url:"/results/blobs/9da6dc0d-313f-4652-a7cc-525475840632/s3-url",link_type:"result_blob",previewFile:{id:"efl_ds8f99sd8f",previewType:Zm.g.IMAGE,url:"https://www.benchling.com/wp-content/uploads/2019/04/Benchling-Preview.png",availablePreviewTypes:["image"]},pdfPreviewFile:null,uploadStatus:Wm.V.COMPLETE}),mh=(Zm.g.IMAGE,Wm.V.COMPLETE,Zm.g.PDF,Wm.V.COMPLETE,Zm.g.PDF,Wm.V.COMPLETE,{...Vp,mixtureSchemaConfig:{allowMeasuredIngredients:!1,componentLotStorageEnabled:null,componentLotTextEnabled:null},folderItemType:_e.MIXTURE,id:"ts_Rp9WDsPQ",name:"Media Recipe",sqlIdentifier:"media_recipe",iconId:fm.m.Mixture,prefix:"MR"}),ph=((0,Ai.s2)("TagSchema",mh),{...Yp,fields:[th,$p,Qp],allFields:[th,$p,Qp]}),hh=((0,Ai.s2)("TagSchema",ph),{...Vp,folderItemType:_e.MOLECULE,id:"ts_apw8DsCQ",name:"Molecule schema",sqlIdentifier:"molecule_schema",iconId:fm.m.Molecule,prefix:"MOL"}),Eh=((0,Ai.s2)("TagSchema",hh),{...nh,isParentLink:!0,requiredLink:{tagSchema:mh,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null}}),Sh={...Vp,folderItemType:_e.MIXTURE,mixtureSchemaConfig:{allowMeasuredIngredients:!0,componentLotTextEnabled:!0,componentLotStorageEnabled:!1},isContainable:!0,id:"ts_PREP1234",name:"Media Prep",sqlIdentifier:"media_prep",iconId:fm.m.Mixture,prefix:"MP",allFields:[Eh],fields:[Eh]},Th={id:"sfso_1",name:"option 1",archiveRecord:null},gh={...(0,Bp.Z)(Th,"id","name"),__typename:"SchemaFieldSelectorOptionNode",archiveRecord:null},fh={id:"sfso_2",name:"option 2",archiveRecord:null},Ih={...(0,Bp.Z)(fh,"id","name"),__typename:"SchemaFieldSelectorOptionNode",archiveRecord:null},Ah={id:"sfso_3",name:"option 3",archiveRecord:null},yh={...(0,Bp.Z)(Ah,"id","name"),__typename:"SchemaFieldSelectorOptionNode",archiveRecord:null},_h={id:"sfso_4",name:"option 4",archiveRecord:null},Ch={...(0,Bp.Z)(_h,"id","name"),__typename:"SchemaFieldSelectorOptionNode",archiveRecord:null},Rh={id:"sfso_5",name:"option 5",archiveRecord:xm},Nh={...(0,Bp.Z)(Rh,"id","name"),__typename:"SchemaFieldSelectorOptionNode",archiveRecord:Bm},Oh={id:"sfs_r1dU5DTZ",archiveRecord:null,name:"selector 1",schemaFieldSelectorOptions:[Th,fh],allSchemaFieldSelectorOptions:[Th,fh]},bh={...(0,Bp.Z)(Oh,"id","name"),__typename:"SchemaFieldSelectorNode",archiveRecord:null,schemaFieldSelectorOptions:[gh,Ih],allSchemaFieldSelectorOptions:[gh,Ih]},vh={id:"sfs_hVbC86OO",archiveRecord:null,name:"selector 2",schemaFieldSelectorOptions:[Ah,_h],allSchemaFieldSelectorOptions:[Ah,_h]},Ph=((0,Bp.Z)(vh,"id","name"),{id:"sfs_r1dUwe2Z",archiveRecord:xm,name:"archived selector",schemaFieldSelectorOptions:[Th,fh],allSchemaFieldSelectorOptions:[Th,fh]}),Lh=((0,Bp.Z)(Ph,"id","name"),{id:"sfs_r1dU5DTZ",archiveRecord:null,name:"selector 1",schemaFieldSelectorOptions:[Th],allSchemaFieldSelectorOptions:[Th,Rh]}),Dh=((0,Bp.Z)(Lh,"id","name"),bh.id,{id:32,apiId:"tsf_sFls0lem",dbId:32,fieldType:wo.FieldType.SELECTOR,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!0,name:"Resistance Gene",displayName:"Resistance Gene",systemName:"resistance_gene",requiredLink:null,schemaFieldSelectorId:vh.id,archiveRecord:null}),Mh=(wo.FieldType.SELECTOR,wo.FieldType.FLOAT,{id:33,apiId:"tsf_c0Mpwkst",dbId:33,fieldType:wo.FieldType.FLOAT,isRequired:!1,isComputed:!0,isConvertedFromLink:!1,isIntegration:!1,isSnapshot:!1,isParentLink:!1,isMulti:!1,name:"Molecular Weight",displayName:"Molecular Weight",systemName:"molecular_weight",requiredLink:null,schemaFieldSelectorId:null,dependencies:[xp],formulaName:"identity_fn",archiveRecord:null}),wh=(wo.FieldType.TEXT,qm.q.SUCCEEDED,qm.q.PENDING,qm.q.FAILED,{iconId:fm.m.Sequence,id:"ts_AawxP6Js",name:"Plasmid",archiveRecord:null,folderItemType:"sequence",sequenceType:Rt.Ts.DNA_SEQUENCE,sqlIdentifier:"plasmid",shouldCreateAsOligo:!1}),Fh={...wh,authParentOption:Vt.AuthParentOption.FOLDER,batchSchemaId:null,childEntitySchemaSummaries:[],constraint:null,constraints:[],containableType:Vt.TagSchemaContainableType.NONE,allFields:[$p],fields:[$p],hoistedTagSchemaGraphs:[],iconId:fm.m.Sequence,includeRegistryIdInChips:!1,isContainable:!1,labelingStrategies:Zp,mixtureSchemaConfig:null,nameTemplateFields:[],nameTemplateParts:[],prefix:"p",registryId:"src_1rD5UL0w",resultSchema:null,showResidues:!1,shouldCreateAsOligo:!1,shouldOrderNamePartsBySequence:!1,sqlIdentifier:"plasmid",useRandomOrgAlias:!1,useOrganizationCollectionAliasForDisplayLabel:!1,permissions:qp},kh={...Fh,batchSchemaId:"batsch_12345",childEntitySchemaSummaries:[wh]},Uh=(ue.default.omit(kh,"allFields","archiveRecord","batchSchemaId","childEntitySchemaSummaries","registryId","fields","hoistedTagSchemaGraphs","resultSchema","permissions"),ue.default.omit(wh,"archiveRecord"),Fh),xh=((0,Ai.s2)("TagSchema",Uh),{...Uh,id:"ts_mIxEd",sequenceType:Vt.SequenceSchemaType.MIXED}),Bh={...Uh,name:"mRNA",id:"ts_mRnA",sequenceType:Vt.SequenceSchemaType.RNA_SEQUENCE,sqlIdentifier:"mrna"},Zh=((0,Ai.s2)("TagSchema",Bh),{...Uh,name:"Primer",id:"ts_oLiGO",sequenceType:Vt.SequenceSchemaType.OLIGO,sqlIdentifier:"primer"}),qh=((0,Ai.s2)("TagSchema",Zh),{...Uh,name:"CRISPR Guide",id:"ts_rNaol",sqlIdentifier:"crispr_guide",sequenceType:Vt.SequenceSchemaType.RNA_OLIGO}),Gh=((0,Ai.s2)("TagSchema",qh),{...Uh,name:"Primer",id:"ts_oLiGo",sequenceType:Vt.SequenceSchemaType.MIXED,shouldCreateAsOligo:!0}),Vh=((0,Ai.s2)("TagSchema",Gh),Vt.AuthParentOption.FOLDER,Vt.TagSchemaContainableType.NONE,fm.m.Sequence,Vt.LabelingStrategy.SET_FROM_NAME_PARTS,Rt.d$.FIELD,Vt.SequenceSchemaType.OLIGO,{id:54,apiId:"tsf_enLSINkwD",dbId:54,fieldType:wo.FieldType.ENTRY_LINK,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!0,name:"Entry",displayName:"Entry",systemName:"entry",requiredLink:{tagSchema:Fh,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null},schemaFieldSelectorId:null,archiveRecord:null}),Hh=(wo.FieldType.ASSAY_RUN_LINK,wo.FieldType.ASSAY_REQUEST_LINK,wo.FieldType.ASSAY_RESULT_LINK,wo.FieldType.JSON,{id:84,apiId:"tsf_DtWaRL64",dbId:84,fieldType:wo.FieldType.BOOLEAN,name:"boolean",displayName:"Boolean",isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1,isMulti:!1,requiredLink:null,schemaFieldSelectorId:null,systemName:"boolean",archiveRecord:null}),Wh={...Vp,id:"ts_CONTANBL",name:"Containable Strain",isContainable:!0,containableType:Vt.TagSchemaContainableType.ENTITY},Yh=((0,Ai.s2)("TagSchema",Wh),{...Vp,id:"ts_COOLCONT",name:"My Cool Containable",isContainable:!0,containableType:Vt.TagSchemaContainableType.ENTITY}),$h=((0,Ai.s2)("TagSchema",Yh),{...$p,name:"Accuracy",isRequired:!0,displayName:"Accuracy"}),Kh=(Vm.d,{numPassed:10,numFailed:5,numOverridden:3,numValidating:1}),zh={numConstraintViolation:1,numInvalidLink:2,numInvalidMultipleLink:3,numInvalidValue:4,numMissingRequired:5,numOther:6},Qh=Object.keys(wo.FieldType).map((e=>Um.ZP.constant(e))),jh=Um.ZP.oneof(...Qh.map((e=>e.map((e=>wo.FieldType[e]))))),Jh=Um.ZP.string().map((e=>({purpose:e})))
const Xh=Um.ZP.tuple(Um.ZP.integer(),Um.ZP.integer(),function Arbitraries_apiIdentifierArbitrary(...e){return Um.ZP.tuple(Um.ZP.constantFrom(...e),Um.ZP.hexaString(8,8)).map((([e,t])=>e+"_"+t))}("tsf"),Um.ZP.string(),Um.ZP.string(),Um.ZP.string(),jh,Um.ZP.boolean(),Um.ZP.boolean(),Um.ZP.boolean(),Um.ZP.boolean(),Um.ZP.boolean(),Um.ZP.boolean(),Um.ZP.boolean(),Um.ZP.constant(null),Um.ZP.option(Jh)).map((([e,t,n,a,i,r,s,o,l,c,d,u,m,p,h,E])=>{const S={id:e,dbId:t,apiId:n,name:a,systemName:i,displayName:r,fieldType:s,isRequired:o,isMulti:l,isComputed:c,isConvertedFromLink:d,isSnapshot:u,isIntegration:m,isParentLink:p,requiredLink:h,archiveRecord:E}
u&&(S.lookupConfig={isMulti:!1,multiFlattenLevel:null,lookupSteps:[{schemaField:i,type:Gm.fN.SCHEMA_FIELD}]})
return S}))
Xh.filter((e=>!(0,Hm.Z)(e)))
class FilterFormGuidelines extends d.Component{constructor(){super(...arguments)
this.state={primaryDateFilterFormToDate:"",primaryDateFilterFormFromDate:"",secondaryDateFilterFormToDate:"",secondaryDateFilterFormKey:fc.Vm.AUTHOR,secondaryDateFilterFormFromDate:"",primaryDropdownFilterFormValue:[],secondaryDropdownFilterFormKey:fc.Vm.AUTHOR,secondaryDropdownFilterFormValue:[],primaryItemSearchInputFilterFormOperator:fc.EF.IS,primaryItemSearchInputFilterFormValue:[],secondaryItemSearchInputFilterFormKey:fc.Vm.AUTHOR,secondaryItemSearchInputFilterFormOperator:fc.EF.IS,secondaryItemSearchInputFilterFormValue:[],primaryTwoInputFilterFormName:"",primaryTwoInputFilterFormValue:"",secondaryTwoInputFilterFormKey:fc.Vm.AUTHOR,secondaryTwoInputFilterFormName:"",secondaryTwoInputFilterFormValue:"",primarySchemaFieldFilterFormOperator:fc.EF.IS,primarySchemaFieldFilterFormSchemaField:null,primarySchemaFieldFilterFormFilter:{key:fc.Vm.SCHEMA_FIELD,operator:fc.EF.INCLUDES_TEXT,fieldId:"tsf_12345",fieldType:wo.FieldType.TEXT,value:""},secondarySchemaFieldFilterFormKey:fc.Vm.AUTHOR,secondarySchemaFieldFilterFormOperator:fc.EF.IS,secondarySchemaFieldFilterFormSchemaField:null,secondarySchemaFieldFilterFormFilter:{key:fc.Vm.SCHEMA_FIELD,operator:fc.EF.INCLUDES_TEXT,fieldId:"tsf_12345",fieldType:wo.FieldType.TEXT,value:""},primaryTextValueFilterFormOperator:fc.EF.IS,primaryTextValueFilterFormValue:"",secondaryTextValueFilterFormKey:fc.Vm.AUTHOR,secondaryTextValueFilterFormOperator:fc.EF.IS,secondaryTextValueFilterFormValue:"",primaryInvalidFilterFormOperator:fc.EF.IS,primaryInvalidFilterFormValue:"",secondaryInvalidFilterFormKey:fc.Vm.AUTHOR,secondaryInvalidFilterFormOperator:fc.EF.IS,secondaryInvalidFilterFormValue:"",primaryTextAreaFilterFormValue:"",secondaryTextAreaFilterFormValue:"",secondaryTextAreaFilterFormKey:fc.Vm.AUTHOR,isSecondaryDropdown1Open:!1,isSecondaryDropdown2Open:!1}
this._handleToggleSecondaryDropdown1=e=>{this.setState({isSecondaryDropdown1Open:e})}
this._handleToggleSecondaryDropdown2=e=>{this.setState({isSecondaryDropdown2Open:e})}}render(){return d.createElement("div",{className:"u-spacing"},d.createElement(f.zV,null,"Filters"),d.createElement("div",null,d.createElement("a",{href:"https://projects.invisionapp.com/d/#/console/13658196/310035130/preview"},"https://projects.invisionapp.com/d/#/console/13658196/310035130/preview")),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.Dx,null,"FilterForm Components"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Forms"),d.createElement(dm.Z,null,"Primary"),d.createElement(dm.Z,null,"Secondary"))),d.createElement("tbody",null,d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"TextValueFilterForm")),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(wm.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"TextValueFilterForm - primary",filterStyle:Pm.r.PRIMARY,onChangeOperator:e=>{console.log(`Updated operator to: ${e}`)
this.setState({primaryInvalidFilterFormOperator:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({primaryInvalidFilterFormValue:e})},operators:[fc.EF.IS,fc.EF.CONTAINS,fc.EF.IS_ONE_OF],selectedOperator:this.state.primaryInvalidFilterFormOperator,initialValue:this.state.primaryInvalidFilterFormValue}))),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(wm.Z,{buttonSize:O.qE.SMALL,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryInvalidFilterFormKey:e})},onChangeOperator:e=>{console.log(`Updated operator to: ${e}`)
this.setState({secondaryInvalidFilterFormOperator:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({secondaryInvalidFilterFormValue:e})},onRemove:()=>{console.log("Remove TextValueFilter!")},operators:[fc.EF.IS,fc.EF.CONTAINS,fc.EF.IS_ONE_OF],selectedFilterKey:this.state.secondaryInvalidFilterFormKey,selectedOperator:this.state.secondaryInvalidFilterFormOperator,initialValue:this.state.secondaryInvalidFilterFormValue})))),d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"TextValueFilterForm")," (invalid)"),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(wm.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"TextValueFilterForm - primary",filterStyle:Pm.r.PRIMARY,onChangeOperator:e=>{console.log(`Updated operator to: ${e}`)
this.setState({primaryTextValueFilterFormOperator:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({primaryTextValueFilterFormValue:e})},operators:[fc.EF.IS,fc.EF.CONTAINS,fc.EF.IS_ONE_OF],selectedOperator:this.state.primaryTextValueFilterFormOperator,initialValue:this.state.primaryTextValueFilterFormValue,invalidMessage:"Something's wrong!"}))),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(wm.Z,{buttonSize:O.qE.SMALL,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryTextValueFilterFormKey:e})},onChangeOperator:e=>{console.log(`Updated operator to: ${e}`)
this.setState({secondaryTextValueFilterFormOperator:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({secondaryTextValueFilterFormValue:e})},onRemove:()=>{console.log("Remove TextValueFilter!")},operators:[fc.EF.IS,fc.EF.CONTAINS,fc.EF.IS_ONE_OF],selectedFilterKey:this.state.secondaryTextValueFilterFormKey,selectedOperator:this.state.secondaryTextValueFilterFormOperator,initialValue:this.state.secondaryTextValueFilterFormValue,invalidMessage:"Something's wrong!"})))),d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"TwoInputFilterForm")),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(Fm.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"TwoInputFilterForm - primary",filterStyle:Pm.r.PRIMARY,onChangeValueOne:e=>{console.log(`Updated name to: ${e}`)
this.setState({primaryTwoInputFilterFormName:e})},onChangeValueTwo:e=>{console.log(`Updated value to: ${e}`)
this.setState({primaryTwoInputFilterFormValue:e})},valueOnePlaceholder:"name",valueTwoPlaceholder:"value",initialValueOne:this.state.primaryTwoInputFilterFormName,initialValueTwo:this.state.primaryTwoInputFilterFormValue}))),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(Fm.Z,{buttonSize:O.qE.SMALL,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,valueOnePlaceholder:"name",onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryTwoInputFilterFormKey:e})},onChangeValueOne:e=>{console.log(`Updated name to: ${e}`)
this.setState({primaryTwoInputFilterFormName:e})},onChangeValueTwo:e=>{console.log(`Updated value to: ${e}`)
this.setState({primaryTwoInputFilterFormValue:e})},onRemove:()=>{console.log("Remove MultiValueFilter!")},valueTwoPlaceholder:"value",selectedFilterKey:this.state.secondaryTwoInputFilterFormKey,initialValueOne:this.state.secondaryTwoInputFilterFormName,initialValueTwo:this.state.secondaryTwoInputFilterFormValue})))),d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"DateFilterForm")),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(bm.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"DateFilterForm - primary",toDate:this.state.primaryDateFilterFormToDate,filterStyle:Pm.r.PRIMARY,onChangeToDate:e=>{console.log(`Updated end date to: ${e}`)
this.setState({primaryDateFilterFormToDate:e})},onChangeFromDate:e=>{console.log(`Updated start date to: ${e}`)
this.setState({primaryDateFilterFormFromDate:e})},fromDate:this.state.primaryDateFilterFormFromDate}))),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(bm.Z,{buttonSize:O.qE.SMALL,toDate:this.state.secondaryDateFilterFormToDate,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,onChangeToDate:e=>{console.log(`Updated end date to: ${e}`)
this.setState({secondaryDateFilterFormToDate:e})},onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryDateFilterFormKey:e})},onChangeFromDate:e=>{console.log(`Updated start date to: ${e}`)
this.setState({secondaryDateFilterFormFromDate:e})},onRemove:()=>{console.log("Remove DateFilter!")},selectedFilterKey:this.state.secondaryDateFilterFormKey,fromDate:this.state.secondaryDateFilterFormFromDate})))),d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"DropdownFilterForm")),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(vm.ZP,{buttonSize:O.qE.SMALL,dropdownToggleText:"DropdownFilterForm",filterStyle:Pm.r.PRIMARY,isMulti:!0,onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({primaryDropdownFilterFormValue:e})},optionDatas:[{name:"Option 1",value:"opt_1"},{name:"Option 2",value:"opt_2"},{name:"Option 3",value:"opt_3"}],value:this.state.primaryDropdownFilterFormValue}))),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(vm.ZP,{buttonSize:O.qE.SMALL,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,isMulti:!1,onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryDropdownFilterFormKey:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({secondaryDropdownFilterFormValue:e})},onRemove:()=>{console.log("Remove DropdownFilter!")},optionDatas:[{name:"Option 1",value:"opt_1"},{name:"Option 2",value:"opt_2"},{name:"Option 3",value:"opt_3"}],selectedFilterKey:this.state.secondaryDropdownFilterFormKey,value:this.state.secondaryDropdownFilterFormValue})))),d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"ItemSearchInputFilterForm")),d.createElement(dm.Z,null,d.createElement(Lm.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"Selected",filterStyle:Pm.r.PRIMARY,itemSearchInputClass:Om.Z,onChangeOperator:e=>{console.log(`Updated operator to: ${e}`)
this.setState({primaryItemSearchInputFilterFormOperator:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({primaryItemSearchInputFilterFormValue:e})},operators:[fc.EF.IS,fc.EF.CONTAINS,fc.EF.IS_ONE_OF],selectedOperator:this.state.primaryItemSearchInputFilterFormOperator,value:this.state.primaryItemSearchInputFilterFormValue})),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(Lm.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"Selected",filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,itemSearchInputClass:Om.Z,onChangeOperator:e=>{console.log(`Updated operator to: ${e}`)
this.setState({secondaryItemSearchInputFilterFormOperator:e})},onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryItemSearchInputFilterFormKey:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({secondaryItemSearchInputFilterFormValue:e})},onRemove:()=>{console.log("Remove DropdownFilter!")},operators:[fc.EF.IS,fc.EF.CONTAINS,fc.EF.IS_ONE_OF],selectedFilterKey:this.state.secondaryItemSearchInputFilterFormKey,selectedOperator:this.state.secondaryItemSearchInputFilterFormOperator,value:this.state.secondaryItemSearchInputFilterFormValue})))),d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"TextAreaFilterForm")),d.createElement(dm.Z,null,d.createElement(Mm.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"TextAreaFilterForm - primary",filterStyle:Pm.r.PRIMARY,onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({primaryTextAreaFilterFormValue:e})},placeholder:"value",initialValue:this.state.primaryTextAreaFilterFormValue})),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(Mm.Z,{buttonSize:O.qE.SMALL,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryTextAreaFilterFormKey:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({secondaryTextAreaFilterFormValue:e})},onRemove:()=>{console.log("Remove DropdownFilter!")},placeholder:"value",selectedFilterKey:this.state.secondaryTextAreaFilterFormKey,initialValue:this.state.secondaryTextAreaFilterFormValue}))))))),d.createElement("div",{className:"u-spacing-top"},d.createElement(f.Dx,null,"Filter Components"),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement(dm.Z,null,"Filters"),d.createElement(dm.Z,null,"Primary"),d.createElement(dm.Z,null,"Secondary"))),d.createElement("tbody",null,d.createElement("tr",null,d.createElement(dm.Z,null,d.createElement("code",null,"SchemaFieldFilterForm")),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(km.Z,{buttonSize:O.qE.SMALL,dropdownToggleText:"Field",filter:this.state.primarySchemaFieldFilterFormFilter,filterStyle:Pm.r.PRIMARY,onChangeFilter:e=>{console.log(`Updated filter to ${e}`)
this.setState({primarySchemaFieldFilterFormFilter:e})},schemaFields:[th,Jp,Qp,zp,$p,Kp,Vh,lh,nh,ch,Dh]}))),d.createElement(dm.Z,null,d.createElement("div",{className:(0,C.iv)(eE.formCell)},d.createElement(km.Z,{buttonSize:O.qE.SMALL,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,filter:this.state.secondarySchemaFieldFilterFormFilter,onChangeFilter:e=>{console.log(`Updated filter to ${e}`)
this.setState({secondarySchemaFieldFilterFormFilter:e})},onRemove:()=>{console.log("Remove SchemaFieldFilterForm!")},schemaFields:[th,Jp,Qp,zp,$p,Kp,Vh,lh,nh,ch,Dh],selectedFilterKey:this.state.secondarySchemaFieldFilterFormKey})))))),d.createElement("div",{className:"u-spacing-top"},d.createElement("span",{className:"u-spacing-right"},d.createElement(Dm.Z,{buttonSize:O.qE.SMALL,hasFilterErrors:!1,secondaryFilterNodes:[],onAddFilter:()=>{console.log("Add filter")},isOpen:this.state.isSecondaryDropdown1Open,onToggle:this._handleToggleSecondaryDropdown1})),d.createElement("span",null,d.createElement(Dm.Z,{buttonSize:O.qE.SMALL,hasFilterErrors:!1,secondaryFilterNodes:[d.createElement(wm.Z,{buttonSize:O.qE.SMALL,filterGroups:[{filterOptions:[{filterKey:fc.Vm.AUTHOR},{filterKey:fc.Vm.BARCODES},{filterKey:fc.Vm.NAMES},{filterKey:fc.Vm.SCHEMA_FIELD,extraProps:{schemaFields:[]}}]}],filterStyle:Pm.r.SECONDARY,onChangeFilterKey:e=>{console.log(`Updated filter key to: ${e}`)
this.setState({secondaryTextValueFilterFormKey:e})},onChangeOperator:e=>{console.log(`Updated operator to: ${e}`)
this.setState({secondaryTextValueFilterFormOperator:e})},onChangeValue:e=>{console.log(`Updated value to: ${e}`)
this.setState({secondaryTextValueFilterFormValue:e})},onRemove:()=>{console.log("Remove TextValueFilter!")},operators:[fc.EF.IS,fc.EF.CONTAINS,fc.EF.IS_ONE_OF],selectedFilterKey:this.state.secondaryTextValueFilterFormKey,selectedOperator:this.state.secondaryTextValueFilterFormOperator,initialValue:this.state.secondaryTextValueFilterFormValue})],onAddFilter:()=>{console.log("Add filter")},isOpen:this.state.isSecondaryDropdown2Open,onToggle:this._handleToggleSecondaryDropdown2})))))}}const eE=C.mM.create({formCell:{width:400}})
function HeaderGuidelines(){return d.createElement("div",{className:"u-padding"},d.createElement(f.R6,null,"Headers"),d.createElement("a",{href:"https://zpl.io/Z1PyDS2"},"https://zpl.io/Z1PyDS2"),d.createElement("div",{className:"u-large-spacing-top"},"Below are the currently available Header styles (not all from the guidelines have been implemented):"),d.createElement("hr",null),d.createElement(f.R6,null,"Header1"),d.createElement("hr",null),d.createElement(f.zV,null,"Header2"),d.createElement("hr",null),d.createElement(f.BB,null,"Header3"),d.createElement("hr",null),d.createElement(f.Dx,null,"Title"),d.createElement("hr",null))}var tE=n(435191)
class SelectInputGuidelines extends d.Component{constructor(){super(...arguments)
this.state={query:"",value:["read-is-write","mta-team"]}
this._handleQueryChange=e=>{this.setState({query:e.target.value})}
this._handleSelectOption=e=>{rt.ZP.success(`You selected ${e}!`)
this.setState({query:""})
this.state.value.includes(e)?this.setState({value:ue.default.without(this.state.value,e)}):this.setState({value:[...this.state.value,e]})}
this._handleRemoveOption=e=>{this.setState({value:ue.default.without(this.state.value,e)})}}render(){return d.createElement("div",{className:"u-spacing"},d.createElement(f.R6,null,"Select Inputs"),d.createElement("div",null,d.createElement("a",{href:"https://projects.invisionapp.com/d/main/default/#/console/13433387/283355069/preview"},"https:// projects.invisionapp.com/d/main/default/#/console/13433387/283355069/preview")),d.createElement("div",null,d.createElement("code",null,"ui-library/inputs/ChipSelectInput.tsx")),d.createElement(ne.Z,null,d.createElement(ee.Z,{xs:6},d.createElement("div",{className:"u-spacing-bottom"},d.createElement(f.As,null,"Multi-Select Input"),d.createElement("p",null,"Which teams like spint'gls?"),d.createElement(Im.Z,{optionDatas:(0,tE.wd)(this.state.query,[{name:"read-is-write",value:"read-is-write",icon:"edit"},{name:"mad-scientists",value:"mad-scientists",icon:"batch"},{name:"mta-team",value:"mta-team",icon:"users"},{name:"team-werk",value:"team-werk",icon:"workflow"},{name:"team-resultants",value:"team-resultants",icon:"table"}]),onQueryChange:this._handleQueryChange,onRemove:this._handleRemoveOption,onSelect:this._handleSelectOption,placeholder:"Type something...",query:this.state.query,value:this.state.value,isMulti:!0})))))}}function ToastGuidelines(){return d.createElement("div",{className:"u-spacing"},d.createElement(f.R6,null,"Toasts"),d.createElement("div",null,d.createElement("a",{href:"https://projects.invisionapp.com/d/main#/console/13433387/356399431/preview"},"https://projects.invisionapp.com/d/main#/console/13433387/356399431/preview")),d.createElement("div",null,d.createElement("code",null,"nav/toasts/Toast.tsx")),[{type:Sm.pC.INFO,message:"Experiencing some issues while saving your entry Untitled -- working to resolve them..."},{type:Sm.pC.INFO,message:"A newer version of Benchling is available.",actionText:"Refresh"},{type:Sm.pC.SUCCESS,message:"Youve successfully completed all getting started tasks and earned an additional 1GB!"},{type:Sm.pC.WARNING,message:"Your entry could not be saved. Check your internet connection or trying refreshing.",actionText:"Refresh"},{type:Sm.pC.DANGER,message:"Your request could not be completed."}].map((({type:e,actionText:t,message:n},a)=>d.createElement("div",{className:"u-small-spacing-top"},d.createElement(Em.Z,{message:n,type:e,actionText:t,isCloseable:!0,onActionClick:()=>{},id:a})))))}function Guidelines({component:e}){switch(e){case"buttons":return d.createElement(pm,null)
case"chips":return d.createElement(design_ChipGuidelines,null)
case"dropdowns":return d.createElement(Cm,null)
case"headers":return d.createElement(HeaderGuidelines,null)
case"field-inputs":return d.createElement(design_FieldInputGuidelines,null)
case"select-inputs":return d.createElement(SelectInputGuidelines,null)
case"filter-forms":return d.createElement(FilterFormGuidelines,null)
case"toasts":return d.createElement(ToastGuidelines,null)
default:return d.createElement(ym,null)}}const nE={domain:"design",routes:[{urlPattern:"_design/:component",handler:function design(e){gu.Z.startRUMView("design")
renderReactComponent(Guidelines,{component:e})},legacy:!0}]}
var aE=n(989566)
function getPublicLink(e,t){const n=e.get(2),a=e.get(1),i=function getTagAndOperationFromSystem(e,t,n){const a=n.specSelectors.taggedOperations()
for(const n of a.values())for(const a of n.get("operations"))if(a.get("path")===t&&a.get("method")===e){return{tagHash:`#/${n.get("tagDetails").get("name")}`,operationId:a.get("operation").get("operationId")}}return null}(n,a,t)
if(null==i){(0,ie.Gp)(!1,`Expected valid operation for path ${a} with method ${n}`)
return fE}return function buildPublicLinkFromTagOperation(e){const{tagHash:t,operationId:n}=e
return`${function getBaseURL(){return gE+getURLPath(getVersion(),getAvailability())}()+t}/${n}`.replace(" ","%20")}(i)}function CopyPublicLink(e){const{operationPath:t,system:n}=e
return d.createElement(ve.ZP,{container:"body",placement:ve.TQ.TOP,title:"Copy Public Link"},d.createElement(P.Z,{className:N()("u-gray-light",(0,C.iv)(iE.icon)),icon:"copy",onClick:function handleCopyPublicLink(e){e.stopPropagation();(0,on.Z)(getPublicLink(t,n),{showToastOnSuccess:!0})}}))}const iE=C.mM.create({icon:{marginRight:"14px",cursor:"pointer",fontSize:"12px",":focus":{outline:0}}})
function Filter(e){const{value:t,updateValue:n}=e
return d.createElement("div",{className:"filter-container"},d.createElement(Ln.ZP,{clearType:Ln.Nl.X,shouldAutoSelect:!1,placeholder:"Filter",value:null==t?"":t,onChange:e=>{const{target:{value:t}}=e
n(t)},onEscape:()=>{n("")}}))}var rE=n(726763)
function Sidebar(e){const{system:t}=e
let n=t.specSelectors.taggedOperations()
const a=t.layoutSelectors.currentFilter()
a&&!0!==a&&(n=t.fn.opsFilter(n,a))
function elementKeyFromHash(e){let n=decodeURIComponent(e).slice(1)
"/"===n[0]&&(n=n.slice(1))
const a=n.split("/").map((e=>e||""))
return t.layoutSelectors.isShownKeyFromUrlHashArray(a)}function navToItem(e){!function hideLastTag(){const e=elementKeyFromHash(window.location.hash)
t.layoutActions.show(e,!1)}()
const n=elementKeyFromHash(e)
t.layoutActions.show(n,!0)
const a=n.map((e=>(0,rE.Z)(e).split(" ").join("_"))),i=document.getElementById(a.join("-"))
setTimeout((()=>{i.scrollIntoView({behavior:"smooth"})}),.2)}function tagLineFromTag(e,t){const n=`#/${e}`,a=["sidebar-tag-item"]
t.split("/").slice(0,2).join("/")===n&&a.push("sidebar-item-selected")
const i=e
return function sidebarItem(e,t,n){return d.createElement("div",{key:e,className:t,onClick:()=>{navToItem(e)}},d.createElement("a",null,n))}(n,a.join(" "),i)}return d.createElement("div",null,d.createElement("h1",null,"Resources"),n.map(((e,t)=>d.createElement("div",{key:t},tagLineFromTag(t,decodeURIComponent(window.location.hash))))).toArray())}function SwaggerRedirectModal(e){const[t,n]=(0,d.useState)("")
return d.createElement(B.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:function handleSubmit(){const n=`https://${t}${(0,T.YW)()}`;(0,T.gG)(n)
e.onRequestSubmit()},title:"Specify your tenant",buttons:[{text:"Launch",submit:!0,style:O.ZJ.SECONDARY}]},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:12},d.createElement("p",null,"For more details regarding your tenant, check out our"," ",d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com/docs/getting-started-1#the-api-and-benchling-domains"},"documentation.")," ","(Requires a valid Benchling login with API credentials)"),d.createElement("p",null,"Note: We recommend bookmarking the page once youve been redirected. It will always have the most up to date information for your tenant."),d.createElement(te.Z,null,d.createElement(k.Z,{label:"Tenant Subdomain",value:t,onChange:e=>{n(e.target.value)},placeholder:"your-domain (example.benchling.com)"})))))}var sE=n(250965)
const oE=window.HTMLTextAreaElement.prototype,lE=window.HTMLInputElement.prototype
function removeExamplesFromGetRequestInput(){sE("td.parameters-col_description > input, textarea").toArray().filter((e=>"body-param__text"!==e.className&&!e.disabled)).forEach((e=>{if(void 0===e.originalValue){e.originalValue=e.value
""!==e.value&&(e.placeholder=e.originalValue)}const t=/^\d+$/.test(e.value)
e.value!==e.originalValue||t||function changeValue(e,t,n){Object.getOwnPropertyDescriptor(n?oE:lE,"value").set.call(e,t)
const a=new Event("input",{bubbles:!0})
e.dispatchEvent(a)}(e,"","TEXTAREA"===e.nodeName)}))}function TryItOutButton(e){const{onTryoutClick:t,onCancelClick:n,enabled:a,userSignedIn:i}=e,[r,s]=(0,d.useState)(!1),[o,l]=(0,d.useState)(!1);(0,d.useEffect)((()=>{i&&async function asyncGetUserCanUserInteractiveDocs(){const e=await IE()
s(e)}()}),[i])
return d.createElement("div",{className:"try-out"},a?d.createElement(O.Co,{text:"Cancel",buttonStyle:O.ZJ.NEGATIVE,size:O.qE.SMALL,onClick:()=>{n()}}):d.createElement(d.Fragment,null,d.createElement(O.Co,{className:"pull-right",text:"Test API",buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,onClick:function handleTestAPIClick(){if(i)if(r){t()
setTimeout((()=>{removeExamplesFromGetRequestInput()}),100)}else l(!0)
else(0,D.Z)(SwaggerRedirectModal,{})},dataTestAttrs:{component:"TryItOutButton",element:"root"}}),o&&d.createElement("div",{className:"text-warning u-small-spacing-top"},"You need access to the Developer Platform to test the API.")))}function BenchlingLayoutPlugin(e){return{wrapComponents:{info:()=>()=>null,FilterContainer:()=>()=>null,TryItOutButton:(e,t)=>e=>d.createElement("div",null,d.createElement(TryItOutButton,{...e,userSignedIn:null!=window.bootstrapUser})),JumpToPath:(e,t)=>n=>d.createElement(d.Fragment,null,d.createElement(e,{...n}),void 0!==n.path&&d.createElement("span",null,d.createElement(CopyPublicLink,{system:t,operationPath:n.path}))),curl:(e,t)=>t=>d.createElement(d.Fragment,null,d.createElement(e,{...t}),d.createElement("div",{className:"text-info u-tiny-spacing-top u-moderate-spacing-bottom"},"Note: This request will only work for a few minutes, after which the Authorization header must be replaced with an API key or fresh Bearer Token. See docs.benchling.com for details.")),operations:(e,t)=>n=>d.createElement("div",{id:"custom-operations"},d.createElement("div",{id:"left-float-sticky"},d.createElement(Sidebar,{system:t})),d.createElement("div",{id:"right-float"},d.createElement("div",{className:"filter-flex-container "+(null==window.bootstrapUser?"":"full-filter-bar")},d.createElement(Filter,{value:t.layoutSelectors.currentFilter(),updateValue:t.layoutActions.updateFilter}),null==window.bootstrapUser&&d.createElement("div",{className:"test-api-button-container"},d.createElement(O.Co,{text:"Test APIs",buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,onClick:()=>{(0,D.Z)(SwaggerRedirectModal,{})}})),d.createElement("div",{className:"openapi-spec-button-container"},d.createElement(O.Co,{text:"OpenAPI Spec",buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,onClick:()=>{(0,T.gG)(function getSpecUrl(){return getSpecFilePath(getVersion(),getAvailability())}())}}))),d.createElement(e,{...n})))}}}const caseInsensitiveContains=function(e,t){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}
function ExtendedFilterPlugin(){return{fn:{opsFilter:(e,t)=>e.filter(((e,n)=>caseInsensitiveContains(n,t)||function(e,t){return e.get("operations").some((e=>caseInsensitiveContains(e.get("operation").get("summary"),t)||caseInsensitiveContains(e.get("operation").get("description"),t)))}(e,t)||caseInsensitiveContains(e.get("tagDetails").get("description"),t)))}}}var cE,dE
!function(e){e.LA="la"
e.GA="ga"
e.NOT_AVAILABLE="not-available"}(cE||(cE={}))
!function(e){e.V2_ALPHA="v2-alpha"
e.V2_BETA="v2-beta"
e.V2="v2"
e.V3_ALPHA="v3-alpha"}(dE||(dE={}))
var uE=n(757389)
function SwaggerDropdown(e){const{updateDropdown:t,dropdownLabel:n}=e
function getVersionSubmenu(e){return S.ZP.CAPILLARY_ENABLE_PRE_RELEASE_DOCS_UI||S.ZP.CAPILLARY_ENABLE_NOT_AVAILABLE_DOCS_UI?d.createElement(x.Z,{value:e},e,d.createElement(U.ZP,null,d.createElement(x.Z,{onSelect:()=>{t(e,cE.GA)}},e," (GA)"),S.ZP.CAPILLARY_ENABLE_PRE_RELEASE_DOCS_UI&&d.createElement(x.Z,{onSelect:()=>{t(e,cE.LA)}},e," (Pre-release)"),S.ZP.CAPILLARY_ENABLE_NOT_AVAILABLE_DOCS_UI&&d.createElement(x.Z,{onSelect:()=>{t(e,cE.NOT_AVAILABLE)}},e," (Not available)"))):d.createElement(x.Z,{onSelect:()=>{t(e,cE.GA)}},e)}return d.createElement("div",null,d.createElement(Qi.ZP,{menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.MEDIUM},S.ZP.CAPILLARY_ENABLE_V3_ALPHA_API&&getVersionSubmenu(dE.V3_ALPHA),getVersionSubmenu(dE.V2),getVersionSubmenu(dE.V2_BETA),getVersionSubmenu(dE.V2_ALPHA))},d.createElement(O.Co,{size:O.qE.SMALL,buttonStyle:O.ZJ.SECONDARY,text:n,isDropdown:!0})))}function SwaggerUiPageHeader(e){const{updateDropdown:t,dropdownLabel:n}=e
return d.createElement("div",{className:N()((0,C.iv)(mE.container))},d.createElement("div",{className:N()((0,C.iv)(mE.contentWrapper))},d.createElement("div",{className:N()((0,C.iv)(mE.flexBox))},d.createElement("div",{className:N()((0,C.iv)(mE.headerChild))},d.createElement("a",{href:"/"},d.createElement("img",{className:N()((0,C.iv)(mE.logo)),src:(0,uE.Z)("/static/img/logo_250_notext.png"),alt:"Benchling logo"}))),d.createElement("div",{className:N()((0,C.iv)(mE.headerChild))},d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.benchling.com"},"Warehouse & API Guide")),d.createElement("div",{className:N()((0,C.iv)(mE.headerChild))},d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://benchling.com/sdk-docs/"},"SDK Reference")),d.createElement("div",{className:N()((0,C.iv)(mE.headerChild))},d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://benchling.com/api/reference"},"Public API Reference")),d.createElement("div",{className:N()((0,C.iv)(mE.headerChild))},d.createElement(SwaggerDropdown,{updateDropdown:t,dropdownLabel:n})))))}const mE=C.mM.create({container:{height:"10%",borderBottom:`2px solid ${b.t0}`},flexBox:{display:"flex",flexDirection:"row",alignContent:"center"},headerChild:{margin:"auto 10px"},logo:{height:"40px",width:"40px"},contentWrapper:{margin:"40px auto",width:"90%",maxWidth:"1300px"}}),pE="v2",hE=cE.GA
async function tryItNowRequestInterceptor(e){!function trackTryItNow(e){h.KK(Ie.Pp.CALLED_TRY_IT_NOW,{method:e})}(e.method)
if(e.url.includes("/api/v2/token"))return e
const t=await async function getBearerToken(){return(await ft.s0({url:"/1/api/bearer-token:create",data:{bearerTokenConsumer:"API_DOCS"}})).access_token}()
e.headers.Authorization=`Bearer ${t}`
return e}function getAvailabilityParam(e){return e===hE?"":`?availability=${e}`}function getSpecFilePath(e,t){return`/api/${e}/openapi.yaml${getAvailabilityParam(t)}`}function getURLPath(e,t){return e===pE?`/api/reference${getAvailabilityParam(t)}`:`/api/${e}/reference${getAvailabilityParam(t)}`}const EE={[cE.GA]:"",[cE.LA]:" (Pre-release)",[cE.NOT_AVAILABLE]:" (Not available)"}
function getDropdownLabel(e,t){return`${e}${EE[t]}`}const SE=(0,d.lazy)((()=>Promise.all([n.e(105),n.e(350)]).then(n.bind(n,370105))))
function SwaggerUiPage(e){d.useEffect((()=>{(0,T._w)("Benchling API Documentation")}),[])
const t=e.version||pE,n=e.availabilityToShow||cE.GA,[a,i]=(0,d.useState)(t),[r,s]=(0,d.useState)(n),o=null!=window.bootstrapUser
return d.createElement("div",null,d.createElement(SwaggerUiPageHeader,{updateDropdown:function updateDropdown(e,t){window.history.pushState({},"",getURLPath(e,t))
i(e)
s(t)},dropdownLabel:getDropdownLabel(a,r)}),d.createElement("div",{className:N()((0,C.iv)(TE.contentWrapper))},d.createElement(d.Suspense,{fallback:d.createElement(H.b,null)},d.createElement(SE,{url:getSpecFilePath(a,r),plugins:[BenchlingLayoutPlugin,ExtendedFilterPlugin],requestInterceptor:o?tryItNowRequestInterceptor:e=>e,docExpansion:"none",deepLinking:!0,defaultModelExpandDepth:3}))))}const TE=C.mM.create({contentWrapper:{margin:"40px auto",width:"90%",maxWidth:"1300px"}}),gE="https://benchling.com",fE="https://benchling.com/api/reference"
function getVersion(){const e=(0,T.YW)(),t=e.split("/")
if(!(0,ie.Gp)(t.length>=3,`Expected pathname to have at least 2 /'s for path ${e}`))return pE
const n=t[2]
return Object.values(dE).includes(n)?n:pE}function getAvailability(){var e
const{queryKey:t}=T.he(window.location.href)
return null!==(e=t.availability)&&void 0!==e?e:cE.GA}const IE=(0,aE.Z)((()=>async function getUserCanUseInteractiveDocs(){return(await ft.UJ("/1/api/enable-interactive-docs")).enabled}())),AE={domain:"dev-platform",routes:[{urlPattern:"api",handler:swaggerUiPageLanding,legacy:!0},{urlPattern:"api/reference",handler:swaggerUiPageLanding,legacy:!0},{urlPattern:"api/:version/reference",handler:function swaggerUiPage(e){gu.Z.startRUMView("api_version_reference")
renderReactElement(d.createElement(SwaggerUiPage,{version:e,availabilityToShow:getAvailability()}))},legacy:!0}]}
function swaggerUiPageLanding(){gu.Z.startRUMView("api_reference")
renderReactElement(d.createElement(SwaggerUiPage,{version:null,availabilityToShow:getAvailability()}))}const yE={domain:"events",routes:[{urlPattern:"event-subscriptions",handler:bu.eventSubscriptionsPage.bind(bu),legacy:!0}]},_E={domain:"files",routes:[{urlPattern:":currentUserUrl/files/:fileId",handler:bu.fileEditor.bind(bu)}]},CE={domain:"forms",routes:[{urlPattern:"forms/:formDefinitionId",handler:bu.formInstance.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/forms/create",handler:bu.formDefinitionCreate.bind(bu),legacy:!1},{urlPattern:":currentUserUrl/forms/:formDefinitionId",handler:bu.formDefinitionEditor.bind(bu),legacy:!1}]}
class PromoCodesView extends d.Component{constructor(){super(...arguments)
this.state={code:this.props.initialCode||"",isSubmitting:!1}
this._isSubmitDisabled=()=>!this.state.code||this.state.isSubmitting
this._handleChangePromoCode=e=>{this.setState({code:e.target.value})}
this._handleSubmit=async e=>{e.preventDefault()
if(!this._isSubmitDisabled()){this.setState({isSubmitting:!0})
try{await function redeemPromoCode(e){return ft.s0({url:"/1/api/promo-codes:redeem",data:{code:e}})}(this.state.code)
rt.ZP.success("Promo code successfully applied! You've been awarded 10GB of extra space.")
this.setState({code:""})}finally{this.setState({isSubmitting:!1})}}}}render(){return d.createElement("div",null,d.createElement(f.R6,{className:(0,C.iv)(RE.headerText)},"Promo Codes"),d.createElement(ne.Z,null,d.createElement(ee.Z,{className:"col-xs-6"},d.createElement("form",{onSubmit:this._handleSubmit,className:(0,C.iv)(RE.form)},d.createElement(k.Z,{className:"u-flex-grow u-small-spacing-right",label:"Promo Code",size:Gr.$u.MEDIUM,labelStyle:Gr.WS.HIDDEN,placeholder:"Promo code",value:this.state.code,onChange:this._handleChangePromoCode}),d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,disabled:this._isSubmitDisabled(),size:O.qE.MEDIUM,text:"Submit",type:"submit",onClick:e=>{this._isSubmitDisabled()&&e.preventDefault()}})))))}}const RE=C.mM.create({headerText:{fontSize:24,fontWeight:ji.KB,marginTop:15,marginBottom:15},form:{display:"flex"}}),NE=PromoCodesView,OE={domain:"growth",routes:[{urlPattern:"account/promo-codes",handler:function promoCodes(){gu.Z.startRUMView("promo_codes")
const{queryKey:e}=(0,T.he)(window.location.href)
renderReactElement(d.createElement(NE,{initialCode:e.code}))}}]}
const bE={domain:"insights",routes:[{urlPattern:"analytics",handler:bu.externalAnalyticsListing.bind(bu),legacy:!0},{urlPattern:"analytics/dashboards/:analyticsDashboardUrlIdentifier",handler:function externalAnalyticsDashboardDetails(e){const t=e.split("-",1)[0]
bu.externalAnalyticsDashboardDetails(t)},legacy:!0}]}
var vE=n(777599)
const PE=ot.Ps`
  query InstitutionProjectBackupRecordsQuery @noReadOnly @skipAudit @engComponent(name: IDENTITY) {
    currentUser {
      id
      institution {
        id
      }
      institutionProjectBackupRecords {
        project {
          id
          name
          ownerJson
          url
        }
        institution {
          id
          fullName
        }
      }
    }
  }
`
function BackupRecordsTable(e){return d.createElement(de.iA,{numRows:e.backupRecords.length},d.createElement(de.sg,{header:d.createElement(de.bL,null,d.createElement(f.BB,null,e.backupRecords[0].institution.fullName),e.isUserMember&&d.createElement(f.As,{className:(0,C.iv)(LE.institutionHeader)},"You are a member of this institution"),"Project"),renderCell:t=>{const n=e.backupRecords[t].project
return d.createElement(de.bL,null,d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n.url},n.name))}}),d.createElement(de.sg,{header:d.createElement(de.bL,{className:(0,C.iv)(LE.ownerCell)},"Owner"),renderCell:t=>{const n=e.backupRecords[t].project.ownerJson
return"organization"===n.type?d.createElement(de.bL,null,d.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:vE.Z.organizationURL(n.url_identifier)},n.name)):d.createElement(de.bL,null,n.name)}}))}function BackupRecordsTables(){return d.createElement(nt.ZP,{query:PE,renderLoading:nt.ZP.DEFAULT_RENDER_LOADING,fetchPolicy:"network-only"},(({currentUser:e},{refetch:t})=>{if(!e)return null
if(!e.institutionProjectBackupRecords.length)return d.createElement("strong",null,"You currently have no projects backed up to an institution.")
const n=ue.default.groupBy(e.institutionProjectBackupRecords,(e=>e.institution.id)),[a,i]=(0,St.uK)(Object.keys(n),(t=>{var n
return(null===(n=e.institution)||void 0===n?void 0:n.id)===t}))
return d.createElement(d.Fragment,null,[...a,...i].map((t=>{var a
return d.createElement(BackupRecordsTable,{key:t,isUserMember:Boolean((null===(a=e.institution)||void 0===a?void 0:a.id)===t),backupRecords:n[t]})})))}))}const LE=C.mM.create({ownerCell:{verticalAlign:"bottom"},institutionHeader:{marginBottom:10}})
function InstitutionBackupsPage(){return d.createElement("div",{className:(0,C.iv)(DE.page)},d.createElement(f.R6,{className:(0,C.iv)(DE.headerText)},"Institution Backups"),d.createElement("div",{className:(0,C.iv)(DE.bodyText)},d.createElement("p",null,"Some academic institutions partner with Benchling to administer their scientists' data. These licensed institutions back up data in Benchling projects that their users own."),d.createElement("p",null,"Institutions receive backups of a project when:"),d.createElement("ul",null,d.createElement("li",null,"the owner of the project is a member of the licensed institution"),d.createElement("li",null,"the project is owned by an organization whose admin is a member of the licensed institution")),d.createElement("p",null,"Any data you contribute to the following Benchling projects will be backed up to the corresponding institutions. That data will be audited and attributable to you."),d.createElement("p",null,"Contact ",d.createElement("a",{href:"mailto:support@benchling.com"},"support@benchling.com")," with questions.")),d.createElement(BackupRecordsTables,null))}const DE=C.mM.create({headerText:{fontSize:24,fontWeight:ji.KB,marginTop:15,marginBottom:30},page:{...ji.hv},bodyText:{marginBottom:30}})
var ME=n(250965)
const wE={domain:"institutions",routes:[{urlPattern:":institutionUrlIdentifier/signup",handler:function institution(){gu.Z.startRUMView("signup_institution")
new xu({el:ME(".sign-up")}).render()},legacy:!0},{urlPattern:"account/institution-backups",handler:function institutionBackups(){gu.Z.startRUMView("institution_backups")
renderReactElement(d.createElement(InstitutionBackupsPage,null))}}]}
const FE={domain:"instruments",routes:[{urlPattern:"connection-schemas",handler:bu.connectionSchemas.bind(bu),legacy:!0},{urlPattern:"connection-schemas/create",handler:bu.connectionSchemasCreate.bind(bu),legacy:!0},{urlPattern:"connection-schemas/:schemaId",handler:bu.connectionSchema.bind(bu),legacy:!0},{urlPattern:"instrument-gateways",handler:bu.instrumentGateways.bind(bu),legacy:!0},{urlPattern:"connections/listing",handler:bu.connectionListing.bind(bu)},{urlPattern:"connections/:connectionId",handler:bu.connectionEditor.bind(bu),legacy:!0}]},kE={domain:"inventory",routes:[{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/container-schemas/",handler:bu.containerSchemas.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/box-schemas/",handler:bu.boxSchemas.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/box-schemas/create",handler:boxSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/box-schemas/:boxSchemaId",handler:boxSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/plate-schemas/",handler:bu.plateSchemas.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/plate-schemas/create",handler:plateSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/plate-schemas/:plateSchemaId",handler:plateSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/location-schemas/",handler:bu.locationSchemas.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/location-schemas/create",handler:locationSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/location-schemas/:locationSchemaId",handler:locationSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/location-schemas/:locationSchemaId/:section",handler:locationSchemaSettings}]}
function boxSchemaSettings(e,t,n){bu.boxSchemaSettings(e,t,n)}function plateSchemaSettings(e,t,n){bu.plateSchemaSettings(e,t,n)}function locationSchemaSettings(e,t,n,a){bu.locationSchemaSettings(e,t,n,a)}const UE={domain:"label-printing",routes:[{urlPattern:"label-printing-settings",handler:bu.tenantLevelLabelPrintingSettings.bind(bu),legacy:!0},{urlPattern:"inventory-settings",handler:bu.tenantLevelInventorySettings.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/label-templates/",handler:bu.labelTemplates.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/label-templates/create",handler:labelTemplateSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/label-templates/:labelTemplateId",handler:labelTemplateSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/printers/",handler:bu.printers.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/printers/create",handler:printerSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/printers/:printerId",handler:printerSettings,legacy:!0}]}
function labelTemplateSettings(e,t,n){bu.labelTemplateSettings(e,t,n)}function printerSettings(e,t,n){bu.printerSettings(e,t,n)}const xE={domain:"modbio",routes:[{urlPattern:"monomers/create",handler:bu.monomerCreateMethodPicker.bind(bu)},{urlPattern:"monomers",handler:bu.monomers.bind(bu),legacy:!0},{urlPattern:"monomers/create/helm-library",handler:bu.monomerCreateFromHELMLibraryPage.bind(bu)},{urlPattern:"monomers/create/manual",handler:bu.monomerManualCreationPage.bind(bu)},{urlPattern:"monomers/create/bulk-csv",handler:bu.monomerCreateFromCSVPage.bind(bu)},{urlPattern:"monomers/view/helm-library",handler:bu.monomerViewHELMLibraryPage.bind(bu)},{urlPattern:"monomers/:monomerId/edit",handler:bu.monomerManualEditPage.bind(bu)}]}
var BE=n(977043)
function noOpRoute(){gu.Z.startRUMView("noop_route")}const ZE={domain:"nav",routes:[{urlPattern:"privacy",handler:noOpRoute,legacy:!0},{urlPattern:"terms",handler:noOpRoute,legacy:!0},{urlPattern:"about",handler:noOpRoute,legacy:!0},{urlPattern:"crispr",handler:noOpRoute,legacy:!0},{urlPattern:"editor",handler:bu.editor.bind(bu),legacy:!0},{urlPattern:"projects/",handler:bu.projects.bind(bu),legacy:!0},{urlPattern:"storage",handler:bu.storage.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/f/:folderIdentifier/:itemUrlIdentifier/edit",handler:function folderItemEditor(e,t,n){const{queryKey:a}=(0,T.he)(window.location.href)
bu.folderItemEditor((0,BE.FF)(n),a)},legacy:!0},{urlPattern:":currentUserUrl/f_/:folderIdentifier/",handler:bu.elnFolder.bind(bu),legacy:!0}]}
const qE={domain:"notebook",routes:[{urlPattern:"entry-review-processes",handler:bu.reviewLifecyclesListing.bind(bu),legacy:!0},{urlPattern:"entry-review-processes/configuration",handler:reviewLifecycleConfiguration,legacy:!0},{urlPattern:"entry-review-processes/:reviewLifecycleId",handler:reviewLifecycleConfiguration,legacy:!0},{urlPattern:":currentUserUrl/template-collections/",handler:bu.templateCollections.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/template-collections/:collectionId",handler:bu.templateCollection.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/f/:folderIdentifier/:itemUrlIdentifier/view",handler:printerFriendlyViewHandler,legacy:!0},{urlPattern:":currentUserUrl/templates/:templateUrlIdentifier/view",handler:printerFriendlyViewHandler,legacy:!0},{urlPattern:":currentUserUrl/templates/:templateUrlIdentifier",handler:function templateEditor(e,t){bu.templateEditor(e,Ke.ZP.withPrefixIfMissing(t,_e.TEMPLATE))},legacy:!0},{urlPattern:":currentUserUrl/subtemplates/:subtemplateUrlIdentifier",handler:function subtemplateEditor(e,t){bu.subtemplateEditor(e,Ke.ZP.withPrefixIfMissing(t,_e.SUBTEMPLATE))},legacy:!1},{urlPattern:":currentUserUrl/subtemplates/:subtemplateUrlIdentifier/view",handler:printerFriendlyViewHandler,legacy:!1}]}
function reviewLifecycleConfiguration(e){bu.reviewLifecycleConfiguration(e)}const GE={domain:"notebook",routes:[{urlPattern:"worksheets/:id",handler:bu.worksheetEditor.bind(bu)}]},VE={domain:"onboarding",routes:[{urlPattern:"getting-started",handler:bu.gettingStartedFlow.bind(bu),legacy:!0},{urlPattern:"gs/bioregistry",handler:bu.registryActivationFlow.bind(bu),legacy:!0},{urlPattern:"role-info",handler:bu.roleInfoScreen.bind(bu),legacy:!0}]},HE={domain:"parties",routes:[{urlPattern:"gs/organizations",handler:bu.orgModal.bind(bu),legacy:!0},{urlPattern:"organizations/create",handler:bu.createOrganizationPage.bind(bu),legacy:!0},{urlPattern:"organizations/:organizationUrlIdentifier/",handler:organizationPage,legacy:!0},{urlPattern:"organizations/:organizationUrlIdentifier/create-team",handler:bu.createTeamPage.bind(bu),legacy:!0},{urlPattern:"organizations/:organizationUrlIdentifier(/:section)",handler:organizationPage,legacy:!0},{urlPattern:"users/:userId",handler:userPage,legacy:!0},{urlPattern:"users/:userId/",handler:userPage,legacy:!0},{urlPattern:"users/:userId(/:section)",handler:userPage,legacy:!0},{urlPattern:"teams/:teamId(/:section)",handler:bu.teamPage.bind(bu),legacy:!0}]}
function organizationPage(e,t){bu.organizationPage(e,t)}function userPage(e,t){bu.userPage(e,t)}const WE={domain:"procedures",routes:[{urlPattern:":currentUserUrl/procedures/:procedureId",handler:bu.procedureEditor.bind(bu)},{urlPattern:"procedure-runs/:procedureRunId",handler:bu.procedureRunEditor.bind(bu)}]}
var YE=n(959194)
const $E={domain:"processes",routes:[{urlPattern:"processes",handler:function processesRedirector(){(0,j.ZP)("workflows/",{replace:!0})},legacy:!0},{urlPattern:"workflows",handler:function processes(){S.ZP.WORKFLOWS_ENABLE?bu.sidepanelListing(qt.SA.PROCESSES,(0,YE.s2)()):bu.workflowDashboard()},legacy:!0},{urlPattern:"processes/:processId",handler:function processEditorRedirector(e){(0,j.ZP)(`workflows/${e}`,{replace:!0})},legacy:!0},{urlPattern:"workflows/:processId",handler:bu.processEditor.bind(bu),legacy:!0},{urlPattern:"process-task-schemas",handler:function processTaskSchemasRedirector(){(0,j.ZP)("workflow-task-schemas/",{replace:!0})},legacy:!0},{urlPattern:"workflow-task-schemas",handler:bu.processTaskSchemas.bind(bu),legacy:!0},{urlPattern:"process-task-schemas/create",handler:function processTaskSchemasCreateRedirector(){(0,j.ZP)("workflow-task-schemas/create",{replace:!0})},legacy:!0},{urlPattern:"workflow-task-schemas/create",handler:bu.processTaskSchemasCreate.bind(bu),legacy:!0},{urlPattern:"process-task-schemas/:schemaId",handler:function processTaskSchemaRedirector(e){(0,j.ZP)(`workflow-task-schemas/${e}`,{replace:!0})},legacy:!0},{urlPattern:"workflow-task-schemas/:schemaId",handler:bu.processTaskSchema.bind(bu),legacy:!0},{urlPattern:"workflow-tasks/:processTaskId",handler:bu.processTaskEditor.bind(bu),legacy:!0}]}
var KE=n(871214),zE=n(178132),QE=n(346297),jE=n(921554),JE=n(749183)
const XE="CREATE_NEW",eS="-- Create new library --"
function SupportedColorsDescription(){const[e,t]=(0,d.useState)(!1)
return d.createElement("div",null,d.createElement("div",{onClick:()=>{t(!e)}},d.createElement(f.BB,{className:(0,C.iv)(tS.colorHeader)},!e&&d.createElement(P.Z,{icon:"chevron-right",className:(0,C.iv)(tS.headerChevronIcon)}),e&&d.createElement(P.Z,{icon:"chevron-down",className:(0,C.iv)(tS.headerChevronIcon)}),"Supported hex color codes")),e&&d.createElement("div",null,d.createElement("p",null,"Any color formatted in Hex Color Code (eg. #FF0000) is mapped to the closest Benchling color."),d.createElement(de.iA,{isCompact:!0,numRows:jE.C2.length},d.createElement(de.sg,{header:"Standard Colors",renderCell:e=>d.createElement(de.bL,{className:(0,C.iv)(tS.colorCode)},d.createElement("svg",{height:10,width:15},d.createElement("rect",{fill:jE.C2[e],height:10,width:10})),jE.C2[e])}))))}function ImportFeatureLibraryModal({isCSVImport:e,libraries:t,onRequestClose:n,onRequestSubmit:a}){const[i,r]=(0,d.useState)(null),[s,o]=(0,d.useState)(XE),[l,c]=(0,d.useState)(QE._q.NUCLEOTIDE)
return d.createElement(B.ZP,{buttons:[{text:"Upload",submit:!0,disabled:null==i},{text:"Cancel",cancel:!0}],title:"Import File",onRequestClose:n,onRequestSubmit:()=>{a({file:i,libraryId:s===XE?-1:s.id,matchType:l})}},e&&d.createElement("p",null,"Import a csv file with format ",d.createElement("strong",null,"[name], [feature], [type*], [color*], [match type*]"),". Type, color, and match type are optional."),d.createElement(SupportedColorsDescription,null),d.createElement("div",{className:"form-group"},d.createElement("label",null,"Choose feature library to import into"),d.createElement(w.ZP,{displayName:s===XE?eS:(0,JE.s1)(s),menu:d.createElement(U.ZP,{height:U.ZP.HEIGHTS.MEDIUM,width:U.ZP.WIDTHS.FULL,value:s,scrollable:!0},[d.createElement(x.Z,{key:XE,value:XE,onSelect:o},eS),...t.map((e=>d.createElement(x.Z,{key:e.id,value:e.id,onSelect:()=>{o(e)},metadata:e.description},(0,JE.s1)(e))))])})),e&&d.createElement("div",{className:"form-group"},d.createElement(jn.Z,{title:"Choose a match type for rows where match type is unspecified:",options:[{label:"Nucleotide",value:QE._q.NUCLEOTIDE},{label:"Protein",value:QE._q.PROTEIN}],selectedValue:l,onChange:c})),d.createElement("p",null,e?"Choose a CSV file below.":"Choose an ApE library file (.txt) below."),null!=i&&d.createElement("div",{className:(0,C.iv)(tS.fileName)},i.name),d.createElement(Ar.Z,{onSelectFiles:e=>{r(e)}}))}const tS=C.mM.create({colorHeader:{cursor:"pointer",":hover":{color:b.G$}},colorCode:{fontFamily:ji.HG},headerChevronIcon:ht.aM,fileName:{fontFamily:ji.HG}})
var nS=n(85758),aS=n.n(nS),iS=n(259222)
class EditableTableItemView extends o().View{static initClass(){this.prototype.tagName="tr"}events(){return{}}initialize(e){this.registerListeners()}die(){this.stopListening()
this.undelegateEvents()}registerListeners(){this.listenTo(this.model,"tableFocus",this.handleFocus)
this.listenTo(this.model,"tableUnfocus",this.unfocus)
this.listenTo(this.model,"tableHover",this.handleHover)
this.listenTo(this.model,"tableUnhover",this.unhover)
this.listenTo(this.model,"tableRevert",this.update)
this.listenTo(this.model,"tableCloseColorPicker",this.closeColorPicker)
this.listenTo(this.model,"tableOpenColorPicker",this.openColorPicker)
this.listenTo(this.model,"tableRevert",this.render)
this.listenTo(this.model,"tableInputChange",this.handleInputChange)
this.listenTo(this.model,"change:selected",this.updateSelected)
this.listenTo(this.model,"tableSetEditables",this.setEditables)
this.listenTo(this.model,"tableHoverIcon",this.handleHoverIcon)
this.listenTo(this.model,"tableUnhoverIcon",this.handleUnhoverIcon)}handleInputChange(e,t){const n=this.$getField(e)
n.text()!==t&&n.text(t)}$getField(e){return this.$("[data-type]").filter((function(){return c()(this).data("type")===e}))}closeColorPicker(e){this.$getField(e).popover("hide")}openColorPicker(e){this.$getField(e).popover("show")}handleHoverIcon(e,t){this.$getField(e).parents("td").find(t).addClass("hover")}handleHover(e,t){this.$getField(e).addClass("hover")}handleFocus(e,t){this.$getField(e).addClass("focus")
this.$getField(e).addClass("text-editable")}updateSelected(){this.$el.toggleClass("active",this.model.selected())}setEditables(e,t,n){for(var a of Array.from(e)){this.$(".editable-text[data-type]").filter((function(){return c()(this).data("type")===a})).inlineEditable(t,n)}ue.default.defer((()=>{this.$("div.relative").each((function(e,t){c()(t).height(c()(this).parent("td").height())}))
this.$("div.relative.middle-aligned").each((function(e,t){c()(t).css("line-height",`${c()(this).height()}px`)}))}),this)}update(){this.model.trigger("render",this.model)}render(){this.$el.addClass("editable-table-row")
this.model.trigger("render",this.model)}}EditableTableItemView.initClass()
const rS=EditableTableItemView
class EditableTableView extends o().View{static initClass(){this.prototype.rowIncrement=1/0
this.prototype.className="editable-table"
this.prototype.editableFields=[]
this.prototype.tagName="tbody"
this.prototype.rows=[]
this.prototype.models=[]
this.prototype.paginatedModels=[]}events(){return{"click .edit-text":"handleEditText","click .delete-text":"handleDeleteText","mouseenter .edit-text":function(e){return this.handleIconHover(e,".edit-text")},"mouseenter .delete-text":function(e){return this.handleIconHover(e,".delete-text")},"mouseleave .edit-text":"handleIconUnhover","mouseleave .delete-text":"handleIconUnhover","click .editable-text":"handleEditableClick","focus .editable-text":function(e){return this.handleEditableFocus(e,"text")},"focus .editable-check":function(e){return this.handleEditableFocus(e,"check")},"click .editable-check":"handleEditableCheckClick","input .editable-text":"handleEditableInput","input .editable-check":"handleEditableInput","click .editable-select":"handleEditableSelectClick","change .editable-select":"handleEditableSelectChange","change .editable-color":"handleEditableColorChange","click .editable-color":"handleEditableColorClick","click tr":"handleClick","blur .editable-text":"handleEditableUnfocus","mouseenter .editable-text":function(e){return this.handleEditableHover(e,"text")},"mouseenter .editable-check":function(e){return this.handleEditableHover(e,"check")},"mouseleave .editable-text":"handleEditableUnhover","mouseleave .editable-check":"handleEditableUnhover"}}initialize(){this.shiftAnchorIndex=null
this.pageOffset=0
this.$el.addClass(this.className)
this.registerListeners()
this.renderedRows=[]
return this.rows=[]}die(){this.stopListening()
this.undelegateEvents()
for(const e of Array.from(this.renderedRows))e.die()}registerListeners(){return this.listenTo(this.collection,"render",this.setEditables)}allowEdits(){return!0}allowSelecting(){return!0}getRowIndex(e){return c()(e.currentTarget).parents("tr.editable-table-row").index()}trackFieldEdit(e,t){}handleEditableSelectClick(e){const t=this.getRowIndex(e)
return this._handleClickHelper(e,t)}handleEditableSelectChange(e){const t=this.getRowIndex(e)
this.getModel(t).selected()||this._handleClickHelper(e,t)
const n=this.getEditableType(c()(e.currentTarget)),a=c()(e.currentTarget).val()
return this._handleUpdateHelper(n,a)}handleIconHover(e,t){if(!this.allowEdits())return
const n=this.getRowIndex(e),a=this.getEditableType(this.getEditableFieldFromSibling(e))
return this.getModel(n).selected()?ue.default.each(ue.default.filter(this.paginatedModels,(e=>e.selected())),(e=>e.trigger("tableHoverIcon",a,t))):this.getModel(n).trigger("tableHoverIcon",a,t)}handleIconUnhover(e){return this.$el.find(".edit-text.hover, .delete-text.hover").removeClass("hover")}handleEditableCheckClick(e){e.stopPropagation()
const t=this.getRowIndex(e)
this.getModel(t).selected()||this._handleClickHelper(e,t)
if(!this.allowEdits())return
const n=this.getEditableType(c()(e.currentTarget)),a=c()(e.currentTarget).data("prefix")
return c()(e.currentTarget).hasClass("true")?this._handleUpdateHelper(n,void 0,a):this._handleUpdateHelper(n,"",a)}handleEditableColorChange(e,t){const n=this.getEditableType(c()(e.currentTarget))
this.getModel(this.getRowIndex(e)).trigger("tableCloseColorPicker",n)
return this._handleUpdateHelper(n,t)}handleEditableColorClick(e){e.stopPropagation()
const t=this.getRowIndex(e),n=this.getModel(t)
n.selected()||this._handleClickHelper(e,t)
if(!this.allowEdits())return
const a=this.getEditableType(c()(e.currentTarget))
return Array.from(this.paginatedModels).map((e=>e!==n?e.trigger("tableCloseColorPicker",a):e.trigger("tableOpenColorPicker",a)))}handleEditableInput(e){const t=this.getEditableType(c()(e.currentTarget)),n=c()(e.currentTarget).text()
return ue.default.each(ue.default.filter(this.paginatedModels,(e=>e.selected())),(e=>e.trigger("tableInputChange",t,n)))}handleEditableHover(e,t){if(!this.allowEdits())return
const n=this.getRowIndex(e),a=this.getEditableType(c()(e.currentTarget))
return this.getModel(n).selected()?ue.default.each(ue.default.filter(this.paginatedModels,(e=>e.selected())),(e=>e.trigger("tableHover",a,t))):this.getModel(n).trigger("tableHover",a,t)}handleEditableUnfocus(e){this.trackFieldEdit(this.getEditableType(c()(e.currentTarget)),c()(e.currentTarget).text())
this.$el.find(".editable-text, .editable-check").removeClass("focus")
this.$el.find(".editable-check").not(".hover").removeClass("text-editable")}handleEditableUnhover(e){return this.$el.find(".editable-text, .editable-check").removeClass("hover")}handleEditableClick(e){e.stopPropagation()
const t=this.getRowIndex(e)
this.getModel(t).selected()||this._handleClickHelper(e,t)
return this.handleEditableFocus(e,"text")}handleEditableFocus(e,t){if(!this.allowEdits())return
if(!this.getModel(this.getRowIndex(e)).selected())return
const n=this.getEditableType(c()(e.currentTarget))
return Array.from(this.paginatedModels).map((e=>e.selected()?e.trigger("tableFocus",n,t):e.trigger("tableUnfocus",n,t)))}getEditableType(e){const t=e.data("type")
if(!Array.from(this.editableFields).includes(t))throw new Error(`Unexpected element type: ${t}`)
return t}handleEditText(e){e.stopPropagation()
const t=this.getRowIndex(e)
this.getModel(t).selected()||this._handleClickHelper(e,t)
const n=c()(e.currentTarget).parents("td")
if(n.find(".editable-text").size()>0)return n.find(".editable-text").focus()
if(n.find(".editable-check").size()>0){const t=this.getEditableType(this.getEditableFieldFromSibling(e))
for(const e of Array.from(this.paginatedModels))e.selected()?e.trigger("tableFocus",t,"text"):e.trigger("tableUnfocus",t,"text")
return n.find(".editable-check").attr("tabindex",-1).inlineEditable(ue.default.bind(this.handleUpdate,this),ue.default.bind(this.handleRevert,this)).focus()}}getEditableFieldFromSibling(e){return c()(e.currentTarget).parents("td").find(".editable-check, .editable-text, .editable-color, .editable-select")}handleDeleteText(e){e.stopPropagation()
const t=this.getRowIndex(e)
this.getModel(t).selected()||this._handleClickHelper(e,t)
const n=this.getEditableFieldFromSibling(e),a=this.getEditableType(n),i=n.data("prefix")
return this._handleUpdateHelper(a,void 0,i)}handleClick(e){const t=c()(e.currentTarget).index()
return this._handleClickHelper(e,t)}getModel(e){return this.models[e+this.pageOffset]}_handleClickHelper(e,t){if(!this.allowSelecting())return
const n=this.getModel(t)
if(e.ctrlKey||e.metaKey)return n.selected()?n.set({selected:!1}):n.select({multi:!0})
if(e.shiftKey){if(null!=this.shiftAnchorIndex){n.select()
return function __range__(e,t,n){const a=[],i=e<t,r=n?i?t+1:t-1:t
for(let t=e;i?t<r:t>r;i?t++:t--)a.push(t)
return a}(this.shiftAnchorIndex,t+this.pageOffset,!0).map((e=>this.models[e].select({multi:!0})))}n.select()
return this.shiftAnchorIndex=t+this.pageOffset}n.select()
return this.shiftAnchorIndex=t+this.pageOffset}getRows(){throw new Error("Not implemented.")}makeRow(){throw new Error("Not implemented.")}handleUpdate(e){const t=this.getEditableType(c()(e.currentTarget)),n=c()(e.currentTarget).text(),a=c()(e.currentTarget).data("prefix")
return this._handleUpdateHelper(t,n,a)}_handleUpdateHelper(e,t){throw new Error("Not implemented.")}handleRevert(){return ue.default.each(this.collection.where({selected:!0}),(e=>e.trigger("tableRevert")))}renderMore(){const e=ue.default.map(this.rows.splice(0,Math.min(this.rowIncrement,this.rows.length)),(function(e){return this.makeRow(e)}),this)
this.renderedRows.push(...Array.from(e||[]))
return this.$el.append(ue.default.map(e,(e=>e.render().el)))}remove(){super.remove()
for(const e of Array.from(this.renderedRows))e.remove()
return this.renderedRows=[]}update(){for(;this.renderedRows.length>0;)this.renderedRows.pop().remove()
this.rows=this.getRows()
this.$el.empty()
this.renderMore()
this.allowEdits()||this.$el.find("select").attr("disabled",!0)
return ue.default.defer((()=>{this.$el.find("div.relative").each((function(e,t){return c()(t).height(c()(this).parent("td").height())}))
return this.$el.find("div.relative.middle-aligned").each((function(e,t){return c()(t).css("line-height",`${c()(this).height()}px`)}))}))}setEditables(e){if(this.allowEdits())return e.trigger("tableSetEditables",this.editableFields,ue.default.bind(this.handleUpdate,this),ue.default.bind(this.handleRevert,this))}render(){this.update()
const e=this.$el.closest(".buffer-tab")
e.on("scroll",(()=>{if(e.scrollTop()+30>this.$el.height()-e.height())return this.renderMore()}))
return this}}EditableTableView.initClass()
var sS=n(659680)
const oS=(0,sS.Z)((function LibraryItem({feature:e}){return d.createElement(d.Fragment,null,d.createElement("td",null,d.createElement("input",{type:"checkbox",className:"checkbox-active",defaultChecked:e.selected})),d.createElement("td",{className:"color"},d.createElement("div",{"data-type":"color",style:{backgroundColor:e.color},className:"swatch editable-color"})),d.createElement("td",null,d.createElement("span",{"data-type":"name",className:"text editable editable-text"},e.name)),d.createElement("td",null,d.createElement("span",{className:"match_type"},e.match_type)),d.createElement("td",null,d.createElement("div",{"data-type":"feature_type",className:"text editable editable-text"},e.feature_type)),d.createElement("td",null,d.createElement("div",{"data-type":"bases",className:"text editable editable-text"},e.bases)))}))
var lS=n(132814)
class LibraryActionMenu extends o().View{static initClass(){this.prototype.events={"change .select-all-checkbox input":"toggleSelected","click .move-options a":"doMove","click .library-actions .delete-button":"doDelete"}}initialize(e){}die(){this.stopListening()
this.undelegateEvents()}toggleSelected(e){c()(e.target).prop("checked")?this.members.each((e=>{e.select({multi:!0})})):this.members.deselect()
this.updateActions()}doMove(e){let t
const n=c()(e.target).data("libraryId"),a=this.library.collection.get(n),i=this.members.where({selected:!0})
if(0===i.length)return
this.members.deselect()
this.members.remove(i)
a.get("features").add(i)
const r=[]
for(t of Array.from(i))r.push({id:t.id,library_id:n})
c().ajax({type:"PATCH",url:i[0].bulkUrl(),data:JSON.stringify(r),contentType:"application/json"}).fail(rt.ZP.notifyError).done((()=>{this.updateActions()
for(t of Array.from(i)){t.set({library_id:n})
h.j("feature_library","moved_feature",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,sourceFeatureLibraryId:this.library.get("api_identifier"),destinationFeatureLibraryId:a.get("api_identifier"),featureId:t.id})}rt.ZP.success(`Successfully moved ${i.length} items to **${a.get("name")}**.`)}))}doDelete(){const e=this.members.where({selected:!0})
if(0!==e.length){this.members.remove(e)
this.updateActions()
c().ajax({type:"DELETE",url:e[0].bulkUrl(),data:JSON.stringify(Array.from(e).map((e=>e.id))),contentType:"application/json"}).fail(rt.ZP.notifyError).done((()=>{rt.ZP.success(`Successfully deleted ${e.length} item(s).`)
e.forEach((e=>{h.j("feature_library","deleted_feature",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,featureLibraryId:this.library.get("api_identifier"),featureId:e.id})}))}))}}updateActions(){const e=this.$el.find(".library-item input[type=checkbox]").length,t=this.members.where({selected:!0}).length
this.$el.find(".select-all-checkbox input").prop({checked:t>0,indeterminate:t>0&&t<e})
t>0?this.$el.find(".actions .btn").removeClass("disabled"):this.$el.find(".actions .btn").addClass("disabled")}update(e){this.library=e
null!=this.members&&this.stopListening(this.members)
this.members=this.library.get("features")
this.listenTo(this.members,"change:selected",this.updateActions.bind(this))
this.render()}render(){let e
if(!this.library.get("permissions").writable){this.$el.find(".library-actions").addClass("hidden")
this.$el.find(".library-list").addClass("non-writable")
return this}this.$el.find(".library-actions").removeClass("hidden")
this.$el.find(".library-list").removeClass("non-writable")
const t=c()(".actions .move-options"),n=[]
for(e of this.library.collection.models){if(!e.get("permissions").writable||e.id===this.library.id)continue
const t=c()("<li>")
n.push(t.append(c()("<a>").text(e.get("name")).data("libraryId",e.id)))}if(n.length>0)t.html(n)
else{const e=c()('<li class="disabled">')
e.append(c()("<a>").text("No possible libraries"))
t.html(e)}this.$el.find(".select-all-checkbox input").prop({checked:!1,indeterminate:!1})
this.$el.find(".library-item input[type=checkbox]").prop("checked",!1)
this.$el.find(".actions .btn").addClass("disabled")
return this}}LibraryActionMenu.initClass()
class FeatureTableView extends EditableTableView{static initClass(){this.prototype.editableFields=["name","feature_type","bases","color"]}initialize(e){this.library=e.library
this.collection=this.library.get("features")
this.comparators={type:e=>e.annotationType().toLowerCase(),name:e=>e.name().toLowerCase(),start:e=>e.start(),end:e=>e.end(),strand:e=>e.strand(),length:t=>lS.length(t.start(),t.end(),e.sequence.length())}
this.comparator="name"
this.reverse=!1
super.initialize()}allowEdits(){return this.library.get("permissions").writable}allowSelecting(){return this.allowEdits()}_handleUpdateHelper(e,t){let n
const a=this.collection.where({selected:!0}).length,i={}
i[e]=t
for(const e of this.collection.where({selected:!0})){const t=e.validate(Object.assign(e.toJSON(),i))
if(t){this.update()
rt.ZP.error(t)
return}}const r=this.collection.where({selected:!0})
if(r.length>0){const i=[]
for(n of Array.from(r))i.push({id:n.id})
for(const n of i)n[e]=t
for(n of Array.from(r))n.set(e,t)
c().ajax({type:"PATCH",url:r[0].bulkUrl(),data:JSON.stringify(i),contentType:"application/json"}).fail((e=>{this.batchFetch()
rt.ZP.notifyError(e)})).done((()=>{rt.ZP.success(`${a} feature${1!==a?"s were":" was"} saved successfully.`)
r.forEach((e=>{h.j("feature_library","edited_feature",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,featureLibraryId:this.library.get("api_identifier"),featureId:e.id})}))}))}this.render()}reset(e){this.library=e
this.collection=e.get("features")
this.stopListening()
this.registerListeners()
this.render()}batchFetch(){this.library.fetch({merge:!0}).done(this.update.bind(this))}makeRow(e){return new FeatureItemView({model:e})}getRows(){let{models:e}=this.collection
this.reverse&&(e=e.reverse())
this.models.splice(0,this.models.length,...e)
this.paginatedModels.splice(0,this.paginatedModels.length,...e)
return e.slice()}}FeatureTableView.initClass()
class FeatureItemView extends rS{static initClass(){this.prototype.template=oS
this.prototype.tagName="tr"
this.prototype.className="library-item"}events(){return Object.assign(super.events(),{"click .checkbox-active":"updateActiveFromCheckbox"})}deleteItem(e){e.stopPropagation()
return this.model.destroy().done((()=>{rt.ZP.success("Item deleted successfully.")})).fail(rt.ZP.notifyError)}initialize(e){this.colorPicker=new iS.Z
super.initialize()}die(){super.die()
this.colorPicker.die()}update(){this.$el.find(".name").html(ue.default.escape(this.model.name()))
this.$el.find(".bases").val(this.model.bases())
this.$el.find(".feature_type").val(this.model.featureType())
return this.colorPicker.update(this.model)}updateActiveFromCheckbox(e){e.stopPropagation()
this.$el.find(".checkbox-active").prop("checked")?this.model.select({multi:!0}):this.model.set({selected:!1})}updateSelected(){super.updateSelected()
this.$el.find(".checkbox-active").prop("checked",this.model.selected())}render(){this.$el.html(oS({feature:this.model.toJSON()}))
this.colorPicker.attach(this.$el.find(".swatch"),"manual","body")
this.colorPicker.update(this.model)
this.updateSelected()
super.render()
return this}}FeatureItemView.initClass()
class LibraryView extends o().View{static initClass(){this.prototype.el=".library-view"
this.prototype.events={"click .new-library-member .color-chooser li":"chooseColor","click th span.comparator":"handleSort","submit form.create-feature":"createLibraryMember"}}initialize(e){this.libraryMember=e.libraryMember
this.collectionName=e.collectionName
this.comparator="name"
this.reverse=!1
this.actionMenu=new LibraryActionMenu({el:this.$el.find(".library-data")})}die(){this.stopListening()
this.undelegateEvents()
this.actionMenu.die()
null!=this.table&&this.table.die()}chooseColor(e){const t=c()(e.target)
t.parent().find(".active").removeClass("active")
t.addClass("active")}createLibraryMember(e){e.preventDefault()
const t={name:this.$el.find(".new-library-member .name").val(),bases:this.$el.find(".new-library-member .bases").val(),color:aS().rgb(this.$el.find(".new-library-member .color-chooser .active").css("background-color")).toString(),match_type:this.$el.find(".match_type:checked").val(),library_id:this.library.id},n=this.$el.find(".new-library-member .type")
0!==n.length&&(t.feature_type=n.val())
const a=new this.libraryMember(t),i=a.validate(a.toJSON())
i?rt.ZP.error(i):a.save().done((()=>{this.library.get(this.collectionName).add(a)
this.$el.find(".new-library-member input:text, .new-library-member textarea").val("")
rt.ZP.success("Item added to folder successfully.")
this.$el.find(".new-library-member .color-chooser li").eq(0).addClass("active")
h.j("feature_library","added_feature",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,featureLibraryId:this.library.get("api_identifier"),featureId:a.id,featureType:a.get("feature_type"),matchType:a.get("match_type"),name:a.get("name")})})).fail(rt.ZP.notifyError)}update(e){this.library=e
this.stopListening()
this.members=this.library.get(this.collectionName)
this.listenTo(this.members,"add remove",this.render.bind(this))
this.actionMenu.update(this.library)}handleSort(e){const t=c()(e.currentTarget).attr("data-name")
t===this.comparator&&(this.reverse=!this.reverse)
this.comparator=t
this.members.comparator=this.comparator
this.members.sort()
this.render()}render(){this.$el.find(".library-name").text(this.library.get("name")).removeClass("hidden")
this.library.get("permissions").writable?this.$el.find(".new-library-member").removeClass("hidden"):this.$el.find(".new-library-member").addClass("hidden")
const e=ue.default.clone(this.members.models)
this.reverse&&e.reverse()
this.table?this.table.reset(this.library):this.table=new FeatureTableView({el:this.$el.find("tbody"),library:this.library,collection:this.members})
this.table.render()
const t=this.$el.find(".new-library-member .color-chooser")
if(0===t.find("li").length)for(const e of jE.C2){const n=c()("<li>").css("background-color",e)
t.append(n)}this.$el.find(".help").tooltip({placement:"top",container:"body"})
this.$el.find(".new-library-member .color-chooser li").eq(0).addClass("active")
return this}}LibraryView.initClass()
const cS=LibraryView
var dS=n(573961)
const uS=(0,sS.Z)((function OwnableChoice({owner_handle:e,writable:t,name:n}){return d.createElement("span",null,d.createElement("span",{className:"ownable-owner"},e,!t&&d.createElement("span",{className:"glyphicon glyphicon-eye-open"}))," ",n)}))
function OwnablePage_ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function OwnablePage_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?OwnablePage_ownKeys(Object(n),!0).forEach((function(t){OwnablePage_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OwnablePage_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OwnablePage_defineProperty(e,t,n){(t=function OwnablePage_toPropertyKey(e){var t=function OwnablePage_toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class OwnablePage extends d.Component{constructor(...e){super(...e)
OwnablePage_defineProperty(this,"state",{isSettingsModalShown:!1})
OwnablePage_defineProperty(this,"_handleChangeIsSettingsModalShown",(e=>{this.setState({isSettingsModalShown:e})}))
OwnablePage_defineProperty(this,"_getExistingOwnable",(()=>{const{name:e,description:t,ownerInfo:n,owner:a}=this.props.ownable
return{name:e,description:t,ownerInfo:n,collaborators:this.props.collaborators,owner:a}}))
OwnablePage_defineProperty(this,"_handleSubmit",(e=>this.props.onRequestSubmit(OwnablePage_objectSpread(OwnablePage_objectSpread({},e),{},{owner:e.owner.handle}))))}render(){const e=(0,Ot.co)((0,Ot.E2)(this.props.ownableType))
return d.createElement(gs.Z,{title:this.props.ownable.name,type:e,isSettingsShown:this.state.isSettingsModalShown,onChangeIsSettingsShown:this._handleChangeIsSettingsModalShown,onExport:this.props.onExport},d.createElement("div",{className:"u-tiny-spacing-top"},this.props.ownable.description),this.state.isSettingsModalShown&&d.createElement(Ds.Z,{open:!0},d.createElement(Is.Z,{onRequestClose:()=>this._handleChangeIsSettingsModalShown(!1),ownableType:this.props.ownableType,existingOwnable:this._getExistingOwnable(),doSubmit:this._handleSubmit,doDelete:this.props.onRequestDelete,showConfirmDelete:!0,navigateOnSuccess:!1,isReadOnly:!this.props.ownable.permissions.admin})))}}OwnablePage_defineProperty(OwnablePage,"propTypes",{ownableType:Ps().string.isRequired,ownable:Ps().shape({name:Ps().string.isRequired,owner:wu.fF.isRequired,description:Ps().string.isRequired,ownerInfo:yt.Mg.isRequired,permissions:yt.OD}).isRequired,collaborators:Ps().arrayOf(yt.fN.isRequired),onExport:Ps().func,onRequestSubmit:Ps().func.isRequired,onRequestDelete:Ps().func.isRequired})
const mS=OwnablePage
function OwnablesManageView_defineProperty(e,t,n){(t=function OwnablesManageView_toPropertyKey(e){var t=function OwnablesManageView_toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}const pS={}
class OwnablesManageView extends o().View{constructor(...e){super(...e)
OwnablesManageView_defineProperty(this,"handleDelete",(()=>{const e=this.currentOwnable.get("name"),t=this.currentOwnable.get("api_identifier")
return this.currentOwnable.destroy().done((()=>{"feature-libraries"===this.type?h.j("feature_library","deleted",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,featureLibraryId:t}):h.j("data_management","deleted_ownable",{type:this.type,name:e})
this.ownables.length>0?this.navigateToOwnable(this.ownables.at(0).id):this.navigateToOwnable(null)}))}))
OwnablesManageView_defineProperty(this,"handleSaveSubmit",(e=>this.currentOwnable.save(e,{patch:!0,wait:!0}).done((()=>{"feature-libraries"===this.type?h.j("feature_library","updated",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,featureLibraryId:this.currentOwnable.get("api_identifier")}):h.j("data_management","updated_ownable",{type:this.type})}))))}events(){return{"click .existing-items a":"selectOwnableFromList","submit .edit-meta":"handleSaveSubmit","submit .delete-ownable":"handleDelete"}}initialize(e){this.currentCollaborators=null
this.ownables=null!=pS[this.type]?pS[this.type]:pS[this.type]=this.constructor.getBootstrappedOwnables()
this.ownables.comparator=e=>`${e.get("owner_handle")}-${e.get("name")}`
this.listenTo(this.ownables,"sync",this.renderOwnable)
this.listenTo(this.ownables,"add remove change:name",this.renderOwnables);({ownableId:this.ownableId}=e)
this.currentOwnable=this.ownables.get(this.ownableId)}die(){this.stopListening()
this.undelegateEvents()
this.$el.find(".ownable-content").addClass("hidden")
dS.unmountComponentAtNode(this.el.querySelector(".react-mount"))}createCollaboratorsView(e,{onExport:t=null}={}){(0,ro.A9)(d.createElement(mS,{ownableType:this.modelType,ownable:this.currentOwnable.attributes,collaborators:e,onExport:t,onRequestSubmit:this.handleSaveSubmit,onRequestDelete:this.handleDelete}),this.el.querySelector(".react-mount"))}selectOwnableFromList(e){e.preventDefault()
const t=c()(e.currentTarget).data("ownableId")
this.navigateToOwnable(t)}navigateToOwnable(e,t){if(window.test_user)return
const n=ue.default.initial(window.location.pathname.split("/"))
n.push(null!=e?e:"");(0,j.ZP)(n.join("/"),t)}ownableToHtml(e){return uS(e.toJSON())}renderOwnable(){"feature-libraries"===this.type?h.j("feature_library","viewed",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.READ,featureLibraryId:this.currentOwnable.get("api_identifier")}):h.j("DATA_MANAGEMENT","select_ownable",{type:this.type,id:this.currentOwnable.id})
this.$el.find(".ownable-content").removeClass("hidden")
this.createCollaboratorsView([])}renderOwnables(){const e=this.$el.find(".create-new .dropdown-toggle .dropdown-text"),t=this.$el.find(".create-new .existing-items")
t.empty()
if(this.ownables.models.length>0){t.prop("disabled",!1)
for(const e of Array.from(this.ownables.models)){const n=c()("<a>").attr("href","#").html(this.ownableToHtml(e)).data("ownableId",e.id),a=c()("<li>").append(n)
e.id===(null!=this.currentOwnable?this.currentOwnable.id:void 0)&&a.addClass("selected")
t.append(a)}null!=this.currentOwnable&&e.html(this.ownableToHtml(this.currentOwnable))
e.parent().removeClass("disabled")}else e.text("No existing items.").parent().addClass("disabled")}render(){if(null!=this.ownableId&&null==this.currentOwnable){rt.ZP.error("The item you were looking for no longer exists.")
this.navigateToOwnable(null,{replace:!0})
return this}this.renderOwnables()
null!=this.currentOwnable?this.renderOwnable():this.$el.find(".tab-panel").addClass("hide")
return this}}const hS=OwnablesManageView
var ES=n(717235)
let SS=null
class FeatureLibrariesView extends hS{static initClass(){this.prototype.el=".js-feature-libraries"
this.prototype.type="feature-libraries"
this.prototype.modelType=_e.FEATURE_LIBRARY}events(){return ue.default.extend(super.events(),{"submit .create-new form":"createNewLibrary","submit .edit-permissions":"addCollaborator","click .ape-import":function(){return this.import(QE.xc.APE)},"click .csv-import":function(){return this.import(QE.xc.CSV)}})}static getBootstrappedOwnables(){null==SS&&(SS=new zE.FE(window.bootstrap.feature_libraries))
return SS}initialize(e){this.libraryView=new cS({libraryMember:zE.L0,collectionName:"features"})
super.initialize(e)}die(){super.die()
this.libraryView.die()}import(e){const t=this.ownables,n=this.navigateToOwnable.bind(this)
return(0,D.Z)(ImportFeatureLibraryModal,{isCSVImport:e===QE.xc.CSV,libraries:this.ownables.filter((e=>e.get("permissions").writable)).map((e=>e.toJSON()))}).then((a=>{if(null==a)return
const{file:i,libraryId:r,matchType:s}=a,o=new FormData
o.append("file",i)
o.append("library_id",r.toString())
o.append("owner_id",window.bootstrap.current_entity_id)
o.append("file_type",e)
o.append("match_type",s)
c().ajax({url:"/1/api/feature-libraries/import",data:o,processData:!1,contentType:!1,dataType:"json",type:"POST"}).done((a=>{rt.ZP.success("File successfully imported.")
let i=new zE.Hn(a)
i=t.add(i,{merge:!0})
n(i.id)
h.j("feature_library","imported_features",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,featureLibraryId:i.get("api_identifier"),fileType:e})})).fail(rt.ZP.notifyError)}))}createNewLibrary(e){e.preventDefault()
const t=new zE.Hn({name:this.$el.find(".create-new .name").val(),description:this.$el.find(".create-new .description").val(),owner_id:window.bootstrap.current_entity_id})
return t.save().done((()=>{this.ownables.add(t)
this.$el.find(".create-new .name").val("")
this.$el.find(".create-new .description").val("")
this.navigateToOwnable(t.id)
rt.ZP.success("Library created successfully!")
h.j("feature_library","created",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.WRITE,featureLibraryId:t.get("api_identifier")})})).fail(rt.ZP.notifyError)}handleExport(){const e=this.currentOwnable.get("features").toArray().map((e=>[e.get("name"),e.get("bases"),e.get("feature_type"),e.get("color"),e.get("match_type")]))
KE.yP(`${this.currentOwnable.get("name")}.csv`,`Name,Feature,Type,Color,Match type\n${(0,ES.VB)(e,",")}`)
h.j("feature_library","exported",{product:Ie.XC.MOLBIO,actionCategory:Ie.Jw.READ,featureLibraryId:this.currentOwnable.get("api_identifier")})}renderOwnable(){super.renderOwnable()
const e=this.currentOwnable
this.libraryView.update(e)
this.libraryView.render()
c().getJSON(`/1/api/feature-libraries/${e.id}/collaborators/`).done((e=>{this.createCollaboratorsView(e,{onExport:()=>{this.handleExport()}})})).fail(rt.ZP.notifyError)}}FeatureLibrariesView.initClass()
const TS=FeatureLibrariesView
const gS=(0,sS.Z)((function EnzymeListRow({enzyme:e,writable:t}){return d.createElement(d.Fragment,null,d.createElement("td",{className:"mono"},e.name()),t&&d.createElement("td",{className:"mono remove"},d.createElement("span",{className:"close"},"")))}))
const fS=(0,sS.Z)((function EnzymeRow({enzyme:e}){return d.createElement("td",{className:"mono"},e.name())}))
var IS=n(146238)
class EnzymeList extends o().Model{url(){const e="/1/api/enzyme-lists/"
return null!=this.get("id")?e+this.get("id"):e}defaults(){return{name:"",description:"",members:[]}}parse(e){null==this.enzymes&&(this.enzymes=IS.ZP.getCommonEnzymes())
const{members:t}=e
e.members=Array.from(t).map((e=>this.enzymes.get(e)))
return e}}const AS=EnzymeList
class EnzymeListsView_EnzymeListRow extends o().View{static initClass(){this.prototype.tagName="tr"
this.prototype.className="enzyme-row"
this.prototype.template=gS
this.prototype.events={"click .close":"unselect"}}initialize({writable:e}){this.writable=e}die(){this.stopListening()
this.undelegateEvents()}unselect(){return this.model.set({active:!1})}render(){this.$el.html(this.template({enzyme:this.model,writable:this.writable}))
return this}}EnzymeListsView_EnzymeListRow.initClass()
class CommonEnzymeRowView extends o().View{static initClass(){this.prototype.tagName="tr"
this.prototype.className="enzyme-row"
this.prototype.template=fS
this.prototype.events={click:"selectEnzyme"}}initialize(){this.listenTo(this.model,"change:active",this.render)
return this.listenTo(this.model,"change:catalogVisible",this.render)}selectEnzyme(){return this.model.set({active:!this.model.get("active")})}die(){this.stopListening()
this.undelegateEvents()}render(){if(!this.model.get("catalogVisible")){this.$el.addClass("hidden")
return this}this.$el.removeClass("hidden")
this.$el.html(this.template({enzyme:this.model}))
this.model.get("active")?this.$el.addClass("active"):this.$el.removeClass("active")
return this}}CommonEnzymeRowView.initClass()
class EnzymeListContentView extends o().View{static initClass(){this.prototype.el=".enzyme-list-table tbody"}initialize({enzymes:e}){this.enzymes=e
this.listenTo(this.enzymes,"change:active",this.render)
return this.listenTo(this.enzymes,"inventoryChange",this.render)}update(e){return this.list=e}die(){this.stopListening()
this.undelegateEvents()
if(null!=this.itemViews)for(const e of Array.from(this.itemViews))e.die()}render(){if(null!=this.itemViews)for(const e of Array.from(this.itemViews))e.die()
const e=this.enzymes.filter((e=>e.get("active"))),{writable:t}=this.list.get("permissions")
this.itemViews=ue.default.map(e,(e=>new EnzymeListsView_EnzymeListRow({model:e,writable:t}).render()))
const n=ue.default.map(this.itemViews,(e=>e.el))
if(n.length>0)this.$el.html(n)
else{let e
e=t?c()("<p>").html("<em>This list is empty - add enzymes by clicking on them from the right.</em>"):c()("<p>").html("<em>This list is empty.</em>")
this.$el.html(e)}return this}}EnzymeListContentView.initClass()
class CommonEnzymesView extends o().View{static initClass(){this.prototype.el=".common-enzymes-table tbody"}die(){this.stopListening()
this.undelegateEvents()
if(null!=this.itemViews)for(const e of Array.from(this.itemViews))e.die()}render(){if(null!=this.itemViews)for(const e of Array.from(this.itemViews))e.die()
this.itemViews=this.model.map((e=>new CommonEnzymeRowView({model:e}).render()))
const e=this.itemViews.map((e=>e.el))
this.$el.html(e)
return this}}CommonEnzymesView.initClass()
class EnzymeLists extends o().Collection{static initClass(){this.prototype.model=AS}}EnzymeLists.initClass()
let yS=null
class EnzymeListsView extends hS{static initClass(){this.prototype.el=".js-enzyme-lists"
this.prototype.type="enzyme-lists"
this.prototype.modelType=_e.ENZYME_LIST}events(){return ue.default.extend(super.events(),{"change .search":"filter","keyup .search":"filter","submit .create-new form":"createNewList","click .save-enzymes":"saveEnzymes"})}static getBootstrappedOwnables(){null==yS&&(yS=new EnzymeLists(window.bootstrap.enzyme_lists,{parse:!0}))
return yS}initialize(e){this.enzymes=IS.ZP.getCommonEnzymes()
this.enzymeContent=new EnzymeListContentView({enzymes:this.enzymes})
this.commonEnzymes=new CommonEnzymesView({model:this.enzymes})
super.initialize(e)}die(){super.die()
this.enzymeContent.die()
this.commonEnzymes.die()}saveEnzymes(){this.$(".save-enzymes").addClass("disabled")
return this.currentOwnable.save({members:Array.from(this.enzymes.where({active:!0})).map((e=>e.id))},{patch:!0,url:`${this.currentOwnable.url()}/attributes`}).always((()=>this.$(".save-enzymes").removeClass("disabled"))).done((()=>rt.ZP.success("Enzyme list successfully updated."))).fail(rt.ZP.notifyError)}filter(){const e=this.$el.find(".search").val().split(" ")
return this.enzymes.each((t=>{let n=!0
const a=t.get("name").toLowerCase()
for(const t of Array.from(e))n=n&&a.indexOf(t.toLowerCase())>=0
return t.set("catalogVisible",n)}))}createNewList(e){e.preventDefault()
const t=new AS({name:this.$el.find(".create-new .name").val(),description:this.$el.find(".create-new .description").val(),owner_id:window.bootstrap.current_entity_id})
return t.save().done(ue.default.bind((function(){this.$el.find(".create-new .name, .create-new .description").val("")
this.ownables.add(t)
this.navigateToOwnable(t.id)
rt.ZP.success("List created successfully!")
return h.j("DATA_MANAGEMENT","created_ownable",{type:this.type,name:t.get("name"),has_description:t.get("description").length>0})}),this)).fail(rt.ZP.notifyError)}renderOwnable(){let e
super.renderOwnable()
const t=this.currentOwnable
this.enzymeContent.update(t)
const n=(()=>{const n=[]
for(e of Array.from(t.get("members")))n.push(e.id)
return n})()
for(e of Array.from(this.enzymes.models))e.set({active:Array.from(n).includes(e.id)},{silent:!0})
this.enzymes.trigger("inventoryChange")
this.commonEnzymes.render()
this.$el.find(".common-enzymes-disabled").toggleClass("hidden",t.get("permissions").writable)
this.$el.find(".save-enzymes").toggleClass("hidden",!t.get("permissions").writable)
c().getJSON(`/1/api/enzyme-lists/${t.id}/collaborators/`).done((e=>this.createCollaboratorsView(e))).fail(rt.ZP.notifyError)}}EnzymeListsView.initClass()
const _S=EnzymeListsView
var CS=n(614392)
class HomeView extends o().View{static initClass(){this.prototype.el="#home"
this.prototype.events={"click .collapse-toggle":"toggleCollapse","click .home-recently-accessed .delete-icon":"deleteSequence"}}deleteSequence(e){return new CS.I4({title:"Delete Sequence",msg:"Are you sure you want to delete the sequence? It cannot be recovered."}).choice("Cancel","btn-af-default").choice("Delete","btn-af-danger",(()=>c().ajax({type:"DELETE",url:c()(e.currentTarget).data("url")}).fail(rt.ZP.notifyError).done((()=>{c()(e.currentTarget).closest("tr").remove()
return rt.ZP.success("Sequence successfully deleted.")})))).show()}_hideExtraLinks(e){return e.find("li").each((function(e){if(!(c()(this).hasClass("collapse-toggle")||e<5))return c()(this).addClass("hidden")}))}toggleCollapse(e){const t=c()(e.currentTarget),n=t.closest(".nav-stacked")
if(t.hasClass("js-hiding")){t.addClass("js-showing").removeClass("js-hiding").find("a").data({originalText:t.text()}).html(c()("<span>").addClass("glyphicon glyphicon-chevron-up"))
return n.find("li").removeClass("hidden")}{t.addClass("js-hiding").removeClass("js-showing")
const e=t.find("a")
e.text(e.data("originalText"))
return this._hideExtraLinks(n)}}renderCollapseToggle(){const e=c()(this).closest(".nav-stacked")
c()(this).addClass("js-hiding")
return this._hideExtraLinks(e)}render(){const e=this._hideExtraLinks
this.$(".quick-browse .collapse-toggle").each((function(){const t=c()(this).closest(".nav-stacked")
c()(this).addClass("js-hiding")
return e(t)}))
this.$(".sort-toggle i").tooltip({container:"body",placement:"bottom"})
const t=this.$(".home-invite-form .btn")
t.toggleClass("disabled",!t.hasClass("verified"))
const n=window.location.href.split("?")
n.length>1&&"invite"===n[1]&&this.$(".home-invite-form input").focus()
return this}}HomeView.initClass()
const RS=HomeView
var NS=n(933212)
class LadderContentView extends o().View{static initClass(){this.prototype.el=".ladder-bands-view"
this.prototype.events={"input .ladder-bands":"parseBands"}}initialize(){return this.parsedBands=[]}die(){this.stopListening()
this.undelegateEvents()}update(e){this.parsedBands=e.bandSizes()
this.$(".ladder-bands").val(this.parsedBands.join("\n")).attr({disabled:!e.get("permissions").writable})
return this.updatePreview()}parseBands(e){const t=c()(e.currentTarget).val().split("\n")
this.parsedBands=(()=>{const e=[]
for(const n of Array.from(t)){const t=parseInt(n)
Number.isNaN(t)||e.push(t)}return e})()
this.parsedBands.sort(((e,t)=>t-e))
return this.updatePreview()}updatePreview(){return this.$(".preview").html(this.parsedBands.join("<br>"))}bands(){return this.parsedBands}}LadderContentView.initClass()
let OS=null
class LaddersView extends hS{static initClass(){this.prototype.el=".js-ladders"
this.prototype.type="ladders"
this.prototype.modelType=_e.LADDER}events(){return ue.default.extend(super.events(),{"submit .create-new form":"createNewLadder","click .save-bands":"saveBands"})}static getBootstrappedOwnables(){null==OS&&(OS=new NS.F(window.bootstrap.ladders))
return OS}initialize(e){this.ladderContent=new LadderContentView
return super.initialize(e)}die(){super.die()
this.ladderContent.die()}saveBands(e){const t=c()(e.currentTarget)
t.button("loading")
return this.currentOwnable.save({band_sizes:this.ladderContent.bands()},{patch:!0,url:`${this.currentOwnable.url()}/attributes`}).fail(rt.ZP.notifyError).done((()=>{rt.ZP.success("Ladder successfully saved.")
return t.button("reset")}))}createNewLadder(e){e.preventDefault()
const t=new NS.H({name:this.$el.find(".create-new .name").val(),description:this.$el.find(".create-new .description").val(),owner_id:window.bootstrap.current_entity_id})
return t.save().fail(rt.ZP.notifyError).done((()=>{this.$el.find(".create-new .name, .create-new .description").val("")
this.ownables.add(t)
this.navigateToOwnable(t.id)
rt.ZP.success("Ladder created successfully!")
return h.j("DATA_MANAGEMENT","created_ownable",{type:this.type,name:t.get("name"),has_description:t.get("description").length>0})}))}renderOwnable(){super.renderOwnable()
const e=this.currentOwnable
this.ladderContent.update(e)
const{writable:t}=e.get("permissions")
this.$(".writable-instructions, .save-bands").toggleClass("hidden",!t)
this.$(".readable-instructions").toggleClass("hidden",t)
c().getJSON(`/1/api/ladders/${e.id}/collaborators/`).done((e=>this.createCollaboratorsView(e))).fail(rt.ZP.notifyError)}}LaddersView.initClass()
const bS=LaddersView
n(123758)
class OrganizationRow extends o().View{static initClass(){this.prototype.events={"click .leave-button":"leaveOrg"}}initialize(e){return({removeCallback:this.removeCallback}=e)}remove(){super.remove()
return this.removeCallback()}leaveOrg(){const e=this.$el.data("organizationId"),t=this.$el.data("organizationHandle"),n=`Are you sure you want to leave ${t}? You'll lose access to all shared items including folders and sequences.`
function callback(){return c().ajax({url:`/1/api/organizations/${e}/users/me`,type:"DELETE"}).fail(rt.ZP.notifyError).done(ue.default.bind(this.remove,this))}callback=ue.default.bind(callback,this)
return new CS.I4({title:`Leaving ${t}`,msg:n}).choice("Confirm Leaving","btn-af-danger",callback).choice("Cancel","btn-af-default").show()}}OrganizationRow.initClass()
class ManageOrganizationsView extends o().View{static initClass(){this.prototype.el="#organizations"}render(){function removeCallback(){if(0===this.$el.find(".organizations-list li").length)return this.$el.find(".no-organizations").removeClass("hidden")}removeCallback=ue.default.bind(removeCallback,this)
for(const e of Array.from(this.$el.find(".organizations-list li")))new OrganizationRow({el:e,removeCallback})
return this}}ManageOrganizationsView.initClass()
const vS=ManageOrganizationsView
var PS=n(190365)
const LS=function PreferenceCheckbox(e){let t=eo.Z.get(e.preferenceKey)
null!=t?(0,ie.Gp)("boolean"==typeof t,"Expected boolean value for preference checkbox"):t=!1
const[n,a]=(0,d.useState)(t)
return d.createElement(dr.Z,{checked:n,disabled:e.disabled,id:e.id,label:e.label,onChange:t=>{a(t.target.checked)
eo.Z.set(e.preferenceKey,t.target.checked)}})}
var DS=n(22689)
function APIBearerTokenSection(){const[e,t]=(0,d.useState)(null),n=(0,d.useCallback)((()=>(0,DS.O)({bearerTokenConsumer:DS.i.API_SUPPORT_ACCESS}).then((e=>{t(e.access_token)}))),[t]);(0,ni.Z)((()=>{n()}));(0,d.useEffect)((()=>{const e=setInterval(n,6e5)
return()=>{clearInterval(e)}}),[n])
return d.createElement(O.Co,{buttonStyle:O.ZJ.TERTIARY_GRAY,disabled:null==e,fontWeight:ji.KB,icon:"copy",onClick:function handleCopyToken(){(0,ie.hu)(null!=e,"Bearer token not defined");(0,on.Z)(e,{showToastOnSuccess:!0,toastText:"Copied token to clipboard."})},size:O.qE.SMALL,text:"Copy Benchling Support bearer token",textColor:null==e?void 0:b.pp})}function APIKeysSection(){return d.createElement(d.Fragment,null,d.createElement("h3",null,"Keys"),d.createElement("table",{className:"table table-striped api-key-table hidden"},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",null,"Key"),d.createElement("th",null),d.createElement("th",null),d.createElement("th",null,"Created At"),d.createElement("th",null))),d.createElement("tbody",{className:"api-keys"})),d.createElement("button",{type:"button",className:"button button--tertiaryGray button--medium js-generate-api-key"},"Generate New API Key"))}function APICredentialsSection(){var e
return d.createElement(d.Fragment,null,(null===(e=window.bootstrap)||void 0===e?void 0:e.useBearerTokenAuthAPI)&&S.ZP.ENABLE_BENCHLING_SUPPORT_BEARER_TOKEN_UI?d.createElement(APIBearerTokenSection,null):d.createElement(APIKeysSection,null))}const MS=function ProfileAPISection(){return d.createElement(d.Fragment,null,d.createElement("h2",null,"API"),d.createElement(APICredentialsSection,null),d.createElement("h3",null,"Documentation"),d.createElement("div",null,"Get started with the API at"," ",d.createElement("a",{title:"docs.benchling.com",href:"https://docs.benchling.com",target:"_blank",rel:"noopener noreferrer"},"docs.benchling.com"),"."),d.createElement("div",null,"Access the API reference with testing abilities on your"," ",d.createElement("a",{title:"tenant specific documentation page",href:"/api/reference",target:"_blank",rel:"noopener noreferrer"},"tenant specific documentation page"),"."),d.createElement("h3",null,"View IDs"),d.createElement("div",{className:"form-group"},d.createElement("div",{className:"checkbox u-flex-display"},d.createElement(LS,{id:"copyAPIIDs",label:"Enable Copy API ID button",preferenceKey:"ENABLE_COPY_API_ID"}),d.createElement(le.Z,{renderContent:()=>d.createElement("a",{title:"Guide for using this feature",href:"https://docs.benchling.com/docs/getting-started-1#copy-api-ids",target:"_blank",rel:"noopener noreferrer"},"Guide for using this feature"),iconClassName:"u-tiny-spacing-left",placement:Pe.ZH.TOP}))))}
const wS=(0,sS.Z)((function APIKeyRow({apiKey:e,showKey:t}){return d.createElement(d.Fragment,null,d.createElement("td",{style:{minWidth:250}},t?e.key:"           "),d.createElement("td",null,d.createElement("span",{className:"copy pull-right fa fa-copy"})),d.createElement("td",null,d.createElement("span",{className:"show-hide pull-right fa "+(t?"fa-eye-slash":"fa-eye")})),d.createElement("td",null,e.created_at),d.createElement("td",null,d.createElement("span",{className:"delete pull-right glyphicon glyphicon-trash"})))}))
var FS=n(677677),kS=n(911623),US=n(50585)
function UncontrolledTimezonePickerInput(e){const t=Object.values(kS.G_).map((e=>({id:e,text:e})))
return d.createElement("div",{className:"u-small-spacing-bottom"},d.createElement(US.Z,{options:t,name:e.name,placeholder:"Select timezone",initSelection:(n,a)=>{e.defaultValue&&a(t.find((t=>t.id===e.defaultValue))||{id:e.defaultValue,text:`Unknown (${e.defaultValue})`})},defaultValue:e.defaultValue,formatSelection:e=>e.text,formatResult:e=>e.text}))}var xS=n(902323)
class CreateWarehouseLoginModal extends d.Component{constructor(){super(...arguments)
this._handleCreate=()=>{this.props.onCreate(this.props.createLoginModal.label)}
this._handleUpdateLabel=e=>{this.props.onLabelChange(e.target.value)}}render(){let e
const{createLoginModal:t}=this.props,{createdLogin:n}=t
e=t.creating?{key:"create",text:"Creating...",disabled:!0,submit:!0}:n?{key:"create",text:"Done",cancel:!0}:{key:"create",text:"Create",onClick:this._handleCreate,submit:!0}
return d.createElement(B.ZP,{title:"Create credentials",onRequestClose:this.props.onRequestClose,closeable:!t.creating,buttons:[e]},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(be.Z,null,"Label (optional)"),d.createElement(Id.Z,{placeholder:"",value:this.props.createLoginModal.label,onChange:this._handleUpdateLabel,readOnly:this.props.createLoginModal.creating||null!=n})))),n&&d.createElement(d.Fragment,null,d.createElement(ne.Z,null,d.createElement(ee.Z,{md:12},d.createElement("div",null,d.createElement(P.Z,{icon:"done",className:"u-success-color"})," Credentials created!"),d.createElement("div",{className:"u-spacing"},d.createElement(Jt.Z,null,d.createElement(d.Fragment,null,d.createElement("strong",null,"Make sure you store the password safely ",d.createElement("em",null,"now"),", as it cannot be retrieved later."),d.createElement("br",null),"For connection instructions and ",d.createElement("em",null,"important")," security considerations,"," ",d.createElement("a",{href:"https://docs.benchling.com/docs/getting-started",target:"_blank",rel:"noopener noreferrer"},"please see our guide")," ","(opens in new tab)."))))),d.createElement(ne.Z,null,d.createElement(ee.Z,{md:12},d.createElement(te.Z,null,d.createElement(be.Z,null,"JDBC & PostgreSQL Connection String"),d.createElement(Id.Z,{readOnly:!0,selectAllOnClick:!0,value:`postgresql://${n.username}@${n.pgConnectParams.host}:${n.pgConnectParams.port}/${n.pgConnectParams.dbname}?sslmode=${n.pgConnectParams.sslmode}`}),d.createElement("div",{className:"u-tiny-spacing-top"},"The CA Certificate can be downloaded"," ",d.createElement("a",{href:"https://s3.amazonaws.com/rds-downloads/rds-ca-2019-root.pem",target:"_blank",rel:"noopener noreferrer"},"here"),". Be sure to wrap the connection string in single-quotes for ",d.createElement("code",null,"psql")," and other shell commands!")))),d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(be.Z,null,"Username"),d.createElement(Id.Z,{readOnly:!0,selectAllOnClick:!0,value:n.username}))),d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(be.Z,null,"Password"),d.createElement(Id.Z,{readOnly:!0,selectAllOnClick:!0,value:n.password})))),d.createElement(ne.Z,null,d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(be.Z,null,"Hostname & Port"),d.createElement(Id.Z,{readOnly:!0,selectAllOnClick:!0,value:`${n.pgConnectParams.host}:${n.pgConnectParams.port}`}))),d.createElement(ee.Z,{md:6},d.createElement(te.Z,null,d.createElement(be.Z,null,"Database Name"),d.createElement(Id.Z,{readOnly:!0,selectAllOnClick:!0,value:n.pgConnectParams.dbname}))))))}}const BS=CreateWarehouseLoginModal
var ZS=n(154891)
const qS=Ps().shape({createdAt:Ps().string.isRequired,label:Ps().string,username:Ps().string.isRequired,expiresAt:Ps().string,expired:Ps().bool.isRequired,revoked:Ps().bool.isRequired})
function WarehouseLogin({login:e,handleRevoke:t}){const n=e.label.length>0
return d.createElement("div",{className:"u-small-spacing-bottom"},!e.revoked&&d.createElement("div",{className:"pull-right"},d.createElement(ve.ZP,{container:"body",title:"Revoke Credentials"},d.createElement(P.Z,{className:"u-danger-pointer u-faded",icon:"trash-can",onClick:t}))),d.createElement("div",{className:N()({"u-faded":e.revoked})},d.createElement("span",{className:"font-proxima-semibold"},e.username),d.createElement("span",null,n&&` ${e.label}`)),d.createElement("div",{className:"u-faded"},e.revoked?"Revoked":`Created ${(0,Wt.UT)(e.createdAt)}`),!e.revoked&&e.expiresAt&&d.createElement("div",{className:"u-faded"},"Expires ",(0,Wt.UT)(e.expiresAt)))}WarehouseLogin.propTypes={login:qS.isRequired,handleRevoke:Ps().func.isRequired}
class WarehouseLogins extends d.Component{constructor(){super(...arguments)
this._handleOpenCreateModal=()=>{this.props.onOpenCreateLoginModal()}
this._handleCloseCreateModal=()=>{this.props.onCloseCreateLoginModal()}}componentDidMount(){this.props.onFetchLogins()}render(){(0,ie.Gp)(S.ZP.ENABLE_USER_CREATED_WAREHOUSE_CREDENTIALS,"Should not render warehouse credentials create without ENABLE_USER_CREATED_WAREHOUSE_CREDENTIALS flag set to true")
return d.createElement("div",null,d.createElement(Ds.Z,{open:this.props.createLoginModal.open},d.createElement(BS,{createLoginModal:this.props.createLoginModal,onLabelChange:this.props.onUpdateCreateLoginLabel,onCreate:this.props.onCreateLogin,onRequestClose:this._handleCloseCreateModal})),d.createElement("h2",null,"Warehouse Credentials"),this.props.logins?this.props.logins.filter((e=>e.revoked||!e.expired)).map((e=>d.createElement(WarehouseLogin,{key:e.id,login:e,handleRevoke:()=>{this.props.onRevokeLogin(e)}}))):d.createElement("div",{className:"u-faded u-small-spacing-bottom"},"Loading..."),this.props.logins&&0===this.props.logins.length&&d.createElement("div",{className:"u-faded u-small-spacing-bottom"},"Create a set of credentials to get started."),d.createElement(O.Co,{buttonStyle:O.ZJ.SECONDARY,size:O.qE.SMALL,text:"Create Credentials",onClick:this._handleOpenCreateModal}),d.createElement(Q.Z,{className:"u-spacing-left",buttonSize:O.qE.SMALL,ids:this.props.logins.map((e=>e.id))}))}}WarehouseLogins.propTypes={logins:Ps().array.isRequired,createLoginModal:Ps().shape({open:Ps().bool.isRequired}).isRequired,onFetchLogins:Ps().func.isRequired,onCreateLogin:Ps().func.isRequired,onRevokeLogin:Ps().func.isRequired,onOpenCreateLoginModal:Ps().func.isRequired,onCloseCreateLoginModal:Ps().func.isRequired,onUpdateCreateLoginLabel:Ps().func.isRequired}
const GS=(0,V.$j)((function WarehouseLogins_mapStateToProps(e){return{logins:(t=ue.default.values(e.models.warehouse.logins),[...(0,ae.Z)(t.filter((e=>!e.revoked&&!e.expiresAt)),[{accessor:"createdAt",reversed:!0}]),...(0,ae.Z)(t.filter((e=>!e.revoked&&e.expiresAt)),[{accessor:"expiresAt",reversed:!0},{accessor:"createdAt",reversed:!0}]),...(0,ae.Z)(t.filter((e=>e.revoked)),[{accessor:"createdAt",reversed:!0}])]),createLoginModal:e.ui.warehouse.createLoginModal}
var t}),(function mapDispatchToProps(e){return{onFetchLogins(){e(ZS.D3())},onCreateLogin(t){e(ZS.QK(t))},onRevokeLogin(t){e(ZS.BI(t))},onOpenCreateLoginModal(){e(ZS.EO())},onCloseCreateLoginModal(){e(ZS.lt())},onUpdateCreateLoginLabel(t){e(ZS.Kr(t))}}}))(WarehouseLogins)
class APIKey extends o().Model{url(){const e="/1/api/users/me/keys/"
return this.id?`${e}${this.id}`:e}}class ProfileSettingsView_APIKeyRow extends o().View{static initClass(){this.prototype.template=wS
this.prototype.tagName="tr"
this.prototype.events={"click .delete":"revokeAPIKey","click .copy":"copyToClipboard","click .show-hide":"toggleAPIKeyVisibility"}}initialize(){this.listenTo(this.model,"change:showKey",this.render)}copyToClipboard(){const e=this.model.get("key"),t=`Copied to clipboard: ${this.model.get("showKey")?e:""}`;(0,on.Z)(e,{showToastOnSuccess:!0,toastText:t})}revokeAPIKey(){this.model.destroy({wait:!0}).fail(rt.ZP.notifyError).done((()=>rt.ZP.success("API Key revoked successfully.")))}toggleAPIKeyVisibility(){this.model.set({showKey:!this.model.get("showKey")})}render(){const e={apiKey:this.model.toJSON(),showKey:this.model.get("showKey")}
this.$el.html(this.template(e))
return this}}ProfileSettingsView_APIKeyRow.initClass()
class ProfileSettingsView extends o().View{static initClass(){this.prototype.el="#settings"
this.prototype.events={"submit .add-member-form":"handleAddMember","click .js-generate-api-key":"generateAPIKey"}}initialize(){this.selectedInstitution=new(o().Model)({institution:window.bootstrap.entity.institution})
this.listenTo(this.selectedInstitution,"change",this.mountInstitutionInfoLink)
this.listenTo(this.selectedInstitution,"change",this.mountInstitutionSelector)
if(null!=window.bootstrap?window.bootstrap.api_enabled:void 0){this.APIKeys=new(o().Collection)(window.bootstrap.api_keys,{model:APIKey})
this.listenTo(this.APIKeys,"add remove reset",this.renderAPIKeys)}}generateAPIKey(){const action=()=>{(new APIKey).save({wait:!0}).done((e=>{this.APIKeys.reset(e)
rt.ZP.success("API Key successfully generated.")}))}
if(this.APIKeys.isEmpty())action()
else{const e="Generating a new API key will delete your current one. Are you sure?"
new CS.I4({title:"Confirm API Key Regeneration",msg:e}).choice("Confirm","btn-af-primary",action).show()}}renderAPIKeys(){let e
const t=Array.from(this.APIKeys.models).map((e=>new ProfileSettingsView_APIKeyRow({model:e}).render().el))
this.$el.find(".api-keys").html(t)
this.$(".api-key-table").toggleClass("hidden",this.APIKeys.isEmpty())
e=this.APIKeys.isEmpty()?"Generate New API Key":"Regenerate API Key"
this.$(".js-generate-api-key").text(e)}mountInstitutionSelector(){const e=this.$(".js-institution.react-mount")
if(e.length){const t=this.selectedInstitution;(0,ro.A9)(d.createElement(PS.Z,{placeholder:"No institution selected",allowLeaving:!0,value:t.get("institution"),onChange:e=>t.set({institution:e}),className:"u-small-spacing-bottom",disabled:t.get("institution")&&t.get("institution").licensed}),e[0])}}mountLanguageTagPicker(){const e=this.$(".js-language-tag.react-mount"),t="language_tag";(0,ro.A9)(d.createElement(FS.b1,{name:t,date:new Date,defaultValue:e.find(`input[name=${t}]`).val()}),e[0])}mountTimezonePicker(){const e=this.$(".js-timezone.react-mount"),t="timezone";(0,ro.A9)(d.createElement(UncontrolledTimezonePickerInput,{name:t,defaultValue:e.find(`input[name=${t}]`).val()}),e[0])}mountWarehouseLogins(){const e=this.$(".js-warehouse.react-mount")
e.length&&(0,ro.A9)(d.createElement(GS,null),e[0])}mountAPISection(){const e=this.$(".js-api.react-mount")
e.length&&(0,ro.A9)(d.createElement(MS,null),e[0])}mountInstitutionInfoLink(){const e=this.$(".js-institution-info-link")
if(!e.length)return
const t=this.selectedInstitution.get("institution"),n=t&&t.urlIdentifier,a=n&&xS.mU[n]
a?(0,ro.A9)(d.createElement(a),e[0]):t&&t.licensed?(0,ro.A9)(d.createElement(xS.ch,{institution:t}),e[0]):this.unmountInstitutionInfoLink(e[0])}unmountInstitutionInfoLink(e){(0,ro.A9)(d.createElement("div",null),e)}render(){this.mountInstitutionSelector()
this.mountInstitutionInfoLink()
this.mountLanguageTagPicker()
S.ZP.STUDIES_ENABLE&&this.mountTimezonePicker()
this.mountAPISection()
null!=this.APIKeys&&this.renderAPIKeys()
this.mountWarehouseLogins()
return this}}ProfileSettingsView.initClass()
const VS=ProfileSettingsView
class ProfileView extends o().View{static initClass(){this.prototype.el="#profile"
this.prototype.events={"click .nav-tabs a":"handleTabClick"}}initialize(){c()(window).on("hashchange.profileview",(()=>this.setTabFromHash()))}remove(){c()(window).off(".profileview")
return super.remove()}handleTabClick(e){window.location.hash=c()(e.currentTarget).attr("href").substring(1)}setTabFromHash(){let e=this.$(".nav-tabs a").filter((function(){return c()(this).attr("href")===window.location.hash}))
0===e.length&&(e=this.$(".nav-tabs a:eq(0)"))
e.tab("show")
return this}}ProfileView.initClass()
const HS=ProfileView
function LandingViewEnhancements_defineProperty(e,t,n){(t=function LandingViewEnhancements_toPropertyKey(e){var t=function LandingViewEnhancements_toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class Carousel{constructor(e,t){this.resetInterval=this.resetInterval.bind(this)
this.$el=c()(e)
this.offset=0
this.total=this.getChildren().length
this.intervalTimeout=t
this.resetInterval()
this.$indicator=c()('<div class="carouselIndicator u-pointer"></div>')
for(let e=0,t=this.total;e<t;e++)this.$indicator.append(c()("<div></div>").toggleClass("active",0===e).click((e=>{const t=c()(e.target).index()
this.rotate(t)
this.resetInterval()})))
this.$el.append(this.$indicator)}getChildren(){return this.$el.find(".land-carouselWrapper").children()}resetInterval(){null!=this.interval&&clearInterval(this.interval)
this.interval=setInterval(this.rotate.bind(this),this.intervalTimeout)}rotate(e){this.offset=null!=e?e:(this.offset+1)%this.total
this.getChildren().eq(0).css({marginLeft:-100*this.offset+"%"})
this.$indicator.children().each(((e,t)=>c()(t).toggleClass("active",e===this.offset)))}stop(){clearInterval(this.interval)
this.$indicator.remove()}}class ScrollTrigger{constructor(){this.scrollHandler=this.scrollHandler.bind(this)
this.$els=c()(document).find(".scrollTrigger")
c()(window).on("scroll.scrollTrigger",this.scrollHandler)
c()(window).on("resize.scrollTrigger",this.scrollHandler)
this.$els.addClass("scrollHidden")
this.scrollHandler()}scrollHandler(){const e=c()(document).scrollTop()+c()(window).height()-100
this.$els.each((function(){c()(this).hasClass("scrollHidden")&&(c()(this).offset().top>e||c()(this).removeClass("scrollHidden"))}))}stop(){c()(window).off(".scrollTrigger")}}class LandingViewEnhancements extends d.Component{componentDidMount(){this.scrollTrigger=new ScrollTrigger
const{carouselInterval:e}=this.props
this.carousels=c()(".land-carousel").map((function(){return new Carousel(this,e)}))
c()(".requestDemoLink").click((()=>{h.j("homepage","clicked_request_demo_link")}))}componentWillUnmount(){this._stopCarousels()
this.scrollTrigger.stop()}_stopCarousels(){return this.carousels.forEach((e=>e.stop()))}render(){return null}}LandingViewEnhancements_defineProperty(LandingViewEnhancements,"propTypes",{carouselInterval:Ps().number.isRequired})
LandingViewEnhancements_defineProperty(LandingViewEnhancements,"defaultProps",{carouselInterval:5e3})
const WS={domain:"profile",routes:[{urlPattern:"",handler:function home(){gu.Z.startRUMView("home")
ts.Z.currentUser()?(new RS).render():renderReactComponent(LandingViewEnhancements)},legacy:!0},{urlPattern:":currentUserUrl",handler:function profile(){gu.Z.startRUMView("profile");(new HS).setTabFromHash().render()},legacy:!0},{urlPattern:":currentUserUrl/settings",handler:function settings(){gu.Z.startRUMView("settings");(new VS).render()},legacy:!0},{urlPattern:":currentUserUrl/organizations/",handler:function organizations(){gu.Z.startRUMView("organizations");(new vS).render()},legacy:!0},{urlPattern:":currentUserUrl/ladders/(:ladderId)",handler:function ladders(e,t){gu.Z.startRUMView("ladders")
_ownableView(e,t,"ladders")},legacy:!0},{urlPattern:":currentUserUrl/enzyme-lists/(:listId)",handler:function enzymeLists(e,t){gu.Z.startRUMView("enzyme_lists")
_ownableView(e,t,"enzyme_lists")},legacy:!0},{urlPattern:":currentUserUrl/feature-libraries/(:libraryId)",handler:function featureLibraries(e,t){gu.Z.startRUMView("feature_libraries")
_ownableView(e,t,"feature_libraries")},legacy:!0}]}
const YS={}
function _ownableView(e,t,n){const a=`ownableView_${n}`
if(YS[a]){YS[a].die()
YS[a]=null}const i=(()=>{switch(n){case"ladders":return bS
case"enzyme_lists":return _S
case"feature_libraries":return TS
default:throw new Error(`Unexpected ownable view type: ${n}`)}})()
if(null==t&&i.getBootstrappedOwnables().length>0){t=i.getBootstrappedOwnables().at(0).id;(0,j.ZP)(`${window.location.pathname}${t}`,{replace:!0})}else YS[a]=new i({ownableId:t}).render()}const $S={domain:"registry",routes:[{urlPattern:"registries/",handler:bu.registries.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/general/",handler:bu.registryGeneralSettings.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/",handler:bu.tagSchemas.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/create",handler:bu.tagSchemaCreate.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/:tagSchemaId",handler:tagSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/:tagSchemaId/:section",handler:tagSchemaSettings,legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/dropdowns/",handler:bu.schemaFieldSelectors.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/dropdowns/create",handler:bu.createSchemaFieldSelector.bind(bu),legacy:!0},{urlPattern:":ownerUrl/registries/:registryUrlIdentifier/dropdowns/:selectorId",handler:bu.schemaFieldSelector.bind(bu),legacy:!0}]}
function tagSchemaSettings(e,t,n,a){bu.tagSchemaSettings(e,t,n,a)}var KS=n(951663)
const zS={domain:"requests",routes:[{urlPattern:"requests",handler:function requests(){bu.sidepanelListing(qt.SA.REQUESTS,(0,KS.mu)())},legacy:!0},{urlPattern:"requests/:requestId",handler:bu.requestEditor.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/request-schemas/tasks/",handler:bu.requestTaskSchemas.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/request-schemas/tasks/create",handler:bu.requestTaskSchemaCreate.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/request-schemas/tasks/:schemaId",handler:bu.requestTaskSchema.bind(bu),legacy:!0}]}
const QS={domain:"results",routes:[{urlPattern:":currentUserUrl/assay-schemas/requests/",handler:bu.requestSchemas.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/requests/create",handler:bu.requestSchemasCreate.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/requests/:assaySchemaId",handler:bu.requestSchema.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/results/",handler:function assayResultSchemas(){bu.assaySchemas(Xo.aJ.ASSAY_RESULT)},legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/results/create",handler:bu.resultSchemaCreate.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/results/:assaySchemaId",handler:bu.resultSchema.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/results/json/create",handler:function assayResultSchemaCreateJson(){bu.assaySchemasCreate(Xo.aJ.ASSAY_RESULT)},legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/results/json/:assaySchemaId",handler:function assayResultSchemaJson(e,t){bu.assaySchema(Xo.aJ.ASSAY_RESULT,e,t)},legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/runs/",handler:function assayRunSchemas(){bu.assaySchemas(Xo.aJ.ASSAY_RUN)},legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/runs/create",handler:bu.runSchemasCreate.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/runs/:assaySchemaId",handler:bu.runSchema.bind(bu),legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/runs/json/create",handler:function assayRunSchemasCreateJson(){bu.assaySchemasCreate(Xo.aJ.ASSAY_RUN)},legacy:!0},{urlPattern:":currentUserUrl/assay-schemas/runs/json/:assaySchemaId",handler:function assayRunSchemaJson(e,t){bu.assaySchema(Xo.aJ.ASSAY_RUN,e,t)},legacy:!0}]}
const jS=/^:?[0-9a-z_-]+$/i,JS=/^((:|\*)?[0-9a-z_-]+)?$/i
function isWellFormedUrlPattern(e){if(!function areParenthesesWellFormed(e){let t=0,n=0,a=null
for(let i=0;i<e.length;i++){const r=e[i],s=e[i-1],o=e[i+1]
switch(r){case"(":t+=1
if(t>5)return!1
n+=1
if(")"!==s)if(0===i||"/"===s)a=!0
else{if("/"!==o)return!1
a=!1}else if(!1===a&&"/"!==o)return!1
break
case")":n-=1
if(i!==e.length-1)switch(a){case!0:if("/"!==s)return!1
break
case!1:if("/"===s||"/"!==o&&"("!==o)return!1
break
default:return!1}break
case"/":if(n>0){if("("!==s&&")"!==o)return!1}else a=null
break
default:n<=0&&(a=null)}if(n<0||n>1)return!1}return 0===n}(e))return!1
const t=e.replace(/[()]/g,"").split("/")
return t.reduce(((e,n,a)=>a===t.length-1?e&&JS.test(n):e&&jS.test(n)),!0)}function isPrecedenceClashingPair(e,t){const n=getVariants(e),a=getVariants(t)
for(const e of n)for(const t of a)if(isClashingNoParensPair(e,t))return!0
return!1}function getVariants(e){let t=[""],n=!1
for(let a=0;a<e.length;a++){const i=e[a]
switch(i){case"(":n=!0
t=t.concat(t)
break
case")":n=!1
break
default:for(let e=n?Math.floor(t.length/2):0;e<t.length;e++)t[e]+=i}}return t}function isClashingNoParensPair(e,t){const n=/([:a-z0-9\-_]+\/)/,a=e.split(n),i=t.split(n),r=a[a.length-1],s=i[i.length-1]
let o
o="*"===r[0]&&"*"===s[0]?Math.min(a.length-1,i.length-1):"*"===r[0]?a.length-1:"*"===s[0]?i.length-1:Math.max(a.length,i.length)
return function isClashingPathNoParensNoStar(e,t){if(e.length!==t.length)return!1
for(let n=0;n<e.length;n++)if(!1===isClashingPathPartPair(e[n],t[n]))return!1
return!0}(a.slice(0,o),i.slice(0,o))}function isClashingPathPartPair(e,t){return(":"===e[0]||":"===t[0])&&""!==e&&""!==t||e===t}const XS=["","privacy","terms","about","crispr","signin","signin/choose-provider","signup",":institutionUrlIdentifier/signup","tag","bulk-workflows/antibody","bulk-workflows/assembly","bulk-workflows/translation","editor","calendar","getting-started","gs/organizations","gs/bioregistry","role-info","projects/","registries/","search","storage","invite","external-invite","_design/:component","organizations/create","organizations/:organizationUrlIdentifier/","organizations/:organizationUrlIdentifier/create-team","organizations/:organizationUrlIdentifier(/:section)","users/:userId","users/:userId/","users/:userId(/:section)","admin(/:section)","access-policies","data-policies/:policyId","schema-policies","schema-policies/policies","schema-policies/settings","schema-policies/:policyId","teams/:teamId(/:section)","(:currentUserUrl/)admin/activity","(:currentUserUrl/)admin/users/",":currentUserUrl/admin/projects_dashboard/",":currentUserUrl/admin/users_dashboard/","event-subscriptions","apps","apps/:benchlingAppId","developer/apps","developer/apps/create","developer/apps/:benchlingAppId","api","api/reference","api/:version/reference","config-migration","legacy-workflows","workflows/templates","legacy-workflows/templates","workflows/view/:workflowId","legacy-workflows/view/:workflowId","workflows/stage-entries/:stageEntryUrlIdentifier","legacy-workflows/stage-entries/:stageEntryUrlIdentifier","workflows/stage-entries/:stageEntryUrlIdentifier/view","legacy-workflows/stage-entries/:stageEntryUrlIdentifier/view","workflows/templates/view/:workflowTemplateId","legacy-workflows/templates/view/:workflowTemplateId","worklists","worklist-items","requests","requests/:requestId","processes","workflows","processes/:processId","workflows/:processId","process-task-schemas","workflow-task-schemas","process-task-schemas/create","workflow-task-schemas/create","process-task-schemas/:schemaId","workflow-task-schemas/:schemaId","workflow-tasks/:processTaskId","label-printing-settings","inventory-settings","analytics","analytics/analyses/:analysisUrlIdentifier","analytics/dashboards/:analyticsDashboardUrlIdentifier","forms/:formDefinitionId","monomers","connection-schemas","connection-schemas/create","connection-schemas/:schemaId","instrument-gateways","connections/:connectionId","entry-review-processes","entry-review-processes/configuration","entry-review-processes/:reviewLifecycleId",":currentUserUrl",":currentUserUrl/settings",":currentUserUrl/organizations/",":currentUserUrl/ladders/(:ladderId)",":currentUserUrl/enzyme-lists/(:listId)",":currentUserUrl/feature-libraries/(:libraryId)",":currentUserUrl/assay-schemas/requests/",":currentUserUrl/assay-schemas/requests/create",":currentUserUrl/assay-schemas/requests/:assaySchemaId",":currentUserUrl/request-schemas/tasks/",":currentUserUrl/request-schemas/tasks/create",":currentUserUrl/request-schemas/tasks/:schemaId",":currentUserUrl/assay-schemas/results/",":currentUserUrl/assay-schemas/results/create",":currentUserUrl/assay-schemas/results/:assaySchemaId",":currentUserUrl/assay-schemas/results/json/create",":currentUserUrl/assay-schemas/results/json/:assaySchemaId",":currentUserUrl/assay-schemas/runs/",":currentUserUrl/assay-schemas/runs/create",":currentUserUrl/assay-schemas/runs/:assaySchemaId",":currentUserUrl/assay-schemas/runs/json/create",":currentUserUrl/assay-schemas/runs/json/:assaySchemaId",":currentUserUrl/template-collections/",":currentUserUrl/template-collections/:collectionId",":currentUserUrl/f/:folderIdentifier/:itemUrlIdentifier/edit",":currentUserUrl/f/:folderIdentifier/:itemUrlIdentifier/view",":currentUserUrl/templates/:templateUrlIdentifier/view",":currentUserUrl/templates/:templateUrlIdentifier",":currentUserUrl/f_/:folderIdentifier/","schema-interfaces/","schema-interfaces/create","schema-interfaces/:interfaceId",":ownerUrl/registries/:registryUrlIdentifier/general/",":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/",":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/create",":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/:tagSchemaId",":ownerUrl/registries/:registryUrlIdentifier/tag-schemas/:tagSchemaId/:section",":ownerUrl/registries/:registryUrlIdentifier/container-schemas/",":ownerUrl/registries/:registryUrlIdentifier/box-schemas/",":ownerUrl/registries/:registryUrlIdentifier/box-schemas/create",":ownerUrl/registries/:registryUrlIdentifier/box-schemas/:boxSchemaId",":ownerUrl/registries/:registryUrlIdentifier/plate-schemas/",":ownerUrl/registries/:registryUrlIdentifier/plate-schemas/create",":ownerUrl/registries/:registryUrlIdentifier/plate-schemas/:plateSchemaId",":ownerUrl/registries/:registryUrlIdentifier/location-schemas/",":ownerUrl/registries/:registryUrlIdentifier/location-schemas/create",":ownerUrl/registries/:registryUrlIdentifier/location-schemas/:locationSchemaId",":ownerUrl/registries/:registryUrlIdentifier/label-templates/",":ownerUrl/registries/:registryUrlIdentifier/label-templates/create",":ownerUrl/registries/:registryUrlIdentifier/label-templates/:labelTemplateId",":ownerUrl/registries/:registryUrlIdentifier/printers/",":ownerUrl/registries/:registryUrlIdentifier/printers/create",":ownerUrl/registries/:registryUrlIdentifier/printers/:printerId",":ownerUrl/registries/:registryUrlIdentifier/dropdowns/",":ownerUrl/registries/:registryUrlIdentifier/dropdowns/create",":ownerUrl/registries/:registryUrlIdentifier/dropdowns/:selectorId","samples/containers/:containerId","samples/boxes/:boxId","samples/plates/:plateId","samples/locations/:locationId","s/:apiIdentifier/edit","s/:apiIdentifier/view"],eT={domain:"runs",routes:[{urlPattern:"assay-runs/:runId",handler:bu.runEditor.bind(bu),legacy:!1}]},tT={domain:"samples",routes:[{urlPattern:"samples/containers/:containerId",handler:function containerEditor(e){bu.containerEditor(Ke.ZP.withPrefixIfMissing(e,_e.CONTAINER))},legacy:!0},{urlPattern:"samples/boxes/:boxId",handler:function boxEditor(e){bu.boxEditor(Ke.ZP.withPrefixIfMissing(e,_e.BOX))},legacy:!0},{urlPattern:"samples/plates/:plateId",handler:function plateEditor(e){bu.plateEditor(Ke.ZP.withPrefixIfMissing(e,_e.PLATE))},legacy:!0},{urlPattern:"samples/locations/:locationId",handler:function locationExpandedSearch(e){bu.locationExpandedSearch(Ke.ZP.withPrefixIfMissing(e,_e.LOCATION))},legacy:!0},{urlPattern:"samples/locations/:locationId/edit",handler:function locationEditor(e){bu.locationEditor(Ke.ZP.withPrefixIfMissing(e,_e.LOCATION))}}]}
const nT={domain:"schemas",routes:[{urlPattern:"schema-policies",handler:schemaPoliciesPage,legacy:!0},{urlPattern:"schema-policies/policies",handler:schemaPoliciesPage,legacy:!0},{urlPattern:"schema-policies/settings",handler:bu.schemaPoliciesPageSettingsTab.bind(bu),legacy:!0},{urlPattern:"schema-policies/:policyId",handler:function schemaPolicyPage(e){bu.schemaPolicyPage(e)},legacy:!0},{urlPattern:"schema-interfaces/",handler:bu.schemaInterfaces.bind(bu),legacy:!0},{urlPattern:"schema-interfaces/create",handler:bu.schemaInterfaceCreate.bind(bu),legacy:!0},{urlPattern:"schema-interfaces/:interfaceId",handler:bu.schemaInterfaceSettings.bind(bu),legacy:!0}]}
function schemaPoliciesPage(){bu.schemaPoliciesPage()}const aT={domain:"search",routes:[{urlPattern:"search",handler:bu.search.bind(bu),legacy:!0}]}
var iT=n(271350),rT=n(709691)
class PublicReferralLink extends d.Component{componentDidMount(){iT.Tx(this.props.email)}render(){const e="https://benchling.com/signup?pubref="+this.props.referralLinkId
return d.createElement("div",{className:"u-large-text"},d.createElement("p",null,"Post this link to social media, and get credit for anyone who signs up for Benchling with it!"),null==this.props.referralLinkId?d.createElement("code",{className:"copiable-link"},"Loading..."):d.createElement("div",null,d.createElement("code",{className:"copiable-link"},e),d.createElement(rT.Z,{value:e,onClick:()=>{var t
analytics.track("invites","copied_referral_link",{user_id:null===(t=ts.Z.currentUser())||void 0===t?void 0:t.id,referral_link:e})}},d.createElement(ve.ZP,{title:"Copy to clipboard"},d.createElement(O.Co,{icon:"copy",size:O.qE.MINI,buttonStyle:O.ZJ.TERTIARY_GRAY})))))}}const sT=ts.Z.connect((function mapEntityStoreToProps(e,{email:t}){return{email:t,referralLinkId:e.getPublicReferralId(t)}}))(PublicReferralLink)
class ExternalInvitePage extends d.Component{constructor(){super(...arguments)
this.state={inviterEmail:this.props.email||""}
this.inviteMembers=(e,t)=>{const{inviterEmail:n}=this.state
0!==e.length?n?Gs.uI({emails:e,inviter:{email:this.state.inviterEmail,name:this.props.name?this.props.name:""},recaptcha:t}):rt.ZP.error("Please enter your email."):rt.ZP.error("Please specify an email address to invite.")}
this._showInviterEmailInput=()=>!this.props.email
this._renderInviterEmailInput=()=>this._showInviterEmailInput()?d.createElement("div",{className:"invitePage-inviterEmail"},d.createElement(te.Z,null,d.createElement(k.Z,{isRequired:!0,label:"Enter your email to receive credit for your referrals",value:this.state.inviterEmail,placeholder:"Enter your email",onChange:e=>{this.setState({inviterEmail:e.target.value})}}))):null}render(){return d.createElement("div",{className:"invitePage"},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:12,className:"u-spacing-bottom"},d.createElement("div",{className:"col-centered"},d.createElement("div",{className:"u-xlarge-text"},"Love Benchling? Invite other scientists and receive $100!"),d.createElement("div",{className:"u-spacing-top invitePage-description"},d.createElement("p",null,d.createElement("strong",null,"$100 Amazon.com Gift Card*")," for every industry referral (scientist or IT) that results in a qualified demo. ",d.createElement("span",{className:"legacy-font-proxima-12"},"(*Restrictions apply, see"," ",d.createElement("a",{href:"https://amazon.com/gc-legal",target:"_blank",rel:"noopener noreferrer"},"amazon.com/gc-legal"),".)"))),this._renderInviterEmailInput(),this._showInviterEmailInput()&&d.createElement(F.Z,{label:"Invitations",isRequired:!0}),d.createElement(Ks,{onInvite:this.inviteMembers}),this.props.email&&d.createElement("div",{className:"u-flex-display u-spacing-top"},d.createElement(sT,{email:this.props.email})),d.createElement("div",{className:"u-spacing-top"},d.createElement("p",null,"(Scientists you invite will join Benchling's main deployment and not your company's deployment.)"))))))}}const oT=ExternalInvitePage
function InviteAvatar(e){const t=e.isGold?"_gold":""
return d.createElement("span",null,d.createElement("img",{src:(0,uE.Z)(`/static/img/benchling-gold/avatar_${e.index+1}${t}.png`),className:"u-spacing-right u-spacing-bottom"}),e.showGoldStatus&&d.createElement("span",{className:"u-position-relative"},d.createElement("span",{className:N()("invitePage-speechBubble",{gold:e.isGold})},"Gold Status!")))}function AcademicInviteAvatars(e){return d.createElement("div",null,[0,1,2,3,4].map((t=>d.createElement(InviteAvatar,{key:t,index:t,isGold:t<e.numReferralsAccepted,showGoldStatus:4===t}))))}function AcademicReferralsDescription(){return d.createElement("div",null,d.createElement("div",{className:"legacy-font-proxima-27"},"Love Benchling? Refer your colleagues to earn extra space and access to an enterprise feature"),d.createElement("div",{className:"u-spacing-top invitePage-description"},"When five of your referrals sign up, receive ",d.createElement("strong",null,"Benchling Gold")," status! You'll get:",d.createElement("ul",null,d.createElement("li",null,"15 GB of extra space"),d.createElement("li",null,"Benchling Sync, a feature that allows you to open an attachment in its desktop application and automatically syncs edits to your notebook"))))}var lT=n(643509)
function UserAcceptedStatus(e){return d.createElement("div",{className:N()({faded:!e.accepted})},d.createElement(P.Z,{icon:"check",className:N()({"u-success-color":e.accepted})})," ",e.accepted?"Accepted":"Invite Sent")}class ReferralTable extends d.Component{constructor(){super(...arguments)
this.inviteToOrg=(e,t)=>{m.R2(e,t)}}render(){return d.createElement("div",{className:"u-large-spacing-top"},d.createElement(ne.Z,{className:"u-spacing-top u-small-spacing-bottom"},d.createElement(ee.Z,{xs:5},d.createElement("strong",null,"Email")),d.createElement(ee.Z,{md:2,className:"hidden-sm hidden-xs"},d.createElement("strong",null,"Invited")),d.createElement(ee.Z,{md:2,xs:3},d.createElement("strong",null,"Status")),d.createElement(ee.Z,{md:3,xs:4},d.createElement("strong",null,"Organization"))),d.createElement("div",{className:"u-vertical-internal-border"},(()=>{const e=[]
for(const t of this.props.referrals){const n=t.orgStatuses.filter((({status:e})=>e===lT.u.PENDING)).map((({organizationId:e})=>e)),a=t.orgStatuses.filter((({status:e})=>e===lT.u.MEMBER)).map((({organizationId:e})=>e))
e.push(d.createElement(ne.Z,{key:t.email,className:"invitePage-referral"},d.createElement(ee.Z,{xs:5},t.email),d.createElement(ee.Z,{md:2,className:"hidden-sm hidden-xs"},Wt.UT(new Date(t.createdAt))),d.createElement(ee.Z,{md:2,xs:3},d.createElement(UserAcceptedStatus,{accepted:null!=t.user})),d.createElement(ee.Z,{md:3,xs:4},this.props.user.organizations.filter((({admin:e})=>e)).map((e=>d.createElement("div",{key:e.id,className:"invitePage-referrals-organization"},(()=>n.includes(e.id)?d.createElement("span",{className:"faded"},`Invited to ${e.name}`):a.includes(e.id)?e.name:d.createElement("a",{onClick:this.inviteToOrg.bind(null,e.id,t.email)},`Add to ${e.name}`))()))))))}return e})()))}}const cT=ReferralTable
class InvitePage extends d.Component{constructor(e){super(e)
this.toggleShowReferralTable=()=>{this.setState({showReferralTable:!this.state.showReferralTable})}
this.inviteMembers=(e,t)=>{if(0!==e.length){Gs.pS({emails:e,recaptcha:t})
this.setState({showReferralTable:!0})}else rt.ZP.error("Please specify an email address to invite.")}
this.state={showReferralTable:e.user.referrals.length>0}}render(){const e=function getSortedReferrals(e){return ue.default.clone(e).sort(((e,t)=>null!=e.user!=(null!=t.user)?null!=e.user?-1:1:e.createdAt!==t.createdAt?e.createdAt<t.createdAt?1:-1:e.email<t.email?-1:1))}(this.props.user.referrals),t=e.filter((({user:e})=>null!=e)).length
return d.createElement("div",{className:"invitePage"},d.createElement(ne.Z,null,d.createElement(ee.Z,{md:4},d.createElement(AcademicInviteAvatars,{numReferralsAccepted:t})),d.createElement(ee.Z,{md:8,className:"u-spacing-bottom"},d.createElement("div",{className:"col-centered"},d.createElement(AcademicReferralsDescription,null),d.createElement(Ks,{onInvite:this.inviteMembers}),d.createElement("div",{className:"u-flex-display u-spacing-top"},d.createElement(sT,{email:this.props.user.email}))))),d.createElement("div",{className:"u-small-spacing-top"},d.createElement("span",{className:"faded"},d.createElement("a",{onClick:this.toggleShowReferralTable},`Referrals ${e.length}`,d.createElement(P.Z,{icon:this.state.showReferralTable?"caret-down":"caret-up",className:"u-tiny-spacing-left faded invitePage-showTable"})))),this.state.showReferralTable&&d.createElement(cT,{user:this.props.user,referrals:e}))}}const dT=ts.Z.connect((function InvitePage_mapEntityStoreToProps(e){return{user:e.currentUser()}}))(InvitePage)
class TaggerView extends o().View{static initClass(){this.prototype.el="#tagger"
this.prototype.events={"click .choose-file":"clickFileInput","change .file-input":"updateFileName","change select":"updateSkip"}}updateSkip(e){return JSON.parse(c()(e.currentTarget).val()).skip?c()(e.currentTarget).parents("tr").removeClass("danger").addClass("skip"):c()(e.currentTarget).parents("tr").addClass("danger").removeClass("skip")}updateFileName(e){return this.$el.find(".file-text-name").text(c()(e.currentTarget).val())}clickFileInput(){return this.$el.find(".file-input").click()}render(){return this}}TaggerView.initClass()
const uT=TaggerView,mT={domain:"start",routes:[{urlPattern:"tag",handler:function tag(){gu.Z.startRUMView("tag");(new uT).render()},legacy:!0},{urlPattern:"invite",handler:function invite(){gu.Z.startRUMView("invite")
renderReactComponent(dT)},legacy:!0},{urlPattern:"external-invite",handler:function externalInvite(){gu.Z.startRUMView("external_invite")
renderReactComponent(oT)},legacy:!0}]}
const pT={domain:"studies",routes:[{urlPattern:"study-schemas/listing",handler:bu.studySchemas.bind(bu)},{urlPattern:"study-schemas/create",handler:bu.studySchemasCreate.bind(bu)},{urlPattern:"study-schemas/:id",handler:bu.studySchema.bind(bu)}]},hT={domain:"tenant",routes:[{urlPattern:"admin(/:section)",handler:bu.tenantAdmin.bind(bu),legacy:!0}]},ET={domain:"units",routes:[{urlPattern:"units/listing",handler:bu.unitsDictionaryListing.bind(bu)}]}
function adminGet(e,t){null!=(null!=window.bootstrap?window.bootstrap.organization_id:void 0)&&(t.organization_id=window.bootstrap.organization_id)
return ft.xA(e,t)}function adminPost(e,t){null!=(null!=window.bootstrap?window.bootstrap.organization_id:void 0)&&(t.organization_id=window.bootstrap.organization_id)
return ft.ty({url:e,data:t})}const ST=(0,sS.Z)((function UseRow({handle:e,read:t,write:n}){return d.createElement("tr",null,d.createElement("td",null,d.createElement("a",{target:"_blank",href:`/${e}`,rel:"noopener noreferrer"},e)),d.createElement("td",null,t),d.createElement("td",null,n),d.createElement("td",null,t+n))})),{adminGet:TT}=a
class AdminAggregateView extends o().View{static initClass(){this.prototype.el="#aggregate-activity"
this.prototype.events={"click .js-prev-month":function(){return this.makeRequest(-1)},"click .js-next-month":function(){return this.makeRequest(1)},"click #toggle-aggregate":function(){this.$("#toggle-aggregate").toggleClass("glyphicon-chevron-right")
this.$("#toggle-aggregate").toggleClass("glyphicon-chevron-down")
this.$("#aggregate-block").toggleClass("hidden")
return this.makeRequest()}}}initialize(){const e=new Date
this.year=e.getFullYear()
this.month=e.getMonth()
this.months=["January","February","March","April","May","June","July","August","September","October","November","December"]
this.fetchForMonth=(0,Mu.D)(this.fetchForMonth,1e3)
return this.colorScale=aS().interpolateRgb("#fff","#69dd9a")}makeRequest(e){null==e&&(e=0)
this.$(".spinner").removeClass("hidden")
this.$("tbody").empty()
this.$(".use-rows-title span").text("Click a cell on the calendar to show per-member stats.")
this.month+=e
if(this.month<0){this.year-=1
this.month=11}else if(12===this.month){this.year+=1
this.month=0}this.$(".month").text(`${this.months[this.month]} ${this.year}`)
return this.fetchForMonth()}formatDate(e){const[t,n,a]=Array.from(e.split("-"))
return`${n}/${a}/${t}`}cellClickFn(e,t){return((e,t,n)=>function(a){n.$(".use-rows tbody").empty()
const i=ue.default.sortBy(e.users,(e=>e.write+e.read))
for(const e of Array.from(i))n.$(".use-rows tbody").append(ST(e))
const r=1===e.users.length?"member":"members"
return n.$(".use-rows-title span").text(`${t}: ${e.users.length} active ${r}`)})(e,t,this)}fetchForMonth(){return TT("/1/api/admin/aggregate/month",{year:this.year,month:this.month+1}).done((e=>{this.$(".spinner").addClass("hidden")
let t=!0,n=!1
return(()=>{const a=[]
for(let s=0;s<e.days.length/7;s++){var i,r
const o=c()("<tr>")
this.$(".calendar tbody").append(o)
for(let a=0;a<7;a++){i=c()("<td>")
r=e.days[7*s+a]
const l=parseInt(r.date.split("-")[2])
t||1!==l||(n=!0)
1===l&&(t=!1)
i.text(l);(t||n)&&i.css("color","#aaa")
o.append(i)
i.click(this.cellClickFn(r,this.formatDate(r.date)))
const d=this.colorScale(Math.min(r.users.length/e.max_users,1))
i.css("background-color",d)}r=e.weeks[s];(i=c()("<td>")).text(r.users.length).css("font-weight",600)
i.click(this.cellClickFn(r,`Week of ${this.formatDate(r.date)}`))
a.push(o.append(i))}return a})()}))}}AdminAggregateView.initClass()
const gT=AdminAggregateView
var fT=n(897100)
const IT=(0,sS.Z)((function ActivityRow({profile_url:e,handle:t,supportDelegateEmail:n,text:a,time:i}){return d.createElement("tr",null,d.createElement("td",null,d.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t),n&&` (${n})`),d.createElement("td",null,a),d.createElement("td",null,i))})),{adminGet:AT}=a
class AdminLogView extends o().View{static initClass(){this.prototype.el="#activity-log"
this.prototype.events={"click .js-refresh":"makeRequest"}}makeRequest(){this.$(".spinner").removeClass("hidden")
this.$("tbody").empty()
const e={},t=this.$("select").val()
t&&(e.user_id=t)
const n=this.$(".message-search").val()
0!==n.length&&(e.q=n)
const a=this.$(".date-search input").val()
0!==a.length&&(e.until=a)
this._searchPromise&&this._searchPromise.cancel()
this._searchPromise=(0,fT.Z)(Promise.resolve(AT("/1/api/admin/search",e)))
this._searchPromise.promise.then((e=>{this.$(".spinner").addClass("hidden")
return(()=>{const t=[]
for(const n of Array.from(e)){const e=IT({profile_url:n.profile_url,handle:n.handle,supportDelegateEmail:n.support_delegate_email,text:n.text,time:Wt.UT(new Date(n.created_at))})
t.push(this.$("tbody").append(e))}return t})()}))}render(){this.$("select").select2()
return this.makeRequest()}}AdminLogView.initClass()
const yT=AdminLogView
var _T=n(457564)
const CT=function formatDate(e,t){const n=Pn()(e)
return n.isValid()?n.format(t):null}
const{defaultColumn:RT}=_T.Z
class ProjectOpenReviews extends d.Component{render(){const e=[RT("Entry Name","entryName",{render:(e,t,n)=>d.createElement("span",null,t.entryName,d.createElement("a",{href:t.entryURL,className:"u-tiny-spacing-left"},d.createElement(P.Z,{icon:"link"})))}),RT("Status","status",{transform:e=>(0,Ot.kC)((0,Ot.Vx)(e))}),RT("Authors","authors"),RT("Auditors","auditors")],t=this.props.openReviews
return d.createElement("div",null,d.createElement("h4",null,`Open Reviews (${t.length})`),d.createElement(_T.Z,{columns:e,rows:t}))}}!function ProjectOpenReviews_defineProperty(e,t,n){(t=function ProjectOpenReviews_toPropertyKey(e){var t=function ProjectOpenReviews_toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}(ProjectOpenReviews,"propTypes",{openReviews:Ps().arrayOf(Ps().shape({entryName:Ps().string.isRequired,entryURL:Ps().string.isRequired,status:Ps().string.isRequired,authors:Ps().array.isRequired,auditors:Ps().array.isRequired})).isRequired})
const NT=ProjectOpenReviews,{defaultColumn:OT}=_T.Z,bT="dddd, MMMM D, YYYY, h:mm a"
class AdminProjectsDashboard extends d.Component{constructor(){super(...arguments)
this.state={projects:[],activeProject:null}
this.setActiveProject=e=>ft.xA(`/1/api/admin/projects/${e.id}`,{organizationId:this.props.organizationId}).done((t=>{this.setState({activeProject:Aa()(e,{$merge:t})})})).fail(rt.ZP.notifyError)
this.renderTable=()=>{const e=this.state.projects,t=[OT("Name","name"),OT("Owner","owner"),OT("Users","users"),OT("Open Reviews","openReviews"),OT("Entries Created (Last week)","entriesCreatedLastWeek"),OT("Reviews Accepted (Last week)","reviewsAcceptedLastWeek"),OT("Last File Created","lastEntryCreatedAt",{transform:e=>CT(e,bT)||"N/A"})]
return d.createElement(_T.Z,{columns:t,rows:e,onClickRow:this.setActiveProject,clickable:!0,selectable:!0})}
this.renderTraits=e=>{const renderTrait=(e,t)=>d.createElement("div",null,d.createElement("dt",null,e),d.createElement("dd",{className:"u-tiny-spacing-bottom"},t))
return d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:4},d.createElement("dl",null,renderTrait("Project",e.name),renderTrait("Owner",e.owner),renderTrait("Created At",CT(e.createdAt,bT)||"N/A"))),d.createElement(ee.Z,{sm:4},d.createElement("dl",null,renderTrait("Total Entries",e.numEntries),renderTrait("Accepted Reviews",e.numReviewsAccepted),renderTrait("Last File Created",CT(e.lastEntryCreatedAt,bT)||"N/A"))),d.createElement(ee.Z,{sm:4},d.createElement("dl",null,renderTrait("Entries Created (Last week)",e.entriesCreatedLastWeek),renderTrait("Entries Accepted (Last week)",e.reviewsAcceptedLastWeek))))}}componentDidMount(){ft.xA("/1/api/admin/projects/",{organizationId:this.props.organizationId}).done((e=>{this.setState({projects:e.projects})})).fail(rt.ZP.notifyError)}render(){return d.createElement("div",null,d.createElement("h1",null,"Projects Dashboard"),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},this.renderTable())),null!=this.state.activeProject?d.createElement("div",{className:"well"},d.createElement("h2",null,`Project Details: ${this.state.activeProject.name}`,d.createElement("a",{href:this.state.activeProject.url,className:"u-tiny-spacing-left"},d.createElement(P.Z,{icon:"link"}))),this.renderTraits(this.state.activeProject),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},d.createElement(NT,{openReviews:this.state.activeProject.openReviews})))):d.createElement("div",{className:"well"},d.createElement("h5",{className:"text-center"},"Select a project for detailed information.")))}}const vT=AdminProjectsDashboard
var PT=n(191193),LT=n(747346)
const{adminPost:DT}=a,MT="asc",wT="desc"
class AdminUsersComponent extends d.Component{constructor(){super(...arguments)
this.state={query:"",selectedUserIds:[],sortKey:"joinedOn",sortOrder:wT}
this.getReadableBoolean=(e,t,n)=>{null==n&&(n=`not ${t}`)
return e?t:n}
this._setField=e=>{const{endpoint:t,field:n,value:a,truePhrase:i,falsePhrase:r}=ue.default.defaults(e,{endpoint:"/1/api/admin/users/"});(0,ie.hu)((!a||i)&&(a||r),"expected phrase to match boolean value")
return DT(t,{organizationId:this.props.organizationId,userIds:this.state.selectedUserIds,[n]:a}).done((({updatedUsers:e})=>{const t=this.state.selectedUserIds.length
rt.ZP.success(`${a?i:r} ${t} ${T._6(t,"user")}`)
this.props.onUsersUpdated(e)})).fail(rt.ZP.notifyError)}
this.setSuspended=e=>{this._setField({field:"suspended",value:e,truePhrase:"Suspended",falsePhrase:"Unsuspended"})}
this.verifyUsers=()=>{this._setField({field:"verified",value:!0,truePhrase:"Verified"})}
this.areUnsuspendedUsersSelected=()=>{const e=this.state.selectedUserIds.map((e=>this.props.usersById[e]))
return e.length&&e.every((e=>!e.suspended))}
this.selectUser=e=>{this.state.selectedUserIds.includes(e.id)?this.setState({selectedUserIds:this.state.selectedUserIds.filter((t=>t!==e.id))}):this.setState({selectedUserIds:[...this.state.selectedUserIds,e.id]})}
this.sortUsers=e=>{this.state.sortKey===e?this.setState({sortOrder:this.state.sortOrder===MT?wT:MT}):this.setState({sortKey:e,sortOrder:MT})}
this.renderColumnHeader=(e,t)=>d.createElement("th",{className:"u-no-select"},d.createElement("a",{className:"u-no-text-decoration",onClick:this.sortUsers.bind(null,e)},t," ",this.state.sortKey===e?d.createElement(P.Z,{icon:this.state.sortOrder===MT?"chevron-up":"chevron-down"}):void 0))}render(){let e
if(this.state.query){const t=this.state.query.trim().toLowerCase()
e=Object.values(this.props.usersById).filter((e=>-1!==e.url_identifier.indexOf(t)))}else e=Object.values(this.props.usersById)
const t=ue.default.sortBy(e,this.state.sortKey)
this.state.sortOrder===wT&&t.reverse()
let n="/1/api/admin/users/export"
null!=this.props.organizationId&&(n+=`?organization_id=${this.props.organizationId}`)
return d.createElement("div",null,d.createElement("h1",null,"Manage users"),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:8},d.createElement("div",{className:"btn-group u-small-spacing-left"},d.createElement("button",{className:"btn btn-af-default",onClick:this.setSuspended.bind(null,!0),type:"button"},"Suspend selected"),d.createElement("button",{className:"btn btn-af-default",onClick:this.setSuspended.bind(null,!1),type:"button"},"Unsuspend")),d.createElement("div",{className:"btn-group u-small-spacing-left"},d.createElement("button",{className:"btn btn-af-default",onClick:this.verifyUsers,type:"button"},"Verify selected")),d.createElement("div",{className:"btn-group u-small-spacing-left"},d.createElement("a",{className:"btn btn-af-default",href:n},"Export users"))),d.createElement(ee.Z,{sm:4},d.createElement("input",{placeholder:"Search for usernames",type:"text",value:this.state.query,onChange:e=>{this.setState({query:e.target.value})}}))),d.createElement("table",{className:"table u-small-spacing-top"},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",null),this.renderColumnHeader("url_identifier","User"),this.renderColumnHeader("joinedOn","Joined"),this.renderColumnHeader("admin","Admin"),this.renderColumnHeader("suspended","Suspended"),this.renderColumnHeader("email","Email"),this.renderColumnHeader("verified","Verified"))),d.createElement("tbody",null,(()=>{const e=[]
for(const n of Array.from(t))e.push(d.createElement("tr",{key:n.id},d.createElement("td",null,d.createElement("input",{type:"checkbox",className:"checkbox",checked:this.state.selectedUserIds.includes(n.id),onChange:()=>{this.selectUser(n)}})),d.createElement("td",null,d.createElement("a",{href:`/${n.url_identifier}`},n.url_identifier)),d.createElement("td",null,(0,PT.Z)(n.joinedOn)),d.createElement("td",null,this.getReadableBoolean(n.admin,"admin","normal")),d.createElement("td",null,this.getReadableBoolean(n.suspended,"suspended","active")),d.createElement("td",null,n.email),d.createElement("td",null,this.getReadableBoolean(n.verified,"verified"))))
return e})())))}}const FT=(0,V.$j)((function AdminUsersComponent_mapStateToProps(e){const{organizationId:t,usersById:n}=e.models.useradmin
return{organizationId:t,usersById:n}}),{onUsersUpdated:LT.ol})(AdminUsersComponent)
const{defaultColumn:kT}=_T.Z
class UserOpenReviews extends d.Component{render(){const e=[kT("Entry Name","entryName"),kT("Status","status",{transform:e=>(0,Ot.kC)((0,Ot.Vx)(e))}),kT("Role","role")],t=this.props.openReviews
return d.createElement("div",null,d.createElement("h4",null,`Open Reviews (${t.length})`),d.createElement(_T.Z,{columns:e,rows:t}))}}!function UserOpenReviews_defineProperty(e,t,n){(t=function UserOpenReviews_toPropertyKey(e){var t=function UserOpenReviews_toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}(UserOpenReviews,"propTypes",{openReviews:Ps().arrayOf(Ps().shape({entryName:Ps().string.isRequired,status:Ps().string.isRequired,role:Ps().oneOf(["Auditor","Author"])})).isRequired})
const UT=UserOpenReviews,{defaultColumn:xT}=_T.Z
function prettyDuration(e){if(!ue.default.isNumber(e))return null
const t=(()=>{switch(!1){case!(e>60):return"minutes"
case!(e>3600):return"hours"
case!(e>86400):return"days"
default:return}})(),n=Pn()(1e3*e).diff(Pn()(0),t)
return`${n} ${(0,T._6)(n,t)}`}class AdminUsersDashboard extends d.Component{constructor(){super(...arguments)
this.state={users:[],activeUser:null}
this.setActiveUser=e=>ft.xA(`/1/api/admin/users/${e.id}`,{organizationId:this.props.organizationId}).done((t=>{this.setState({activeUser:Aa()(e,{$merge:t})})})).fail(rt.ZP.notifyError)
this.renderTable=()=>{const e=this.state.users,t=[xT("Username","handle"),xT("Open Reviews (Auditor)","openReviewsAsAuditor"),xT("Open Reviews (Author)","openReviewsAsAuthor"),xT("Entries Created (Last week)","entriesCreatedLastWeek"),xT("Reviews Created (Last week)","reviewsCreatedLastWeek"),xT("Reviews Audited (Last week)","reviewsAuditedLastWeek"),xT("Average Time to Review (Last week)"," averageTimeToReviewLastWeek",{transform:e=>prettyDuration(e)||"N/A"})]
return d.createElement(_T.Z,{columns:t,rows:e,onClickRow:this.setActiveUser,clickable:!0,selectable:!0})}
this.renderTraits=e=>{const renderTrait=(e,t)=>d.createElement("div",null,d.createElement("dt",null,e),d.createElement("dd",{className:"u-tiny-spacing-bottom"},t))
return d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:4},d.createElement("dl",null,renderTrait("User",e.handle),renderTrait("Open Reviews (Auditor)",e.openReviewsAsAuditor),renderTrait("Open Reviews (Author)",e.openReviewsAsAuthor))),d.createElement(ee.Z,{sm:4},d.createElement("dl",null,renderTrait("Entries created (last week)",e.entriesCreatedLastWeek),renderTrait("Reviews created (last week)",e.reviewsCreatedLastWeek),renderTrait("Reviews audited (last week)",e.reviewsAuditedLastWeek))),d.createElement(ee.Z,{sm:4},d.createElement("dl",null,renderTrait("Average Time to Review (last week)",prettyDuration(e.averageTimeToReviewLastWeek)||"N/A"),renderTrait("Last seen",CT(e.lastSeen,"dddd, MMMM D, YYYY, h:mm a")))))}}componentDidMount(){ft.xA("/1/api/admin/users/",{organizationId:this.props.organizationId}).done((e=>{this.setState({users:e.users})})).fail(rt.ZP.notifyError)}render(){return d.createElement("div",null,d.createElement("h1",null,"Users Dashboard"),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},this.renderTable())),null!=this.state.activeUser?d.createElement("div",{className:"well"},d.createElement("h2",null,`User Details: ${this.state.activeUser.handle}`),this.renderTraits(this.state.activeUser),d.createElement(ne.Z,null,d.createElement(ee.Z,{sm:12},d.createElement(UT,{openReviews:this.state.activeUser.openReviews})))):d.createElement("div",{className:"well"},d.createElement("h5",{className:"text-center"},"Select a user for detailed information.")))}}const BT=AdminUsersDashboard
function legacyWorkflowDashboardTemplates(){bu.workflowDashboardTemplates()}function legacyWorkflowDetails(e){bu.workflowDetails(e)}function legacyStageEntryEditor(e){bu.stageEntryEditor(Ke.ZP.withPrefixIfMissing(e,_e.STAGE_ENTRY))}function legacyWorkflowTemplateView(e){bu.workflowTemplateView(e)}const ZT=[Pu,Lu,im,sm,om,lm,cm,nE,AE,yE,_E,CE,OE,bE,wE,FE,kE,UE,xE,ZE,qE,VE,HE,WE,$E,WS,$S,zS,QS,eT,tT,nT,aT,mT,pT,hT,ET,{domain:"useradmin",routes:[{urlPattern:"(:currentUserUrl/)admin/activity",handler:function useradminActivity(){gu.Z.startRUMView("user_admin_activity");(new yT).render()
S.ZP.ENABLE_LEGACY_ADMIN_DASHBOARD_PAGES&&S.ZP.AUDITING_ENABLE_AGGREGATE_ACTIVITY&&(new gT).render()},legacy:!0},{urlPattern:"(:currentUserUrl/)admin/users/",handler:function useradminUsers(){gu.Z.startRUMView("user_admin_users")
renderReactComponent(FT)},legacy:!0},{urlPattern:":currentUserUrl/admin/projects_dashboard/",handler:function useradminProjectsDashboard(){gu.Z.startRUMView("user_admin_projects_dashboard")
renderReactComponent(vT)},legacy:!0},{urlPattern:":currentUserUrl/admin/users_dashboard/",handler:function useradminUsersDashboard(){gu.Z.startRUMView("user_admin_users_dashboard")
renderReactComponent(BT)},legacy:!0}]},{domain:"workflows",routes:[{urlPattern:"legacy-workflows",handler:function legacyWorkflowDashboard(){bu.workflowDashboard()},legacy:!0},{urlPattern:"workflows/templates",handler:function legacyWorkflowDashboardTemplatesRedirector(){S.ZP.WORKFLOWS_ENABLE?(0,j.ZP)("legacy-workflows/templates",{replace:!0}):legacyWorkflowDashboardTemplates()},legacy:!0},{urlPattern:"legacy-workflows/templates",handler:legacyWorkflowDashboardTemplates,legacy:!0},{urlPattern:"workflows/view/:workflowId",handler:function legacyWorkflowDetailsRedirector(e){S.ZP.WORKFLOWS_ENABLE?(0,j.ZP)(`legacy-workflows/view/${e}`,{replace:!0}):legacyWorkflowDetails(e)},legacy:!0},{urlPattern:"legacy-workflows/view/:workflowId",handler:legacyWorkflowDetails,legacy:!0},{urlPattern:"workflows/stage-entries/:stageEntryUrlIdentifier",handler:function legacyStageEntryEditorRedirector(e){S.ZP.WORKFLOWS_ENABLE?(0,j.ZP)(`legacy-workflows/stage-entries/${e}`,{replace:!0}):legacyStageEntryEditor(e)},legacy:!0},{urlPattern:"legacy-workflows/stage-entries/:stageEntryUrlIdentifier",handler:legacyStageEntryEditor,legacy:!0},{urlPattern:"workflows/stage-entries/:stageEntryUrlIdentifier/view",handler:printerFriendlyViewHandler,legacy:!0},{urlPattern:"legacy-workflows/stage-entries/:stageEntryUrlIdentifier/view",handler:printerFriendlyViewHandler,legacy:!0},{urlPattern:"workflows/templates/view/:workflowTemplateId",handler:function legacyWorkflowTemplateViewRedirector(e){S.ZP.WORKFLOWS_ENABLE?(0,j.ZP)(`legacy-workflows/templates/${e}`,{replace:!0}):legacyWorkflowTemplateView(e)},legacy:!0},{urlPattern:"legacy-workflows/templates/view/:workflowTemplateId",handler:legacyWorkflowTemplateView,legacy:!0}]},{domain:"worklists",routes:[{urlPattern:"worklists",handler:bu.worklists.bind(bu),legacy:!0},{urlPattern:"worklist-items",handler:bu.worklistItems.bind(bu),legacy:!0}]},GE]
function getRouteManifest(e=ZT){window.debug&&function errorIfClashingPairs(e){const t=function findClashingUrlPatterns(e){const t=[]
for(let n=0;n<e.length-1;n++){const a=e[n]
for(let i=n+1;i<e.length;i++){const n=e[i]
for(const e of a.routes){const i=e.urlPattern
if(!isWellFormedUrlPattern(i))throw new Error(`${i} is not well-formed`)
for(const r of n.routes){const s=r.urlPattern
if(!isWellFormedUrlPattern(s))throw new Error(`${s} is not well-formed`)
!0===e.legacy&&!0===r.legacy||!isPrecedenceClashingPair(i,s)||t.push([[i,a.domain],[s,n.domain]])}}}}return t}(e)
if(t.length>0){const e=t.reduce(((e,[[t,n],[a,i]])=>`${e}${t} in route-bundle ${n}, ${a} in route-bundle ${i}\n`),"")
throw new Error(`Clashing url-patterns:\n${e}`)}}(e)
const t={},n=Array(e.length).fill(0)
let a=0
for(;n.some(((t,n)=>t<e[n].routes.length));){let i
const r=e.map(((e,t)=>{var a
return null===(a=e.routes[n[t]])||void 0===a?void 0:a.urlPattern})),s=XS[a],o=r.indexOf(s)
if(void 0!==s&&o>=0){i=e[o].routes[n[o]]
a+=1
n[o]+=1}else{const t=e.findIndex(((e,t)=>{const a=n[t]
return a<e.routes.length&&!0!==e.routes[a].legacy}))
if(-1===t)throw Error("Cannot find next route to add to route-manifest. There is probably a legacy route missing from the route-bundles, or some route bundles contain legacy routes in the wrong order.")
i=e[t].routes[n[t]]
n[t]+=1}t[i.urlPattern]=i.handler}if(a<XS.length)throw new Error("Did not find all legacy url patterns in the route bundles.")
if(null!=t["*default"])throw new Error("Default url-pattern *default found in route manifest too early. Is it mistakenly defined in one of the route bundles?")
t["*default"]=noOpRoute
return t}class Router extends o().Router{static initClass(){this.prototype.routes=getRouteManifest()}initialize(){0}execute(e,t){(0,vu.RN)()
super.execute(e,t)}}Router.initClass()
const qT=Router,GT="prt_",VT=(0,d.lazy)((()=>Promise.all([n.e(337),n.e(724)]).then(n.bind(n,615916))))
class ProtocolsRouter extends o().Router{static initClass(){this.prototype.routes={"protocols/:apiIdentifier/:vanity":"protocol","protocols/:apiIdentifier/:vanity/sbs":"stepbystep","protocols/:apiIdentifier/:vanity/edit":"edit"}}renderPage(e,t){(0,ro.A9)(d.createElement(d.Suspense,{fallback:d.createElement(H.b,null)},d.createElement(VT,{navLinks:window.bootstrap.navLinks,route:e,params:t})),c()(".protocols-mount")[0])}protocol(e,t){gu.Z.startRUMView("protocol")
this.renderPage("protocol",{apiIdentifier:GT+e})}stepbystep(e,t){gu.Z.startRUMView("protocol_step_by_step")
this.renderPage("stepbystep",{apiIdentifier:GT+e})}edit(e,t){gu.Z.startRUMView("protocol_edit")
this.renderPage("edit",{apiIdentifier:GT+e})}}ProtocolsRouter.initClass()
const HT=ProtocolsRouter
var WT=n(462994);(0,i.L)()
0;(0,WT.Z)([qT,HT])
0;(0,r.Z)()},876831:(e,t,n)=>{n.d(t,{Z:()=>T})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(232606),c=n(432128),d=n(263137),u=n(88941),m=n(868710),p=n(36424),h=n(20859),E=n(927517),S=n(684321)
class AliasField extends o.Component{getInitialState(){return{isBeingEdited:this.props.initialIsBeingEdited,alias:this.props.initialAlias}}constructor(e){super(e)
this.handleKeyDown=async e=>{if(E.isEnterKey(e)){e.preventDefault()
this.state.alias&&await this.complete()}else if(E.isEscapeKey(e)){e.preventDefault()
this.cancel()}}
this.reset=()=>{this.setState(this.getInitialState())}
this.cancel=()=>{"function"==typeof this.props.cancel&&this.props.cancel()
this.reset()}
this.complete=async()=>{if(null!=this.props.validate){if(!await this.props.validate(this.props.initialAlias,this.state.alias))return}this.setState({isBeingEdited:!1})
if(this.props.complete){const e=await this.props.complete(this.state.alias)
null!=e&&this.setState({alias:e})}}
this.archive=()=>{(0,l.hu)(null!=this.props.archive,"Expected non-null archive prop")
this.setState({isBeingEdited:!1})
this.props.archive(this.state.alias)}
this.copyId=()=>{(0,l.hu)(null!=this.props.id,"Expected non-null id prop");(0,h.Z)(this.props.id,{showToastOnSuccess:!0})}
this.unarchive=()=>{(0,l.hu)(null!=this.props.unarchive,"Expected non-null remove prop")
this.setState({isBeingEdited:!1})
this.props.unarchive(this.state.alias)}
this.remove=()=>{(0,l.hu)(null!=this.props.remove,"Expected non-null unarchive prop")
this.setState({isBeingEdited:!1})
this.props.remove(this.state.alias)}
this.edit=()=>{this.setState({isBeingEdited:!0})
null!=this.props.edit&&this.props.edit()}
this.render=()=>o.createElement("div",{className:i()("metadata-field",this.props.className,{"is-beingEdited":this.state.isBeingEdited,"metadata-field--header":this.props.isHeader,"u-width-full":this.props.isFullWidth})},o.createElement("div",{className:i()("metadata-field-row",{"u-width-full":this.props.isFullWidth})},o.createElement("div",{className:i()({"metadata-field-col":!this.props.isHeader,"u-width-full":this.props.isFullWidth})},this.state.isBeingEdited?o.createElement(u.Z,{autoFocus:!0,placeholder:this.props.placeholder,value:this.state.alias,onChange:e=>{this.setState({alias:e.target.value})},onKeyDown:this.handleKeyDown,onFocus:e=>{const t=e.target
t.setSelectionRange(t.value.length,t.value.length)}}):this.state.alias?o.createElement("div",{...(0,d.Z)({component:"AliasField",element:"value"}),className:i()({"u-cursor-text":!this.state.isBeingEdited,"u-overflow-wrap-break-word":this.props.isFullWidth,"u-width-full":this.props.isFullWidth})},this.state.alias):"",null!=this.props.subtitle&&o.createElement("div",{className:"metadata-registry-header"},this.props.subtitle)),o.createElement("div",{className:i()("registry-actionGroupContainer",{"registry-actionGroupContainer--header":this.props.isHeader})},this.props.id&&!this.state.isBeingEdited&&Boolean(c.Z.get("ENABLE_COPY_API_ID"))&&o.createElement(m.ZP,{container:"body",placement:m.TQ.TOP,title:"Copy API ID"},o.createElement("a",{className:"registry-actionGroup metadata-action faded u-primary-pointer",onClick:this.copyId},o.createElement(p.Z,{icon:"note-code"}))),this.props.isWritable&&o.createElement(S.Z,{archive:this.props.archive?this.archive:void 0,isEditing:this.state.isBeingEdited,cancel:this.cancel,complete:this.complete,isCompleteEnabled:this.props.allowEmpty||Boolean(this.state.alias),remove:this.props.remove?this.remove:void 0,edit:this.props.edit||this.props.complete?this.edit:void 0,unarchive:this.props.unarchive?this.unarchive:void 0}))))
this.state=this.getInitialState()}UNSAFE_componentWillReceiveProps(e){this.state.isBeingEdited||this.setState({alias:e.initialAlias})}}AliasField.propTypes={archive:s().func,allowEmpty:s().bool.isRequired,className:s().string,cancel:s().func,complete:s().func,edit:s().func,id:s().string,initialAlias:s().string,initialIsBeingEdited:s().bool.isRequired,isFullWidth:s().bool.isRequired,isHeader:s().bool.isRequired,isWritable:s().bool.isRequired,placeholder:s().string,remove:s().func,subtitle:s().string,unarchive:s().func,validate:s().func}
AliasField.defaultProps={allowEmpty:!1,initialAlias:"",initialIsBeingEdited:!1,isFullWidth:!1,isHeader:!1,placeholder:"Alias"}
const T=AliasField},684321:(e,t,n)=>{n.d(t,{W:()=>E,Z:()=>h})
var a=n(692013),i=n(764403),r=n.n(i),s=n(602652),o=n.n(s),l=n(989526),c=n(348920),d=n(263137),u=n(868710),m=n(854185),p=n(36424)
function ViewModeFieldActionButtons(e){const t=(0,m.Z)("ENABLE_COPY_API_ID")[0]
return l.createElement("span",null,e.copyAPIID&&t&&l.createElement(u.ZP,{title:"Copy API ID",container:"body",placement:u.TQ.TOP},l.createElement("span",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded"),...(0,d.Z)({component:"FieldActionButtons",element:"copy-api-id"})},l.createElement(p.Z,{icon:"note-code",onClick:e.copyAPIID}))),e.remove&&(n=e.remove,null!=e.disableDeleteButtonWithTooltip?l.createElement(u.ZP,{container:"body",placement:u.TQ.TOP,title:e.disableDeleteButtonWithTooltip},l.createElement("span",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded"),...(0,d.Z)({component:"FieldActionButtons",element:"delete"})},l.createElement(p.Z,{icon:"delete"}))):l.createElement("a",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded u-danger-pointer"),...(0,d.Z)({component:"FieldActionButtons",element:"delete"}),onClick:n},l.createElement(p.Z,{icon:"delete"}))),c.ZP.ENABLE_ARCHIVING_V2&&e.archive?null!=e.disableArchiveButtonWithTooltip?l.createElement(u.ZP,{container:"body",placement:u.TQ.TOP,title:e.disableArchiveButtonWithTooltip},l.createElement("span",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded"),...(0,d.Z)({component:"FieldActionButtons",element:"archive"})},l.createElement(p.Z,{icon:"archive"}))):l.createElement(u.ZP,{container:"body",placement:u.TQ.TOP,title:"Archive"},l.createElement("a",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded u-danger-pointer"),onClick:e.archive,...(0,d.Z)({component:"FieldActionButtons",element:"archive"})},l.createElement(p.Z,{icon:"archive"}))):c.ZP.ENABLE_ARCHIVING_V2&&e.unarchive?l.createElement(u.ZP,{container:"body",placement:u.TQ.TOP,title:"Unarchive"},l.createElement("a",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded u-primary-pointer"),onClick:e.unarchive,...(0,d.Z)({component:"FieldActionButtons",element:"unarchive"})},l.createElement(p.Z,{icon:"unarchive"}))):null,null!=e.edit&&l.createElement("a",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded u-primary-pointer"),onClick:e.edit,...(0,d.Z)({component:"FieldActionButtons",element:"edit"})},l.createElement(p.Z,{icon:"edit"})),e.extraActionButtons&&e.extraActionButtons.viewMode)
var n}function EditModeFieldActionButtons(e){return l.createElement("span",null,l.createElement("a",{className:r()((0,a.iv)(E.singleButton),"metadata-action faded u-danger-pointer"),onClick:e.cancel},l.createElement(p.Z,{className:"metadata-action-icon--close",icon:"close"})),e.extraActionButtons&&e.extraActionButtons.editMode,l.createElement("a",{className:r()((0,a.iv)(E.singleButton),"metadata-action u-primary-pointer",{inactive:!e.isCompleteEnabled}),onClick:e.complete,...(0,d.Z)({component:"FieldActionButtons",element:"complete"})},l.createElement(p.Z,{className:r()("metadata-action-icon--complete",{inactive:!e.isCompleteEnabled}),icon:"check"})))}function FieldActionButtons(e){return l.createElement("div",{className:r()(e.hasOuterMargin&&(0,a.iv)(E.outerMargin),e.className,{isCompact:e.isCompact})},e.isEditing?l.createElement(EditModeFieldActionButtons,{...e}):l.createElement(ViewModeFieldActionButtons,{...e}))}FieldActionButtons.defaultProps={className:"registry-actionGroup"}
FieldActionButtons.propTypes={archive:o().func,cancel:(e,...t)=>e.isEditing?o().func.isRequired(e,...t):o().func(e,...t),className:o().string.isRequired,complete:(e,...t)=>e.isEditing?o().func.isRequired(e,...t):o().func(e,...t),edit:o().func,isCompact:o().bool,isCompleteEnabled:(e,...t)=>e.isEditing?o().bool.isRequired(e,...t):o().bool(e,...t),isEditing:o().bool.isRequired,remove:o().func,unarchive:o().func}
const h=FieldActionButtons,E=a.mM.create({singleButton:{marginLeft:"6px",marginRight:"6px",padding:"0px"},outerMargin:{marginRight:"8px"}})},590817:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(736957),l=n(927517)
class LongTextValueEditor extends s.Component{constructor(){super(...arguments)
this._handleKeyDown=e=>{!this.props.onKeyDown||e.shiftKey&&l.isEnterKey(e)||this.props.onKeyDown(e)}
this._handleOnChange=e=>{this.props.onChange({value:e.target.value})}}render(){const e=this.props.defaultValue&&this.props.defaultValue.value||""
return s.createElement("textarea",{autoFocus:this.props.autoFocus,className:r()("metadata-tagValueTextArea",(0,a.iv)(d.textarea)),name:"long_text_value",onFocus:e=>{const t=e.target
t.setSelectionRange(0,t.value.length)},onKeyDown:this._handleKeyDown,onChange:this._handleOnChange,placeholder:this.props.placeholder,rows:3,value:e})}}const c=LongTextValueEditor,d=a.mM.create({textarea:{borderRadius:o.$Y}})},175504:(e,t,n)=>{n.d(t,{Z:()=>MetadataTableContent,a:()=>a})
var a,i=n(692013),r=n(764403),s=n.n(r),o=n(989526),l=n(263137),c=n(334148),d=n(476604),u=n(205986),m=n(502633),p=n(684321)
!function(e){e.SMALL="columnWidth-small"
e.DEFAULT="columnWidth-medium"
e.LARGE="columnWidth-large"}(a||(a={}))
function DeleteRowWhenNotEditingConfirmationModal(e){return o.createElement(u.ZP,{title:"Confirm Delete",onRequestSubmit:e.onRequestSubmit,onRequestClose:e.onRequestClose,scrollable:!0,medium:!0,className:"modal-text-only",buttons:[{text:"Cancel",cancel:!0},{text:"Delete",submit:!0,style:c.ZJ.NEGATIVE}]},e.modalBody||o.createElement(o.Fragment,null,"Are you sure you want to delete this row? This action is irreversible."))}function LoadingStateContents(e){return o.createElement("div",{className:"simpleDivTable-row"},e.columnDefinitions.map(((t,n)=>o.createElement("div",{className:(0,i.iv)(h[t.columnWidth||a.DEFAULT]),key:n},o.createElement("div",{className:"metadata-field-row"},o.createElement("div",{className:s()("metadata-field-col",(0,i.iv)(e.isRoomy?h.extraLineHeight:h.regularLineHeight))},0===n?o.createElement(d.Z,null):""))))))}function MetadataTableContent(e){const renderRows=()=>e.items.map(((t,n)=>t&&o.createElement("div",{className:"simpleDivTable-row metadata-field",key:n,...(0,l.Z)({component:"MetadataTableContent",element:"row"})},e.columnDefinitions.map(((r,c)=>o.createElement("div",{className:(0,i.iv)(h[r.columnWidth||a.DEFAULT]),key:c},o.createElement("div",{className:"metadata-field-row"},o.createElement("div",{className:s()("metadata-field-col",(0,i.iv)(e.isRoomy?h.extraLineHeight:h.regularLineHeight)),...(0,l.Z)({component:"MetadataTableContent",element:"column"})},r.mapItemToColumnContent(t,n)),((t,n)=>t===e.columnDefinitions.length-1&&e.canRemoveRows&&o.createElement(p.Z,{className:s()("metadata-field-removeButton",(0,i.iv)(e.isRoomy?h.extraLineHeight:h.regularLineHeight)),isEditing:!1,remove:async()=>{const handleDelete=()=>{e.handleRemoveRow(n)}
e.isEditing?handleDelete():await(0,m.Z)(DeleteRowWhenNotEditingConfirmationModal,{modalBody:e.confirmDeleteModalBody,onRequestSubmit:handleDelete})}}))(c,n))))))))
return o.createElement("div",null,o.createElement("div",{className:"simpleDivTable-header"},e.columnDefinitions.map(((e,t)=>{const n=e.columnWidth||a.DEFAULT
return o.createElement("div",{className:(0,i.iv)(h[n]),key:t},e.columnHeader)}))),e.isLoading?o.createElement(LoadingStateContents,{...e}):e.isEmpty?o.createElement("div",{className:"simpleDivTable-row"},o.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--emptyMessage"},e.emptyMessage)):renderRows())}const h=i.mM.create({[a.SMALL]:{flex:"2"},[a.DEFAULT]:{flex:"3"},[a.LARGE]:{flex:"5"},regularLineHeight:{lineHeight:"16px"},extraLineHeight:{lineHeight:"28px"}})},130153:(e,t,n)=>{n.d(t,{Z:()=>SchemaFieldValueError,d:()=>c})
var a=n(602652),i=n.n(a),r=n(989526),s=n(125440),o=n(497790),l=n(361974)
const c="Required value"
function SchemaFieldValueError(e){const{errorLabel:t,schemaFieldRenderData:n,message:a}=e
return r.createElement("div",{className:"metadata-fieldError"},r.createElement("span",{className:"u-danger-color"},t),r.createElement(s.Z,{renderContent:()=>function getErrorMessageForMetadataTab(e,t,n){return t.fieldType===o.FIELD_TYPES.PART_LINK.type&&e===c?`Highlight bases in the Sequence Map viewer, right-click, and select\n    Create new part... > ${t.name}"`:n}(t,n,a),iconClassName:"u-mini-spacing-left",placement:l.ZH.BOTTOM}))}SchemaFieldValueError.propTypes=i().shape({errorLabel:i().string.isRequired,schemaFieldRenderData:o.SCHEMA_FIELD_RENDER_DATA_SHAPE.isRequired,message:i().string.isRequired}).isRequired},683531:(e,t,n)=>{n.d(t,{Z:()=>E})
var a=n(764403),i=n.n(a),r=n(989526),s=n(531041),o=n(675649),l=n(959871),c=n(263137),d=n(88941),u=n(868710),m=n(36424),p=n(195300),h=n(257846)
class TextAndUrlValueEditor extends r.Component{constructor(){super(...arguments)
this.state={...s.default.defaults({},this.props.defaultValue||{},{value:"",url:""}),showInsertLinkModal:!1}
this.openInsertLinkModal=()=>{this.setState({showInsertLinkModal:!0})}
this.closeInsertLinkModal=()=>{this.setState({showInsertLinkModal:!1})}
this._setLinkAndClose=e=>{if(e&&e.url){const t=o.he(e.url).path===e.url?o.jp(e.url):e.url,n={value:this._isInternalLink(e)?e.name:e.text,url:t}
this.setState(n)
this.props.onChange(n)}this.closeInsertLinkModal()}
this._renderEditLinkModal=()=>r.createElement(p.Z,{open:this.state.showInsertLinkModal},r.createElement(l.Z,{fileId:this.props.fileId,open:this.state.showInsertLinkModal,initialText:this.state.value,initialUrl:this.state.url,isExisting:h.Z.isValidUrl(this.state.url),setLinkAndClose:this._setLinkAndClose}))
this._handleLinkClicked=()=>{this.setState({showInsertLinkModal:!0})}
this._handleOnInputChange=e=>{const t=e.target.value
this.setState({value:t})
this.props.onChange({value:t,url:this.state.url})}}UNSAFE_componentWillReceiveProps(e){null!=e.defaultValue.value&&e.defaultValue.value!==this.props.defaultValue.value&&this.setState({value:e.defaultValue.value})}_isInternalLink(e){return void 0!==e.name}render(){const e=i()("metadata-action-icon--link",{inactive:!h.Z.isValidUrl(this.state.url)})
return r.createElement("div",{className:"u-position-relative u-flex-grow"},this.props.itemLinkAllowed&&r.createElement("div",null,this._renderEditLinkModal(),r.createElement(u.ZP,{container:"body",title:"Link File"},r.createElement("a",{onClick:this._handleLinkClicked,className:"metadata-tagValueInputLink"},r.createElement(m.Z,{icon:"link",className:e})))),r.createElement(d.Z,{autoFocus:this.props.autoFocus,onFocus:e=>{const t=e.target
t.setSelectionRange(0,t.value.length)},onChange:this._handleOnInputChange,onKeyDown:this.props.onKeyDown,placeholder:this.props.placeholder,value:this.state.value,...(0,c.Z)({component:"TextAndUrlValueEditor",element:"FormInput"})}))}}TextAndUrlValueEditor.defaultProps={autoFocus:!1,itemLinkAllowed:!0,placeholder:"Value"}
const E=TextAndUrlValueEditor},115902:(e,t,n)=>{n.d(t,{Dr:()=>calcTagTableErrorsByFieldID,RE:()=>useTagTableState,VD:()=>getRequiredValueErrorFromField})
var a=n(512902),i=n(989526),r=n(251808),s=n(348920)
function getRequiredValueErrorFromField(e){return{errorLabel:"Required value",message:`Value is missing for required field "${e.name}"`,field:e}}function calcTagTableErrorsByFieldID(e,t,n=!0){return e.fields.reduce(((e,a)=>{const i=t.find((e=>e.name===a.name)),o=(0,r.y2)(a.fieldType)||null
a.isRequired&&(!s.ZP.ELN_INTEGRATION_FIELD_NOT_REQUIRED_ON_ENTRY_CREATE_MODAL||!a.isIntegration)&&o&&i&&n&&(!i[o]||Array.isArray(i[o])&&0===i[o].length)&&(e[a.id]=[getRequiredValueErrorFromField(a)])
return e}),{})}function useTagTableState(e,t){const[n,s]=(0,i.useState)(e||null),[o,l]=(0,i.useState)(t||[]),c=(0,i.useCallback)(((e,t)=>{s(e)
l(null!=e?t||e.fields.map((e=>(0,r.bt)(e))):[])}),[]),d=(0,i.useCallback)(((e,t)=>{const n=o[e],i=(0,a.ZP)(o,(a=>{a[e]={...n,...t}}))
l(i)}),[o])
return{tagSchema:n,schemaTags:o,updateTagSchema:c,updateSchemaTag:d}}},143683:(e,t,n)=>{n.d(t,{Jt:()=>a,Mp:()=>u,NU:()=>m,TV:()=>o,kn:()=>l,me:()=>d,oR:()=>c,ox:()=>s,pF:()=>r,tx:()=>p})
var a,i=n(459830)
!function(e){e[e.GENERIC=0]="GENERIC"
e[e.OLIGO_CONJUGATE=1]="OLIGO_CONJUGATE"}(a||(a={}))
const r=[a.OLIGO_CONJUGATE],s=[i.BASIC_FOLDER_ITEM],o={[a.OLIGO_CONJUGATE]:"oligo conjugate",[a.GENERIC]:"generic"},l={[a.GENERIC]:"Generic complex polymer",[a.OLIGO_CONJUGATE]:"Single stranded oligo with one or more conjugated molecules"},c="seq_complexpolymer",d=-1
var u
!function(e){e.RNA="RNA"
e.PEPTIDE="PEPTIDE"
e.CHEM="CHEM"}(u||(u={}))
const m={[i.SEQUENCE]:u.RNA,[i.PROTEIN]:u.PEPTIDE,[i.MOLECULE]:u.CHEM},p="complex polymer"},550977:(e,t,n)=>{n.d(t,{Co:()=>getConnectionInputs,Nc:()=>generateEntityAssociationsFromStructure,UF:()=>getNextPolymerRef,Wz:()=>isComplexPolymer,aH:()=>getEntityIds,gd:()=>getPolymerTypeFromRef,sj:()=>generateEntityAssociationsFromTags,xs:()=>getDisplayResidueIndex})
var a=n(232606),i=n(697134),r=n(143683),s=n(166459),o=n(379346)
function getPolymerTypeFromRef(e){const t=Object.values(r.Mp).filter((t=>e.startsWith(t)));(0,a.hu)(1===t.length,"Expected exactly one HELM polymer type")
return t[0]}function getNextPolymerRef(e,t){const n=r.NU[o.ZP.apiIdToType(t)],i=Object.values(e).flat().filter((e=>e.startsWith(n))),s=Math.max(...i.map((e=>function getPolymerRefNumber(e,t){(0,a.hu)(e.startsWith(t),"Expected polymer HELM reference to start with polymer type")
return parseInt(e.slice(t.length),10)}(e,n))),0)
return n+(s+1).toString()}function generateEntityAssociationsFromTags(e){const t={}
Object.keys(e).reduce(((t,n)=>{const a=e[n]
if(null!=a.targetFiles)for(const e of a.targetFiles)t.hasOwnProperty(e.id)?t[e.id].push(getNextPolymerRef(t,e.id)):t[e.id]=[getNextPolymerRef(t,e.id)]
return t}),t)
return t}function getDisplayResidueIndex(e){return e+1}function getConnectionInputs(e){return e.map((e=>({source:{polymer_ref:e.source.polymerHelmReference,residue_index:e.source.residueIndex},target:{polymer_ref:e.target.polymerHelmReference,residue_index:e.target.residueIndex}})))}function getEntityIds(e){return e.map((e=>{(0,a.hu)(!(0,i.CZ)(e.entity),"Component entity must be accessible to edit the complex polymer")
return e.entity.id}))}function generateEntityAssociationsFromStructure(e){const t={}
e.reduce(((e,t)=>{const{entity:n}=t;(0,a.hu)(!(0,i.CZ)(n),"Component entity must be accessible to edit the complex polymer")
e.hasOwnProperty(n.id)?e[n.id].push(t.helmReference):e[n.id]=[t.helmReference]
return e}),t)
return t}function isComplexPolymer(e){return null!=e&&(0,s.getStore)().getState().ui.modbio.complexPolymerVersionUIs.hasOwnProperty(e)}},581634:(e,t,n)=>{n.d(t,{C$:()=>isNotActualComplexPolymer,Gx:()=>parseOligoForConjugateLinkEntity,Sl:()=>isComplexPolymerStructureEmpty,WG:()=>getNucleotideTypeForOligoConjugate,gv:()=>getModificationsForOligoConjugate})
var a=n(232606),i=n(256605),r=n(143683)
function isNotActualComplexPolymer(e){return null==e.structure}function isComplexPolymerStructureEmpty(e){return 0===e.structure.polymers.length}function parseOligoForConjugateLinkEntity(e){const t=e.filter((e=>e.polymerType===i.Mp.RNA));(0,a.hu)(1===t.length,"Expected there to be exactly one sequence polymer")
const n=t[0]
return{__typename:"SequenceNode",id:r.oR,name:"",nucleotideType:n.nucleotideType,sequenceType:i.uS.oligo,version:{__typename:"SequenceVersionNode",dbId:r.me,bases:n.bases,circular:!1,startIndex:1,annotationsJson:[],modifiedNucleotidesJson:[],partsJson:[],sequencePrimersJson:[],primerPairsJson:[],translationGroupsJson:[],translationsJson:[]}}}function getModificationsForOligoConjugate(e){const t=e.structure.polymers.filter((e=>e.polymerType===i.Mp.RNA));(0,a.hu)(1===t.length,"Expected there to be exactly one sequence polymer")
return t[0].modifiedNucleotides}function getNucleotideTypeForOligoConjugate(e){const t=e.structure.polymers.filter((e=>e.polymerType===i.Mp.RNA));(0,a.hu)(1===t.length,"Expected there to be exactly one sequence polymer")
return t[0].nucleotideType}},605806:(e,t,n)=>{n.d(t,{V2:()=>a,oz:()=>s,p4:()=>i,rS:()=>r})
var a,i
!function(e){e.MUTATION="MUTATION"
e.UNKNOWN="UNKNOWN"}(a||(a={}))
!function(e){e.FRAMEWORK="FRAMEWORK"
e.CDR="CDR"}(i||(i={}))
const r={charactersPerLine:95,linesPerPage:71},s={charactersPerLine:125,linesPerPage:54}},510847:(e,t,n)=>{n.d(t,{AB:()=>h,ET:()=>getSourceForOrganism,Gp:()=>getCodonsForOrganism,Uv:()=>getDisplayNameForOrganism})
var a,i=n(85758),r=n.n(i),s=n(45717),o=n(516778),l=n(773364),c=n(271359),d=n(567e3)
!function(e){e[e.Common=1]="Common"
e[e.Uncommon=2]="Uncommon"}(a||(a={}))
const u=o,hexToHalfOpacityRGB=e=>{const{r:t,g:n,b:a}=r().rgb(e)
return`rgba(${t}, ${n}, ${a}, 0.5)`},getCodonsForOrganism=(e,t)=>Object.entries(s.STANDARD_DNA_CODE).map((([n,a])=>{const i=t===l.yy.NONE?c.pF:l.pd[t][a]
return{bases:n,SLA:a,color:hexToHalfOpacityRGB(i),TLA:s.AMINO_ACID_TLA[a],fraction:e&&u[e][a][n].fraction,frequency:e&&u[e][a][n].frequency}})),getSourceForOrganism=e=>u[e]._source,getDisplayNameForOrganism=e=>u[e]._displayName||e,m=(0,d.Z)(Object.keys(u),[e=>getDisplayNameForOrganism(e)]).filter((e=>u[e]._tier===a.Common)),p=(0,d.Z)(Object.keys(u),[e=>getDisplayNameForOrganism(e)]).filter((e=>u[e]._tier===a.Uncommon)),h=m.concat(p)},171705:(e,t,n)=>{n.d(t,{Ao:()=>getCopyDataForSequenceAndSelection,Cd:()=>getDefaultCopyModeForSequence,GM:()=>getSingleCopiedPrimer,nx:()=>l,sG:()=>getPrimersForCopy})
var a=n(615439),i=n.n(a),r=n(232606),s=n(132814)
const o="The following bases were copied from the sequence primer."
var l
!function(e){e.ORIGINAL="ORIGINAL"
e.DNA="DNA"
e.DNA_REVERSE_COMPLEMENT="DNA_REVERSE_COMPLEMENT"
e.TRANSLATION="TRANSLATION"
e.REVERSE_COMPLEMENT_TRANSLATION="REVERSE_COMPLEMENT_TRANSLATION"
e.RNA="RNA"
e.RNA_REVERSE_COMPLEMENT="RNA_REVERSE_COMPLEMENT"
e.HELM="HELM"}(l||(l={}))
function getPrimersForCopy(e){const t=e.get("selection")
if(t.canPCR())return[t.getStartState("primer"),t.getEndState("primer")]
const n=e.sequencePrimers().filter((e=>e.selected()))
if(1===n.length){const[a]=n
if(a.start()===t.start()&&(0,s.modelEndToRender)(a.end(),e.length())===t.end())return[a,null]}return[null,null]}function getSingleCopiedPrimer(e){const t=e.filter((e=>null!=e))
return 1===t.length?t[0]:null}function getCopyText(e,t){if(e){(0,r.hu)(i()(t,[null,null]),"Primer list should be empty when getting copy text for an oligo.")
return"The following bases were copied from the oligo."}return getSingleCopiedPrimer(t)?o:function _isPCRProductCopied(e){return 2===e.filter((e=>null!=e)).length}(t)?"The following PCR product was copied.":"The following bases were copied from the sequence."}function getCopyDataForSequenceAndSelection(e,t){const n=getPrimersForCopy(e),a=getSingleCopiedPrimer(n)
if(a)return{start:0,end:a.bases().length,selection:void 0,source:a,helpText:o}
if(t.isNotEmpty())return{start:t.start(),end:t.end(),selection:t,source:e,helpText:getCopyText(e.isOligo(),n)};(0,r.hu)(!1,"Expected non-null selection.")}function getDefaultCopyModeForSequence(e){const{source:t}=getCopyDataForSequenceAndSelection(e,e.selection())
return t.canUseFullUTFlexibility()?l.ORIGINAL:l[t.nucleotideType()]}},427478:(e,t,n)=>{n.d(t,{Gp:()=>r,IG:()=>s,RI:()=>a,Tg:()=>o,_p:()=>i,eA:()=>l})
const a=["forward","reverse","probe"]
var i,r,s,o
!function(e){e.FILE="file_import"
e.DB="db_import"
e.CHROMOSOME="chromosome_import"
e.RAW="raw_import"}(i||(i={}))
!function(e){e.MODAL="modal_import"
e.SPREADSHEET="spreadsheet_import"}(r||(r={}))
!function(e){e.FILE="file_import"
e.DB="db_import"}(s||(s={}))
!function(e){e.GLOBAL="global"
e.PROJECT="project"
e.GLOBAL_CREATE_BUTTON="global_create_button"
e.PROJECT_SIDEBAR_CREATE_BUTTON="project_sidebar_create_button"}(o||(o={}))
const l="tempid"},16133:(e,t,n)=>{n.d(t,{DD:()=>getBaseCoercionWarningText,jy:()=>u,m9:()=>buildSequenceModel})
var a=n(769784),i=n(955836),r=n(183367),s=n(773055),o=n(467607),l=n(699418),c=n(91092),d=n(730216)
function getBaseCoercionWarningText(e){return`You're working with ${e}, so we changed ${e===i.Wy.DNA?"U":"T"} to ${e===i.Wy.DNA?"T":"U"}.`}const u=a.Ps`
  query SequenceContentsQuery($id: StrictString!, $versionDbId: StrictInt!)
  @skipAudit
  @engComponent(name: MOLBIO) {
    sequence(id: $id) {
      ... on SequenceNode {
        id
        name
        sequenceType
        nucleotideType
        version(dbId: $versionDbId) {
          ... on SequenceVersionNode {
            dbId
            bases
            circular
            startIndex
            annotationsJson
            partsJson
            sequencePrimersJson
            primerPairsJson
            translationGroupsJson
            translationsJson
            modifiedNucleotidesJson
          }
          ...InaccessibleInfoGraphQL
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,c.f)("InaccessibleInfo").fragment}
`
function buildSequenceModel(e,t,n){const a=(0,d.Z)(function sequenceGqlToServerResponse(e,t){return{id:e.id,name:e.name,nucleotideType:e.nucleotideType,bases:t.bases,circular:t.circular,startIndex:t.startIndex,type:o.fB[e.sequenceType],annotations:t.annotationsJson,parts:t.partsJson,sequence_primers:t.sequencePrimersJson,primer_pairs:t.primerPairsJson,translations:t.translationsJson,translationGroups:t.translationGroupsJson,modified_nucleotides:t.modifiedNucleotidesJson}}(e,t)),i=new r.T9({...a,finalized:!0,complexPolymerId:n},{parse:!0}),c=new s.Sequence({id:e.id,_sequence:i,fileState:null}),u=new l.Au({sequence:c})
c.set({fileState:u})
return c}},132814:(e,t,n)=>{n.r(t)
n.d(t,{SEQUENCE_SUBTYPE_DETAILS:()=>h,SEQUENCE_TYPE_QUERY:()=>p,baseInExclusiveRange:()=>baseInExclusiveRange,baseInRange:()=>baseInRange,displayEndToModel:()=>displayEndToModel,displayStartToModel:()=>displayStartToModel,displayToModel:()=>displayToModel,distance:()=>distance,doesRangeInclude:()=>doesRangeInclude,endInRange:()=>endInRange,evaluateSequenceType:()=>evaluateSequenceType,fullCircular:()=>fullCircular,getMatchSiteInfo:()=>getMatchSiteInfo,getPolymerSubtypeBySequenceId:()=>getPolymerSubtypeBySequenceId,getRangeOverlap:()=>getRangeOverlap,getReindexedPosition:()=>getReindexedPosition,getSequenceSubtype:()=>getSequenceSubtype,getSequenceSubtypeBySequenceId:()=>getSequenceSubtypeBySequenceId,isCircularRangeWithin:()=>isCircularRangeWithin,isOligoSubtype:()=>isOligoSubtype,isRangeOverlap:()=>isRangeOverlap,isRangeWithin:()=>isRangeWithin,isValidRange:()=>isValidRange,isWrap:()=>isWrap,length:()=>length,looseDisplayEndToModel:()=>looseDisplayEndToModel,looseDisplayToModel:()=>looseDisplayToModel,looseModelEndToDisplay:()=>looseModelEndToDisplay,looseModelToDisplay:()=>looseModelToDisplay,mod:()=>mod,modInclusive:()=>modInclusive,modelEndToDisplay:()=>modelEndToDisplay,modelEndToRender:()=>modelEndToRender,modelRangeToDisplay:()=>modelRangeToDisplay,modelStartToDisplay:()=>modelStartToDisplay,modelToDisplay:()=>modelToDisplay,postEditSelection:()=>postEditSelection,primerBindPosition:()=>primerBindPosition,residueSlice:()=>residueSlice,setCutsiteData:()=>setCutsiteData,subtypeSupportsChemicalMods:()=>subtypeSupportsChemicalMods})
var a=n(769784),i=n(531041),r=n(232606),s=n(955836),o=n(459830),l=n(294538),c=n(467607),d=n(91092),u=n(697134),m=n(260929)
const p=a.Ps`
  query SequenceTypeQuery($sequenceId: StrictString!) @skipAudit @engComponent(name: MOLBIO) {
    sequence(id: $sequenceId) {
      ... on SequenceNode {
        id
        sequenceType
        nucleotideType
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,d.f)("InaccessibleInfo").fragment}
`
function postEditSelection(e,t,n){return null!=t&&isWrap(e,t)?[0,n]:[e,e+n]}function isWrap(e,t){return!(null==t||e<t||0===t)}function baseInRange(e,t,n){return t<n?t<=e&&e<n:t<=e||e<n}function baseInExclusiveRange(e,t,n){return t<n?t<e&&e<n:t<e||e<n}function doesRangeInclude(e,t,n){return i.default.every(n,(n=>baseInRange(n,e,t)))}function distance(e,t,n,a){const i=Math.abs(e-t)
if(!a)return i
const r=n-i
return Math.min(i,r)}function isRangeOverlap(e,t,n,a){return baseInRange(n,e,t)||baseInRange(e,n,a)}function isValidRange(e,t,n,a){return 0<=e&&e<n&&0<=t&&t<n&&(e<t||a||0===t)}function getRangeOverlap(e,t,n,a){let i
const r=[]
function _getLinearRangeOverlap(e,t,n,a){const i=Math.max(e,n),s=Math.min(t,a)
i<s&&r.push([i,s])}if(e<t&&n<a)_getLinearRangeOverlap(e,t,n,a)
else if(e>=t&&n>=a){r.push([Math.max(e,n),Math.min(t,a)])
const i=Math.min(e,n),s=Math.max(t,a)
i<s&&r.push([i,s])}else if(e>=t){i=Math.max(e,a)+1
_getLinearRangeOverlap(0,t,n,a)
_getLinearRangeOverlap(e,i,n,a)}else{i=Math.max(n,t)+1
_getLinearRangeOverlap(0,a,e,t)
_getLinearRangeOverlap(n,i,e,t)}return r}function isRangeWithin(e,t,n,a){const i=getRangeOverlap(e,t,n,a)
return 1===i.length&&(i[0][0]===e&&i[0][1]===t)}function isCircularRangeWithin(e,t,n,a,i){(0,r.Gp)(i>=a,"Expected seqLength to be >= end of second range")
const s=0===t?i:t
return e>=s?isRangeWithin(e,i,n,a)&&isRangeWithin(0,s,n,a):isRangeWithin(e,s,n,a)}function length(e,t,n){(0,r.Gp)(null!=e&&null!=t&&null!=n,"Some values in sequtil.length were not defined",{start:e,end:t,seqLength:n})
return 0===n?0:e<t?t-e:e===t?n:(t-e+n)%n}function mod(e,t){(0,r.Gp)(null!=e&&Boolean(t),"Bad mod values",{n:e,m:t})
const n=e%t
return n<0?n+t:n}function endInRange(e,t,n,a){return!(e>a)&&baseInRange(mod(e-1,a),t,n)}function modInclusive(e,t){return e===t?e:mod(e,t)}function modelToDisplay(e,t){null==t&&m.ZK("sequtil.modelToDisplay expects a second parameter startIndex")
null==t&&(t=1)
return null!=e?e+t:e}function modelEndToRender(e,t){return 0===e?t:e}function looseModelToDisplay(e,t){null==t&&m.ZK("sequtil.looseModelToDisplay expects a second parameter startIndex")
null==t&&(t=1)
return e<0?e:e+t}function looseModelEndToDisplay(e,t){null==t&&m.ZK("sequtil.looseModelEndToDisplay expects a second parameter startIndex")
null==t&&(t=1)
return e<=0?e-1:e+t-1}function modelStartToDisplay(e,t){null==t&&m.ZK("sequtil.modelStartToDisplay expects a second parameter startIndex")
null==t&&(t=1)
return modelToDisplay(e,t)}function modelEndToDisplay(e,t,n){null==t&&m.ZK("sequtil.modelEndToDisplay expects a second parameter seqLength")
null==n&&m.ZK("sequtil.modelEndToDisplay expects a third parameter startIndex")
null==n&&(n=1)
return null==e?e:0===e?t+n-1:e+n-1}function modelRangeToDisplay(e,t,n,a){null==a&&m.ZK("sequtil.modelRangeToDisplay expects a fourth parameter startIndex")
null==a&&(a=1)
return[modelStartToDisplay(e,a),modelEndToDisplay(t,n,a)]}function displayToModel(e,t){null==t&&m.ZK("sequtil.displayToModel expects a second parameter startIndex")
return e-t}function looseDisplayToModel(e,t){null==t&&m.ZK("sequtil.looseDisplayToModel expects a second parameter startIndex")
null==t&&(t=1)
return e>0?e-t:0===e?0:e}function looseDisplayEndToModel(e,t){null==t&&m.ZK("sequtil.looseDisplayEndToModel expects a second parameter startIndex")
null==t&&(t=1)
return e>=0?e-t+1:e+1}function displayStartToModel(e,t){null==t&&m.ZK("sequtil.displayStartToModel expects a second parameter startIndex")
return e-t}function displayEndToModel(e,t,n){null==t&&m.ZK("sequtil.displayEndToModel expects a second parameter seqLength")
null==n&&m.ZK("sequtil.displayEndToModel expects a third parameter startIndex")
null==n&&(n=1)
return e===t+n-1?0:e-n+1}function getMatchSiteInfo(e,t){let n,a
const i=e.get("position"),r=e.get("enzyme"),s=r.get("matchingCut"),o=r.get("matchingRegion")
if(e.strand()>=0){a=i-s
a<0&&(a+=t)
n=a+o.length
if(r.doubleCutter()){let t=e.doubleCutterStart()
r.get("offset2")>0&&(t+=r.get("offset2"))
n=Math.max(t,n)}n%=t}else{n=(i+r.get("offset")+s)%t
a=n-o.length
if(r.doubleCutter()){let t=e.doubleCutterStart()
r.get("offset2")<0&&(t+=r.get("offset2"))
a=Math.min(a,t)}a<0&&(a+=t)}return{matchStart:a,matchEnd:n,enzymeName:r.get("name"),recognitionSite:r.get("seq"),enzymeId:r.get("id")}}function setCutsiteData(e,t,n){const a={}
for(const e of Object.keys(t))a[parseInt(e,10)]=[]
const r=e.get("cutsites")
for(const t of Array.from(r.models)){const{matchStart:i,matchEnd:r}=getMatchSiteInfo(t,e.length()),s=Math.floor(i/n),o=Math.floor(r/n)
s in a&&a[s].push(t)
o in a&&o!==s&&a[o].push(t)}for(const e of Object.keys(a)){const n=parseInt(e,10)
a[n]=i.default.sortBy(a[n],(e=>e.name().length))
t[n].set("cutData",a[n])}}function fullCircular(e,t,n,a){return e&&(t===n||0===t&&n===a)}function residueSlice(e,t,n,a){return null!=n&&t<n?e.slice(t,n):e.slice(t)+e.slice(0,n)}function primerBindPosition(e,t,n,a){return 0===a?NaN:1===e?mod(n-1,a):t}function isOligoSubtype(e){return e===o.SequenceSubtype.DNA_OLIGO||e===o.SequenceSubtype.RNA_OLIGO}function subtypeSupportsChemicalMods(e){return e===o.SequenceSubtype.DNA_OLIGO||e===o.SequenceSubtype.RNA_OLIGO||e===o.SequenceSubtype.RNA_SEQUENCE}const h={[o.SequenceSubtype.SEQUENCE]:{nucleotideType:s.Wy.DNA,sequenceType:c.uS.DOUBLE_STRANDED},[o.SequenceSubtype.RNA_SEQUENCE]:{nucleotideType:s.Wy.RNA,sequenceType:c.uS.SINGLE_STRANDED},[o.SequenceSubtype.DNA_OLIGO]:{nucleotideType:s.Wy.DNA,sequenceType:c.uS.OLIGO},[o.SequenceSubtype.RNA_OLIGO]:{nucleotideType:s.Wy.RNA,sequenceType:c.uS.OLIGO}}
async function evaluateSequenceType(e,t){const{doQuerySafe:a}=n(681896),{sequence:i}=await a({query:p},{variables:{sequenceId:e}})
return t(i)}function getSequenceSubtype(e,t){return e===c.uS.DOUBLE_STRANDED?o.SequenceSubtype.SEQUENCE:e===c.uS.SINGLE_STRANDED?o.SequenceSubtype.RNA_SEQUENCE:t===s.Wy.DNA?o.SequenceSubtype.DNA_OLIGO:o.SequenceSubtype.RNA_OLIGO}function getSequenceSubtypeBySequenceId(e){return evaluateSequenceType(e,(e=>{if(!(0,u.CZ)(e))return getSequenceSubtype(c.fB[e.sequenceType],e.nucleotideType)}))}async function getPolymerSubtypeBySequenceId(e){const t=await getSequenceSubtypeBySequenceId(e)
if(null!=t)return l.WX[t]}function getReindexedPosition(e,t,n){return(n+e-t)%n}},811599:(e,t,n)=>{n.d(t,{N6:()=>bulkDetachPrimers,Rd:()=>bulkUpdateSequenceTopology,X1:()=>batchAutoAnnotate,mx:()=>openSequenceVersion,mz:()=>bulkAttachPrimers,vS:()=>bulkRemoveAnnotations,y4:()=>bulkRemoveTranslations})
var a=n(675649),i=n(467607),r=n(540285),s=n(776065),o=n(699418),l=n(974913),c=n(532726),d=n(813757),u=n(8747)
function batchAutoAnnotate(e,t){r.X1(e,t).then((t=>{const n=c.zy({heading:`Auto-annotating ${e.length} DNA sequences`})
return u.Q5(t.status_url).progress((e=>{c.Je(n,{progress:e})})).then((()=>o.ZP.get().updateSequenceVersions(e,{}))).done((()=>{c.Je(n,{progress:d.qJ,heading:`Annotated ${e.length} DNA sequences`})})).fail((()=>{c.Je(n,{progress:d.MR,error:"An error occurred while annotating the DNA sequences. Please try again."})}))})).fail((e=>{l.ZP.notifyError(e)}))}async function bulkRemoveAnnotations(e){await r.vS(e)
l.ZP.success(`Removed all annotations from ${e.length} ${(0,a._6)(e.length,"sequence")}`)}async function bulkRemoveTranslations(e){await r.y4(e)
l.ZP.success(`Removed all translations from ${e.length} ${(0,a._6)(e.length,"sequence")}`)}async function bulkAttachPrimers(e,t){const n=c.zy({heading:`Adding primers to ${e.length} DNA ${(0,a._6)(e.length,"sequence")}`,progress:d.u9})
try{await r.mz(e,t)
c.Je(n,{progress:d.qJ,heading:`Added primers to ${e.length} DNA ${(0,a._6)(e.length,"sequence")}`})}catch(e){if(!e.userMessage){c.QH(n)
throw e}c.Je(n,{progress:d.MR,error:e.userMessage})}}async function bulkDetachPrimers(e){await r.N6(e)
l.ZP.success(`Detached all primers from ${e.length} ${(0,a._6)(e.length,"sequence")}`)}async function bulkUpdateSequenceTopology(e,t){await r.ZM(e,{circular:t===i.JH.CIRCULAR})
l.ZP.success(`Updated topology of ${e.length} ${(0,a._6)(e.length,"sequence")} to ${t}`)
o.ZP.get().updateSequenceVersions(e,{})}function openSequenceVersion(e,t){s.Z.openFile(e,{onOpen(e){const n=e.get("sequence").get("versions"),a=n.get(t)
null!=a?n.trigger("open",a):l.ZP.warn("This version no longer exists.")}})}},5245:(e,t,n)=>{n.d(t,{Be:()=>trackClickOnCreateNewOligo,Fp:()=>trackUploadSpreadsheetInNucleotideImportModal,K:()=>trackSequenceMapBaseSelection,Ow:()=>trackSubmitInBioentitySpreadsheetImportModal,SX:()=>trackMetadataTabViewIfValidSequence,YZ:()=>trackSequenceMapClickAnalyze,aJ:()=>trackAutofillFeatureResult,aP:()=>trackNucleotideCreateModalSubmit,bx:()=>trackEnterValueInNucleotideCreateModal,cl:()=>trackSequenceMapRightClickWithSelectedBases,hM:()=>trackSequenceMapTabView,jE:()=>trackSubmitAutoFillFeature,on:()=>trackDescriptionTabViewIfValidSequence,p8:()=>trackSequenceMapClick,r7:()=>trackClickOnAnnotationInSequence,sd:()=>trackOpenedRNAFromSequenceMap,tK:()=>trackSequenceMapCtrlF,tg:()=>trackSequenceMapClickCreate,zL:()=>a})
var a,i=n(468943),r=n(232606),s=n(171471),o=n(379346)
function trackEventIfNucleotideSequence(e,t,n={}){(null==t?void 0:t.id)&&o.ZP.isNucleotideSequence(t.id)&&i.L9(e,{sequence_id:t.id,...n})}!function(e){e.clickAndDrag="click_and_drag"
e.shiftClickDown="shift_click_down"
e.shiftClickUp="shift_click_up"
e.doubleClick="double_click"}(a||(a={}))
const l={minimap:"Linear Map",linear:"Sequence Map"}
function trackSequenceMapBaseSelection(e,t,n,a,i){var r
if(null==a)return
const o=i?null!==(r=l[i])&&void 0!==r?r:i:null
trackEventIfNucleotideSequence(s.Jg.SELECTED_BASES_IN_MAP,e,{start_index:null!=n?n:null,end_index:null!=a?a:null,click_selection_method:t,maybe_map_name:null!=o?o:null})}function trackSequenceMapTabView(e,t){trackEventIfNucleotideSequence(s.Jg.VIEWED_SEQUENCE_ENTITY_MAP_TAB,e,{tab_title:null!=t?t:null})}function trackMetadataTabViewIfValidSequence(e){trackEventIfNucleotideSequence(s.Jg.VIEWED_SEQUENCE_ENTITY_METADATA_TAB,e)}function trackDescriptionTabViewIfValidSequence(e){trackEventIfNucleotideSequence(s.Jg.VIEWED_SEQUENCE_ENTITY_DESCRIPTION_TAB,e)}function trackSequenceMapClick(e,t){var n
const a=t?null!==(n=l[t])&&void 0!==n?n:t:null
trackEventIfNucleotideSequence(s.Jg.CLICKED_SEQUENCE_ENTITY_SEQUENCE_MAP,e,{maybe_map_name:null!=a?a:null})}function trackSequenceMapClickCreate(e){trackEventIfNucleotideSequence(s.Jg.CLICKED_CREATE_IN_SEQUENCE_MAP,e)}function trackSequenceMapClickAnalyze(e){trackEventIfNucleotideSequence(s.Jg.CLICKED_ANALYZE_IN_SEQUENCE_MAP,e)}function trackSequenceMapRightClickWithSelectedBases(e){trackEventIfNucleotideSequence(s.Jg.CLICKED_RIGHT_ON_SELECTED_SEQUENCE_BASES,e)}function trackSequenceMapCtrlF(e){trackEventIfNucleotideSequence(s.Jg.OPENED_SEQUENCE_MAP_SEARCH_MODAL,e)}function trackOpenedRNAFromSequenceMap(){i.L9(s.Jg.OPENED_RNA_SEQUENCE_FROM_TRANSCRIPTION_VISUALIZATION)}function trackSubmitAutoFillFeature(e,t,n,a){const l=e.filter((e=>o.ZP.isNucleotideSequence(e)));(0,r.Gp)(l.length===e.length,`Autofill-${n} submitted in ${t} with non nucleotide sequences`)
i.L9(s.Dv.SUBMITTED_AUTOFILL_SEQUENCE_FEATURE,{sequence_ids:l.toString(),action_origin:t,autofill_feature:n,autofill_run_uuid:a})}function trackAutofillFeatureResult({actionOrigin:e,autofillRunUID:t,autofillName:n,sequenceId:a,autofillCount:r,autofillErrors:o}){i.L9(s.Dv.AUTOFILL_ACTION_COMPLETED,{action_origin:e,autofill_feature:n,sequence_id:a,autofill_count:r,autofill_run_uuid:t,errors:o.toString()})}function trackClickOnAnnotationInSequence(e,t,n){trackEventIfNucleotideSequence(s.Jg.CLICKED_ANNOTATION_IN_SEQUENCE_MAP,e,{start_index:null!=t?t:null,end_index:null!=n?n:null})}function trackClickOnCreateNewOligo(e,t){i.L9(s.Jg.OPENED_CREATE_OLIGO_MODAL,{action_origin:e,initial_import_flow:t})}function trackEnterValueInNucleotideCreateModal(e,t){i.L9(s.Jg.ENTERED_VALUE_IN_NUCLEOTIDE_CREATE_MODAL,{item_type:e,field_name:t})}function trackNucleotideCreateModalSubmit(e){i.L9(s.Jg.SUBMITTED_NUCLEOTIDE_CREATE_MODAL,{item_type:e})}function trackUploadSpreadsheetInNucleotideImportModal(e,t,n,a){i.L9(s.Jg.UPLOADED_NUCLEOTIDE_IMPORT_SPREADSHEET,{item_type:e,upload_type:t,outcome:n,error_message:a})}function trackSubmitInBioentitySpreadsheetImportModal(e){i.L9(s.Dv.SUBMITTED_BIOENTITY_SPREADSHEET_IMPORT_MODAL,{item_type:e})}},650700:(e,t,n)=>{n.d(t,{p:()=>TopologyDropdown})
var a=n(692013),i=n(989526),r=n(467607),s=n(102176),o=n(271359),l=n(954240),c=n(920672),d=n(36424),u=n(801455),m=n(865486),p=n(297020),h=n(924982)
const E={[r.JH.CIRCULAR]:"Circular",[r.JH.LINEAR]:"Linear"}
function TopologyDropdown(e){return i.createElement(s.Z,null,i.createElement(u.Z,{label:e.label}),e.disabled&&e.disabledTooltipText&&i.createElement(c.Z,{text:e.disabledTooltipText},i.createElement(d.Z,{icon:"info-circle",className:(0,a.iv)(S.infoIcon)})),i.createElement(l.ZP,{displayName:E[e.topology],disabled:e.disabled,menu:i.createElement(m.ZP,{value:e.topology,width:p.zL.FULL},Object.values(r.JH).map((t=>i.createElement(h.Z,{key:t,value:t,onSelect:()=>{e.onChange(t)}},E[t])))),dataTestAttrs:{component:"TopologyDropdown",element:"selectDropdown"}}))}const S=a.mM.create({infoIcon:{marginLeft:"8px",color:o.TG}})},590385:(e,t,n)=>{n.d(t,{Jb:()=>s,Qt:()=>a,pc:()=>c,v9:()=>o,w1:()=>i,wu:()=>l})
var a,i,r,s
!function(e){e.KABAT="kabat"
e.CHOTHIA="chothia"
e.IMGT="imgt"}(a||(a={}))
!function(e){e.KABAT="kabat"
e.CHOTHIA="chothia"
e.IMGT="imgt"
e.NORTH="north"}(i||(i={}))
!function(e){e.HUMAN="human"
e.MOUSE="mouse"
e.RAT="rat"
e.RABBIT="rabbit"
e.RHESUS="rhesus"
e.PIG="pig"
e.ALPACA="alpaca"}(r||(r={}))
!function(e){e.HEAVY="H"
e.KAPPA="K"
e.LAMBDA="L"
e.ALPHA="A"
e.BETA="B"
e.DELTA="D"
e.GAMMA="G"}(s||(s={}))
const o={H:"Heavy",K:"Kappa",L:"Lambda",A:"TCR Alpha",B:"TCR Beta",G:"TCR Gamma",D:"TCR Delta"}
var l
!function(e){e.NLinkedGlycosylation="NLinkedGlycosylation"
e.AsparagineDeamidation="AsparagineDeamidation"
e.AsparagineDeamidationInCDRs="AsparagineDeamidationInCDRs"
e.TryptophanOxidation="TryptophanOxidation"
e.MethionineOxidation="MethionineOxidation"
e.AspartateIsomerization="AspartateIsomerization"}(l||(l={}))
const c={NLinkedGlycosylation:"N-Linked Glycosylation",AsparagineDeamidation:"Asparagine Deamidation",AsparagineDeamidationInCDRs:"Asparagine Deamidation (in CDRs)",TryptophanOxidation:"Tryptophan Oxidation",MethionineOxidation:"Methionine Oxidation",AspartateIsomerization:"Aspartate Isomerization"}},637420:(e,t,n)=>{n.d(t,{Z:()=>l})
var a,i=n(531041),r=n(232606),s=n(228552),o=n(590385)
!function(e){e.NUMBERING="NUMBERING"
e.CDR="CDR"}(a||(a={}))
const l=new class _AntibodyAnalysisStore{constructor(e){e&&!n.g.__NODE_TESTING__&&(0,r.hu)(!1,"Seeding is only for tests, use instantiated exported stores instead of building your own")
this.data=e||{metadata:{},validNumbering:{},invalidNumbering:{},validCdrAnnotations:{},invalidCdrAnnotations:{},promises:{}}}getCachedAnnotations(e,t){var n
return(null===(n=this.data.validCdrAnnotations[e])||void 0===n?void 0:n[t])||null}getCachedNumbering(e,t){var n
return(null===(n=this.data.validNumbering[e])||void 0===n?void 0:n[t])||null}numberingHasFetched(e,t){var n,a
return Boolean(null===(n=this.data.validNumbering[e])||void 0===n?void 0:n[t])||Boolean(null===(a=this.data.invalidNumbering[e])||void 0===a?void 0:a[t])}annotationsHaveFetched(e,t){var n,a
return Boolean(null===(n=this.data.validCdrAnnotations[e])||void 0===n?void 0:n[t])||Boolean(null===(a=this.data.invalidCdrAnnotations[e])||void 0===a?void 0:a[t])}initializeNumberingDataForResidues(e,t){e[t]||(e[t]={[o.Qt.IMGT]:null,[o.Qt.CHOTHIA]:null,[o.Qt.KABAT]:null})}initializeCdrDataForResidues(e,t){e[t]||(e[t]={[o.w1.KABAT]:null,[o.w1.IMGT]:null,[o.w1.CHOTHIA]:null,[o.w1.NORTH]:null})}addNumberingToStore(e){const t=e.results.filter((e=>!e.message)),n=e.results.filter((e=>e.message))
if(t.length>0){this.initializeNumberingDataForResidues(this.data.validNumbering,e.residues)
this.data.validNumbering[e.residues][e.scheme]=t}if(n.length>0){this.initializeNumberingDataForResidues(this.data.invalidNumbering,e.residues)
this.data.invalidNumbering[e.residues][e.scheme]=n}}addAnnotationsToStore(e){const t=e.results.filter((e=>!e.message)),n=e.results.filter((e=>e.message))
if(t.length>0){this.initializeCdrDataForResidues(this.data.validCdrAnnotations,e.residues)
this.data.validCdrAnnotations[e.residues][e.definition]=t}if(n.length>0){this.initializeCdrDataForResidues(this.data.invalidCdrAnnotations,e.residues)
this.data.invalidCdrAnnotations[e.residues][e.definition]=n}}addMetadataToStore(e){this.data.metadata[e.residues]=e.results.map((({organism:e,chainType:t})=>({organism:e,chainType:t})))}makePromiseKey(e,t,n){return`${e}-${t}-${n}`}async getOrMakeRequest(e,t){const n=t.map((e=>this.data.promises[e]))
if(n.every((e=>Boolean(e)))){await Promise.all(n)
return}const a=e()
t.forEach((e=>{this.data.promises[e]=a}))
await a}async fetchCDRAnnotationsForStore(e,t){const n=e.map((e=>this.makePromiseKey(e,a.CDR,t)))
await this.getOrMakeRequest((async()=>{const n=await(0,s.S)(e,t)
for(const e of n){this.addAnnotationsToStore(e)
this.addMetadataToStore(e)}}),n)}async fetchNumberingsForStore(e,t){const n=e.map((e=>this.makePromiseKey(e,a.NUMBERING,t)))
await this.getOrMakeRequest((async()=>{const n=await(0,s.h)(e,t)
for(const e of n){this.addNumberingToStore(e)
this.addMetadataToStore(e)}}),n)}async getData(e,t,n,a,i){const r=e.map((e=>e.toUpperCase()))
if(r.every((e=>a(e,t))))return r.map((e=>n(e,t)))
const s=r.filter((e=>!a(e,t)))
await i(s,t)
return r.map((e=>n(e,t)))}async getCDRAnnotations(e,t){return await this.getData(e,t,this.getCachedAnnotations.bind(this),this.annotationsHaveFetched.bind(this),this.fetchCDRAnnotationsForStore.bind(this))}async getNumbering(e,t){return await this.getData(e,t,this.getCachedNumbering.bind(this),this.numberingHasFetched.bind(this),this.fetchNumberingsForStore.bind(this))}getCachedNumberingMessage(e,t){var n,a
const r=e.toUpperCase(),s=null===(a=null===(n=this.data.invalidNumbering[r])||void 0===n?void 0:n[t])||void 0===a?void 0:a.map((e=>e.message))
if(!s)return
const o=i.default.uniq(s)
return 1===o.length?o[0]:o.join("; ")}getCachedCDRMessage(e,t){var n,a
const r=e.toUpperCase(),s=null===(a=null===(n=this.data.invalidCdrAnnotations[r])||void 0===n?void 0:n[t])||void 0===a?void 0:a.map((e=>e.message))
if(!s)return
const o=i.default.uniq(s)
return 1===o.length?o[0]:o.join("; ")}getCachedMetadata(e){const t=e.toUpperCase()
return this.data.metadata[t]}}},503627:(e,t,n)=>{n.d(t,{K:()=>AssemblyLayoutValidator})
var a=n(64558),i=n(256605),r=n(434202),s=n(117694)
class AssemblyLayoutValidator{constructor(e){this.state=e}getNthBin(e){return this.state.binsByCid[this.state.binCidOrdering[e]]}getPreviousBin(e){return e>0?this.getNthBin(e-1):this.state.topology===i.ZH.CIRCULAR?this.getNthBin(this.state.binCidOrdering.length-1):null}getNextBin(e){return e<this.state.binCidOrdering.length-1?this.getNthBin(e+1):this.state.topology===i.ZH.CIRCULAR?this.getNthBin(0):null}binCanBeAdjacentToSpacer(e){return null==e||e.binType===r.Uc.SPACER||[r.y0.PRIMER_PAIR,r.y0.SLICE].includes(e.fragmentProductionMethod)}getAssemblyLayoutValidationErrors(){const e=(0,a.Xc)(this.state.binsByCid,(()=>new Set)),t=[]
for(const[t,n]of this.state.binCidOrdering.entries()){const a=this.state.binsByCid[n]
if((0,r.Eg)(a)){const a=this.getPreviousBin(t),o=this.getNextBin(t);(null!=a&&(0,r.Eg)(a)||null!=o&&(0,r.Eg)(o))&&e[n].add(s.jA.ADJACENT_SPACERS)
if(this.state.method.type!==r.tU.CONCATENATION){(null!=a&&(0,r.fO)(a)||null!=o&&(0,r.fO)(o))&&(this.binCanBeAdjacentToSpacer(a)||this.binCanBeAdjacentToSpacer(o)||e[n].add(s.jA.SPACERS_NEED_PRIMERS))
this.state.topology!==i.ZH.LINEAR||null!=a&&null!=o||e[n].add(s.jA.TERMINAL_LINEAR_SPACERS)}}}const n=Object.values(this.state.binsByCid).filter((e=>e.binType===r.Uc.FRAGMENT)),o=(0,a.vM)(n,(e=>e.name))
Object.values(o).forEach((t=>{if(t.length>1)for(const n of t)e[n.cid].add(s.jA.DUPLICATE_BIN_NAME)}))
n.length>(0,r.uG)()&&t.push(s.jA.TOO_MANY_BINS)
return{errorsByBin:e,otherErrors:t}}}},789471:(e,t,n)=>{n.d(t,{AB:()=>bulkAssemblyBinAdded,BD:()=>bulkAssemblySpacerBasesUpdated,Js:()=>bulkAssemblyBinRenamed,Wx:()=>bulkAssemblySpacerAdded,cj:()=>a,qT:()=>bulkAssemblyBinMoved,un:()=>bulkAssemblyInitialized})
var a
!function(e){e.BULK_ASSEMBLY_INITIALIZED="BULK_ASSEMBLY_INITIALIZED"
e.BULK_ASSEMBLY_STATE_UPDATED="BULK_ASSEMBLY_STATE_UPDATED"
e.BULK_ASSEMBLY_BIN_ADDED="BULK_ASSEMBLY_BIN_ADDED"
e.BULK_ASSEMBLY_BIN_MOVED="BULK_ASSEMBLY_BIN_MOVED"
e.BULK_ASSEMBLY_BIN_RENAMED="BULK_ASSEMBLY_BIN_RENAMED"
e.BULK_ASSEMBLY_BIN_UPDATED_FRAGMENT_PRODUCTION_METHOD="BULK_ASSEMBLY_BIN_UPDATED_FRAGMENT_PRODUCTION_METHOD"
e.BULK_ASSEMBLY_SPACER_ADDED="BULK_ASSEMBLY_SPACER_ADDED"
e.BULK_ASSEMBLY_SPACER_BASES_UPDATED="BULK_ASSEMBLY_SPACER_BASES_UPDATED"
e.BULK_ASSEMBLY_CONSTRUCTS_UPDATED="BULK_ASSEMBLY_CONSTRUCTS_UPDATED"}(a||(a={}))
function bulkAssemblyInitialized(e,t){return{type:a.BULK_ASSEMBLY_INITIALIZED,assemblyId:e,assemblyState:t}}function bulkAssemblyBinAdded(e,t){return{type:a.BULK_ASSEMBLY_BIN_ADDED,assemblyId:e,cid:t}}function bulkAssemblyBinMoved(e,t,n){return{type:a.BULK_ASSEMBLY_BIN_MOVED,assemblyId:e,sourceIndex:t,targetIndex:n}}function bulkAssemblyBinRenamed(e,t,n){return{type:a.BULK_ASSEMBLY_BIN_RENAMED,assemblyId:e,binCid:t,name:n}}function bulkAssemblySpacerAdded(e,t){return{type:a.BULK_ASSEMBLY_SPACER_ADDED,assemblyId:e,cid:t}}function bulkAssemblySpacerBasesUpdated(e,t,n){return{type:a.BULK_ASSEMBLY_SPACER_BASES_UPDATED,assemblyId:e,binCid:t,residues:n}}},434202:(e,t,n)=>{n.d(t,{BO:()=>w,CG:()=>g,DL:()=>isConvertedAssemblyType,EE:()=>F,EN:()=>h,Eg:()=>isBulkAssemblySpacerBin,Fs:()=>x,GR:()=>U,Hz:()=>isSpacerSupportingBulkAssemblyType,KC:()=>k,Pr:()=>v,QA:()=>C,R:()=>y,Re:()=>M,Sv:()=>A,Uc:()=>p,Vk:()=>T,bm:()=>P,cF:()=>u,cH:()=>b,fO:()=>isBulkAssemblyFragmentBin,hk:()=>d,i_:()=>isRestrictionEnzymeBulkAssemblyType,jZ:()=>m,kA:()=>O,mX:()=>E,mr:()=>R,n1:()=>N,pj:()=>f,r9:()=>D,tU:()=>S,uG:()=>getMaxFragmentBinCount,vy:()=>L,y0:()=>I,y3:()=>_})
var a=n(348920),i=n(47984),r=n(294538),s=n(467607),o=n(256605),l=n(921554),c=n(875855)
const d=150,u=2,m=15
function getMaxFragmentBinCount(){return m}var p
!function(e){e.FRAGMENT="FRAGMENT"
e.SPACER="SPACER"}(p||(p={}))
const h={[o.ZH.CIRCULAR]:s.JH.CIRCULAR,[o.ZH.LINEAR]:s.JH.LINEAR},E={[s.JH.CIRCULAR]:o.ZH.CIRCULAR,[s.JH.LINEAR]:o.ZH.LINEAR}
function isBulkAssemblyFragmentBin(e){return e.binType===p.FRAGMENT}function isBulkAssemblySpacerBin(e){return e.binType===p.SPACER}function isRestrictionEnzymeBulkAssemblyType(e){return e.type===S.GOLDEN_GATE||a.ZP.MOLBIO_RESTRICTION_ENZYME_IN_GIBSON&&e.type===S.GIBSON}var S
!function(e){e.GOLDEN_GATE="GOLDEN_GATE"
e.GIBSON="GIBSON"
e.HOMOLOGY="HOMOLOGY"
e.CONCATENATION="CONCATENATION"}(S||(S={}))
function isSpacerSupportingBulkAssemblyType(e){return[S.CONCATENATION,S.GIBSON,S.GOLDEN_GATE].includes(e)}const T={[S.GOLDEN_GATE]:"Golden Gate",[S.GIBSON]:"Gibson",[S.HOMOLOGY]:"Homology",[S.CONCATENATION]:"Concatenation"},g={[S.GOLDEN_GATE]:"spacer",[S.GIBSON]:"spacer",[S.CONCATENATION]:"constant"}
function isConvertedAssemblyType(e){return e===i.ASSEMBLY_TYPE.GIBSON||e===i.ASSEMBLY_TYPE.GOLDEN_GATE}const f={[i.ASSEMBLY_TYPE.GOLDEN_GATE]:S.GOLDEN_GATE,[i.ASSEMBLY_TYPE.GIBSON]:S.GIBSON}
var I,A
!function(e){e.EXISTING_CUT_SITES="EXISTING_CUT_SITES"
e.PRIMER_PAIR="PRIMER_PAIR"
e.EXISTING_HOMOLOGY_REGIONS="EXISTING_HOMOLOGY_REGIONS"
e.SLICE="SLICE"}(I||(I={}))
!function(e){e.VARIABLE="VARIABLE"}(A||(A={}))
const y={[S.GOLDEN_GATE]:{[I.EXISTING_CUT_SITES]:{display:"Use existing cut sites",details:"Digest fragment with existing cut sites."},[I.PRIMER_PAIR]:{display:"Use a primer pair",details:"Use primers to introduce cut sites via PCR."},[I.EXISTING_HOMOLOGY_REGIONS]:null,[I.SLICE]:null,[A.VARIABLE]:{display:"Variable",details:"Use a mix of both methods above."}},[S.GIBSON]:{[I.EXISTING_CUT_SITES]:{display:"Digest with restriction enzyme",details:"Use existing cut sites to linearize fragments."},[I.PRIMER_PAIR]:{display:"Add new overlaps using PCR",details:"Use a primer pair to generate new homology regions."},[I.EXISTING_HOMOLOGY_REGIONS]:{display:"Find existing overlaps",details:"Use existing homology regions."},[I.SLICE]:null,[A.VARIABLE]:{display:"Variable",details:"Use a mix of the methods above."}},[S.HOMOLOGY]:{[I.EXISTING_CUT_SITES]:null,[I.PRIMER_PAIR]:null,[I.EXISTING_HOMOLOGY_REGIONS]:{display:"Use existing homology regions",details:"Use existing homology regions to join fragments"},[I.SLICE]:null,[A.VARIABLE]:null},[S.CONCATENATION]:{[I.EXISTING_CUT_SITES]:null,[I.PRIMER_PAIR]:null,[I.EXISTING_HOMOLOGY_REGIONS]:null,[I.SLICE]:{display:"",details:""},[A.VARIABLE]:null}},_=[I.PRIMER_PAIR,A.VARIABLE],C={defaultRestrictionEnzymeId:85,defaultFragmentProductionMethod:I.EXISTING_CUT_SITES,preRecognitionSiteLength:6,preRecognitionSiteBases:"",bindingRegionMinMeltingTemp:50,bindingRegionMinLength:18,primerPairMaxMeltingTempDifference:5},R={defaultFragmentProductionMethod:I.PRIMER_PAIR,bindingRegionMinMeltingTemp:50,primerMinMeltingTemp:60,bindingAndHomologyRegionMinLength:20,bindingAndHomologyRegionMaxLength:30,primerPairMaxMeltingTempDifference:5},N={defaultFragmentProductionMethod:I.EXISTING_HOMOLOGY_REGIONS,ambiguousConstructPreference:o.ln.USE_LARGER_FRAGMENT_IN_FIRST_BIN},O=(r.Dj.dna_sequence,I.SLICE,{[S.GIBSON]:{type:S.GIBSON,parameters:R},[S.GOLDEN_GATE]:{type:S.GOLDEN_GATE,parameters:C},[S.HOMOLOGY]:{type:S.HOMOLOGY,parameters:N}})
var b
!function(e){e.LEGACY_BULK_ASSEMBLY="LEGACY_BULK_ASSEMBLY"
e.ASSEMBLY_WIZARD="ASSEMBLY_WIZARD"}(b||(b={}))
const v=l.vx[0],P=c.ij.FORWARD,L={[c.ij.FORWARD]:c.ij.REVERSE,[c.ij.REVERSE]:c.ij.FORWARD},D={[c.ij.FORWARD]:1,[c.ij.REVERSE]:-1},M={[c.ij.FORWARD]:o.iM.FORWARD,[c.ij.REVERSE]:o.iM.REVERSE},w={GIBSON_PARAMETERS:"bulkGibsonParameters",SHOW_FRAGMENT_DETAILS:"showFragmentDetails",SHOW_OVERLAP_DETAILS:"showOverlapDetails"},F="SKIP_BIN_SENTINEL",k="Skip",U="3.0",x={fullWidth:!0,fullHeight:!0,scrollable:!1,bodyPadded:!1}},565242:(e,t,n)=>{n.d(t,{OH:()=>createAssembly,fr:()=>patchBulkAssembly,zm:()=>finalizeAssembly})
var a=n(434202),i=n(771398)
function createAssembly({name:e,folderId:t,procedureJson:n}){return i.s0({url:"/1/api/bulk-assemblies",data:{name:e,folderId:t,procedureJson:{version:a.GR,contents:n}}})}function patchBulkAssembly(e,t){return i.Ry({url:`/1/api/bulk-assemblies/${e}`,data:{procedureJson:null!=t?{version:a.GR,contents:t}:void 0}})}function finalizeAssembly(e){return i.s0({url:"/1/api/bulk-assemblies/finalize",data:{...e,procedureJson:{version:a.GR,contents:e.procedureJson}}})}},901441:(e,t,n)=>{n.d(t,{QZ:()=>maybeGetBulkAssemblyValidationInput,bp:()=>E,ix:()=>makeBulkAssemblyValidationCache,j0:()=>prepareValidationResults,nj:()=>constructPolymerIsSequence,oH:()=>getBulkAssemblyValidationInput})
var a=n(769784),i=n(64558),r=n(84587),s=n.n(r),o=n(232606),l=n(256605),c=n(503627),d=n(434202),u=n(875855),m=n(907704),p=n(118574),h=n(901113)
const E=a.Ps`
  fragment BulkAssemblyValidationFragment on BulkAssemblyValidationNode {
    assemblyValidationResult {
      validationMessages {
        status
        text
      }
    }
    fragmentValidationResults {
      fragmentId
      validationMessages {
        status
        text
      }
    }
    constructValidationResults {
      constructId
      polymer {
        ... on BulkAssemblyConstructSequenceNode {
          createdSequenceId
          createdSequenceCurrentName
          bases
          circular
          nucleotideType
          sequenceType
          modifiedNucleotides {
            position
            sugarMonomerId
            baseMonomerId
            phosphateMonomerId
          }
          annotations {
            name
            start
            end
            strand
            color
          }
          translations {
            name
            strand
            color
            codonTranslationTable
            regions {
              start
              end
            }
          }
        }
        ... on BulkAssemblyConstructProteinNode {
          createdProteinId
          createdProteinCurrentName
          aminoAcids
          annotations {
            name
            start
            end
            color
          }
        }
      }
      constructFragments {
        fragmentId
        start
        end
        overhang3Bases
        overlap5End
        overlap3Start
        inputStart
        inputEnd
      }
      primerValidationResults {
        fragmentId
        sequencePrime
        validationMessages {
          status
          text
        }
        primer {
          ... on BulkAssemblyConstructPrimerNode {
            oligoId
            oligoSource
            oligoContents {
              name
              bases
            }
            bindPosition
            overhangLength
            bindTm
            wholeTm
          }
        }
      }
      validationMessages {
        status
        text
      }
    }
  }
`
function constructPolymerIsSequence(e){return"BulkAssemblyConstructSequenceNode"===e.__typename}function makeBulkAssemblyValidationCache(){return{fragmentResultsByKey:new Map,constructResultsByKey:new Map}}function fragmentCacheKey(e,t){return s()({fragment:e,params:t.params})}function constructCacheKey(e,t,n){return s()({fragments:e.fragments.map((e=>t[e.fragmentId])),construct:e,params:n.params,spacers:n.spacers,topology:n.topology})}const S={[d.tU.GIBSON]:l.tU.GIBSON,[d.tU.CONCATENATION]:l.tU.CONCATENATION,[d.tU.GOLDEN_GATE]:l.tU.GOLDEN_GATE,[d.tU.HOMOLOGY]:l.tU.HOMOLOGY}
function toGQLAssemblyParams(e){var t,n,a,i,r,s,l,c,u,m,p,E,T
const{method:g}=e,f=g.type,I={method:S[f],concatenationParams:null,gibsonParams:null,goldenGateParams:null,homologyParams:null}
switch(f){case d.tU.GIBSON:I.gibsonParams={bindingRegionMinMeltingTemp:null!==(t=g.parameters.bindingRegionMinMeltingTemp)&&void 0!==t?t:d.mr.bindingRegionMinMeltingTemp,primerMinMeltingTemp:null!==(n=g.parameters.primerMinMeltingTemp)&&void 0!==n?n:d.mr.primerMinMeltingTemp,bindingAndHomologyRegionMinLength:null!==(a=g.parameters.bindingAndHomologyRegionMinLength)&&void 0!==a?a:d.mr.bindingAndHomologyRegionMinLength,bindingAndHomologyRegionMaxLength:null!==(i=g.parameters.bindingAndHomologyRegionMaxLength)&&void 0!==i?i:d.mr.bindingAndHomologyRegionMaxLength,primerPairMaxMeltingTempDifference:null!==(r=g.parameters.primerPairMaxMeltingTempDifference)&&void 0!==r?r:d.mr.primerPairMaxMeltingTempDifference}
break
case d.tU.GOLDEN_GATE:I.goldenGateParams={restrictionEnzymeId:null!==(s=g.parameters.defaultRestrictionEnzymeId)&&void 0!==s?s:d.QA.defaultRestrictionEnzymeId,preRecognitionSiteLength:null!==(l=g.parameters.preRecognitionSiteLength)&&void 0!==l?l:d.QA.preRecognitionSiteLength,preRecognitionSiteBases:null!==(c=g.parameters.preRecognitionSiteBases)&&void 0!==c?c:d.QA.preRecognitionSiteBases,bindingRegionMinMeltingTemp:null!==(u=g.parameters.bindingRegionMinMeltingTemp)&&void 0!==u?u:d.QA.bindingRegionMinMeltingTemp,bindingRegionMinLength:null!==(m=g.parameters.bindingRegionMinLength)&&void 0!==m?m:d.QA.bindingRegionMinLength,primerPairMaxMeltingTempDifference:null!==(p=g.parameters.primerPairMaxMeltingTempDifference)&&void 0!==p?p:d.QA.primerPairMaxMeltingTempDifference}
break
case d.tU.HOMOLOGY:I.homologyParams={ambiguousConstructPreference:null!==(E=g.parameters.ambiguousConstructPreference)&&void 0!==E?E:d.n1.ambiguousConstructPreference}
break
case d.tU.CONCATENATION:I.concatenationParams={polymerSubtype:g.parameters.polymerSubtype,applyDefaultNullTerminalPhosphate:null===(T=g.parameters.applyDefaultNullTerminalPhosphate)||void 0===T||T}
break
default:(0,o.hu)(!1,`Unexpected cloning method ${(0,h.vE)(f)}`)}return I}function getBulkAssemblyValidationInput(e,t){const n=new c.K(e),a=e.fragments.flatMap((n=>{const{cid:a,sequence:i,sequenceVersionDbId:r,protein:s,proteinVersionDbId:o,bin:l,start:c,end:h,orientation:E,preferredPrimer5:S,preferredPrimer3:T,restrictionEnzyme5:g,restrictionEnzyme3:f}=n
let I,A
if((0,m.WB)(e.method)){I=s
A=o}else{I=i
A=r}if(I.type===u.xd.ID&&null!=A&&l.type===u.xd.ID&&(c.type===u.xd.NUMBER||!(0,m.K)(d.tU.HOMOLOGY))&&(h.type===u.xd.NUMBER||!(0,m.K)(d.tU.HOMOLOGY))&&E.type===u.xd.ORIENTATION&&(S.type===u.xd.ID||(0,u.Av)(S))&&(T.type===u.xd.ID||(0,u.Av)(T))){const n=t.getBasicPolymerInfo(I.id,A)
if(null==n)return[]
const i=(0,u.lq)(g)?g.id:null,r=(0,u.lq)(f)?f.id:null,s=(0,p.WD)(i,n.residues,n.circular),o=(0,p.WD)(r,n.residues,n.circular),y=e.binsByCid[l.id],{startErrorMessage:_,endErrorMessage:C}=(0,p.Lv)({start:c,end:h},n.residues.length,n.startIndex,E.value,s,o,(0,m.K)(e.method.type),n.circular)
if(null==_&&null==C&&null!=y&&(0,d.fO)(y)&&null!=y.fragmentProductionMethod)return[{fragmentId:a,polymerId:I.id,polymerVersionDbId:A,start:(0,u.l5)(c)?c.value:null,end:(0,u.l5)(h)?h.value:null,startRestrictionEnzymeId:i,endRestrictionEnzymeId:r,orientation:d.Re[E.value],preferredPrimer5OligoId:S.type===u.xd.ID?S.id:null,preferredPrimer3OligoId:T.type===u.xd.ID?T.id:null,fragmentProductionMethod:y.fragmentProductionMethod}]}return[]}))
if(0===a.length)return null
const i=n.getAssemblyLayoutValidationErrors()
if(!Object.values(i.errorsByBin).every((e=>0===e.size))||0!==i.otherErrors.length)return null
const r=function getBulkAssemblySpacerValidationInputs(e){let t=0
const n=[]
for(const a of e)a.binType===d.Uc.SPACER?n.push({precedingFragmentIndex:t-1,bases:a.residues}):t++
return n}(e.binCidOrdering.map((t=>e.binsByCid[t]))),s=new Set(a.map((e=>e.fragmentId)))
return{fragments:a,constructs:e.constructs.flatMap((t=>{var n
const a=[]
for(const i of e.binCidOrdering){if(e.binsByCid[i].binType!==d.Uc.FRAGMENT)continue
const r=null===(n=t.constructFragmentsByBinId[i])||void 0===n?void 0:n.fragment
if(null==r||!(0,u.Yv)(r)||r.rawText!==d.EE){if(null==r||r.type!==u.xd.ID||!s.has(r.id))return[]
a.push({fragmentId:r.id})}}return a.length<2?[]:[{constructId:t.cid,fragments:a}]})),spacers:r,topology:e.topology,params:toGQLAssemblyParams(e)}}function maybeGetBulkAssemblyValidationInput(e,t){return e?getBulkAssemblyValidationInput(e,t):null}function prepareValidationResults(e,t,n){if(t&&e){!function populateValidationCache(e,t,n){const a=(0,i.Pe)(e.fragments,(e=>e.fragmentId)),r=(0,i.Pe)(e.constructs,(e=>e.constructId))
for(const i of t.fragmentValidationResults){const t=fragmentCacheKey(a[i.fragmentId],e)
n.fragmentResultsByKey.set(t,i)}for(const i of t.constructValidationResults){const t=constructCacheKey(r[i.constructId],a,e)
n.constructResultsByKey.set(t,i)}}(e,t,n)
return{assemblyResult:t.assemblyValidationResult,fragmentResultsByCid:(0,i.Pe)(t.fragmentValidationResults,(e=>e.fragmentId)),constructResultsByCid:(0,i.Pe)(t.constructValidationResults,(e=>e.constructId))}}if(e){const t=(0,i.Pe)(e.fragments,(e=>e.fragmentId))
return{assemblyResult:h.br,fragmentResultsByCid:(0,i.m8)(e.fragments.map((t=>{var a
const i=fragmentCacheKey(t,e)
return[t.fragmentId,null!==(a=n.fragmentResultsByKey.get(i))&&void 0!==a?a:h.br]}))),constructResultsByCid:(0,i.m8)(e.constructs.map((a=>{var i
const r=constructCacheKey(a,t,e)
return[a.constructId,null!==(i=n.constructResultsByKey.get(r))&&void 0!==i?i:h.br]})))}}return{assemblyResult:null,fragmentResultsByCid:{},constructResultsByCid:{}}}},117694:(e,t,n)=>{n.d(t,{HR:()=>getErrorText,g0:()=>a,jA:()=>i,xo:()=>s.zc})
var a,i,r=n(232606),s=n(256605),o=n(434202),l=n(808844),c=n(901113)
!function(e){e.USE_EXISTING="USE_EXISTING"
e.CREATE_NEW="CREATE_NEW"}(a||(a={}))
!function(e){e.ADJACENT_SPACERS="ADJACENT_SPACERS"
e.DUPLICATE_BIN_NAME="DUPLICATE_BIN_NAME"
e.SPACERS_NEED_PRIMERS="SPACERS_NEED_PRIMERS"
e.TERMINAL_LINEAR_SPACERS="TERMINAL_LINEAR_SPACERS"
e.TOO_MANY_BINS="TOO_MANY_BINS"}(i||(i={}))
function getErrorText(e,t){const n=t===o.tU.CONCATENATION?"constant":"spacer",a=t===o.tU.CONCATENATION?"constants":"spacers"
switch(e){case i.ADJACENT_SPACERS:return`${(0,l.kC)(a)} cannot be next to one another.`
case i.DUPLICATE_BIN_NAME:return"Each bin must have a unique name."
case i.SPACERS_NEED_PRIMERS:return`${(0,l.kC)(n)} must be next to a bin that uses a primer pair.`
case i.TERMINAL_LINEAR_SPACERS:return"Spacers cannot be used before the first bin or after the last bin when assembling linear constructs."
case i.TOO_MANY_BINS:return`Assembly cannot have more than ${o.jZ} bins. Remove bin(s) to finalize.`
default:(0,r.Gp)(!1,`Unexpected error type: ${(0,c.vE)(e)}.`)
return""}}},875855:(e,t,n)=>{n.d(t,{Av:()=>isEmptyBAValue,C5:()=>baNumericId,Cb:()=>parseBAEndpoint,Io:()=>baNumber,W9:()=>getOrientationWithFallback,Yv:()=>isBARawText,_F:()=>isBAId,_g:()=>parseBAOrientation,ej:()=>r,ij:()=>a,l5:()=>isBANumber,lq:()=>isBANumericId,rx:()=>baId,sZ:()=>baOrientation,vW:()=>baRawText,wz:()=>formatBAEndpoint,xd:()=>o,xz:()=>isBAOrientation,zQ:()=>l})
var a,i=n(64558)
!function(e){e.FORWARD="FORWARD"
e.REVERSE="REVERSE"}(a||(a={}))
const r={FORWARD:"Forward",REVERSE:"Reverse"},s=new Map(Object.entries(r).map((([e,t])=>[t.toLowerCase(),e])))
var o
!function(e){e.RAW_TEXT="RAW_TEXT"
e.ID="ID"
e.NUMERICAL_ID="NUMERICAL_ID"
e.NUMBER="NUMBER"
e.ORIENTATION="ORIENTATION"}(o||(o={}))
function baNumber(e){return{type:o.NUMBER,value:e}}function baRawText(e){return{type:o.RAW_TEXT,rawText:e}}function baId(e){return{type:o.ID,id:e}}function baNumericId(e){return{type:o.NUMERICAL_ID,id:e}}function baOrientation(e){return{type:o.ORIENTATION,value:e}}const l=baRawText("")
function isEmptyBAValue(e){return e.type===o.RAW_TEXT&&""===e.rawText}function formatBAEndpoint(e,t){return e.type===o.NUMBER?String(t(e.value)):e.rawText}function parseBAEndpoint(e,t){if(e.type===o.NUMBER)return e
const n=e.rawText,a=(0,i.Lk)(n)
if(null==a)return e
return baNumber(t(a))}function parseBAOrientation(e){if(isBAOrientation(e))return e
if(isEmptyBAValue(e))return baOrientation(a.FORWARD)
const t=e.rawText,n=s.get(t.toLowerCase())
return n?baOrientation(n):baRawText(t)}function getOrientationWithFallback(e){const t=parseBAOrientation(e)
return t.type===o.ORIENTATION?t.value:a.FORWARD}function isBARawText(e){return e.type===o.RAW_TEXT}function isBAId(e){return e.type===o.ID}function isBANumericId(e){return e.type===o.NUMERICAL_ID}function isBANumber(e){return e.type===o.NUMBER}function isBAOrientation(e){return e.type===o.ORIENTATION}},874952:(e,t,n)=>{n.d(t,{Bq:()=>LegacyBulkAssemblyBanner,Ku:()=>BulkAssemblyBanner,oE:()=>ConcatenationBanner,q5:()=>AssemblyWizardBanner})
var a=n(692013),i=n(989526),r=n(468943),s=n(518155),o=n(675649),l=n(955836),c=n(171471),d=n(459830),u=n(383628),m=n(502633),p=n(808844)
function LegacyBulkAssemblyBanner(e){return i.createElement("div",{className:(0,a.iv)(h.spacing)},i.createElement(u.ZP,{bannerType:u.ct.INFO,text:i.createElement("span",null,"You're using the new combinatorial assembly tool. To use the legacy tool,"," ",i.createElement("a",{href:"bulk-workflows/assembly",onClick:t=>{(0,o.c4)(t)
e.onClick()}},"click here."))}))}function AssemblyWizardBanner(e){return i.createElement("div",{className:(0,a.iv)(h.spacing)},i.createElement(u.ZP,{bannerType:u.ct.INFO,text:i.createElement("span",null,"You're using the new combinatorial assembly tool. To use the Assembly Wizard,"," ",i.createElement("a",{onClick:t=>{(0,m.Z)(s.C,{})
e.onClick()}},"click here."))}))}function BulkAssemblyBanner(e){(0,i.useEffect)((()=>{r.L9(c.Jg.VIEWED_BULK_ASSEMBLY_BETA_BANNER,{actionOrigin:e.actionOrigin})}),[e.actionOrigin])
return i.createElement(u.ZP,{bannerType:u.ct.INFO,text:e.text,supportingInfo:"The new combinatorial assembly tool is currently under development. We expect to continue improving upon it in the coming months."})}function ConcatenationBanner({polymerType:e}){let t
if(e===l.sW.AA)t=(0,p.B_)(d.PROTEIN)
else{t=`${(0,p.B_)(d.LONG_SEQUENCE_NUCLEOTIDE_TYPE_TO_SEQUENCE_SUBTYPE[e])} or ${(0,p.B_)(d.OLIGO_NUCLEOTIDE_TYPE_TO_SEQUENCE_SUBTYPE[e])}`}return i.createElement("div",{className:(0,a.iv)(h.spacing)},i.createElement(u.ZP,{bannerType:u.ct.INFO,text:`Create new ${t} by joining multiple fragments together.`}))}const h=a.mM.create({spacing:{marginBottom:"24px"}})},318042:(e,t,n)=>{n.d(t,{h:()=>CloningSetupModal})
var a=n(692013),i=n(989526),r=n(468943),s=n(232606),o=n(171471),l=n(467607),c=n(204026),d=n(390462),u=n(434202),m=n(874952),p=n(244306),h=n(348920)
function AssemblyParametersControlsLayout(e){const t=[]
for(let n=0;n<e.controls.length;n+=2)t.push(e.controls.slice(n,n+2))
return i.createElement("div",null,t.map(((e,t)=>{const[n,r]=e,s=null!=r?[E.column]:[E.emptySecondColumn]
return i.createElement("div",{className:(0,a.iv)(E.row),key:t},i.createElement("div",{className:(0,a.iv)(E.column)},n),r&&i.createElement("div",{className:(0,a.iv)(E.spacer)}),i.createElement("div",{className:(0,a.iv)(...s)},r&&r))})))}const E=a.mM.create({row:{display:"flex",marginTop:"16px"},column:{flex:1},spacer:{width:"22px"},emptySecondColumn:{flex:"0 1 0%"}})
var S=n(517004),T=n(137975),g=n(134749),f=n(676328)
function HomologyRegionMaxLength(e){return i.createElement(f.Z,{id:"homologyRegionMaxLength",label:"Max. length of homology/binding regions (bp)",labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.homologyRegionMaxLength,min:0,required:!0,onChange:t=>{e.updateHomologyRegionMaxLength(t.target.numericValue)},isDisabled:e.isDisabled}))}function HomologyRegionMinLength(e){return i.createElement(f.Z,{id:"homologyRegionMinLength",label:"Min. length of homology/binding regions (bp)",labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.homologyRegionMinLength,required:!0,onChange:t=>{e.updateHomologyRegionMinLength(t.target.numericValue)},isDisabled:e.isDisabled}))}var I=n(778476)
function HomologyRegionMinMeltingTemp(e){return i.createElement(f.Z,{id:"homologyRegionMinMeltingTemp",label:`Min. ${I.Mg} of binding region (${I.ig}C)`,labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.homologyRegionMinMeltingTemp,required:!0,onChange:t=>{e.updateHomologyRegionMinMeltingTemp(t.target.numericValue)},isDisabled:e.isDisabled}))}function PrimerMinMeltingTemp(e){return i.createElement(f.Z,{id:"primerMinMeltingTemp",label:`Min. ${I.Mg} of whole primer (${I.ig}C)`,labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.primerMinMeltingTemp,required:!0,onChange:t=>{e.updatePrimerMinMeltingTemp(t.target.numericValue)},isDisabled:e.isDisabled}))}function PrimerPairMaxMeltingTempDifference(e){return i.createElement(f.Z,{id:"primerPairMaxMeltingTempDifference",label:`Max. ${I.Mg} difference between primer pairs (${I.ig}C)`,labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.primerPairMaxMeltingTempDifference,min:0,required:!0,onChange:t=>{e.updatePrimerPairMaxMeltingTempDifference(t.target.numericValue)},isDisabled:e.isDisabled}))}var A=n(334148)
function ResetToDefaultsButton(e){return i.createElement(A.Co,{className:(0,a.iv)(y.rightAlign),buttonStyle:A.ZJ.LINK,text:"Reset to defaults",onClick:()=>{e.resetOnClick()}})}const y=a.mM.create({rightAlign:{float:"right"}})
var _=n(456670)
function ReviewParametersText(){return i.createElement("div",{className:(0,a.iv)(C.headerText)},"Review the following parameters.")}const C=a.mM.create({headerText:_.NM})
function GibsonParametersControls(e){var t
const n=null!==(t=e.fragmentProductionMethodOverride)&&void 0!==t?t:e.gibsonParameters.defaultFragmentProductionMethod,a=i.createElement(HomologyRegionMinMeltingTemp,{homologyRegionMinMeltingTemp:e.gibsonParameters.bindingRegionMinMeltingTemp,updateHomologyRegionMinMeltingTemp:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GIBSON,parameterName:"bindingRegionMinMeltingTemp",parameterValue:t})
e.patchGibsonParameters({bindingRegionMinMeltingTemp:t})},isDisabled:e.isReadOnly}),s=i.createElement(HomologyRegionMinLength,{homologyRegionMinLength:e.gibsonParameters.bindingAndHomologyRegionMinLength,updateHomologyRegionMinLength:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GIBSON,parameterName:"bindingAndHomologyRegionMinLength",parameterValue:t})
e.patchGibsonParameters({bindingAndHomologyRegionMinLength:t})},isDisabled:e.isReadOnly}),l=i.createElement(HomologyRegionMaxLength,{homologyRegionMaxLength:e.gibsonParameters.bindingAndHomologyRegionMaxLength,updateHomologyRegionMaxLength:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GIBSON,parameterName:"bindingAndHomologyRegionMaxLength",parameterValue:t})
e.patchGibsonParameters({bindingAndHomologyRegionMaxLength:t})},isDisabled:e.isReadOnly}),c=i.createElement(PrimerMinMeltingTemp,{primerMinMeltingTemp:e.gibsonParameters.primerMinMeltingTemp,updatePrimerMinMeltingTemp:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GIBSON,parameterName:"primerMinMeltingTemp",parameterValue:t})
e.patchGibsonParameters({primerMinMeltingTemp:t})},isDisabled:e.isReadOnly}),d=i.createElement(PrimerPairMaxMeltingTempDifference,{primerPairMaxMeltingTempDifference:e.gibsonParameters.primerPairMaxMeltingTempDifference,updatePrimerPairMaxMeltingTempDifference:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GIBSON,parameterName:"primerPairMaxMeltingTempDifference",parameterValue:t})
e.patchGibsonParameters({primerPairMaxMeltingTempDifference:t})},isDisabled:e.isReadOnly}),m=i.createElement(S.N,{fragmentProductionMethod:n,updateFragmentProductionMethod:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_FRAGMENT_PRODUCTION_METHOD,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,fragmentProductionMethod:t})
e.patchGibsonParameters({defaultFragmentProductionMethod:t})},bulkAssemblyMethod:u.tU.GIBSON,dropdownMethods:[u.y0.PRIMER_PAIR,u.y0.EXISTING_HOMOLOGY_REGIONS,...h.ZP.MOLBIO_RESTRICTION_ENZYME_IN_GIBSON?[u.y0.EXISTING_CUT_SITES]:[]],disabled:null!=e.fragmentProductionMethodOverride||e.isReadOnly})
return i.createElement(AssemblyParametersControlsLayout,{controls:[i.createElement(ReviewParametersText,null),!e.isReadOnly&&i.createElement(ResetToDefaultsButton,{resetOnClick:()=>{e.patchGibsonParameters(u.mr)}}),m,i.createElement("div",null),...n===u.y0.EXISTING_HOMOLOGY_REGIONS||n===u.y0.EXISTING_CUT_SITES?[s,l,a]:[a,c,s,l,d],i.createElement("div",null)]})}function BindingRegionMinLength(e){return i.createElement(f.Z,{id:"bindingRegionMinLength",label:"Binding region - min. length (bp)",labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.bindingRegionMinLength,min:0,required:!0,onChange:t=>{e.updateBindingRegionMinLength(t.target.numericValue)},isDisabled:e.isDisabled}))}function BindingRegionMinMeltingTemp(e){return i.createElement(f.Z,{id:"bindingRegionMinMeltingTemp",label:`Binding region - min. ${I.Mg} (${I.ig}C)`,labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.bindingRegionMinMeltingTemp,required:!0,onChange:t=>{e.updateBindingRegionMinMeltingTemp(t.target.numericValue)},isDisabled:e.isDisabled}))}var R=n(48047),N=n(665704)
function PreRecognitionSiteBases(e){return i.createElement(N.Z,{placeholder:"Enter bases",label:"Pre-recognition site - bases",labelStyle:g.gF.LABEL,value:e.preRecognitionSiteBases,onChange:t=>{e.updatePreRecognitionSiteBases((0,R.stripDegenerate)(t.target.value,R.NucleotideType.DNA))},disabled:e.isDisabled})}function PreRecognitionSiteLength(e){return i.createElement(f.Z,{id:"preRecognitionSiteLength",label:"Pre-recognition site - length (bp)",labelStyle:g.gF.LABEL,isRequired:!0},i.createElement(T.Z,{value:e.preRecognitionSiteLength,min:0,required:!0,onChange:t=>{e.updatePreRecognitionSiteLength(t.target.numericValue)},isDisabled:e.isDisabled}))}var O=n(61419),b=n(973606),v=n(102176),P=n(801455)
function GoldenGateParametersControls(e){var t,n
return i.createElement(AssemblyParametersControlsLayout,{controls:[i.createElement(ReviewParametersText,null),!e.isReadOnly&&i.createElement(ResetToDefaultsButton,{resetOnClick:()=>{e.patchGoldenGateParameters(u.QA)}}),i.createElement(v.Z,null,i.createElement(P.Z,{label:"Type IIS Restriction Enzyme",htmlFor:"restrictionEnzyme"}),i.createElement(O.L,{allowedRestrictionEnzymeIds:b.ZP.TYPE_IIS_ENZYME_IDS,isDisabled:e.isReadOnly,restrictionEnzymeId:e.goldenGateParameters.defaultRestrictionEnzymeId,shouldAllowNull:!1,updateRestrictionEnzymeId:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_ENZYME,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,enzymeId:t})
e.patchGoldenGateParameters({defaultRestrictionEnzymeId:t})}})),i.createElement(S.N,{fragmentProductionMethod:null!==(t=e.fragmentProductionMethodOverride)&&void 0!==t?t:e.goldenGateParameters.defaultFragmentProductionMethod,updateFragmentProductionMethod:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_FRAGMENT_PRODUCTION_METHOD,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,fragmentProductionMethod:t})
e.patchGoldenGateParameters({defaultFragmentProductionMethod:t})},bulkAssemblyMethod:u.tU.GOLDEN_GATE,dropdownMethods:[u.y0.EXISTING_CUT_SITES,u.y0.PRIMER_PAIR],disabled:null!=e.fragmentProductionMethodOverride||e.isReadOnly}),...(null!==(n=e.fragmentProductionMethodOverride)&&void 0!==n?n:e.goldenGateParameters.defaultFragmentProductionMethod)!==u.y0.EXISTING_CUT_SITES?[i.createElement(PreRecognitionSiteLength,{preRecognitionSiteLength:e.goldenGateParameters.preRecognitionSiteLength,updatePreRecognitionSiteLength:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,parameterName:"preRecognitionSiteLength",parameterValue:t})
e.patchGoldenGateParameters({preRecognitionSiteLength:t,preRecognitionSiteBases:""!==e.goldenGateParameters.preRecognitionSiteBases&&t!==e.goldenGateParameters.preRecognitionSiteBases.length?"":e.goldenGateParameters.preRecognitionSiteBases})},isDisabled:e.isReadOnly}),i.createElement(PreRecognitionSiteBases,{preRecognitionSiteBases:e.goldenGateParameters.preRecognitionSiteBases,updatePreRecognitionSiteBases:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,parameterName:"preRecognitionSiteBases",parameterValue:t})
e.patchGoldenGateParameters({preRecognitionSiteBases:t,preRecognitionSiteLength:t.length})},isDisabled:e.isReadOnly}),i.createElement(BindingRegionMinLength,{bindingRegionMinLength:e.goldenGateParameters.bindingRegionMinLength,updateBindingRegionMinLength:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,parameterName:"bindingRegionMinLength",parameterValue:t})
e.patchGoldenGateParameters({bindingRegionMinLength:t})},isDisabled:e.isReadOnly}),i.createElement(BindingRegionMinMeltingTemp,{bindingRegionMinMeltingTemp:e.goldenGateParameters.bindingRegionMinMeltingTemp,updateBindingRegionMinMeltingTemp:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,parameterName:"bindingRegionMinMeltingTemp",parameterValue:t})
e.patchGoldenGateParameters({bindingRegionMinMeltingTemp:t})},isDisabled:e.isReadOnly}),i.createElement(PrimerPairMaxMeltingTempDifference,{primerPairMaxMeltingTempDifference:e.goldenGateParameters.primerPairMaxMeltingTempDifference,updatePrimerPairMaxMeltingTempDifference:t=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:u.tU.GOLDEN_GATE,parameterName:"primerPairMaxMeltingTempDifference",parameterValue:t})
e.patchGoldenGateParameters({primerPairMaxMeltingTempDifference:t})},isDisabled:e.isReadOnly}),i.createElement("div",null)]:[]]})}var L=n(256605),D=n(954240),M=n(361974),w=n(865486),F=n(297020),k=n(924982)
const U={[L.ln.USE_LARGER_FRAGMENT_IN_FIRST_BIN]:"Use larger fragment in first bin",[L.ln.USE_SMALLER_FRAGMENT_IN_FIRST_BIN]:"Use smaller fragment in first bin"}
function HomologyParametersControls(e){return i.createElement(AssemblyParametersControlsLayout,{controls:[i.createElement(f.Z,{id:"ambiguousConstructPreference",label:"Ambiguous construct preference",labelStyle:g.gF.LABEL,isRequired:!0,help:i.createElement("span",null,"In cases where the sequences you wish to assemble could create two distinct constructs, Benchling will create the construct that uses the larger/smaller fragment in the first bin. This can apply when assembling two circular sequences, since each sequence produces two fragments."),helpInteraction:M.x2.HOVER},i.createElement(D.ZP,{className:(0,a.iv)(x.ambiguousConstructPreferenceDropdown),displayName:U[e.homologyParameters.ambiguousConstructPreference],menu:i.createElement(w.ZP,{width:F.zL.FIT_CONTENT},i.createElement(k.Z,{key:L.ln.USE_LARGER_FRAGMENT_IN_FIRST_BIN,value:L.ln.USE_LARGER_FRAGMENT_IN_FIRST_BIN,onSelect:t=>{e.patchHomologyParameters({ambiguousConstructPreference:t})}},U[L.ln.USE_LARGER_FRAGMENT_IN_FIRST_BIN]),i.createElement(k.Z,{key:L.ln.USE_SMALLER_FRAGMENT_IN_FIRST_BIN,value:L.ln.USE_SMALLER_FRAGMENT_IN_FIRST_BIN,onSelect:t=>{e.patchHomologyParameters({ambiguousConstructPreference:t})}},U[L.ln.USE_SMALLER_FRAGMENT_IN_FIRST_BIN]))}))]})}const x=a.mM.create({ambiguousConstructPreferenceDropdown:{width:"250px"}})
var B=n(907704),Z=n(650700),q=n(383628),G=n(205986),V=n(198210),H=n(901113)
const W={[u.tU.GOLDEN_GATE]:{primary:"Join up to 15 DNA fragments into a single piece using Type IIS restriction enzymes and T4 DNA ligase.",secondary:"Optionally, you can use primers to introduce cut sites via PCR."},[u.tU.GIBSON]:{primary:"Join up to 15 DNA fragments in a single-tube isothermal reaction.",secondary:"Gibson assembly uses primers to create homology regions between adjacent fragments. You can fine-tune the primer parameters below."},[u.tU.HOMOLOGY]:{primary:"Join DNA fragments using homology regions.",secondary:"Benchling will automatically detect complementary overlaps, or homology regions, between adjacent fragments."}}
function CloningSetupModal(e){var t,n,h,E,S,T,f,I,y,_
const[C,R]=(0,i.useState)(null!==(t=e.initialName)&&void 0!==t?t:"Untitled assembly"),[O,b]=(0,i.useState)(null!==(h=null!==(n=e.initialFolderId)&&void 0!==n?n:d.Z.get(d.O.INVENTORY))&&void 0!==h?h:null),[L,D]=(0,i.useState)(null!==(E=e.initialNumFragmentBins)&&void 0!==E?E:2),[M,w]=(0,i.useState)(!0),[F,k]=(0,i.useState)(null!==(S=e.initialTopology)&&void 0!==S?S:l.JH.CIRCULAR),[U,x]=(0,i.useState)(null!==(f=null===(T=e.initialMethodData)||void 0===T?void 0:T.type)&&void 0!==f?f:u.tU.GOLDEN_GATE),[$,K]=(0,i.useState)((null===(I=e.initialMethodData)||void 0===I?void 0:I.type)===u.tU.GOLDEN_GATE?e.initialMethodData.parameters:u.QA),[z,Q]=(0,i.useState)((null===(y=e.initialMethodData)||void 0===y?void 0:y.type)===u.tU.GIBSON?e.initialMethodData.parameters:u.mr),[j,J]=(0,i.useState)((null===(_=e.initialMethodData)||void 0===_?void 0:_.type)===u.tU.HOMOLOGY?e.initialMethodData.parameters:u.n1);(0,i.useEffect)((()=>{r.L9(o.Jg.OPENED_BULK_ASSEMBLY_SETUP_MODAL,{actionOrigin:e.actionOrigin,cloningMethod:U})}),[U,e.actionOrigin])
function buildProcedureJson(){const e=function buildMethodData(){switch(U){case u.tU.GIBSON:return{type:u.tU.GIBSON,parameters:z}
case u.tU.GOLDEN_GATE:return{type:u.tU.GOLDEN_GATE,parameters:$}
case u.tU.HOMOLOGY:return{type:u.tU.HOMOLOGY,parameters:j}
default:(0,s.hu)(!1,`Unexpected cloning method: ${(0,H.vE)(U)}`)}}()
return{method:e,topology:u.mX[F],...(0,B.Wd)((0,B.IZ)(L,e.parameters.defaultFragmentProductionMethod,F,e.type)),fragments:[],constructs:[]}}const X=e.isArchived||e.isFinalized
return i.createElement(G.ZP,{title:e.isInitialSetup?"Assemble DNA":"Assembly settings",buttons:[{text:"Cancel",cancel:!0},{text:"Save",submit:!0,disabled:function disableSave(){return""===C.trim()||null==O||!M||(U===u.tU.GOLDEN_GATE?!function areGoldenGateParametersValid(e){return null!=e.preRecognitionSiteLength&&null!=e.bindingRegionMinMeltingTemp&&null!=e.bindingRegionMinLength&&null!=e.primerPairMaxMeltingTempDifference}($):U===u.tU.GIBSON?!function areGibsonParametersValid(e){return[u.y0.PRIMER_PAIR,u.y0.EXISTING_HOMOLOGY_REGIONS,u.y0.EXISTING_CUT_SITES].includes(e.defaultFragmentProductionMethod)&&null!=e.bindingRegionMinMeltingTemp&&null!=e.primerMinMeltingTemp&&null!=e.bindingAndHomologyRegionMinLength&&null!=e.bindingAndHomologyRegionMaxLength&&null!=e.primerPairMaxMeltingTempDifference}(z):U!==u.tU.HOMOLOGY)}(),style:A.ZJ.SECONDARY}],onRequestClose:()=>{r.L9(o.Jg.CLOSED_REDESIGNED_BULK_ASSEMBLY_MODAL,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL})
e.onRequestClose()},onRequestSubmit:()=>{e.onRequestSubmit({name:C,folderId:O,procedureJson:buildProcedureJson()})}},e.isInitialSetup&&null!=e.previousTool&&(e.previousTool===u.cH.LEGACY_BULK_ASSEMBLY?i.createElement(m.Bq,{onClick:()=>{r.L9(o.Jg.CLOSED_REDESIGNED_BULK_ASSEMBLY_MODAL,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_BETA_BANNER,previousTool:e.previousTool})
e.onRequestClose()}}):i.createElement(m.q5,{onClick:()=>{r.L9(o.Jg.CLOSED_REDESIGNED_BULK_ASSEMBLY_MODAL,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_BETA_BANNER,previousTool:e.previousTool})
e.onRequestClose()}})),i.createElement(N.Z,{value:C,placeholder:"Untitled assembly",label:"Name",labelStyle:g.gF.LABEL,onBlur:()=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_NAME_FIELD,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:U})},onChange:e=>{R(e.target.value)},isRequired:!0,dataTestAttrs:{component:"CloningSetupModal",element:"nameInput"},disabled:e.isArchived}),i.createElement("div",{className:(0,a.iv)(Y.margin)},i.createElement(v.Z,null,i.createElement(P.Z,{label:"Location",isRequired:!0}),i.createElement(c.Z,{enableRedesign:!0,showInventory:!0,value:O,onChange:e=>{b(e.target.value)},unsetOnFetchFail:!1}))),i.createElement("div",{className:(0,a.iv)(Y.flex,Y.margin)},i.createElement("div",{className:(0,a.iv)(Y.column)},i.createElement(p.c,{disabled:!e.isInitialSetup||X,value:L,onChangeValue:({isValid:e,value:t})=>{D(t)
w(e)}})),i.createElement("div",{className:(0,a.iv)(Y.column)},i.createElement(Z.p,{label:"Topology of construct",topology:F,onChange:e=>{k(e)},disabled:!1}))),i.createElement(v.Z,null,i.createElement(P.Z,{label:"Cloning method"}),i.createElement(V.Z,{options:[u.tU.GOLDEN_GATE,u.tU.GIBSON,u.tU.HOMOLOGY].map((e=>({id:e,buttonProps:{text:u.Vk[e]},dataTestAttrs:{component:"CloningSetupModal",element:"BulkAssemblyMethodToggle",key:e}}))),selection:U,onChangeSelection:e=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_CLONING_METHOD_FIELD,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:U})
x(e)},size:A.qE.SMALL,isFullWidth:!0,disabled:e.lockBulkAssemblyMethod})),i.createElement(q.ZP,{text:W[U].primary,supportingInfo:W[U].secondary,action:{actionType:q.J7.ACCORDION},bannerType:q.ct.INFO,hideIcon:!0}),U!==u.tU.HOMOLOGY&&i.createElement("hr",null),U===u.tU.GOLDEN_GATE&&i.createElement(GoldenGateParametersControls,{goldenGateParameters:$,patchGoldenGateParameters:e=>{K({...$,...e})},fragmentProductionMethodOverride:e.fragmentProductionMethodOverride,isReadOnly:X}),U===u.tU.GIBSON&&i.createElement(GibsonParametersControls,{gibsonParameters:z,patchGibsonParameters:e=>{Q({...z,...e})},fragmentProductionMethodOverride:e.fragmentProductionMethodOverride,isReadOnly:X}),U===u.tU.HOMOLOGY&&i.createElement(HomologyParametersControls,{homologyParameters:j,patchHomologyParameters:e=>{J({...j,...e})},isReadOnly:X}))}const Y=a.mM.create({flex:{display:"flex",columnGap:"22px"},column:{flex:1},margin:{marginTop:"16px"}})},205892:(e,t,n)=>{n.d(t,{L:()=>ConcatenationSetupModal})
var a=n(692013),i=n(989526),r=n(468943),s=n(955836),o=n(171471),l=n(294538),c=n(467607),d=n(204026),u=n(390462),m=n(434202),p=n(874952),h=n(244306),E=n(907704),S=n(650700),T=n(102176),g=n(334148),f=n(954240),I=n(229329),A=n(801455),y=n(134749),_=n(665704),C=n(865486),R=n(297020),N=n(924982),O=n(205986),b=n(198210),v=n(808844)
function ConcatenationSetupModal(e){var t,n,L,D,M,w,F,k,U,x,B
const[Z,q]=(0,i.useState)(null!==(t=e.initialName)&&void 0!==t?t:"Untitled concatenation"),[G,V]=(0,i.useState)(null!==(L=null!==(n=e.initialFolderId)&&void 0!==n?n:u.Z.get(u.O.INVENTORY))&&void 0!==L?L:null),[H,W]=(0,i.useState)(null!==(D=e.initialNumFragmentBins)&&void 0!==D?D:2),[Y,$]=(0,i.useState)(!0),[K,z]=(0,i.useState)(null!==(M=e.initialTopology)&&void 0!==M?M:c.JH.LINEAR),[Q,j]=(0,i.useState)(null!==(k=null===(F=null===(w=e.initialMethodData)||void 0===w?void 0:w.parameters)||void 0===F?void 0:F.polymerSubtype)&&void 0!==k?k:l.Dj.dna_sequence),[J,X]=(0,i.useState)(l.Jw[Q]),[ee,te]=(0,i.useState)(null===(B=null===(x=null===(U=e.initialMethodData)||void 0===U?void 0:U.parameters)||void 0===x?void 0:x.applyDefaultNullTerminalPhosphate)||void 0===B||B)
let ne,ae
if(J===s.sW.AA){ae=[l.Dj.aa_sequence]
ne=[l.Dj.aa_sequence]}else{ae=[l.LB[J],l.nM[J]]
ne=Q===l.Dj.dna_oligo||Q===l.Dj.rna_oligo?[Q]:[Q,l.nM[J]]}(0,i.useEffect)((()=>{J===s.sW.AA?Q!==l.Dj.aa_sequence&&j(l.Dj.aa_sequence):Q!==l.Dj.rna_oligo&&Q!==l.Dj.dna_oligo||Q===l.nM[J]?Q!==l.Dj.dna_sequence&&Q!==l.Dj.rna_sequence||l.LB[J]===Q?Q===l.Dj.aa_sequence&&j(l.LB[J]):j(l.LB[J]):j(l.nM[J])}),[Q,J]);(0,i.useEffect)((()=>{Q!==l.Dj.dna_sequence&&z(c.JH.LINEAR)}),[Q]);(0,i.useEffect)((()=>{r.L9(o.Jg.OPENED_BULK_ASSEMBLY_SETUP_MODAL,{actionOrigin:e.actionOrigin,cloningMethod:m.tU.CONCATENATION})}),[e.actionOrigin])
const ie=e.isArchived||e.isFinalized,re=[{id:s.Wy.DNA,dataTestAttrs:{component:"SequenceTypeToggle",element:"ToggleGroup",key:"DNA"},buttonProps:{text:"DNA"}},{id:s.Wy.RNA,dataTestAttrs:{component:"SequenceTypeToggle",element:"ToggleGroup",key:"RNA"},buttonProps:{text:"RNA"}},{id:s.sW.AA,dataTestAttrs:{component:"SequenceTypeToggle",element:"ToggleGroup",key:"AA"},buttonProps:{text:"AA"}}]
return i.createElement(O.ZP,{title:e.isInitialSetup?"Concatenate sequences":"Concatenation settings",buttons:[{text:"Cancel",cancel:!0},{text:"Save",submit:!0,disabled:""===Z.trim()||null==G||!Y,style:g.ZJ.SECONDARY}],onRequestClose:()=>{r.L9(o.Jg.CLOSED_REDESIGNED_BULK_ASSEMBLY_MODAL,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL})
e.onRequestClose()},onRequestSubmit:()=>{e.onRequestSubmit({name:Z,folderId:G,procedureJson:{method:{type:m.tU.CONCATENATION,parameters:{polymerSubtype:Q,defaultFragmentProductionMethod:m.y0.SLICE,applyDefaultNullTerminalPhosphate:ee}},topology:m.mX[K],...(0,E.Wd)((0,E.IZ)(H,m.y0.SLICE,K,m.tU.CONCATENATION)),fragments:[],constructs:[]}})}},i.createElement(_.Z,{value:Z,placeholder:"Untitled concatenation",label:"Name",labelStyle:y.gF.LABEL,onBlur:()=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_NAME_FIELD,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:m.tU.CONCATENATION})},onChange:e=>{q(e.target.value)},isRequired:!0,dataTestAttrs:{component:"ConcatenationSetupModal",element:"nameInput"},disabled:e.isArchived}),i.createElement("div",{className:(0,a.iv)(P.margin)},i.createElement(T.Z,null,i.createElement(A.Z,{label:"Location",isRequired:!0}),i.createElement(d.Z,{enableRedesign:!0,showInventory:!0,value:G,onChange:e=>{V(e.target.value)},unsetOnFetchFail:!1}))),i.createElement(T.Z,null,i.createElement(A.Z,{label:"Sequence type",isRequired:!0}),i.createElement(b.Z,{options:re,selection:J,onChangeSelection:e=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_NUCLEOTIDE_TYPE,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:m.tU.CONCATENATION})
X(e)},size:g.qE.SMALL,isFullWidth:!0,disabled:!e.isInitialSetup||ie})),i.createElement(p.oE,{polymerType:J}),i.createElement("div",{className:(0,a.iv)(P.flex,P.margin)},i.createElement("div",{className:(0,a.iv)(P.column)},i.createElement(T.Z,null,i.createElement(A.Z,{label:"Fragment type(s)"}),i.createElement(f.ZP,{displayName:ne.map((e=>(0,v.E2)(l.Af[e]))).join(", "),disabled:!0,menu:i.createElement(C.ZP,{value:0})}))),i.createElement("div",{className:(0,a.iv)(P.column)},i.createElement(T.Z,null,i.createElement(A.Z,{label:"Construct type"}),i.createElement(f.ZP,{displayName:(0,v.E2)(l.Af[Q]),disabled:ie||ae.length<2,menu:i.createElement(C.ZP,{value:Q,width:R.zL.FULL},ae.map((e=>i.createElement(N.Z,{key:e,value:e,onSelect:()=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_OUTPUT_SEQUENCE_TYPE,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:m.tU.CONCATENATION})
j(e)}},(0,v.E2)(l.Af[e])))))})))),i.createElement("div",{className:(0,a.iv)(P.flex,P.margin)},i.createElement("div",{className:(0,a.iv)(P.column)},i.createElement(h.c,{disabled:!e.isInitialSetup||ie,value:H,onChangeValue:({isValid:e,value:t})=>{W(t)
$(e)}})),i.createElement("div",{className:(0,a.iv)(P.column)},i.createElement(S.p,{label:"Topology of construct",topology:K,onChange:e=>{r.L9(o.Jg.UPDATED_BULK_ASSEMBLY_TOPOLOGY,{actionOrigin:o.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL,cloningMethod:m.tU.CONCATENATION})
z(e)},disabled:ie||Q!==l.Dj.dna_sequence,disabledTooltipText:e.isFinalized?void 0:"Only DNA sequences can be circular."}))),(Q===l.Dj.dna_oligo||Q===l.Dj.rna_oligo)&&i.createElement("div",{className:(0,a.iv)(P.flex,P.margin)},i.createElement("div",{className:(0,a.iv)(P.column)},i.createElement(I.Z,{checked:ee,onChange:e=>{te(e.target.checked)},label:"Nullify phosphate at 3 end of all constructs",id:"null-phosphate-checkbox"}))))}const P=a.mM.create({flex:{display:"flex",columnGap:"22px"},column:{flex:1},margin:{marginTop:"16px"}})},244306:(e,t,n)=>{n.d(t,{c:()=>BinsCount})
var a=n(989526),i=n(434202),r=n(102176),s=n(801455),o=n(692013),l=n(263137),c=n(334148),d=n(271359),u=n(920672),m=n(137975)
function NumericButtonInput({value:e,onChangeValue:t,disabled:n=!1,required:i=!1,minValue:r,maxValue:s,defaultValue:d=0,dataTestAttrs:h}){const E=null==r||null==e||e>r,S=null==s||null==e||e<s,T=null!=r&&null!=s?`Value must fall between ${r} and ${s}.`:null!=r?`Value cannot be lower than ${r}.`:null!=s?`Value cannot exceed ${s}.`:null
function isInvalid(e){return null==e?i:null!=r&&e<r||null!=s&&e>s}return a.createElement("div",{...(0,l.Z)(h)},a.createElement("div",{className:(0,o.iv)(p.buttonInputContainer)},a.createElement(u.Z,{isDisabled:n||null==r||E,text:`Value cannot be lower than ${r}.`},a.createElement(c.Co,{icon:"minus",buttonStyle:c.ZJ.TERTIARY_BLUE,flexWidth:!1,size:c.qE.SMALL,onClick:function handleClickMinus(){t({isValid:!0,value:null==e?d:e-1})},disabled:n||!E})),a.createElement(u.Z,{isDisabled:!n,text:"Value cannot be changed."},a.createElement(m.Z,{className:(0,o.iv)(p.input,n&&p.disabledInput,isInvalid(e)&&p.errorInput),value:e,onChange:function handleInputChange(e){t({isValid:!isInvalid(e.target.numericValue),value:e.target.numericValue})},isDisabled:n,validateInteger:!0})),a.createElement(u.Z,{isDisabled:n||null==s||S,text:`Value cannot exceed ${s}.`},a.createElement(c.Co,{icon:"compose",buttonStyle:c.ZJ.TERTIARY_BLUE,flexWidth:!1,size:c.qE.SMALL,onClick:function handleClickPlus(){t({isValid:!0,value:null==e?d:e+1})},disabled:n||!S}))),isInvalid(e)&&T&&a.createElement("p",{className:(0,o.iv)(p.errorMessage)},T))}const p=o.mM.create({buttonInputContainer:{display:"flex"},input:{border:`1px solid ${d.t0}`,margin:"0 6px",width:60},disabledInput:{border:`1px solid ${d.iS}`},errorInput:{border:`1px solid ${d.JF}`},errorMessage:{color:d.JF,marginTop:4}})
function BinsCount({disabled:e,value:t,onChangeValue:n}){return a.createElement(r.Z,null,a.createElement(s.Z,{label:"Number of fragment bins",htmlFor:"numFragmentBins",isRequired:!0}),a.createElement(NumericButtonInput,{value:t,onChangeValue:n,disabled:e,required:!0,minValue:i.cF,maxValue:i.jZ,defaultValue:i.cF,dataTestAttrs:{component:"BulkAssemblySetupModal",element:"numBinsInput"}}))}},517004:(e,t,n)=>{n.d(t,{N:()=>FragmentProductionMethodDropdown})
var a=n(692013),i=n(989526),r=n(232606),s=n(434202),o=n(129270),l=n(102176),c=n(271359),d=n(954240),u=n(801455),m=n(865486),p=n(297020),h=n(924982)
function FragmentProductionMethodDropdown(e){const t=s.R[e.bulkAssemblyMethod]
for(const n of[...e.dropdownMethods,e.fragmentProductionMethod])(0,r.hu)(null!=t[n],`Invalid fragment production method (${n}) for bulk assembly method (${e.bulkAssemblyMethod})`)
return i.createElement(l.Z,{className:(0,a.iv)(E.noBottomMargin)},!e.hideLabels&&i.createElement(u.Z,{label:"Fragment production method",htmlFor:"fragmentProductionMethod"}),i.createElement(d.ZP,{id:"fragmentProductionMethod",displayName:t[e.fragmentProductionMethod].display,disabled:e.disabled,menu:i.createElement(m.ZP,{value:e.fragmentProductionMethod,width:p.zL.FULL},e.dropdownMethods.map((n=>i.createElement(h.Z,{key:n,value:n,onSelect:()=>{e.updateFragmentProductionMethod(n)},dataTestAttrs:{element:"fragmentProductionMethod",key:n}},i.createElement(i.Fragment,null,i.createElement("div",null,t[n].display),i.createElement("div",{className:(0,a.iv)(E.detailText,E.lightDetailText)},t[n].details)))))),dataTestAttrs:{component:"FragmentProductionMethodDropdown",element:"selectDropdown"}}),!e.hideLabels&&!e.disabled&&i.createElement("div",{className:(0,a.iv)(E.detailText,E.darkDetailText)},"You can change this later."))}const E=a.mM.create({detailText:{...o.E0},lightDetailText:{color:c.TG},darkDetailText:{color:c.pp},noBottomMargin:{marginBottom:"0px"}})},525184:(e,t,n)=>{n.d(t,{IU:()=>formatValidationMessages,PC:()=>l,Uf:()=>maybeMakeCellError,Zs:()=>d,cm:()=>getCellText,m4:()=>c,nY:()=>o})
var a=n(232606),i=n(117694),r=n(194170),s=n(901113)
function getCellText(e){return null!=e.typedValue?(0,r.Gh)(e.typedValue):e.text}const o="Error: ",l="Warning: ",c="Success: ",d="Success"
function formatValidationMessages(e){return e===s.br?"Validating...":e.map((e=>{switch(e.status){case i.xo.SUCCESS:return e.text?c+e.text:d
case i.xo.WARNING:return l+e.text
case i.xo.ERROR:return o+e.text
default:(0,a.Gp)(!1,`Unexpected bulk assembly validation status: ${(0,s.vE)(e.status)}`)
return e.text}})).join("\n")}function maybeMakeCellError(e){return null!=e?{type:"Value error",message:e}:void 0}},907704:(e,t,n)=>{n.d(t,{IZ:()=>createEmptyFragmentBins,K:()=>methodCanSpecifyEndpoints,Kh:()=>getPreferredRestrictionEnzymeId,OC:()=>polymerDataFromFragment,QS:()=>constructFragmentData,SN:()=>handleNewCloningBulkAssemblyClick,WB:()=>isProteinBasedAssembly,Wd:()=>makeProcedureBinFields,aj:()=>fragmentDataToNormalizedFragment,g3:()=>handleNewConcatenationBulkAssemblyClick,gj:()=>areEnzymesRequired,gr:()=>cartesianProduct})
var a=n(769784),i=n(64558),r=n(178570),s=n(468943),o=n(232606),l=n(773055),c=n(171471),d=n(787004),u=n(294538),m=n(467607),p=n(699418),h=n(390462),E=n(256605),S=n(681896),T=n(91092),g=n(697134),f=n(921554),I=n(947730),A=n(434202),y=n(565242),_=n(875855),C=n(318042),R=n(205892),N=n(118574),O=n(973606),b=n(16133),v=n(231017),P=n(55873),L=n(502633),D=n(883026)
const M=a.Ps`
  query BulkAssemblySequenceLatestVersionQuery($id: StrictString!) @skipAudit @engComponent(name: MOLBIO) {
    sequence(id: $id) {
      ... on SequenceNode {
        id
        latestVersionId
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,T.f)("InaccessibleInfo").fragment}
`,w=a.Ps`
  query BulkAssemblyProteinLatestVersionQuery($id: StrictString!) @skipAudit @engComponent(name: MOLBIO) {
    protein(id: $id) {
      ... on ProteinNode {
        id
        latestVersionId
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,T.f)("InaccessibleInfo").fragment}
`,F=a.Ps`
  query BulkAssemblyProteinContentsQuery($proteinVersionSpecifiers: [ProteinVersionSpecifierInput!]!)
  @skipAudit
  @engComponent(name: MOLBIO) {
    proteinVersions(proteinVersionSpecifiers: $proteinVersionSpecifiers) {
      ... on ProteinVersionNode {
        dbId
        versionJson
        protein {
          id
          name
          displayLabel
          createdAt
          modifiedAt
          noteJson
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,T.f)("InaccessibleInfo").fragment}
`
async function handleNewCloningBulkAssemblyClick(e,t){const n=await(0,L.Z)(C.h,{isInitialSetup:!0,isArchived:!1,isFinalized:!1,lockBulkAssemblyMethod:!1,actionOrigin:t,...e})
await handleCreateNewBulkAssembly(n,t)}async function handleNewConcatenationBulkAssemblyClick(e,t){const n=await(0,L.Z)(R.L,{isInitialSetup:!0,isArchived:!1,isFinalized:!1,actionOrigin:t,...e})
await handleCreateNewBulkAssembly(n,t)}async function handleCreateNewBulkAssembly(e,t){if(null!=e){h.Z.set(h.O.INVENTORY,e.folderId)
await(0,D.jI)((0,y.OH)(e).then((n=>{p.ZP.get().openFolderItem(n.id,{open:!0})
s.L9(c.Jg.SAVED_BULK_ASSEMBLY_SETTINGS,{actionOrigin:t,topology:A.EN[e.procedureJson.topology],parameters:e.procedureJson.method,assemblyId:n.id})})))}}function cartesianProduct(e){return e.reduce(((e,t)=>e.flatMap((e=>t.map((t=>[...e,t]))))),[[]])}function createEmptyFragmentBins(e,t,n,a){if(n===m.JH.CIRCULAR&&a!==A.tU.CONCATENATION){return[{cid:(0,r.Z)(),name:"Backbone",color:f.vx[0],binType:A.Uc.FRAGMENT,fragmentProductionMethod:t},...(0,i.w6)(2,e).map((e=>({cid:(0,r.Z)(),name:"Untitled Bin "+(e-1),color:f.vx[e-1],binType:A.Uc.FRAGMENT,fragmentProductionMethod:t})))]}return(0,i.w6)(1,e).map((e=>({cid:(0,r.Z)(),name:`Untitled Bin ${e}`,color:f.vx[e-1],binType:A.Uc.FRAGMENT,fragmentProductionMethod:t})))}function makeProcedureBinFields(e){return{binCidOrdering:e.map((e=>e.cid)),binsByCid:(0,i.m8)(e.map((e=>[e.cid,e])))}}function fragmentDataToNormalizedFragment(e){var t,n
return"sequence"===e.polymer.kind?{...e.endpoints,cid:null!==(t=e.cid)&&void 0!==t?t:(0,r.Z)(),sequence:(0,_.rx)(e.polymerId),sequenceVersionDbId:e.versionDbId,protein:_.zQ,proteinVersionDbId:null,orientation:(0,_.sZ)(e.orientation),bin:null!=e.binCid?(0,_.rx)(e.binCid):_.zQ,preferredPrimer5:null!=e.preferredPrimer5Id?(0,_.rx)(e.preferredPrimer5Id):_.zQ,preferredPrimer3:null!=e.preferredPrimer3Id?(0,_.rx)(e.preferredPrimer3Id):_.zQ,restrictionEnzyme5:null!=e.restrictionEnzymeId5?(0,_.C5)(e.restrictionEnzymeId5):_.zQ,restrictionEnzyme3:null!=e.restrictionEnzymeId3?(0,_.C5)(e.restrictionEnzymeId3):_.zQ}:{...e.endpoints,cid:null!==(n=e.cid)&&void 0!==n?n:(0,r.Z)(),sequence:_.zQ,sequenceVersionDbId:null,protein:(0,_.rx)(e.polymerId),proteinVersionDbId:e.versionDbId,orientation:(0,_.sZ)(e.orientation),bin:null!=e.binCid?(0,_.rx)(e.binCid):_.zQ,preferredPrimer5:_.zQ,preferredPrimer3:_.zQ,restrictionEnzyme5:_.zQ,restrictionEnzyme3:_.zQ}}function isSequenceDetails(e){return e.model instanceof l.Sequence}function getPreferredRestrictionEnzymeId(e){return e.type===A.tU.GOLDEN_GATE?e.parameters.defaultRestrictionEnzymeId:null}async function constructFragmentData({polymerId:e,polymerKind:t,expectedVersionDbId:n,showPrimerSearch:a,endpoints:i={start:_.zQ,end:_.zQ},color:s=A.Pr,orientation:l=A.bm,binName:c=null,preferredPrimer5Id:u=null,preferredPrimer3Id:m=null,cid:p=null,binCid:h=null,restrictionEnzyme5:T=_.zQ,restrictionEnzyme3:f=_.zQ,canSpecifyEndpoints:y,canUpdateRestrictionEnzymes:C,isReadOnly:R,binIndex:L,constructTopology:D,numFragmentBins:k,assemblyMethod:U,fragmentProductionMethod:x}){let B,Z,q,G
if("sequence"===t){G=await async function buildSequenceDetails(e){const t=await(0,S.doQuerySafe)({query:M},{variables:{id:e},fetchPolicy:"network-only"})
if((0,g.CZ)(t.sequence))throw new Error(`Sequence ${e} is inaccessible`)
const n=t.sequence.latestVersionId;(0,o.hu)(null!=n,"Expected sequence to have a latest version.")
const a=await(0,S.doQuerySafe)({query:b.jy},{variables:{id:e,versionDbId:n}})
if((0,g.CZ)(a.sequence)||(0,g.CZ)(a.sequence.version))throw new Error(`Sequence ${e} is inaccessible`)
const i=a.sequence,r=a.sequence.version
return{model:(0,b.m9)(i,r),latestVersionDbId:n,basicPolymerInfo:{residues:r.bases,circular:r.circular,startIndex:r.startIndex,singleStranded:i.sequenceType!==E.uS.ds}}}(e)
C||G.model.get("enzymes").hideAll()
B=G.latestVersionDbId
Z=G.basicPolymerInfo
q={kind:t,ref:{current:G.model}}}else{G=await async function buildProteinDetails(e){const t=await(0,S.doQuerySafe)({query:w},{variables:{id:e},fetchPolicy:"network-only"})
if((0,g.CZ)(t.protein))throw new Error(`Protein ${e} is inaccessible`)
const n=t.protein.latestVersionId;(0,o.hu)(null!=n,"Expected protein to have a latest version.")
const a=(await(0,S.doQuerySafe)({query:F},{variables:{proteinVersionSpecifiers:[{proteinId:e,versionDbId:n}]}})).proteinVersions[0]
if((0,g.CZ)(a))throw new Error(`Protein ${e} is inaccessible`)
const i=`${e}_${(0,r.Z)()}`,s=new v.Z({id:i})
I.Z.dispatch({actionType:d.KxQ,versions:[a.versionJson],proteinId:i})
I.Z.dispatch({actionType:d.GSP,protein:{alignments:[],linkedAlignments:[],archiveRecord:null,authors:[],bioentityAliasInfos:[],created_at:a.protein.createdAt,modified_at:a.protein.modifiedAt,displayLabel:a.protein.displayLabel,editURL:"",id:i,isLatest:!0,name:a.protein.name,note:a.protein.noteJson,permissions:{admin:!1,appendable:!1,archivable:!1,canEditNamesAndAliases:!0,deletable:!1,movable:!1,polymerFeaturesEditable:!1,polymerResiduesEditable:!1,readable:!0,registryIdsChangeable:!1,unarchivable:!1,unregisterable:!1,writable:!1},schemaValidationState:null,tagSchema:null,tags:[],version:a.versionJson},proteinId:i})
return{model:s,latestVersionDbId:n,basicPolymerInfo:{residues:s.aminoAcids(),circular:!1,startIndex:1,singleStranded:!0}}}(e)
B=G.latestVersionDbId
Z=G.basicPolymerInfo
q={kind:t,ref:{current:G.model}}}const V=null!=n&&n!==B
let H={restrictionEnzyme5:T,restrictionEnzyme3:f}
if((V||(0,_.Av)(T)&&(0,_.Av)(f))&&null!=L&&isSequenceDetails(G)){const e=(0,N.QG)(Z,getPreferredRestrictionEnzymeId(U),L,D,k,x)
null!=e&&(H=e)}for(const e of[H.restrictionEnzyme3,H.restrictionEnzyme5])(0,_.lq)(e)&&e.id!==O.kA&&isSequenceDetails(G)&&G.model.get("enzymes").get(e.id).setActive()
if(V||(0,_.Av)(i.start)&&(0,_.Av)(i.end)){const e=(0,N.OI)(Z,y,H.restrictionEnzyme5,H.restrictionEnzyme3,V?{start:_.zQ,end:_.zQ}:i)
if(null!=e&&(0,_.l5)(e.start)){i=e
l=A.bm}}const W=q.ref.current;(0,_.l5)(i.start)&&("protein"===t?P.Z.selectRange(q.ref.current.id,i.start.value,(0,_.l5)(i.end)?i.end.value:null):W.selection().setEndpoints(i.start.value,(0,_.l5)(i.end)?i.end.value:null))
y||W.selection().setEndpoints(0,W.length()||null)
y&&!R||(W.selection().set=()=>W.selection())
return{endpoints:i,versionDbId:B,polymerId:e,hadStaleVersion:V,polymer:q,color:s,orientation:l,binName:c,showPrimerSearch:a,preferredPrimer5Id:u,preferredPrimer3Id:m,cid:p,binCid:h,restrictionEnzymeId5:(0,_.lq)(H.restrictionEnzyme5)?H.restrictionEnzyme5.id:null,restrictionEnzymeId3:(0,_.lq)(H.restrictionEnzyme3)?H.restrictionEnzyme3.id:null}}function areEnzymesRequired(e,t,n,a){return null==t.cutsiteIndices?{isStartEnzymeRequired:!1,isEndEnzymeRequired:!1}:t.cutsiteIndices.length>1||n===m.JH.CIRCULAR?{isStartEnzymeRequired:!0,isEndEnzymeRequired:!0}:null==e?null:0===e?{isStartEnzymeRequired:!1,isEndEnzymeRequired:!0}:e===a-1?{isStartEnzymeRequired:!0,isEndEnzymeRequired:!1}:{isStartEnzymeRequired:!0,isEndEnzymeRequired:!0}}function methodCanSpecifyEndpoints(e){return e!==A.tU.HOMOLOGY}function isProteinBasedAssembly(e){return e.type===A.tU.CONCATENATION&&e.parameters.polymerSubtype===u.Dj.aa_sequence}function polymerDataFromFragment(e){return(0,_._F)(e.protein)||!(0,_.Av)(e.protein)?{polymerKind:"protein",polymer:e.protein,polymerVersionDbId:e.proteinVersionDbId}:{polymerKind:"sequence",polymer:e.sequence,polymerVersionDbId:e.sequenceVersionDbId}}},118574:(e,t,n)=>{n.d(t,{AW:()=>getModelToDisplayConverters,Lv:()=>validateEndpoints,OI:()=>getAutopopulatedFragmentEndpoints,QG:()=>getAutopopulatedRestrictionEnzymes,WD:()=>getRestrictionEnzymeInfo,WP:()=>getSnappableCutsiteEndpoints,ht:()=>handleEndpointChange,ns:()=>getDisplayToModelConverters,vo:()=>getAutopopulatedFragmentDetails,yf:()=>getValueForOrientation})
var a=n(615439),i=n.n(a),r=n(232606),s=n(955836),o=n(467607),l=n(434202),c=n(875855),d=n(907704),u=n(973606),m=n(279785),p=n(132814),h=n(567e3)
function getDisplayToModelConverters(e){return{start:t=>(0,p.displayStartToModel)(t,e),end:t=>t-e+1}}function getModelToDisplayConverters(e){return{start:t=>(0,p.modelToDisplay)(t,e),end:t=>t+e-1}}function getValueForOrientation(e,t,n){return e===c.ij.FORWARD?t:n}function getAutopopulatedFragmentDetails(e,t,n,a,i,r,s,o){const{polymer:l,polymerKind:u,polymerVersionDbId:m}=(0,d.OC)(e)
if(!(0,c._F)(l))return null
const p=t.getLatestVersionDbId(l.id)
if(null==p)return null
const h=t.getBasicPolymerInfo(l.id,p)
if(null==h)return null
const E=getAutopopulatedRestrictionEnzymes(h,a,i,s,r,o),S={}
"sequence"===u?S.sequenceVersionDbId=p:S.proteinVersionDbId=p
let T=null,g=null,f=null
if(null==E)return null
g=E.restrictionEnzyme5
f=E.restrictionEnzyme3
null!=g&&null!=f&&null==m&&(T=getAutopopulatedFragmentEndpoints(h,n,g,f,{start:e.start,end:e.end}))
let I={start:e.start,end:e.end}
null!=T&&(I={...T})
let A={restrictionEnzyme5:e.restrictionEnzyme5,restrictionEnzyme3:e.restrictionEnzyme3}
null!=E&&(A=E)
return{...I,...A,...S,orientation:null!=T?(0,c.sZ)(c.ij.FORWARD):e.orientation}}function getAutopopulatedFragmentEndpoints(e,t,n,a,i){if(!(0,c.Av)(i.start)||!(0,c.Av)(i.end))return null
if((0,c.lq)(n)&&n.id!==u.kA||(0,c.lq)(a)&&a.id!==u.kA){(0,r.hu)(t,"Expected restriction enzyme details to be empty if specifying endpoints is disallowed.")
return function getInitialEnzymeCutsiteEndpoints(e,t,n,a){if(n===a&&null!=n){const a=getRestrictionEnzymeInfo(n,e,t).cutsiteIndices
return{start:a.length>0?(0,c.Io)(a[0]):c.zQ,end:a.length>1?(0,c.Io)(a[1]):c.zQ}}const i=getRestrictionEnzymeInfo(n,e,t).cutsiteIndices||[],r=getRestrictionEnzymeInfo(a,e,t).cutsiteIndices||[]
return{start:null==n||n===u.kA?(0,c.Io)(0):i.length>0?(0,c.Io)(i[0]):c.zQ,end:null==a||a===u.kA?(0,c.Io)(e.length):r.length>0?(0,c.Io)(r[0]):c.zQ}}(e.residues,e.circular,(0,c.lq)(n)?n.id:null,(0,c.lq)(a)?a.id:null)}return t?{start:(0,c.Io)(0),end:0===e.residues.length?c.zQ:(0,c.Io)(e.residues.length)}:{start:c.zQ,end:c.zQ}}function getAutopopulatedRestrictionEnzymes(e,t,n,a,i,r){if(null==t||r!==l.y0.EXISTING_CUT_SITES)return{restrictionEnzyme5:(0,c.C5)(u.kA),restrictionEnzyme3:(0,c.C5)(u.kA)}
const s=getRestrictionEnzymeInfo(t,e.residues,e.circular),o=(0,d.gj)(n,s,a,i)
if(null==o)return null
const{isStartEnzymeRequired:m,isEndEnzymeRequired:p}=o
return{restrictionEnzyme5:m?(0,c.C5)(t):(0,c.C5)(u.kA),restrictionEnzyme3:p?(0,c.C5)(t):(0,c.C5)(u.kA)}}function handleEndpointChange({start:e,end:t},n,a,i){return!a&&!i&&(0,c.l5)(e)&&(0,c.l5)(t)&&e.value>=t.value?{start:t,end:e,orientation:l.vy[n]}:{start:e,end:t}}function getRestrictionEnzymeInfo(e,t,n){if(null==e||e===u.kA)return{restrictionEnzymeId:e,cutsiteIndices:null}
return{restrictionEnzymeId:e,cutsiteIndices:(0,m.kh)((0,m.Rt)(e),t,s.Wy.DNA,o.uS.DOUBLE_STRANDED,n).map((({position:e})=>e))}}function getSnappableCutsiteEndpoints(e,t,n,a,r){if(null==e||null==t||!i()((0,h.Z)(e,[e=>e]),(0,h.Z)(t,[e=>e])))return null
const s=e
if(null==s||s.length<2||Object.values(n).every((e=>(0,c.l5)(e)&&s.includes(e.value))))return null
const closestCutsite=e=>(0,h.Z)(s,[t=>(0,p.distance)(t,e,a,r)])[0]
if((0,c.Yv)(n.start)&&(0,c.Yv)(n.end))return{start:(0,c.Io)(s[0]),end:(0,c.Io)(s[1])}
if((0,c.Yv)(n.start)&&(0,c.l5)(n.end)){const e=closestCutsite(n.end.value),t=s.indexOf(e)
return 0===t&&r?{start:(0,c.Io)(s[s.length-1]),end:(0,c.Io)(e)}:0!==t||r?{start:(0,c.Io)(s[t-1]),end:(0,c.Io)(e)}:{start:(0,c.Io)(s[0]),end:(0,c.Io)(s[1])}}if((0,c.l5)(n.start)&&(0,c.l5)(n.end)&&closestCutsite(n.start.value)!==closestCutsite(n.end.value))return{start:(0,c.Io)(closestCutsite(n.start.value)),end:(0,c.Io)(closestCutsite(n.end.value))}
const o=closestCutsite(n.start.value),l=s.indexOf(o)
return l===s.length-1?r?{start:(0,c.Io)(o),end:(0,c.Io)(s[0])}:{start:(0,c.Io)(s[l-1]),end:(0,c.Io)(o)}:{start:(0,c.Io)(o),end:(0,c.Io)(s[l+1])}}function validateEndpoints({start:e,end:t},n,a,i,s,o,l,d){const h=(0,p.modelEndToDisplay)(n,n,a),E=(0,p.modelToDisplay)(0,a),S=getValueForOrientation(i,"Start","End"),T=getValueForOrientation(i,"End","Start")
let g,f,I=!0,A=!0
if(!l){(0,c.Av)(e)||(g=`${S} must not have a value.`);(0,c.Av)(t)||(f=`${T} must not have a value.`);(0,r.Gp)(!(null!=g?g:f),"Start and end should be empty if cloning method does not support specifying endpoints")
return{canMirrorToMap:!1,length:n,startErrorMessage:getValueForOrientation(i,g,f),endErrorMessage:getValueForOrientation(i,f,g)}}if(!(0,c.l5)(e)&&(0,c.Av)(e)){g=`${S} must have a value.`
I=!1
A=!1}else if((0,c.l5)(e)){if(e.value>n){g=`${S} cannot be greater than ${h}`
I=!1
A=!1}else if(e.value<0){g=`${S} cannot be less than ${E}`
I=!1
A=!1}else if(null!=s.cutsiteIndices&&null!=s.restrictionEnzymeId&&s.restrictionEnzymeId!==u.kA&&!s.cutsiteIndices.includes(e.value)){g=`${S} must be at a cut site of ${(0,m.Rt)(s.restrictionEnzymeId).name}`}}else{g=`${S} value, ${e.rawText}, cannot be parsed.`
I=!1
A=!1}if((0,c.l5)(t)&&t.value>n){f=`${T} cannot be greater than ${h}`
I=!1
A=!1}else if((0,c.l5)(t)&&t.value<1){f=`${T} cannot be less than ${E}`
I=!1
A=!1}else if(!d&&(0,c.l5)(e)&&(0,c.l5)(t)&&e.value>=t.value){g=`${S} cannot be greater than ${T.toLowerCase()}`
f=`${T} cannot be less than ${S.toLowerCase()}`
I=!1
A=!1}else if(!(0,c.l5)(t)&&(0,c.Av)(t)){f=`${T} must have a value.`
A=!1}else if((0,c.l5)(t)){if(null!=o.cutsiteIndices&&null!=o.restrictionEnzymeId&&o.restrictionEnzymeId!==u.kA&&!o.cutsiteIndices.includes(t.value)){f=`${T} must be at a cut site of ${(0,m.Rt)(o.restrictionEnzymeId).name}`}}else{f=`${T} value, ${t.rawText}, cannot be parsed.`
A=!1}return{canMirrorToMap:I,length:A?(0,p.length)(e.value,t.value,n):null,startErrorMessage:getValueForOrientation(i,g,f),endErrorMessage:getValueForOrientation(i,f,g)}}},19945:(e,t,n)=>{n.d(t,{$O:()=>onPreview,DU:()=>addProtectedRegion,FO:()=>addCutsiteToPreserve,Fi:()=>closeOptimization,Fr:()=>deleteProtectedRegion,Hm:()=>goBack,Qd:()=>a,SK:()=>deleteAllPatternsToReduce,UI:()=>deleteAllProtectedRegions,VF:()=>deleteAllCutsitesToAvoid,W7:()=>deleteCutsiteToAvoid,WQ:()=>updateUridineDepletion,YQ:()=>deleteCutsiteToPreserve,YT:()=>addCutsiteToAvoid,Z5:()=>setSelection,bS:()=>addPatternToReduce,bW:()=>updateOrganism,e3:()=>deleteAllCutsitesToPreserve,eF:()=>deletePatternToReduce,j6:()=>updateHairpinParameters,ks:()=>newTab,ld:()=>updatePatternToReduce,nu:()=>updateGC,oI:()=>isInvalidProtectedRegion,wc:()=>updateActiveTab})
var a,i=n(468943),r=n(232606),s=n(171471),o=n(780365),l=n(76101),c=n(119897),d=n(432128)
!function(e){e.NEW_TAB="CODON_OPTIMIZATION_TAB_NEW_TAB"
e.UPDATE_SELECTED_ORGANISM="CODON_OPTIMIZATION_TAB_UPDATE_SELECTED_ORGANISM"
e.UPDATE_SELECTED_GC_LEVEL="CODON_OPTIMIZATION_TAB_UPDATE_SELECTED_GC_LEVEL"
e.PREVIEW_PENDING="CODON_OPTIMIZATION_TAB_PREVIEW_PENDING"
e.PREVIEW_COMPLETED="CODON_OPTIMIZATION_TAB_PREVIEW_COMPLETED"
e.PREVIEW_ERROR="CODON_OPTIMIZATION_TAB_PREVIEW_ERROR"
e.SAVE_OPTIMIZATION_COMPLETED="CODON_OPTIMIZATION_TAB_SAVE_OPTIMIZATION_COMPLETED"
e.CLOSE_OPTIMIZATION="CODON_OPTIMIZATION_TAB_CLOSE_OPTIMIZATION"
e.GO_BACK="CODON_OPTIMIZATION_TAB_GO_BACK"
e.SET_SELECTION="CODON_OPTIMIZATION_TAB_SET_SELECTION"
e.ADD_PROTECTED_REGION="CODON_OPTIMIZATION_TAB_ADD_PROTECTED_REGION"
e.DELETE_ALL_PROTECTED_REGIONS="DELETE_ALL_PROTECTED_REGIONS"
e.DELETE_PROTECTED_REGION="CODON_OPTIMIZATION_TAB_DELETE_PROTECTED_REGION"
e.IS_INVALID_PROTECTED_REGION="CODON_OPTIMIZATION_TAB_IS_INVALID_PROTECTED_REGION"
e.ADD_CUTSITE_TO_AVOID="CODON_OPTIMIZATION_TAB_ADD_CUTSITE_TO_AVOID"
e.DELETE_ALL_CUTSITES_TO_AVOID="DELETE_ALL_CUTSITES_TO_AVOID"
e.DELETE_CUTSITE_TO_AVOID="CODON_OPTIMIZATION_TAB_DELETE_CUTSITE_TO_AVOID"
e.ADD_CUTSITE_TO_PRESERVE="CODON_OPTIMIZATION_TAB_ADD_CUTSITE_TO_PRESERVE"
e.DELETE_ALL_CUTSITES_TO_PRESERVE="DELETE_ALL_CUTSITES_TO_PRESERVE"
e.DELETE_CUTSITE_TO_PRESERVE="CODON_OPTIMIZATION_TAB_DELETE_CUTSITE_TO_PRESERVE"
e.UPDATE_URIDINE_DEPLETION="CODON_OPTIMIZATION_TAB_UPDATE_URIDINE_DEPLETION"
e.UPDATE_HAIRPIN_PARAMETERS="CODON_OPTIMIZATION_TAB_UPDATE_HAIRPIN_PARAMETERS"
e.UPDATE_ACTIVE_TAB="CODON_OPTIMIZATION_TAB_UPDATE_ACTIVE_TAB"
e.ADD_PATTERN_TO_REDUCE="CODON_OPTIMIZATION_ADD_PATTERN_TO_REDUCE"
e.DELETE_ALL_PATTERNS_TO_REDUCE="CODON_OPTIMIZATION_DELETE_ALL_PATTERNS_TO_REDUCE"
e.DELETE_PATTERN_TO_REDUCE="CODON_OPTIMIZATION_DELETE_PATTERN_TO_REDUCE"
e.UPDATE_PATTERN_TO_REDUCE="CODON_OPTIMIZATION_UPDATE_PATTERN_TO_REDUCE"}(a||(a={}))
function newTab(e){return{type:a.NEW_TAB,tabId:e}}function updateOrganism(e,t){return{type:a.UPDATE_SELECTED_ORGANISM,selectedOrganism:e,tabId:t}}function updateGC(e,t){return{type:a.UPDATE_SELECTED_GC_LEVEL,selectedGCLevel:e,tabId:t}}function previewError(e,t){return{type:a.PREVIEW_ERROR,error:e,tabId:t}}function onPreview(e,t,n,u,m,p,h,E,S,T,g,f,I,A,y,_,C,R,N){return async O=>{O(function previewPending(e){return{type:a.PREVIEW_PENDING,tabId:e}}(e))
let b=[],v=[]
d.Z.set(o.Qv.REDUCE_PATTERNS,N)
if(n){b=(0,l.iD)(g.flatMap((e=>(0,l.k0)(e.start,e.end,h,E,S,T))))
v.push(...p.map((e=>({recognitionSiteDna:e.recognitionSite,start:0,end:f.length}))))}else{(0,r.hu)(null!==u,"Expected matchSites to be set for codon optimizing a DNA sequence.")
b=(0,l.J_)(u,m,h,E,S,T,g)
v=(0,l.JJ)(m,p,u,h,E,S,T)}const P=(0,l.i8)(N),L={numBases:f.length,organism:I,gcLevel:A,numProtectedRegions:b.length,numCutsitesToAvoid:v.length,uridineDepletion:y,avoidHairpins:_,hairpinStem:C,hairpinWindow:R,numReducedPatterns:P.length}
try{O(function previewCompleted(e,t){return{type:a.PREVIEW_COMPLETED,result:e,tabId:t}}(await(0,c.fB)(f,I,A,b,v,y,_,C,R,P),e))
i.L9(s.Jg.PERFORMED_CODON_OPTIMIZATION,{...L,type:"success",polymerId:t})}catch(n){i.L9(s.Jg.PERFORMED_CODON_OPTIMIZATION,{...L,type:"failure",polymerId:t})
if(!n.responseJSON||!n.responseJSON.userMessage){O(previewError("",e))
throw n}O(previewError(n.responseJSON.userMessage,e))}}}function closeOptimization(e){return{type:a.CLOSE_OPTIMIZATION,tabId:e}}function goBack(e){return{type:a.GO_BACK,tabId:e}}function setSelection(e,t,n,i,r,s){return{type:a.SET_SELECTION,tabId:e,start:t,end:n,bases:i,isOptimizationEntireSequence:r,strand:s}}function addProtectedRegion(e,t){return{type:a.ADD_PROTECTED_REGION,tabId:e,region:t}}function deleteProtectedRegion(e,t){return{type:a.DELETE_PROTECTED_REGION,tabId:e,region:t}}function deleteAllProtectedRegions(e){return{type:a.DELETE_ALL_PROTECTED_REGIONS,tabId:e}}function isInvalidProtectedRegion(e,t){return{type:a.IS_INVALID_PROTECTED_REGION,tabId:e,message:t}}function addCutsiteToAvoid(e,t){return{type:a.ADD_CUTSITE_TO_AVOID,tabId:e,cutsite:t}}function deleteCutsiteToAvoid(e,t){return{type:a.DELETE_CUTSITE_TO_AVOID,tabId:e,enzymeId:t}}function deleteAllCutsitesToAvoid(e){return{type:a.DELETE_ALL_CUTSITES_TO_AVOID,tabId:e}}function addCutsiteToPreserve(e,t){return{type:a.ADD_CUTSITE_TO_PRESERVE,tabId:e,cutsite:t}}function deleteCutsiteToPreserve(e,t){return{type:a.DELETE_CUTSITE_TO_PRESERVE,tabId:e,enzymeId:t}}function deleteAllCutsitesToPreserve(e){return{type:a.DELETE_ALL_CUTSITES_TO_PRESERVE,tabId:e}}function updateUridineDepletion(e,t){return{type:a.UPDATE_URIDINE_DEPLETION,tabId:e,uridineDepletion:t}}function updateHairpinParameters(e,t,n,i,r){let s="",l=""
if(t){Number.isInteger(n)||(s="Stem size must be an integer")
Number.isInteger(i)||(l="Window size must be an integer")
0===n&&(s="Enter a nonzero stem size")
0===i&&(l="Enter a nonzero window size")
n<0&&(s="Stem size must be positive")
i<0&&(l="Window size must be positive")
n>i/2&&(s="Stem size is greater than half the window size")
i>r&&(l="Window size is larger than selected region")}const c={value:n,error:s},u={value:i,error:l}
d.Z.set(o.Qv.AVOID_HAIRPINS,t)
d.Z.set(o.Qv.HAIRPIN_STEM,c)
d.Z.set(o.Qv.HAIRPIN_WINDOW,u)
return{type:a.UPDATE_HAIRPIN_PARAMETERS,tabId:e,avoidHairpins:t,hairpinStem:c,hairpinWindow:u}}function updateActiveTab(e,t){return{type:a.UPDATE_ACTIVE_TAB,tabId:e,tab:t}}function addPatternToReduce(e){return{type:a.ADD_PATTERN_TO_REDUCE,tabId:e}}function deleteAllPatternsToReduce(e){return{type:a.DELETE_ALL_PATTERNS_TO_REDUCE,tabId:e}}function deletePatternToReduce(e,t){return{type:a.DELETE_PATTERN_TO_REDUCE,tabId:e,patternIdx:t}}function updatePatternToReduce(e,t,n){return{type:a.UPDATE_PATTERN_TO_REDUCE,tabId:e,patternIdx:t,patternToReduce:n}}},76101:(e,t,n)=>{n.d(t,{Iu:()=>getInvalidDNAText,JJ:()=>getCutsitesToAvoidForSequence,J_:()=>getProtectedRegionsForSequence,P:()=>doesAnnotationOverlapRegion,PJ:()=>checkInvalidProtectedRegion,Pq:()=>checkInvalidPreviewRequest,dI:()=>getOrientedBases,gE:()=>getCasedBasesToSave,i8:()=>getApiPatternsToReduce,iD:()=>getUniqueProtectedRegions,jZ:()=>getNotePartsForCodonOptimizedSequence,k0:()=>getRegionBounds,tB:()=>isInvalidDNAPattern})
var a=n(531041),i=n(232606),r=n(675649),s=n(955836),o=n(48047),l=n(780365),c=n(132814),d=n(67715),u=n(567e3)
function doesAnnotationOverlapRegion(e,t,n,a){return c.isRangeOverlap(e,t,n,a)}function getRegionBounds(e,t,n,a,i,r){const s=c.getRangeOverlap(e,t,n,a),o=c.length(n,a,i)
return s.map((e=>{const t=c.length(n,e[0],i)%i,a=c.length(n,e[1],i)
return{start:1===r||0===r?t:o-a,end:1===r||0===r?a:o-t}}))}function getUniqueProtectedRegions(e){const t=[]
for(const n of e)t.every((e=>e.start!==n.start||e.end!==n.end))&&t.push(n)
return t}function checkInvalidProtectedRegion(e,t,n,a,i){return null===e||null===t?"No region selected.":c.isRangeOverlap(e,t,n,a)?function isDuplicateProtectedRegion(e,t,n){return n.some((n=>n.start===e&&n.end===t))}(e,t,i)?"The region you have selected is identical to an existing protected region.":c.isRangeWithin(n,a,e,t)?"The region you have selected contains the region to be optimized.":null:"The region you have selected is not contained in the region to be optimized."}function checkInvalidPreviewRequest(e,t,n,i,s,o,c,d,u){const m=[]
e.forEach((e=>{t.map((e=>e.id)).includes(e.id)&&m.push(e.enzymeName)}))
return m.length>0?`${(0,r._6)(m.length,"Enzyme")} ${m.join(", ")} cannot be present in both Avoided Cut Sites and Preserved Cut Sites`:s.error.length>0||o.error.length>0?"Invalid hairpin parameters.":null!=n||d!==l.vY.ANY||c||i||0!==t.length||0!==u.filter((e=>null!=e)).length?a.default.any(u,(e=>isInvalidDNAPattern(e)))?"Invalid patterns to reduce.":null:"No objectives were selected for optimization. Optimization would return no changes."}function getProtectedRegionsForSequence(e,t,n,a,i,r,s){const o=e.filter((e=>t.some((t=>t.enzymeName===e.enzymeName)))).flatMap((e=>getRegionBounds(e.matchStart,e.matchEnd,n,a,i,r)))
return getUniqueProtectedRegions([...s.flatMap((e=>getRegionBounds(e.start,e.end,n,a,i,r))),...o])}function getCutsitesToAvoidForSequence(e,t,n,a,r,s,o){return[...e.flatMap((e=>function getRegionComplements(e,t){const n=(0,u.Z)(e.flatMap((e=>[{type:"start",index:e.start},{type:"end",index:e.end}])),["index"]),a=[]
let r=0,s=0
for(const e of n){(0,i.hu)(r>=0,"Start and end indices are mismatched")
if("start"===e.type){r++
1===r&&a.push({start:s,end:e.index})}else{r--
0===r&&(s=e.index)}}(0,i.hu)(0===r,"Start and end indices are mismatched")
a.push({start:s,end:t})
return a.filter((e=>e.start!==e.end))}(n.filter((t=>t.enzymeName===e.enzymeName)).map((e=>({regionStart:e.matchStart,regionEnd:e.matchEnd}))).flatMap((e=>getRegionBounds(e.regionStart,e.regionEnd,a,r,s,o))),c.length(a,r,s)).map((t=>({start:t.start,end:t.end,recognitionSiteDna:e.recognitionSite}))))),...t.map((e=>({start:0,end:c.length(a,r,s),recognitionSiteDna:e.recognitionSite})))]}function getOrientedBases(e,t){return 1===t||0===t?e:o.revcomp(e,s.jb)}function getCasedBasesToSave(e,t,n){const a=getOrientedBases(t,n)
return t.split("").map(((t,i)=>{const r=1===n?i:a.length-i-1
return(0,d.R7)(t,(0,d.Hh)(e[r]))})).join("")}function isInvalidDNAPattern(e){return""===e.pattern||!o.isSimpleDNASequence(e.pattern)||e.pattern.length>10}function getInvalidDNAText(e){(0,i.Gp)(isInvalidDNAPattern(e),"Expected an invalid DNA pattern.")
return""===e.pattern?"Please specify a DNA pattern.":e.pattern.length>l.Nz?`Invalid DNA pattern. Pattern cannot be longer than ${l.Nz} bases long.`:o.isSimpleDNASequence(e.pattern)?"":"Invalid DNA pattern. Pattern must consist of ATGC bases only."}function getApiPatternsToReduce(e){const t=[]
e.forEach((e=>{t.push(e.pattern)
e.reverseComplement&&t.push(o.revcomp(e.pattern,s.jb))}))
return t}function _getHeaderNotePartsForCodonOptimizedSequence(e){const{isBackTranslation:t,originalEntityId:n,start:a,end:r,strand:s}=e,o=[];(0,i.Gp)(t||null!=s&&[1,-1].includes(s),"Expected sequence to have strand in (-1, 1).")
const l=t?`This sequence was created by back translating and codon optimizing the following AA sequence from AA ${a} to AA ${r}: \n`:`This sequence was created by codon optimizing the following DNA sequence from base ${a} to base ${r} on the ${t?"none":1===s?"forward":"reverse"} strand: \n`
o.push({text:l},{itemId:n})
return o}function _getParametersNotePartsForCodonOptimizedSequence(e){const{organism:t,gcLevel:n,uridineDepletion:a,avoidHairpins:r,hairpinStem:s,hairpinWindow:o,protectedRegions:c,cutsitesToAvoid:d,cutsitesToPreserve:u,patternsToReduce:m}=e,p=[]
t&&p.push({text:`The sequence was optimized for the organism ${t}.`})
n!==l.vY.ANY&&p.push({text:`The GC level was optimized to be ${l.oS[n]}.`})
a&&p.push({text:"The sequence was optimized to contain fewer thymine bases (mRNA uridine depletion)."})
r&&(null!=s&&null!=o?p.push({text:`Hairpins were avoided with a stem size of ${s.value} and a window size of ${o.value}.`}):(0,i.Gp)(!1,"Expected hairpin parameters to be specified."))
if(c.length>0){p.push({text:"The following regions from the original sequence were protected:"})
p.push(...c.map((e=>({text:`${e.name}: ${e.start}-${e.end}`,bulleted:!0}))))}d.length>0&&p.push({text:`Existing cutsites were removed and no new ones were created for the following enzymes: ${d.map((e=>e.enzymeName)).join(", ")}.`})
u.length>0&&p.push({text:`Existing cutsites were preserved for the following enzymes: ${u.map((e=>e.enzymeName)).join(", ")}.`})
m.length>0&&p.push({text:`The following DNA patterns were minimized: ${getApiPatternsToReduce(m).join(", ")}.`})
return p}function getNotePartTextForMetric(e,t,n,a){return a||n===t?a?`The optimized ${e} was ${t}.`:`The ${e} was not changed.`:`The ${e} was ${function getChangeVerb(e,t){return e>t?"decreased":"increased"}(n,t)} from ${n} to ${t}.`}function roundIfFloat(e){return Math.round(100*(e+Number.EPSILON))/100}function _getMetricsNotePartsForCodonOptimizedSequence(e){const{isBackTranslation:t,optimizationMetrics:n}=e,a=[]
if(n){a.push({text:"Optimization Results:"})
t||a.push({text:`${n.numCodonsChanged} ${(0,r._6)(n.numCodonsChanged,"codon")} ${1===n.numCodonsChanged?"was":"were"} changed.`})
const e={numRareCodons:"number of rare codons",gcContent:"GC content",thymineContent:"thymine content",numHairpins:"number of hairpins"}
for(const i of Object.keys(e))n[i]&&a.push({text:getNotePartTextForMetric(e[i],roundIfFloat(n[i].optimized),roundIfFloat(n[i].original),t)})
for(const e of n.patterns)a.push({text:getNotePartTextForMetric(`number of occurrences of pattern ${e.pattern}`,roundIfFloat(e.optimized),roundIfFloat(e.original),t)})}return a}function getNotePartsForCodonOptimizedSequence(e){return[..._getHeaderNotePartsForCodonOptimizedSequence(e),..._getParametersNotePartsForCodonOptimizedSequence(e),..._getMetricsNotePartsForCodonOptimizedSequence(e)]}},891945:(e,t,n)=>{n.d(t,{Mu:()=>CodonOptimizationTabsSelector,ZP:()=>reduceAllCodonOptimizationTabs})
var a=n(531041),i=n(432128),r=n(780365),s=n(19945),o=n(396315)
class CodonOptimizationTabsSelector{constructor(e){this.state=e.ui.codonOptimizationTab}getState(e){return this.state[e]}}const l={}
function reduceAllCodonOptimizationTabs(e=l,t){switch(t.type){case s.Qd.NEW_TAB:return{...e,[t.tabId]:{...o.Y6,activeTab:r.r9.AVOIDED_CUTSITES,selectedOrganism:i.Z.get(r.Qv.ORGANISM),selectedGCLevel:i.Z.get(r.Qv.GC_LEVEL),cutsitesToAvoid:i.Z.get(r.Qv.CUTSITES),uridineDepletion:i.Z.get(r.Qv.URIDINE),avoidHairpins:i.Z.get(r.Qv.AVOID_HAIRPINS),hairpinStem:i.Z.get(r.Qv.HAIRPIN_STEM),hairpinWindow:i.Z.get(r.Qv.HAIRPIN_WINDOW),patternsToReduce:i.Z.get(r.Qv.REDUCE_PATTERNS)}}
case s.Qd.CLOSE_OPTIMIZATION:case s.Qd.SAVE_OPTIMIZATION_COMPLETED:return a.default.omit(e,[t.tabId])
case s.Qd.GO_BACK:case s.Qd.PREVIEW_COMPLETED:case s.Qd.PREVIEW_ERROR:case s.Qd.PREVIEW_PENDING:case s.Qd.UPDATE_SELECTED_GC_LEVEL:case s.Qd.UPDATE_SELECTED_ORGANISM:case s.Qd.SET_SELECTION:case s.Qd.ADD_PROTECTED_REGION:case s.Qd.DELETE_ALL_PROTECTED_REGIONS:case s.Qd.DELETE_PROTECTED_REGION:case s.Qd.IS_INVALID_PROTECTED_REGION:case s.Qd.ADD_CUTSITE_TO_AVOID:case s.Qd.DELETE_ALL_CUTSITES_TO_AVOID:case s.Qd.DELETE_CUTSITE_TO_AVOID:case s.Qd.ADD_CUTSITE_TO_PRESERVE:case s.Qd.DELETE_ALL_CUTSITES_TO_PRESERVE:case s.Qd.DELETE_CUTSITE_TO_PRESERVE:case s.Qd.UPDATE_URIDINE_DEPLETION:case s.Qd.UPDATE_HAIRPIN_PARAMETERS:case s.Qd.UPDATE_ACTIVE_TAB:case s.Qd.ADD_PATTERN_TO_REDUCE:case s.Qd.DELETE_ALL_PATTERNS_TO_REDUCE:case s.Qd.DELETE_PATTERN_TO_REDUCE:case s.Qd.UPDATE_PATTERN_TO_REDUCE:return{...e,[t.tabId]:(0,o.ZP)(e[t.tabId],t)}
default:return e}}},61419:(e,t,n)=>{n.d(t,{L:()=>RestrictionEnzymeDropdown})
var a=n(989526),i=n(146238),r=n(973606),s=n(954240),o=n(297020),l=n(472347)
const c=i.ZP.getCommonEnzymes()
function RestrictionEnzymeDropdown(e){return a.createElement(s.ZP,{id:"restrictionEnzyme",displayName:e.restrictionEnzymeId===r.kA?"None selected":c.get(e.restrictionEnzymeId).name(),disabled:e.isDisabled,menu:a.createElement(l.Z,{selectedValue:e.restrictionEnzymeId,width:o.zL.FULL,optionDatas:[...e.shouldAllowNull?[{name:"None",value:r.kA}]:[],...e.allowedRestrictionEnzymeIds.map((e=>({name:c.get(e).name(),value:e})))],onSelect:t=>{e.updateRestrictionEnzymeId(t)}}),dataTestAttrs:{component:"RestrictionEnzymeDropdown",element:"selectDropdown"}})}},89634:(e,t,n)=>{n.d(t,{$:()=>getDisplayInfoText,Z:()=>DisplayInfoLabel})
var a=n(989526),i=n(279785),r=n(271359),s=n(966579)
function getDisplayInfoText(e){return e.enzymeId?(0,i.Rt)(e.enzymeId).name:e.bases?function ellipsizeBases(e){return e.length<=10?e:`${e.slice(0,4)}..${e.slice(-4)}`}(e.bases):null}function TextLabel({sequencePoint:e,textPointInfo:t,text:n}){const i=t.point
return a.createElement(a.Fragment,null,a.createElement(s.Z,{startPoint:e,endPoint:t.point,stroke:r.Rl,strokeWidth:1}),a.createElement("text",{textAnchor:t.anchor,x:i.x,y:i.y,dominantBaseline:"middle",fontSize:"11px"},n))}function DisplayInfoLabel({sequencePoint:e,textPointInfo:t,displayInfo:n}){const i=getDisplayInfoText(n)
return i?a.createElement(TextLabel,{sequencePoint:e,textPointInfo:t,text:i}):null}},441499:(e,t,n)=>{n.d(t,{Z:()=>FragmentVisualization})
var a=n(989526),i=n(271359)
const r={x:75,y:55},s=25,o={x:25,y:55},l={x:o.x+100,y:55},c=i.tN
var d=n(231602),u=n(418955)
const m=30*Math.PI/180
function CircularPrimersVisualization({startDisplayInfo:e,endDisplayInfo:t,startAngle:n,endAngle:r,circleCenter:s,radius:o,fragmentStrand:l}){if(!e.primer&&!t.primer||Math.abs(n-r)<m&&n!==r)return a.createElement(a.Fragment,null)
const c=o-8,p=o+8,h=m*o
let E,S,T,g,I,A
if(1===l){E=c
S=p
T=n+h/c
g=r-h/p
I=f.INSIDE
A=f.OUTSIDE}else{E=p
S=c
T=n+h/p
g=r-h/c
I=f.OUTSIDE
A=f.INSIDE}const y=(0,u.op)(s,E,T),_=(0,u.op)(s,S,g)
return a.createElement(a.Fragment,null,e.primer&&a.createElement(a.Fragment,null,a.createElement(d.Z,{circleCenter:s,radius:E,startAngle:n,endAngle:T,pathProps:{stroke:i.Rl,strokeWidth:2}}),a.createElement(CircularArrow,{circleCenter:s,radius:E,arrowCenter:y,circleAngle:T,direction:1,stroke:i.Rl,strokeWidth:2,arrowType:I})),t.primer&&a.createElement(a.Fragment,null,a.createElement(d.Z,{circleCenter:s,radius:S,startAngle:g,endAngle:r,pathProps:{stroke:i.Rl,strokeWidth:2}}),a.createElement(CircularArrow,{circleCenter:s,radius:S,arrowCenter:_,circleAngle:g,direction:-1,stroke:i.Rl,strokeWidth:2,arrowType:A})))}var p=n(55363),h=n(966579),E=n(89634),S=n(692013),T=n(129270)
function VisualizationContainer({children:e,width:t,height:n}){return a.createElement("svg",{className:(0,S.iv)(g.visualizationContainer),viewBox:"0 0 150 110",width:t,height:n},e)}const g=S.mM.create({visualizationContainer:{fontFamily:T.HG,overflow:"visible"}})
var f,I=n(708199)
function getDy(e){return 5*Math.PI/6<=e&&e<=7*Math.PI/6?8:0}!function(e){e.INSIDE="INSIDE"
e.OUTSIDE="OUTSIDE"
e.BOTH="BOTH"}(f||(f={}))
function CircularArrow({circleCenter:e,radius:t,arrowCenter:n,circleAngle:i,direction:r,stroke:s,strokeWidth:o,arrowType:l=f.BOTH}){const c=(0,u.op)(e,t-4,i-.14*r),d=(0,u.op)(e,t+4,i-.14*r)
return a.createElement(a.Fragment,null,l!==f.OUTSIDE&&a.createElement(h.Z,{startPoint:n,endPoint:c,strokeWidth:o,stroke:s,strokeLinecap:"round"}),l!==f.INSIDE&&a.createElement(h.Z,{startPoint:n,endPoint:d,strokeWidth:o,stroke:s,strokeLinecap:"round"}))}function CircularFragmentVisualization({sequence:e,fragmentColor:t,width:n=150,height:i=110}){const{start:o,end:l,strand:m,sequenceLength:h}=e,S=(0,u._O)(o%h,h),T=(0,u._O)((null!=l?l:o)%h,h),g=(0,I.Ee)(o,l,m,h)%h,f=(0,p.AS)(r,g,h,s),{startDisplayInfo:A,endDisplayInfo:y}=(0,I._V)(e),_=function getCircularIndexTextPointInfos(e,t,n,a){const i=(0,p.AS)(r,t,a,40),s=(0,p.AS)(r,n,a,40)
let o=0,l=0
if(i.x>e.x==s.x>e.x&&(0,u.Z9)({start:i.y,end:i.y+13},{start:s.y,end:s.y+13}))if(i.y<=s.y){o=18
s.y<e.y&&(l=15*(s.x>e.x?1:-1))}else{o=-18
s.y>e.y&&(l=15*(s.x>e.x?1:-1))}s.x+=l
s.y+=o
return{start:{point:{x:i.x,y:i.y+getDy((0,u._O)(t,a))},anchor:(0,p.x_)(e,i)},end:{point:{x:s.x,y:s.y+getDy((0,u._O)(n,a))},anchor:(0,p.x_)(e,s)}}}(r,o,null!=l?l:o,h)
return a.createElement(VisualizationContainer,{width:n,height:i},a.createElement(E.Z,{sequencePoint:(0,u.op)(r,s,S),textPointInfo:_.start,displayInfo:A}),a.createElement(E.Z,{sequencePoint:(0,u.op)(r,s,T),textPointInfo:_.end,displayInfo:y}),a.createElement(d.Z,{circleCenter:r,radius:s,startAngle:T,endAngle:S,pathProps:{stroke:c,strokeWidth:3}}),a.createElement(d.Z,{circleCenter:r,radius:s,startAngle:S,endAngle:null==l?S+.001:T,pathProps:{stroke:t,strokeWidth:4}}),a.createElement(CircularArrow,{circleCenter:r,radius:s,arrowCenter:f,circleAngle:(0,u._O)(g,h),direction:m,stroke:t,strokeWidth:4}),null!=l&&a.createElement(CircularPrimersVisualization,{startDisplayInfo:A,endDisplayInfo:y,startAngle:S,endAngle:T,circleCenter:r,radius:s,fragmentStrand:m}))}var A,y=n(132814)
!function(e){e.ABOVE="ABOVE"
e.BELOW="BELOW"
e.BOTH="BOTH"}(A||(A={}))
function LinearArrow({arrowCenter:e,direction:t,color:n,strokeWidth:i,arrowType:r=A.BOTH}){const s=e.x-5*t
return a.createElement(a.Fragment,null,r!==A.BELOW&&a.createElement(h.Z,{startPoint:e,endPoint:{x:s,y:e.y-5},strokeWidth:i,stroke:n,strokeLinecap:"round"}),r!==A.ABOVE&&a.createElement(h.Z,{startPoint:e,endPoint:{x:s,y:e.y+5},strokeWidth:i,stroke:n,strokeLinecap:"round"}))}function getLinearPointForIndexOnVisualization(e,t,n=0){return(0,I.gm)(e,t,o,l,n)}const _=10
function LinearPrimersVisualization({fivePrimeDisplayInfo:e,threePrimeDisplayInfo:t,startIndex:n,endIndex:r,fragmentStrand:s,sequenceLength:o}){const l=.15*o
if(r-n<l)return a.createElement(a.Fragment,null)
const c=n+l,d=r-l,u=1===s?n:r,m=1===s?r:n,p=1===s?c:d,E=1===s?d:c
return a.createElement(a.Fragment,null,e.primer&&a.createElement(a.Fragment,null,a.createElement(h.Z,{startPoint:getLinearPointForIndexOnVisualization(u,o,_),endPoint:getLinearPointForIndexOnVisualization(p,o,_),stroke:i.Rl,strokeWidth:2}),a.createElement(LinearArrow,{arrowCenter:getLinearPointForIndexOnVisualization(p,o,_),direction:s,color:i.Rl,strokeWidth:2,arrowType:A.BELOW})),t.primer&&a.createElement(a.Fragment,null,a.createElement(h.Z,{startPoint:getLinearPointForIndexOnVisualization(m,o,-10),endPoint:getLinearPointForIndexOnVisualization(E,o,-10),stroke:i.Rl,strokeWidth:2}),a.createElement(LinearArrow,{arrowCenter:getLinearPointForIndexOnVisualization(E,o,-10),direction:-s,color:i.Rl,strokeWidth:2,arrowType:A.ABOVE})))}function LinearFragmentVisualization({sequence:e,fragmentColor:t,width:n=150,height:i=110}){const{start:r,end:s,strand:d,sequenceLength:u,fivePrimeDisplayInfo:m,threePrimeDisplayInfo:p}=e,S=getLinearPointForIndexOnVisualization(r,u),T=getLinearPointForIndexOnVisualization(null!=s?y.modelEndToRender(s,u):r,u),{startDisplayInfo:g,endDisplayInfo:f}=(0,I._V)(e),A=function getLinearIndexTextPointInfos(e,t,n,a,i){const r=getLinearPointForIndexOnVisualization(e,n),s=getLinearPointForIndexOnVisualization(t,n),o=(0,E.$)(a)||"",l=(0,E.$)(i)||"",c=o.length>l.length?35:15,d=o.length>l.length?15:35
return{start:{point:{x:r.x,y:r.y-c},anchor:"middle"},end:{point:{x:s.x,y:s.y-d},anchor:"middle"}}}(r,null!=s?s:r,u,g,f),_=getLinearPointForIndexOnVisualization((0,I.Ee)(r,s,d,u),u)
return a.createElement(VisualizationContainer,{width:n,height:i},a.createElement(h.Z,{startPoint:o,endPoint:l,stroke:c,strokeWidth:3}),a.createElement(E.Z,{sequencePoint:S,textPointInfo:A.start,displayInfo:g}),a.createElement(E.Z,{sequencePoint:T,textPointInfo:A.end,displayInfo:f}),a.createElement(LinearArrow,{arrowCenter:_,direction:d,color:t,strokeWidth:4}),a.createElement(h.Z,{startPoint:S,endPoint:T,stroke:t,strokeWidth:4}),null!=s&&a.createElement(LinearPrimersVisualization,{fivePrimeDisplayInfo:m,threePrimeDisplayInfo:p,startIndex:r,endIndex:y.modelEndToRender(s,u),sequenceLength:u,fragmentStrand:d}))}function FragmentVisualization({sequence:e,fragmentColor:t,width:n=150}){const i=.7333333333333333*n
return e.circular?a.createElement(CircularFragmentVisualization,{sequence:e,fragmentColor:t,width:n,height:i}):a.createElement(LinearFragmentVisualization,{sequence:e,fragmentColor:t,width:n,height:i})}},630029:(e,t,n)=>{n.d(t,{Z:()=>PolymerPreview})
var a=n(64558),i=n(989526),r=n(85758),s=n.n(r),o=n(89634),l=n(708199),c=n(55363),d=n(977322),u=n(132814),m=n(992815),p=n(129270),h=n(271359),E=n(231602),S=n(418955)
function ArcText({circleCenter:e,radius:t,startAngle:n,endAngle:a,text:r,id:s,fontFamily:o,fontWeight:l,fontSize:c,color:d}){const u=(0,S.AW)(n),m=(0,S.AW)(a)
let p=(u+m)/2
u>m&&(p-=Math.PI)
const h=m>u?m-u>=Math.PI:2*Math.PI-(u-m)>=Math.PI
let E=u,T=m,g=!0
if(Math.PI/2<p&&p<3*Math.PI/2){E=m
T=u
g=!1}const f=(0,S.op)(e,t,E),I=(0,S.op)(e,t,T),A=["M",f.x,f.y,"A",t,t,0,h?1:0,g?1:0,I.x,I.y].join(" ")
return i.createElement("g",null,i.createElement("path",{id:s,d:A,fill:"none"}),i.createElement("text",{fontFamily:o,fontWeight:l,fontSize:c,color:d,dominantBaseline:"middle",textAnchor:"middle"},i.createElement("textPath",{xlinkHref:`#${s}`,startOffset:"50%"},r)))}var T=n(966579)
const g=120,f={x:150,y:150},I=15,A=112.5,y=102.5
function AxisNumbering({length:e,startIndex:t,idPrefix:n}){const a=(0,c.Sd)(e,6),r=s().range(a,e+1,a)
return i.createElement(i.Fragment,null,r.map((a=>{const r=(0,S._O)(u.displayToModel(a,t),e),s=(0,S.op)(f,A,r),o=(0,S.op)(f,108.5,r),l=String(a),c=3*l.length/y
return i.createElement("g",{key:`axis-label-${l}`},i.createElement(T.Z,{startPoint:s,endPoint:o,stroke:h.Rl,strokeWidth:2}),i.createElement(ArcText,{fontWeight:700,fontSize:10,id:`${n}-axis-label-${l}`,text:l,circleCenter:f,radius:y,startAngle:r-c,endAngle:r+c}))})))}function Annotation({annotation:e,layer:t,seqLength:n,id:a}){const{start:r,end:o,name:l,color:u,strand:m}=e,{startAngle:p,endAngle:h}=(0,S.MV)(r,o,n,(e=>(0,S._O)(e,n))),E=86.5-16*t,T=(0,S.AW)(h-p)*E-16,g=(0,d.zW)(l,T/5),I=(0,c.aE)(m).innerRadius(E-6).outerRadius(E+6)
return i.createElement("g",null,i.createElement("path",{transform:`translate(${f.x}, ${f.y})`,d:I({radius:E,startAngle:p,endAngle:h}),fill:u,fillOpacity:.7,stroke:s().rgb(u).darker().toString()}),g.length>0&&i.createElement(ArcText,{fontWeight:500,fontSize:10,id:a,text:g,circleCenter:f,radius:E,startAngle:p,endAngle:h}))}function EditOverlay({overlay:e,seqLength:t}){const{start:n,end:a}=e,{showFragmentOutside:r,fragmentColor:s,boundaryLineColor:o,backgroundColor:c}=(0,l.qo)(e,t),{startAngle:d,endAngle:u}=(0,S.MV)(n,a,t,(e=>(0,S._O)(e,t))),m=2*Math.PI/180,p=r?(0,S.AW)(d+m):d,h=r?(0,S.AW)(u-m):u
return i.createElement("g",null,c&&i.createElement(E.Z,{circleCenter:f,radius:129.5,startAngle:d,endAngle:u,pathProps:{stroke:c,strokeWidth:34}}),s&&i.createElement(E.Z,{circleCenter:f,radius:r?139:g,startAngle:p,endAngle:h,pathProps:{stroke:s,strokeWidth:I}}),o&&i.createElement(i.Fragment,null,i.createElement(T.Z,{startPoint:(0,S.op)(f,A,d),endPoint:(0,S.op)(f,148.5,d),stroke:o,strokeWidth:3,strokeLinecap:"round"}),i.createElement(T.Z,{startPoint:(0,S.op)(f,A,u),endPoint:(0,S.op)(f,148.5,u),stroke:o,strokeWidth:3,strokeLinecap:"round"})))}function CircularPolymerPreview({polymer:e,annotationLayers:t,uniqueIdPrefix:n}){const{fragments:r,length:s,startIndex:l,cutSites:d,overlays:u}=e
return i.createElement("svg",{viewBox:"0 0 300 300",width:"100%",fontFamily:p.HG},i.createElement(E.Z,{circleCenter:f,radius:g,startAngle:0,endAngle:0,pathProps:{stroke:h.tN,strokeWidth:I}}),s>0&&i.createElement(AxisNumbering,{length:s,startIndex:l,idPrefix:n}),function _renderFragments(e,t){const[n,r]=(0,a.uK)(e,(e=>null==e.homologyRegionOtherColor))
return i.createElement(i.Fragment,null,n.map((({start:e,end:n,color:a})=>{const r=(0,S._O)(e,t),s=(0,S._O)(n,t)
return i.createElement(E.Z,{key:`fragment-${e}-${n}`,circleCenter:f,radius:g,startAngle:r,endAngle:s,pathProps:{stroke:a,strokeWidth:I}})})),r.flatMap((({start:e,end:n,color:a,homologyRegionOtherColor:r})=>(0,m.Zf)({start:e,end:n,color:a,homologyRegionOtherColor:r},t,g,(e=>(0,S._O)(e,t))).map((({pieceStartAngle:t,pieceEndAngle:a,color:r},s)=>i.createElement(E.Z,{key:`fragment-${e}-${n}-${s}`,circleCenter:f,radius:g,startAngle:t,endAngle:a,pathProps:{stroke:r,strokeWidth:I}}))))))}(r,s),u.map((e=>i.createElement(EditOverlay,{key:`edit-${e.start}-${e.end}`,overlay:e,seqLength:s}))),d.map((({enzymeId:e,position:t})=>{const n=(0,c.AS)(f,t,s,A),a=(0,c.AS)(f,t,s,136),r={point:a,anchor:(0,c.x_)(f,a)}
return i.createElement(o.Z,{key:`cutsite-${t}`,sequencePoint:n,textPointInfo:r,displayInfo:{enzymeId:e,bases:null}})})),i.createElement("g",null,t.map(((e,t)=>e.map(((e,a)=>{const r=`annotation-${t}-${a}`
return i.createElement(Annotation,{key:r,id:`${n}-${r}`,annotation:e,layer:t,seqLength:s})}))))))}var _=n(279785),C=n(703764)
const R=75,N=15,O={x:25,y:R},b={x:275,y:R},v=Math.ceil(7.5),P={height:12,arrowsOffset:6,arrowWidth:3,arrowSpacing:3,labelColor:h.Rl,outsideLabelColor:h.Rl}
function getLinearPointForIndexOnPreview(e,t,n=0){return(0,l.gm)(e,t,O,b,n)}function LinearPolymerPreview_AxisNumbering({length:e,startIndex:t}){const n=(0,c.Sd)(e,4),a=Math.ceil(t/n)*n,r=s().range(a,u.modelToDisplay(e,t),n)
return i.createElement(i.Fragment,null,r.map((n=>{const a=u.displayToModel(n,t),r=getLinearPointForIndexOnPreview(a,e,v),s=getLinearPointForIndexOnPreview(a,e,v+4)
return i.createElement("g",{key:`axis-label-${n}`},i.createElement(T.Z,{startPoint:r,endPoint:s,stroke:h.Rl,strokeWidth:2}),i.createElement("text",{x:s.x,y:s.y+2,fontWeight:700,fontSize:10,dominantBaseline:"hanging",textAnchor:"middle"},n))})))}function LinearPolymerPreview_Annotation({annotation:e,layer:t,seqLength:n}){const{start:a,end:r,strand:o,color:l,name:c}=e,m=getLinearPointForIndexOnPreview(a,n),p=getLinearPointForIndexOnPreview(u.modelEndToRender(r,n),n).x-m.x,h=0===o?0:Math.min(p,8),E={...P,color:l,start:a,end:r,width:p,tipWidth:h},{fillD:S,strokeLeftD:T,strokeMiddleD:g,strokeRightD:f,strokeLeftRender:I,strokeRightRender:A,strokeMiddleRender:y}=(0,d.Vj)(E,0,n,o),_=p-h-8,C=(0,d.zW)(c,_/5)
return i.createElement("g",{transform:`translate(${m.x}, ${106+14*t})`},i.createElement("path",{d:S,fill:l,fillOpacity:.7}),i.createElement("path",{d:T,fill:"none",stroke:s().rgb(l).darker().toString(),shapeRendering:I}),i.createElement("path",{d:f,fill:"none",stroke:s().rgb(l).darker().toString(),shapeRendering:A}),i.createElement("path",{d:g,fill:"none",stroke:s().rgb(l).darker().toString(),shapeRendering:y}),i.createElement("text",{x:(p-h)/2,y:7,fontWeight:500,fontSize:10,dominantBaseline:"middle",textAnchor:"middle"},C))}function LinearPolymerPreview_EditOverlay({overlay:e,seqLength:t}){const{start:n,end:a}=e,r=getLinearPointForIndexOnPreview(n,t,v),s=getLinearPointForIndexOnPreview(u.modelEndToRender(a,t),t,v),{showFragmentOutside:o,fragmentColor:c,boundaryLineColor:d,backgroundColor:m}=(0,l.qo)(e,t),p=o?{x:r.x+4,y:r.y-34}:{x:r.x,y:r.y-v},h=o?{x:s.x-4,y:s.y-34}:{x:s.x,y:s.y-v}
return i.createElement("g",null,m&&i.createElement("rect",{x:r.x,y:R+v-42,width:s.x-r.x,height:42,fill:m}),c&&i.createElement(T.Z,{startPoint:p,endPoint:h,strokeWidth:N,stroke:c}),d&&i.createElement(i.Fragment,null,i.createElement(T.Z,{startPoint:r,endPoint:{x:r.x,y:r.y-42},stroke:d,strokeWidth:3,strokeLinecap:"round"}),i.createElement(T.Z,{startPoint:s,endPoint:{x:s.x,y:s.y-42},stroke:d,strokeWidth:3,strokeLinecap:"round"})))}function CutSite({cutSite:e,layer:t,seqLength:n}){const{position:a,enzymeId:r}=e,s=getLinearPointForIndexOnPreview(a,n,v),l={x:s.x,y:0===t?55:35}
return i.createElement(o.Z,{sequencePoint:s,textPointInfo:{anchor:"start",point:l},displayInfo:{enzymeId:r,bases:null}})}function LinearPolymerPreview({polymer:e,annotationLayers:t}){const{fragments:n,length:r,startIndex:s,overlays:o,cutSites:l}=e,c=function getCutSiteLayers(e,t){const cutSiteEndPos=e=>{const n=5*(0,_.Rt)(e.enzymeId).name.length+4,a=Math.ceil(n*t/250)
return Math.min(e.position+a,t)},{max:n,layers:a}=(0,C.Qu)(e.map((e=>({...e,cid:String(e.position)}))),(e=>({model:e,pos:e.position})),(e=>({model:e,pos:cutSiteEndPos(e)})),!0),i=Array.from({length:n+1},(()=>[]))
for(const{model:e,layer:t}of a)i[t].push(e)
return i.slice(0,2).reverse()}(l,r),d=0===l.length?30:0,E=0===t.length?120-d:150-d,[S,g]=(0,a.uK)(n,(e=>null==e.homologyRegionOtherColor))
return i.createElement("svg",{viewBox:`0 ${d} 300 ${E}`,width:"100%",fontFamily:p.HG},i.createElement(T.Z,{startPoint:O,endPoint:b,strokeWidth:N,stroke:h.tN}),r>0&&i.createElement(LinearPolymerPreview_AxisNumbering,{length:r,startIndex:s}),S.map((({start:e,end:t,color:n})=>{const a=getLinearPointForIndexOnPreview(e,r),s=getLinearPointForIndexOnPreview(u.modelEndToRender(t,r),r)
return i.createElement(T.Z,{key:`fragment-${e}-${t}`,startPoint:a,endPoint:s,strokeWidth:N,stroke:n})})),g.flatMap((({start:e,end:t,color:n,homologyRegionOtherColor:a})=>(0,m.j_)({start:e,end:t,color:n,homologyRegionOtherColor:a},(e=>getLinearPointForIndexOnPreview(e,r).x)).map((({startPoint:n,endPoint:a,color:r},s)=>i.createElement(T.Z,{key:`fragment-${e}-${t}-${s}`,startPoint:{x:n,y:R},endPoint:{x:a,y:R},strokeWidth:N,stroke:r}))))),i.createElement("g",null,c.map(((e,t)=>e.map((e=>i.createElement(CutSite,{key:`cutsite-${e.position}`,cutSite:e,layer:t,seqLength:r})))))),i.createElement("g",null,t.map(((e,t)=>e.map(((e,n)=>i.createElement(LinearPolymerPreview_Annotation,{key:`annotation-${t}-${n}`,annotation:e,layer:t,seqLength:r})))))),i.createElement("g",null,o.map(((e,t)=>i.createElement(LinearPolymerPreview_EditOverlay,{key:`overlay-${t}`,overlay:e,seqLength:r})))))}var L=n(567e3)
function PolymerPreview({polymer:e,uniqueIdPrefix:t}){const n=function getAnnotationLayers(e,t){const n=.1*t,i=e.filter((({start:e,end:a})=>u.length(e,a,t)>=n)).map(((e,t)=>({...e,cid:String(t)}))),r=(0,a.m8)(i.map((e=>[e.cid,u.length(e.start,e.end,t)]))),s=(0,L.Z)(i,[e=>-r[e.cid]]),{max:o,layers:l}=(0,C.Qu)(s,(e=>({model:e,pos:e.start})),(e=>({model:e,pos:e.end})),!0),c=Array.from({length:o+1},(()=>[]))
for(const{model:e,layer:t}of l)c[t].push(e)
return o<3?c:(0,L.Z)(c,[e=>-Math.max(...e.map((e=>r[e.cid])))]).slice(0,3)}(e.annotations,e.length)
return e.circular?i.createElement(CircularPolymerPreview,{polymer:e,annotationLayers:n,uniqueIdPrefix:t}):i.createElement(LinearPolymerPreview,{polymer:e,annotationLayers:n})}},502567:(e,t,n)=>{n.d(t,{Up:()=>a,f8:()=>s,xM:()=>r})
var a,i=n(271359)
!function(e){e.INSERT="INSERT"
e.DELETE="DELETE"
e.UPDATE="UPDATE"}(a||(a={}))
const r={[a.INSERT]:i.Ro,[a.DELETE]:i.L3,[a.UPDATE]:null},s={[a.INSERT]:i.G$,[a.DELETE]:i.JF,[a.UPDATE]:i.Wd}},708199:(e,t,n)=>{n.d(t,{Ee:()=>getIndexForArrow,_V:()=>getDisplayInfos,gm:()=>getLinearPointForIndex,qo:()=>getEditOverlayRenderParams})
var a=n(232606),i=n(132814),r=n(901113),s=n(502567)
function getDisplayInfos(e){switch(e.strand){case 1:return{startDisplayInfo:e.fivePrimeDisplayInfo,endDisplayInfo:e.threePrimeDisplayInfo}
case-1:return{endDisplayInfo:e.fivePrimeDisplayInfo,startDisplayInfo:e.threePrimeDisplayInfo}
default:throw new Error(`Invalid strand: ${(0,r.vE)(e.strand)}`)}}function getIndexForArrow(e,t,n,s){switch(n){case 1:return null!=t?i.modelEndToRender(t,s):e
case-1:return e
default:(0,a.Gp)(!1,`Unexpected strand: ${(0,r.vE)(n)}`)
return e}}function getLinearPointForIndex(e,t,n,a,i=0){const r=a.x-n.x
return{x:n.x+e/t*r,y:n.y+i}}function getEditOverlayRenderParams(e,t){const{start:n,end:a,type:r,color:o}=e,l=i.length(n,a,t),c=r===s.Up.DELETE,d=!c||l>=.05*t,u=r!==s.Up.UPDATE,m=s.f8[r]
return{showFragmentOutside:c,fragmentColor:d?null!=o?o:m:null,boundaryLineColor:u?m:null,backgroundColor:s.xM[r]}}},205001:(e,t,n)=>{n.r(t)
n.d(t,{canRegenerateRegion:()=>canRegenerateRegion,filterGuides:()=>filterGuides,findGuides:()=>findGuides,findGuidesInRange:()=>findGuidesInRange,getForwardStrandBases:()=>getForwardStrandBases,getNucleaseType:()=>getNucleaseType,guideEnd:()=>guideEnd,guideStart:()=>guideStart,isCas9Pam:()=>isCas9Pam,isLeftPam:()=>isLeftPam,pairOffset:()=>pairOffset,renderStrand:()=>renderStrand})
n(440281)
var a=n(531041),i=n(232606),r=n(955836),s=n(48047),o=n(659009),l=n(132814),c=n(260929)
function guideStart(e,t,n){return n?1===e.strand?l.mod(e.position-o.LEFT_PAM_TO_CUT_DISTANCE,t):l.mod(e.position+o.LEFT_PAM_TO_CUT_DISTANCE-e.bases.length,t):1===e.strand?l.mod(e.position+o.PAM_TO_CUT_DISTANCE-e.bases.length,t):l.mod(e.position-o.PAM_TO_CUT_DISTANCE,t)}function guideEnd(e,t,n){return n?1===e.strand?l.mod(e.position-o.LEFT_PAM_TO_CUT_DISTANCE+e.bases.length,t):l.mod(e.position+o.LEFT_PAM_TO_CUT_DISTANCE,t):1===e.strand?l.mod(e.position+o.PAM_TO_CUT_DISTANCE,t):l.mod(e.position-o.PAM_TO_CUT_DISTANCE+e.bases.length,t)}function findGuidesInRange(e,t,n,a,i,c){const{guideLength:d,pam:u,isLeftPam:m}=n,p=e.bases(),h=e.circular(),E=p.length
t.set({region:(()=>{switch(c){case 1:return"fwd"
case-1:return"rev"
default:return"all"}})()})
const S=[],T=Array(d+1).join("N"),g=m?u+T:T+u
t.doSearch(g,{start:a,end:i},{dedup:!0})
t.get("results").each((e=>{let t,n
a=e.get("start")
i=e.get("end")
if(1===(c=e.get("strand"))){t=s.slice(p,a,i,h)
n=m?l.mod(a+u.length+o.LEFT_PAM_TO_CUT_DISTANCE,E):l.mod(i-u.length-o.PAM_TO_CUT_DISTANCE,E)}else{t=s.revcomp(s.slice(p,a,i,h),r.jb)
n=m?l.mod(i-u.length-o.LEFT_PAM_TO_CUT_DISTANCE,E):l.mod(a+u.length+o.PAM_TO_CUT_DISTANCE,E)}if(s.isDegenerate(t))return
const d=t.length-u.length,T=m?t.substring(0,u.length):t.substring(d),g=m?t.substring(u.length):t.substring(0,d)
S.push({bases:g,pam:T,position:n,strand:c,offTargetScore:null,sites:null})}))
return S}function findGuides(e,t,n,a,r){(0,i.hu)(!isNaN(a)&&!isNaN(r),"Must provide both start and end")
return findGuidesInRange(e,t,n,a,r,null)}function pairOffset(e,t,n,a){null==a&&(a=!1)
return!a||Math.abs(e-t)<=n/2?e-t:e>t?e-t-n:n+e-t}function filterGuides(e,t,n,{skipTypeFilter:i,skipCutsOutsideRegions:r}={skipTypeFilter:!1,skipCutsOutsideRegions:!1}){const c=e.length()
r&&(n=n.filter((e=>{const{regions:n}=t,a=guideStart(e,c,t.isLeftPam),i=guideEnd(e,c,t.isLeftPam)
return n.some((e=>l.isRangeWithin(a,i,e.start,e.end)))})))
n=n.filter((e=>{const{bases:n}=e,i=s.count(n,s.NucleotideType.DNA)
for(const e of Array.from(a.default.keys(i)))i[e]=100*i[e]/n.length
const r=t.aMin<=i.A&&i.A<=t.aMax,o=t.tMin<=i.T&&i.T<=t.tMax,l=t.cMin<=i.C&&i.C<=t.cMax,c=t.gMin<=i.G&&i.G<=t.gMax
return r&&o&&l&&c}))
t.designType===o.DESIGN_TYPE.BASE_EDIT&&(n=n.filter((e=>{for(const t of Array.from(e.bases.slice(0,8)))if(t.toUpperCase()===o.FORWARD_STRAND_EDITABLE_BASE)return!0
return!1})))
if(t.designType===o.DESIGN_TYPE.PAIRED&&!i){const a=t.pairOffsetMin,i=t.pairOffsetMax,r=n.filter((e=>1===e.strand)),s=n.filter((e=>-1===e.strand))
n=[]
for(const o of Array.from(s)){const s=guideEnd(o,c,t.isLeftPam)
if(0!==s||e.circular())for(const l of Array.from(r)){const r=pairOffset(guideStart(l,c,t.isLeftPam),s,e.length(),e.circular())
if(a<=r&&r<=i){n.push(l)
n.push(o)}}}}return n}function canRegenerateRegion(e,t){return 0<=e.start&&e.start<t&&0<e.end&&e.end<t}function isLeftPam(e){return e in o.PAM&&o.PAM_INFO_BY_PAM[e].isLeftPam}function isCas9Pam(e){return e in o.PAM&&o.PAM_INFO_BY_PAM[e].nucleaseType===o.NUCLEASE_TYPE.CAS9}function getNucleaseType(e,t){return e in o.PAM?o.PAM_INFO_BY_PAM[e].nucleaseType:t?o.NUCLEASE_TYPE.CPF1:o.NUCLEASE_TYPE.CAS9}function renderStrand(e){if(1===e.strand)return"+"
if(-1===e.strand)return"-"
c.vU("Unexpected strand value in guide.")
return null}function getForwardStrandBases(e){return 1===e.strand?e.bases:s.revcomp(e.bases,r.jb)}},426746:(e,t,n)=>{n.d(t,{Z:()=>N})
var a=n(989526),i=n(348920),r=n(812651),s=n(48047),o=n(343748),l=n(204026),c=n(390462),d=n(270821),u=n(840060),m=n(974913),p=n(103593),h=n(102176),E=n(929123),S=n(59860),T=n(553853)
const{sanitize:g,formatBaseCount:f}=s
class RawBasesInput extends a.Component{constructor(){super(...arguments)
this.state={bases:"",folderId:c.Z.get(c.O.INVENTORY),name:"Untitled Sequence"}
this._handleChangeFolderId=e=>{this.setState({folderId:e.target.value})}
this.getGenome=()=>null
this.updateBases=e=>{this.setState({bases:g(e.target.value,s.NucleotideType.DNA)})}
this.createSequence=()=>{if(!(this.state.bases.length>0&&this.state.folderId&&this.state.name.trim().length>0)){m.ZP.error("Bases, folder, and name must all be specified.")
return null}const e=new r.Sequence({bases:this.state.bases,folder:this.state.folderId,name:this.state.name})
return e.save().then((()=>e.id))}}render(){return a.createElement("div",null,a.createElement(h.Z,null,a.createElement(E.Z,null,"Sequence Name"),a.createElement("input",{type:"text",value:this.state.name,onChange:e=>{this.setState({name:e.target.value})}})),a.createElement(h.Z,null,a.createElement(E.Z,null,"Folder"),a.createElement(S.Z,null,a.createElement(p.Z,{sm:6},a.createElement(l.Z,{showInventory:!0,value:this.state.folderId,onChange:this._handleChangeFolderId,unsetOnFetchFail:!0})))),a.createElement(h.Z,null,a.createElement(E.Z,{className:"u-input-line-height"},"Bases"),a.createElement("textarea",{className:"fixed-width-textarea form-control",style:{width:"100%"},rows:4,value:this.state.bases,onChange:this.updateBases})))}}class FileInput extends a.Component{constructor(){super(...arguments)
this.state={folderId:null,importError:null,sequence:null,sequenceName:""}
this._handleChangeFolderId=e=>{this.setState({folderId:e.target.value})}
this.getGenome=()=>null
this.createSequence=()=>{if(null==this.state.sequence){m.ZP.error("Upload a file to continue.")
return null}if(!(this.state.sequenceName.trim().length>0&&null!=this.state.folderId)){m.ZP.error("Name and folder must be specified.")
return null}const e={name:this.state.sequenceName,folder:this.state.folderId}
c.Z.set(c.O.INVENTORY,this.state.folderId)
return o.SP(this.state.sequence.id,e,{}).then((()=>this.state.sequence.id))}}render(){return a.createElement("div",null,this.state.sequence&&a.createElement("div",null,a.createElement(h.Z,null,a.createElement(E.Z,null,"Sequence Name"),a.createElement("input",{type:"text",value:this.state.sequenceName,onChange:e=>{this.setState({sequenceName:e.target.value})}}),a.createElement("div",{className:"faded u-tiny-spacing-top"},a.createElement("small",null,(()=>{const{circular:e,length:t}=this.state.sequence,n=e?"circular":"linear"
return`${f(t)}  ${n}`})()))),a.createElement(h.Z,null,a.createElement(E.Z,null,"Folder"),a.createElement(S.Z,null,a.createElement(p.Z,{sm:6},a.createElement(l.Z,{showInventory:!0,value:this.state.folderId,onChange:this._handleChangeFolderId,unsetOnFetchFail:!0})))),a.createElement("hr",{key:"hr"})),a.createElement(h.Z,null,a.createElement(u.Z,{folderId:c.Z.get(c.O.INVENTORY),importErrorLink:{value:this.state.importError,requestChange:e=>{this.setState({importError:e})}},multi:!1,updateSequences:([e])=>{this.setState({sequence:e,sequenceName:e.name,folderId:e.folder.api_identifier})}})))}}class ChromosomeInput extends a.Component{constructor(){super(...arguments)
this.importFormRef=a.createRef()
this.getGenome=()=>this.importFormRef.current.getGenome()
this.createSequence=()=>{const e=this.importFormRef.current.createSequence()
return e?e.then((({id:e})=>e)):null}}render(){return a.createElement(d.Z,{ref:this.importFormRef,initialFolderId:c.Z.get(c.O.INVENTORY)})}}const I="genome-mod",A="crispr-ia",y="raw-bases",_="file",C="chromosome",R="gene"
class CreateSequenceStep extends a.Component{constructor(){super(...arguments)
this.state={createType:R,crisprType:I}
this.sequenceInputRef=a.createRef()
this.getGenome=()=>this.sequenceInputRef.current.getGenome()
this.handleChangeCreateType=e=>{this.setState({createType:e.target.value})}
this.handleChangeCrisprType=e=>{const t={crisprType:e.target.value}
t.crisprType===A&&(t.createType=R)
this.props.onChangeIsCrisprIa(t.crisprType===A)
this.setState(t)}
this.updateCreateType=e=>{this.setState({createType:e.target.value})}
this.createSequence=()=>this.sequenceInputRef.current.createSequence()}render(){return a.createElement("div",null,i.ZP.ENABLE_CRISPR_IA&&this.props.onChangeIsCrisprIa&&a.createElement("div",null,a.createElement(h.Z,null,a.createElement("label",{className:"u-spacing-right"},"Experiment Type"),a.createElement("span",null,a.createElement("label",null,a.createElement("input",{type:"radio",checked:this.state.crisprType===I,value:I,onChange:this.handleChangeCrisprType}),a.createElement("span",{className:"u-tiny-spacing-left"},"Genome modification"))),a.createElement("span",{className:"u-spacing-left"},a.createElement("label",null,a.createElement("input",{type:"radio",checked:this.state.crisprType===A,value:A,onChange:this.handleChangeCrisprType}),a.createElement("span",{className:"u-tiny-spacing-left"},"CRISPRi, CRISPRa"))))),a.createElement("div",null,a.createElement(h.Z,{className:"crispr-importSelector"},a.createElement("label",null,"Import From"),a.createElement("select",{value:this.state.createType,onChange:this.handleChangeCreateType,disabled:this.state.crisprType===A},a.createElement("option",{value:R},"Gene ID or Name"),a.createElement("option",{value:C},"Chromosomal Coordinates"),a.createElement("option",{value:_},"Sequence File (Genbank, FASTA, etc.)"),a.createElement("option",{value:y},"Raw Bases"))),(()=>{if(this.state.crisprType===A)return a.createElement(T.Z,{ref:this.sequenceInputRef,enableAdvancedSettings:!1,initialUpstream:800})
switch(this.state.createType){case y:return a.createElement(RawBasesInput,{ref:this.sequenceInputRef})
case _:return a.createElement(FileInput,{ref:this.sequenceInputRef})
case C:return a.createElement(ChromosomeInput,{ref:this.sequenceInputRef})
case R:return a.createElement(T.Z,{ref:this.sequenceInputRef})
default:throw new Error}})()))}}const N=CreateSequenceStep},457112:(e,t,n)=>{n.d(t,{Z:()=>C})
var a=n(250965),i=n.n(a),r=n(989526),s=n(531041),o=n(468943),l=n(659009),c=n(699418),d=n(351893),u=n(974913),m=n(103593),p=n(102176),h=n(59860),E=n(87209),S=n(205986),T=n(771398),g=n(463369),f=n(187199),I=n(870707),A=n(329786)
const{HR_TEMPLATE_CREATE_TYPE:y,HR_TEMPLATE_STEP:_}=l
class HRTemplateModal extends r.Component{constructor(e){super(e)
this.updateCreateType=e=>{this.setState({createType:e.target.value})}
this.handleChangeSettings=e=>{this.setState({settings:e})}
this.submit=()=>{this.setState({loading:!0})
E.$Z();(()=>{switch(this.state.createType){case y.CLONE:return T.ty({url:`/1/api/sequences/${this.props.sequence.id}/versions/${this.props.sequence.activeVersionId}/clone`,data:{folder:this.props.sequence.folderId,name:`${this.props.sequence.name} (HR template)`}}).then((e=>c.ZP.get().openFolderItem(e.id,{open:!0,source:"hr-template-design"})))
case y.MODIFY:return i().Deferred().resolve({id:this.props.sequence.id}).promise()
default:return}})().done((e=>{const t=c.ZP.get().get(e.id),n=t.model(),a=s.default.object([[_.INTRODUCE_EDITS,n.getActiveVersionId()]])
f.Z.create(n,{sequence:n.id,pam:this.state.settings.pam,genome:this.state.settings.genome,guide:"",step:_.INTRODUCE_EDITS,armRegion:{start:null,end:null},savedVersions:a})
t.buffers().addTab(new I.Z({sequence:n}))
o.j("hr_template","began_hr_template_design")
this.props.onRequestClose()})).fail(u.ZP.notifyError).always((()=>{this.setState({loading:!1})
E.Cp()}))}
this.renderCreateTypeInput=(e,t)=>r.createElement("div",{className:"radio"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"design-type",value:e,checked:this.state.createType===e,onChange:this.updateCreateType}),t))
const{analysisLoading:t}=d.Z.getState(),n=d.Z.getAnalysesForSequence(e.sequence.id)
let a=y.CLONE;(!t&&s.default.isEmpty(n)||e.useCurrentSequence)&&(a=y.MODIFY)
this.state={loading:!1,createType:a,settings:{pam:g.Z.get("pam"),genome:e.initialGenome||g.Z.get(g.Z.KEYS.GENOME)}}}render(){return r.createElement(S.ZP,{enableRedesign:!1,title:"Design HR Template",onRequestSubmit:this.submit,onRequestClose:this.props.onRequestClose,buttons:[{text:"Cancel",cancel:!0,disabled:this.state.loading},{text:this.state.loading?"Creating...":"Create",submit:!0,disabled:this.state.loading}]},r.createElement(A.Z,{settings:this.state.settings,onChange:this.handleChangeSettings}),this.props.useCurrentSequence?r.createElement(h.Z,null,r.createElement(m.Z,{className:"col-md-offset-2",md:10},r.createElement("p",null,"The HR Template will be created by modifying the imported sequence."))):r.createElement(p.Z,null,r.createElement(h.Z,null,r.createElement(m.Z,{className:"text-right",sm:3},null),r.createElement(m.Z,{sm:8},this.renderCreateTypeInput(y.CLONE,"Create a copy of this sequence"),this.renderCreateTypeInput(y.MODIFY,"Modify this sequence")))))}}HRTemplateModal.defaultProps={useCurrentSequence:!1}
const C=HRTemplateModal},111253:(e,t,n)=>{n.d(t,{Z:()=>u})
var a=n(989526),i=n(468943),r=n(699418),s=n(974913),o=n(87209),l=n(205986),c=n(426746),d=n(457112)
class ImportSequenceForHRTemplateModal extends a.Component{constructor(){super(...arguments)
this.state={sequence:null,loading:!1}
this.sequenceStepRef=a.createRef()
this._handleSubmit=()=>{const e=this.sequenceStepRef.current.createSequence()
if(e){this.setState({loading:!0})
o.$Z()
Promise.resolve(e).then((e=>this._isMounted?r.ZP.get().openFolderItem(e,{open:!0,source:"crispr-analysis"}):void 0)).then((e=>{if(this._isMounted&&e){const t=e.model(),n=this.sequenceStepRef.current.getGenome()
this.setState({sequence:{id:t.id,name:t.name(),activeVersionId:t.getActiveVersionId(),folderId:t.folder().api_identifier},genome:n?n.ensemblName:null})
i.j("hr_template","imported_sequence_from_modal")}})).catch(s.ZP.notifyError).finally((()=>{this.setState({loading:!1})
o.Cp()}))}}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){if(!this.state.sequence){const e=[{text:this.state.loading?"Importing...":"Import",submit:!0,disabled:this.state.loading}]
return a.createElement(l.ZP,{enableRedesign:!0,title:"Import sequence",onRequestSubmit:this._handleSubmit,onRequestClose:this.props.onRequestClose,buttons:e},a.createElement(c.Z,{ref:this.sequenceStepRef}))}return a.createElement(d.Z,{onRequestClose:this.props.onRequestClose,sequence:this.state.sequence,initialGenome:this.state.genome,useCurrentSequence:!0})}}const u=ImportSequenceForHRTemplateModal},839004:(e,t,n)=>{n.d(t,{SK:()=>getCDRAnnotations,hh:()=>getNumbering,yQ:()=>getPostTranslationalModifications})
var a=n(771398),i=n(8747)
async function getNumbering(e,t){return await i.s0({url:"/1/api/proteins:number-as-antibody",data:{aaSequences:e,scheme:t}})}async function getCDRAnnotations(e,t){return await i.s0({url:"/1/api/proteins:identify-antibody-cdrs",data:{aaSequences:e,definition:t}})}async function getPostTranslationalModifications(e){return await(0,a.s0)({url:"/1/api/proteins:identify-ptms",data:{aaSequences:e}})}},119897:(e,t,n)=>{n.d(t,{HG:()=>validateSequencesForBulkCodonOptimization,RV:()=>bulkBackTranslateOrCodonOptimize,fB:()=>optimizeCodons})
var a=n(76101),i=n(771398),r=n(8747)
function optimizeCodons(e,t,n,a=[],r=[],s=!1,o=!1,l={value:20,error:""},c={value:200,error:""},d=[]){return i.s0({url:"/1/api/optimize-codons",data:{bases:e,organism:t,gcLevel:n,protectedRegions:a,cutsitesToAvoid:r,minimizeThymine:s,hairpinParams:o?{stem:l.value,window:c.value}:null,patternsToMinimize:d}})}function validateSequencesForBulkCodonOptimization(e){return i.s0({url:"/1/api/validate-sequences-for-bulk-codon-optimization",data:{sequenceIds:e}})}async function bulkBackTranslateOrCodonOptimize(e,t,n){const i={folderId:t.sequencesFolderId,organism:t.selectedOrganism,gcLevel:t.selectedGCLevel,cutsitesToAvoid:t.cutsitesToAvoid,minimizeThymine:t.uridineDepletion,hairpinParams:t.avoidHairpins?{stem:t.hairpinStem.value,window:t.hairpinWindow.value}:null,existingWorklistId:t.existingWorklistId,newWorklistName:t.newWorklistName,tagSchemaId:t.tagSchema?t.tagSchema.id:null,patternsToMinimize:(0,a.i8)(t.patternsToReduce)}
return await r.s0({url:n?"/1/api/bulk-back-translate":"/1/api/bulk-codon-optimize",data:n?{...i,proteinIds:e}:{...i,sequenceIds:e}})}},279785:(e,t,n)=>{n.d(t,{Aq:()=>getProvidersForEnzymes,Dc:()=>formatBufferName,Eu:()=>getCompatibleEnzymeIds,H5:()=>doesEnzymeListContain,Pg:()=>getProviderList,Rt:()=>getEnzyme,UG:()=>isDoubleCutterEnzyme,Uk:()=>isEnzymeListId,VH:()=>getProvider,fW:()=>getBaseProvider,kh:()=>getCuts,p_:()=>getPreferredProviderForEnzyme,sD:()=>getEnzymeByName,yX:()=>calculateOptimalBuffers})
var a,i=n(64558),r=n(531041),s=n(675649),o=n(48047),l=n(99312),c=n(199534),d=n(973606)
let u={}
const getEnzyme=e=>u[e],getProviderList=e=>d.ZP.providerLists.find((({id:t})=>t===e))
function _findProvider(e,t){for(const n of d.ZP.baseProviders)for(const a of[n,n.subProvider])if((null==a?void 0:a.name)===e)return t(a,n)
return null}const getBaseProvider=e=>_findProvider(e,((e,t)=>t)),getProvider=e=>_findProvider(e,((e,t)=>e)),getCompatibleEnzymeIds=e=>getEnzyme(e).compatible
function _getActivity(e,t,n){var a
const i=null===(a=e.providedEnzymes[t])||void 0===a?void 0:a.activities[n],r=null==i?null:/^\d+(.)?\d*/.exec(i)
return null==i||null==r?-1/0:parseFloat(r[0])}function calculateOptimalBuffers(e,t){const n=e.map((e=>getEnzyme(e))),a=getProvider(t),i=r.default.object(a.buffers.filter((e=>n.every((n=>_getActivity(n,t,e)>=50)))).map((e=>[e,s.Sm(n.map((n=>_getActivity(n,t,e))))]))),o=Math.max(...Object.values(i))
return a.buffers.filter((e=>i[e]===o))}function getPreferredProviderForEnzyme(e,t){const n=e.map((e=>getEnzyme(e)))
if(null!=t){const e=getProvider(t)
if(n.some((e=>Object.keys(e.providedEnzymes).includes(t))))return e
const a=getBaseProvider(t)
if(n.some((e=>Object.keys(e.providedEnzymes).includes(a.name))))return a}for(const e of d.ZP.baseProviders)for(const t of[e,e.subProvider])if(null!=t&&n.some((e=>Object.keys(e.providedEnzymes).includes(t.name))))return t
throw new Error(`No viable provider found for enzymes: ${e}`)}function getProvidersForEnzymes(e){const t=e.map((e=>getEnzyme(e))),n=[]
for(const e of d.ZP.baseProviders)for(const a of[e,e.subProvider])null!=a&&t.some((e=>Object.keys(e.providedEnzymes).includes(a.name)))&&n.push(a)
return n}let m={}
const p=l.isBrowser?null===(a=window.bootstrap)||void 0===a?void 0:a.enzyme_lists:void 0
!function _buildLookup(e,t){u=(0,i.Pe)(e,(e=>e.id))
m={}
const n={}
for(const e of d.ZP.baseProviders)n[e.name]={}
for(const t of e)for(const e of Object.keys(t.providedEnzymes)){n[getBaseProvider(e).name][t.id]=t}for(const e of d.ZP.providerLists){const t={}
for(let n=0;n<e.baseProviders.length;n++){const a=e.baseProviders[n]
for(const e of[a,a.subProvider])null!=e&&(t[e.name]=n)}const enzymeRank=e=>{const n=Object.keys(e.providedEnzymes).map((e=>t[e]))
return Math.min(...n)},isLowestRankIso=e=>!e.isoschizomers.map((e=>getEnzyme(e))).some((t=>enzymeRank(t)<enzymeRank(e)))
m[e.id]={}
for(const t of e.baseProviders){const a=n[t.name]
for(const t of Object.keys(a)){const n=a[t]
e.dedup&&!isLowestRankIso(n)||(m[e.id][n.id]=!0)}}}for(const{id:e,members:n}of t){m[e]={}
for(const t of n)m[e][t]=!0}}(d.ZP.enzymes,null!=p?p:[])
const isEnzymeListId=e=>null!=m[e],doesEnzymeListContain=(e,t)=>{var n,a
return null!==(a=null===(n=m[e])||void 0===n?void 0:n[t])&&void 0!==a&&a}
function formatBufferName(e){return"MultiCore"===e?"MULTI":e}const isDoubleCutterEnzyme=e=>null!=e.cut2
function getCuts(e,t,n,a,i,s=null){"matchingRegion"in e||(0,o.digestableEnzyme)(e)
const l=(0,c.y)(e.matchingRegion,t,n,a,i,{allowedChars:[],range:s,includeMatch:!1}),d=t.length
return r.default.chain(l).map((t=>function cutFunc(t){let n
if(0===t.strand)n=t.index+e.matchingCut
else if(1===t.strand)n=t.index+e.matchingCut
else{if(-1!==t.strand)throw new Error("Invalid strand")
n=t.index+e.matchingRegion.length-e.matchingCut-e.offset}return{position:(n+d)%d,strand:t.strand}}(t))).sortBy((e=>e.position)).uniq(!0,(e=>e.position)).value()}function getEnzymeByName(e){const t=d.ZP.enzymes.filter((t=>t.name.toLowerCase()===e.trim().toLowerCase()))
return 1===t.length?t[0]:null}},178132:(e,t,n)=>{n.d(t,{FE:()=>FeatureLibraries,Hn:()=>FeatureLibrary,L0:()=>Feature})
var a=n(440281),i=n.n(a),r=n(959415),s=n(346297)
class Feature extends r.Hn{defaults(){return{...super.defaults(),name:null,bases:null,color:"black",library_id:null,feature_type:null,match_type:null}}name(){return this.get("name")}color(){return this.get("color")}bases(){return this.get("bases")}featureType(){return this.get("featureType")}matchType(){return this.get("match_type")}bulkUrl(){return`${s.pI}${this.get("library_id")}/features/`}url(){const e=this.bulkUrl()
return null!=this.get("id")?e+this.get("id"):e}validate(e,t){return e.name?e.bases?void 0:"A feature must specify bases.":"A feature must have a valid name."}}class FeatureLibrary extends i().Model{url(){return null!=this.get("id")?s.pI+this.get("id"):s.pI}defaults(){return{writable:!0,admin:!0,owner:!0,features:new r.FE({model:Feature})}}initialize(){this.set("features",new r.FE(this.get("features"),{model:Feature}))}parse(e){e.features=new r.FE(e.features,{model:Feature})
return e}}class FeatureLibraries extends i().Collection{static initClass(){this.prototype.model=FeatureLibrary
this.prototype.url=s.pI}}FeatureLibraries.initClass()},346297:(e,t,n)=>{n.d(t,{_q:()=>i,pI:()=>a,xc:()=>r})
const a="/1/api/feature-libraries/"
var i,r
!function(e){e.NUCLEOTIDE="nucleotide"
e.PROTEIN="protein"}(i||(i={}))
!function(e){e.APE="ape"
e.CSV="csv"}(r||(r={}))},749183:(e,t,n)=>{n.d(t,{FR:()=>createFromAnnotation,Tz:()=>createFeature,s1:()=>formatFeatureLibraryName})
var a=n(48047),i=n(178132),r=n(788836)
function formatFeatureLibraryName(e){return e.owner_handle===r.Z.currentUser().handle?e.name:`${e.owner_handle} / ${e.name}`}function createFeature({name:e,featureType:t,bases:n,color:a,matchType:r,libraryId:s}){return new i.L0({name:e,feature_type:t,bases:n,color:a,library_id:s,match_type:r}).save()}function createFromAnnotation(e,t,n){let i=a.slice(t.get("dna").forward(),e.start(),e.end(),t.circular());-1===e.strand()&&(i=a.revcomp(i,t.get("_sequence").baseTable()))
return createFeature({name:e.name(),featureType:e.annotationType(),bases:i,color:e.color(),libraryId:n,matchType:"nucleotide"})}},703764:(e,t,n)=>{n.d(t,{Qu:()=>getFeatureLayers,eo:()=>getModelLayers,kg:()=>getMax,xb:()=>getLayers})
var a=n(531041),i=n(132814)
function getModelLayers(e,t){return getLayers(e,t).layers}function getMax(e,t){return getLayers(e,t).max}function getLayers(e,t={}){const n={startFn:e=>({model:e,pos:e.layerStart(t.sequence)}),endFn:e=>({model:e,pos:e.layerEnd(t.sequence)}),top:!1,sequence:null,...t},{startFn:r,endFn:s,top:o,sequence:l}=n
let c=[...e]
if(null!=l){const e=l.length()
c=a.default.sortBy(c,(t=>-i.length(t.start(),t.end(),e)))}return getFeatureLayers(c,r,s,o)}function getFeatureLayers(e,t,n,i){const r={},s={},o=[],l=[],c=[],d={},u=[],m=a.default.sortBy(e.map((e=>t(e))),"pos")
for(;m.length;)if(m.length&&(!u.length||m[0].pos<u[0].pos||0===u[0].pos)){let e
const{model:i,pos:p}=m.shift()
let h=o.indexOf(null)
if(-1===h){h=o.length
o.push(i)
e=!0}else{o[h]=i
e=!1}const E=r[h],S=s[h]
null==E&&(r[h]=i)
s[h]=i
const T=n(i,{layer:h})
if(p<T.pos){l.push({model:i,layer:h})
d[i.cid]=null!=E?E:i
null!=S&&(d[S.cid]=i)
const e=a.default.sortedIndex(u,T,(e=>0===e.pos?1/0:e.pos))
u.splice(e,0,T)}else if(0===T.pos||null!=E&&T.pos<=t(E).pos){l.push({model:i,layer:h})
d[i.cid]=E||i
null!=S&&(d[S.cid]=i)}else{c.push(i)
e?o.pop():o[h]=null
r[h]=E
s[h]=S
d[i.cid]=i}}else{const e=u.shift(),t=o.indexOf(e.model)
o[t]=null}let p=o.length-1
for(const e of c)l.push({model:e,layer:++p})
if(!i)for(const e of l)e.layer=p-e.layer
return{max:p,layers:l,siblingMap:d}}},789385:(e,t,n)=>{n.d(t,{I:()=>g,Z:()=>f})
var a=n(769784),i=n(989526),r=n(348920),s=n(675649),o=n(467607),l=n(751512),c=n(91092),d=n(697134),u=n(692013),m=n(129270),p=n(271359),h=n(36424)
const E=u.mM.create({banner:{backgroundColor:p.sB,display:"flex",alignItems:"center"},warningContainer:{flex:1},icon:{margin:"auto",display:"block",height:"15px"},message:{...m.hv,display:"inline-block"},messageContainer:{flex:10,padding:"7px 0px"},button:{":hover":{color:p.pp,pointer:"cursor"}}}),S=function WarningBanner({message:e,collapsed:t,onToggleCollapsed:n}){return i.createElement("div",{className:(0,u.iv)(E.banner)},i.createElement("div",{className:(0,u.iv)(E.warningContainer)},i.createElement(h.Z,{icon:"warning",className:(0,u.iv)(E.icon),color:p.ud})),i.createElement("div",{className:(0,u.iv)(E.messageContainer)},i.createElement("span",{className:(0,u.iv)(E.message)},e)),void 0!==t&&i.createElement("div",{className:(0,u.iv)(E.warningContainer)},i.createElement(h.Z,{icon:t?"arrow-down":"arrow-up",className:(0,u.iv)(E.icon,E.button),color:p.TG,onClick:n})))}
var T=n(854185)
const g=a.Ps`
  query ContainingSequencesQuery($id: StrictString!) @skipAudit @engComponent(name: MOLBIO) {
    sequence(id: $id) {
      ... on SequenceNode {
        id
        containingSequences {
          id
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,c.f)("InaccessibleInfo").fragment}
`
const f=function PartsWarningBanner({sequenceId:e}){const[t,n]=(0,T.Z)(o.QT.SHOULD_COLLAPSE_PARTS_WARNING)
return r.ZP.MOLBIO_ENABLE_PARTS_WARNING_BANNER?i.createElement(l.ZP,{query:g,variables:{id:e},renderLoading:()=>i.createElement("div",null)},(e=>{if(!(0,d.CZ)(e.sequence)){const a=e.sequence.containingSequences.length
if(0===a)return i.createElement("div",null)
const o=(0,s._6)(a,"that","those"),l=(0,s._6)(a,"sequence"),c=r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?` Base edits are not allowed on sequences that are contained by other sequences. To change bases, please make a copy of this sequence instead, or unlink it from the containing ${(0,s._6)(a,"sequence")}.`:` Editing this sequence will change ${o} ${a} containing ${l}, and any additional sequences that reference ${o} containing ${l} as ${(0,s._6)(a,"a part","parts")}.`,d=`This sequence is referenced as a part in ${a} containing ${l}.${t?"":c}`
return i.createElement(S,{message:d,collapsed:t,onToggleCollapsed:()=>{n(!t)}})}return i.createElement("div",null)})):i.createElement("div",null)}},806326:(e,t,n)=>{n.d(t,{QZ:()=>a,dO:()=>h,p8:()=>foreignObjectRenderingEnabled,pz:()=>p})
var a,i,r=n(675649),s=n(176792),o=n(601771),l=n(682170),c=n(612092),d=n(893424),u=n(459830),m=n(432128)
!function(e){e.ALIGNMENTS_BASES_TEXT_USE_GEOMETRIC_PRECISION="ALIGNMENTS_BASES_TEXT_USE_GEOMETRIC_PRECISION"
e.ALIGNMENTS_DISABLE_FOREIGN_OBJECT_RENDERING="ALIGNMENTS_DISABLE_FOREIGN_OBJECT_RENDERING"}(a||(a={}))
!function(e){e.DISABLE_FOREIGN_OBJECT_RENDERING="DISABLE_FOREIGN_OBJECT_RENDERING"}(i||(i={}))
function foreignObjectRenderingEnabled(e={forAlignment:!1}){const t=r.yL&&!m.Z.get(i.DISABLE_FOREIGN_OBJECT_RENDERING)
return e.forAlignment?t&&!m.Z.get(a.ALIGNMENTS_DISABLE_FOREIGN_OBJECT_RENDERING):t}const p={[u.SequenceSubtype.SEQUENCE]:d.Z,[u.SequenceSubtype.RNA_SEQUENCE]:l.Z,[u.SequenceSubtype.DNA_OLIGO]:o.Z,[u.SequenceSubtype.RNA_OLIGO]:o.Z},h={[u.SequenceSubtype.SEQUENCE]:s.Z,[u.SequenceSubtype.RNA_SEQUENCE]:c.Z}},948510:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(85758),i=n.n(a)
const r=-Math.PI/2
function d3SVGArcInnerRadius(e){return e.innerRadius}function d3SVGArcOuterRadius(e){return e.outerRadius}function d3SVGArcStartAngle(e){return e.startAngle}function d3SVGArcEndAngle(e){return e.endAngle}function arcMaker(e,t){return function(){let n=d3SVGArcInnerRadius,a=d3SVGArcOuterRadius,s=d3SVGArcStartAngle,o=d3SVGArcEndAngle
function arc(...i){let l,c,d=n.apply(this,i)
const u=a.apply(this,i),m=s.apply(this,i)+r,p=o.apply(this,i)+r
if(p<m){l=p
c=m}else{l=m
c=p}const h=Math.min(Math.PI/10,10/d)
let E,S,T,g,f,I,A
if(1===e){E=Math.max(l,c-h)
T=E-l
S=c
g=Math.cos(l)
I=Math.sin(l)
f=Math.cos(E)
A=Math.sin(E)}else{E=Math.min(c,l+h)
T=c-E
S=l
g=Math.cos(E)
I=Math.sin(E)
f=Math.cos(c)
A=Math.sin(c)}const y=Math.cos(S),_=Math.sin(S),C=T<Math.PI?"0":"1"
let R,N
switch(t){case"arrow":R=d
N=u
d+=(u-d)/3
break
case"triangle":R=d
N=(d+u)/2
break
default:R=d
N=u}if(d){const t=R*f,n=R*A,a=N*y,i=N*_,r=u*g,s=u*I
let o,l
const c=`A${u},${u} 0,${C},1 ${u*f},${u*A}`,m=`L${d*f},${d*A}`,p=`A${d},${d} 0,${C},0 ${d*g},${d*I}`
if(1===e){o=`M${r},${s}`
l=`L${a},${i} L${t},${n}`
return`${o} ${c} ${l} ${m} ${p} Z`}o=`M${R*g},${R*I}`
l=`L${a},${i} L${r},${s}`
return`${o} ${l} ${c} ${m} ${p} Z`}return`M${u*g},${u*I} A${u},${u} 0,${C},1 ${u*f},${u*A} L0,0Z`}arc.innerRadius=function(e){if(!arguments.length)return n
n=i().functor(e)
return arc}
arc.outerRadius=function(e){if(!arguments.length)return a
a=i().functor(e)
return arc}
arc.startAngle=function(e){if(!arguments.length)return s
s=i().functor(e)
return arc}
arc.endAngle=function(e){if(!arguments.length)return o
o=i().functor(e)
return arc}
return arc}}const s={forwardArc:arcMaker(1,"triangle"),backwardArc:arcMaker(-1,"triangle"),forwardArrowArc:arcMaker(1,"arrow"),backwardArrowArc:arcMaker(-1,"arrow"),arc:i().svg.arc,linearArc:function linearArc(){let radius=e=>e.radius,startAngle=e=>e.startAngle,endAngle=e=>e.endAngle,reverse=e=>e.reverse
function arc(...e){let t
const n=radius.apply(this,e)
let a=startAngle.apply(this,e)+r,i=endAngle.apply(this,e)+r
const s=reverse.apply(this,e)
if(i<a){t=a
a=i
i=t}t=i-a
const o=t<Math.PI?"0":"1"
let l="1"
if(s){l="0";[i,a]=[a,i]}return`M${n*Math.cos(a)},${n*Math.sin(a)}A${n},${n} 0 ${o},${l} ${n*Math.cos(i)},${n*Math.sin(i)}`}arc.reverse=function(e){if(!arguments.length)return reverse
reverse=i().functor(e)
return arc}
arc.radius=function(e){if(!arguments.length)return radius
radius=i().functor(e)
return arc}
arc.startAngle=function(e){if(!arguments.length)return startAngle
startAngle=i().functor(e)
return arc}
arc.endAngle=function(e){if(!arguments.length)return endAngle
endAngle=i().functor(e)
return arc}
return arc}}},55363:(e,t,n)=>{n.d(t,{AS:()=>getCirclePoint,Sd:()=>axisSpacing,aE:()=>getArcForStrand,x_:()=>getTextAnchorForCircularText})
var a=n(531041),i=n(948510),r=n(418955)
function axisSpacing(e,t=8){const n=e/t,i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)+1)
return a.default.chain([i/4,i/2,i]).filter((e=>e%1==0)).min((e=>Math.abs(e-n))).value()}function getCirclePoint(e,t,n,a){return(0,r.op)(e,a,(0,r._O)(t,n))}function getTextAnchorForCircularText(e,t){return t.x>e.x?"start":"end"}function getArcForStrand(e){switch(e){case 0:return i.Z.arc()
case-1:return i.Z.backwardArc()
default:return i.Z.forwardArc()}}},977322:(e,t,n)=>{n.d(t,{Vj:()=>getAnnotationPathParams,aU:()=>getAnnotationLabelData,zW:()=>formatAnnotationDisplayName})
var a=n(436208),i=n(808844)
function getAnnotationPathParams(e,t,n,a){let i="",r="",s="",o="",l="",c="crispEdges",d="crispEdges"
const{start:u,end:m,width:p,height:h,tipWidth:E}=e,S=h/4
if(u>=t)if(-1===a){r+=`M ${E} ${h} L 0 ${h/2} L ${E} 0 `
s+=`M ${E} 0 `
o+=`M ${E} ${h} `
i+=r
c="geometricPrecision"}else{r+=`M 0 ${h} L 0 0 `
s+="M 0 0 "
o+=`M 0 ${h} `
i+=r}else{r+=`M 0 ${h} L 4 ${h-S} L 0 ${h-2*S} L 4 ${h-3*S+1} L 0 0 `
s+="M 0 0 "
o+=`M 0 ${h} `
i+=r
c="geometricPrecision"}if(m<=n)if(1===a){l+=`M ${p-E} 0 L ${p} ${h/2} L ${p-E} ${h} `
s+=`L ${p-E} 0 `
o+=`L ${p-E} ${h} `
i+=`L ${p-E} 0 L ${p} ${h/2} L ${p-E} ${h} `
d="geometricPrecision"}else{l+=`M ${p} 0 L ${p} ${h} `
s+=`L ${p} 0 `
o+=`L ${p} ${h} `
i+=`L ${p} 0 L ${p} ${h} `}else{l+=`M ${p} 0 L ${p-4} ${h-3*S+1} L ${p} ${h-2*S} L ${p-4} ${h-S} L ${p} ${h} `
s+=`L ${p} 0 `
o+=`L ${p} ${h} `
i+=`L ${p} 0 L ${p-4} ${h-3*S+1} L ${p} ${h-2*S} L ${p-4} ${h-S} L ${p} ${h} `
d="geometricPrecision"}return{fillD:i,strokeLeftD:r,strokeRightD:l,strokeMiddleD:`${s}${o}`,strokeLeftRender:c,strokeRightRender:d,strokeMiddleRender:"crispEdges"}}function getLabelLocations(e,t,n,a,i,r,s,o,l){let c
const d=Math.max(e+50,Math.max(i,100)),u=[]
if(n<d){c=(n-t-e)/2;-1===a&&(c+=t)
u.push(c)}else{c=(d-t-e)/2;-1===a&&(c+=t)
let i=n-t
const m=r.width(l)
if(null!=s&&null!=o){c+=Math.max(0,Math.floor((r.width(s)-m-c)/d)*d)
i=Math.min(r.width(o)-m,i)}for(;c+e<i;){u.push(c)
c+=d}}return u}function formatAnnotationDisplayName(e,t){return t<e.length?t<5?"":(0,i.fk)(e,t,i.U5.MIDDLE):e}function getAnnotationLabelData(e,t,n,i,r,s,o,l,c,d,u){var m
const{width:p,tipWidth:h,arrowsOffset:E,arrowSpacing:S,arrowWidth:T,start:g}=e,f=E+S+T
let I=null!==(m=e.forceName)&&void 0!==m?m:i
const A=t.width(I.length),y=A+2*f<p-h
let _=[],C=!0
if(y)_=getLabelLocations(A,h,p,r,o,n,l,c,g)
else if(s===a.LINEAR_LAYER_FULL){const e=p-h-2*f
I=formatAnnotationDisplayName(I,e/t.charWidth())
_=getLabelLocations(e,h,p,r,o,n,l,c,g)}else{C=!1
switch(u){case"after":_.push(p+d)
break
case"before":_.push(-d-A)}}return{displayName:I,labelData:_,spaceInside:y,inside:C}}},517944:(e,t,n)=>{n.d(t,{KC:()=>ItemSource,Sp:()=>InfiniteScroller,cD:()=>ScrollData,h3:()=>InfiniteScrollbar})
var a=n(64558),i=n(440281),r=n.n(i),s=n(85758),o=n.n(s),l=n(250965),c=n.n(l),d=n(531041),u=n(675649),m=n(17086)
class ItemSource extends r().Model{defaults(){return{length:0}}length(){return this.get("length")}estimatedHeight(){return 100}afterAttach(){}}class ScrollData extends r().Model{defaults(){return{position:0,endPosition:0,size:10,enabled:!1}}setSize(e){this.set("size",e)}setPosition(e,t){this.set("position",Math.max(0,e),t)}disable(){this.set("enabled",!1)}}class InfiniteScrollbar extends r().View{static initClass(){this.prototype.tagName="div"
this.prototype.className="infinite-scrollbar"}constructor(e){super(e)}initialize(e){d.default.defaults(e,{fullHeight(){return this.tabstate.get("bufferViewLayout").get("height")}})
this.tabstate=e.tabstate
this.fullHeight=e.fullHeight}registerListeners(){this.listenTo(this.model,"change:position change:endPosition change:size",(()=>{this.updateThumb()}))}updateThumb(){const e=this.model.get("position"),t=this.model.get("size"),n=this.model.get("endPosition")-e+1
n>=t?this.$thumb.hide():this.$thumb.show()
const a=this.fullHeight(),i=a/t*n,r=a-Math.max(5-i,0),s=a-i,l=Math.min(s,e/t*r),c=`${l}px`,d=`${i}px`
o().select(this.el).datum({x:0,y:l})
this.$thumb.css("top",c)
this.$thumb.css("height",d)
this.$thumb.css("min-height","5px")}handleDrag(e){this.setPosition(e,o().event.y)}setPosition(e,t){const n=this.$el.height(),i=this.model.get("size")
t=(0,a.uZ)(0,n,t)
e.y=t
const r=(0,a.uZ)(0,i-1,t/n*i)
this.model.setPosition(r,{who:this.cid})}posFromY(e){const t=this.$el.height(),n=this.model.get("size")
e=(0,a.uZ)(0,t,e)
return(0,a.uZ)(0,n-1,e/t*n)}handleDragEnd(e){this.$el.removeClass("drag")}handleDragStart(e){this.$el.addClass("drag")}render(){this.registerListeners()
this.$thumb=c()('<div class="infinite-scrollthumb"></div>')
const e=o().behavior.drag().origin((e=>{const[t,n]=Array.from(o().event.touches?o().touches(this.el)[0]:o().mouse(this.el)),a=this.posFromY(n)
this.model.get("position")<=a&&a<=this.model.get("endPosition")+1||this.setPosition(e,n)
return e})).on("drag",(e=>{this.handleDrag(e)})).on("dragstart",(e=>{this.handleDragStart(e)})).on("dragend",(e=>{this.handleDragEnd(e)}))
o().select(this.el).datum({x:0,y:0}).call(e)
this.updateThumb()
this.$el.append(this.$thumb)
return this}}InfiniteScrollbar.initClass()
class InfiniteScroller extends r().View{static initClass(){this.prototype.tagName="div"
this.prototype.className="infinite-scroller draggable-svg-container"}constructor(e){super(e)}events(){return{scroll:"handleScroll",mousemove:"saveMouseCoordinates"}}initialize(e){this.height=3e4
this.tabstate=e.tabstate
this.mapstate=e.mapstate
this.itemSource=e.itemSource
this.scrollData=e.scrollData
this.spacing=e.spacing||0
this.topIndex=null
this.listenTo(this.scrollData,"change:position",this.positionHandler)
this.repositionRequestedOnAnimFrame=!1
this.renderedItems=[]
this.indexMap={}
this.itemsToRemove=[]
this.reserveIndexMap={}
this.lastMouseY=null
this.lastMouseX=null}canReuseItems(){return null!=this.itemSource.updateItem}items(){return this.renderedItems.map((e=>e.item()))}reserveItem(e){const t=this.renderedItems.splice(e,1)[0]
this.canReuseItems()&&t.$el.css("display","none")
delete this.indexMap[t.index()]
this.reserveIndexMap[t.index()]=t
this.itemsToRemove.push(t)}scrollTop(e){this.$el.scrollTop(e)}grabItem(e=null){let t,n=null
if(null!=e){n=this.reserveIndexMap[e]||null
t=d.default.indexOf(this.itemsToRemove,n)}else{n=this.itemsToRemove[0]
t=0
e=n.index()}if(null!=n){this.itemsToRemove.splice(t,1)
delete this.reserveIndexMap[e]}return n}makeItem(e){const{index:t}=e
let n=null
if(this.itemsToRemove.length&&this.canReuseItems()){n=this.grabItem(t)
let a=!1
if(null==n){n=this.grabItem()
a=!0}const i=m.U2("noRerender",!1)
!a&&i||this.itemSource.updateItem(n.item(),t)
n.update(e)
n.$el.css("display","")}else{const a=d.default.extend({item:this.itemSource.getItem(t),spacing:this.spacing},e)
n=new InfiniteItem(a)
this.listenTo(n,"change:height",(()=>{this.repositionOnAnimFrame()}))}return n}flushReservedItems(){for(;this.itemsToRemove.length;)this.grabItem().remove()}saveMouseCoordinates(e){this.lastMouseX=e.pageX
this.lastMouseY=e.pageY}reposition(e=!0){let t=null
for(const e of this.renderedItems){null!=t&&e.top(t.bottom())
t=e}e&&this.addItems()
this.repositionRequestedOnAnimFrame=!1}repositionOnAnimFrame(){if(!this.repositionRequestedOnAnimFrame){this.repositionRequestedOnAnimFrame=!0
requestAnimationFrame((()=>{this.reposition()}))}}positionHandler(e,t,n){if(n.who!==this.cid){let e=this.scrollData.get("position")
const t=e%1
e=Math.floor(e)
this.jumpToIndex(e,t)}}firstRendered(){return this.renderedItems.length>0?this.renderedItems[0]:null}lastRendered(){const{length:e}=this.renderedItems
return e>0?this.renderedItems[this.renderedItems.length-1]:null}scrollToIncludeIndex(e){if(e<this.firstRendered().index())this.jumpToIndex(e,0)
else if(e===this.firstRendered().index())this.$el.scrollTop(this.firstRendered().top())
else if(e===this.lastRendered().index())this.scrollTop(this.lastRendered().bottom()-this.$el.height())
else if(e>=this.lastRendered().index()){this.$container.height(this.height=15e3)
this.bootstrapBottom({index:e,bottomAnchor:1e4})}}setPosition(){const e=this.$el.scrollTop(),t=(e-this.firstRendered().top())/this.firstRendered().height(),n=Math.max(0,this.firstRendered().index()+t),a=(e+this.$el.height()-this.lastRendered().bottom())/this.lastRendered().height(),i=Math.min(this.itemSource.length(),this.lastRendered().index()+a)
this.scrollData.setPosition(n,{who:this.cid})
return this.scrollData.set("endPosition",i,{who:this.cid})}jumpToIndex(e,t=0){if(e in this.indexMap){this.scrollTop(this.indexMap[e].top()+this.indexMap[e].height()*t)
this.setPosition()}else{this.$container.height(this.height=15e3)
m.gW({noRerender:!0},this,(function(){this.bootstrap({index:e,topAnchor:1e4})
this.scrollTop(this.firstRendered().top()+this.firstRendered().height()*t)
this.handleScroll()}))}}setTopIndex(e){this.topIndex=e
return e}pushDown(e){this.firstRendered().setTopAnchor(this.firstRendered().top()+e)
this.reposition(!1)
this.scrollTop(this.$el.scrollTop()+e)}pullTo(e){const t=e-this.firstRendered().top()
this.firstRendered().setTopAnchor(e)
this.reposition(!1)
this.scrollTop(this.$el.scrollTop()+t)}addItems(){let e,t,n=this.$el.scrollTop(),a=n+this.$el.height(),i=__guard__(this.firstRendered(),(e=>e.top())),r=__guard__(this.lastRendered(),(e=>e.bottom()))
if(null==i)throw new Error("InfiniteScroller: No item to anchor to.")
const s=this.topIndex,o=Math.floor((i-n)/this.itemSource.estimatedHeight()),l=this.clampIndex(this.topIndex-o)
for(;null!=this.firstRendered()&&this.firstRendered().bottom()<n;){this.reserveItem(0)
this.setTopIndex(__guard__(this.firstRendered(),(e=>e.index())))}for(;null!=this.lastRendered()&&this.lastRendered().top()>a;)this.reserveItem(this.renderedItems.length-1)
if(null==this.firstRendered()){this.bootstrap({index:l,topAnchor:n})
n=this.$el.scrollTop()}i=__guard__(this.firstRendered(),(e=>e.top()))
let c=this.firstRendered()
for(;i>n&&this.topIndex>0;){e=this.setTopIndex(this.topIndex-1)
t=this.makeItem({index:e,bottomAnchor:c.top()})
t.isAttached()||this.$container.append(t.render().el)
__guardMethod__(t.item(),"afterAttach",(e=>e.afterAttach()))
this.renderedItems.unshift(t)
this.indexMap[e]=t
i-=t.height()
c=t}if(this.topIndex>0&&n<5e3){this.pushDown(5e3)
n+=5e3
a+=5e3}if(0===this.topIndex&&0!==s){this.pullTo(0)
n=this.$el.scrollTop()
a=n+this.$el.height()}r=__guard__(this.lastRendered(),(e=>e.bottom()))
let d=this.lastRendered()
for(;r<a;){e=this.topIndex+this.renderedItems.length
if(!(e<this.itemSource.length())){if(this.lastRendered().bottom()<this.height){this.height=this.lastRendered().bottom()
this.$container.height(this.height)}break}t=this.makeItem({index:e,topAnchor:d.bottom()})
t.isAttached()||this.$container.append(t.render().el)
__guardMethod__(t.item(),"afterAttach",(e=>e.afterAttach()))
this.renderedItems.push(t)
this.indexMap[e]=t
r+=t.height()
d=t
if(a+2e3>this.height){this.height+=1e4
this.$container.height(this.height)}}this.canReuseItems()||this.flushReservedItems()
const u=(n-this.firstRendered().top())/this.firstRendered().height(),m=(a-this.lastRendered().bottom())/this.lastRendered().height()
this.scrollData.setPosition(Math.max(0,this.firstRendered().index()+u),{who:this.cid})
this.scrollData.set("endPosition",Math.min(this.itemSource.length(),this.lastRendered().index()+m))
return n}handleResize(e){const t=this.itemSource.length(),n=e
this.scrollData.set({size:t,position:n})
this.bootstrap({index:e,topAnchor:this.$el.scrollTop()})
this.addItems()}handleScroll(){const e=this.addItems(),t=this.firstRendered(),n=t.index(),a=(e-t.top())/t.height()
this.scrollData.setPosition(Math.max(0,n+a),{who:this.cid})
this.trigger("scroll",this.lastMouseX,this.lastMouseY)}findSliceByTop(e){const t=this.$el.scrollTop()+e
if(t<this.firstRendered().bottom())return this.firstRendered().item()
let n=this.firstRendered()
for(const e of this.renderedItems){const a=e.top(),i=e.bottom()
if(a<t&&t<=i)return n.item()
n=e}return this.lastRendered().item()}bootstrapBottom(e){this.bootstrap(e)
this.scrollTop(e.bottomAnchor-this.$el.height())}clampIndex(e){return(0,a.uZ)(0,this.itemSource.length()-1,e)}bootstrap(e){e.index=this.clampIndex(e.index)
const{index:t}=e
for(;this.renderedItems.length;)this.reserveItem(this.renderedItems.length-1)
e.flush&&this.flushReservedItems()
this.indexMap={}
const n=this.makeItem(e)
this.setTopIndex(t)
n.isAttached()||this.$container.append(n.render().el)
__guardMethod__(n.item(),"afterAttach",(e=>e.afterAttach()))
this.renderedItems=[n]
this.indexMap[t]=n
0===t&&this.pullTo(0)}remove(){for(const e of this.renderedItems)e.remove()
this.flushReservedItems()
this.scrollData.disable()
c()(window).off(`.${this.cid}`)
return super.remove()}handleSourceLength(){const e=this.itemSource.length()
this.scrollData.setSize(e)
for(;null!=this.lastRendered()&&this.lastRendered().index()>=e;)this.reserveItem(this.renderedItems.length-1)
null==this.lastRendered()&&this.bootstrap({index:0})
this.addItems()}registerListeners(){u.Ud&&c()(window).on(`beforeunload.${this.cid}`,(()=>{window.beforeUnloadType="infinitescroller"
this.$el.scrollTop(0)}))
this.listenTo(this.itemSource,"resizeY",(()=>{this.handleScroll()}))
this.listenTo(this.itemSource,"resizeX",(e=>{this.handleResize(e)}))
this.listenTo(this.itemSource,"change:length",(()=>{this.handleSourceLength()}))}render(){this.registerListeners()
this.$container=c()('<div class="infinite-container"></div>')
this.$el.append(this.$container)
this.$container.css("height",this.height)
const e=this.clampIndex(Math.floor(this.scrollData.get("position")))||0
this.bootstrap({index:e,topAnchor:0})
this.scrollData.setSize(this.itemSource.length())
this.scrollData.setPosition(e,{who:this.cid})
d.default.defer((()=>this.trigger("scroll")))
return this}}InfiniteScroller.initClass()
class InfiniteItem extends r().View{static initClass(){this.prototype.tagName="div"
this.prototype.className="infinite-item"}initialize(e){this._index=e.index
this._item=e.item
this._topAnchor=e.topAnchor
this._bottomAnchor=e.bottomAnchor
this._spacing=e.spacing||0
this._top=0
this.listenTo(this.getSlice(),"change:height",(function(){return this.trigger("change:height")}))
this._checkValid()}_checkValid(){if(this._index<0)throw new Error(`Invalid slice index specified ${this._index}`)}top(e){if(null==e)return this._top
this._top=e
this.$el.css("top",`${this._top}px`)}bottom(){return this.top()+this.height()}height(){return this._item.height()+this._spacing}item(){return this._item}index(){return this._index}isAttached(){return this.$el.parent().length>0}remove(){this._item.die()
this._item.remove()
return super.remove()}getSlice(){return this._item.getSlice()}update(e){"index"in e&&this.setIndex(e.index)
"topAnchor"in e&&this.setTopAnchor(e.topAnchor)
"bottomAnchor"in e&&this.setBottomAnchor(e.bottomAnchor)}setIndex(e){this._index=e
this._checkValid()}setTopAnchor(e){this.top(e)}setBottomAnchor(e){this.top(e-this.height())}updatePos(){if(null!=this._topAnchor)this.setTopAnchor(this._topAnchor)
else{if(null==this._bottomAnchor)throw new Error("InfiniteScroller: item has no neighbor anchor set.")
this.setBottomAnchor(this._bottomAnchor)}}render(){this.$el.append(this._item.render().el)
this.updatePos()
return this}}InfiniteItem.initClass()
function __guard__(e,t){return null!=e?t(e):void 0}function __guardMethod__(e,t,n){return null!=e&&"function"==typeof e[t]?n(e,t):void 0}},762802:(e,t,n)=>{n.d(t,{Ar:()=>Layout,ZP:()=>__WEBPACK_DEFAULT_EXPORT__})
var a=n(440281),i=n.n(a),r=n(85758),s=n.n(r),o=n(436208),l=n(219579),c=n(773364),d=n(271359)
class Layout extends i().Model{vMargin(){return this.get("vMargin")}height(e){return this.get("height")}}class DNAOverlay extends Layout{defaults(){return{vMargin:0,single:new DNA}}boxHeight(){return 0}height(){return this.get("DNA").get("complement")?2*this.get("DNA").height()+2*this.get("DNA").get("spacer"):this.get("DNA").height()+this.get("DNA").get("spacer")}singleHeight(){return this.height()}}class DNASearchResult extends DNAOverlay{}class CodonOptimizationSelection extends DNAOverlay{}class PrimerAssemblyMismatch extends DNAOverlay{}class GoldenGateCutSite extends DNAOverlay{}class Axis extends Layout{defaults(){return{tickSize:[8,0,0],type:new l.Z(12),vMargin:o.AXIS_VMARGIN}}height(){return this.get("type").height()+this.get("tickSize")[0]+2}boxHeight(){return this.height()+this.vMargin()}}class AssemblyConstructAxis extends Axis{height(){return super.height()+o.ASSEMBLY_CONSTRUCT_AXIS_ADDITIONAL_HEIGHT}}class Title extends Layout{defaults(){return{type:new l.Z(20),vMargin:2}}height(){return this.get("type").height()}boxHeight(){return this.height()+this.vMargin()}}class EmptyPlaceholder extends Layout{defaults(){return{type:new l.Z(15),vMargin:0}}height(){return this.get("type").height()}boxHeight(){return this.height()+this.vMargin()}}class Translation extends Layout{defaults(){return{vMargin:5,visible:!0}}height(e){const t=this.get("type").height()
return e.nameShown?2*t:t}boxHeight(e){return this.height(e)+this.vMargin()}}class Translations extends Layout{defaults(){return{vMargin:5,visible:!0,colorScheme:c.yy.RASMOL}}height(e){return e.overlap*(this.get("single").boxHeight(e)+this.indexHeight(e.indexShown))}singleHeight(e){return this.get("single").height(e)+this.indexHeight(e.indexShown)}indexHeight(e){return e?this.get("indexType").height():0}boxHeight(e){return e.overlap>0?this.height(e)+this.vMargin():0}}class CutSite extends Layout{defaults(){return{type:new l.Z(14),vMargin:2}}height(){return this.get("type").height()}boxHeight(){return this.height()+this.vMargin()}}class CutSites extends Layout{defaults(){return{cutSite:new CutSite,vMargin:10}}height(e){return e.overlap*this.get("cutSite").boxHeight()}boxHeight(e){return e.overlap>0?this.height(e)+this.vMargin():0}}class PAMSites extends Layout{defaults(){return{type:new l.Z(14),vMargin:5,analysis:null,rowVMargin:2,hMargin:2,lineHeight:5,scorePadding:2,loadingColor:"#FEFEFE",grayColor:"#C8C8C8",scoreToColor:s().scale.linear().domain([0,50,100]).range(["#C23B22","#FFB347","#77DD77"])}}pamSiteOnTargetMin(){var e
return null===(e=this.get("analysis"))||void 0===e?void 0:e.pamSiteOnTargetMin}pamSiteOffTargetMin(){var e
return null===(e=this.get("analysis"))||void 0===e?void 0:e.pamSiteOffTargetMin}textOffset(){return this.get("type").width(1)+this.get("scorePadding")}leftPamTextOffset(){return this.get("type").width(2)+this.get("scorePadding")/2}scoreWidth(){return this.get("type").width(2)+2*this.get("scorePadding")}leftPamBoxWidth(){return this.get("type").width(4)+this.get("scorePadding")}height(e){return e.overlap*(this.get("type").height()+this.get("rowVMargin"))}boxHeight(e){return e.overlap>0?this.height(e)+this.vMargin()+this.get("lineHeight"):0}}class DNA extends Layout{defaults(){return{complement:!0,spacer:4,type:new l.Z(14,0),vMargin:0,visible:!0,detailedView:!1}}height(){return this.get("type").height()}innerHeight(){return this.get("complement")?2*this.height()+this.get("spacer"):this.height()}boxHeight(){return this.get("visible")?this.get("detailedView")?this.innerHeight()+this.vMargin()+7:this.innerHeight()+this.vMargin():0}}class AminoAcids extends Layout{defaults(){const e=o.DEFAULT_PROTEIN_LAYOUT.aminoAcids
return{spacer:e.spacer,type:new l.Z(e.type.fontSize,e.type.letterSpacing),vMargin:e.vMargin,visible:e.visible}}height(){return this.get("type").height()}innerHeight(){return this.height()}boxHeight(){return this.get("visible")?this.innerHeight()+this.vMargin():0}}class AminoAcidsOverlay extends Layout{defaults(){return{vMargin:0}}boxHeight(){return 0}height(){return this.get("AminoAcids").height()+this.get("AminoAcids").get("spacer")}singleHeight(){return this.height()}}class AminoAcidsSearchResult extends AminoAcidsOverlay{}class Trace extends Layout{defaults(){return{vMargin:0,visible:!0,height:100,qualityFillOpacity:.05,qualityStrokeOpacity:.03,qualityFillColor:"blue",qualityStrokeColor:"black",colorStrokeWidth:1,colorMap:{A:"green",C:"blue",G:"black",T:"red"},maxQuality:75}}boxHeight(){return this.get("visible")?this.height():0}}class Line extends Layout{defaults(){return{vMargin:5,maxVMargin:5,minVMargin:1,height:20,maxHeight:20,minHeight:3,visible:!0,correctFillColor:d.pF,mutationFillColor:d.JF,unknownValueFillColor:d.ud,fillOpacity:1,behind:!1}}height(){return Math.max(Math.min(this.get("height"),this.get("maxHeight")),this.get("minHeight"))}vMargin(){return Math.max(Math.min(this.get("vMargin"),this.get("maxVMargin")),this.get("minVMargin"))}setBehind(){this.set({correctFillColor:"white",fillOpacity:.3,behind:!0,vMargin:0})}boxHeight(){return this.get("behind")?0:this.get("visible")?this.height()+this.vMargin():0}}class Highlight extends Layout{defaults(){return{vMargin:0,height:20,visible:!0,correctFillColor:"green",mutationFillColor:"white",fillOpacity:.3,behind:!0}}boxHeight(){return 0}}class Vote extends Layout{defaults(){return{visible:!0,height:20,vMargin:0,voteFillOpacity:1,voteStrokeOpacity:1,voteStrokeColor:"black",voteFillColor:"gray",strokeWidth:.5}}boxHeight(){return this.get("visible")?this.height():0}}class Annotation extends Layout{defaults(){return{border:1,height:12,vMargin:2}}boxHeight(){return 2*this.get("border")+this.vMargin()+this.height()}}class Annotations extends Layout{defaults(){return{single:new Annotation,type:new l.Z(13),vMargin:10}}height(e){return e.overlap*this.get("single").boxHeight()}singleHeight(){return this.get("single").height()}boxHeight(e){return e.overlap>0?this.height(e)+this.vMargin():0}}class ORF extends Layout{defaults(){return{border:1,height:10,lineHeight:1,vMargin:1,startColor:"green",endColor:"yellow"}}boxHeight(){return 2*this.get("border")+this.vMargin()+this.height()}}class ORFs extends Layout{defaults(){return{single:new ORF,type:new l.Z(5),vMargin:10}}height(e){return e.overlap*this.get("single").boxHeight()}singleHeight(){return this.get("single").height()}boxHeight(e){return e.overlap>0?this.height(e)+this.vMargin():0}}class AlignmentComment extends Layout{defaults(){return{border:1,height:12,vMargin:2}}boxHeight(){return 2*this.get("border")+this.vMargin()+this.height()}}class AlignmentComments extends Layout{defaults(){return{single:new AlignmentComment,type:new l.Z(13),vMargin:10}}height(e){return e.overlap*this.get("single").boxHeight()}singleHeight(){return this.get("single").height()}boxHeight(e){return e.overlap>0?this.height(e)+this.vMargin():0}}function __WEBPACK_DEFAULT_EXPORT__(){const e=new DNA,t=new AminoAcids,n=new Translations({single:new Translation({type:e.get("type")}),indexType:e.get("type")})
return{DNASearchResult:new DNASearchResult({DNA:e}),AminoAcidsSearchResult:new AminoAcidsSearchResult({AminoAcids:t}),CodonOptimizationSelection:new CodonOptimizationSelection({DNA:e}),Axis:new Axis,AssemblyConstructAxis:new AssemblyConstructAxis,DNA:e,AminoAcids:t,ORFs:new ORFs,AlignmentComments:new AlignmentComments,Trace:new Trace,Annotations:new Annotations,CutSites:new CutSites,PAMSites:new PAMSites,Translations:n,Vote:new Vote,Line:new Line,Highlight:new Highlight,Title:new Title,PrimerAssemblyMismatch:new PrimerAssemblyMismatch({DNA:e}),GoldenGateCutSite:new GoldenGateCutSite({DNA:e}),EmptyPlaceholder:new EmptyPlaceholder}}},647863:(e,t,n)=>{n.d(t,{R$:()=>ModifiedNucleotidesVisualization,ZP:()=>ModifiedNucleotides,s7:()=>_})
var a=n(769784),i=n(989526),r=n(212300),s=n(232606),o=n(256605),l=n(751512),c=n(91092),d=n(697134),u=n(581634),m=n(445251),p=n(226576),h=n(737376),E=n(364172),S=n(256039),T=n(556776),g=n(686836),f=n(22584),I=n(860280),A=n(629554)
const y=a.Ps`
  query ComplexPolymerModifiedNucleotidesQuery($complexPolymerId: StrictString!, $versionId: StrictString!)
  @engComponent(name: MODIFIED_BIOLOGICS)
  @skipAudit {
    complexPolymer(id: $complexPolymerId, versionId: $versionId) {
      ... on ComplexPolymerNode {
        id
      }
      ... on OligoConjugateNode {
        id
      }
      ... on ComplexPolymerInterface {
        structure {
          polymers {
            ... on SimplePolymerInterface {
              id
              polymerType
            }
            ... on NucleotideSequencePolymerNode {
              id
              nucleotideType
              modifiedNucleotides {
                position
                sugarMonomerId
                baseMonomerId
                phosphateMonomerId
              }
            }
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,c.f)("InaccessibleInfo").fragment}
`,_=10,C=_-2
function letterCenterY(e,t,n){return C+n+.5*(0,I.M)(e,t)}function phosphateSymbolOffsetX(e,t){return.25*(0,I.M)(e,t)+2}function phosphateSymbolOffsetY(e,t){return-(.125*(0,I.M)(e,t)+C+4)}function phosphateSymbolSize(e,t){return.25*(0,I.M)(e,t)}function outerRadiusRatio(e,t){return(0,I.M)(e,t)<28?.45:.4}function innerRadiusRatio(e,t){return(0,I.M)(e,t)<28?.35:.3}function SummarizedModifiedNucleotideTooltips({xFn:e,sliceStart:t,sliceEnd:n,keyPrefix:a,sequenceMods:r,monomers:s,bases:o,nucleotideType:l,boxHeightToDNA:c,showNucleotideStructures:d,isOligo:u}){function getCircleFillOpacity(e){if(r.map((e=>e.position)).includes(e)){const t=r.filter((t=>t.position===e))[0]
if(!(0,m.sm)(t.baseMonomerId,s,l,u)||!(0,m.sm)(t.sugarMonomerId,s,l,u))return 1e-4}return.05}const p=[]
for(let e=t;e<n;e++)p.push(e)
return i.createElement("svg",null,p.map(((n,u)=>i.createElement(g.Z,{key:`${a}-${n}`,renderContent:()=>{const e=r.filter((e=>e.position===n))[0]
return i.createElement(A.Z,{mod:e,monomers:s,base:o[u],nucleotideType:l,showNucleotideStructure:d})}},i.createElement("g",null,i.createElement("circle",{cx:(0,m.N2)(e,t,n),cy:letterCenterY(e,t,c),r:outerRadiusRatio(e,t)*(0,I.M)(e,t),fill:S.Ei,fillOpacity:getCircleFillOpacity(n)}))))))}function ModifiedNucleotidesVisualization({isOligo:e,sequenceMods:t,monomers:n,nucleotideType:a,xFn:r,sliceStart:s,sliceEnd:o,keyPrefix:l,bases:c,layout:d,boxHeightToDNA:u,showNucleotideStructures:T,displayBasesAsNatural:g}){const A=(0,m.nP)(n,a,c,t,s)
return i.createElement("svg",null,i.createElement(f.Z,{layout:d,shouldStopMouseDownPropagation:!1},i.createElement("g",null,A.filter((e=>e.position>=s&&e.position<o)).map((t=>{var o,l
const c=n.find((e=>e.id===t.baseMonomerId)),d=g||(0,m.sm)(t.baseMonomerId,n,a,e),T=n.find((e=>e.id===t.sugarMonomerId)),f=(0,m.sm)(t.sugarMonomerId,n,a,e),A=n.find((e=>e.id===t.phosphateMonomerId)),y=(0,m.sm)(t.phosphateMonomerId,n,a,e)
return i.createElement("g",{key:`${t.position}-${t.sugarMonomerId}-${t.baseMonomerId}-${t.phosphateMonomerId}`,transform:`translate(${(0,m.N2)(r,s,t.position)},\n                  ${letterCenterY(r,s,u)})`},!d&&i.createElement(p.Z,{fill:null!==(o=null==c?void 0:c.color)&&void 0!==o?o:S.Qw,radius:(f?outerRadiusRatio(r,s):innerRadiusRatio(r,s))*(0,I.M)(r,s)}),!f&&i.createElement(E.Z,{radius:outerRadiusRatio(r,s)*(0,I.M)(r,s),stroke:null!==(l=null==T?void 0:T.color)&&void 0!==l?l:S.K4}),!y&&i.createElement(h.ZP,{size:phosphateSymbolSize(r,s),offsetX:phosphateSymbolOffsetX(r,s),offsetY:phosphateSymbolOffsetY(r,s),symbol:(0,m.Lt)(A)}))})),i.createElement(SummarizedModifiedNucleotideTooltips,{xFn:r,sliceStart:s,sliceEnd:o,keyPrefix:l,sequenceMods:A,monomers:n,bases:c,nucleotideType:a,boxHeightToDNA:u,showNucleotideStructures:T,isOligo:e}))))}function ModifiedNucleotides({xFn:e,sliceStart:t,sliceEnd:n,sequenceId:a,bases:c,layout:m,boxHeightToDNA:p,showNucleotideStructures:h,complexPolymerId:E}){const g=(0,r.v9)((e=>E?e.ui.modbio.complexPolymerVersionUIs[E].complexPolymerVersionId:null))
return m.visible?i.createElement(l.ZP,{query:S.V,renderLoading:l.ZP.DEFAULT_RENDER_LOADING},(r=>{if(null!=E){(0,s.hu)(null!=g,"Expected complex polymer to have version")
return i.createElement(l.ZP,{query:y,renderLoading:l.ZP.DEFAULT_RENDER_LOADING,variables:{complexPolymerId:E,versionId:g},fetchPolicy:"cache-only"},(o=>{(0,s.hu)(!(0,d.CZ)(o.complexPolymer),"Expected complex polymer to be accessible")
const l=(0,u.gv)(o.complexPolymer),E=(0,u.WG)(o.complexPolymer)
return i.createElement(ModifiedNucleotidesVisualization,{isOligo:!0,sequenceMods:l,monomers:r.monomers,nucleotideType:E,xFn:e,sliceStart:t,sliceEnd:n,keyPrefix:a,bases:c,layout:m,boxHeightToDNA:p,showNucleotideStructures:h})}))}return i.createElement(l.ZP,{query:T.t,renderLoading:l.ZP.DEFAULT_RENDER_LOADING,variables:{sequenceId:a},fetchPolicy:"cache-only"},(s=>{const l=s.componentSequence.type===o.uS.oligo,d=s.componentSequence.modifiedNucleotides,u=s.componentSequence.nucleotideType
return i.createElement(ModifiedNucleotidesVisualization,{isOligo:l,sequenceMods:d,monomers:r.monomers,nucleotideType:u,xFn:e,sliceStart:t,sliceEnd:n,keyPrefix:a,bases:c,layout:m,boxHeightToDNA:p,showNucleotideStructures:h})}))})):null}},690774:(e,t,n)=>{n.d(t,{Z:()=>u,x:()=>PresentationalNucleotidesAxisOverlay})
var a=n(989526),i=n(634489),r=n(751512),s=n(445251),o=n(256039),l=n(556776),c=n(22584),d=n(860280)
class ModifiedNucleotidesAxisOverlayConnector extends i.C{enhanceProps(){var e,t
const n=this.reduxState().ui.molbio.nucleotidesUI[this.props.sequenceId]
return{hoveredMonomerIds:null!==(e=null==n?void 0:n.hoveredMonomerIds)&&void 0!==e?e:[],hoveredNucleotideIdx:null==n?void 0:n.hoveredIdx,selectedPositions:null!==(t=null==n?void 0:n.selectedPositions)&&void 0!==t?t:new Set}}}function PresentationalNucleotidesAxisOverlay({hoveredMonomerIds:e,hoveredNucleotideIdx:t,xFn:n,sliceStart:i,sliceEnd:r,layout:l,bases:u,selectedPositions:m,modifiedNucleotides:p,monomers:h,nucleotideType:E}){function shouldDisplayAxisUnderline(e){return m.has(e)}const S=(0,s.nP)(h,E,u,p,i),T=[]
for(let e=i;e<r;e++){const t=S.find((t=>t.position===e))||null
T.push([t,e])}return a.createElement("svg",null,a.createElement(c.Z,{layout:l,shouldStopMouseDownPropagation:!1},a.createElement("g",null,T.map((([r,s])=>{return a.createElement("g",{key:s},shouldDisplayAxisUnderline(s)&&a.createElement("rect",{x:n(s),y:-2,width:(0,d.M)(n,i),height:"4px",fill:o.K4,shapeRendering:"geometricPrecision"}),function shouldDisplayAxisDot(n,a){return t===a||!(!e.length||!n)&&e.some((e=>[n.baseMonomerId,n.sugarMonomerId,n.phosphateMonomerId].includes(e)))}(r,s)&&!shouldDisplayAxisUnderline(s)&&a.createElement("circle",{cx:(l=s,(l-i)*(0,d.M)(n,i)+.5*(0,d.M)(n,i)),cy:0,r:3,fill:o.K4,shapeRendering:"geometricPrecision"}))
var l})))))}const u=ModifiedNucleotidesAxisOverlayConnector.connect((function NucleotidesAxisOverlay(e){return a.createElement(r.ZP,{query:o.V,renderLoading:r.ZP.DEFAULT_RENDER_LOADING},(t=>a.createElement(r.ZP,{query:l.t,renderLoading:()=>null,variables:{sequenceId:e.sequenceId},fetchPolicy:"cache-only"},(n=>a.createElement(PresentationalNucleotidesAxisOverlay,{monomers:t.monomers,modifiedNucleotides:n.componentSequence.modifiedNucleotides,...e})))))}))},445251:(e,t,n)=>{n.d(t,{AT:()=>letterStartX,Lt:()=>getVisualSymbolForPhosphateMonomer,N2:()=>letterCenterX,nP:()=>getDisplayModsForSlice,sm:()=>displayAsNatural})
var a=n(232606),i=n(348920),r=n(48047),s=n(256605),o=n(860280),l=n(256039),c=n(818382),d=n(737376)
function naturalMonomerHasVisualOverride(e){var t
if(!e){(0,a.Gp)(!1,"naturalMonomerHasVisualOverride was called without a monomer, likely missing default monomers from db setup")
return!1}(0,a.hu)(e.isNatural,"Should not call naturalMonomerHasVisualOverride on unnatural monomer")
const n={[s.TF.P_LOWER]:["visualSymbol",d.sv],[s.TF.R_LOWER]:["color",l.K4],[s.TF.D_LOWER]:["color",l.K4],[s.TF.A]:["color",l.Qw],[s.TF.C]:["color",l.Qw],[s.TF.G]:["color",l.Qw],[s.TF.T]:["color",l.Qw],[s.TF.R]:["color",l.Qw],[s.TF.B]:["color",l.Qw],[s.TF.U]:["color",l.Qw],[s.TF.N]:["color",l.Qw],[s.TF.K]:["color",l.Qw],[s.TF.M]:["color",l.Qw],[s.TF.D]:["color",l.Qw],[s.TF.S]:["color",l.Qw],[s.TF.H]:["color",l.Qw],[s.TF.V]:["color",l.Qw],[s.TF.W]:["color",l.Qw],[s.TF.Y]:["color",l.Qw]},[i,r]=n[e.naturalAnalogue]
return(null===(t=e[i])||void 0===t?void 0:t.toLowerCase())!==r.toLowerCase()&&null!=e[i]}function findNaturalMonomer(e,t){for(const n of e)if(n.isNatural&&n.naturalAnalogue===t)return n
return null}function getDisplayModsForSlice(e,t,n,i,o){const l=i.reduce(((e,t)=>{e[t.position]=t
return e}),{}),c=t===r.NucleotideType.DNA?findNaturalMonomer(e,s.TF.D_LOWER):findNaturalMonomer(e,s.TF.R_LOWER),d=naturalMonomerHasVisualOverride(c),u=findNaturalMonomer(e,s.TF.P_LOWER),m=naturalMonomerHasVisualOverride(u),p=[]
n.split("").forEach(((t,n)=>{const i=n+o,r=l[i]
if(r)p.push(r)
else{const n=findNaturalMonomer(e,t.toUpperCase())
if(naturalMonomerHasVisualOverride(n)||m||d){n&&c&&u||(0,a.hu)(!1,`Missing default monomers. Sugar: ${c}, base: ${n}, phosphate: ${u}`)
p.push({position:i,sugarMonomerId:c.id,baseMonomerId:n.id,phosphateMonomerId:u.id})}}}))
return p}function displayAsNatural(e,t,n,o){if(!e)return!1
if(e===l.ys)return!0
const d=t.filter((t=>t.id===e))[0];(0,a.hu)(null!=d,`Expected monomer with ${e} to be defined`)
if((0,c.Ct)(d,n)&&naturalMonomerHasVisualOverride(d))return!1
if(o&&i.ZP.MOLBIO_ENABLE_UT_FLEXIBILITY){const e=n===r.NucleotideType.DNA?s.TF.U:s.TF.T
if(d.isNatural&&d.naturalAnalogue===e)return!0}return(0,c.Ct)(d,n)}function letterCenterX(e,t,n){return letterStartX(e,t,n)+.5*(0,o.M)(e,t)}function letterStartX(e,t,n){return(n-t)*(0,o.M)(e,t)}function getVisualSymbolForPhosphateMonomer(e){return null==e?d.cq:null!=e.visualSymbol?e.visualSymbol:d.sv}},256039:(e,t,n)=>{n.d(t,{AN:()=>L,C:()=>_,D5:()=>O,Ei:()=>g,Ez:()=>M,K4:()=>f,Lt:()=>D,Qw:()=>T,Tg:()=>h,V:()=>c,Ws:()=>v,Zp:()=>S,ai:()=>d,bk:()=>w,eA:()=>E,fP:()=>b,lE:()=>C,ni:()=>u,oJ:()=>R,qC:()=>m,q_:()=>y,qw:()=>I,rZ:()=>N,u$:()=>A,vZ:()=>p,xn:()=>P,ys:()=>o})
var a=n(769784),i=n(256605),r=n(91092),s=n(757389)
const o="DEGENERATE_BASE",l=a.Ps`
  fragment MonomerGraphQL on MonomerNode {
    id
    name
    symbol
    naturalAnalogue
    polymerType
    monomerType
    molfile
    canonicalSmiles
    originalSmiles
    attachmentPoints
    isNatural
    color
    visualSymbol
    chemicalStructureImage {
      ... on SVGNode {
        base64Svg
      }
      ... on ErrorNode {
        message
      }
    }
    calculatedMolecularWeight
    customMolecularWeight
    ...HasArchiveRecordGraphQL
  }
  ${(0,r.f)("HasArchiveRecord").fragment}
`,c=a.Ps`
  query MonomerQuery @skipAudit @engComponent(name: MODIFIED_BIOLOGICS) {
    monomers {
      id
      name
      symbol
      naturalAnalogue
      polymerType
      monomerType
      molfile
      canonicalSmiles
      originalSmiles
      attachmentPoints
      isNatural
      color
      visualSymbol
      chemicalStructureImage {
        ... on SVGNode {
          base64Svg
        }
        ... on ErrorNode {
          message
        }
      }
      calculatedMolecularWeight
      customMolecularWeight
      ...HasArchiveRecordGraphQL
    }
  }
  ${(0,r.f)("HasArchiveRecord").fragment}
`,d={fragmentName:"MonomerGraphQL",fragment:l},u=a.Ps`
  query SingleMonomerQuery($id: StrictString!) @skipAudit @engComponent(name: MODIFIED_BIOLOGICS) {
    monomer(id: $id) {
      ...MonomerGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${d.fragment}
  ${(0,r.f)("InaccessibleInfo").fragment}
`
var m,p
!function(e){e.BACKBONE="Backbone"
e.BRANCH="Branch"}(m||(m={}))
!function(e){e.A="A"
e.C="C"
e.G="G"
e.N="N"
e.P_LOWER="p"
e.R_LOWER="r"
e.D_LOWER="d"
e.T="T"
e.U="U"
e.R="R"
e.Y="Y"
e.M="M"
e.K="K"
e.W="W"
e.S="S"
e.B="B"
e.D="D"
e.H="H"
e.V="V"}(p||(p={}))
const h={[i.TF.A]:"Adenine",[i.TF.C]:"Cytosine",[i.TF.G]:"Guanine",[i.TF.N]:"Any",[i.TF.P_LOWER]:"Phosphate",[i.TF.R_LOWER]:"Ribose",[i.TF.D_LOWER]:"Deoxyribose",[i.TF.T]:"Thymine",[i.TF.U]:"Uracil",[i.TF.R]:"Purine",[i.TF.Y]:"Pyrimidine",[i.TF.M]:"Amino",[i.TF.K]:"Keto",[i.TF.W]:"Weak",[i.TF.S]:"Strong",[i.TF.B]:"Not Adenine",[i.TF.D]:"Not Cytosine",[i.TF.H]:"Not Guanine",[i.TF.V]:"Not Thymine"},E={[i.TF.A]:"(A)",[i.TF.C]:"(C)",[i.TF.G]:"(G)",[i.TF.N]:"(A/C/G/T/U)",[i.TF.P_LOWER]:"(p)",[i.TF.R_LOWER]:"(r)",[i.TF.D_LOWER]:"(d)",[i.TF.T]:"(T)",[i.TF.U]:"(U)",[i.TF.R]:"(A/G)",[i.TF.Y]:"(C/T/U)",[i.TF.M]:"(A/C)",[i.TF.K]:"(G/T/U)",[i.TF.W]:"(A/T/U)",[i.TF.S]:"(C/G)",[i.TF.B]:"(C/G/T/U)",[i.TF.D]:"(A/G/T/U)",[i.TF.H]:"(A/C/T/U)",[i.TF.V]:"(A/C/G)"}
var S
!function(e){e.BASE="base"
e.PHOSPHATE="phosphate"
e.SUGAR="sugar"}(S||(S={}))
const T="#7051FC33",g="#5C7C83",f="#7051FC",I=25
var A,y
!function(e){e.NUCLEOTIDES_TABLE_PAGE_SIZE="NUCLEOTIDES_TABLE_PAGE_SIZE"
e.HAS_DISMISSED_UT_FLEXIBILITY_BANNER="HAS_DISMISSED_UT_FLEXIBILITY_BANNER"}(A||(A={}))
!function(e){e.CHOOSING="CHOOSING"
e.DEGENERATE="DEGENERATE"
e.NULL_MONOMER="NULL_MONOMER"}(y||(y={}))
const _=[i.E$.CLOVER_HOLLOW,i.E$.DIAMOND_HOLLOW,i.E$.DYAD_HOLLOW,i.E$.RECTANGLE_HOLLOW,i.E$.STAR_HOLLOW,i.E$.TRIAD_HOLLOW,i.E$.TRIANGLE_HOLLOW],C={[i.TF.A]:S.BASE,[i.TF.C]:S.BASE,[i.TF.D_LOWER]:S.SUGAR,[i.TF.G]:S.BASE,[i.TF.N]:S.BASE,[i.TF.P_LOWER]:S.PHOSPHATE,[i.TF.R_LOWER]:S.SUGAR,[i.TF.T]:S.BASE,[i.TF.U]:S.BASE,[i.TF.R]:S.BASE,[i.TF.Y]:S.BASE,[i.TF.M]:S.BASE,[i.TF.K]:S.BASE,[i.TF.W]:S.BASE,[i.TF.S]:S.BASE,[i.TF.B]:S.BASE,[i.TF.D]:S.BASE,[i.TF.H]:S.BASE,[i.TF.V]:S.BASE},R=[T,"#FC9F354D","#2669FF40","#C7C9D0","#0BCAB54D","#CF09EF40","#FF475A4D","#FDEE94","#C3FB7D","#C0E5D8","#98D8E7","#8CB0D8","#CD998AB3"],N=[f,"#FC9F35","#2669FF","#344043","#0BCAB5","#CF09EF","#FF475A","#FDEE94","#F3D3AE","#C3FB7D","#98D8E7","#A0AFCF","#CD998A","#B2ABAC"],O=[i.E$.DIAMOND_FILLED,i.E$.DIAMOND_HOLLOW,i.E$.CLOVER_HOLLOW,i.E$.CLOVER_FILLED,i.E$.RECTANGLE_FILLED,i.E$.RECTANGLE_HOLLOW,i.E$.TRIANGLE_FILLED,i.E$.TRIANGLE_HOLLOW,i.E$.STAR_FILLED,i.E$.STAR_HOLLOW,i.E$.LETTERS_C,i.E$.LETTERS_CO,i.E$.LETTERS_M,i.E$.LETTERS_MP,i.E$.LETTERS_P,i.E$.LETTERS_PS,i.E$.LETTERS_R,i.E$.LETTERS_RS,i.E$.LETTERS_S,i.E$.LETTERS_SP]
var b
!function(e){e.DIAMOND_FILLED="Diamond (filled)"
e.DIAMOND_HOLLOW="Diamond (hollow"
e.DIAMOND_DASHED="Diamond (dashed)"
e.CLOVER_FILLED="Clover (filled)"
e.CLOVER_HOLLOW="Clover (hollow)"
e.RECTANGLE_FILLED="Rectangle (filled)"
e.RECTANGLE_HOLLOW="Rectangle (hollow)"
e.TRIANGLE_FILLED="Triangle (filled)"
e.TRIANGLE_HOLLOW="Triangle (hollow)"
e.LETTERS_P="Letters (P)"
e.LETTERS_PS="Letters (Ps)"
e.STAR_FILLED="Star (filled)"
e.STAR_HOLLOW="Star (hollow)"
e.TRIAD_FILLED="Triad (filled)"
e.TRIAD_HOLLOW="Triad (hollow)"
e.DYAD_FILLED="Dyad (filled)"
e.DYAD_HOLLOW="Dyad (hollow)"
e.LETTERS_C="Letters (C)"
e.LETTERS_CO="Letters (Co)"
e.LETTERS_M="Letters (M)"
e.LETTERS_MP="Letters (Mp)"
e.LETTERS_R="Letters(R)"
e.LETTERS_RS="Letters(Rs)"
e.LETTERS_S="Letters (S)"
e.LETTERS_SP="Letters (Sp)"}(b||(b={}))
const v=[i.TF.A,i.TF.C,i.TF.G,i.TF.T,i.TF.U,i.TF.R_LOWER,i.TF.D_LOWER,i.TF.P_LOWER],P=[i.TF.N,i.TF.R,i.TF.Y,i.TF.M,i.TF.K,i.TF.W,i.TF.S,i.TF.B,i.TF.D,i.TF.H,i.TF.V],L={[i.TF.R_LOWER]:i.BP.BACKBONE,[i.TF.D_LOWER]:i.BP.BACKBONE,[i.TF.P_LOWER]:i.BP.BACKBONE,[i.TF.A]:i.BP.BRANCH,[i.TF.C]:i.BP.BRANCH,[i.TF.G]:i.BP.BRANCH,[i.TF.T]:i.BP.BRANCH,[i.TF.U]:i.BP.BRANCH,[i.TF.N]:i.BP.BRANCH,[i.TF.R]:i.BP.BRANCH,[i.TF.Y]:i.BP.BRANCH,[i.TF.M]:i.BP.BRANCH,[i.TF.K]:i.BP.BRANCH,[i.TF.W]:i.BP.BRANCH,[i.TF.S]:i.BP.BRANCH,[i.TF.B]:i.BP.BRANCH,[i.TF.D]:i.BP.BRANCH,[i.TF.H]:i.BP.BRANCH,[i.TF.V]:i.BP.BRANCH},D="*",M="Capping groups must be specified for all attachment points",w=(0,s.Z)("/static/monomers/template_bulk_monomers.csv")},485992:(e,t,n)=>{n.d(t,{Dl:()=>archiveMonomers,HL:()=>i,MZ:()=>exportMonomersAsCSV,Qe:()=>createMonomers,Wc:()=>validateHELMQuery,YZ:()=>updateMonomer,_l:()=>unarchiveMonomers,iT:()=>validateMonomersFromFile,tU:()=>createMonomersFromFile,zt:()=>validateMonomerInput})
var a=n(771398)
const i="/monomers"
async function validateHELMQuery(e,t,n){return await(0,a.s0)({url:"/1/api/monomers:validate-filter-helm",data:{helmString:e,operator:t,nucleotideType:n}})}async function createMonomers(e,t=!1){return await(0,a.s0)({url:"/1/api/monomers",data:{monomers:e,fromHelmLib:t}})}async function createMonomersFromFile(e){return await(0,a.s0)({url:"/1/api/monomers:bulk-create-from-csv",data:{csvUrl:e}})}async function updateMonomer(e,t){return await(0,a.Ry)({url:`/1/api/monomers/${e}`,data:t})}var r
!function(e){e.PREFILTER_TERMINALS="PREFILTER_TERMINALS"
e.NULLIFY_ENDING_PHOSPHATE="NULLIFY_ENDING_PHOSPHATE"
e.USE_SHARED_DELIMITER="USE_SHARED_DELIMITER"}(r||(r={}))
async function archiveMonomers(e,t){return await(0,a.s0)({url:"/1/api/monomers:archive",data:{purpose:t,monomerIds:e}})}async function unarchiveMonomers(e){return await(0,a.s0)({url:"/1/api/monomers:unarchive",data:{monomerIds:e}})}async function validateMonomerInput(e,t=!1){return await(0,a.s0)({url:"/1/api/monomers:validate",data:{monomerDicts:e,allowSymbolClash:t}})}async function validateMonomersFromFile(e,t){return await(0,a.s0)({url:"/1/api/monomers:validate-csv",data:{filename:e,s3Location:t}})}async function exportMonomersAsCSV(e){return await(0,a.s0)({url:"/1/api/monomers:export-as-csv",data:{forReimportIntoBenchling:e}})}},818382:(e,t,n)=>{n.d(t,{Cp:()=>isMonomerNucleotideComponent,Ct:()=>isNaturalMonomer,Cy:()=>nucleotideIsNatural,Fy:()=>queryMatchesMonomerName,Oj:()=>generateSimplePolymerHELM,SE:()=>getMonomerIdFromMappingOrNaturalBase,Uc:()=>replaceNaturalSugarMonomersForModifiedNucleotides,XL:()=>getNaturalSugarMonomer,c2:()=>queryMatchesMonomerSymbol,cR:()=>areMonomersEnabledForUser,dH:()=>getNucleotideId,eb:()=>getBaseName,f4:()=>getNaturalPhosphateMonomer,hc:()=>S,ki:()=>getNaturalBaseMonomer,lB:()=>gqlToAPINaturalAnalogue,qT:()=>getNaturalMonomerId,tW:()=>getPhosphateName,td:()=>getSugarName})
var a=n(64558),i=n(232606),r=n(814099),s=n(323539),o=n(348920),l=n(955836),c=n(48047),d=n(256605),u=n(681896),m=n(757389),p=n(256039),h=n(257846)
function areMonomersEnabledForUser(){return o.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&(0,s.cr)({feature:r.Ot.MOLBIO_OPEN})}function queryMatchesMonomerSymbol(e,t){return h.Z.caseInsensitiveContains(null!=e?e:"",t)}function queryMatchesMonomerName(e,t){return h.Z.caseInsensitiveContains(null!=e?e:"",t)}function isMonomerNucleotideComponent(e,t,n){return!(t===p.Zp.BASE&&!o.ZP.MOLBIO_ENABLE_UT_FLEXIBILITY&&(n===c.NucleotideType.RNA&&e.naturalAnalogue===d.TF.T||n===c.NucleotideType.DNA&&e.naturalAnalogue===d.TF.U))&&p.lE[e.naturalAnalogue]===t}function isNaturalMonomer(e,t){return!!e.isNatural&&([d.TF.R_LOWER,d.TF.U].includes(e.naturalAnalogue)?t===c.NucleotideType.RNA:![d.TF.D_LOWER,d.TF.T].includes(e.naturalAnalogue)||t===c.NucleotideType.DNA)}function isNaturalMonomerId(e,t){if(!e)return!1
return[getNaturalMonomerId(d.TF.P_LOWER),getNaturalMonomerId(d.TF.A),getNaturalMonomerId(d.TF.C),getNaturalMonomerId(d.TF.G),getNaturalMonomerId(t===c.NucleotideType.DNA?d.TF.D_LOWER:d.TF.R_LOWER),getNaturalMonomerId(t===c.NucleotideType.DNA?d.TF.T:d.TF.U)].includes(e)}function nucleotideIsNatural(e,t){return isNaturalMonomerId(e.sugarMonomerId,t)&&isNaturalMonomerId(e.baseMonomerId,t)&&isNaturalMonomerId(e.phosphateMonomerId,t)}function getNaturalPhosphateMonomer(e){const t=e.filter((e=>e.isNatural&&e.naturalAnalogue===d.TF.P_LOWER))[0];(0,i.Gp)(Boolean(t),"Could not find natural phosphate monomer")
return t}function getNaturalSugarMonomer(e,t){const n=t===c.NucleotideType.RNA?d.TF.R_LOWER:d.TF.D_LOWER,a=e.filter((e=>e.isNatural&&e.naturalAnalogue===n))[0];(0,i.Gp)(Boolean(a),"Could not find natural sugar monomer")
return a}function getNaturalBaseMonomer(e,t){const n=e.filter((e=>e.isNatural&&e.naturalAnalogue===t.toUpperCase()))[0];(0,i.hu)(Boolean(n)||l.Un.includes(t),`Could not find natural base monomer for ${t}`)
return n}function getNaturalMonomerId(e){const t=o.ZP.MODBIO_NATURAL_MONOMER_IDS_BY_NATURAL_ANALOGUE[e];(0,i.hu)(null!=t,`Could not find natural monomer ID for ${e}`)
return t}function getSugarName(e,t,n){var a,i
return null!=e?null!==(i=null===(a=t.find((t=>t.id===e.sugarMonomerId)))||void 0===a?void 0:a.name)&&void 0!==i?i:"Unknown":n===c.NucleotideType.RNA?"Ribose":"Deoxyribose"}function getPhosphateName(e,t){var n,a
return null!=e?e.phosphateMonomerId?null!==(a=null===(n=t.find((t=>t.id===e.phosphateMonomerId)))||void 0===n?void 0:n.name)&&void 0!==a?a:"Unknown":"None":"Phosphate"}function getBaseName(e,t,n){var a
let i
i=null!=e?t.find((t=>t.id===e.baseMonomerId)):t.find((e=>e.symbol===n.toUpperCase()))
return null!==(a=null==i?void 0:i.name)&&void 0!==a?a:"Unknown"}async function replaceNaturalSugarMonomersForModifiedNucleotides(e,t,n){if(0===e.length)return[]
if(t===n)return e.map((e=>({...e})))
const{monomers:i}=await(0,u.doQuerySafe)({query:p.V}),r=(0,a.Pe)(i,(e=>e.id)),s=getNaturalSugarMonomer(i,t),o=getNaturalSugarMonomer(i,n)
return e.map((e=>({...e,sugarMonomerId:e.sugarMonomerId===s.id?o.id:e.sugarMonomerId}))).filter((e=>null==e.phosphateMonomerId||[r[e.sugarMonomerId],r[e.baseMonomerId],r[e.phosphateMonomerId]].some((e=>!isNaturalMonomer(e,n)))))}function formatSymbol(e){return e.length<=1?e:`[${e}]`}function getNucleotideId(e,t,n){var a,i
const r=t&&t!==p.ys?t.id:""
return`${null!==(a=null==e?void 0:e.id)&&void 0!==a?a:""},${r},${null!==(i=null==n?void 0:n.id)&&void 0!==i?i:""}`}function generateSimplePolymerHELM(e,t,n,a){const r={},s={}
n.forEach((e=>{r[e.position]=e}))
a.forEach((e=>{s[e.id]=e}))
return Array.from(e).map(((e,n)=>function monomerGroupForBase(e,t,n,a,r){let s,o,l
if(r){s=a[r.sugarMonomerId].symbol;(0,i.hu)(r.baseMonomerId!==p.ys,`Could not find natural base monomer for ${e}`)
o=a[r.baseMonomerId].symbol
l=r.phosphateMonomerId?a[r.phosphateMonomerId].symbol:""}else{s=getNaturalSugarMonomer(n,t).symbol
const a=getNaturalBaseMonomer(n,e);(0,i.hu)(void 0!==a,`Could not find natural base monomer for ${e}`)
o=a.symbol
l=getNaturalPhosphateMonomer(n).symbol}return`${formatSymbol(s)}(${formatSymbol(o)})${formatSymbol(l)}`}(e,t,a,s,r[n]))).join(".")}function getMonomerIdFromMappingOrNaturalBase(e,t,n){if(null!=n){const a=n[e]
if(null!=t.find((e=>e.id===a)))return a}return getNaturalBaseMonomer(t,e).id}const E=(0,m.Z)("/static/monomers/HELMCoreLibrary.json"),S={fetch:async()=>{const e=await fetch(E)
return await e.json()}}
function gqlToAPINaturalAnalogue(e){switch(e){case d.TF.R_LOWER:return"r"
case d.TF.D_LOWER:return"d"
case d.TF.P_LOWER:return"p"
default:return e}}},204300:(e,t,n)=>{n.d(t,{W:()=>QueryingNucleotidesEditModal,Z:()=>NucleotidesEditModal})
var a=n(692013),i=n(989526),r=n(751512),s=n(697134),o=n(789385),l=n(263137),c=n(954587),d=n(289924),u=n(629656),m=n(205986),p=n(808844),h=n(254864),E=n(256039),S=n(610641)
function MonomerRow({monomerId:e,monomersById:t,nucleotideComponent:n,nucleotideType:r,onUpdateMonomerId:s}){const o=!Object.keys(E.q_).includes(e)
return i.createElement("tr",{...(0,l.Z)({component:"NucleotideEditModal",element:"monomerRow",key:n})},i.createElement("td",{className:(0,a.iv)(T.cell)},(0,p.kC)(n)),i.createElement("td",{className:(0,a.iv)(T.cell)},i.createElement(S.FG,{nucleotideType:r,selectedMonomerId:e,nucleotideComponent:n,updateSelectedMonomerId:s,nameMaxLength:30})),i.createElement("td",{className:(0,a.iv)(T.cell)},o?t[e].symbol:"-"),i.createElement("td",{className:(0,a.iv)(T.cell)},o?E.vZ[t[e].naturalAnalogue]:"-"),i.createElement("td",{className:(0,a.iv)(T.cell)},o?i.createElement(h.Z,{chemicalStructureImage:t[e].chemicalStructureImage,svgClassName:(0,a.iv)(T.chemicalStructureSvg)}):"-"))}function NucleotidesEditModal(e){const[t,n]=(0,i.useState)(e.initialSugarId),[a,r]=(0,i.useState)(e.initialBaseId),[s,o]=(0,i.useState)(e.initialPhosphateId)
return i.createElement(m.ZP,{title:"Edit Nucleotides",large:!0,buttons:[{text:"Cancel",cancel:!0},{text:"Save",submit:!0,disabled:e.isPartSequence||[t,a,s].every((e=>e===E.q_.CHOOSING))}],onRequestClose:()=>{e.onClose&&e.onClose()
u.xv(NucleotidesEditModal)},onRequestSubmit:()=>{e.onSubmit({target:{positions:[...e.positions]},replacement:{sugarMonomerId:t===E.q_.CHOOSING?S.e.EXISTING_MONOMER:t,baseMonomerId:a===E.q_.CHOOSING?S.e.EXISTING_MONOMER:a===E.q_.DEGENERATE?E.ys:a,phosphateMonomerId:s===E.q_.CHOOSING?S.e.EXISTING_MONOMER:s}})
u.xv(NucleotidesEditModal)},footer:i.createElement(d.Z,{href:"/monomers",target:"_blank"},"Go to monomer library")},e.isPartSequence&&i.createElement("div",{className:"u-small-spacing-bottom"},i.createElement(c.Z,null,"Chemical modifications are not permitted on sequences referenced as parts.")),i.createElement("div",null,"You are editing nucleotides at the following positions: ",Array.from(e.positions).sort(((e,t)=>e-t)).map((e=>e+1)).join(", ")),i.createElement("br",null),i.createElement("table",{className:"table"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("td",{width:"15%"},i.createElement("b",null,"Type")),i.createElement("td",{width:"30%"},i.createElement("b",null,"Monomer")),i.createElement("td",{width:"15%"},i.createElement("b",null,"Symbol")),i.createElement("td",{width:"10%"},i.createElement("b",null,"Analogue")),i.createElement("td",{width:"30%"},i.createElement("b",null,"Chemical structure")))),i.createElement("tbody",null,i.createElement(MonomerRow,{monomersById:e.monomersById,monomerId:t,nucleotideType:e.nucleotideType,nucleotideComponent:E.Zp.SUGAR,onUpdateMonomerId:n}),i.createElement(MonomerRow,{monomersById:e.monomersById,monomerId:a,nucleotideType:e.nucleotideType,nucleotideComponent:E.Zp.BASE,onUpdateMonomerId:r}),i.createElement(MonomerRow,{monomersById:e.monomersById,monomerId:s,nucleotideType:e.nucleotideType,nucleotideComponent:E.Zp.PHOSPHATE,onUpdateMonomerId:o}))))}function groupMonomersById(e){const t={}
for(const n of e)t[n.id]=n
return t}function QueryingNucleotidesEditModal(e){return i.createElement(r.ZP,{query:o.I,renderLoading:r.ZP.DEFAULT_RENDER_LOADING,variables:{id:e.sequenceId}},(t=>i.createElement(r.ZP,{query:E.V,renderLoading:()=>null},(({monomers:n})=>i.createElement(NucleotidesEditModal,{isPartSequence:!(0,s.CZ)(t.sequence)&&t.sequence.containingSequences.length>0,monomersById:groupMonomersById(n),...e})))))}const T=a.mM.create({cell:{verticalAlign:"middle"},chemicalStructureSvg:{height:"80px",maxWidth:"180px"}})},556776:(e,t,n)=>{n.d(t,{Z:()=>NucleotidesTab,t:()=>m})
var a=n(769784),i=n(989526),r=n(256605),s=n(751512),o=n(697134),l=n(789385),c=n(73374),d=n(256039),u=n(838523)
const m=a.Ps`
  query ModifiedNucleotidesQuery($sequenceId: StrictString!) {
    componentSequence(id: $sequenceId) @client {
      id @client
      nucleotideType @client
      type @client
      modifiedNucleotides @client {
        position @client
        sugarMonomerId @client
        phosphateMonomerId @client
        baseMonomerId @client
      }
    }
  }
`
function NucleotidesTab({areEditsEnabled:e,bases:t,sequenceId:n,nucleotideType:a,onUpdateMod:p,onBulkUpdateMods:h}){return i.createElement(i.Fragment,null,i.createElement(c.R6,null,"Nucleotides"),i.createElement(s.ZP,{query:d.V,renderLoading:s.ZP.DEFAULT_RENDER_LOADING},(({monomers:c})=>i.createElement(s.ZP,{query:l.I,renderLoading:s.ZP.DEFAULT_RENDER_LOADING,variables:{id:n}},(l=>i.createElement(s.ZP,{query:m,renderLoading:s.ZP.DEFAULT_RENDER_LOADING,variables:{sequenceId:n},fetchPolicy:"cache-only"},(({componentSequence:s})=>i.createElement(u.Z,{areNucleotideEditsEnabled:e&&!(0,o.CZ)(l.sequence)&&0===l.sequence.containingSequences.length,areComplexPolymerEditsEnabled:!1,bases:t,modifiedNucleotides:s?s.modifiedNucleotides:[],monomers:c,nucleotideType:a,onUpdateMod:p,onBulkUpdateMods:h,sequenceId:n,isOligo:(null==s?void 0:s.type)===r.uS.oligo,isComplexPolymer:!1}))))))))}},838523:(e,t,n)=>{n.d(t,{Z:()=>O})
var a=n(64558),i=n(692013),r=n(989526),s=n(531041),o=n(232606),l=n(634489),c=n(883631),d=n(737886),u=n(900306),m=n(606783),p=n(201670),h=n(383628),E=n(271359),S=n(854185),T=n(75359),g=n(489678),f=n(63573),I=n(256039),A=n(610641),y=n(818382),_=n(961199)
const C=[10,I.qw,50],R=[{header:"",accessorKey:"displayPosition",isCollapsible:!1,isSortable:!1,width:80},{header:"Sugar",accessorKey:"sugar",flexGrow:5,isCollapsible:!1,isSortable:!1},{header:"Base",accessorKey:"base",flexGrow:5,isCollapsible:!1,isSortable:!1},{header:"3' Phosphate",accessorKey:"phosphate",flexGrow:5,isCollapsible:!1,isSortable:!1}]
const EditableCell=({nucleotideComponent:e,nucleotideType:t,openMenu:n,rowData:a,sequenceLength:i,onSetOpenMenu:s,onUpdateMod:o})=>r.createElement(A.ZP,{nucleotideComponent:e,nucleotideType:t,includeNullMonomer:e===I.Zp.PHOSPHATE&&a.position===i-1,isMenuOpen:n===e,selectedMonomerId:a[e],setMenuOpen:t=>{s(t?e:null)},updateSelectedMonomerId:t=>{let n=t
t===I.q_.NULL_MONOMER?n=null:t===I.q_.DEGENERATE&&(n=I.ys)
o(a.position,n,e)}}),Cell=({editable:e,monomersById:t,nucleotideComponent:n,nucleotideType:a,onUpdateMod:s,openMenu:o,rowData:l,setOpenMenu:c,sequenceLength:d})=>{if(e)return r.createElement(EditableCell,{nucleotideComponent:n,nucleotideType:a,openMenu:o,rowData:l,sequenceLength:d,onSetOpenMenu:c,onUpdateMod:s})
{const e=l[n],a=t[e]&&t[e].archiveRecord,getName=e=>a?`${e.name} (${e.archiveRecord.purpose})`:e.name
return r.createElement("div",{className:(0,i.iv)(N.textCell,a&&N.archivedMonomerCell)},l[n]===I.q_.DEGENERATE?"Unknown":l[n]===I.q_.NULL_MONOMER?"None":getName(t[e]))}}
class NucleotidesTableConnector extends l.C{constructor(e){super(e)
this.clearSelection=this.clearSelection.bind(this)}clearSelection(){this.dispatch((0,_.z4)(this.props.sequenceId))}enhanceProps(){var e,t,n
const a=this.reduxState().ui.molbio.nucleotidesUI[this.props.sequenceId]
return{onUpdateHoverState:e=>{this.dispatch((0,_.FY)(this.props.sequenceId,e))},editingNucleotideIndices:null!==(e=null==a?void 0:a.editingNucleotideIndices)&&void 0!==e?e:[],onCompleteEditAnimation:e=>{this.dispatch((0,_.oB)(this.props.sequenceId,e))},onSelectPositions:e=>{this.dispatch((0,_.wM)(this.props.sequenceId,e))},onDeselectPositions:e=>{this.dispatch((0,_.FQ)(this.props.sequenceId,e))},selectedPositions:null!==(t=null==a?void 0:a.selectedPositions)&&void 0!==t?t:new Set,offset:null!==(n=null==a?void 0:a.tablePaginationOffset)&&void 0!==n?n:0,setOffset:e=>{this.dispatch((0,_.Ue)(this.props.sequenceId,e))}}}}const N=i.mM.create({editingRow:{animationFillMode:"forwards",animationName:[{"0%":{backgroundColor:"rgba(235, 135, 21, 0.1)"},"67%":{backgroundColor:"rgba(235, 135, 21, 0.1)"},"100%":{backgroundColor:"rgba(235, 135, 21, 0)"}}],animationDuration:"3s"},pageOptions:{display:"flex",justifyContent:"space-between"},textCell:{paddingLeft:"12px"},archivedMonomerCell:{color:E.TG}}),O=NucleotidesTableConnector.connect((function NucleotidesTable({areNucleotideEditsEnabled:e,areComplexPolymerEditsEnabled:t,bases:n,editingNucleotideIndices:l,modifiedNucleotides:E,monomers:A,nucleotideType:_,offset:O,onBulkUpdateMods:b,onCompleteEditAnimation:v,onDeselectPositions:P,onSelectPositions:L,onUpdateHoverState:D,onUpdateMod:M,selectedPositions:w,setOffset:F,sequenceId:k,isOligo:U,isComplexPolymer:x,residueIndexToConjugates:B}){(0,o.hu)(!(e&&x),"Nucleotide edits are disallowed on complex polymers")
const[Z,q]=(0,r.useState)(null),[G,V]=(0,r.useState)(null),[H,W]=(0,S.Z)(I.u$.NUCLEOTIDES_TABLE_PAGE_SIZE),[Y,$]=(0,S.Z)(I.u$.HAS_DISMISSED_UT_FLEXIBILITY_BANNER),K=U&&(0,u.JG)()&&(0,u.uF)(E,_)&&!Y,z=e||t,Q={}
for(const e of A)Q[e.id]=e
const j=n.length,J=n.split("").slice(O,O+H).map(((e,t)=>{const n=t+O,a=E.find((e=>e.position===n))||null
return function getNucleotideTableRowData(e,t,n,a,i){var r,s
if(n)return{id:t.toString(),data:{position:t,displayPosition:t+1,sugar:n.sugarMonomerId,phosphate:n.phosphateMonomerId||I.q_.NULL_MONOMER,base:n.baseMonomerId===I.ys?I.q_.DEGENERATE:n.baseMonomerId}}
{const n=Object.values(a),o=null!==(s=null===(r=(0,y.ki)(n,e))||void 0===r?void 0:r.id)&&void 0!==s?s:I.q_.DEGENERATE
return{id:t.toString(),data:{position:t,displayPosition:t+1,sugar:(0,y.XL)(n,i).id,phosphate:(0,y.f4)(n).id,base:o}}}}(e,n,a,Q,_)})),X=J.map(((t,n)=>{var a
const s=l.includes(t.data.position)?(0,i.iv)(N.editingRow):void 0
return{id:t.id,isSelected:w.has(t.data.position),className:s,classNames:{displayPosition:s,sugar:s,phosphate:s,base:s},eventHandlers:{onAnimationEnd:()=>{l.length>0&&v(n)}},data:{position:t.data.position,displayPosition:t.data.displayPosition,sugar:r.createElement(Cell,{editable:e&&Z===t.id,monomersById:Q,nucleotideComponent:I.Zp.SUGAR,nucleotideType:_,onUpdateMod:M,openMenu:G,rowData:t.data,sequenceLength:j,setOpenMenu:V}),phosphate:r.createElement(Cell,{editable:e&&Z===t.id,monomersById:Q,nucleotideComponent:I.Zp.PHOSPHATE,nucleotideType:_,onUpdateMod:M,openMenu:G,rowData:t.data,sequenceLength:j,setOpenMenu:V}),base:r.createElement(Cell,{editable:e&&Z===t.id,monomersById:Q,nucleotideComponent:I.Zp.BASE,nucleotideType:_,onUpdateMod:M,openMenu:G,rowData:t.data,sequenceLength:j,setOpenMenu:V}),conjugates:x?(o=null!==(a=null==B?void 0:B[t.data.position])&&void 0!==a?a:null,o&&0!==o.length?r.createElement(c.ZP,{conjugates:o}):"-"):null}}
var o})),ee=s.default.unique(J.filter((e=>{var t
return w.has(e.data.position)&&!(null===(t=Q[e.data.sugar])||void 0===t?void 0:t.archiveRecord)})).map((e=>e.data.sugar))),te=s.default.unique(J.filter((e=>{var t
return w.has(e.data.position)&&!(null===(t=Q[e.data.base])||void 0===t?void 0:t.archiveRecord)})).map((e=>e.data.base))),ne=s.default.unique(J.filter((e=>{var t
return w.has(e.data.position)&&!(null===(t=Q[e.data.phosphate])||void 0===t?void 0:t.archiveRecord)})).map((e=>e.data.phosphate))),ae=[...R,{header:"Conjugates",accessorKey:"conjugates",flexGrow:5,isCollapsible:!1,isSortable:!1,width:function getConjugatesColumnWidth(){if(!B)return g.FU
const e=(0,a.w6)(O,O+H-1),t=[]
for(const n of e)B[n]&&t.push(B[n])
return B?(0,d.Xz)(t.flat()):g.FU}()}]
return r.createElement(r.Fragment,null,K&&r.createElement("div",{className:"u-small-spacing-bottom u-small-spacing-top"},r.createElement(h.ZP,{bannerType:h.ct.INFO,text:`This ${_} oligo contains both Us and Ts.`,supportingInfo:"Both Uracil and Thymine can now be inserted and displayed as natural bases in all oligos.",onDismiss:()=>{$(!0)}})),r.createElement("div",{className:(0,i.iv)(N.pageOptions)},r.createElement("div",{className:(0,i.iv)(N.pageOptions)},r.createElement(T.Z,{allowFastForwardAndBackward:!0,isLoading:!1,setOffset:F,pagination:{limit:H,offset:O,total:n.length}}),r.createElement("div",{className:"u-input-line-height"},r.createElement(p.Z,{pageSizeConfig:{availablePageSizes:C,pageSize:H,onSetPageSize:e=>{F(0)
W(e)}}}))),e&&r.createElement(m.Z,{monomersById:Q,nucleotideType:_,onBulkUpdateMods:b,selectedPositions:w,selectedBaseIds:te,selectedPhosphateIds:ne,selectedSugarIds:ee,sequenceId:k,isOligo:U})),r.createElement(g.ZP,{rowSelectionMode:z?f.rT.MULTIPLE:null,columns:x?ae:R,emptyTableText:`This ${function entityDescriptor(){return x?"complex polymer":U?"oligo":"sequence"}()} does not contain any nucleotides.`,getRowContentHeight:function getRowContentHeight(e){return B&&B[e+O]?(0,d.BY)(B[e+O]):30},headerClassName:(0,i.iv)(N.textCell),isCompact:!0,onRowMouseEnter:e=>{z&&q(e.id)
D(e.data.position)},onRowMouseLeave:e=>{null==G&&q(null)
D(null)},onRowsSelect:(e,t)=>{const n=e.map((e=>e.data.position))
t?L(n):P(n)},rows:X}))}))},961199:(e,t,n)=>{n.d(t,{FQ:()=>deselectNucleotideRows,FY:()=>hoverNucleotideIdx,Ue:()=>updateNucleotidesTablePaginationOffset,Z9:()=>closeSequence,aT:()=>editNucleotideIndices,iQ:()=>openSequence,oB:()=>finishEditingNucleotideIndex,t5:()=>hoverMonomers,wM:()=>selectNucleotideRows,xj:()=>pageNucleotideRowIntoView,yM:()=>a,z4:()=>clearNucleotideRowSelection})
var a
!function(e){e.HOVER_MONOMERS="HOVER_MONOMERS"
e.HOVER_NUCLEOTIDE_IDX="HOVER_NUCLEOTIDE_IDX"
e.SELECT_NUCLEOTIDE_ROWS="SELECT_NUCLEOTIDE_ROWS"
e.DESELECT_NUCLEOTIDE_ROWS="DESELECT_NUCLEOTIDE_ROWS"
e.CLEAR_NUCLEOTIDE_ROW_SELECTION="CLEAR_NUCLEOTIDE_ROW_SELECTION"
e.EDIT_NUCLEOTIDE_INDICES="EDIT_NUCLEOTIDE_INDICES"
e.FINISH_EDITING_NUCLEOTIDE_INDEX="FINISH_EDITING_NUCLEOTIDE_INDEX"
e.OPEN_SEQUENCE="OPEN_SEQUENCE"
e.CLOSE_SEQUENCE="CLOSE_SEQUENCE"
e.UPDATE_TABLE_PAGINATION_OFFSET="UPDATE_TABLE_PAGINATION_OFFSET"
e.PAGE_NUCLEOTIDE_ROW_INTO_VIEW="PAGE_NUCLEOTIDE_ROW_INTO_VIEW"}(a||(a={}))
function hoverMonomers(e,t){return{type:a.HOVER_MONOMERS,monomerIds:t,sequenceId:e}}function hoverNucleotideIdx(e,t){return{type:a.HOVER_NUCLEOTIDE_IDX,nucleotideIdx:t,sequenceId:e}}function editNucleotideIndices(e,t){return{type:a.EDIT_NUCLEOTIDE_INDICES,nucleotideIndices:t,sequenceId:e}}function finishEditingNucleotideIndex(e,t){return{type:a.FINISH_EDITING_NUCLEOTIDE_INDEX,nucleotideIdx:t,sequenceId:e}}function openSequence(e){return{type:a.OPEN_SEQUENCE,sequenceId:e}}function closeSequence(e){return{type:a.CLOSE_SEQUENCE,sequenceId:e}}function selectNucleotideRows(e,t){return{type:a.SELECT_NUCLEOTIDE_ROWS,sequenceId:e,positions:t}}function deselectNucleotideRows(e,t){return{type:a.DESELECT_NUCLEOTIDE_ROWS,sequenceId:e,positions:t}}function clearNucleotideRowSelection(e){return{type:a.CLEAR_NUCLEOTIDE_ROW_SELECTION,sequenceId:e}}function updateNucleotidesTablePaginationOffset(e,t){return{type:a.UPDATE_TABLE_PAGINATION_OFFSET,sequenceId:e,offset:t}}function pageNucleotideRowIntoView(e,t){return{type:a.PAGE_NUCLEOTIDE_ROW_INTO_VIEW,sequenceId:e,position:t}}},340729:(e,t,n)=>{n.d(t,{Z:()=>P})
var a=n(602652),i=n.n(a),r=n(989526),s=n(348920),o=n(955836),l=n(48047),c=n(459830),d=n(518352),u=n(204026),m=n(699418),p=n(390462),h=n(900306),E=n(16133),S=n(291689),T=n(349853),g=n(314669),f=n(5245),I=n(186905),A=n(103593),y=n(102176),_=n(59860),C=n(801455),R=n(134749),N=n(665704),O=n(205986),b=n(514674),v=n(771398)
function CreateOligoModal({initialFolderId:e,onRequestClose:t}){const[n,a]=(0,r.useState)(""),[i,P]=(0,r.useState)(n),[L,D]=(0,r.useState)(""),[M,w]=(0,r.useState)(null!=e?e:p.Z.get(p.O.INVENTORY)),[F,k]=(0,r.useState)("Untitled Oligo"),[U,x]=(0,r.useState)(F),[B,Z]=(0,r.useState)(o.Wy.DNA),[q,G]=(0,r.useState)(o.gO.NATURAL_BASES),[V,H]=(0,r.useState)(null),[W,Y]=(0,r.useState)(!1),[$,K]=(0,r.useState)(!1),[z,Q]=(0,r.useState)(),[j,J]=(0,r.useState)([]),X=0===F.trim().length||null==M||W||0===n.trim().length
function logIfFieldValueChange(e,t,n,a){if(t!==e){(0,f.bx)(`${B} oligo`,a)
n(e)}}return r.createElement(O.ZP,{title:"Create Oligo",onRequestClose:t,onRequestSubmit:async function createOligo(){(0,f.aP)(`${B} oligo`)
Y(!0)
p.Z.set(p.O.INVENTORY,M)
let e=[]
j.length&&(e=j.map((e=>e.id)))
try{const{id:a}=await v.s0({url:"/1/api/oligos/",data:{bases:n,color:L,folderId:M,name:F,nucleotideType:B,notation:q,customSyntaxName:V,tagSchemaId:z,studyIds:e}})
d.Z.invalidateFolderContents(M)
t()
m.ZP.get().openFolderItem(a)}catch(e){Y(!1)
throw e}},buttons:[{text:"Create",submit:!0,disabled:X}]},r.createElement(y.Z,null,r.createElement(N.Z,{label:"Entity Name",labelStyle:R.gF.LABEL,autoFocus:!0,value:F,onChange:e=>{k(e.target.value)},onBlur:()=>{logIfFieldValueChange(F,U,x,"name")},dataTestAttrs:{component:"CreateOligoModal",element:"nameInput"}})),r.createElement(S.l,{nucleotideType:B,onChangeSelection:e=>{Z(e)
K(!1)
q===o.gO.NATURAL_BASES&&a(l.sanitize(n,e,(0,h.JG)()))}}),r.createElement(_.Z,null,r.createElement(A.Z,{sm:6},r.createElement(y.Z,null,r.createElement(C.Z,{label:"Folder"}),r.createElement(u.Z,{enableRedesign:!0,showInventory:!0,value:M,onChange:e=>{w(e.target.value)},unsetOnFetchFail:!0}))),r.createElement(A.Z,{sm:6},r.createElement(y.Z,null,r.createElement(C.Z,{label:"Set schema"}),r.createElement(b.ZP,{allowNone:!0,oligoAwareFolderItemTypes:[c.OLIGO_NUCLEOTIDE_TYPE_TO_SEQUENCE_SUBTYPE[B]],onChange:e=>{Q(e?e.id:void 0)},selectedTagSchemaId:z,forceVisibleSelectedTagSchema:null})))),s.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&r.createElement(g.Z,{notation:q,onSelect:e=>{G(e)
e===o.gO.NATURAL_BASES&&a(l.sanitize(n,B,(0,h.JG)()))},selectedCustomSyntax:V,onSelectCustomSyntax:H,componentName:"CreateOligoModal"}),s.ZP.STUDIES_ENABLE&&r.createElement("div",{className:"form-group"},r.createElement(C.Z,{label:"Set studies"}),r.createElement(I.ZP,{onChange:e=>{J(e)},shouldAllowMultiple:!0,selectedItems:null!=j?j:[]})),r.createElement(y.Z,null,r.createElement(N.Z,{label:"Bases",labelStyle:R.gF.LABEL,error:$?{message:(0,E.DD)(B),style:R.P1.INFO}:null,isRequired:!0,value:n,onBlur:()=>{logIfFieldValueChange(n,i,P,"bases")},onChange:e=>{const t=e.target.value
if(q===o.gO.NATURAL_BASES){const{sanitizedBases:e,errors:{convertedUToT:n,convertedTToU:i}}=(0,l.getSanitizedBasesAndSanitizationErrors)(t,B,(0,h.JG)());(n||i)&&K(!0)
a(e)}else a(t)},dataTestAttrs:{component:"CreateOligoModal",element:"basesInput"}})),r.createElement(y.Z,null,r.createElement(C.Z,{label:"Color"}),r.createElement(T.Z,{color:L,onSelectColor:D})))}CreateOligoModal.propTypes={initialFolderId:i().string,onRequestClose:i().func.isRequired}
const P=CreateOligoModal},473287:(e,t,n)=>{n.d(t,{N:()=>BiochemicalPropertiesTabState,b:()=>BiochemicalPropertiesTabView})
var a=n(440281),i=n.n(a),r=n(989526),s=n(573961),o=n(955836),l=n(48047),c=n(773055),d=n(231017),u=n(766455),m=n(676276),p=n(147236)
class BiochemicalPropertiesTabState extends u.Xh{constructor({polymer:e,closeable:t,strand:n,codonTranslationTable:a=o.hR.STANDARD}){super()
this.set("polymer",e)
this.set("strand",n)
this.set("codonTranslationTable",a)
null!=t&&this.set("closeable",t)}defaults(){return{...super.defaults(),title:"Biochemical Properties",closeable:!1,preferenceKey:"biochemical-properties"}}}class BiochemicalPropertiesTabView extends i().View{constructor(e){super()
this.model=e.model
this.listenTo(this.model.get("polymer").selection(),"change:start change:end",(()=>this.render()))
this.listenTo(this.model,"change:strand change:codonTranslationTable",(()=>this.render()))}render(){const e=this.model.get("polymer")
let t,n=e.selection().start(),a=e.selection().end()
if(e instanceof c.Sequence)t=null==a?"":l.translateOnStrand(e.residueSlice(n,a),this.model.get("strand"),e.nucleotideType(),this.model.get("codonTranslationTable"))
else if(null==a){n=0
a=0
t=e.aminoAcids()}else t=e.residueSlice(n,a);(0,m.A9)(r.createElement(p.ZP,{start:n,end:a,length:e.length(),startIndex:e.startIndex(),aminoAcids:t,polymerType:e instanceof d.Z?"protein":e.nucleotideType(),strand:this.model.get("strand"),setStrand:e=>this.model.set("strand",e),codonTranslationTable:this.model.get("codonTranslationTable"),setCodonTranslationTable:e=>this.model.set("codonTranslationTable",e)}),this.el)
return this}remove(){s.unmountComponentAtNode(this.el)
return super.remove()}}BiochemicalPropertiesTabView.prototype.className="buffer-tab buffer-tab-reset buffer-tab--no-padding"},469573:(e,t,n)=>{n.d(t,{P:()=>S,Z:()=>T})
var a=n(64558),i=n(767807),r=n.n(i),s=n(531041),o=n(232606),l=n(787004),c=n(921554),d=n(947730),u=n(391028),m=n(648463),p=n(132814),h=n(216101),E=n(970211)
const S=255
class ProteinStore extends u.Z{resetState(){this.proteinsById={}
this._versionsById={}
this._proteinIdsForSearchRefCount={}
this._pendingOpenSearchView=!1
this.searchQuery=null
this.searchResults=[]
this.uiStateByProteinId={}}getProteinById(e){return this.proteinsById[e]}_setProtein(e,t){this.proteinsById[e]=t
null==this.uiStateByProteinId[e]&&(this.uiStateByProteinId[e]=this._defaultUIState())}_defaultUIState(){return{annotationEditorData:null,pendingJump:null,hoveredAnnotationId:null,selectedAnnotationId:null,selectionStart:0,selectionEnd:null}}_getUIState(e){return this.uiStateByProteinId[e]||this._defaultUIState()}getVersionsById(e){return this._versionsById[e]}getLatestVersionId(e){if(!this._versionsById[e])return this.proteinsById[e].version.id
let t=-1
for(const n of this._versionsById[e])t=Math.max(t,n.id)
return t}getHoveredAnnotationId(e){return this._getUIState(e).hoveredAnnotationId}getSelectedAnnotationId(e){return this._getUIState(e).selectedAnnotationId}getSelection(e){const t=this._getUIState(e)
return{start:t.selectionStart,end:t.selectionEnd}}getAnnotationEditorData(e){return this._getUIState(e).annotationEditorData}getPendingOpenSearchView(){return this._pendingOpenSearchView}getPendingJump(e){return this._getUIState(e).pendingJump}getAnnotation(e,t){return s.default.findWhere(this.proteinsById[e].version.annotations,{id:t})}getAnnotationAminoAcids(e,t){const n=this.getAnnotation(e,t),a=this.proteinsById[e].version.aminoAcids
return p.residueSlice(a,n.start,n.end)}getUndoVersionId(e){const t=this.proteinsById[e].version
return E.nv(t,this._versionsById[e])}_setVersions(e,t){this._versionsById[e]=t}getSearchResults(e){return s.default.where(this.searchResults,{proteinId:e})}getNumSearchResults(){return this.searchResults.length}getSelectedSearchResultIndex(){return s.default.findIndex(this.searchResults,(({isSelected:e})=>e))}getSelectedSearchResult(){return s.default.find(this.searchResults,(({isSelected:e})=>e))}_searchAminoAcids(e,t){if(!t.split("").every((e=>m.IJ(e)||"X* ".includes(e))))return[]
const n=t.replace(/\*/g,"$").replace(/X/gi,".").replace(/ /g,""),a=new RegExp(`(?=(${n}))`,"gi"),{aminoAcids:i}=this.getProteinById(e).version,r=[]
let s=a.exec(i)
for(;s;){r.push({index:s.index,aminoAcids:s[1],proteinId:e})
a.lastIndex=s.index+1
s=a.exec(i)}return r}addProteinsForSearch(e){this._proteinIdsForSearchRefCount=r()(this._proteinIdsForSearchRefCount,s.default.object([[e,{$apply:e=>(e||0)+1}]]))}removeProteinsForSearch(e){null!=this._proteinIdsForSearchRefCount[e]&&this._proteinIdsForSearchRefCount[e]>1?this._proteinIdsForSearchRefCount=r()(this._proteinIdsForSearchRefCount,s.default.object([[e,{$apply:e=>e-1}]])):this._proteinIdsForSearchRefCount=s.default.omit(this._proteinIdsForSearchRefCount,e)
this.searchResults=this.searchResults.filter((t=>t.proteinId!==e))}_getDisplaySelectionRange(e,t,n){const a=this.proteinsById[e],i=p.modelStartToDisplay(t,1),r=null==i?"":i.toString(),s=p.modelEndToDisplay(n,a.version.aminoAcids.length,1)
return{displayStart:r,displayEnd:null==s?"":s.toString()}}_updateUiState(e,t){this.uiStateByProteinId[e]=r()(this._getUIState(e),t)}_updateAnnotationEditor(e,t){this._updateUiState(e,{annotationEditorData:t})
this._recomputeAnnotationInputValidity(e)}_recomputeAnnotationInputValidity(e){const t=this.uiStateByProteinId[e].annotationEditorData
if(null!=t){const n=this._isAnnotationInputValid(e,t)
this._updateUiState(e,{annotationEditorData:{$merge:{isInputValid:n}}})}}_isAnnotationInputValid(e,t){const n=this.proteinsById[e].version.aminoAcids.length
if(!t.name||t.name.length>S)return!1
const i=(0,a.Lk)(t.displayStart),r=(0,a.Lk)(t.displayEnd)
if(null===i||(0,a.fo)(r))return!1
const s=p.displayStartToModel(i,1),o=p.displayEndToModel(r,n,1)
return p.isValidRange(s,o,n,!1)}_deselectAnnotation(e){this._updateUiState(e,{$merge:{selectedAnnotationId:null,annotationEditorData:null}})}_clampSelectionRange(e){if(this.uiStateByProteinId[e]){const t=this.proteinsById[e],clampIndex=e=>null==e?null:(0,a.uZ)(0,t.version.aminoAcids.length,e)
this._updateUiState(e,{selectionStart:{$apply:clampIndex},selectionEnd:{$apply:clampIndex}})
const n=this.uiStateByProteinId[e]
n.selectionStart===n.selectionEnd&&this._updateUiState(e,{$merge:{selectionEnd:null}})}}_handleProteinUpdate(e){this._clampSelectionRange(e)
const t=this.uiStateByProteinId[e].selectedAnnotationId
null==this.getAnnotation(e,t)&&this._deselectAnnotation(e)}_recomputeSearchResults(){if(null==this.searchQuery){this.searchResults=[]
return}const e=Object.keys(this._proteinIdsForSearchRefCount),t=s.default.flatten(e.map((e=>this._searchAminoAcids(e,this.searchQuery))))
t.length>0&&(t[0].isSelected=!0)
this.searchResults=t}payloadHandler(e){switch(e.actionType){case l.GSP:{const{protein:t,proteinId:n}=e;(0,o.hu)(t.id===n,"")
this._setProtein(n,t)
this._handleProteinUpdate(n)
this.emitChange()
break}case l.RKA:{const t=this.getProteinById(e.proteinId),n=r()(t,{$merge:e.protein})
this._setProtein(e.proteinId,n)
this._handleProteinUpdate(e.proteinId)
this.emitChange()
break}case l.CY9:{const{newProtein:t,proteinId:n}=e;(0,o.hu)(t.id===n,"")
this._setProtein(n,t)
this._handleProteinUpdate(n)
this.emitChange()
break}case l.Z8t:{const{newProtein:t,proteinId:n,newStart:a,newEnd:i}=e;(0,o.hu)(t.id===n,"")
this._setProtein(n,t)
this._updateUiState(n,{$merge:{selectionStart:a,selectionEnd:i}})
this._handleProteinUpdate(n)
this._recomputeSearchResults()
this.emitChange()
break}case l.KxQ:{const{proteinId:t,versions:n}=e
this._setVersions(t,n)
this.emitChange()
break}case l.BAZ:this._pendingOpenSearchView=!0
this.emitChange()
break
case l.dji:this._pendingOpenSearchView=!1
this.emitChange()
break
case l.g7l:this.searchQuery=e.query
this._recomputeSearchResults()
this.emitChange()
break
case l.xZ:for(let t=0;t<e.proteinIds.length;t++){const n=e.proteinIds[t]
this.addProteinsForSearch(n)}this.emitChange()
break
case l.ZzW:for(let t=0;t<e.proteinIds.length;t++){const n=e.proteinIds[t]
this.removeProteinsForSearch(n)}this.emitChange()
break
case l.o$P:{const e=this.getSelectedSearchResultIndex()
e<this.searchResults.length-1&&-1!==e&&(this.searchResults=r()(this.searchResults,s.default.object([[e,{$merge:{isSelected:!1}}],[e+1,{$merge:{isSelected:!0}}]])))
this.emitChange()
break}case l.qpo:{const e=this.getSelectedSearchResultIndex()
e>0&&(this.searchResults=r()(this.searchResults,s.default.object([[e,{$merge:{isSelected:!1}}],[e-1,{$merge:{isSelected:!0}}]])))
this.emitChange()
break}case l.t72:this.searchResults=[]
this.emitChange()
break
case l.uti:{const{proteinId:t,proteinAnnotationId:n}=e
this._updateUiState(t,{$merge:{hoveredAnnotationId:n}})
this.emitChange()
break}case l.J58:{const{proteinId:t,proteinAnnotationId:n}=e
if(this.uiStateByProteinId[t].hoveredAnnotationId===n){this._updateUiState(t,{$merge:{hoveredAnnotationId:null}})
this.emitChange()}break}case l.zlW:{const{proteinId:t,proteinAnnotationId:n}=e
this._updateUiState(t,{$merge:{selectedAnnotationId:n}})
const a=this.getAnnotation(t,n)
if(null!=a){const{name:e,type:n,start:i,color:r}=a
let{end:s}=a
0===s&&(s=this.proteinsById[t].version.aminoAcids.length)
const{displayStart:o,displayEnd:l}=this._getDisplaySelectionRange(t,i,s)
this._updateUiState(t,{$merge:{pendingJump:{start:i,end:s},selectionStart:i,selectionEnd:s,annotationEditorData:{pendingEditorFocus:!1,name:e,type:n,displayStart:o,displayEnd:l,color:r}}})
this._recomputeAnnotationInputValidity(t)
this.emitChange()}break}case l.rxq:{const{proteinId:t,startIndex:n,endIndex:a}=e,{selectionStart:i,selectionEnd:r}=this._getUIState(t)
if(n===i&&a===r)break
if(this._getUIState(t).annotationEditorData){const{displayStart:e,displayEnd:i}=this._getDisplaySelectionRange(t,n,a)
null!=this._getUIState(t).selectedAnnotationId?this._updateAnnotationEditor(t,{$set:null}):this._updateAnnotationEditor(t,{$merge:{displayStart:e,displayEnd:i}})}this._updateUiState(t,{$merge:{selectedAnnotationId:null,selectionStart:n,selectionEnd:a}})
this.emitChange()
break}case l.oe2:{const{id:t,name:n,displayLabel:a}=e,i=this.getProteinById(t)
if(i){const e=r()(i,{$merge:{name:n,displayLabel:a}})
this._setProtein(t,e)
this.emitChange()}break}case l.LNQ:{const{ids:t,folder:n}=e
let a=!1
s.default.each(t,(e=>{const t=this.getProteinById(e)
if(t){let i=t
h.isRegistry(n.source)&&(i=r()(i,{$merge:{projectFolderId:t.folder.api_identifier}}))
i=r()(i,{$merge:{folder:n}})
this._setProtein(e,i)
a=!0}}))
a&&this.emitChange()
break}case l.KQ2:{const{ids:t,folder:n}=e
let a=!1
s.default.each(t,(e=>{const t=this.getProteinById(e)
if(t){let i=t
i=r()(i,{$merge:{projectFolderId:n.api_identifier}})
this._setProtein(e,i)
a=!0}}))
a&&this.emitChange()
break}case l.vm6:{const{ids:t}=e
let n=!1
s.default.each(t,(e=>{const t=this.getProteinById(e)
if(t){const a=r()(t,{$merge:{projectFolderId:null}})
this._setProtein(e,a)
n=!0}}))
n&&this.emitChange()
break}case l.Pu7:{const{proteinId:t}=e,{selectionStart:n,selectionEnd:a}=this._getUIState(t),{displayStart:i,displayEnd:r}=this._getDisplaySelectionRange(t,n,a)
this._updateUiState(t,{$merge:{selectedAnnotationId:null,annotationEditorData:{pendingEditorFocus:!0,name:"",type:"",displayStart:i,displayEnd:r,color:c.wC()}}})
this._recomputeAnnotationInputValidity(t)
this.emitChange()
break}case l.vEN:{const{proteinId:t,name:n}=e
this._updateAnnotationEditor(t,{$merge:{name:n}})
this.emitChange()
break}case l.PWB:{const{proteinId:t,annotationType:n}=e
this._updateAnnotationEditor(t,{$merge:{type:n}})
this.emitChange()
break}case l.PYQ:{const{proteinId:t,displayStart:n}=e
this._updateAnnotationEditor(t,{$merge:{displayStart:n}})
this.emitChange()
break}case l.WLN:{const{proteinId:t,displayEnd:n}=e
this._updateAnnotationEditor(t,{$merge:{displayEnd:n}})
this.emitChange()
break}case l.GNH:{const{proteinId:t,color:n}=e
this._updateAnnotationEditor(t,{$merge:{color:n}})
this.emitChange()
break}case l.lwH:{const{proteinId:t}=e
this._updateAnnotationEditor(t,{$set:null})
this.emitChange()
break}case l.yxd:{const{proteinId:t,annotationId:n}=e
if(n===this.uiStateByProteinId[t].selectedAnnotationId){this._deselectAnnotation(t)
this.emitChange()}break}case l.zS_:{const{proteinId:t}=e
this._deselectAnnotation(t)
this.emitChange()
break}case l.BFk:{const{proteinId:t}=e
this._updateUiState(t,{$merge:{pendingJump:null}})
this.emitChange()
break}case l.Y6M:{const{proteinId:t}=e
this._updateAnnotationEditor(t,{$merge:{pendingEditorFocus:!1}})
this.emitChange()
break}}return!0}}const T=new ProteinStore(d.Z)},773364:(e,t,n)=>{n.d(t,{WI:()=>s,Wr:()=>o,pd:()=>l,yy:()=>a})
var a,i=n(531041),r=n(271359)
!function(e){e.RASMOL="RasMol"
e.POLARITY="Polarity"
e.HYDROPHOBICITY="Hydrophobicity"
e.NONE="None"}(a||(a={}))
const s={F:1,L:.943,I:.943,Y:.88,W:.878,V:.825,M:.738,P:.711,C:.68,A:.616,G:.501,T:.45,S:.359,K:.283,Q:.251,N:.236,H:.165,E:.043,D:.028,R:0},o={[a.RASMOL]:{A:"#808080",C:"#E6E600",D:"#E60A0A",E:"#E60A0A",F:"#3232AA",G:"#C0C0C0",H:"#8282D2",I:"#0F820F",K:"#145AFF",L:"#0F820F",M:"#E6E600",N:"#00DCDC",P:"#DC9682",Q:"#00DCDC",R:"#145AFF",S:"#FA9600",T:"#FA9600",V:"#0F820F",W:"#B45AB4",Y:"#3232AA"},[a.POLARITY]:{A:"#E6E600",C:"#00E600",D:"#E60000",E:"#E60000",F:"#E6E600",G:"#E6E600",H:"#0000E6",I:"#E6E600",K:"#0000E6",L:"#E6E600",M:"#E6E600",N:"#00E600",P:"#E6E600",Q:"#00E600",R:"#0000E6",S:"#00E600",T:"#00E600",V:"#E6E600",W:"#E6E600",Y:"#00E600"},[a.HYDROPHOBICITY]:i.default.mapObject(s,(e=>`rgb(${Math.round(255*e)}, 0, ${Math.round(255*(1-e))})`))},l={[a.RASMOL]:{...o[a.RASMOL],"*":"#FFF79A","?":r.Cj},[a.POLARITY]:{...o[a.POLARITY],"*":"#FFF79A","?":r.Cj},[a.HYDROPHOBICITY]:{...o[a.HYDROPHOBICITY],"*":"#FFF79A","?":r.Cj}}},648463:(e,t,n)=>{n.d(t,{Dd:()=>getRelativeIsoelectricPoint,EF:()=>getIsoelectricPoint,IJ:()=>o.Z,JY:()=>getRelativeHydrophobicity,LE:()=>getMolecularWeight,gS:()=>getAbsorbance,ju:()=>getChargeAtPH,w:()=>d.Z,z9:()=>getExtinctionCoefficient,zj:()=>p.zj})
var a=n(531041),i=n(232606),r=n(675649),s=n(172627),o=n(28181),l=n(271808),c=(n(874540),n(849317)),d=n(917484),u=n(935273),m=n(773364),p=n(623518)
function _canonicalizeAminoAcids(e){const t=e.toUpperCase();(0,i.hu)((0,o.Z)(t),"Cannot canonicalize invalid amino acids")
return t}function getMolecularWeight(e,t=!0){const n=_canonicalizeAminoAcids(e),a=r.Sm(n,(e=>(0,p.Xx)()[e]))-18.015*(n.length-1)
if(t)return a
{const e=(0,s.Z)(Array.from(n),"C")
return a-2*Math.floor(e/2)*1.00794}}function getIsoelectricPoint(e){return(0,u.Z)(_canonicalizeAminoAcids(e))}function getChargeAtPH(e,t){const n=e.toUpperCase();(0,i.hu)((0,o.Z)(n),"Cannot get charge for invalid amino acids")
return(0,c.Z)(n,t)}function getRelativeHydrophobicity(e){return"-"===e?null:m.WI[e.toUpperCase()]||0}const h=a.default.object(p.ZP.ALIGNMENT_AMINO_ACIDS,p.ZP.ALIGNMENT_AMINO_ACIDS.map((e=>{if("-"===e)return null
{const t=getIsoelectricPoint("d"),n=getIsoelectricPoint("r")
return(getIsoelectricPoint(e)-t)/(n-t)}})))
function getRelativeIsoelectricPoint(e){(0,i.Gp)(p.ZP.ALIGNMENT_AMINO_ACIDS.indexOf(e.toUpperCase())>=0,"Cannot get pI of invalid amino acid")
return h[e.toUpperCase()]}function getAbsorbance(e,t){return getExtinctionCoefficient(e,t)/getMolecularWeight(e,t.assumeCysReduced)}function getExtinctionCoefficient(e,t){return(0,l.Z)(e,t)}},933212:(e,t,n)=>{n.d(t,{F:()=>Ladders,H:()=>Ladder})
var a=n(440281),i=n.n(a)
class Ladder extends i().Model{constructor(){super(...arguments)
this.urlRoot="/1/api/ladders/"}bandSizes(){return this.get("band_sizes")}}class Ladders extends i().Collection{constructor(){super(...arguments)
this.url="/1/api/ladders/"}static initClass(){this.prototype.model=Ladder}}Ladders.initClass()},47550:(e,t,n)=>{n.d(t,{df:()=>C,ZP:()=>VisualHistoryEventListItem})
var a=n(769784),i=n(692013),r=n(764403),s=n.n(r),o=n(989526),l=n(48047),c=n(630029),d=n(256605),u=n(502567)
function convertPolymerMapNodeToVisualSequence(e){return{circular:e.mapType===d.GM.CIRCULAR,fragments:e.features.filter((e=>e.type===d.YU.FRAGMENT)).flatMap((e=>function convertPolymerFeatureNodeToVisualSequenceFragments(e){return e.regions.map((t=>{var n,a
return{start:t.start,end:t.end,color:e.color,homologyRegionOtherColor:null!==(a=null===(n=e.metadata)||void 0===n?void 0:n.homologyRegionOtherColor)&&void 0!==a?a:null}}))}(e))),length:e.length,startIndex:e.startIndex,cutSites:[],annotations:e.features.filter((e=>e.type===d.YU.ANNOTATION)).flatMap((e=>function convertPolymerFeatureNodeToVisualSequenceFeatures(e){return e.regions.map((t=>({name:e.name,start:t.start,end:t.end,strand:e.strand,color:e.color})))}(e))),overlays:e.overlays.map((e=>function convertVisualHistoryPolymerMapOverlayNodeToPolymerPreviewOverlay(e){var t
return{type:u.Up[e.type],start:e.start,end:e.end,color:null!==(t=e.color)&&void 0!==t?t:void 0}}(e)))}}var m=n(697134),p=n(129270),h=n(263137),E=n(271359),S=n(289924),T=n(10584)
function VisualHistoryEventHeader({headerInfo:e,onClickCreatedAt:t}){return o.createElement("div",null,o.createElement("p",{className:(0,i.iv)(g.message),...(0,h.Z)({component:"VisualHistory",element:"eventName"})},e.message),o.createElement("div",null,t?o.createElement(S.Z,{onClick:t},(0,T.UT)(e.createdAt)):o.createElement("span",null,(0,T.UT)(e.createdAt)),e.user&&o.createElement("span",{className:(0,i.iv)(g.user)},` by ${(0,m.CZ)(e.user)?"Inaccessible":e.user.name}`)))}const g=i.mM.create({message:{...p.sE,marginBottom:"8px"},user:{...p.XI,color:E.pp}})
var f=n(153686)
const I={[d.d4.CREATE]:{backgroundColor:E.nB,iconColor:E.xO,iconName:"plus"},[d.d4.ADD]:{backgroundColor:E.mu,iconColor:E.Ej,iconName:"pen"},[d.d4.REMOVE]:{backgroundColor:E.aw,iconColor:E.hM,iconName:"trash-can"},[d.d4.UPDATE]:{backgroundColor:E._p,iconColor:E.Wd,iconName:"arrows-rotate"}}
function VisualHistoryEventIcon({eventType:e}){const{backgroundColor:t,iconColor:n,iconName:a}=I[e]
return o.createElement("div",{className:(0,i.iv)(A.iconContainer)},o.createElement("div",{className:(0,i.iv)(A.coloredCircle),style:{backgroundColor:t}},o.createElement(f.JO,{className:(0,i.iv)(A.icon),icon:a,style:{color:n}})))}const A=i.mM.create({iconContainer:{display:"flex",width:"28px",height:"28px",backgroundColor:E.Cj,position:"absolute",left:"-15px",top:"8px"},coloredCircle:{display:"flex",width:"24px",height:"24px",borderRadius:"50%",margin:"auto"},icon:{margin:"auto"}})
var y=n(200386),_=n(507812)
const C=a.Ps`
  fragment VisualHistoryEventListItemFragment on VisualHistoryEventNode {
    eventType
    message
    createdAt
    resultingEntityVersion {
      entityId
      entityType
      entityVersionId
    }
    user {
      ... on UserNode {
        id
        name
      }
      ...InaccessibleInfoGraphQL
    }
    metadataFields {
      ...VisualHistoryEventMetadataFieldFragment
    }
    sourceInfo {
      ...VisualHistoryEventSourceInfoFragment
    }
    eventVisualization {
      ...VisualHistoryPolymerMapFragment
    }
  }
`
function VisualHistoryEventPreview({eventVisualization:e,index:t,resultingEntityType:n}){const a="protein"===n?"protein":"sequence"
return o.createElement("div",{className:(0,i.iv)(R.previewContainer)},o.createElement("p",{className:(0,i.iv)(R.residueLengthDisplay)},(0,l.formatPolymerResidueCount)(e.length,a)),o.createElement("div",{className:(0,i.iv)(R.polymerPreview)},o.createElement(c.Z,{polymer:convertPolymerMapNodeToVisualSequence(e),uniqueIdPrefix:t.toString()})))}function VisualHistoryEventListItem({event:e,onClickCreatedAt:t,showAsStandalone:n=!1,index:a}){return o.createElement("div",{className:s()((0,i.iv)(R.eventItem),{[(0,i.iv)(R.listedEventItem)]:!n})},o.createElement(VisualHistoryEventIcon,{eventType:e.eventType}),o.createElement("div",{className:(0,i.iv)(R.eventData)},o.createElement(VisualHistoryEventHeader,{headerInfo:{user:e.user,message:e.message,createdAt:e.createdAt},onClickCreatedAt:t?()=>{t(e.resultingEntityVersion.entityVersionId)}:null}),o.createElement(y.Z,{fields:e.metadataFields}),e.sourceInfo&&o.createElement(_.ZP,{sourceInfo:e.sourceInfo})),o.createElement(VisualHistoryEventPreview,{eventVisualization:e.eventVisualization,index:null!=a?a:0,resultingEntityType:e.resultingEntityVersion.entityType}))}const R=i.mM.create({eventItem:{display:"flex",border:`1px solid ${E.pF}`,borderRadius:"4px",marginBottom:"16px",position:"relative",minWidth:"fit-content"},listedEventItem:{borderLeft:"none",borderRadius:"0 4px 4px 0"},eventData:{display:"grid",gridAutoRows:"min-content",gap:"16px",borderRight:`1px solid ${E.pF}`,paddingTop:"13px",paddingLeft:"24px",minWidth:"375px",flex:1},previewContainer:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"12px 0",flex:1},residueLengthDisplay:{position:"absolute",right:"8px",top:"8px"},polymerMapContainer:{flex:1},polymerPreview:{minWidth:"200px",maxWidth:"300px"}})},229164:(e,t,n)=>{n.d(t,{uQ:()=>f,ZP:()=>VisualHistoryEventMetadataField})
var a=n(769784),i=n(692013),r=n(989526),s=n(764403),o=n.n(s),l=n(776065),c=n(55873),d=n(811599),u=n(280539),m=n(778223),p=n(938722),h=n(271359),E=n(36424)
function BioentityVersionChip(e){const{item:t}=(0,p.ZP)({id:e.id})
return null==e.id||null==e.versionId||null==t||"SequenceNode"!==t.__typename&&"ProteinNode"!==t.__typename?r.createElement(u.default,{...e}):r.createElement("span",{className:(0,i.iv)(S.wrapper)},r.createElement(u.default,{...e,onClick:()=>{"SequenceNode"===t.__typename?(0,d.mx)(e.id,e.versionId):"ProteinNode"===t.__typename&&l.Z.openFile(e.id,{versionId:e.versionId,toolbarTrigger:"openHistoryPanel",onOpen(t){t.get("protein").getActiveVersionId()!==e.versionId&&c.Z.open(e.id,{versionId:e.versionId})}})}}),t.latestVersionId!==e.versionId&&r.createElement(E.Z,{className:o()((0,i.iv)(S.clockIcon),{[(0,i.iv)(S.clockIconTableCell)]:e.size===m.TK.TABLE_CELL}),icon:"previous-version"}))}const S=i.mM.create({wrapper:{display:"flex"},clockIcon:{color:h.pp,margin:"auto",marginLeft:"-4px"},clockIconTableCell:{marginLeft:"-2px"}})
var T=n(129270),g=n(453778)
const f=a.Ps`
  fragment VisualHistoryEventMetadataFieldFragment on VisualHistoryEventMetadataFieldNode {
    name
    value {
      ... on VisualHistoryEventMetadataFieldTextValueNode {
        text
      }
      ... on EntityIdNode {
        entityId
      }
      ... on EntityVersionIdNode {
        entityId
        entityVersionId
        entityType
      }
      ... on VisualHistorySequenceAlignmentIdNode {
        alignmentId
        sequenceId
      }
    }
  }
`
function VisualHistoryEventMetadataFieldValue({value:e}){return"VisualHistoryEventMetadataFieldTextValueNode"===e.__typename?r.createElement("p",{className:(0,i.iv)(I.textValue)},e.text):"EntityIdNode"===e.__typename?r.createElement(g.Z,{id:e.entityId,size:m.TK.MINI}):"EntityVersionIdNode"===e.__typename?r.createElement(BioentityVersionChip,{id:e.entityId,versionId:Number.parseInt(e.entityVersionId,10),size:m.TK.MINI}):r.createElement("div",null)}function VisualHistoryEventMetadataField({name:e,value:t}){return r.createElement("div",null,e.length>0&&r.createElement("p",{className:(0,i.iv)(I.name)},e),r.createElement(VisualHistoryEventMetadataFieldValue,{value:t}))}const I=i.mM.create({name:{...T.cf,color:h.pp,marginBottom:"4px"},textValue:{...T.XI,marginBottom:0}})},200386:(e,t,n)=>{n.d(t,{Z:()=>VisualHistoryEventMetadataFieldList})
var a=n(692013),i=n(989526),r=n(229164)
function VisualHistoryEventMetadataFieldList({fields:e}){return i.createElement("div",{className:(0,a.iv)(s.fieldsContainer)},e.map(((e,t)=>i.createElement(r.ZP,{key:t,name:e.name,value:e.value}))))}const s=a.mM.create({fieldsContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 8px"}})},507812:(e,t,n)=>{n.d(t,{ZP:()=>VisualHistoryEventSource,j3:()=>S,zl:()=>E})
var a=n(769784),i=n(692013),r=n(989526),s=n(48047),o=n(256605),l=n(441499),c=n(132814),d=n(229164),u=n(200386),m=n(129270),p=n(263137),h=n(271359)
const E=a.Ps`
  fragment VisualHistoryPolymerMapFragment on VisualHistoryPolymerMapNode {
    mapType
    features {
      name
      color
      type
      strand
      regions {
        start
        end
      }
      metadata {
        homologyRegionOtherColor
      }
    }
    overlays {
      type
      color
      start
      end
    }
    length
    startIndex
  }
`,S=a.Ps`
  fragment VisualHistoryEventSourceInfoFragment on VisualHistoryEventSourceInfoNode {
    name
    inputs {
      sourceEntityMetadata {
        ...VisualHistoryEventMetadataFieldFragment
      }
      inputPolymerMap {
        mapType
        fragment {
          name
          color
          type
          strand
          regions {
            start
            end
          }
        }
        length
        startIndex
        entityType
      }
      metadataFields {
        ...VisualHistoryEventMetadataFieldFragment
      }
    }
  }
`
function VisualHistoryEventSourceInputPreview({polymerMap:e}){var t
const{fragment:n}=e,{start:a,end:d}=n.regions[0],u={start:a,end:d,sequenceLength:null!==(t=e.length)&&void 0!==t?t:1,strand:n.strand,circular:e.mapType===o.GM.CIRCULAR,fivePrimeDisplayInfo:{enzymeId:null,bases:null},threePrimeDisplayInfo:{enzymeId:null,bases:null}},m="protein"===e.entityType?"protein":"sequence",p=e.length?(0,s.formatPolymerResidueSubcount)(c.length(a,d,e.length),e.length,m):null
return r.createElement("div",{className:(0,i.iv)(T.inputPolymerMap)},r.createElement(l.Z,{sequence:u,fragmentColor:n.color,width:110}),p&&r.createElement("p",{className:(0,i.iv)(T.sizeText)},p))}function VisualHistoryEventSourceInputRow({input:e}){return r.createElement("div",{className:(0,i.iv)(T.inputRow),...(0,p.Z)({component:"VisualHistory",element:"source"})},r.createElement("div",{className:(0,i.iv)(T.inputMetadata)},r.createElement("div",{className:(0,i.iv)(T.entityMetadata)},r.createElement(d.ZP,{name:e.sourceEntityMetadata.name,value:e.sourceEntityMetadata.value})),r.createElement(u.Z,{fields:e.metadataFields})),r.createElement(VisualHistoryEventSourceInputPreview,{polymerMap:e.inputPolymerMap}))}function VisualHistoryEventSourceHeader({sourceInfo:e}){const t=e.inputs.length,n=t>1?` (${t})`:""
return r.createElement("p",{className:(0,i.iv)(T.header)},`${e.name}${n}`)}function VisualHistoryEventSource({sourceInfo:e}){return r.createElement("div",null,r.createElement(VisualHistoryEventSourceHeader,{sourceInfo:e}),e.inputs.map(((e,t)=>r.createElement(VisualHistoryEventSourceInputRow,{key:`sourceInput${t}`,input:e}))))}const T=i.mM.create({header:{...m.sE,color:h.pp},inputRow:{display:"flex",borderTop:`1px solid ${h.pF}`},inputMetadata:{minWidth:"200px",flex:2,padding:"8px 8px 8px 0"},entityMetadata:{marginBottom:"12px"},inputPolymerMap:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center",alignItems:"center",borderLeft:`1px solid ${h.pF}`},sizeText:{textAlign:"center"}})},485271:(e,t,n)=>{n.d(t,{DY:()=>m,jM:()=>fetchAssemblyHistory,nI:()=>createAssemblyHistoryTabState})
var a=n(769784),i=n(681896),r=n(91092),s=n(697134),o=n(540425),l=n(47550),c=n(229164),d=n(507812),u=n(379346)
const m=a.Ps`
  query AssemblyHistoryQuery($entityId: StrictString!) @engComponent(name: MOLBIO) @skipAudit {
    assemblyHistory(entityId: $entityId) {
      ... on VisualHistoryEventNode {
        ...VisualHistoryEventListItemFragment
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${l.df}
  ${c.uQ}
  ${d.j3}
  ${d.zl}
  ${(0,r.f)("InaccessibleInfo").fragment}
`
async function fetchAssemblyHistory(e){return u.ZP.isNucleotideSequence(e)||u.ZP.isProtein(e)?await(0,i.doQuerySafe)({query:m},{variables:{entityId:e}}):null}function createAssemblyHistoryTabState(e,t){return null==(null==t?void 0:t.assemblyHistory)||(0,s.CZ)(t.assemblyHistory)?null:new o.Z({polymer:e})}},992815:(e,t,n)=>{n.d(t,{$1:()=>getBaseWidthStripeParams,Zf:()=>getCircularHomologyStripeData,j_:()=>getLinearHomologyStripeData})
var a=n(64558),i=n(132814),r=n(418955)
function getBaseWidthStripeParams(e,t,n){const a=(0,r.MV)(0,1,e,n),i=a.endAngle-a.startAngle,s=i*t
return{useBaseWidthStripe:s>6,singleBaseAngleRadians:i,singleBaseArcLengthPixels:s}}function getCircularHomologyStripeData(e,t,n,s){const{start:o,end:l,color:c,homologyRegionOtherColor:d}=e,{startAngle:u,endAngle:m}=(0,r.MV)(o,l,t,s),p=m-u,h=p*n,E=6/h*p,{useBaseWidthStripe:S,singleBaseAngleRadians:T,singleBaseArcLengthPixels:g}=getBaseWidthStripeParams(t,n,s),f=S?g:6,I=S?T:E
let A,y
if(h<4*f){A=-(4*f-h)/2/h*p
y=Array(4).fill(I)}else{A=0
if(S){const e=i.length(o,l,t)
y=Array(e).fill(I)
if(e%2!=0){const e=p/h
y[y.length-1]-=e
y.push(e)}}else{const e=Math.floor(h/f)
if(e%2==0){const t=h%f/2/h*p
y=Array(e).fill(I)
y[0]+=t
y[e-1]+=t}else{const t=(f-h%f)/2/h*p
y=Array(e+1).fill(I)
y[0]-=t
y[e]-=t}}}const _=[]
let C=A
for(const e of(0,a.w6)(0,y.length-1)){const t=e%2==0?d:c,n=u+C,a=n+y[e]
C+=y[e]
_.push({pieceStartAngle:n,pieceEndAngle:a,color:t})}return _}function getLinearHomologyStripeData(e,t){let n,i
const{start:r,end:s,color:o,homologyRegionOtherColor:l}=e,c=t(r),d=t(s)-c
if(d<24){n=-(24-d)/2
i=Array(4).fill(6)}else{n=0
const e=Math.floor(d/6)
if(e%2==0){const t=d%6/2
i=Array(e).fill(6)
i[0]+=t
i[e-1]+=t}else{const t=(6-d%6)/2
i=Array(e+1).fill(6)
i[0]-=t
i[e]-=t}}const u=[]
for(const e of(0,a.w6)(0,i.length-1)){u.push({startPoint:c+n,endPoint:c+n+i[e],color:e%2==0?l:o})
n+=i[e]}return u}},563712:(e,t,n)=>{n.d(t,{GY:()=>queryTagSchemaHasContainerNameTemplate,lx:()=>queryForContainerContents,w7:()=>queryInputContainerHasNameTemplate})
var a=n(769784),i=n(232606),r=n(681896),s=n(91092),o=n(697134)
const l=a.Ps`
  query GetContainerNameTemplateQuery($tagSchemaId: StrictString!) @skipAudit @engComponent(name: INVENTORY) {
    tagSchema(id: $tagSchemaId) {
      ... on TagSchemaNode {
        id
        containerNameTemplateParts {
          datetimeFormat
          fieldId
          text
          type
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,s.f)("InaccessibleInfo").fragment}
`,c=a.Ps`
  query DoesInputContainerHaveContainerNameTemplateQuery($containerIds: [StrictString!]!)
  @skipAudit
  @engComponent(name: INVENTORY) {
    containers(ids: $containerIds) {
      ... on ContainerNode {
        id
        contents {
          ... on ContainerContentNode {
            id
            containedItemTagSchema {
              ... on TagSchemaNode {
                id
                containerNameTemplateParts {
                  datetimeFormat
                  fieldId
                  text
                  type
                }
              }
            }
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,s.f)("InaccessibleInfo").fragment}
`,d=a.Ps`
  query GetContainerContentsQuery($containerIds: [StrictString!]!) @skipAudit @engComponent(name: INVENTORY) {
    containers(ids: $containerIds) {
      ... on ContainerNode {
        id
        contents {
          ... on ContainerContentNode {
            id
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,s.f)("InaccessibleInfo").fragment}
`
async function queryTagSchemaHasContainerNameTemplate(e){const{tagSchema:t}=await(0,r.doQuerySafe)({query:l},{variables:{tagSchemaId:e}});(0,i.hu)(!(0,o.CZ)(t),"Expected containable tag schema to be accessible")
return 0!==t.containerNameTemplateParts.length}async function queryInputContainerHasNameTemplate(e){const{containers:t}=await(0,r.doQuerySafe)({query:c},{variables:{containerIds:[e]}}),n=t[0];(0,i.hu)(!(0,o.CZ)(n),"Container must be accessible")
return n.contents.length>0&&n.contents[0].containedItemTagSchema.containerNameTemplateParts.length>0}async function queryForContainerContents(e){const{containers:t}=await(0,r.doQuerySafe)({query:d},{variables:{containerIds:e}});(0,i.hu)(t.every((e=>!(0,o.CZ)(e))),"Containers must be accessible")
return t}},484827:(e,t,n)=>{n.d(t,{Ak:()=>CrumbLink,Kf:()=>getCrumbsFromListed,Xi:()=>SectionCrumbLink,ZP:()=>R,bJ:()=>SplitBreadcrumbs,wn:()=>RootCrumb})
var a=n(692013),i=n(764403),r=n.n(i),s=n(602652),o=n.n(s),l=n(989526),c=n(531041),d=n(232606),u=n(3472),m=n(459830),p=n(129270),h=n(263137),E=n(271359),S=n(198964),T=n(36424),g=n(865486),f=n(924982),I=n(808844)
const{NOTEBOOK_SECTION:A,INVENTORY_SECTION:y}=u
function MoreDots({crumbs:e}){const t=e.slice().reverse()
return l.createElement(S.ZP,{menu:l.createElement(g.ZP,{height:g.ZP.HEIGHTS.MEDIUM,width:g.ZP.WIDTHS.LARGE},t.map(((e,t)=>l.createElement(f.Z,{key:t,onSelect:e.onClick},l.createElement("span",{className:"u-small-spacing-right"},e.icon),e.text))))},l.createElement(T.Z,{icon:"overflow"}))}MoreDots.propTypes={crumbs:o().arrayOf(o().shape({icon:o().element,onClick:o().func,text:o().string.isRequired}).isRequired).isRequired}
function CrumbLink({className:e,dataTestAttrs:t,onClick:n,text:a,icon:i}){return l.createElement("span",{className:r()("breadcrumbs-crumb",{"breadcrumbs-crumb--link":null!=n},e),onClick:e=>{if(n){n(e)
e.stopPropagation()}},...(0,h.Z)(null!=t?t:{component:"CrumbLink",element:"root"})},i,i?" ":"",a)}CrumbLink.propTypes={className:o().string,icon:o().element,onClick:o().func,text:o().string.isRequired}
function SectionCrumbLink({text:e="",icon:t,onClick:n,onChangeSection:i,section:r}){return l.createElement("span",null,l.createElement(CrumbLink,{text:`${e}: `,icon:t,onClick:n}),l.createElement("span",{className:"expandedBrowser-sectionSwitcher u-pointer"},l.createElement(S.ZP,{menu:l.createElement(g.ZP,{value:r,height:g.ZP.HEIGHTS.MEDIUM,width:g.ZP.WIDTHS.LARGE},[A,y].map((e=>l.createElement(f.Z,{key:e,value:e,onSelect:()=>i(e),isSelected:r===e},(0,I.kC)(e)))))},l.createElement("span",null,l.createElement("span",{className:(0,a.iv)(C.sectionCrumbText)},(0,I.kC)(r))," ",l.createElement(T.Z,{icon:"chevron-down"})))))}function defaultRenderIcon(e){return l.createElement(T.Z,{icon:e?m.FOLDER:m.SOURCE})}function BreadcrumbDivider({divider:e="/"}){return l.createElement("span",{className:"breadcrumbs-divider"},e)}const _={component:"Breadcrumbs",element:"root"}
function Breadcrumbs(e){const{showTrailingDivider:t=!1,divider:n}=e,a=e.crumbs
return a.length<=3?l.createElement("div",{className:r()("breadcrumbs",e.className),...(0,h.Z)(_)},c.default.flatten(a.map(((e,t)=>0===t?e:[l.createElement(BreadcrumbDivider,{key:`divider-${t}`,divider:n}),e]))),t&&l.createElement(BreadcrumbDivider,{divider:n}),e.settingsIcon):l.createElement("div",{className:r()("breadcrumbs",e.className),...(0,h.Z)(_)},l.createElement(MoreDots,{crumbs:a.slice(0,-2).map((e=>e.props))}),l.createElement(BreadcrumbDivider,{divider:n}),a[a.length-2],l.createElement(BreadcrumbDivider,{divider:n}),a[a.length-1],t&&l.createElement(BreadcrumbDivider,{divider:n}),e.settingsIcon)}function getCrumbsFromListed({listed:e,openResult:t,renderListedCrumb:n,onGoToRoot:a,rootText:i,renderIcon:r,showSectionDropdown:s,section:o,onChangeSection:c,shouldLinkLastCrumb:u}){const m=[]
let p=e
for(;p;){p.api_identifier&&(p={...p,id:p.api_identifier})
const a=t.bind(null,p),i=r?r(p):defaultRenderIcon(p),h=p.name||""
let E=n?n(p):null
if(!E)if(!p.parent&&s){(0,d.hu)(Boolean(c&&o),"onChangeSection and section must be defined")
E=l.createElement(SectionCrumbLink,{key:`crumb-${p.id}`,text:h,icon:i,onClick:a,section:o,onChangeSection:c})}else E=l.createElement(CrumbLink,{key:`crumb-${p.id}`,text:h,icon:i,onClick:p.id!==(null==e?void 0:e.id)||u?a:null})
m.push(E)
p=p.parent}i&&m.push(l.createElement(CrumbLink,{key:"crumb-source",text:i,icon:r?r():defaultRenderIcon(),onClick:e?a:null}))
m.reverse()
return m}function SplitBreadcrumbs(e){const t=e.crumbs.slice(0,-1),n=e.crumbs.slice(-1)
return l.createElement("div",{className:(0,a.iv)(C.splitCrumbs)},t.length>0&&l.createElement(Breadcrumbs,{className:(0,a.iv)(C.pathCrumbs),crumbs:t,showTrailingDivider:!0}),l.createElement("div",{className:(0,a.iv)(C.currentCrumbsContainer)},l.createElement(Breadcrumbs,{className:(0,a.iv)(C.currentCrumbs),crumbs:n,settingsIcon:l.createElement("span",{className:(0,a.iv)(C.splitCrumbsSettings)},e.settingsIcon)})))}SplitBreadcrumbs.propTypes={crumbs:o().array.isRequired,settingsIcon:o().node}
function RootCrumb(e){return l.createElement(SplitBreadcrumbs,{crumbs:[l.createElement(CrumbLink,{key:"root",text:e.text})]})}RootCrumb.propTypes={text:o().string.isRequired}
const C=a.mM.create({pathCrumbs:{color:E.pp,...p.hv,marginBottom:"3px"},currentCrumbs:{...p.If,lineHeight:"28px",overflowWrap:"anywhere"},sectionCrumbText:{borderBottom:`1px dashed ${E.t0}`,":hover":{color:E.Ej,borderBottom:`1px dashed ${E.Ej}`}},splitCrumbs:{display:"flex",flexDirection:"column"},currentCrumbsContainer:{display:"flex",alignItems:"baseline"},splitCrumbsSettings:{whiteSpace:"nowrap"}}),R=Breadcrumbs},855917:(e,t,n)=>{n.d(t,{Yo:()=>createEntry,Sc:()=>createProtein,Qp:()=>createProtocol,Nt:()=>createSequence,TU:()=>openBatchSequenceImportModal,Qx:()=>openBulkAssembleDNA,BL:()=>openBulkCreateBatchesFlow,df:()=>openBulkCreateInventoryFilesFlow,_q:()=>openBulkReimportProteins,qv:()=>openBulkReimportSequences,G9:()=>openBulkTranslateDNAtoAA,T3:()=>openBulkUpdateBatchesModal,h9:()=>openBulkUpdateBioentitiesModal,Bt:()=>openBulkUpdateMixtureIngredientsModal,Xz:()=>openCRISPRGuideModal,bR:()=>openCreateMoleculeModal,pf:()=>openCreateOligoModal,J5:()=>openImportMoleculesFromSpreadsheet,QF:()=>openImportOligoModal,pn:()=>openImportProteinsFromSpreadsheet,Xi:()=>openImportSequenceForHRTemplateModal,JM:()=>openImportSequences,Rw:()=>openImportSequencesFromSpreadsheet,Gw:()=>openNewFolder,RJ:()=>showCreateEntryFromTemplateModal,CD:()=>showCreateEntryModal})
var a=n(989526),i=n(841996),r=n(848640),s=n(348920),o=n(675649),l=n(955836),c=n(893833),d=n(189143),u=n(629656),m=n(171457),p=n(336489),h=n(378045),E=n(113505),S=n(661978),T=n(372721),g=n(749278),f=n(939092)
function BulkImportMixtureIngredientsFlow(e){return a.createElement(g.Z,{importItemWord:"mixture's ingredient",importType:T.pt.UPDATE_MIXTURE_INGREDIENTS,initialSettings:{initialFolder:e.initialFolder},onImportFromSpreadsheet:S.eX,onRequestClose:()=>{e.onRequestClose()},panes:[{paneKey:T.y$.SET_IMPORT_SETTINGS_FOR_DESTINATION,configuration:m.Z.configure({showRegistries:!0,showInventory:!1,shouldShowSchemaSelector:!1,folderSelectorLabel:"Import location"})},{paneKey:T.y$.UPLOAD_SPREADSHEET,configuration:E.Z.configure()},{paneKey:T.y$.MAP_COLUMN_NAMES,configuration:p.Z.configure({onValidateSpreadsheet:S.kC,getValidColumnTypes:()=>[...T.Ll,T.BA.IGNORE],getRequiredColumnsError:(e,{selectedSchemaIds:t})=>{const n=f.lx([T.BA.INGREDIENT_MIXTURE_LABEL,T.BA.INGREDIENT_COMPONENT_BIOENTITY_LABEL],e,t,!1)
return n||null},linkItemsFolderSelectorLabel:"Look for component entities and component lots in:",linkItemsFolderSelectorDescription:"Choose any folders that we should search in to find the component entities and component lots specified in your spreadsheet. We automatically consider all existing component entities and lots in the specified mixtures, and all entities contained in the specified containers."})},{paneKey:T.y$.SHOW_ERRORS,configuration:h.Z.configure({enableReplaceLinkWithText:!1,enableSkipErrors:!0})}],title:"Bulk update mixture ingredients"})}var I=n(605713),A=n(869e3),y=n(232606),_=n(306258),C=n(719878),R=n(744093),N=n(189790),O=n(578401),b=n(459830),v=n(518352),P=n(204026),L=n(390462),D=n(974913),M=n(127942),w=n(627742),F=n(263137),k=n(103593),U=n(102176),x=n(59860),B=n(801455),Z=n(252658),q=n(514674),G=n(771398),V=n(883026),H=n(598464)
function CreateMoleculeModal({initialFolderId:e,onRequestClose:t,onRequestSubmit:n}){const[i,r]=(0,a.useState)(""),[o,l]=(0,a.useState)(null!=e?e:L.Z.get(L.O.INVENTORY)),[c,d,u]=(0,C.xY)(_.n$),[m,p]=(0,a.useState)(!1),h=0===i.trim().length||null==o||m,[E,S,T,g]=(0,M.zL)()
return a.createElement(Z._,{title:"Create Molecule",buttons:[{disabled:h,submit:!0,text:"Create"}],onRequestClose:t,onRequestSubmit:async function createMolecule(){(0,y.hu)(null!=o,"Unexpected creating molecule with null folderId")
p(!0)
const e={...(0,w.gy)(),name:i,folderId:o,tagSchema:E,tags:S}
e.chemicalSketcherValue=d
try{null!=E?await(0,V.jI)((0,w.Ue)(e),"Creating molecule...").then((()=>(0,H.mi)(_.c6.MOLFILE,d))):await(0,V.jI)(O.wM(i,o,_.c6.MOLFILE,d).then((()=>(0,H.mi)(_.c6.MOLFILE,d))),"Creating molecule...")
v.Z.invalidateFolderContents(o)
n()}catch(e){p(!1)
if(!G.d0(e))throw e
D.ZP.notifyError(e)}},startMaximized:!0},a.createElement(x.Z,null,a.createElement(k.Z,{sm:6},a.createElement(U.Z,null,a.createElement(B.Z,{label:"Entity Name",isRequired:!0}),a.createElement("input",{autoFocus:!0,type:"text",value:i,placeholder:"Untitled small molecule",onChange:e=>{r(e.target.value)},...(0,F.Z)({component:"CreateMoleculeModal",element:"input",key:"entityName"})}))),a.createElement(k.Z,{sm:6},a.createElement(U.Z,null,a.createElement(B.Z,{label:"Folder",isRequired:!0}),a.createElement(P.Z,{enableRedesign:!0,showInventory:!0,value:o,onChange:e=>{l(e.target.value)},unsetOnFetchFail:!0})))),a.createElement(x.Z,null,a.createElement(k.Z,{sm:12},a.createElement(U.Z,null,a.createElement(B.Z,{label:"Molecule Schema"}),a.createElement(q.ZP,{allowNone:!0,oligoAwareFolderItemTypes:[b.MOLECULE],...T})),a.createElement(U.Z,null,a.createElement(M.ZP,{...g})))),a.createElement(N.Z,{initialSketcherValue:c,onSketcherValueChange:u,mode:s.ZP.CHEMISTRY_ENABLE_MARVIN_BRACKET_TOOL?C.Ub.BASIC_SEARCH:C.Ub.STANDARD,inputFormat:s.ZP.CHEMISTRY_ENABLE_MOLFILE_V3000?null:R.hI.MOL,outputFormat:s.ZP.CHEMISTRY_ENABLE_MOLFILE_V3000?R.hI.MOLV3:R.hI.MOL}))}var W=n(922633),Y=n(999053),$=n(540285),K=n(776065),z=n(699418),Q=n(496022),j=n(451605),J=n(979313),X=n(241581),ee=n(602652),te=n.n(ee),ne=n(531041),ae=n(291689),ie=n(929123),re=n(334148),se=n(890711),oe=n(185837),le=n(18378),ce=n(87209),de=n(205986),ue=n(953403)
function BulkReimportSequencesModal({initialFolderId:e,onRequestClose:t,onRequestSubmit:n,onReimport:i,residueType:r}){const[s,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(e),[m,p]=(0,a.useState)(r===l.sW.NUCLEOTIDE?l.Wy.DNA:void 0)
const h=!(s.length>0&&d),E=r===l.sW.AA?r:"DNA / RNA"
return a.createElement(de.ZP,{buttons:[{disabled:h,style:re.ZJ.PRIMARY,submit:!0,text:"Reimport"}],onRequestClose:t,onRequestSubmit:async function _handleSubmit(){await async function _bulkReimportFromFiles({files:e,folderId:t,onReimport:n,residueType:a,nucleotideType:i}){try{ce.$Z("Uploading...")
let r=0
const s=await Promise.all(e.map((t=>ue.ws(t).done((()=>{r++
ce.t8(`Uploaded ${r} of ${e.length}`)}))))),c=ne.default.zip(e,s).map((([e,t])=>({name:e.name,s3Location:t})))
ce.t8("Reimporting...")
await n(c,t,i)
const d=a===l.sW.NUCLEOTIDE?i:a
D.ZP.success(`${e.length} ${d} ${o._6(e.length,"sequence")} reimported`)}catch(e){if(!G.d0(e))throw e
D.ZP.notifyError(e,{duration:0})}finally{ce.Cp()}}({files:s,folderId:d,onReimport:i,residueType:r,nucleotideType:m})
n()},title:`Bulk reimport existing ${E} sequences`},a.createElement("p",null,"Upload ",E," files with which to replace the existing ",E," sequences from the target folder. The reimport will replace its ",r===l.sW.NUCLEOTIDE?"bases":"residues"," ","and features such as annotations",r===l.sW.NUCLEOTIDE&&", primers, and translations",". Existing fields, entity links, description, and analyses such as ",r===l.sW.NUCLEOTIDE&&"CRISPR and"," ","alignments will stay as is."),a.createElement("p",null,"The file names must exactly match the sequence names or aliases."),a.createElement(U.Z,null,a.createElement(ie.Z,null,"Folder"),a.createElement(P.Z,{onChange:function _handleFolderChange({target:{value:e}}){u(e)},showInventory:!0,showRegistries:!0,value:d,unsetOnFetchFail:!0})),m&&a.createElement(ae.l,{nucleotideType:m,onChangeSelection:p}),a.createElement(U.Z,null,a.createElement(ie.Z,null,"New ",E," files"),a.createElement(oe.Z,null,ne.default.sortBy(s,"name").map((e=>a.createElement(le.Z,{key:ne.default.uniqueId("file"),file:e,onRequestRemove:()=>{c(ne.default.without(s,e))}})))),a.createElement(se.Z,{multiple:!0,onSelectFiles:function _handleSelectFiles(...e){c([...s,...e])}})))}BulkReimportSequencesModal.propTypes={initialFolderId:te().string.isRequired,onReimport:te().func.isRequired,onRequestClose:te().func.isRequired,onRequestSubmit:te().func.isRequired,residueType:te().oneOf(Object.values(l.sW)).isRequired}
const me=BulkReimportSequencesModal
var pe=n(138966),he=n(612105),Ee=n(111253),Se=n(427478),Te=n(340729),ge=n(55873),fe=n(869022),Ie=n(250417),Ae=n(131892),ye=n(345619),_e=n(216101),Ce=n(502633)
function createEntry(e){L.Z.set(L.O.NOTEBOOK,e)
openFileAfter(Y.Z.create({name:"Untitled",folder:e}).done((e=>{r.OZ(W.ZP.MODULES.ENTRY,W.ZP.CREATE_ENTRY)
return e})))}function createProtein(e){L.Z.set(L.O.INVENTORY,e)
ge.Z.promptCreateAndOpen(e)}function createProtocol(e){L.Z.set(L.O.NOTEBOOK,e)
openFileAfter(ye.Z.create({folder:e,sharing:"private"}))}function createSequence(e){L.Z.set(L.O.INVENTORY,e);(0,Ce.Z)(X.Z,{initialTab:Se._p.RAW})}function handleCloseFolderModel(){u.xv(j.Z)}function handleCreateEntryFromTemplate({entryName:e,folderId:t,templateId:n,tagSchemaId:a,schemaTags:r,initialDay:s}){i.Z.createFromTemplate({entryName:e,folderId:t,templateId:n,tagSchemaId:a,schemaTags:r,initialDay:s,onSuccess:Ae.Z.close})}function openBatchSequenceImportModal(e){(0,Ce.Z)(X.Z,{targetFolderId:e,initialTab:Se._p.CHROMOSOME})}function openBulkAssembleDNA(){o.c4(null,"/bulk-workflows/assembly")}function openBulkCreateBatchesFlow(e){c.Z.open({initialFolder:_getInitialFolder(e)})}function openBulkCreateInventoryFilesFlow(e){d.Z.open({initialFolder:_getInitialFolder(e)})}function openBulkReimportProteins(e){(0,Ce.Z)(me,{initialFolderId:e,residueType:l.sW.AA,onReimport:async(e,t,n)=>{const{sequenceIds:a}=await fe.Z.bulkReimportProteins(e,t)
await Promise.all(a.map((e=>ge.Z.open(e,{}))))}})}function openBulkReimportSequences(e){(0,Ce.Z)(me,{initialFolderId:e,residueType:l.sW.NUCLEOTIDE,onReimport:async(e,t,n)=>{const{sequenceIds:a}=await(0,$.eu)(e,t,n)
await z.ZP.get().updateSequenceVersions(a)}})}function openBulkTranslateDNAtoAA(){o.c4(null,"/bulk-workflows/translation")}function openBulkUpdateBatchesModal(e){I.Z.open({initialFolder:_getInitialFolder(e)})}function openBulkUpdateBioentitiesModal(e){A.Z.open({initialFolder:_getInitialFolder(e)})}function openBulkUpdateMixtureIngredientsModal(e){!function openBulkImportMixtureIngredientsFlow(e){u.bA(T.qF,a.createElement(BulkImportMixtureIngredientsFlow,{...e,onRequestClose:S.Mr}))}({initialFolder:_getInitialFolder(e)})}function openCreateOligoModal(e){(0,Ce.Z)(Te.Z,{initialFolderId:e})}function openCreateMoleculeModal(e){(0,Ce.Z)(CreateMoleculeModal,{initialFolderId:e})}function openImportMoleculesFromSpreadsheet(e){d.Z.open({initialFolder:_getInitialFolderWithDefault(e,L.O.INVENTORY),title:"Import Molecules",onFolderChange:e=>{L.Z.set(L.O.INVENTORY,e)},isSchemaRequired:!1,schemalessCreationEntityType:b.MOLECULE})}function openCRISPRGuideModal(e){(0,he.G)({onClose:()=>{v.Z.invalidateFolderContents(e)}})}function openFileAfter(e){e.done((e=>{K.Z.openFile(e.id)}))}function openImportOligoModal(e){d.Z.open({initialFolder:_getInitialFolderWithDefault(e,L.O.OLIGO),schemalessCreationEntityType:b.SequenceSubtype.DNA_OLIGO,title:"Import DNA / RNA Oligos from Spreadsheet",onFolderChange:e=>{L.Z.set(L.O.OLIGO,e)}})}function openImportSequences(e){(0,Ce.Z)(X.Z,{targetFolderId:e})}function openImportSequencesFromSpreadsheet(e){d.Z.open({initialFolder:_getInitialFolderWithDefault(e,L.O.INVENTORY),schemalessCreationEntityType:b.SequenceSubtype.SEQUENCE,title:"Import DNA / RNA Sequences from Spreadsheet",onFolderChange:e=>{L.Z.set(L.O.INVENTORY,e)}})}function openImportSequenceForHRTemplateModal(e){u.bA(Ee.Z,a.createElement(Ee.Z,{onRequestClose:()=>{u.xv(Ee.Z)
v.Z.invalidateFolderContents(e)}}))}function openImportProteinsFromSpreadsheet(e){d.Z.open({initialFolder:_getInitialFolderWithDefault(e,L.O.INVENTORY),schemalessCreationEntityType:b.PROTEIN,title:"Import AA Sequences from Spreadsheet",onFolderChange:e=>{L.Z.set(L.O.INVENTORY,e)}})}function openNewFolder(e,t,n){u.bA(j.Z,a.createElement(j.Z,{onRequestClose:handleCloseFolderModel,successCallback:e=>{if(null==n)(0,pe.ZP)(e.url)
else{e=(0,J.Z)(e)
n(e)}},initialParentId:e,folderType:t}))}function showCreateEntryModal(e,t){u.bA(Q.Z,a.createElement(Q.Z,{initialFolderId:null!=e?e:void 0,onRequestClose:()=>{u.xv(Q.Z)},fulfillments:[],initialStudySearchItems:null!=t?t:void 0}))}function showCreateEntryFromTemplateModal(e,t){s.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL?(0,Ce.Z)(Ie.ZP,{initialFolderId:e,initialStudySearchItems:t,onRequestClose:()=>{},onRequestSubmit:handleCreateEntryFromTemplate,isTemplateSelectorDisabled:!1}):Ae.Z.open({initialFolderId:e,onRequestSubmit:handleCreateEntryFromTemplate})}function _getInitialFolder(e){const t=null!=e&&_e.isRegistry(e.source)
return{folderId:e.id,registryId:t?e.source.id:null}}function _getInitialFolderWithDefault(e,t){const n=L.Z.get(t)
return e?{folderId:e,registryId:null}:n?{folderId:n,registryId:null}:null}},201670:(e,t,n)=>{n.d(t,{Z:()=>ListingSettingsDropdown})
var a=n(692013),i=n(989526),r=n(271359),s=n(198964),o=n(36424),l=n(865486),c=n(924982),d=n(554475)
const u=a.mM.create({toggleIcon:{color:r.TG,cursor:"pointer",fontSize:14,margin:7,flex:"none"}})
function ListingSettingsDropdown(e){return i.createElement(s.ZP,{className:"_test-settings-dropdown",menu:i.createElement(l.ZP,{width:l.ZP.WIDTHS.LARGE,height:l.ZP.HEIGHTS.MEDIUM},e.sortConfig&&(h=e.sortConfig.availableSortOptions,E=e.sortConfig.sorts,S=e.sortConfig.onSetSort,i.createElement(c.Z,{icon:"arrow-down",dataTestAttrs:{component:"ListingSettingsDropdown",element:"menu",key:"sort"}},"Sort by",i.createElement(l.ZP,null,h.map(((e,t)=>i.createElement(d.Z,{key:t.toString()},e.map((e=>{const t=`sort_${e.sortKey}_${e.reverse}`
return i.createElement(c.Z,{value:{sortKey:e.sortKey,reverse:e.reverse},isSelected:-1!==E.findIndex((t=>t.key===e.sortKey&&t.reverse===e.reverse)),onSelect:()=>{S(e.sortKey,e.reverse)},metadata:e.reverseDisplayName,key:t,dataTestAttrs:{component:"ListingSettingsDropdown",element:"menu",key:t}},e.sortKeyDisplayName)})))))))),e.displaySettingsConfig&&(m=e.displaySettingsConfig.isCompact,p=e.displaySettingsConfig.setIsCompactDisplay,i.createElement(c.Z,{icon:"table"},"Display density",i.createElement(l.ZP,null,i.createElement(c.Z,{icon:"comfortable-view",isSelected:!m,onSelect:()=>{p(!1)}},"Comfortable"),i.createElement(c.Z,{icon:"compact-view",isSelected:m,onSelect:()=>{p(!0)}},"Compact")))),e.pageSizeConfig&&(t=e.pageSizeConfig.availablePageSizes,n=e.pageSizeConfig.pageSize,r=e.pageSizeConfig.onSetPageSize,i.createElement(c.Z,{icon:"format-left",dataTestAttrs:{component:"ListingSettingsDropdown",element:"menu",key:"resultsPerPage"}},"Results per page",i.createElement(l.ZP,null,t.map((e=>i.createElement(c.Z,{key:e,isSelected:e===n,onSelect:()=>{r(e)},dataTestAttrs:{component:"ListingSettingsDropdown",element:"menu",key:`${e}`}},e)))))))},i.createElement(o.Z,{className:(0,a.iv)(u.toggleIcon),icon:"filter",altText:e.iconAltText}))
var t,n,r,m,p,h,E,S}},414049:(e,t,n)=>{n.d(t,{U:()=>sectionToReadable,q:()=>isCompactDisplay})
var a=n(814099),i=n(323539),r=n(348920),s=n(294120),o=n(89682),l=n(432128),c=n(260929),d=n(2634)
function sectionToReadable(e){switch(e){case s.SA.ANALYTICS:return o.c
case s.SA.CONNECTIONS:return"Connections"
case s.SA.HOME:return"Home"
case s.SA.JELLYFISH:return"Jellyfish (fake item type)"
case s.SA.PROCESSES:return"Workflows"
case s.SA.PROJECTS:case s.SA.PROJECT_ITEMS:return"Projects"
case s.SA.REGISTRIES:return"Registries"
case s.SA.STORAGE:return"Inventory"
case s.SA.REQUESTS:return"Requests"
case s.SA.TFI:return r.ZP.ENABLE_BENCHLING_APPS||(0,i.Oj)({feature:a.d$.LAB_AUTOMATION_DISCOVER})?"Connections":"External data"
case s.SA.BENCHLING_APPS:return"Connections"
case s.SA.SEARCH:return"Search"
case s.SA.WORKFLOWS:return(0,d.U8)("Legacy Workflows","Workflows")
case s.SA.DEVELOPER:return"Developer tools"
case s.SA.ONBOARDING_CHECKLISTS:return"Explore Benchling"
case s.SA.STUDIES:return"Studies"
default:c.ZK(`Unexpected section: ${e}`)}return null}function isCompactDisplay(){return l.Z.get(s.CL.SIDEPANEL_IS_DISPLAY_COMPACT)||!1}},949180:(e,t,n)=>{n.d(t,{Z:()=>ExpandedSidepanelThrobber})
var a=n(989526),i=n(476604)
function ExpandedSidepanelThrobber(){return a.createElement("div",{className:"u-width-full text-center"},a.createElement("div",{className:"u-small-padding"},a.createElement(i.Z,null)))}},191537:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(764403),i=n.n(a),r=n(602652),s=n(989526),o=n(36424)
class HoverIcon extends s.Component{constructor(){super(...arguments)
this._handleClick=e=>{e.stopPropagation()
"onClick"in this.props&&this.props.onClick(this.props.result)}}render(){return s.createElement("div",{className:i()("hoverLink",this.props.className),onClick:this._handleClick},s.createElement(o.Z,{className:"hoverLink-icon",icon:this.props.icon}))}}HoverIcon.propTypes={className:r.string,icon:r.string,onClick:r.func,result:r.object}
const l=HoverIcon},924768:(e,t,n)=>{n.d(t,{Cl:()=>showLoadingScreen,KI:()=>hideScreenForRouting,Nc:()=>showScreen,RM:()=>hideScreen})
var a=n(787004),i=n(776065),r=n(947730),s=n(408783),o=n(402427),l=n(744898)
function showScreen(e){r.Z.dispatch({actionType:a.ymQ,screen:e})
s.xv({autoOpenFile:!1})}function showLoadingScreen(){showScreen(o.dG)}function hideScreen(){r.Z.dispatch({actionType:a.eD4})}function hideScreenForRouting(){l.Z.getCurrentScreen()&&i.Z.openDefaultHomeState()
hideScreen()}},402427:(e,t,n)=>{n.d(t,{Jt:()=>u,Ok:()=>isInScreenSubset,dG:()=>d})
var a=n(40563),i=n(826242),r=n(615109),s=n(45219),o=n(468011),l=n(263174),c=n(505074)
const d="LOADING_SCREEN",u=[...s.Jt,...o.Jt,...l.ALL_SCREENS,...c.Jt,d,a.Kb,i.YZ,r.Yc]
function isInScreenSubset(e,t){return t.includes(e)}},528431:(e,t,n)=>{n.d(t,{Z:()=>LoadingFullScreen,d:()=>LoadingFileScreen})
var a=n(764403),i=n.n(a),r=n(989526),s=n(263137)
function BaseLoadingScreen({className:e}){return r.createElement("div",{className:i()("loading-spinner-background fullscreen-msg",e),...(0,s.Z)({component:"LoadingFullScreen",element:"root"})},r.createElement("div",{className:"loading-text"},"Loading..."))}function LoadingFileScreen(){return r.createElement(BaseLoadingScreen,{className:"loading-file-screen"})}function LoadingFullScreen(){return r.createElement(BaseLoadingScreen,null)}},168490:(e,t,n)=>{n.d(t,{ZP:()=>CreateMenu,pW:()=>ye})
var a=n(769784),i=n(64558),r=n(602652),s=n.n(r),o=n(989526),l=n(841996),c=n(107098),d=n(498571),u=n(882101),m=n(468943),p=n(382857),h=n(41706),E=n(814099),S=n(323539),T=n(348920),g=n(675649),f=n(893833),I=n(880759),A=n(42305),y=n(765549),_=n(177157),C=n(605713),R=n(639292),N=n(111489),O=n(319168),b=n(54491),v=n(171471),P=n(459830),L=n(294538),D=n(537076),M=n(184997),w=n(456148),F=n(390462),k=n(751512),U=n(91092),x=n(965131),B=n(562859),Z=n(884521),q=n(434202),G=n(907704),V=n(427478),H=n(170025),W=n(55873),Y=n(5245),$=n(855917),K=n(954419),z=n(385659),Q=n(250417),j=n(131892),J=n(550910),X=n(166459),ee=n(627742),te=n(182028),ne=n(334450),ae=n(776105),ie=n(80549),re=n(18713),se=n(108368),oe=n(545549),le=n(208713),ce=n(994401),de=n(845627),ue=n(789917),me=n(84948),pe=n(300707),he=n(124640),Ee=n(502633),Se=n(182242),Te=n(2634)
const ge=v.D2.SIDEPANEL_GLOBAL_CREATE,fe={name:"Loading...",disabled:!0}
function gateFeature(e,t){return!e.visible&&de.Z.isEnabled()?{name:e.name,icon:"star",handleOnClick:()=>{de.Z.open(t)},visible:!0,extraIconClasses:"navDropdownMenu-item-icon--green"}:e}class PresentationalCreateMenu extends o.Component{constructor(){super(...arguments)
this._handleCreateEntryFromTemplate=({entryName:e,folderId:t,templateId:n,tagSchemaId:a,schemaTags:i,initialDay:r})=>{l.Z.createFromTemplate({entryName:e,folderId:t,templateId:n,tagSchemaId:a,schemaTags:i,initialDay:r,onSuccess:j.Z.close})}}trackCreateSequence(e){m.j("sequence","open_create_sequence_modal",{product:v.XC.MOLBIO,createdFrom:V.Tg.GLOBAL,initialImportFlow:e})}_getMenuSections(){const newEntryFromTemplate=()=>{T.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL?(0,Ee.Z)(Q.ZP,{initialFolderId:F.Z.get(F.O.NOTEBOOK),onRequestClose:()=>{},onRequestSubmit:this._handleCreateEntryFromTemplate,isTemplateSelectorDisabled:!1}):j.Z.open({initialFolderId:F.Z.get(F.O.NOTEBOOK),onRequestSubmit:this._handleCreateEntryFromTemplate})}
return[[{name:"Project",icon:"source",extraClasses:"js-create-new-project",visible:(0,M.UP)().length>0}],[{name:T.ZP.ELN_ENABLE_BLANK_ENTRY_CREATION?"Entry":"Entry from template",icon:he.m.Entry,extraClasses:T.ZP.ELN_ENABLE_BLANK_ENTRY_CREATION?"js-create-new-entry":"",handleOnClick:()=>{T.ZP.ELN_ENABLE_BLANK_ENTRY_CREATION||newEntryFromTemplate()},...T.ZP.ELN_ENABLE_BLANK_ENTRY_CREATION?{submenu:[[{name:"Blank entry",icon:he.m.Entry,extraClasses:"js-create-new-entry"},{name:"Entry from template",icon:P.TEMPLATE_COLLECTION,handleOnClick:newEntryFromTemplate}]]}:{}},{name:"Protocol",icon:"protocol",extraClasses:"js-create-new-protocol",visible:T.ZP.ENABLE_PROTOCOLS}],[{name:"DNA / RNA sequence",icon:"helix",submenu:[[{name:"New DNA / RNA sequence",icon:he.m.Sequence,extraClasses:"js-create-new-sequence",visible:(0,S.cr)({feature:h.N7.CREATE,itemType:P.SEQUENCE}),handleOnClick:()=>{this.trackCreateSequence(V._p.RAW)}},{name:"New alignment",icon:"alignment",extraClasses:"js-create-alignment",visible:(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},{name:"Import DNA / RNA sequences",icon:"import",extraClasses:"js-import-sequence",visible:(0,S.cr)({feature:h.N7.IMPORT,itemType:P.SEQUENCE}),handleOnClick:()=>{this.trackCreateSequence(V._p.FILE)}},{name:"Import DNA / RNA sequences from spreadsheet",icon:"import",handleOnClick:()=>{(0,$.Rw)(null)},visible:(0,S.cr)({feature:h.N7.IMPORT,itemType:P.SEQUENCE})},{name:"Bulk import DNA / RNA from genome",icon:"import",extraClasses:"js-batch-sequence-import",visible:T.ZP.ENABLE_BATCH_SEQUENCE_IMPORT&&(0,S.cr)({feature:h.N7.IMPORT,itemType:P.SEQUENCE})},gateFeature({name:"Assemble DNA / RNA sequences by concatenation",icon:"assembly",handleOnClick:()=>{(0,G.g3)({initialMethodData:{type:q.tU.CONCATENATION,parameters:{polymerSubtype:L.Dj.dna_sequence,defaultFragmentProductionMethod:q.y0.SLICE,applyDefaultNullTerminalPhosphate:!0}}},v.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL)},visible:(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},de.l.BULK_MOLECULAR_BIOLOGY),gateFeature({name:"Assemble DNA sequences by cloning",icon:"assembly",handleOnClick:g.c4,link:"/bulk-workflows/assembly",visible:T.ZP.ENABLE_BULK_ASSEMBLY&&(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},de.l.BULK_MOLECULAR_BIOLOGY)]]},{name:"AA sequence",icon:"protein",visible:!0,submenu:[[{name:"New AA sequence",icon:"protein",handleOnClick:()=>{W.Z.promptCreateAndOpen(F.Z.get(F.O.INVENTORY))},visible:(0,S.cr)({feature:h.N7.CREATE,itemType:P.PROTEIN})},{name:"New alignment",icon:"alignment",visible:(0,S.cr)({feature:E.Ot.MOLBIO_CREATE}),handleOnClick:()=>{c.Z.open({initialProteinSpecifiers:[]})}},{name:"Import AA sequences",icon:"import",handleOnClick:()=>{m.j("protein","open_import_aa_modal",{product:v.XC.MOLBIO,createdFrom:V.Tg.GLOBAL});(0,H.g)("IMPORT_PROTEIN_MODAL_KEY")},visible:(0,S.cr)({feature:h.N7.IMPORT,itemType:P.PROTEIN})},{name:"Import AA sequences from spreadsheet",icon:"import",handleOnClick:()=>{(0,$.pn)(null)},visible:(0,S.cr)({feature:h.N7.IMPORT,itemType:P.PROTEIN})},{name:"Assemble AA sequences by concatenation",icon:"assembly",handleOnClick:()=>{(0,G.g3)({initialMethodData:{type:q.tU.CONCATENATION,parameters:{polymerSubtype:L.Dj.aa_sequence,defaultFragmentProductionMethod:q.y0.SLICE,applyDefaultNullTerminalPhosphate:!0}}},v.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL)},visible:(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},gateFeature({name:"Bulk translate DNA to AA",icon:P.PROTEIN,handleOnClick:g.c4,link:"/bulk-workflows/translation",visible:T.ZP.ENABLE_BULK_ANTIBODY&&(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},de.l.BULK_MOLECULAR_BIOLOGY)]]},{name:"Oligo",icon:he.m.OligoV2,submenu:[[{name:"New oligo",icon:he.m.OligoV2,extraClasses:"js-create-new-oligo",visible:(0,S.cr)({feature:h.N7.CREATE,itemType:P.SEQUENCE}),handleOnClick:()=>{(0,Y.Be)(V.Tg.GLOBAL_CREATE_BUTTON,V.Gp.MODAL)}},{name:"Import DNA / RNA oligos from spreadsheet",icon:"import",visible:(0,S.cr)({feature:h.N7.IMPORT,itemType:P.SEQUENCE}),handleOnClick:()=>{(0,Y.Be)(V.Tg.GLOBAL_CREATE_BUTTON,V.Gp.SPREADSHEET);(0,$.QF)(null)}},gateFeature({name:"Assemble DNA / RNA oligos by concatenation",icon:"assembly",handleOnClick:()=>{(0,G.g3)({initialMethodData:{type:q.tU.CONCATENATION,parameters:{polymerSubtype:L.Dj.dna_oligo,defaultFragmentProductionMethod:q.y0.SLICE,applyDefaultNullTerminalPhosphate:!0}}},v.D2.MOLBIO_BULK_ASSEMBLY_SETTINGS_MODAL)},visible:(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},de.l.BULK_MOLECULAR_BIOLOGY)]]},{name:"CRISPR",icon:"crispr",submenu:[[{name:"CRISPR guides",icon:"crispr",extraClasses:"js-create-new-crispr",visible:T.ZP.ENABLE_CRISPR&&(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},{name:"HR template",icon:"hr-template",extraClasses:"js-create-new-hr-template",visible:T.ZP.ENABLE_CRISPR&&(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})}]]},{name:"Entity from schema",dropup:!0,icon:he.m.BasicFolderItem,visible:(0,S.or)([{feature:E.ed.REGISTRY_CREATE},{feature:E.ed.REGISTRY_IMPORT}]),submenu:[this.getTagSchemaMenuItems(P.BASIC_FOLDER_ITEM),[{name:"Import",icon:"table",extraClasses:"js-import-inventory-files",visible:(0,S.cr)({feature:E.ed.REGISTRY_IMPORT})},gateFeature({name:"Bulk create antibodies",icon:"antibody",handleOnClick:g.c4,link:"/bulk-workflows/antibody",visible:T.ZP.ENABLE_BULK_ANTIBODY&&(0,S.cr)({feature:E.Ot.MOLBIO_CREATE})},de.l.BULK_MOLECULAR_BIOLOGY)]]},{name:"Mixture",dropup:!0,icon:he.m.Mixture,visible:(0,S.cr)({feature:E.ed.REGISTRY_MIXTURES})&&(0,S.or)([{feature:E.ed.REGISTRY_CREATE},{feature:E.ed.REGISTRY_IMPORT}]),submenu:[this.getTagSchemaMenuItems(P.MIXTURE),[{name:"Import",icon:"table",extraClasses:"js-import-inventory-files",visible:(0,S.cr)({feature:E.ed.REGISTRY_IMPORT})}]]},{name:"Molecule",icon:he.m.Molecule,visible:Boolean(T.ZP.CHEMISTRY_ENABLE_MOLECULE),submenu:[[{name:"New molecule",icon:he.m.Molecule,handleOnClick:()=>{(0,$.bR)(null)}},{name:"Import molecules",icon:"import",handleOnClick:()=>{(0,$.J5)(null)}}]]}],[{name:"Inventory",dropup:!0,icon:P.BOX,visible:(0,S.or)([{feature:E.TD.INVENTORY_CREATE},{feature:E.TD.INVENTORY_EDIT},{feature:E.TD.INVENTORY_IMPORT}]),submenu:[[{name:"New location",icon:P.LOCATION,handleOnClick:()=>{le.Z.open({initialRegistry:(0,te.C)(this.props.registries),initialParentStorable:null,actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_CREATE})&&this.props.registries&&this.props.registries.some((e=>e.permissions.locationsCreatable))},{name:"Import locations",icon:"import",handleOnClick:()=>{y.Z.open({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:this.props.registries&&this.props.registries.some((e=>e.permissions.locationsCreatable))},{name:"Update locations",icon:"table",handleOnClick:()=>{(0,O._)({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_EDIT})}],[{name:"New box",icon:P.BOX,handleOnClick:()=>{oe.Z.open({onRequestClose:i.ZT,initialRegistry:(0,te.C)(this.props.registries),initialParentStorable:null,actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_CREATE})},{name:"Import boxes",icon:"import",handleOnClick:()=>{I.Z.open({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_IMPORT})},{name:"Update boxes",icon:"table",handleOnClick:()=>{R.Z.open({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_EDIT})}],[{name:"New plate",icon:P.PLATE,handleOnClick:()=>{ce.Z.open({initialParentStorable:null,initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_CREATE})},{name:"Import plates",icon:"import",handleOnClick:()=>{_.Z.open({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_IMPORT})},{name:"Update plates",icon:"table",handleOnClick:()=>{b.Z.open({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_EDIT})}],[{name:"New container",icon:P.CONTAINER,handleOnClick:()=>{se.bA({initialRegistry:(0,te.C)(this.props.registries),initialParentStorable:null,actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_CREATE})},{name:"Import containers",icon:"import",handleOnClick:()=>{A.Z.open({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_IMPORT})},{name:"Update containers",icon:"table",handleOnClick:()=>{N.Z.open({initialRegistry:(0,te.C)(this.props.registries),actionOrigin:ge})},visible:(0,S.cr)({feature:E.TD.INVENTORY_EDIT})}]]}],[{name:"Study",icon:P.STUDY,visible:T.ZP.STUDIES_ENABLE,submenu:[this.props.studySchemaCreateOptions]}],[{name:(0,Te.U8)("Legacy workflow","Workflow"),dropup:!0,icon:P.WORKFLOW,visible:T.ZP.LEGACY_WORKFLOWS_ENABLE,handleOnClick:()=>{(0,Ee.Z)(Se.Z,{})}}],[{name:"Workflow tasks",dropup:!0,icon:P.PROCESS,visible:(0,S.cr)({feature:E.gx.PROCESSES_CREATE}),submenu:[(0,J.iz)(this.props.processTaskSchemas)],dataTestAttrs:{component:"CreateMenu",element:"workflowTasks"}}],[{name:"Request",dropup:!0,icon:P.REQUEST,visible:T.ZP.ENABLE_REQUESTS,submenu:[this.getRequestSchemaMenuItems()],dataTestAttrs:{component:"CreateMenu",element:"request"}}],[(0,u.Z)()?{name:"Insights",icon:P.ANALYTICS_DASHBOARD,visible:(0,S.cr)({feature:E.sZ.INSIGHTS_CREATE}),submenu:[[this.getCreateDashboardItem(),{name:"Analysis",icon:P.ANALYSIS,visible:!0,handleOnClick:()=>{(0,Ee.Z)(d.default,{})}}]]}:this.getCreateDashboardItem()],[{name:"Connection",dropup:!0,icon:P.CONNECTION,visible:(0,S.Oj)({feature:E.d$.LAB_AUTOMATION_CREATE}),submenu:[this.getConnectionSchemaMenuItems()]}],[{name:"More",dropup:!0,extraClasses:"navDropdownMenu-item--emptyIcon",submenu:[[{name:"Folder",icon:"folder",extraClasses:"js-create-new-folder"},{name:"Import batches",icon:"table",visible:(0,ae.Z)(),handleOnClick:()=>{f.Z.open()}},{name:"Update batches",icon:"table",visible:(0,ae.Z)(),handleOnClick:()=>{C.Z.open()}},{name:"Template",icon:"template_collection",extraClasses:"js-create-template"},{name:"Update entities",icon:"table",extraClasses:"js-import-tags",visible:(0,S.cr)({feature:E.ed.REGISTRY_EDIT})}]],dataTestAttrs:{component:"CreateMenu",element:"more"}}]]}getCreateDashboardItem(){return{name:"Dashboard",icon:P.ANALYTICS_DASHBOARD,visible:(0,S.cr)({feature:E.sZ.INSIGHTS_CREATE}),handleOnClick:()=>{(0,Ee.Z)(B.Z,{})}}}getConnectionSchemaMenuItems(){return(0,S.Oj)({feature:E.d$.LAB_AUTOMATION_CREATE})?this.props.connectionSchemas?0===this.props.connectionSchemas.length?[{disabled:!0,name:"No connection schemas"}]:this.props.connectionSchemas.map((e=>({name:e.name,handleOnClick:()=>{(0,Ee.Z)(Z.Z,{connectionSchema:e})}}))):[fe]:[]}getTagSchemaMenuItems(e){return(0,S.cr)({feature:E.ed.REGISTRY_CREATE})?this.props.tagSchemas?this.props.tagSchemas.filter((t=>t.folderItemType===e)).map((e=>({name:e.name,icon:e.iconId,handleOnClick:()=>{w.Z.open(w.Z,{createBioentityArgs:{...ee.gy(),tagSchema:e,folderId:F.Z.get(F.O.INVENTORY)}})}}))):[fe]:[]}getRequestSchemaMenuItems(){return this.props.requestSchemas?0===this.props.requestSchemas.length?[{disabled:!0,name:"No request schemas"}]:this.props.requestSchemas.map((e=>({name:e.name,handleOnClick:()=>{(0,X.getStore)().dispatch((0,ie.Z)((0,re.Z)(e,this.props.requestTemplatesById,this.props.requestTaskSchemasById)))}}))):[fe]}render(){return o.createElement(pe.Z,{className:"dropdown-menu--dropRight",items:this._getMenuSections(),positionAboveWindowBottom:!0,dataTestAttrs:{component:"CreateMenu",element:"root"}})}}PresentationalCreateMenu.propTypes={registries:s().arrayOf(D.REGISTRY_SHAPE.isRequired).isRequired,tagSchemas:s().arrayOf(D.TAG_SCHEMA_SHAPE.isRequired)}
const Ie=a.Ps`
  query AllRequestTaskSchemasQuery @skipAudit @engComponent(name: NAVIGATION) {
    ...AllRequestTaskSchemasGraphQL
  }
  ${(0,U.f)("AllRequestTaskSchemas").fragment}
`,Ae=a.Ps`
  query AllRequestTemplatesQuery @skipAudit @engComponent(name: NAVIGATION) {
    ...AllRequestTemplatesGraphQL
  }
  ${(0,U.f)("AllRequestTemplates").fragment}
`,ye=a.Ps`
  query AllConnectionSchemasQuery @skipAudit @engComponent(name: NAVIGATION) {
    ...AllConnectionSchemasGraphQL
  }
  ${(0,U.f)("AllConnectionSchemas").fragment}
`
function CreateMenu(){const e=(0,J.fl)(),t=(0,ue.AT)(null,v.D2.SIDEPANEL_GLOBAL_CREATE),n=(0,k.IJ)(ne._),a=(0,k.IJ)(K.P),r=(0,k.IJ)(z.G),s=(0,k.IJ)(ye),l=(0,k.IJ)(Ae),c=(0,k.IJ)(Ie)
return o.createElement(o.Fragment,null,o.createElement(PresentationalCreateMenu,{tagSchemas:n.type===k.NI.SUCCESS?(0,me.Z)((0,x.NA)("TagSchema",n.data.tagSchemas),{oligoAwareFolderItemTypes:[P.BASIC_FOLDER_ITEM,P.MIXTURE],requiredPermissions:["objectsCreatable"]}):null,requestSchemas:r.type===k.NI.SUCCESS?(0,x.NA)("RequestSchema",r.data.requestSchemas).filter((e=>!(0,p.ZP)(e))):null,requestTemplatesById:l.type===k.NI.SUCCESS?(0,i.m8)((0,x.NA)("RequestTemplate",l.data.requestTemplates).map((e=>[e.id,e]))):{},requestTaskSchemasById:c.type===k.NI.SUCCESS?(0,i.m8)((0,x.NA)("RequestTaskSchema",c.data.requestTaskSchemas).map((e=>[e.id,e]))):{},registries:a.type===k.NI.SUCCESS?(0,x.NA)("NavStoreRegistry",a.data.sources.flatMap((e=>"RegistryNode"===e.__typename?[e]:[]))):[],connectionSchemas:s.type===k.NI.SUCCESS?s.data.connectionSchemas.filter((e=>e.currentUserPermissionsJson.objectsCreatable)):null,processTaskSchemas:e,studySchemaCreateOptions:t,actionOrigin:ge}))}},656345:(e,t,n)=>{n.d(t,{Ih:()=>h,ZP:()=>ResourcePresenceView})
var a=n(769784),i=n(989526),r=n(212300),s=n(751512),o=n(91092),l=n(697134),c=n(788836),d=n(309718),u=n(542716),m=n(868710),p=n(119389)
const h=a.Ps`
  query UsersByIds($userIds: [StrictString!]!) @skipAudit @engComponent(name: CORE_OBJECT) {
    users(ids: $userIds) {
      ...UserAvatarInfoGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("InaccessibleInfo").fragment}
  ${(0,o.f)("UserAvatarInfo").fragment}
`
function ResourcePresenceView({resourceId:e}){const[t,n]=(0,i.useState)({resourceId:e,avatars:[]})
t.resourceId!==e&&n({resourceId:e,avatars:[]})
const a=(0,r.v9)((t=>{var n,a
return null!==(a=null===(n=t.ui.presence[e])||void 0===n?void 0:n.presentClients)&&void 0!==a?a:[]})),o=(0,r.v9)((t=>{var n
return null!==(n=t.ui.documentEditorLockState[e])&&void 0!==n?n:null})),E=[...new Set(a.map((e=>e.userId)))]
o&&!E.includes(o.userId)&&E.push(o.userId)
const S=c.Z.currentUser()?c.Z.currentUser().id:"",avatarSortFunc=(e,t)=>{if(o){if(e.id===o.userId)return-1
if(t.id===o.userId)return 1}return e.id===S?-1:t.id===S?1:e.id.localeCompare(t.id)},T=(0,s.IJ)(h,{variables:{userIds:E}}),g=o?{[o.userId]:u.l.EDITOR}:{}
if(T.type===s.NI.ERROR)return null
if(T.type===s.NI.PENDING)return i.createElement(p.ZP,{parties:t.avatars,maxAvatars:5,size:d.D.SMALL,tooltipPlacement:m.TQ.BOTTOM,framesByPartyId:g})
{const a=T.data.users.filter((e=>!(0,l.CZ)(e))).map((e=>({id:e.id,name:e.name,avatarUrl:e.avatarUrl,email:e.email,handle:e.handle}))).sort(avatarSortFunc)
hasPresenceListChanged(a,t.avatars)&&n({resourceId:e,avatars:a})
return i.createElement(p.ZP,{parties:a,maxAvatars:5,size:d.D.SMALL,tooltipPlacement:m.TQ.BOTTOM,framesByPartyId:g})}}function hasPresenceListChanged(e,t){if(e===t)return!1
if(!e||!t||e.length!==t.length)return!0
let n=!1
e.forEach(((e,a)=>{(function avatarDataIsEqual(e,t){return e.id===t.id&&e.name===t.name&&e.handle===t.handle&&e.email===t.email&&e.avatarUrl===t.avatarUrl&&e.avatar_url===t.avatar_url})(e,t[a])||(n=!0)}))
return n}},408783:(e,t,n)=>{n.d(t,{AQ:()=>closeCreateMenu,Cv:()=>uncollapse,Fd:()=>unexpand,GS:()=>openSection,N1:()=>openCreateMenu,V5:()=>listAllSources,f1:()=>openIntercomWindow,jn:()=>expand,nu:()=>closeIntercomWindow,p:()=>setStorablesSidepanelActiveRegistry,s0:()=>expandSection,sQ:()=>unexpandToSection,wo:()=>collapse,xv:()=>close})
var a=n(232606),i=n(787004),r=n(294120),s=n(537076),o=n(572928),l=n(776065),c=n(99312),d=n(947730),u=n(924768),m=n(778095),p=n(259219),h=n(399649),E=n(432128),S=n(15845),T=n(464144)
const{REGISTRY_TYPE:g}=o
function openSection(e){(0,h.eu)()
const t=T.br[e]
t&&(0,S.uy)(t)
E.Z.set(r.CL.SIDEPANEL_LAST_OPENED_SECTION,e)
u.KI()
d.Z.dispatch({actionType:i.Wd6,section:e})
if(e===r.SA.REGISTRIES){const e=E.Z.get(s.RegistryPreferences.REGISTRY_ACTIVATION_COMPLETE),t=E.Z.get(s.RegistryPreferences.ENABLE_REGISTRY_ACTIVATION),n=m.Z.getSources()
if(!n){t&&!e&&p.ZS("side_panel")
return}const a=n.filter((e=>e.sourceType===g))
!t||0!==a.length&&e||p.ZS("side_panel")}}function close(e={autoOpenFile:!0}){d.Z.dispatch({actionType:i.z5S})
e.autoOpenFile&&l.Z.openDefaultHomeState()}function expandSection(e){d.Z.dispatch({actionType:i.gce,section:e})}function expand(){var e
c.isBrowser&&(null===(e=window.getSelection())||void 0===e||e.removeAllRanges())
d.Z.dispatch({actionType:i.gce})}function unexpand(e={autoOpenFile:!0}){d.Z.dispatch({actionType:i.HpQ})
e.autoOpenFile&&l.Z.openDefaultHomeState()}function collapse(){d.Z.dispatch({actionType:i.yXN})}function uncollapse(){d.Z.dispatch({actionType:i.HpQ})}function unexpandToSection(e){d.Z.dispatch({actionType:i.HpQ,section:e})}function openCreateMenu(){d.Z.dispatch({actionType:i.ZrO})}function closeCreateMenu(){d.Z.dispatch({actionType:i.v58})}function listAllSources(e){(0,a.Gp)(e!==r.$0.STORAGE,"listAllSources should not be used for STORAGE section")
d.Z.dispatch({actionType:i.H02,section:e})}function setStorablesSidepanelActiveRegistry(e){d.Z.dispatch({actionType:i.NOh,registryId:e})}function openIntercomWindow(){d.Z.dispatch({actionType:i.zjS})}function closeIntercomWindow(){d.Z.dispatch({actionType:i.nn2})}},392113:(e,t,n)=>{n.r(t)
n.d(t,{listFolder:()=>listFolder,listFolderSection:()=>listFolderSection,listLocation:()=>listLocation,openListing:()=>openListing,openSectionAndListFolder:()=>openSectionAndListFolder,openStorageSectionWithRegistry:()=>openStorageSectionWithRegistry})
var a=n(232606),i=n(787004),r=n(239070),s=n(294120),o=n(947730),l=n(659031),c=n(431072),d=n(681002),u=n(216101),m=n(91278),p=n(539593),h=n(62315),E=n(669265),S=n(627259),T=n(68526),g=n(408783)
function openListing(e,t){return n=>{g.GS(e)
n(S.tZ(void 0,e))
n(S._c(e,E.p8[e],t,(0,m.yO)(t.filters)))}}function openSectionAndListFolder(e,t,n){(0,a.Gp)(e!==s.$0.STORAGE,"openSectionAndListFolder should not be used for STORAGE section")
o.Z.dispatch({actionType:i.BmV,section:e,folder:n})
return openListing(e,t)}function openStorageSectionWithRegistry(e,t,n){(0,a.Gp)(e===s.$0.STORAGE,"openStorageSectionWithRegistry should only be used for STORAGE section")
g.p(n)
return openListing(e,t)}function listFolder(e,t){let n
const a=(0,l.m)(e)
n=u.isRegistry(e.source)?s.$0.REGISTRIES:s.$0.PROJECT_ITEMS
return openSectionAndListFolder(n,t||a,e)}function listLocation(e,t){const n=(0,d.Ib)(t),a={...n,filters:p.sg(n.filters,{key:h.Vm.PARENT_STORABLE,operator:h.EF.IS,value:e})}
return e=>{g.p(t)
e(openListing(s.SA.STORAGE,a))}}function listFolderSection(e,t){return t=>{t(listFolder(e,T.WN((0,l.m)(e),[{...(0,h.QW)(h.Vm.TYPES),value:(0,c.Hi)(r.$.ALL)},{...(0,h.QW)(h.Vm.FOLDER_SECTION),value:r.$.ALL}])))}}},556957:(e,t,n)=>{n.d(t,{Z:()=>S})
var a=n(64558),i=n(232606),r=n(675649),s=n(787004),o=n(459830),l=n(294120),c=n(947730),d=n(391028),u=n(87960),m=n(432128),p=n(166459),h=n(621768),E=n(544192)
class SidepanelStore extends d.Z{resetState(){var e
this.isCreateMenuOpen=!1
this.expansionState=!1===m.Z.get(l.CL.SIDEPANEL_IS_OPEN)?l.KE.CLOSED:l.KE.SEMI_EXPANDED
this.section=null!==(e=m.Z.get(l.CL.SIDEPANEL_LAST_OPENED_SECTION))&&void 0!==e?e:l.SA.HOME;(0,u.w)().includes(this.section)&&(this.section=l.SA.HOME)
this.isIntercomWindowOpen=!1
this.numUnreadIntercomMessages=null
this.listedFolderBySection={[l.$0.PROJECTS]:null,[l.$0.PROJECT_ITEMS]:null,[l.$0.REGISTRIES]:null}
this.storablesSidepanelRegistryId=null
this.projectsSidepanelSection=l.$0.PROJECTS}getExpansionState(){return this.expansionState}getIsExpanded(){return this.expansionState===l.KE.FULLY_EXPANDED}getIsCreateMenuOpen(){return this.isCreateMenuOpen}getIsOpen(){return this.expansionState!==l.KE.CLOSED}getSection(){return this.getIsOpen()?this.section:null}getIsIntercomWindowOpen(){return this.isIntercomWindowOpen}getNumUnreadIntercomMessages(){return this.numUnreadIntercomMessages}getListedFolder(e){var t
return null!==(t=this.listedFolderBySection[e])&&void 0!==t?t:null}getStorablesSidepanelRegistryId(){return this.storablesSidepanelRegistryId}fixStateForExpandedOnlySections(e){this.section===l.SA.WORKFLOWS&&!E.KS.includes((0,p.getStore)().getState().models.workflows.viewState.screen)&&this.getIsOpen()&&!this.getIsExpanded()&&(this.expansionState=e?l.KE.FULLY_EXPANDED:l.KE.CLOSED)}updateProjectsSidepanelSection_onListedFolderChange(e){(0,l.zo)(e)&&(this.projectsSidepanelSection=e)}adjustSection_onSidepanelOpen(e,t){if((0,l.zo)(e)||t!==l.$0.PROJECTS){this.updateProjectsSidepanelSection_onListedFolderChange(t)
return t}return this.projectsSidepanelSection}payloadHandler(e){switch(e.actionType){case s.Wd6:null!=e.section&&(this.section=this.adjustSection_onSidepanelOpen(this.section,e.section));(this.expansionState===l.KE.CLOSED||this.expansionState===l.KE.COLLAPSED||this.section===l.SA.TFI||(0,a.q9)(h.SETTINGS_SECTIONS,this.section))&&(this.expansionState=l.KE.SEMI_EXPANDED)
m.Z.set(l.CL.SIDEPANEL_IS_OPEN,!0)
this.fixStateForExpandedOnlySections(!0)
this.emitChange()
break
case s.z5S:this.expansionState=l.KE.CLOSED
m.Z.set(l.CL.SIDEPANEL_IS_OPEN,!1)
this.emitChange()
break
case s.gce:m.Z.set(l.CL.SIDEPANEL_IS_OPEN,!0)
this.expansionState=l.KE.FULLY_EXPANDED
null!=e.section&&(this.section=e.section)
this.emitChange()
break
case s.HpQ:this.expansionState=l.KE.SEMI_EXPANDED
null!=e.section&&(this.section=e.section)
this.fixStateForExpandedOnlySections(!1)
this.emitChange()
break
case s.yXN:this.expansionState=l.KE.COLLAPSED
this.emitChange()
break
case s.BmV:(0,i.Gp)(e.section!==l.SA.STORAGE,"SIDEPANEL_LIST_SINGLE_SOURCE should not be used for STORAGE section")
this.listedFolderBySection[e.section]=e.folder
this.updateProjectsSidepanelSection_onListedFolderChange(e.section)
this.emitChange()
break
case s.H02:(0,i.Gp)(e.section!==l.SA.STORAGE,"SIDEPANEL_LIST_ALL_SOURCES should not be used for STORAGE section")
null!=e.section&&(this.section=e.section)
this.listedFolderBySection[e.section]=null
this.updateProjectsSidepanelSection_onListedFolderChange(e.section)
this.emitChange()
break
case s.NOh:this.storablesSidepanelRegistryId=e.registryId
this.emitChange()
break
case s.ZrO:this.isCreateMenuOpen=!0
this.emitChange()
break
case s.v58:this.isCreateMenuOpen=!1
this.emitChange()
break
case s.GSq:if(e.fileType===o.TEMPLATE||e.fileType===o.SUBTEMPLATE){this.expansionState=l.KE.SEMI_EXPANDED
this.section=h.Section.NOTEBOOK_SETTINGS_TEMPLATE}else null!=this.section&&-1===Object.values(l.SA).indexOf(this.section)&&(this.section=l.SA.HOME)
this.emitChange()
break
case s.zjS:r.bk({showNewMessage:!1})
window.Intercom&&(this.isIntercomWindowOpen=!0)
this.emitChange()
break
case s.nn2:r.rx()
this.isIntercomWindowOpen=!1
this.emitChange()
break
case s.hQf:if(!this.isIntercomWindowOpen){this.isIntercomWindowOpen=!0
this.emitChange()}break
case s._JT:this.numUnreadIntercomMessages=e.unreadCount
this.emitChange()}return!0}}const S=new SidepanelStore(c.Z)},817285:(e,t,n)=>{n.d(t,{G6:()=>getSortItemSections,ZP:()=>SidepanelListingSettingsDropdown,vy:()=>getSortItemSectionsForSearchParams})
var a=n(989526),i=n(232606),r=n(822248),s=n(201670),o=n(555315),l=n(62315),c=n(68526),d=n(89635),u=n(872543)
function getSortItemSections(e){return e.map((e=>function getItemsForSection(e){switch(e){case l.bo.SORT_NAME_KEY:return[{reverse:!1,reverseDisplayName:"Alphabetical"},{reverse:!0,reverseDisplayName:"Reverse alphabetical"}]
case l.bo.SORT_MODIFIED_AT_KEY:return[{reverse:!0,reverseDisplayName:"Newest"},{reverse:!1,reverseDisplayName:"Oldest"}]
case l.bo.SORT_IDENTIFIER_KEY:return[{reverse:!1,reverseDisplayName:"Alphabetical"},{reverse:!0,reverseDisplayName:"Reverse alphabetical"}]
case l.bo.SORT_CREATED_AT_KEY:case l.bo.SORT_SCHEDULED_ON_KEY:return[{reverse:!0,reverseDisplayName:"Newest"},{reverse:!1,reverseDisplayName:"Oldest"}]
case l.bo.SORT_BARCODE_KEY:case l.bo.SORT_REGISTRY_IDENTIFIER_KEY:return[{reverse:!1,reverseDisplayName:"Alphabetical"},{reverse:!0,reverseDisplayName:"Reverse alphabetical"}]
case l.bo.SORT_CHEMICAL_SIMILARITY:case l.bo.SORT_BLAST_E_VALUE:return[{reverse:!1,reverseDisplayName:"Descending"},{reverse:!0,reverseDisplayName:"Ascending"}]
default:(0,i.Gp)(!1,`Unsupported sortKey: ${e}`)
return[]}}(e).map((t=>{const n=(0,d.o7)(e)
return{...t,sortKey:e,sortKeyDisplayName:n}}))))}function getSortItemSectionsForSearchParams(e,t){const n=getSortItemSections(t)
return(0,r._e)(e)?[...getSortItemSections([l.bo.SORT_CHEMICAL_SIMILARITY]),...n]:(0,o.H1)(e)?[...getSortItemSections([l.bo.SORT_BLAST_E_VALUE]),...n]:(0,c.eT)(e)?[[{sortKey:l.bo.SORT_RELEVANCE_KEY,reverse:!1,sortKeyDisplayName:(0,d.o7)(l.bo.SORT_RELEVANCE_KEY),reverseDisplayName:null}],...n]:n}function SidepanelListingSettingsDropdown(e){var t
const n=null===(t=e.showSortSection)||void 0===t||t,i={availableSortOptions:getSortItemSectionsForSearchParams(e.searchParams,e.availableSortKeys),sorts:e.searchParams.sorts,onSetSort:(t,n)=>{e.onSetSortOrder([{key:t,reverse:n}])}}
return a.createElement(s.Z,{pageSizeConfig:{availablePageSizes:u.x_,pageSize:e.searchParams.limit,onSetPageSize:e.onSetPageSize},displaySettingsConfig:e.displaySettingsConfig,sortConfig:n?i:void 0})}},865914:(e,t,n)=>{n.d(t,{CJ:()=>queryResultsToItems,QZ:()=>queryResultsToSchemas,Xc:()=>groupSchemasByType,aF:()=>addPermissionsAndTags,fC:()=>idsToItemListingQueryParams,oi:()=>filterInterfacesByType,zx:()=>addAttributeValues})
var a=n(459830),i=n(979313),r=n(256605),s=n(965131),o=n(697134),l=n(84948),c=n(379346),d=n(10584),u=n(556543)
function idsToItemListingQueryParams(e){return{analysisIds:e.filter((e=>c.ZP.isAnalysis(e))),analyticsDashboardIds:e.filter((e=>c.ZP.isAnalyticsDashboard(e))),bioentityIds:e.filter((e=>c.ZP.isBiologicalEntity(e))),bulkAssemblyIds:e.filter((e=>c.ZP.apiIdToType(e)===a.BULK_ASSEMBLY)),collectibleIds:e.filter((e=>c.ZP.isTemplateCollectible(e))),connectionIds:e.filter((e=>c.ZP.apiIdToType(e)===a.CONNECTION)),datasetIds:e.filter((e=>c.ZP.apiIdToType(e)===a.DATASET)),entryIds:e.filter((e=>c.ZP.apiIdToType(e)===a.ENTRY)),fileIds:e.filter((e=>c.ZP.apiIdToType(e)===a.FILE)),folderIds:e.filter((e=>c.ZP.apiIdToType(e)===a.FOLDER)),jellyfishIds:e.filter((e=>c.ZP.apiIdToType(e)===a.JELLYFISH)),procedureRunIds:e.filter((e=>c.ZP.apiIdToType(e)===a.PROCEDURE_RUN)),processIds:e.filter((e=>c.ZP.apiIdToType(e)===a.PROCESS)),processOutputIds:e.filter((e=>c.ZP.apiIdToType(e)===a.PROCESS_OUTPUT)),processTaskIds:e.filter((e=>c.ZP.apiIdToType(e)===a.PROCESS_TASK)),proteinAlignmentIds:e.filter((e=>c.ZP.apiIdToType(e)===a.PROTEIN_ALIGNMENT)),protocolIds:e.filter((e=>c.ZP.apiIdToType(e)===a.PROTOCOL)),requestIds:e.filter((e=>c.ZP.apiIdToType(e)===a.REQUEST)),runIds:e.filter((e=>c.ZP.apiIdToType(e)===a.ASSAY_RUN)),sequenceAlignmentIds:e.filter((e=>c.ZP.apiIdToType(e)===a.SEQUENCE_ANALYSIS)),stageEntryIds:e.filter((e=>c.ZP.apiIdToType(e)===a.STAGE_ENTRY)),storableIds:e.filter((e=>c.ZP.isStorable(e))),studyIds:e.filter((e=>c.ZP.isStudy(e))),templateCollectionIds:e.filter((e=>c.ZP.isTemplateCollection(e))),workflowIds:e.filter((e=>c.ZP.apiIdToType(e)===a.WORKFLOW)),worklistIds:e.filter((e=>c.ZP.apiIdToType(e)===a.WORKLIST)),worksheetIds:e.filter((e=>c.ZP.apiIdToType(e)===a.WORKSHEET))}}function queryResultsToItems(e){return[...(0,o.mj)(e.analyses),...(0,o.mj)(e.analyticsDashboards),...(0,s.NA)("BioentitySummary",(0,o.mj)(e.bioentities)),...(0,s.NA)("EntrySummary",(0,o.mj)(e.entries)),...(0,o.mj)(e.folders).map((e=>(0,i.Z)((0,s.tY)("FolderWithPermissions",e)))),...(0,o.mj)(e.bulkAssemblies),...(0,o.mj)(e.collectibles),...(0,o.mj)(e.connections),...(0,o.mj)(e.datasets),...(0,o.mj)(e.files),...(0,o.mj)(e.jellyfishes),...(0,o.mj)(e.procedureRuns),...(0,o.mj)(e.processes),...(0,o.mj)(e.processOutputs),...(0,o.mj)(e.processTasks),...(0,o.mj)(e.studies),...(0,s.NA)("ProteinAlignmentSummary",(0,o.mj)(e.proteinAlignments)),...(0,s.NA)("ProtocolSummary",(0,o.mj)(e.protocols)),...(0,s.NA)("Request",(0,o.mj)(e.requests)),...(0,s.NA)("Run",(0,o.mj)(e.runs)).map((e=>function sidepanelRun(e){return{...e,id:e.apiId,name:`${e.schemaName} ${(0,d.UT)(e.createdAt)}`,warehouseId:e.id}}(e))),...(0,s.NA)("SequenceAnalysisSummary",(0,o.mj)(e.sequenceAlignments)),...(0,s.NA)("StageEntrySummary",(0,o.mj)(e.stageEntries)),...(0,s.NA)("StorableSummary",(0,o.mj)(e.storables)),...(0,o.mj)(e.templateCollectionsByIds),...(0,s.NA)("WorkflowSummary",(0,o.mj)(e.workflows)),...(0,s.NA)("WorklistSummary",(0,o.mj)(e.worklists)),...(0,o.mj)(e.worksheets)]}function queryResultsToSchemas(e,t){return function graphqlSchemasToItemListingFormat(e,t){let n=groupSchemasByType(e)
t&&(n=t(n))
return{...n,[a.ASSAY_RUN]:(0,s.NA)("RunSchema",n[a.ASSAY_RUN]),[a.BASIC_FOLDER_ITEM]:(0,s.NA)("TagSchema",n[a.BASIC_FOLDER_ITEM]),[a.BOX]:(0,s.NA)("BoxSchema",n[a.BOX]),[a.CONTAINER]:(0,s.NA)("ContainerSchema",n[a.CONTAINER]),[a.ENTRY]:(0,s.NA)("TagSchema",n[a.ENTRY]),[a.LOCATION]:(0,s.NA)("LocationSchema",n[a.LOCATION]),[a.MIXTURE]:(0,s.NA)("TagSchema",n[a.MIXTURE]),[a.MOLECULE]:(0,s.NA)("TagSchema",n[a.MOLECULE]),[a.SequenceSubtype.DNA_OLIGO]:(0,s.NA)("TagSchema",n[a.SequenceSubtype.DNA_OLIGO]),[a.SequenceSubtype.RNA_OLIGO]:(0,s.NA)("TagSchema",n[a.SequenceSubtype.RNA_OLIGO]),[a.PLATE]:(0,s.NA)("PlateSchema",n[a.PLATE]),[a.PROTEIN]:(0,s.NA)("TagSchema",n[a.PROTEIN]),[a.REQUEST]:(0,s.NA)("RequestSchema",n[a.REQUEST]),[a.SequenceSubtype.RNA_SEQUENCE]:(0,s.NA)("TagSchema",n[a.SequenceSubtype.RNA_SEQUENCE]),[a.SequenceSubtype.SEQUENCE]:(0,s.NA)("TagSchema",n[a.SequenceSubtype.SEQUENCE])}}(e,t)}function groupSchemasByType(e){const t=e.tagSchemas,n=t.filter((e=>(0,l.A)(e,{oligoAwareFolderItemTypes:[a.SequenceSubtype.SEQUENCE,a.SequenceSubtype.RNA_SEQUENCE,a.SequenceSubtype.DNA_OLIGO,a.SequenceSubtype.RNA_OLIGO],includeArchived:!0})))
return{[a.ANALYSIS]:[],[a.ANALYTICS_DASHBOARD]:[],[a.ASSAY_RUN]:e.runSchemas,[a.SEQUENCE_ANALYSIS]:[],[a.PROTEIN_ALIGNMENT]:[],[a.BASIC_FOLDER_ITEM]:t.filter((e=>(0,l.A)(e,{oligoAwareFolderItemTypes:[a.BASIC_FOLDER_ITEM],includeArchived:!0}))),[a.BOX]:e.boxSchemas,[a.BULK_ASSEMBLY]:[],[a.CONNECTION]:e.connectionSchemas,[a.CONTAINER]:e.containerSchemas,[a.DATASET]:[],[a.ENTRY]:t.filter((e=>(0,l.A)(e,{oligoAwareFolderItemTypes:[a.ENTRY],includeArchived:!0}))),[a.FILE]:[],[a.FOLDER]:[],[a.FORM_DEFINITION]:[],[a.JELLYFISH]:[],[a.LOCATION]:e.locationSchemas,[a.MIXTURE]:t.filter((e=>(0,l.A)(e,{oligoAwareFolderItemTypes:[a.MIXTURE],includeArchived:!0}))),[a.MOLECULE]:t.filter((e=>(0,l.A)(e,{oligoAwareFolderItemTypes:[a.MOLECULE],includeArchived:!0}))),[a.SequenceSubtype.DNA_OLIGO]:n.filter((e=>(0,u.MR)(e))),[a.SequenceSubtype.RNA_OLIGO]:n.filter((e=>(0,u.Gx)(e))),[a.PLATE]:e.plateSchemas,[a.PROTEIN]:t.filter((e=>(0,l.A)(e,{oligoAwareFolderItemTypes:[a.PROTEIN],includeArchived:!0}))),[a.PROCEDURE]:[],[a.PROCEDURE_RUN]:[],[a.PROCESS]:e.processTaskSchemas,[a.PROCESS_TASK]:e.processTaskSchemas,[a.PROCESS_OUTPUT]:e.processOutputSchemas,[a.PROTOCOL]:[],[a.REQUEST]:e.requestSchemas,[a.SequenceSubtype.RNA_SEQUENCE]:n.filter((e=>(0,u.p)(e))),[a.SequenceSubtype.SEQUENCE]:n.filter((e=>(0,u.Zy)(e))),[a.STAGE_ENTRY]:[],[a.STUDY]:e.studySchemas,[a.WORKFLOW]:[],[a.WORKLIST]:[],[a.WORKSHEET]:[],[a.RECIPE_RUN_TASK]:[],[a.RECIPE_UNIT_OPERATION_TASK]:[],[a.RECIPE_STEP_TASK]:[],[a.SUBTEMPLATE]:[],[a.TEMPLATE]:[],[a.TEMPLATE_COLLECTION]:[]}}function filterInterfacesByType(e,t){return e.filter((e=>{if(e.baseBioentityType){if(e.baseBioentityType.folderItemType===a.FolderItem.SEQUENCE){const n=function tagSchemaSequenceTypeToSequenceSubtype(e){switch(e){case r.Ts.DNA_SEQUENCE:return a.SequenceSubtype.SEQUENCE
case r.Ts.RNA_SEQUENCE:return a.SequenceSubtype.RNA_SEQUENCE
case r.Ts.OLIGO:return a.SequenceSubtype.DNA_OLIGO
case r.Ts.RNA_OLIGO:return a.SequenceSubtype.RNA_OLIGO
default:return null}}(e.baseBioentityType.sequenceType)
return null!=n&&t.includes(n)}return t.includes(e.baseBioentityType.folderItemType)}return!0})).map((e=>({__typename:"SchemaInterfaceNode",id:e.id,name:e.name,organization:e.organization,sqlIdentifier:e.sqlIdentifier,currentUserPermissionsJson:e.currentUserPermissionsJson,archiveRecord:e.archiveRecord,schemas:[],fields:[],baseBioentityType:e.baseBioentityType,constraint:null,labelingStrategies:e.labelingStrategies,prefix:e.prefix,nameTemplates:e.nameTemplates})))}function addPermissionsAndTags(e,t){return{...e,tags:e.tags||[],permissions:t[e.id]}}function addAttributeValues(e,t){return{...e,attributeValues:t.attributeValues}}},618762:(e,t,n)=>{n.d(t,{pW:()=>parseAnalyticsURL,Mq:()=>parseFolderURL,XO:()=>parseJellyfishURL,MP:()=>parseProjectsURL,ZN:()=>parseSearchURL,me:()=>parseStorablesURL,go:()=>parseWorkflowsURL,j0:()=>parseWorklistItemsURL,t1:()=>parseWorklistsURL})
var a=n(459830),i=n(294120),r=n(872543),s=n(62315),o=n(374669)
var l=n(675649),c=n(3472),d=n(343748),u=n(286291),m=n(551705),p=n(467412),h=n(204333),E=n(216101),S=n(539593),T=n(544192),g=n(542506),f=n(443240),I=n(659031),A=n(431072),y=n(54503),_=n(749334),C=n(681002)
function parseWorkflowsURL(e){const t=e.status?(0,l.$5)(e.status):null,n=e.templateId?(0,l.$5)(e.templateId):null,a=e.authorId?(0,l.$5)(e.authorId):null,i=(0,_.QC)(e),r=(0,g.r)(),o=[]
t&&t!==T.of&&o.push({...(0,s.QW)(s.Vm.WORKFLOW_STATUS),value:t})
n&&n!==T.of&&o.push({...(0,s.QW)(s.Vm.WORKFLOW_TEMPLATE),value:n})
a&&a!==T.of&&o.push({...(0,s.QW)(s.Vm.AUTHOR),value:[a]})
return{...r,...i,filters:S.sg(r.filters,...o,...i.filters||[])}}async function parseStorablesURL(e){const t=(0,_.QC)(e)
if(!t.filters||!S.xb(t.filters,s.Vm.REGISTRY))return null
const n=S.$V(t.filters,s.Vm.REGISTRY),a=await d.in(n),i=(0,C.Ib)(a.id)
return{searchParams:{...i,...t,filters:getStorablesFilters(i,t)},registry:a}}function getStorablesFilters(e,t){let n=[...e.filters];(0,C.D1)({...e,...t})&&(n=n.filter((e=>!C.Xv.includes(e.key))))
return S.sg(n,...t.filters||[])}function parseLegacyFolderQueryKey(e){const t=[],n=e.tagSchema||e.batchSchema||e.storableSchema
n&&t.push({...(0,s.QW)(s.Vm.SCHEMA),value:[n]})
if(e.section){let n=e.section
e.section===c.ALL_SECTION&&(n=u.Z.getDefaultSection())
t.push({...(0,s.QW)(s.Vm.FOLDER_SECTION),value:n})
t.push({...(0,s.QW)(s.Vm.TYPES),value:(0,A.Hi)(n)})}e.collection&&t.push({...(0,s.QW)(s.Vm.REGISTRY_COLLECTION_OWNER),value:e.collection})
e.scope&&t.push({...(0,s.QW)(s.Vm.ANCESTOR_FOLDER),value:e.scope})
return t}async function parseFolderURL(e,t){const n=await m.Z.fetch(e,{summary:"1"}),a=(0,I.m)(n),i=(0,_.QC)(t),r=parseLegacyFolderQueryKey(t),s={...a,...i,filters:S.sg(a.filters,...i.filters||[],...r)}
return{searchParams:E.isRegistryFolder(n)?s:(0,A.VI)(s),folder:n}}function parseSearchURL(e){const t=(0,_.QC)(e),n=(0,y.v)(),a=parseLegacyFolderQueryKey(e)
return{...n,...t,filters:S.sg(n.filters,...t.filters||[],...a)}}function parseProjectsURL(e){const t=(0,_.QC)(e)
if(null==t.query)return null
const n=(0,A.v5)(),a=parseLegacyFolderQueryKey(e)
return(0,h.t)({...n,...t,filters:S.sg((0,h.E)(n.filters),...t.filters||[],...a)})}function parseWorklistsURL(e){const t=(0,_.QC)(e),n=(0,f.K)()
return{...n,...t,filters:S.sg(n.filters,...t.filters||[])}}function parseWorklistItemsURL(e){const t=(0,_.QC)(e),n=t.filters?S.xb(t.filters,s.Vm.ITEM_IN_WORKLIST):null,a=n?n.value:null,i=(0,f._)()
return{searchParams:{...i,...t,filters:S.sg(i.filters,...t.filters||[])},worklistId:a}}function parseAnalyticsURL(e){const t=(0,_.QC)(e),n=(0,p.t)()
return{...n,...t,filters:S.sg(n.filters,...t.filters||[])}}function parseJellyfishURL(e){const t=(0,_.QC)(e),n=function getDefaultJellyfishSearchParams(){return{filters:[{...(0,s.QW)(s.Vm.TYPES),value:[a.JELLYFISH]}],limit:(0,r.z3)(),offset:0,query:"",sorts:(0,o.i_)(i.$0.JELLYFISH)}}()
return{...n,...t,filters:S.sg(n.filters,...t.filters||[])}}},969156:(e,t,n)=>{n.d(t,{PH:()=>a,gC:()=>r})
var a,i=n(602652)
!function(e){e.ALL_ACTIVE="ALL_ACTIVE"
e.STARRED="STARRED"
e.HIDDEN="HIDDEN"
e.ARCHIVED="ARCHIVED"}(a||(a={}))
const r={LAST_SELECTED_PROJECT_FILTER:"projects.lastProjectFilter",SECTION_COLLAPSED:"project_section_collapsed",LAST_SELECTED_PROJECT_ATTRIBUTE_FILTER:"projects.lastAttributeFilter"}
i.shape({collapsed:i.bool.isRequired,filterFn:i.func,filterOptions:i.arrayOf(i.shape({id:i.string.isRequired,name:i.string.isRequired})),id:i.string.isRequired,name:i.string.isRequired,renderEmptySection:i.func})},791726:(e,t,n)=>{n.d(t,{Fo:()=>r,Sk:()=>o,Ub:()=>s})
var a=n(989526),i=(n(531041),n(459830),n(572928))
n(432128),n(62315),n(379346),n(567e3),n(969156)
const r="SHARED_WITH_ME",s="MY_PROJECTS",o="STARRED"
i.ALL,i.HIDDEN,i.ARCHIVED},204333:(e,t,n)=>{n.d(t,{E:()=>translateCompositeToSightglass,t:()=>sanitizeProjectParamsForGranularPermissions})
var a=n(232606),i=n(348920),r=n(459830),s=n(539593),o=n(62315),l=n(788836),c=n(379346),d=n(969156),u=n(791726)
const m=[o.Vm.PROJECT_ATTRIBUTE,o.Vm.SHARED_WITH]
function translateCompositeToSightglass(e){const t=e.filter((e=>!m.includes(e.key))),n=[...function translateSharedWith(e){if(!e||null==e.value)return[]
const t=l.Z.currentUser().id;(0,a.Gp)("string"==typeof e.value,"Invalid value")
const n=e.value,i=c.ZP.apiIdToMaybeType(n)
return n===u.Ub?[{key:o.Vm.OWNER,operator:o.EF.IS_ONE_OF,value:{userIds:[t],organizationIds:[]}}]:n===u.Fo?[{key:o.Vm.OWNER,operator:o.EF.IS_NONE_OF,value:{userIds:[t],organizationIds:[]}},{key:o.Vm.OWNER_OR_COLLABORATOR,operator:o.EF.IS_ONE_OF,value:{userIds:[t],organizationIds:[],teamIds:[]}}]:i===r.TEAM?[{key:o.Vm.OWNER_OR_COLLABORATOR,operator:o.EF.IS_ONE_OF,value:{teamIds:[n],organizationIds:[],userIds:[]}}]:i===r.ENTITY?[{key:o.Vm.OWNER_OR_COLLABORATOR,operator:o.EF.IS_ONE_OF,value:{teamIds:[],organizationIds:[n],userIds:[]}}]:[]}((0,s.xb)(e,o.Vm.SHARED_WITH)),...function translateAttribute(e){if(!e||null==e.value)return[{key:o.Vm.HIDDEN,operator:o.EF.IS,value:"not_hidden"}];(0,a.Gp)("string"==typeof e.value,"Invalid value")
const t=e.value
return t===d.PH.ALL_ACTIVE?[{key:o.Vm.HIDDEN,operator:o.EF.IS,value:"not_hidden"}]:t===d.PH.STARRED?[{key:o.Vm.STARRED,operator:o.EF.IS,value:"starred"}]:t===d.PH.HIDDEN?[{key:o.Vm.HIDDEN,operator:o.EF.IS,value:"hidden"}]:t===d.PH.ARCHIVED?[{key:o.Vm.ARCHIVE_PURPOSES,operator:o.EF.IS_ONE_OF,value:i.ZP.ARCHIVE_NON_EXPENDABLE_PURPOSES}]:[]}((0,s.xb)(e,o.Vm.PROJECT_ATTRIBUTE))];(0,a.Gp)(n.map((e=>e.key)).every((e=>!t.map((e=>e.key)).includes(e))),"Generated filter conflicts with existing filter")
return[...t,...n]}function sanitizeProjectParamsForGranularPermissions(e){const t=s.xb(e.filters,o.Vm.TYPES),n=s.xb(e.filters,o.Vm.TOP_LEVEL_PERMISSIONS),a=[r.SOURCE]
let l=[...e.filters]
if(i.ZP.PERMISSIONS_ENABLE_GRANULAR_FOLDER_PERMISSIONS){a.push(r.FOLDER)
n||l.push({...(0,o.QW)(o.Vm.TOP_LEVEL_PERMISSIONS),value:"true"})}else l=l.filter((e=>e.key!==o.Vm.TOP_LEVEL_PERMISSIONS))
t&&t.value.length===a.length&&t.value.every((e=>a.includes(e)))||(l=s.sg(l,{...(0,o.QW)(o.Vm.TYPES),value:a}))
return{...e,filters:l}}},431072:(e,t,n)=>{n.d(t,{H:()=>T,Hi:()=>getDefaultTypesForSection,Ou:()=>I,VI:()=>resolveFolderFilter,pr:()=>getDefaultProjectItemsSearchParams,v5:()=>getDefaultProjectSearchParams,wZ:()=>g})
var a=n(348920),i=n(3472),r=n(239070),s=n(459830),o=n(294120),l=n(537076),c=n(969156),d=n(872543),u=n(432128),m=n(539593),p=n(62315),h=n(374669),E=n(68526),S=n(645773)
function getDefaultProjectSearchParams(){return{offset:0,limit:(0,d.z3)(),filters:getInitialProjectFilters(),query:"",sorts:h.i_(o.$0.PROJECTS)}}function getInitialProjectFilters(){const e=[],t=[s.SOURCE]
if(a.ZP.PERMISSIONS_ENABLE_GRANULAR_FOLDER_PERMISSIONS){t.push(s.FOLDER)
e.push({...(0,p.QW)(p.Vm.TOP_LEVEL_PERMISSIONS),value:"true"})}e.push({...(0,p.QW)(p.Vm.TYPES),value:t})
const n=u.Z.get(c.gC.LAST_SELECTED_PROJECT_FILTER)
n&&e.push({key:p.Vm.SHARED_WITH,operator:p.EF.IS,value:null!=n?n:null})
const i=u.Z.get(c.gC.LAST_SELECTED_PROJECT_ATTRIBUTE_FILTER)
e.push({key:p.Vm.PROJECT_ATTRIBUTE,operator:p.EF.IS,value:null!=i?i:null})
return e}const T={key:p.Vm.FOLDER_SECTION,operator:p.EF.IS,value:i.INVENTORY_SECTION},g={key:p.Vm.FOLDER_SECTION,operator:p.EF.IS,value:i.NOTEBOOK_SECTION},f={key:p.Vm.FOLDER_SECTION,operator:p.EF.IS,value:i.ALL_SECTION},I=[p.Vm.FOLDER_SECTION,p.Vm.FOLDER,p.Vm.ANCESTOR_FOLDER]
function getDefaultProjectItemsSearchParams(e){const t=r.$.ALL
return{filters:[f,{...(0,p.QW)(p.Vm.FOLDER),value:e.api_identifier||e.id},{...(0,p.QW)(p.Vm.TYPES),value:getDefaultTypesForSection(t)}],limit:(0,d.z3)(),offset:0,query:"",sorts:h.i_(o.$0.PROJECT_ITEMS)}}const A=[s.FOLDER,s.ENTRY,s.PROCESS,s.PROTOCOL],y=[s.FOLDER,s.BATCH,s.BULK_ASSEMBLY,...(0,l.getRegistrySupportedOligoAwareTypes)()]
function getDefaultTypesForSection(e){return function getAllDefaultTypesForSection(e){const t=y
switch(e){case i.ALL_SECTION:return Array.from(new Set([...A,...t,...a.ZP.APP_CORE_ENABLE_FAKE_ITEM_TYPE?[s.JELLYFISH]:[],...a.ZP.DATA_FRAMES_ENABLE_DATASET?[s.DATASET]:[],...a.ZP.PROCEDURES_ENABLE_M1?[s.WORKSHEET]:[],...a.ZP.FILES_ENABLE?[s.FILE]:[],...a.ZP.PROCEDURES_ENABLE?[s.PROCEDURE_RUN]:[],...a.ZP.STUDIES_ENABLE?[s.STUDY]:[]]))
case i.NOTEBOOK_SECTION:return A
case i.INVENTORY_SECTION:return t
default:throw new Error(`Unexpected section type in getAllDefaultTypesForSection: ${e}`)}}(e).filter((e=>(0,S.Z)(e)))}function resolveFolderFilter(e){const t=E.yE(e,I,getDefaultTypesForSection(m.$V(e.filters,p.Vm.FOLDER_SECTION))),n=e.filters.filter((e=>![p.Vm.FOLDER,p.Vm.ANCESTOR_FOLDER].includes(e.key))),a=m.sg(n,{key:t?p.Vm.ANCESTOR_FOLDER:p.Vm.FOLDER,operator:p.EF.IS,value:m.$V(e.filters,p.Vm.FOLDER)||m.$V(e.filters,p.Vm.ANCESTOR_FOLDER)})
return{...e,filters:a}}},749334:(e,t,n)=>{n.d(t,{Lt:()=>getFolderListingURL,QC:()=>searchParamsFromQueryKey,q7:()=>getNavigationURL,ug:()=>stringifyFilters})
var a=n(64558),i=n(531041),r=n(232606),s=n(675649),o=n(567509),l=n(126781),c=n(974913),d=n(497790),u=n(539593),m=n(62315),p=n(68526),h=n(929339)
function parseFiltersString(e,t){if(!e)return[]
return e.split(m.Ip).reduce(((e,n)=>{const r=n.indexOf(m.cK),s=n.substring(0,r+1)
if(m.Q2.has(s))return e
const o=n.substring(s.length),d=i.default.findWhere(Object.values(m.Oq),{prefix:s})
if(!d)throw new Error(`Unexpected filter prefix '${s}'`)
const p=d.key
if((0,m.Z4)(p)){if(t<2){c.ZP.warn(`${m.Oq[p].name} filter was omitted from your search query due to an error. Please try adding it again.`)
e.push({key:p,operator:m.EF.IS,value:""})
return e}const[n,a]=o.split(m.cK)
e.push({key:p,operator:n,value:a})
return e}if((0,m.e3)(p)){if(p===m.Vm.REVIEW_LIFECYCLE&&"null"===o){e.push({key:p,operator:m.EF.IS,value:null})
return e}e.push({key:p,operator:m.EF.IS,value:o})
return e}if((0,m.mE)(p)){const t=o.split(m.cK)
let n,a
if(1===t.length){n=m.pb[p][0]
a=t[0]}else[n,a]=t
if(!Object.keys(m.EF).includes(n))throw new Error(`Unexpected operator ${n}`)
e.push({key:p,operator:n,value:a?a.split(m._e):[]})
return e}if((0,m.nz)(p)){const t=o.split(m.cK)
let n,a,i
if(2===t.length){n=m.pb[p][0]
a="true"===t[0]
i=t[1]}else{n=t[0]
a="true"===t[1]
i=t[2]}if(!Object.keys(m.EF).includes(n))throw new Error(`Unexpected operator ${n}`)
e.push({key:p,operator:n,value:i?i.split(m._e):[],includeNull:a})
return e}if((0,m.C8)(p)){const[t,n]=o.split(m._e)
e.push({key:p,operator:m.EF.IS,value:{fromDate:t,toDate:n}})
return e}if((0,m.Jr)(p)){const[t,n]=o.split(m._e)
e.push({key:p,operator:m.EF.IS,value:{fromDatetime:t,toDatetime:n}})
return e}if(p===m.Vm.CUSTOM_TAG){const t=o.split(m.cK).map((e=>u.PC(e)))
let n,a,i
if(2===t.length){[n,a]=t
i=m.EF.IS}else[i,n,a]=t
e.push({key:p,operator:i,name:n,value:a})
return e}if(p===m.Vm.SCHEMA_FIELD||p===m.Vm.BATCH_TAG){e.push(function parseFieldFilterString(e,t){const n=t.split(m.cK).map((e=>u.PC(e))),[a,i,r,s]=n
let o
if((0,m.am)(s))o=u.Wi(i)
else if((0,m.$j)(s))o=Number(i)
else{if(!(0,m.fU)(s))throw new Error(`Unsupported fieldType ${s}`)
o=i}return{key:e,operator:a,value:o,fieldId:r,fieldType:s}}(p,o))
return e}if(p===m.Vm.REVIEW){e.push(function parseReviewFieldFilterString(e){const t=e.split(l.ZP.ROLE_FILTER_SEPARATOR),n=t[0],a=t[1]
return{key:m.Vm.REVIEW,operator:m.EF.IS,value:{review_status:"null"===n?null:n,role:"null"===a?null:a}}}(o))
return e}if(p===m.Vm.ALPHAFOLD_STRUCTURE){e.push({key:p,operator:o,value:null})
return e}if(p===m.Vm.REVIEW_LIFECYCLE){e.push({key:p,operator:m.EF.IS,value:"any"===o?null:o})
return e}if(p===m.Vm.CONTAINER_QUANTITY||p===m.Vm.CONTAINER_CONCENTRATION){const[t,n,a]=o.split(m.cK)
e.push({key:p,operator:t,value:{value:Number(n)||0,units:a}})
return e}if(p===m.Vm.GRID_EMPTY_POSITIONS||p===m.Vm.GRID_EMPTY_CONTAINERS){const[t,n]=o.split(m.cK)
e.push({key:p,operator:t,value:n})
return e}if(p===m.Vm.CONTAINER_CONTENTS){const[t,n]=o.split(m.cK)
if(!Object.keys(m.EF).includes(t))throw new Error(`Unexpected operator ${t}`)
e.push({key:p,operator:t,value:{contentIds:n?n.split(m._e):[]}})
return e}if(p===m.Vm.NOTE_REFERENCE){const[t,n,a]=o.split(m.cK)
if(!Object.keys(m.EF).includes(t))throw new Error(`Unexpected operator ${t}`)
e.push({key:p,operator:t,value:{referencedType:a,referencedIds:n?n.split(m._e):[]}})
return e}if(p===m.Vm.OWNER){const[t,n,a]=o.split(m.cK)
e.push({key:p,operator:t,value:{userIds:n?n.split(m._e):[],organizationIds:a?a.split(m._e):[]}})
return e}if(p===m.Vm.OWNER_OR_COLLABORATOR){const[t,n,a,i]=o.split(m.cK)
e.push({key:p,operator:t,value:{userIds:n?n.split(m._e):[],organizationIds:a?a.split(m._e):[],teamIds:i?i.split(m._e):[]}})
return e}if(p===m.Vm.MONOMER){const[t,n,i,r]=o.split(m.cK),s=i===m.yY.AT_POS?r.split(m._e).map((e=>(0,a.Lk)(e))):i===m.yY.ANY_POS?void 0:(0,a.Lk)(r)
e.push({key:p,operator:t,value:n,qualifier:i,qualifierValue:s})
return e}if(p===m.Vm.CHEMICAL_STRUCTURE){const t=o.split(m.cK)
if(3===t.length){const[n,a,i]=t
if(n!==m.EF.SUBSTRUCTURE)throw new Error(`Unexpected operator ${n}`)
e.push({key:p,operator:n,value:(0,h.a)(a),format:i})}else{const[n,a,i,r]=t
if(n!==m.EF.SIMILARITY)throw new Error(`Unexpected operator ${n}`)
e.push({key:p,operator:n,value:(0,h.a)(a),format:i,minSimilarity:parseFloat(r)})}return e}if(p===m.Vm.BLAST){const t=o.split(m.cK)
if(t.length<3||t.length>4)throw new Error("Unexpected parts for BLAST filter")
const[n,a,i,r]=t
if(!Object.keys(m.EF).includes(n))throw new Error(`Unexpected operator ${n}`)
e.push({key:p,operator:n,value:{textSequences:parseBLASTTextSequences((0,h.a)(a)),apiIdentifiers:i?i.split(m._e):[]},params:parseBLASTParams(r)})
return e}if(p===m.Vm.PART_SEQUENCE){const[t,n]=o.split(m.cK)
e.push({key:p,operator:t,value:(0,h.a)(n)})
return e}throw new Error(`Unsupported filter key ${p}`)}),[])}function parseBLASTTextSequences(e){const t=[]
if(e){const n=e.split(m._e)
if(n.length%2!=0)throw new Error("BLAST filter textSequences does not have name/sequence pairs.")
for(let e=0;e<n.length;e+=2)t.push({name:n[e],sequence:n[e+1]})}return t}function parseBLASTParams(e){if(!e)return
const t={},n=e.split(m._e)
if(n.length%2!=0)throw new Error("BLAST filter params does not have key/value pairs.")
for(let e=0;e<n.length;e+=2)switch(n[e]){case"task":t.task=n[e+1]
break
case"evalue":t.evalue=Number(n[e+1])
break
case"word_size":t.word_size=Number(n[e+1])
break
case"culling_limit":t.culling_limit=Number(n[e+1])
break
case"gapopen":t.gapopen=Number(n[e+1])
break
case"gapextend":t.gapextend=Number(n[e+1])
break
case"reward":t.reward=Number(n[e+1])
break
case"penalty":t.penalty=Number(n[e+1])
break
case"strand":t.strand=n[e+1]
break
case"matrix":t.matrix=n[e+1]
break
case"comp_based_stats":t.comp_based_stats=n[e+1]
break
default:throw new Error(`Unexpected BLAST param ${n[e]}`)}return t}function stringifyFilters(e){return e.map((e=>{const{prefix:t}=m.Oq[e.key]
if(!t)throw new Error("Filter needs a prefix in order to be stringified")
if((0,m.wG)(e))return t+u.vA(e.operator||"")+m.cK+u.vA(e.name||"")+m.cK+u.vA(e.value||"")
if((0,m.Z4)(e.key))return`${t}${e.operator}${m.cK}${e.value}`
if((0,m.rK)(e))return t+u.vA(e.operator)+m.cK+u.vA(e.value)+m.cK+u.vA(e.qualifier)+m.cK+(Array.isArray(e.qualifierValue)?e.qualifierValue.map((e=>u.vA(e))).join(m._e):u.vA(e.qualifierValue))
if((0,m.kP)(e))return t+e.operator+m.cK+(0,h.h)(e.value)+m.cK+e.format+(e.minSimilarity?m.cK+e.minSimilarity:"")
if((0,m.Nf)(e)){let n=t+e.operator+m.cK+(0,h.h)(e.value.textSequences.map((e=>e.name+m._e+e.sequence)).join(m._e))+m.cK+e.value.apiIdentifiers.join(m._e)
if(e.params&&Object.entries(e.params).length>0){let t=m.cK
for(const[a,i]of Object.entries(e.params))if(i){n+=t+a+m._e+i
t=m._e}}return n}if((0,m.mg)(e))return`${t}${e.value}`
if((0,m.om)(e))return t+e.operator+m.cK+e.value.join(m._e)
if((0,m.Lb)(e))return t+e.operator+m.cK+e.includeNull.toString()+m.cK+e.value.join(m._e)
if((0,m.gE)(e))return t+e.value.fromDate+m._e+e.value.toDate
if((0,m.Rg)(e))return t+e.value.fromDatetime+m._e+e.value.toDatetime
if((0,m.dN)(e))return t+u.vA(e.operator)+m.cK+u.vA(function fieldFilterValueString(e){var t
return(0,m.cM)(e)?u.Zv(e.value):e.fieldType===d.FieldType.DATETIME?null!==(t=(0,o.OA)(e.value))&&void 0!==t?t:"":String(e.value)}(e))+m.cK+u.vA(e.fieldId)+m.cK+u.vA(e.fieldType)
if(e.key===m.Vm.REVIEW)return t+e.value.review_status+l.ZP.ROLE_FILTER_SEPARATOR+e.value.role
if(e.key===m.Vm.CONTAINER_QUANTITY||e.key===m.Vm.CONTAINER_CONCENTRATION)return t+e.operator+m.cK+e.value.value+m.cK+e.value.units
if(e.key===m.Vm.GRID_EMPTY_CONTAINERS||e.key===m.Vm.GRID_EMPTY_POSITIONS)return t+e.operator+m.cK+e.value
if(e.key===m.Vm.CONTAINER_CONTENTS)return t+e.operator+m.cK+e.value.contentIds.join(m._e)
if(e.key===m.Vm.NOTE_REFERENCE)return t+e.operator+m.cK+e.value.referencedIds.join(m._e)+m.cK+e.value.referencedType
if(e.key===m.Vm.OWNER)return t+e.operator+m.cK+e.value.userIds.join(m._e)+m.cK+e.value.organizationIds.join(m._e)
if(e.key===m.Vm.OWNER_OR_COLLABORATOR)return t+e.operator+m.cK+e.value.userIds.join(m._e)+m.cK+e.value.organizationIds.join(m._e)+m.cK+e.value.teamIds.join(m._e)
if(e.key===m.Vm.ALPHAFOLD_STRUCTURE)return t+e.operator
throw new Error(`Unsupported filter ${e}`)})).filter((e=>null!=e)).join(m.Ip)}function parseUnencodedSortString(e){const t=parseSortKeyAndReverse(e,m.Qb)
if(t)return t
const n=parseSortKeyAndReverse(e,",")
if(n)return n;(0,r.Gp)(!1,`Malformed sort string ${e}`)
return null}function parseSortKeyAndReverse(e,t){const n=e.split(t),a=n.slice(0,n.length-1).join(t),i=n[n.length-1]
return[m.Sr,m.YW].includes(i)?{key:a,reverse:i===m.YW}:null}function parseEncodedSortString(e){const t=e.split(m.Qb)
if(2!==t.length){(0,r.Gp)(!1,`Malformed sort string ${e}`)
return null}return{key:u.PC(t[0]),reverse:t[1]===m.YW}}function stringifySorts(e){return e.map((e=>u.vA(e.key)+m.Qb+(e.reverse?m.YW:m.Sr))).join(m.Uh)}function searchParamsFromQueryKey(e){const{filter:t,limit:n,offset:a,sort:o,reverse:l,sorts:c,groupBy:d,v:u,q:h}=e,E={},S=function getVersionFromQueryParam(e){if(!e)return 0
const t=parseInt((0,s.$5)(e),10)
return Number.isInteger(t)?t:0}(u)
null!=h&&(E.query=(0,s.$5)(h))
t&&(E.filters=(0,p.uo)(parseFiltersString((0,s.$5)(t),S)))
n&&(E.limit=Number(n))
a&&(E.offset=Number(a))
const T=function getSortsFromQueryKey(e,t,n,a){if(t){(0,r.Gp)(!a,"Only one of sort or sorts should be defined")
return[{key:t,reverse:n===m.YW}]}if(a)return function parseSortsString(e,t){if(!e)return[]
const n=t<1?parseUnencodedSortString:parseEncodedSortString,a=e.split(m.Uh).map((e=>n(e)))
return i.default.compact(a)}((0,s.$5)(a),e)
return[]}(S,o,l,c)
T.length>0&&(E.sorts=T)
d&&Object.values(m.Y_).includes(d)&&(E.groupBy={groupField:d,childLimit:0,childOffset:0})
return E}function getNavigationURL(e,t,n,a=2){const{filters:i,offset:r,limit:o,sorts:l,query:c,groupBy:d}=(0,p.un)(t,n)
return(0,s.Dv)(e,{filter:stringifyFilters(i),offset:r,limit:o,sorts:stringifySorts(l),q:c,groupBy:null==d?void 0:d.groupField,v:a})}function getFolderListingURL(e,t){return t.isExpanded?{url:getNavigationURL(t.folder.url,t.searchParams,t.filterErrors),options:{replace:null!=e.searchParams&&e.folder.url===t.folder.url&&e.isExpanded===t.isExpanded&&Boolean(e.searchParams.query)===Boolean(t.searchParams.query)}}:null}},681002:(e,t,n)=>{n.d(t,{D1:()=>hasQueryOrNonDefaultStorablesFilters,E5:()=>u,Ib:()=>getDefaultStorablesSearchParams,Ou:()=>m,P1:()=>getListedStorableId,Xv:()=>p,kJ:()=>resolveStorableFilter})
var a=n(3472),i=n(459830),r=n(294120),s=n(872543),o=n(539593),l=n(62315),c=n(374669),d=n(68526)
const u={key:l.Vm.TYPES,operator:l.EF.IS_ONE_OF,value:[i.CONTAINER,i.BOX,i.PLATE,i.LOCATION]},m=[l.Vm.REGISTRY,l.Vm.PARENT_STORABLE,l.Vm.ANCESTOR_STORABLE],p=[l.Vm.PARENT_STORABLE]
function getDefaultStorablesSearchParams(e){return{filters:[u,{...(0,l.QW)(l.Vm.REGISTRY),value:e},{...(0,l.QW)(l.Vm.PARENT_STORABLE),value:a.FILTER_PARENT_STORABLE_ROOT}],limit:(0,s.z3)(),offset:0,query:"",sorts:c.i_(r.$0.STORAGE)}}function getListedStorableId(e){const t=o.$V(e,l.Vm.PARENT_STORABLE)||o.$V(e,l.Vm.ANCESTOR_STORABLE)
return t&&t!==a.FILTER_PARENT_STORABLE_ROOT?t:null}function resolveStorableFilter(e){const t=d.yE(e,m,u.value),n=getListedStorableId(e.filters)
let i=null
i=n?{...(0,l.QW)(t?l.Vm.ANCESTOR_STORABLE:l.Vm.PARENT_STORABLE),value:n}:t?null:{...(0,l.QW)(l.Vm.PARENT_STORABLE),value:a.FILTER_PARENT_STORABLE_ROOT}
const r=e.filters.filter((e=>![l.Vm.PARENT_STORABLE,l.Vm.ANCESTOR_STORABLE].includes(e.key)))
null!=i&&r.push(i)
return{...e,filters:r}}function hasQueryOrNonDefaultStorablesFilters(e){return d.yE(e,m,u.value)}},830180:(e,t,n)=>{n.d(t,{JF:()=>BlobLinkList,RA:()=>BlobLinkListInTable,bU:()=>CollapsibleBlobLinkList,qD:()=>BlobLinkCollapsiblePreview})
var a=n(64558),i=n(764403),r=n.n(i),s=n(989526),o=n(615439),l=n.n(o),c=n(348920),d=n(984152),u=n(583310),m=n(751512),p=n(965131),h=n(697134),E=n(316028),S=n(180823),T=n(603968),g=n(868710),f=n(334148),I=n(778223),A=n(268768),y=n(36424),_=n(616972),C=n(863017)
function PreviewButtonWrapper(e){return s.createElement(S.D,null,(({fileId:t})=>t?s.createElement(g.ZP,{title:"Preview",delay:{show:500}},e.renderButton(t)):null))}function DownloadButtonWrapper({children:e}){return s.createElement(g.ZP,{title:"Download",delay:{show:500}},e)}function BlobLinkCollapsiblePreview(e){var t
return e.shouldPreviewImages&&(null===(t=e.previewFile)||void 0===t?void 0:t.previewType)===d.g.IMAGE?s.createElement(A.Z,{leftHeader:e.name,initiallyExpanded:e.initiallyExpanded,rightHeader:s.createElement(s.Fragment,null,s.createElement(PreviewButtonWrapper,{renderButton:t=>s.createElement("a",{className:"u-mini-spacing-right",onClick:n=>{n.stopPropagation()
C.Ns.open(t,e,e.owningEntityApiId)}},s.createElement(y.Z,{icon:"open"}))}),s.createElement(DownloadButtonWrapper,null,s.createElement("a",{href:e.url,onClick:e=>{e.stopPropagation()}},s.createElement(y.Z,{icon:"download"}))))},s.createElement(u.Z,{url:e.previewFile.url,externalFileId:e.previewFile.id,renderWithSignedURL:renderWithSignedUrl,owningEntityApiId:e.owningEntityApiId})):s.createElement(I.ZP,{className:"chip-container",size:e.chipSize,text:e.name,href:e.url})}BlobLinkCollapsiblePreview.defaultProps={initiallyExpanded:!1,chipSize:I.TK.SMALL,shouldPreviewImages:!0}
function CollapsibleBlobLinkList(e){if(0===e.blobs.length)return null
const t=e.blobs.map(((t,n)=>{var a
return s.createElement(BlobLinkCollapsiblePreview,{key:n,...t,chipSize:e.chipSize,initiallyExpanded:1===e.blobs.length,shouldPreviewImages:e.shouldPreviewImages,owningEntityApiId:null!==(a=e.owningEntityApiId)&&void 0!==a?a:""})}))
return s.createElement("div",null,t)}CollapsibleBlobLinkList.defaultProps={chipSize:I.TK.SMALL,shouldPreviewImages:!0}
function _BlobLink(e){var t
return e.shouldPreviewImages&&(null===(t=e.previewFile)||void 0===t?void 0:t.previewType)===d.g.IMAGE?s.createElement("div",{className:r()(e.className,"blobLinkPreview")},s.createElement(u.Z,{url:e.previewFile.url,externalFileId:e.previewFile.id,renderWithSignedURL:renderWithSignedUrl,owningEntityApiId:e.owningEntityApiId}),s.createElement("div",{className:"blobLinkPreview-bar"},e.shouldPreviewPDFs&&!e.pdfPreviewFile&&s.createElement(g.pf,{tooltipTitle:"PDF preview missing"},s.createElement(y.Z,{icon:"status-warning",color:"#fc9f35",style:{marginRight:"3px"}})),s.createElement("div",{className:"blobLinkPreview-filename"},e.name),s.createElement(PreviewButtonWrapper,{renderButton:t=>s.createElement(f.ZP,{buttonStyle:f.ZJ.TERTIARY_BLUE,onClick:()=>{C.Ns.open(t,e,e.owningEntityApiId)},icon:"open",size:f.qE.MINI,className:"blobLinkPreview-button",disabled:null==e.pdfPreviewFile&&null==e.previewFile})}),s.createElement(DownloadButtonWrapper,null,s.createElement(f.ZP,{buttonStyle:f.ZJ.TERTIARY_BLUE,href:e.url,icon:"download",size:f.qE.MINI,className:"blobLinkPreview-button"})))):s.createElement("div",{className:r()(e.className,"blobLinkPreview")},s.createElement(I.ZP,{className:e.shouldPreviewPDFs&&!e.pdfPreviewFile?"chip-container chip--warningLighter":"chip-container",size:e.chipSize,text:e.name,href:e.url,isReadonly:!0,tooltipTitle:e.shouldPreviewPDFs&&!e.pdfPreviewFile?"PDF preview missing":""}),s.createElement("div",{className:"blobLinkChipPreview-bar"},s.createElement("div",{className:"fadeBar"},e.shouldPreviewPDFs&&s.createElement(PreviewButtonWrapper,{renderButton:t=>s.createElement(f.ZP,{buttonStyle:f.ZJ.TERTIARY_BLUE,onClick:()=>{C.Ns.open(t,e,e.owningEntityApiId)},icon:"open",size:f.qE.MINI,className:"blobLinkPreview-button u-display-inline-block",disabled:null==e.pdfPreviewFile})}),s.createElement(DownloadButtonWrapper,null,s.createElement(f.ZP,{buttonStyle:f.ZJ.TERTIARY_BLUE,href:e.url,icon:"download",size:f.qE.MINI,className:"blobLinkPreview-button"})))))}_BlobLink.defaultProps={chipSize:I.TK.SMALL,shouldPreviewImages:!0}
const R=s.memo(_BlobLink),BlobLinkList=e=>{const[t,n]=(0,s.useState)(T.V.IN_PROGRESS),[i,r]=(0,s.useState)({}),o=(0,m.A4)(E.S,{variables:{ids:e.blobs.map((e=>e.id))}})
if(o.type===m.NI.SUCCESS&&o.data.resultBlobs.every((e=>!(0,h.CZ)(e)&&(e.uploadStatus===T.V.COMPLETE||e.uploadStatus===T.V.ABORTED)))){t===T.V.IN_PROGRESS&&n(T.V.COMPLETE)
const e=(0,a.m8)(o.data.resultBlobs.map((e=>(0,a.LI)(e.id,(0,p.tY)("ResultBlob",e)))))
l()(i,e)||r(e)}(0,s.useEffect)((()=>{const e=setInterval((()=>{t!==T.V.COMPLETE&&o.refetch()}),5e3)
return()=>{clearInterval(e)}}),[t,o])
if(0===e.blobs.length)return null
const c=e.blobs.map(((n,a)=>{var r
const o=i[n.id]
return t===T.V.COMPLETE&&o?o.uploadStatus===T.V.ABORTED?s.createElement("p",{className:"blobLinkPreview-image",key:a},"Error loading file"):s.createElement(R,{className:e.blobClassName,key:a,...o,chipSize:e.chipSize,shouldPreviewImages:e.shouldPreviewImages,shouldPreviewPDFs:e.shouldPreviewPDFs,owningEntityApiId:null!==(r=e.owningEntityApiId)&&void 0!==r?r:""}):s.createElement("p",{className:"blobLinkPreview-image",key:a,...(0,_.ey)()},"Loading...")}))
return s.createElement("div",null,c)}
BlobLinkList.defaultProps={chipSize:I.TK.SMALL,shouldPreviewImages:!0}
function BlobLinkListInTable(e){const t=c.ZP.ELN_EXPORT_PDF_CONFIG.attachResultBlobsInline&&c.ZP.ELN_EXPORT_PDF_CONFIG.includeFileAttachmentsInline
return s.createElement(BlobLinkList,{...e,shouldPreviewPDFs:t})}function renderWithSignedUrl(e){return void 0===e?s.createElement("p",{className:"blobLinkPreview-image",...(0,_.ey)()},"Loading..."):null===e?s.createElement("p",{className:"blobLinkPreview-image"},"Error loading file"):s.createElement("img",{src:e,alt:"blob preview",className:"blobLinkPreview-image"})}},180823:(e,t,n)=>{n.d(t,{D:()=>BlobLinkPreviewTabConsumer,I:()=>BlobLinkPreviewTabProvider})
var a=n(989526),i=n(459561)
function BlobLinkPreviewTabConsumer(e){return a.createElement(i.q.Consumer,null,e.children)}function BlobLinkPreviewTabProvider(e){return a.createElement(i.q.Provider,{value:{fileId:e.fileId,showFormulas:!1}},e.children)}},863017:(e,t,n)=>{n.d(t,{Ns:()=>BlobLinkTabState,b7:()=>BlobLinkTabView,q9:()=>BlobLinkOptionsView})
var a=n(440281),i=n.n(a),r=n(989526),s=n(573961),o=n(977774),l=n(342459),c=n(911525),d=n(699418),u=n(766455),m=n(676276)
class BlobLinkTabState extends u.Xh{blob(){return this.get("blob")}defaults(){return{...super.defaults(),title:"Preview File",closeable:!0,blob:null,previewType:null}}static open(e,t,n){var a
if(null==t.previewFile&&null==t.pdfPreviewFile)throw new Error("Attempted to preview a blob without a previewFile")
const i=d.ZP.get().get(e),r=i.findTab(BlobLinkTabState,(e=>e.blob().id===t.id))
if(null!=r){r.set({active:!0})
return}const s=new BlobLinkTabState({fileId:e,title:t.name,blob:t,previewType:t.previewFile?t.previewFile.previewType:null===(a=t.pdfPreviewFile)||void 0===a?void 0:a.previewType,owningEntityApiId:n})
i.buffers().addTab(s)}}class BlobLinkTabView extends i().View{initialize(){this.listenTo(this.model,"change",(()=>this.render()))}render(){const e=this.model.get("previewType"),t=this.model.get("owningEntityApiId"),{previewFile:n,pdfPreviewFile:a}=this.model.blob(),i="image"===e?n:a
if(null==i)throw new Error("previewFile is null");(0,m.A9)(r.createElement(l.Z,{url:i.url,externalFileId:i.id,previewType:this.model.get("previewType"),owningEntityApiId:t}),this.el)
return this}remove(){s.unmountComponentAtNode(this.el)
return super.remove()}}class BlobLinkOptionsView extends i().View{constructor(){super(...arguments)
this.updatePreviewType=e=>{this.model.set("previewType",e)}
this.render=()=>{var e,t
const n=this.model.get("previewType"),a=this.model.get("owningEntityApiId"),{url:i,previewFile:s,pdfPreviewFile:l}=this.model.blob(),d="image"===n?s:l
if(null==d)throw new Error("previewFile is null");(0,m.A9)(r.createElement(o.Z,{availablePreviewTypes:[...null!==(e=null==s?void 0:s.availablePreviewTypes)&&void 0!==e?e:[],...null!==(t=null==l?void 0:l.availablePreviewTypes)&&void 0!==t?t:[]],previewType:n,updatePreviewType:this.updatePreviewType,printOptions:[],generateDownloadUrl:async e=>e?await(0,c.V)(d.id,d.url,a):i,isPreviewTransformed:!1}),this.el)
return this}}initialize(){this.listenTo(this.model,"change",(()=>this.render()))}remove(){s.unmountComponentAtNode(this.el)
return super.remove()}}BlobLinkTabView.prototype.className="external-file-wrapper buffer-tab buffer-tab--no-padding"},415269:(e,t,n)=>{n.d(t,{L:()=>DataTableConfigActions_fetchAllDataTableConfigs,n:()=>DataTableConfigActions_publish})
var a=n(787004),i=n(947730),r=n(771398)
var s=n(974913),o=n(166459),l=n(563009),c=n(87209),d=n(54548)
function DataTableConfigActions_fetchAllDataTableConfigs(){(function fetchAllDataTableConfigs(){return r.xA("/1/api/workflows/data-table-configs")})().done((({dataTableConfigs:e})=>{i.Z.dispatch({actionType:a.NDI,dataTableConfigs:e})}))}function DataTableConfigActions_publish(e,{columnTypesByCid:t,fieldIdsToDelete:n,onSuccess:u,onError:m}={}){c.$Z("Publishing...");(function publish(e,{columnTypesByCid:t,fieldIdsToDelete:n}={}){return r.ty({url:"/1/api/workflows/data-table-configs:publish",data:{dataTableConfig:e,fieldIdsToDelete:n,columnTypesByCid:t}})})(e,{columnTypesByCid:t,fieldIdsToDelete:n}).done((({dataTableConfig:e,schemaSpec:t})=>{const{assaySchema:n}=e
i.Z.dispatch({actionType:a.C1l,assaySchema:n});(0,o.getStore)().dispatch(l.JI(n.id,t))
s.ZP.success("Updated schema successfully")
u&&u(e)})).fail((e=>{const t=(0,d.Z)(e)
if(m&&t){const{errors:e,errorMessage:n}=t
m({errors:e,message:n})}else s.ZP.notifyError(e)})).always((()=>{c.Cp()}))}},457110:(e,t,n)=>{n.d(t,{Kj:()=>getUnusedSchemaFieldIds,XB:()=>getColumnTypeFromSchema,dA:()=>getFieldsToDelete,g8:()=>prepareDataTableConfigForStore,ik:()=>isFieldTypeSupportedForManualEntry,lp:()=>getUnusedSchemaFields,rz:()=>isDataTableConfigValidForManualEntry,u1:()=>getFieldTypeWarnings,yZ:()=>l})
var a=n(531041),i=n(946795),r=n(497790),s=n(896986),o=n(556543)
const l=[r.FIELD_TYPES.ASSAY_RESULT_LINK.type,r.FIELD_TYPES.ASSAY_RUN_LINK.type,r.FIELD_TYPES.BATCH_LINK.type,r.FIELD_TYPES.BLOB_LINK.type,r.FIELD_TYPES.BOOLEAN.type,r.FIELD_TYPES.DATE.type,r.FIELD_TYPES.DATETIME.type,r.FIELD_TYPES.ENTRY_LINK.type,r.FIELD_TYPES.BIOENTITY_LINK.type,r.FIELD_TYPES.FLOAT.type,r.FIELD_TYPES.INTEGER.type,r.FIELD_TYPES.LONG_TEXT.type,r.FIELD_TYPES.STORABLE_LINK.type,r.FIELD_TYPES.TEXT.type],c=[r.FIELD_TYPES.BATCH_LINK.type,r.FIELD_TYPES.BLOB_LINK.type,r.FIELD_TYPES.BOOLEAN.type,r.FIELD_TYPES.DATE.type,r.FIELD_TYPES.DATETIME.type,r.FIELD_TYPES.ENTRY_LINK.type,r.FIELD_TYPES.BIOENTITY_LINK.type,r.FIELD_TYPES.FLOAT.type,r.FIELD_TYPES.INTEGER.type,r.FIELD_TYPES.LONG_TEXT.type,r.FIELD_TYPES.SELECTOR.type,r.FIELD_TYPES.STORABLE_LINK.type,r.FIELD_TYPES.TEXT.type]
function _addCidIfMissing(e,t,n){if(null==e.cid){e.cid=a.default.uniqueId(t)
n[e.cid]=e.id
delete e.id}}function prepareDataTableConfigForStore(e,t){_addCidIfMissing(e,"dtc",t)
e.columns.forEach((e=>{_addCidIfMissing(e,"dtcol",t)}))}function isFieldTypeSupportedForManualEntry(e){return c.includes(e)}function isDataTableConfigValidForManualEntry(e){const{assaySchema:t,columns:n}=e
return t.fields.filter((e=>n.some((({tagSchemaFieldId:t})=>t===e.id)))).every((e=>isFieldTypeSupportedForManualEntry(e.fieldType)))}function getColumnTypeFromSchema(e,t){return null==e.tagSchemaFieldId?r.FIELD_TYPES.TEXT.type:(0,s.eI)(t,e).fieldType}function getUnsupportedFieldTypeText(e,t){return`Field ${`"${e}" of type ${(0,o.yB)(t)}`} is not supported for manual data entry.`}function getFieldTypeWarnings(e,t,n){const a=[]
for(const i of e.columns){let e=t[i.cid]
if(null==e){const t=(0,s.eI)(n,i)
e=null==t?r.FIELD_TYPES.TEXT.type:t.fieldType}isFieldTypeSupportedForManualEntry(e)||a.push(getUnsupportedFieldTypeText(i.name,e))}return a}function getUnusedSchemaFields(e,t){return e.fields.filter((n=>!t.some((({tagSchemaFieldId:e})=>e===n.id))&&n!==(0,i.HA)(e)))}function getUnusedSchemaFieldIds(e,t){return a.default.pluck(getUnusedSchemaFields(e,t),"id")}function getFieldsToDelete(e,t,n){const a=getUnusedSchemaFieldIds(e,t)
return e.fields.filter((e=>a.includes(e.id)&&!n.includes(e.id)))}},975732:(e,t,n)=>{n.d(t,{Z:()=>convertAssaySchemaToDataTableConfig,g:()=>convertFieldsToColumns})
var a=n(531041),i=n(178570),r=n(396213),s=n(783851),o=n(851422),l=n(946795),c=n(911593)
function convertFieldsToColumns(e,t){const n=[],d=(0,l.HA)(e)
for(const a of e.fields)a!==d&&n.push((0,s.F5)(a,t,void 0,e.allFields))
const u=e.fields.length
0===n.length&&(d&&1===u||0===u)&&n.push({provenanceUuid:(0,i.Z)(),columnType:o.TableColumnType.STRING,name:"Untitled",cid:a.default.uniqueId("dtcol"),tagSchemaFieldId:null,defaultValue:r.id,width:c.tD,isReadOnly:!1,isProtected:!1,isRequired:!1,isArchived:!1,isReported:!0})
return n}function convertAssaySchemaToDataTableConfig(e,t){const n=convertFieldsToColumns(e,t),r=(0,l.HA)(e)
return{cid:a.default.uniqueId("dtc"),type:"data_table_config",name:e.name,provenanceUuid:(0,i.Z)(),isStandalone:!0,isWatchingInputTable:!1,watchedRegistrationProvenanceUuids:[],linkType:r?r.fieldType:null,assaySchema:e,columns:n}}},243327:(e,t,n)=>{n.d(t,{Z:()=>m})
var a=n(989526),i=n(827670),r=n(459561),s=n(344984),o=n(476604),l=n(4042),c=n(459830),d=n(739074),u=n(990658)
const m=(0,i.compose)(l.Z.connect((function mapDocumentStoreProps(e,t){let n=null,a=null
if(e.inStore(t.id)){const i=e.getDocument(t.id)
n=null==i?void 0:i.documentVersion.entryVersion.note
a=null==i?void 0:i.permissions}return{note:n,permissions:a}})))((({id:e,isConfig:t=!1,locked:n,note:i,permissions:m,disableInternalAutoSaver:p,onChange:h})=>{const{fileType:E,getIdFromCid:S,historyManager:T,isLatest:g,parentType:f,registerObjects:I,updateNote:A}=function useDocument(e,t,n){const i=c.DOCUMENT,r=new u.Z,s=l.Z.inStore(e)&&l.Z.getEditorState(e),o=!!s&&s.isLatest;(0,a.useEffect)((()=>{(async()=>{if(!l.Z.getDocument(e)){await d.Z.open(e)
t&&l.Z.disableAutoSaver(e)}})()
const a=n?t=>{e===t&&n()}:null
a&&l.Z.addChangeListener(a)
return()=>{a&&l.Z.removeChangeListener(a)}}),[e,t,n])
return{getIdFromCid:t=>l.Z.getIdFromCid(e,t),fileType:i,historyManager:r,isLatest:o,parentType:"Note",registerObjects:t=>{d.Z.registerObjects(e,t)},updateNote:t=>{d.Z.updateNote(e,function toEntryNote(e){return e.days?e:{...e,days:[]}}(t))},updateTitle:t=>{d.Z.setName(e,t)}}}(e,p,h),y=(0,a.useMemo)((()=>({note:i})),[i]),_=(0,a.useMemo)((()=>({fileId:e,showFormulas:!1})),[e])
return i&&m?a.createElement(r.k.Provider,{value:y},a.createElement(r.q.Provider,{value:_},a.createElement(s.WP,{fileId:e,isConfig:t,fileType:E,fullScreen:!1,getIdFromCid:S,historyManager:T,parentType:f,note:i,updateNote:A,locked:!m.writable||!g||n,restoreStateAndSelection:()=>{},printOptions:[],registerObjects:I,showTableOfContents:!1,showTimestamps:!1,spellCheck:!1,printLayout:!1,showPrintMargins:!1,permissions:m}))):a.createElement(o.b,null)}))},250417:(e,t,n)=>{n.d(t,{FV:()=>useInitialEntryDay,Q$:()=>w,ZP:()=>F,bV:()=>isCreationDisabled,o$:()=>useEntryTemplate,wX:()=>CreateEntryFromTemplateModalContents})
var a=n(769784),i=n(64558),r=n(536105),s=n.n(r),o=n(989526),l=n(95537),c=n(348920),d=n(459830),u=n(204026),m=n(390462),p=n(751512),h=n(91092),E=n(965131),S=n(291531),T=n(978980),g=n(115902),f=n(481677),I=n(411358),A=n(251808),y=n(186905),_=n(103593),C=n(102176),R=n(59860),N=n(476604),O=n(876542),b=n(801455),v=n(196641),P=n(205986),L=n(476031),D=n(533308),M=n(417241)
const w=a.Ps`
  query CreateEntryFromTemplateQuery($id: StrictString!) @skipAudit @engComponent(name: NOTEBOOK) {
    template(id: $id) {
      ... on TemplateNode {
        name
        id
        tagsJson
        tagSchema {
          ...TagSchemaGraphQL
        }
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,h.f)("TagSchema").fragment}
  ${(0,h.f)("InaccessibleInfo").fragment}
`
function CreateEntryFromTemplateModalContents(e){return o.createElement(o.Fragment,null,o.createElement(R.Z,null,o.createElement(_.Z,{sm:7},o.createElement(C.Z,{dataTestAttrs:{component:"CreateEntryFromTemplateModal",element:"template"}},o.createElement(b.Z,{label:"Template",isRequired:!0}),o.createElement(D.Z,{isDisabled:e.isTemplateSelectorDisabled,selectedTemplateId:e.templateId||"",onChangeSelectedTemplate:e.changeTemplate}))),o.createElement(_.Z,{sm:5},o.createElement(C.Z,{dataTestAttrs:{component:"CreateEntryFromTemplateModal",element:"initialDay"}},o.createElement(b.Z,{label:"Initial Day",isRequired:!0}),o.createElement(O.Z,{labelStyle:O.Z.LABEL_STYLES.HIDDEN,value:e.initialDay,onChange:e.setInitialDay,placeholder:""})))),o.createElement(R.Z,null,o.createElement(_.Z,{sm:7},o.createElement(C.Z,{dataTestAttrs:{component:"CreateEntryFromTemplateModal",element:"name"}},o.createElement(b.Z,{label:"Name",isRequired:!0}),o.createElement("input",{type:"text",value:e.entryName,onChange:t=>{e.setEntryName((0,L.Z)(t.target.value))}}))),o.createElement(_.Z,{sm:5},o.createElement(C.Z,{dataTestAttrs:{component:"CreateEntryFromTemplateModal",element:"project"}},o.createElement(b.Z,{label:"Project",isRequired:!0}),o.createElement(u.Z,{enableRedesign:!0,showNotebook:!0,value:e.folderId,onChange:t=>{e.setFolderId(t.target.value)},unsetOnFetchFail:!0})))),c.ZP.STUDIES_ENABLE&&e.studySearchControlledItemsProps&&o.createElement(R.Z,null,o.createElement(_.Z,{sm:12},o.createElement(C.Z,null,o.createElement(b.Z,{label:"Studies"}),o.createElement(y.ZP,{...e.studySearchControlledItemsProps,shouldAllowMultiple:!0})))),o.createElement(R.Z,null,o.createElement(_.Z,{md:12,className:"col-centered"},o.createElement(b.Z,{label:"Entry Schema",isRequired:c.ZP.ELN_ENABLE_SCHEMA_REQUIRED_FOR_REVIEW}),e.templateId?e.queryIsPending?o.createElement(N.b,null):o.createElement(T.Z,{canRefreshTags:f.hasComputedTags((0,A.IT)(e.schemaTags))||I.v((0,A.IT)(e.schemaTags)),emptyMessage:"This schema has no fields.",errorsByFieldId:e.errorsByFieldId,tags:e.schemaTags,showEditButtons:!1,isLoadingTags:!1,onAnalyzeProteins:i.ZT,registryId:null===(t=e.tagSchema)||void 0===t?void 0:t.registryId,sequenceParts:null,subheaderNode:o.createElement(S.Z,{fileType:d.ENTRY,isSchemaEditable:e.canChangeSchema(),isFileRegistered:!1,onUpdateTagSchema:e.updateTagSchema,tagSchema:e.tagSchema}),title:o.createElement("div",null,"Schema"),onUpdateTag:e.updateSchemaTag,isEditing:!0}):o.createElement("div",null,"Please select a template first"))))
var t}function useEntryTemplate(e,t,n){const[a,i]=(0,o.useState)(e);(0,o.useEffect)((()=>{e&&M.Z.get(e).done((e=>{i(e.id)
t((0,L.Z)(e.name))}))}),[e,t])
const r=(0,p.A4)(w,{variables:{id:a},fetchPolicy:"cache-and-network",skip:null==a}),s=r.type!==p.NI.SUCCESS||(0,l.Eh)(r.data)?null:r.data;(0,o.useEffect)((()=>{if(r.type===p.NI.SUCCESS&&s){const e=s.template
if(isTemplateInaccessibleInfo(e)||null==e.tagSchema)n(null)
else{const t=(0,E.tY)("TagSchema",e.tagSchema),{schemaTags:a}=A.JY({tags:e.tagsJson,tagSchema:t})
n(t,a)}}}),[r.type,s,n])
return{templateId:a,changeTemplate:e=>{i(e.id)
t((0,L.Z)(e.name))},templateResult:r,canChangeSchema:()=>!(r.type===p.NI.SUCCESS&&!isTemplateInaccessibleInfo(r.data.template))||!r.data.template.tagSchema}}function useInitialEntryDay(){const[e,t]=(0,o.useState)(s()().format(v.O1))
return{initialDay:e,setInitialDay:t}}function isTemplateInaccessibleInfo(e){return"invalidId"in e}function isCreationDisabled(e,t,n,a,i,r){return null==e||!t.length||null==n||a===p.NI.PENDING||!!c.ZP.ELN_ENABLE_SCHEMA_REQUIRED_FOR_REVIEW&&!i||c.ZP.ELN_ENFORCE_REQUIRED_FIELDS_ON_ENTRY_CREATE&&Object.keys(r).length>0}const F=function CreateEntryFromTemplateModal(e){var t
const[n,a]=(0,o.useState)(""),[i,r]=(0,o.useState)(e.initialFolderId),{tagSchema:s,schemaTags:l,updateTagSchema:c,updateSchemaTag:d}=(0,g.RE)(),{templateId:u,changeTemplate:h,templateResult:E,canChangeSchema:S}=useEntryTemplate(e.initialTemplateId||null,a,c),{initialDay:T,setInitialDay:f}=useInitialEntryDay(),I=(0,y.Gm)(null!==(t=e.initialStudySearchItems)&&void 0!==t?t:[]),_=s?(0,g.Dr)(s,l):{}
return o.createElement(P.ZP,{title:"Create entry from template",onRequestClose:e.onRequestClose,onRequestSubmit:()=>{if(null==i||null==u)return
const t=(0,y.ZC)(I)
m.Z.set(m.O.NOTEBOOK,i)
const a={entryName:n,folderId:i,templateId:u,tagSchemaId:null==s?void 0:s.id,schemaTags:(0,A.UR)(l),initialDay:T}
0!==t.length&&(a.studyIds=t)
e.onRequestSubmit(a)},buttons:[{text:"Create",submit:!0,disabled:isCreationDisabled(u,n,i,E.type,null!=s,_)}]},o.createElement(CreateEntryFromTemplateModalContents,{isTemplateSelectorDisabled:e.isTemplateSelectorDisabled,templateId:u,changeTemplate:h,initialDay:T,setInitialDay:f,entryName:n,setEntryName:a,folderId:i,setFolderId:r,queryIsPending:E.type===p.NI.PENDING,canChangeSchema:S,schemaTags:l,tagSchema:s,updateTagSchema:c,updateSchemaTag:d,errorsByFieldId:_,studySearchControlledItemsProps:I}))}},535937:(e,t,n)=>{n.d(t,{K:()=>CreateSubtemplateModal,Z:()=>C})
var a=n(64558),i=n(989526),r=n(232606),s=n(348920),o=n(675649),l=n(459830),c=n(291531),d=n(978980),u=n(115902),m=n(579635),p=n(481677),h=n(411358),E=n(251808),S=n(103593),T=n(102176),g=n(929123),f=n(59860),I=n(229329),A=n(205986),y=n(476031),_=n(955080)
function CreateSubtemplateModal(e){return i.createElement(CreateBaseTemplateModal,{...e,title:"Create sub-template",enableFillInTemplate:!1,enableSchemaOnEntry:!1})}function CreateBaseTemplateModal(e){const[t,n]=(0,i.useState)(""),[s,C]=(0,i.useState)(e.initialTemplateCollection),[R,N]=(0,i.useState)(!1),{tagSchema:O,schemaTags:b,updateTagSchema:v,updateSchemaTag:P}=(0,u.RE)(),L=O?(0,u.Dr)(O,b,!1):{}
return i.createElement(A.ZP,{title:e.title,onRequestClose:e.onRequestClose,onRequestSubmit:function submit(){(0,r.hu)(0===Object.keys(L).length,"Submit button should be disabled if there are errors present")
e.onSubmit(t,s,R,O,(0,E.UR)(b))},buttons:[{text:"Create",submit:!0,disabled:!function isSubmitEnabled(){const e=t.trim().length>0,n=null!=s,a=0===Object.keys(L).length
return e&&n&&a}()},{text:"Manage Collections",onClick:function manageCollections(t){const n=m.Z.collectionsURL()
o.c4(t,n)
e.onRequestClose()},asLink:!0,pullLeft:!0}],dataTestAttrs:{component:"CreateTemplateModal",element:"modal"}},i.createElement(f.Z,null,i.createElement(S.Z,{sm:7},i.createElement(T.Z,{dataTestAttrs:{component:"CreateTemplateModal",element:"name"}},i.createElement(g.Z,null,"Name"),i.createElement("input",{type:"text",value:t,onChange:e=>{n((0,y.Z)(e.target.value))},autoFocus:!0}))),i.createElement(S.Z,{sm:5},i.createElement(g.Z,null,"Template Collection"),i.createElement(_.Z,{value:s,onChange:function handleChangeTemplateCollection(e){C(e)}}))),e.enableSchemaOnEntry&&i.createElement(f.Z,null,i.createElement(S.Z,{sm:12},i.createElement(g.Z,null,"Entry Schema"),i.createElement(d.Z,{canRefreshTags:p.hasComputedTags((0,E.IT)(b))||h.v((0,E.IT)(b)),emptyMessage:"This schema has no fields.",errorsByFieldId:L,tags:b,showEditButtons:!1,isLoadingTags:!1,onAnalyzeProteins:a.ZT,registryId:null==O?void 0:O.registryId,sequenceParts:null,subheaderNode:i.createElement(c.Z,{fileType:l.ENTRY,isSchemaEditable:!0,isFileRegistered:!1,onUpdateTagSchema:v,tagSchema:O}),title:i.createElement("div",null,"Schema"),onUpdateTag:P,isEditing:!0}))),e.enableFillInTemplate&&i.createElement(f.Z,null,i.createElement(S.Z,{sm:12},i.createElement(g.Z,null,"Fill-in Only"),i.createElement(I.Z,{id:"isProtectedCheckbox",checked:R,label:"Entries created from this template will be locked. Users can only fill in tables, text boxes,\n          checkboxes, and files.",onChange:e=>{N(e.target.checked)}}))))}const C=function CreateTemplateModal(e){return i.createElement(CreateBaseTemplateModal,{...e,title:"Create template",enableFillInTemplate:s.ZP.ELN_ENABLE_FILL_IN_TEMPLATES,enableSchemaOnEntry:s.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL})}},533308:(e,t,n)=>{n.d(t,{Z:()=>SelectTemplateDropdown})
var a=n(769784),i=n(989526),r=n(751512),s=n(417241),o=n(954240),l=n(865486),c=n(472347),d=n(227277),u=n(567e3)
const m=a.Ps`
  query SelectTemplateDropdownQuery @skipAudit @engComponent(name: NOTEBOOK) {
    currentUser {
      id
      starredTemplates {
        id
      }
    }
    templates {
      id
      name
      templateCollection {
        id
        name
      }
      archiveRecord {
        purpose
      }
    }
  }
`
function getTemplateDisplayText(e){return`${e.templateCollection.name} / ${e.name}`}function PresentationalSelectTemplateDropdown(e){const t=(0,u.Z)(e.templates.filter((e=>null==e.archiveRecord)).map((e=>function makeOptionData(e){return{name:getTemplateDisplayText(e),value:e.id,icon:"template",className:"newDropdown-schemaOption",extra:{unstarrable:!1}}}(e))),[t=>e.starredTemplateIds.includes(t.value)?`a${t.name}`:`b${t.name}`]),n=e.templates.find((t=>t.id===e.selectedTemplateId))
return i.createElement(o.ZP,{disabled:e.isDisabled,displayName:n?getTemplateDisplayText(n):"Select a Template",menu:i.createElement(c.Z,{className:"menu--short",scrollable:!0,width:l.ZP.WIDTHS.FULL,onSelect:t=>{const n=e.templates.find((e=>e.id===t))
e.onChangeSelectedTemplate(n)},optionDatas:t,renderOptionContent:(0,d.V)((async t=>{e.starredTemplateIds.includes(t)?await s.Z.unstar([t]):await s.Z.star([t])
e.refetch()}),e.starredTemplateIds,{getId:e=>e.value}),selectedValue:e.selectedTemplateId})})}function SelectTemplateDropdown(e){const t=function useSelectTemplateDropdownQueryData(){const e=(0,r.IJ)(m,{renderCachedDataWhenRefetching:!0,fetchPolicy:"network-only"})
return e.type!==r.NI.SUCCESS?{starredTemplateIds:[],templates:[],refetch:e.refetch}:{starredTemplateIds:e.data.currentUser?e.data.currentUser.starredTemplates.map((e=>e.id)):[],templates:e.data.templates,refetch:e.refetch}}()
return i.createElement(PresentationalSelectTemplateDropdown,{...e,...t})}},213851:(e,t,n)=>{n.d(t,{Jw:()=>o,UY:()=>TEMPLATE_DAY_0_MOMENT,m:()=>l})
var a=n(536105),i=n.n(a),r=n(602652),s=n(56063)
const o="1970-01-01"
function TEMPLATE_DAY_0_MOMENT(){return i()(o)}const l="templates.seen_feature_banner"
r.shape({id:r.string.isRequired,url:r.string.isRequired,name:r.string.isRequired,description:r.string.isRequired,counts:r.shape({template:r.number.isRequired}).isRequired,templates:r.array,permissions:s.OD})},417241:(e,t,n)=>{n.d(t,{Z:()=>r})
var a=n(788836),i=n(771398)
const r={create:({name:e,templateCollectionId:t,isProtected:n,tagSchema:a,schemaTags:r})=>{const s={name:e,templateCollection:t,isProtected:n,tagSchemaId:null==a?void 0:a.id,schemaTags:r}
return i.ty({url:"/1/api/templates/",data:s})},delete:e=>i.$v({url:`/1/api/templates/${e}`}),get:e=>i.xA(`/1/api/templates/${e}`,{view:!0}),getVersions:e=>i.xA(`/1/api/templates/${e}/versions/`),update:(e,t)=>i.Yh({url:`/1/api/templates/${e}`,data:t}),getVersion:(e,t)=>i.xA(`/1/api/templates/${e}/versions/${t}`),fetchTemplates:()=>i.xA("/1/api/templates").then((({data:e})=>e)),fetchCollections:e=>i.xA("/1/api/template-collections/",{level:e}).then((({data:e})=>e)),fetchCollection:e=>i.xA(`/1/api/template-collections/${e}`),star:e=>i.s0({url:"/1/api/templates:star",data:{templateIds:e}}),unstar:e=>i.s0({url:"/1/api/templates:unstar",data:{templateIds:e}}),templateURL:e=>`/${a.Z.currentUser().url_identifier}/templates/${e}`}},991828:(e,t,n)=>{n.d(t,{Z:()=>g})
var a=n(989526),i=n(531041),r=n(348920),s=n(459830),o=n(626054),l=n(787004),c=n(681896),d=n(91092),u=n(947730),m=n(579635),p=n(138966),h=n(974913)
function ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}const E={updateWithXHR:function(e,t){u.Z.dispatch({actionType:l.KHI,collectionId:e,data:t})
return r.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR?m.Z.update(e,t).done((e=>{(0,c.writeFragmentsToCache)((0,d.f)("TemplateCollectionSummary"),[_objectSpread({__typename:"TemplateCollectionNode"},e)])})).fail(h.ZP.notifyError):m.Z.update(e,t).done((t=>{u.Z.dispatch({actionType:l.KIt,collectionId:e,collection:t})})).fail((()=>{u.Z.dispatch({actionType:l.gcw,collectionid:e})}))},deleteWithXHR:function(e){u.Z.dispatch({actionType:l.Ib6,templateCollectionId:e})
return r.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR?m.Z.delete(e).done((t=>{u.Z.dispatch({actionType:l.KmV,collectionId:e,collection:t})})).then((()=>{(0,p.ZP)(m.Z.collectionsURL())})).fail(h.ZP.notifyError):m.Z.delete(e).done((t=>{u.Z.dispatch({actionType:l.KmV,collectionId:e,collection:t})})).fail((()=>{u.Z.dispatch({actionType:l.vE0,collectionId:e})}))}},S=E
var T=n(87209)
class ManageTemplateCollectionModal extends a.Component{constructor(){super(...arguments)
this.state=r.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR?{}:{collaborators:null}
this.updateTemplateCollection=e=>S.updateWithXHR(this.props.templateCollection.id,e)
this.deleteTemplateCollection=()=>S.deleteWithXHR(this.props.templateCollection.id)}componentDidMount(){this._isMounted=!0
if(!r.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR){T.$Z()
m.Z.fetchCollaborators(this.props.templateCollection.id).done((e=>{this._isMounted&&this.setState({collaborators:e})})).fail((e=>{h.ZP.notifyError(e)
this._isMounted&&this.props.onRequestClose()})).always((()=>{T.Cp()}))}}componentWillUnmount(){this._isMounted=!1}render(){var e,t
if(!r.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR&&!this.state.collaborators)return null
const{owner:n}=this.props.templateCollection,l=r.ZP.ELN_ENABLE_TEMPLATE_COLLECTIONS_PAGE_REFACTOR?this.props.templateCollection.collaborators.filter((e=>e.id!==n.id)):this.state.collaborators.filter((e=>e.id!==n.id))
return a.createElement(o.Z,{onRequestClose:this.props.onRequestClose,existingOwnable:i.default.extend({},this.props.templateCollection,{collaborators:l,owner:n}),ownableType:s.TEMPLATE_COLLECTION,isReadOnly:!(null===(t=null===(e=this.props.templateCollection)||void 0===e?void 0:e.permissions)||void 0===t?void 0:t.admin),doSubmit:this.updateTemplateCollection,doDelete:!r.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING&&r.ZP.ENABLE_DELETE?this.deleteTemplateCollection:null})}}const g=ManageTemplateCollectionModal},62335:(e,t,n)=>{n.d(t,{c:()=>MoveToTemplateCollectionModal})
var a=n(989526),i=n(955080),r=n(801455),s=n(205986)
function MoveToTemplateCollectionModal(e){const[t,n]=(0,a.useState)(e.initialTemplateCollectionId)
return a.createElement(s.ZP,{title:e.title,large:!1,buttons:[{text:"Move",submit:!0}],onRequestClose:e.onRequestClose,onRequestSubmit:()=>{"string"!=typeof t&&t.id!==e.initialTemplateCollectionId?e.onRequestSubmit(t.id):e.onRequestClose()}},a.createElement(r.Z,{label:"Template Collection"}),a.createElement(i.Z,{value:t,onChange:e=>{n(e)}}))}},579635:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(788836),i=n(379346),r=n(771398),s=n(8747)
const o={create:({name:e,description:t,owner:n,collaborators:a,ownerInfo:i})=>r.ty({url:"/1/api/template-collections/",data:{name:e,description:t,owner:n.handle,ownerInfo:i,collaborators:a}}),update:(e,{name:t,description:n,owner:a,collaborators:i,ownerInfo:s})=>r.Yh({url:`/1/api/template-collections/${e}`,data:{name:t,description:n,owner:a.handle,ownerInfo:s,collaborators:i}}),delete:e=>r.$v({url:`/1/api/template-collections/${e}`}),fetchCollaborators:e=>r.xA(`/1/api/template-collections/${e}/collaborators/`),collectionsURL:()=>`/${a.Z.currentUser().url_identifier}/template-collections/`,collectionURL(e){const t=i.ZP.unprefixApiId(e)
return`/${a.Z.currentUser().url_identifier}/template-collections/${t}`},bulkArchive:(e,t)=>s.s0({url:"/1/api/template-collections:bulk-archive",data:{ids:e,purpose:t}}),bulkUnarchive:e=>s.s0({url:"/1/api/template-collections:bulk-unarchive",data:{ids:e}})}},98190:(e,t,n)=>{n.d(t,{rm:()=>TemplateCollectibleNameCell,ZP:()=>TemplateCollectionPage})
var a=n(692013),i=n(769784),r=n(989526),s=n(620080),o=n(804589),l=n(764677),c=n(759426),d=n(836291),u=n(367780),m=n(996447),p=n(382857),h=n(232606),E=n(7060),S=n(348920),T=n(675649),g=n(459830),f=n(169602),I=n(238807),A=n(256605),y=n(751512),_=n(91092),C=n(965131),R=n(697134),N=n(579635),O=n(535937),b=n(356304),v=n(635439),P=n(400783),L=n(60473),D=n(138966),M=n(476031),w=n(955080),F=n(982337),k=n(294780),U=n(633856),x=n(103593),B=n(102176),Z=n(929123),q=n(59860),G=n(205986),V=n(883026)
function CreateProcedureModal(e){const[t,n]=(0,r.useState)(""),[a,i]=(0,r.useState)(e.initialTemplateCollection),s=`Create ${(0,L.ZP)(L.B3.TITLE)}`,o=t.trim(),l=(0,k.id)(o)
return r.createElement(G.ZP,{title:s,onRequestClose:e.onRequestClose,onRequestSubmit:async()=>{await(0,V.jI)(e.onCreateProcedure({name:o,templateCollectionId:a.id,flowchart:(0,F.AR)()}).then((e=>{(0,D.ZP)((0,U.procedurePageUrl)(e))})),`Creating new ${(0,L.ZP)(L.B3.TITLE,{stringCase:L.P8.LOWER})}...`)
e.onRequestClose()},buttons:[{text:"Create",submit:!0,disabled:!function isSubmitEnabled(){return null!=a&&!l}(),tooltipTitle:l?"Procedure names must be non-empty.":null},{text:"Manage Collections",onClick:function manageCollections(t){const n=N.Z.collectionsURL()
T.c4(t,n)
e.onRequestClose()},asLink:!0,pullLeft:!0}],dataTestAttrs:{component:"CreateProcedureModal",element:"modal"}},r.createElement(q.Z,null,r.createElement(x.Z,{sm:7},r.createElement(B.Z,{dataTestAttrs:{component:"CreateProcedureModal",element:"name"}},r.createElement(Z.Z,null,"Name"),r.createElement("input",{type:"text",value:t,onChange:e=>{n((0,M.Z)(e.target.value))},autoFocus:!0}))),r.createElement(x.Z,{sm:5},r.createElement(Z.Z,null,"Template Collection"),r.createElement(w.Z,{value:a,onChange:e=>{i(e)}}))))}var H=n(129270),W=n(868710),Y=n(334148),$=n(271359),K=n(198964),z=n(954240),Q=n(898808),j=n(195941),J=n(476604),X=n(36424),ee=n(865486),te=n(297020),ne=n(924982),ae=n(472347),ie=n(629656),re=n(173220),se=n(75359),oe=n(502633),le=n(405945),ce=n(219048),de=n(379346),ue=n(10584),me=n(808844),pe=n(257846),he=n(506276),Ee=n(567284),Se=n(991828)
const Te="All items",ge="Templates",fe="Sub-templates",Ie="Forms",Ae="Procedures",ye=new Map([[g.TEMPLATE,()=>(0,me.E2)(g.TEMPLATE)],[g.SUBTEMPLATE,()=>(0,me.E2)(g.SUBTEMPLATE)],[g.FORM_DEFINITION,()=>(0,me.E2)(g.FORM_DEFINITION)],[g.PROCEDURE,()=>(0,L.ZP)(L.B3.TITLE)]]),_e=new Map([[ge,"template"],[fe,"subtemplate"],[Ie,"form_definition"],[Ae,"procedure"]]),Ce=i.ZP`
  query TemplateCollectionPageQuery($collectionId: StrictString!) @skipAudit @engComponent(name: NOTEBOOK) {
    templateCollection(id: $collectionId) {
      ... on TemplateCollectionNode {
        id
        name
        archiveRecord {
          purpose
        }
        description
        ownerJson
        ownerInfoJson
        collaboratorsJson
        url
        counts
        createdAt
        modifiedAt
        permissions {
          ...TemplateCollectionPermissionsGraphQL
        }
        templateCollectibles {
          ... on TemplateCollectibleInterface {
            id
            name
            archiveRecord {
              purpose
            }
            editUrl
            creator
            createdAt
            modifiedAt
            templateCollection {
              id
              name
              url
              counts
              description
              createdAt
              modifiedAt
            }
          }
          ...CoreObjectArchivableGraphQL
          ... on FormDefinitionNode {
            id
            isValid
          }
        }
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,_.f)("InaccessibleInfo").fragment}
  ${(0,_.f)("CoreObjectArchivable").fragment}
  ${(0,_.f)("TemplateCollectionPermissions").fragment}
`,Re=i.ZP`
  query TemplateCollectionPageListingQuery(
    $collectionId: StrictString!
    $searchInput: StrictString
    $typeFilter: [StrictString!]
    $archiveFilter: [StrictString]
    $limitOffsetInput: LimitOffsetInput
  ) @skipAudit {
    templateCollection(id: $collectionId) {
      ... on TemplateCollectionNode {
        id
        collectiblesListing(
          searchInput: $searchInput
          typeFilter: $typeFilter
          archiveFilter: $archiveFilter
          limitOffsetInput: $limitOffsetInput
        ) {
          total
          collectibles {
            ... on TemplateCollectibleInterface {
              id
              name
              archiveRecord {
                purpose
              }
              editUrl
              creator
              createdAt
              modifiedAt
              templateCollection {
                id
                name
                url
                counts
                description
                createdAt
                modifiedAt
              }
            }
            ...CoreObjectArchivableGraphQL
            ... on FormDefinitionNode {
              id
              isValid
            }
          }
        }
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,_.f)("InaccessibleInfo").fragment}
  ${(0,_.f)("CoreObjectArchivable").fragment}
`,Ne=i.ZP`
  query TemplateCollectionPageSummaryQuery($collectionId: StrictString!) @skipAudit {
    templateCollection(id: $collectionId) {
      ... on TemplateCollectionNode {
        id
        name
        archiveRecord {
          purpose
        }
        description
        ownerJson
        ownerInfoJson
        collaboratorsJson
        url
        counts
        createdAt
        modifiedAt
        permissions {
          ...TemplateCollectionPermissionsGraphQL
        }
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,_.f)("InaccessibleInfo").fragment}
  ${(0,_.f)("TemplateCollectionPermissions").fragment}
`,Oe=a.mM.create({searchInput:{marginRight:10,width:200},filterDropdown:{marginRight:10},centerVertically:{display:"flex",alignItems:"center"},learnMoreText:{fontSize:"7px",fontWeight:H.KB},learnMoreButton:{padding:"0px 4px",marginLeft:"10px",height:"14px"},centerColumnHorizontally:{height:"70vh",justifyContent:"center",flexDirection:"column"},emptyComponent:{paddingLeft:"30%",paddingRight:"30%"},headerDescription:{margin:"0px",color:$.Rl,...H.cf},darkGray:{color:$.pp},subDescription:{margin:"20px"},reviewDescription:{...H.E0},icon:{margin:"20px",width:"69px",height:"69px"},resultsPager:{paddingLeft:"20px"}})
function getColumnHeaders(){const e=[{name:"Name",width:4},{name:"Author",width:2},{name:"Created",width:2},{name:"Last Modified",width:2}];(S.ZP.ELN_ENABLE_SUBTEMPLATES||(0,he.u)()||S.ZP.PROCEDURES_ENABLE)&&e.splice(1,0,{name:"Type",width:2})
return e}const be="TEMPLATE_COLLECTION_MODAL_CONTAINER_KEY"
function mapTemplateToRowValue(e){var t
const n=[r.createElement(TemplateCollectibleNameCell,{templateCollectibleInfo:e,markNeedsUpdate:"FormDefinitionNode"===e.__typename&&!e.isValid}),e.creator,(0,ue.UT)(e.createdAt,{showTime:!1}),(0,ue.UT)(e.modifiedAt,{showTime:!1})];(S.ZP.ELN_ENABLE_SUBTEMPLATES||(0,he.u)()||S.ZP.PROCEDURES_ENABLE)&&n.splice(1,0,(null===(t=ye.get(de.ZP.apiIdToType(e.id)))||void 0===t?void 0:t())||"")
return n}function TemplateCollectionTable({collection:e,resultType:t,summaryRefetch:n}){var i
const[T,g]=(0,r.useState)(""),_=(0,j.N)(T,250),[N,D]=(0,r.useState)(Te),[M,w]=(0,r.useState)({limit:200,offset:0}),[F,k]=(0,r.useState)([l.BH]),U=(0,L.ZP)(L.B3.TITLE,{plural:!0}),x=(0,L.ZP)(L.B3.TITLE)
let B=(0,r.useMemo)((()=>function getFilteredTemplates(e,t,n,a){if(function isResultWithCollectibles(t){return void 0!==e.templateCollectibles}()){const i=(null==e?void 0:e.templateCollectibles)?null==e?void 0:e.templateCollectibles.filter((e=>pe.Z.caseInsensitiveContains(e.name,t)&&(n===Te||"TemplateNode"===e.__typename&&n===ge||"SubtemplateNode"===e.__typename&&n===fe||"FormDefinitionNode"===e.__typename&&n===Ie||"ProcedureNode"===e.__typename&&n===Ae))):[]
i.sort(((e,t)=>{const n=e.name.toUpperCase(),a=t.name.toUpperCase()
return n<a?-1:n>a?1:0}))
return c.F(i,a)||[]}return[]}(e,T,N,F)),[T,N,e,F]),Z=-1,q=!1
const G=_e.get(N),V=(0,y.A4)(Re,{variables:{collectionId:e.id,searchInput:_,typeFilter:G?[G]:void 0,archiveFilter:F.map((e=>e===l.BH?null:e)),limitOffsetInput:M},skip:!S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION,fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0})
if(S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION){if(V.type===y.NI.ERROR)return r.createElement("div",null,"Cannot load items for collection")
if(V.type===y.NI.SUCCESS){const e=V.data.templateCollection;(0,h.hu)(!(0,R.CZ)(e),"Expected result schema to be accessible.")
q=V.loading&&void 0===e.collectiblesListing
B=e.collectiblesListing?e.collectiblesListing.collectibles:[]
Z=e.collectiblesListing?e.collectiblesListing.total:-1}}function handleSubmit(e,t,n,a,i){b.Z.createThenOpen(e,t.id,n,a,i).done((()=>{ie.xv(be)}))}function handleSubmitSubtemplate(e,t){Ee.Z.createThenOpen(e,t.id).then((()=>{ie.xv(be)}))}function createTemplateClickHandler(){if(!e)return
const t=(0,C.tY)("TemplateCollection",e)
ie.bA(be,r.createElement(O.Z,{onRequestClose:()=>{ie.xv(be)},onSubmit:handleSubmit,initialTemplateCollection:t}))}function showSettingsClickHandler(){(0,oe.Z)(Se.Z,{templateCollection:(0,C.tY)("TemplateCollection",e)})}const H=[{name:Te,value:Te},{name:ge,value:ge}]
S.ZP.ELN_ENABLE_SUBTEMPLATES&&H.push({name:fe,value:fe});(0,he.u)()&&H.push({name:Ie,value:Ie})
S.ZP.PROCEDURES_ENABLE&&H.push({name:U,value:Ae})
const $=t===y.NI.SUCCESS&&e?B.map(((e,t)=>({id:e.id,itemIndex:t,values:mapTemplateToRowValue(e),isArchivable:!0,isArchived:(0,p.ZP)(e)}))):[],J=t===y.NI.PENDING||t===y.NI.SKIPPED||S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION&&(q||V.type===y.NI.PENDING),le=!(null===(i=null==e?void 0:e.permissions)||void 0===i?void 0:i.appendable)||J,ce=r.createElement(K.ZP,{menu:r.createElement(ee.ZP,{width:te.zL.SMALL},r.createElement(ne.Z,{onSelect:createTemplateClickHandler,dataTestAttrs:{component:"TemplateCollectionPage",element:"option",key:"template"}},"Template"),S.ZP.ELN_ENABLE_SUBTEMPLATES&&r.createElement(ne.Z,{onSelect:function createSubtemplateClickHandler(){if(!e)return
const t=(0,C.tY)("TemplateCollection",e)
ie.bA(be,r.createElement(O.K,{onRequestClose:()=>{ie.xv(be)},onSubmit:handleSubmitSubtemplate,initialTemplateCollection:t}))},dataTestAttrs:{component:"TemplateCollectionPage",element:"option",key:"subtemplate"}},"Sub-template"),(0,he.u)()&&r.createElement(ne.Z,{onSelect:function createFormClickHandler(){if(!e)return
const t=(0,C.tY)("TemplateCollection",e)
ie.bA(be,r.createElement(f.Z,{onRequestClose:()=>{ie.xv(be)},initialTemplateCollection:t}))},dataTestAttrs:{component:"TemplateCollectionPage",element:"option",key:"form"}},"Form"),S.ZP.PROCEDURES_ENABLE&&r.createElement(ne.Z,{onSelect:function createProcedureClickHandler(){if(!e)return
const t=(0,C.tY)("TemplateCollection",e)
ie.bA(be,r.createElement(CreateProcedureModal,{onRequestClose:()=>{ie.xv(be)},initialTemplateCollection:t,onCreateProcedure:async e=>{const{name:t,templateCollectionId:n,flowchart:a}=e,{createdIds:[i]}=await v.Nc({name:t,templateCollectionId:n,flowchart:(0,P.D$)({flowchart:a,metadata:{}})})
return i}}))},dataTestAttrs:{component:"TemplateCollectionPage",element:"option",key:"procedure"}},x))},r.createElement(Y.Co,{isDropdown:!0,buttonStyle:Y.ZJ.PRIMARY,text:"Create",size:Y.qE.SMALL,disabled:le,dataTestAttrs:{component:"TemplateCollectionPage",element:"button",key:"create"}})),de=r.createElement(W.ZP,{title:"New Template",placement:W.TQ.BOTTOM,container:"body"},r.createElement(Y.Co,{buttonStyle:Y.ZJ.PRIMARY,text:"Create template",size:Y.qE.SMALL,onClick:createTemplateClickHandler,disabled:le}))
return r.createElement("div",null,r.createElement(Q.ZP,{columnHeaders:getColumnHeaders(),emptyMessage:r.createElement("div",{className:(0,a.iv)(Oe.emptyComponent,Oe.centerColumnHorizontally,Oe.centerVertically)},r.createElement(X.Z,{className:(0,a.iv)(Oe.icon,Oe.darkGray),icon:"benchling"}),r.createElement("div",{className:(0,a.iv)(Oe.headerDescription)},"Nothing here!")),isLoading:J,rows:$,getEditUrl:t=>null==e?"":B[t].editUrl,writable:!0,onArchive:S.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING?e=>{!function onTemplateArchive(e,t){const n=e.filter((e=>!(0,p.ZP)(e)))
m.bA({items:n,onArchive:(e,n,a)=>{(0,o.np)(e)(e,n,a,(()=>{t();(0,I.$6)(e,{action_origin:A.D2.NOTEBOOK_TEMPLATE_COLLECTION_PAGE})}))}})}([B[e]],V.refetch)}:null,onUnarchive:S.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING?e=>{!function onTemplateUnarchive(e,t){const n=e.filter((e=>e.archiveRecord)).map((e=>e.id));(0,o.cI)(n)(n,void 0,(()=>{t();(0,I.HJ)(n,{action_origin:A.D2.NOTEBOOK_TEMPLATE_COLLECTION_PAGE})}))}([B[e]],V.refetch)}:null,leftSubheaderNode:r.createElement("div",null,r.createElement("div",{className:"u-flex-display"},r.createElement(re.ZP,{className:(0,a.iv)(Oe.searchInput),borderRadius:re.cM.LARGE,placeholder:"Search",value:T,onChange:e=>{w((e=>({...e,offset:0})))
g(e.target.value)},onEscape:()=>{w((e=>({...e,offset:0})))
g("")}}),(S.ZP.ELN_ENABLE_SUBTEMPLATES||(0,he.u)())&&r.createElement(z.ZP,{className:(0,a.iv)(Oe.filterDropdown),displayName:N===Ae?U:N,menu:r.createElement(ae.Z,{onSelect:D,optionDatas:H,selectedValue:N})}),S.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING&&r.createElement(d.Z,{itemIds:["tmpl_123","sbtmpl_123","fmdef_123"],onChangePurposes:k,selectedPurposes:F})),S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION&&r.createElement(se.Z,{allowFastForwardAndBackward:!0,isLoading:J,setOffset:e=>{w((t=>({...t,offset:e})))},pagination:{...M,total:Z}})),rightSubheaderNode:r.createElement((function ButtonBar(){return r.createElement("div",{className:"buttonToolbar"},r.createElement(E.Z,{ids:[e.id],buttonSize:Y.qE.SMALL,buttonStyle:Y.ZJ.TERTIARY_GRAY}),S.ZP.ELN_ENABLE_TEMPLATE_ARCHIVING&&r.createElement(u.Z,{isArchivable:Boolean(e.permissions.archivable),isUnarchivable:Boolean(e.permissions.unarchivable),item:{id:e.id,name:e.name,archiveRecord:e.archiveRecord},onArchive:(e,t,a)=>{(0,s.KT)(e,t,a,(()=>{n()
V.refetch()}))},onUnarchive:e=>{(0,s.FI)(e,void 0,(()=>{n()
V.refetch()}))}}),r.createElement(Y.Co,{buttonStyle:Y.ZJ.TERTIARY_GRAY,icon:"settings",onClick:showSettingsClickHandler,size:Y.qE.SMALL}),S.ZP.ELN_ENABLE_SUBTEMPLATES||(0,he.u)()?ce:de)}),null)}),J||Z<M.limit?null:r.createElement(se.Z,{allowFastForwardAndBackward:!0,isLoading:J,setOffset:e=>{w((t=>({...t,offset:e})))},pagination:{...M,total:Z}}))}function TemplateCollectionPage({collectionId:e}){return r.createElement("div",{className:"u-flex-display u-vertical-flex u-height-full"},r.createElement("div",{className:"u-flex-full-height"},S.ZP.ELN_ENABLE_TEMPLATE_COLLECTION_PAGINATION?r.createElement(y.ZP,{query:Ne,variables:{collectionId:e},fetchPolicy:"cache-and-network",renderLoading:()=>r.createElement(le.Z,{breadcrumbs:[{name:"Template Collections",url:N.Z.collectionsURL()}]},r.createElement(J.b,null))},((e,t)=>{(0,h.hu)(!(0,R.CZ)(e.templateCollection),"Expected result schema to be accessible.")
const n=e.templateCollection;(0,T._w)(`${n.name} - Template Collections`)
return r.createElement(le.Z,{breadcrumbs:[{name:"Template Collections",url:N.Z.collectionsURL()}],title:null!=n?n.archiveRecord?`${n.name} (${n.archiveRecord.purpose})`:n.name:void 0,type:(0,me.E2)(g.TEMPLATE_COLLECTION),dataTestAttrs:{component:"TemplateCollectionPage",element:"root"}},r.createElement(TemplateCollectionTable,{collection:n,resultType:t.type,summaryRefetch:t.refetch}))})):r.createElement(y.ZP,{query:Ce,variables:{collectionId:e},renderLoading:()=>r.createElement(le.Z,{breadcrumbs:[{name:"Template Collections",url:N.Z.collectionsURL()}]},r.createElement(J.b,null))},((e,t)=>{(0,h.hu)(!(0,R.CZ)(e.templateCollection),"Expected result schema to be accessible.")
const n=e.templateCollection;(0,T._w)(`${n.name} - Template Collections`)
return r.createElement(le.Z,{breadcrumbs:[{name:"Template Collections",url:N.Z.collectionsURL()}],title:null!=n?n.archiveRecord?`${n.name} (${n.archiveRecord.purpose})`:n.name:void 0,type:(0,me.E2)(g.TEMPLATE_COLLECTION),dataTestAttrs:{component:"TemplateCollectionPage",element:"root"}},r.createElement(TemplateCollectionTable,{collection:n,resultType:t.type,summaryRefetch:t.refetch}))}))))}function TemplateCollectibleNameCell({templateCollectibleInfo:e,markNeedsUpdate:t=!1}){var n
const a=null===(n=ye.get(de.ZP.apiIdToType(e.id)))||void 0===n?void 0:n(),i=e.archiveRecord?`${e.name} (${e.archiveRecord.purpose})`:e.name
return r.createElement("div",null,t&&r.createElement(ce.Z,{content:null,tooltipTitle:`Invalid ${a||"item"} needs review`}),r.createElement(X.Z,{className:"typeIcon u-small-spacing-left",icon:(0,de.qz)(e.id)}),r.createElement("span",{className:"u-small-spacing-left"},i))}},352734:(e,t,n)=>{n.r(t)
n.d(t,{CODE_TAB:()=>a,MEDIOCRE_ITEM_SELECTION_BUFFER_PX:()=>o,MEDIOCRE_PAGE_MARGIN_PX:()=>l,MEDIOCRE_TOTAL_IMAGE_PADDING:()=>s,TAB:()=>i,TYPING_PERF_INTERVAL:()=>r})
const a="    ",i="\t",r=3e5,s=52,o=10,l=38},859326:(e,t,n)=>{n.d(t,{Eu:()=>c,PQ:()=>r,Po:()=>d,WY:()=>a,Y4:()=>i,nf:()=>l,tj:()=>s})
const a={ELN_PAPER_SIZE:"eln.print-paperSize",ELN_FIT_TO_WIDTH:"eln.print-fitToWidth",ELN_ORIENTATION:"eln.print-orientation",ELN_SHOW_LINK_URLS:"eln.print-showLinkURLs",LABEL_PRINTING_OPTIONS_NAMESPACE:"labelPrintingOptions",BARTENDER_LABEL_PRINTING_OPTIONS_NAMESPACE:"labelPrintingOptions.bartender",LABEL_PRINTING_TIMEZONE:"labelPrintingTimezone"}
var i,r
!function(e){e.LANDSCAPE="LANDSCAPE"
e.PORTRAIT="PORTRAIT"}(i||(i={}))
!function(e){e.US_LETTER="US_LETTER"
e.A4="A4"}(r||(r={}))
const s=[r.US_LETTER,r.A4],o=2.54,l={[r.US_LETTER]:{name:"Letter (8.5 x 11)",cssName:"letter",width:8.5,height:11},[r.A4]:{name:"A4 (210mm x 297mm)",cssName:"A4",width:21/o,height:29.7/o}},c={ppi:96,margins:{top:1/o,right:1/o,bottom:1/o,left:1/o}},d={ppi:90,margins:{top:.25,right:.25,bottom:1,left:.25}}},873335:(e,t,n)=>{n.d(t,{CD:()=>createLocalSyncCopy,Jt:()=>getDownloadURL,Ue:()=>create,vs:()=>transform})
var a=n(232606),i=n(8747)
function create({location:e}){return i.by({url:"/1/api/note-linked-files/",contentType:"application/json",type:"POST",dataType:"json",data:JSON.stringify({location:e})})}function transform({uuid:e,previewLocation:t}){return i.by({url:`/1/api/note-linked-files/${e}/transform`,contentType:"application/json",type:"POST",dataType:"json",data:JSON.stringify({previewLocation:t})})}function createLocalSyncCopy({uuid:e}){(0,a.hu)(null!=e,"Note linked file should have non-null UUID")
return i.by({url:`/1/api/note-linked-files/${e}:create-local-sync-copy`,type:"POST"})}function getDownloadURL({uuid:e,name:t,preview:n="0"}){return`/1/api/note-linked-files/${e}:download?name=${encodeURIComponent(t)}&preview=${encodeURIComponent(n)}`}},385130:(e,t,n)=>{n.r(t)
n.d(t,{LEVEL_COMPONENT:()=>i,LEVEL_MATERIAL:()=>a})
const a="MATERIAL",i="COMPONENT"},270960:(e,t,n)=>{n.r(t)
n.d(t,{AGGREGATE_TIME:()=>l,EditorKey:()=>d,INSERT_SYMBOL:()=>s,INSERT_WELL_PLATE:()=>o,STEP_TYPES:()=>r,StepLevel:()=>c,TYPE_CRITICAL:()=>a,TYPE_PAUSE:()=>i})
const a="CRITICAL",i="PAUSE",r=[a,i],s="INSERT_SYMBOL",o="INSERT_WELL_PLATE",l="AGGREGATE_TIME"
var c,d
!function(e){e.HEADER="HEADER"
e.STEP="STEP"
e.DESC="DESC"
e.TABLE="TABLE"
e.IMAGE="IMAGE"
e.TIMER="TIMER"}(c||(c={}))
!function(e){e.STEPS="steps"
e.MATERIALS="materials"
e.INTRO="intro"
e.TITLE="title"}(d||(d={}))},81818:(e,t,n)=>{n.d(t,{R:()=>fetchLock,y:()=>acquireLock})
var a=n(771398)
function acquireLock(e){return a.s0({url:"/1/api/document-editor-lock/acquire_lock",data:{documentId:e}})}function fetchLock(e){return a.s0({url:"/1/api/document-editor-lock/fetch_lock",data:{documentId:e}})}},990697:(e,t,n)=>{n.d(t,{ZI:()=>documentEditorLockUpdate,nK:()=>u,u:()=>documentEditorLockClear,yg:()=>acquireLock})
var a=n(536105),i=n.n(a),r=n(232606),s=n(348920),o=n(81818),l=n(968953)
const c=new Set,d=Math.max(s.ZP.ELN_REALTIME_DOCUMENT_EDITOR_LOCK_DURATION_SECONDS/2,1)
var u
!function(e){e.CLEAR_LOCK="CLEAR_LOCK"
e.UPDATE_LOCK="UPDATE_LOCK"}(u||(u={}))
function documentEditorLockUpdate(e,t,n,a){return{type:u.UPDATE_LOCK,fileId:e,userId:t,clientId:n,msUntilExpiration:a}}function documentEditorLockClear(e){return{type:u.CLEAR_LOCK,fileId:e}}function acquireLock(e){return(t,n)=>{const a=n().ui.documentEditorLockState[e]
if((!a||(0,l.d)(a.clientId)&&!i()().add(d,"seconds").isBefore(i()(a.expiresAt)))&&!c.has(e)){c.add(e)
o.y(e).then((n=>{n&&t(documentEditorLockUpdate(e,n.userId,n.clientId,n.msUntilExpiration))})).catch((e=>{(0,r.Gp)(null==e,"error acquiring editor lock",{err:e})})).finally((()=>{c.delete(e)}))}}}},732853:(e,t,n)=>{n.d(t,{Z:()=>M,z:()=>getEsigText})
var a=n(602652),i=n.n(a),r=n(989526),s=n(573961),o=n(232606),l=n(348920),c=n(776065),d=n(699418),u=n(256605),m=n(697162),p=n(241500),h=n(938417),E=n(455575),S=n(62262),T=n(974913),g=n(443626),f=n(166459),I=n(305595),A=n(802021),y=n(788836),_=n(967911),C=n(87209),R=n(629656),N=n(205986),O=n(866648),b=n(584890),v=n(899801),P=n(126781),L=n(376377),D=n(902680)
function openMetadataTabForError(e,t){c.Z.openFile(e,{onOpen(e){e.activateTab(p.Z)}})
T.ZP.warn(t,{id:"CreateUpdateReviewModal:openMetadataTabForError"})}function getEsigText(e,t){if(!l.ZP.ENABLE_ELN_ESIGNATURE)return null
let n
switch(e){case P.JF.REJECT:n="reject this entry"
break
case P.JF.SEND_FOR_REVIEW:n="send this entry for review"
break
case P.JF.ACCEPT:n="accept this entry"
break
case P.JF.RETRACT:n="retract this entry"
break
case P.JF.COMMENT:n="comment on this review"
break
default:n="authorize this review edit"}let a=`After clicking "${t}", you will be prompted to enter your password to ${n}.`
l.ZP.ELN_ESIGNATURE_CONFIG&&"SAML"===l.ZP.ELN_ESIGNATURE_CONFIG.type&&(a+=" A pop-up window will appear from your SSO provider to authenticate you.")
return a}class CreateUpdateReviewModal extends r.Component{constructor(){super(...arguments)
this.textRef=r.createRef()
this.state={error:"",submitting:!1,selectedAuditors:[],message:this.getReviewActionOrNull()?D.ql(this.getReviewActionOrNull()):null}
this._isMounted=!1
this.handleCommentChange=e=>{this.setState({message:e.target.value})}
this.handleAuditorChange=e=>{this.setState({selectedAuditors:this._ensureTextField(e)})}}static close(){R.xv(CreateUpdateReviewModal)}static async open({fileId:e,review:t,onUpdate:n,isSelfReview:a}){var i
C.$Z()
let s
s=O.Z.inStore(e)?O.Z.getNote(e):_.Z.getNote(e)
const o=(0,S.nZ)(null!==(i=null==s?void 0:s.noteParts)&&void 0!==i?i:[],e),c=(0,E.Z)(o),u=c?`Cannot send for review while table cells are still computing in [${c.join(", ")}].`:null
if(await async function isSchemaValidForReview(e){const t=d.ZP.get().get(e)
if(t&&null==t.model().tagSchema()){if(l.ZP.ELN_ENABLE_SCHEMA_REQUIRED_FOR_REVIEW){openMetadataTabForError(e,"A schema is required before sending for review.")
return!1}return!0}const n=await I.Qe(e)
if(n.length){A.X(n);(0,f.getStore)().dispatch(m.C(e,!0))
openMetadataTabForError(e,"Fix schema errors to send for review.")
return!1}return!0}(e)){let i=[]
a||({auditors:i}=await L.fN(e))
R.bA(CreateUpdateReviewModal,r.createElement(CreateUpdateReviewModal,{fileId:e,review:t,isSelfReview:a,onUpdate:n,auditors:i,errorMessage:u}))}C.Cp()}getReviewActionOrNull(){var e
const t=0===(null===(e=this.props.review)||void 0===e?void 0:e.auditors.length)&&this.props.review.status===u.CT.RETRACTED
return this.props.isSelfReview?P.JF.ACCEPT:!this.props.review||t?P.JF.SEND_FOR_REVIEW:null}componentDidMount(){this._isMounted=!0
if(this.textRef.current){const e=s.findDOMNode(this.textRef.current)
h.vq(e,{start:e.value.length,end:e.value.length})}let e=[]
this.props.review?e=this.props.review.auditors:1===this.props.auditors.length&&(e=this.props.auditors)
this.setState({selectedAuditors:this._ensureTextField(e)})}componentWillUnmount(){this._isMounted=!1}_submitReviewChange({signatureInfo:e}){var t
const n=this.props.isSelfReview?[y.Z.currentUser().handle]:this.state.selectedAuditors.map((e=>e.handle)),a=this.getReviewActionOrNull()
return a?this.props.review?L.kQ(this.props.fileId,this.props.review.id,e,{auditorHandles:n,message:null!==(t=this.state.message)&&void 0!==t?t:"",action:a}):L.XU(e,{auditorHandles:n,message:this.state.message,fileApiId:this.props.fileId,action:a}):L.g8(this.props.review.id,e,{auditorHandles:n})}async handleSubmit(){this.setState({submitting:!0})
try{const e=await(0,v.ZP)()
await D.Sp(this.props.fileId)
const{review:t,filePermissions:n,snapshotTask:a}=await this._submitReviewChange({signatureInfo:e})
let i
i=this.props.isSelfReview?"Successfully approved entry":this.props.review?"Successfully updated review":"Successfully created review"
T.ZP.success(i,{duration:5})
this.props.onUpdate&&this.props.onUpdate(t,n,a)
CreateUpdateReviewModal.close()}catch(e){(0,o.hu)(null!=e,"Found null error during submit for entry review.")
if(e instanceof v.zd)this.setState({error:e.message})
else{const t=T.ZP.getFriendlyError(e)
t&&this._isMounted?this.setState({error:t}):T.ZP.notifyError(e)}this._isMounted&&this.setState({submitting:!1})}}_shouldRenderCommentBox(){return null!=this.getReviewActionOrNull()}_ensureTextField(e){return e.map((e=>({...e,text:(0,g.a)(e)})))}render(){let e,t,n
if(this.props.isSelfReview){e="Approving..."
t="Approve"
n="Approve entry"}else if(this.props.review){e="Updating..."
t="Update review"
n="Update review"}else{e="Creating..."
t="Create review"
n="Create review"}const a={className:"_test-create-update-review-modal",enableRedesign:!0,title:n,showFooterBorder:!1,buttons:[{submit:!0,text:this.state.submitting?e:t,disabled:this.state.submitting||null!=this.props.errorMessage}],closeable:!this.state.submitting,onRequestSubmit:async()=>{await this.handleSubmit()},onRequestClose:()=>{CreateUpdateReviewModal.close()}}
return r.createElement(N.ZP,{...a},r.createElement(b.Z,{ref:this.textRef,auditors:this._ensureTextField(this.props.auditors),isSelfReview:this.props.isSelfReview,shouldRenderCommentBox:this._shouldRenderCommentBox(),esigText:getEsigText(this.getReviewActionOrNull(),t),error:this.state.error||this.props.errorMessage||"",selectedAuditors:this.state.selectedAuditors,comment:this.state.message,handleCommentChange:this.handleCommentChange,handleAuditorChange:this.handleAuditorChange}))}}CreateUpdateReviewModal.propTypes={auditors:i().array.isRequired,fileId:i().string.isRequired,onUpdate:i().func,review:i().object,isSelfReview:i().bool.isRequired}
const M=CreateUpdateReviewModal},680259:(e,t,n)=>{n.d(t,{C8:()=>StageEntryReviewBadge,ZP:()=>G})
var a=n(692013),i=n(764403),r=n.n(i),s=n(769784),o=n(989526),l=n(212300),c=n(232606),d=n(95537),u=n(348920),m=n(3472),p=n(256605),h=n(751512),E=n(91092),S=n(697134),T=n(593382),g=n(376377),f=n(902680),I=n(974913),A=n(788836),y=n(967911),_=n(383628),C=n(334148),R=n(271359),N=n(198964),O=n(476604),b=n(36424),v=n(865486),P=n(297020),L=n(924982),D=n(914073),M=n(669574),w=n(489833),F=n(7232),k=n(263840),U=n(184608)
function getExistingReviewersByStage(e){var t,n
return null!==(n=null===(t=null==e?void 0:e.reviewers)||void 0===t?void 0:t.reduce(((e,t)=>{e[t.reviewStage.id]=t.user
return e}),{}))&&void 0!==n?n:{}}function getExistingCanTeamReassignByStage(e){var t,n
return null!==(n=null===(t=null==e?void 0:e.reviewers)||void 0===t?void 0:t.reduce(((e,t)=>{e[t.reviewStage.id]=t.isTeamReassignable
return e}),{}))&&void 0!==n?n:{}}const x=s.ZP`
  query ReviewStatusQuery($entryId: StrictString!) @skipAudit @engComponent(name: NOTEBOOK) {
    entry(id: $entryId) {
      ... on EntryNode {
        id
        userPermissionsJson
        hasReviewCriteria
        review {
          ...ReviewLifecycleReviewSummaryGraphQL
          # TODO (BNCH-62602) Do not rely on review.activeReviewLifecycleVersion here as it will break for entries that were rejected
          # using review lifecycles but the project now points to legacy review. The summary panel should show
          # the last used review lifecycle's stages.
          reviewLifecycleVersion {
            ... on ReviewLifecycleVersionNode {
              id
              terminalState
            }
          }
        }
        project {
          ... on ProjectNode {
            id
            ownerJson
            reviewLifecycles {
              organization {
                id
              }
              id
              currentVersion {
                id
                lifecycleType
                reviewStages {
                  id
                  action
                  selectedTeam {
                    id
                    name
                  }
                }
              }
            }
            collaboratorsJson
          }
        }
        template {
          id
          templateCollection {
            id
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,E.f)("InaccessibleInfo").fragment}
  ${(0,E.f)("ReviewLifecycleReviewSummary").fragment}
`
var B
!function(e){e[e.IN_PROGRESS=0]="IN_PROGRESS"
e[e.IN_REVIEW=1]="IN_REVIEW"
e[e.ACCEPTED=2]="ACCEPTED"
e[e.REJECTED=3]="REJECTED"
e[e.ACTION_REQUIRED=4]="ACTION_REQUIRED"}(B||(B={}))
function StageEntryReviewBadge({review:e,className:t}){return o.createElement("span",{className:r()("reviewBadge",f.jP(null==e?void 0:e.status),t)},o.createElement(b.Z,{className:"reviewBadge-icon",icon:f.XO(null==e?void 0:e.status)}),f.kR(null==e?void 0:e.status))}function getSendForReviewDropdownText(e,t){return(null==e?void 0:e.currentVersion.lifecycleType)===p.rF.SELF_REVIEW?F.gE[e.currentVersion.reviewStages[0].action]:null!=t?"Resend for review":"Send for review"}function createOnSelectHandler({review:e,reviewLifecycle:t,projectId:n,entryId:a,templateId:i,templateCollectionId:r,authors:s}){const onRequestComplete=async(e,t,n)=>{(0,w.Z)(a,e,t,n)
u.ZP.VERSIONED_CHIPS_ENABLED&&await(0,f.bq)(a,e.status)}
return async()=>{if(t.currentVersion.lifecycleType===p.rF.SELF_REVIEW){const e=t.currentVersion.reviewStages.map((e=>e.id))
await async function performSelfReview(e,t,n){(0,c.hu)(1===t.length,"Self-review review lifecycle must have a single stage")
const a=[{stageId:t[0],reviewerUserId:A.Z.currentUser().id}],{review:i,filePermissions:r,snapshotTask:s}=await g.Xl({fileApiId:e,message:"",rlcStageReviewersData:a})
null==n||n(i,r,s)}(a,e,onRequestComplete)}else(0,k.Z)({entryId:a,authors:s,onRequestComplete,existingReviewerUsersByStage:getExistingReviewersByStage(e),analyticsParams:{entry_id:a,project_id:n,template_id:i,template_collection_id:r},existingCanTeamReassignByStage:getExistingCanTeamReassignByStage(e)})}}function getSendForReviewDropdownOptions(e,t,n){var a,i,r,s
const o=[],l=e.find((({currentVersion:{lifecycleType:e}})=>[p.rF.SEQUENTIAL,p.rF.PARALLEL].includes(e))),c=e.filter((({currentVersion:{lifecycleType:e}})=>e===p.rF.SELF_REVIEW))
null!=l&&o.push({text:getSendForReviewDropdownText(l,t.review),onSelect:createOnSelectHandler({review:t.review,reviewLifecycle:l,entryId:t.id,projectId:t.project.id,templateId:null!==(i=null===(a=t.template)||void 0===a?void 0:a.id)&&void 0!==i?i:null,templateCollectionId:null!==(s=null===(r=t.template)||void 0===r?void 0:r.templateCollection.id)&&void 0!==s?s:null,authors:n}),dataTestAttrs:{component:"ReviewInProgressButtonOption",element:"root",key:"sendForReview"}})
if(c.length>0){o.length>0&&o.push({onSelect:null,text:"Self-Review",isHeader:!0})
c.forEach((e=>{var a,i,r,s
o.push({text:getSendForReviewDropdownText(e,t.review),onSelect:createOnSelectHandler({review:t.review,reviewLifecycle:e,entryId:t.id,projectId:t.project.id,templateId:null!==(i=null===(a=t.template)||void 0===a?void 0:a.id)&&void 0!==i?i:null,templateCollectionId:null!==(s=null===(r=t.template)||void 0===r?void 0:r.templateCollection.id)&&void 0!==s?s:null,authors:n}),dataTestAttrs:{component:"ReviewInProgressButtonOption",element:"root",key:"selfReview"}})}))}return o}function ReviewableInProgressButton({children:e,entryId:t,options:n,sendForReviewError:i}){const[r,s]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),[u,m]=(0,o.useState)(""),p=(0,l.v9)((e=>{var n
return null!==(n=e.ui.documentEditorLockState[t])&&void 0!==n?n:null})),h=p&&(0,T.Y)(p)
return o.createElement(N.ZP,{isOpen:r,onToggle:e=>{var n,a,i
s(e)
if(e&&y.Z.inStore(t)){const e=null!==(n=y.Z.hasUnsavedChanges(t))&&void 0!==n&&n,r=null===(a=y.Z.getEntry(t))||void 0===a?void 0:a.note,{disableAuthorActions:s,disableAuthorActionsTooltip:o}=(0,M.l)(r),l=s||e
l!==c&&d(l)
null!==(i=u!==o)&&void 0!==i&&i&&m(null!=o?o:"")}},menu:o.createElement(v.ZP,{width:P.zL.FIT_CONTENT},n.map((({text:e,onSelect:t,dataTestAttrs:n,isHeader:r},s)=>r?o.createElement(D.Z,{className:(0,a.iv)(Z.sectionHeader,Z.dropdownOption),key:s},e):o.createElement(L.Z,{key:s,onSelect:t,dataTestAttrs:n,isDisabled:h||c||"Self-review"===e&&Boolean(i),tooltipTitle:u},o.createElement("div",{className:(0,a.iv)(Z.dropdownOption,...i?[Z.dropdownOptionWithInlineBanner]:[])},e)))),i&&o.createElement(L.Z,null,o.createElement("div",{className:(0,a.iv)(Z.inlineBannerWrapper)},o.createElement(_.ZP,{bannerType:_.ct.ERROR,supportingInfo:i}))))},e)}function ButtonWithReviewSummary({entryId:e,permissions:t,children:n,reviewId:i,authors:r}){return o.createElement(N.ZP,{closeOnInsideClick:!0,menu:o.createElement("div",{className:(0,a.iv)(Z.menu)},o.createElement(U.ZP,{entryId:e,permissions:t,reviewId:i,authors:r}))},n)}function ReviewActionButton(e){return o.createElement(C.Co,{className:(0,a.iv)(Z.button,q[e.mode]),icon:e.icon,isDropdown:e.isDropdown,disabled:!e.isDropdown,text:e.text,buttonStyle:C.ZJ.PRIMARY,size:C.qE.MEDIUM,onClick:e.onClick,dataTestAttrs:{component:"ReviewActionButton",element:"root"}})}const Z=a.mM.create({button:{borderRadius:16,fontSize:14,padding:"8px 12px",marginLeft:16,fontWeight:"normal",height:"auto",color:R.Cj,cursor:"default",":hover:not(.is-disabled)":{cursor:"pointer"}},accepted:{backgroundColor:R.ZA,":hover:not(.is-disabled)":{backgroundColor:R.xO},":active:not(.is-disabled)":{backgroundColor:"#00907e"}},needsReview:{backgroundColor:"#fba645",":hover:not(.is-disabled)":{backgroundColor:R.ud},":active:not(.is-disabled)":{backgroundColor:R.Y}},inProgress:{backgroundColor:R.t0,":hover:not(.is-disabled)":{backgroundColor:R.Ej},":active:not(.is-disabled)":{backgroundColor:R.G$}},redButton:{backgroundColor:R.Zl,":hover:not(.is-disabled)":{backgroundColor:R.hM},":active:not(.is-disabled)":{backgroundColor:R.JF}},menu:{backgroundColor:R.Cj,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.5)",marginTop:3,padding:14,position:"absolute",zIndex:1e3,minWidth:200,top:"100%",overflow:"scroll"},throbber:{verticalAlign:"middle",display:"inline-flex",alignItems:"center",marginLeft:10},dropdownOption:{marginLeft:-2,maxWidth:180},sectionHeader:{borderTop:`1px solid ${R.tN}`},dropdownOptionWithInlineBanner:{paddingBottom:4,paddingTop:4},inlineBannerWrapper:{paddingTop:4,color:R.Rl}}),q={[B.ACCEPTED]:Z.accepted,[B.REJECTED]:Z.redButton,[B.IN_PROGRESS]:Z.inProgress,[B.IN_REVIEW]:Z.needsReview,[B.ACTION_REQUIRED]:Z.redButton},G=o.memo((function ReviewBadge({entryId:e,enableReviewLifecycle:t,authors:n}){var i
const r=(0,h.IJ)(x,{variables:{entryId:e},fetchPolicy:"cache-and-network"})
if(r.type===h.NI.PENDING)return o.createElement("div",{className:(0,a.iv)(Z.throbber)},o.createElement(O.Z,null))
if(r.type===h.NI.ERROR)return null
const{entry:s}=r.data
if((0,S.CZ)(s)){!function handleInaccessibleEntry(e){const t=(0,d.N7)(e)
t&&((0,d.qg)(t)?(0,d.do)(t):I.ZP.error(m.INACCESSIBLE_MESSAGE))}(s)
return null}const{review:l,userPermissionsJson:c,hasReviewCriteria:u}=s,E=null!=(null==l?void 0:l.reviewLifecycle),T=s.project.reviewLifecycles,g=function getBadgeStatus(e){switch(e){case p.CT.ACCEPTANCE_SNAPSHOT_IN_PROGRESS:case p.CT.ACCEPTED:return B.ACCEPTED
case p.CT.NEEDS_REVIEW:case p.CT.REVIEW_SNAPSHOT_IN_PROGRESS:return B.IN_REVIEW
case p.CT.REJECTED:return B.REJECTED
case p.CT.ACTION_REQUIRED:return B.ACTION_REQUIRED
case p.CT.RETRACTED:default:return B.IN_PROGRESS}}(null==l?void 0:l.status),A=(e=>!!(t&&c.canSendForReview&&0!==e.length&&f.bm(null==l?void 0:l.status))&&((null==l?void 0:l.status)!==p.CT.REJECTED||!E))(T),y=!A&&E&&g!==B.IN_PROGRESS,_=o.createElement(ReviewActionButton,{mode:g,text:f.kR(null==l?void 0:l.status,null===(i=null==l?void 0:l.reviewLifecycleVersion)||void 0===i?void 0:i.terminalState),isDropdown:A||y,icon:o.createElement(b.Z,{className:"reviewBadge-icon",icon:f.XO(null==l?void 0:l.status)})}),C=function getErrorForSendForReviewDropdownOptions(e,t){return e.some((({currentVersion:{lifecycleType:e}})=>e===p.rF.SELF_REVIEW&&t))?o.createElement("div",null,"Please go to the ",o.createElement("b",null,"Review")," tab and remove ",o.createElement("b",null,"all review criteria")," before proceeding to self-review"):null}(T,u)
return A?o.createElement(ReviewableInProgressButton,{entryId:e,options:getSendForReviewDropdownOptions(T,s,n),sendForReviewError:C},_):y?o.createElement(ButtonWithReviewSummary,{entryId:e,permissions:c,reviewId:l.id,authors:n},_):_}))},126781:(e,t,n)=>{n.d(t,{Ab:()=>p,JF:()=>u,P5:()=>m,Z6:()=>isReviewHistoryItem,ZP:()=>E,kN:()=>h})
const a="REVIEW_SNAPSHOT_IN_PROGRESS",i="REJECTED",r="NEEDS_REVIEW",s="ACCEPTANCE_SNAPSHOT_IN_PROGRESS",o="ACCEPTED",l="RETRACTED",c="IN_PROGRESS",d="ACTION_REQUIRED"
var u
!function(e){e.SEND_FOR_REVIEW="SEND_FOR_REVIEW"
e.ACCEPT="ACCEPT"
e.REJECT="REJECT"
e.COMMENT="COMMENT"
e.RETRACT="RETRACT"}(u||(u={}))
const m="SENT_FOR_REVIEW",p="review-comment",h=c
function isReviewHistoryItem(e){return e.hasOwnProperty("info")&&null!=e.info&&"REVIEW"===e.action}const E={REVIEW_SNAPSHOT_IN_PROGRESS:a,NEEDS_REVIEW:r,REJECTED:i,ACCEPTANCE_SNAPSHOT_IN_PROGRESS:s,ACCEPTED:o,RETRACTED:l,ACTION_REQUIRED:d,ALL_STATUSES:[a,r,i,s,o,l,d],LOCKED_STATUSES:[a,r,s,o,d],SENT_FOR_REVIEW:m,COMMENT:p,IN_PROGRESS_FILTER:c,ROLE_FILTERS:{AUTHOR:"author",AUDITOR:"auditor",AUTHOR_OR_AUDITOR:"any"},ROLE_FILTER_SEPARATOR:","}},438089:(e,t,n)=>{n.d(t,{BH:()=>d,JY:()=>o,Uw:()=>a,r8:()=>l})
var a,i,r=n(602652),s=n(126781)
!function(e){e.NOT_EDITING="NOT_EDITING"
e.EDITING="EDITING"
e.SAVING="SAVING"}(a||(a={}))
!function(e){e.UNREVIEWED="UNREVIEWED"
e.PASSED="PASSED"
e.FAILED="FAILED"}(i||(i={}))
const o=i,l=r.shape({id:r.string.isRequired,status:r.oneOf(s.ZP.ALL_STATUSES).isRequired,authors:r.array.isRequired,auditors:r.array.isRequired}),c=r.shape({id:r.string,text:r.string.isRequired,status:r.oneOf([o.UNREVIEWED,o.PASSED,o.FAILED]).isRequired}),d=r.shape({id:r.string,name:r.string.isRequired,reviewCriteria:r.arrayOf(c.isRequired).isRequired})},524238:(e,t,n)=>{n.d(t,{Lj:()=>i,F_:()=>addCriterion,Rp:()=>addGroup,nT:()=>cancelEdit,CT:()=>changeCriterion,eu:()=>changeName,Q_:()=>ReviewCriteriaReduxActions_createReviewCriteriaGroup,wm:()=>deleteCriterion,tk:()=>ReviewCriteriaReduxActions_deleteReviewCriteriaGroup,R5:()=>fetchReviewCriteria,HB:()=>newGroupScrolledIntoView,H:()=>startEdit,Ns:()=>ReviewCriteriaReduxActions_updateReviewCriteriaGroup,ZL:()=>ReviewCriteriaReduxActions_updateReviewCriterion})
var a=n(771398)
var i,r=n(974913)
!function(e){e.REVIEW_CRITERIA_FETCH_COMPLETED="REVIEW_CRITERIA_FETCH_COMPLETED"
e.REVIEW_CRITERIA_ADD_GROUP="REVIEW_CRITERIA_ADD_GROUP"
e.REVIEW_CRITERIA_GROUP_START_EDIT="REVIEW_CRITERIA_GROUP_START_EDIT"
e.REVIEW_CRITERIA_GROUP_CHANGE_NAME="REVIEW_CRITERIA_GROUP_CHANGE_NAME"
e.REVIEW_CRITERIA_GROUP_CANCEL_EDIT="REVIEW_CRITERIA_GROUP_CANCEL_EDIT"
e.REVIEW_CRITERIA_GROUP_ADD_CRITERION="REVIEW_CRITERIA_GROUP_ADD_CRITERION"
e.REVIEW_CRITERIA_GROUP_CHANGE_CRITERION="REVIEW_CRITERIA_GROUP_CHANGE_CRITERION"
e.REVIEW_CRITERIA_GROUP_DELETE_CRITERION="REVIEW_CRITERIA_GROUP_DELETE_CRITERION"
e.REVIEW_CRITERIA_GROUP_START_CREATE="REVIEW_CRITERIA_GROUP_START_CREATE"
e.REVIEW_CRITERIA_GROUP_CREATE_FAILED="REVIEW_CRITERIA_GROUP_CREATE_FAILED"
e.REVIEW_CRITERIA_GROUP_CREATE_COMPLETED="REVIEW_CRITERIA_GROUP_CREATE_COMPLETED"
e.REVIEW_CRITERIA_GROUP_START_UPDATE="REVIEW_CRITERIA_GROUP_START_UPDATE"
e.REVIEW_CRITERIA_GROUP_UPDATE_FAILED="REVIEW_CRITERIA_GROUP_UPDATE_FAILED"
e.REVIEW_CRITERIA_GROUP_UPDATE_COMPLETED="REVIEW_CRITERIA_GROUP_UPDATE_COMPLETED"
e.REVIEW_CRITERIA_GROUP_START_DELETE="REVIEW_CRITERIA_GROUP_START_DELETE"
e.REVIEW_CRITERIA_GROUP_DELETE_FAILED="REVIEW_CRITERIA_GROUP_DELETE_FAILED"
e.REVIEW_CRITERIA_GROUP_DELETE_COMPLETED="REVIEW_CRITERIA_GROUP_DELETE_COMPLETED"
e.REVIEW_CRITERIA_NEW_GROUP_SCROLLED_INTO_VIEW="REVIEW_CRITERIA_NEW_GROUP_SCROLLED_INTO_VIEW"
e.REVIEW_CRITERION_UPDATED="REVIEW_CRITERION_UPDATED"}(i||(i={}))
function fetchReviewCriteria(e){return t=>function fetchReviewCriteriaGroups(e){return Promise.resolve(a.xA(`/1/api/review-criteria-groups?linkedItemId=${e}`))}(e).then((({data:n})=>{t(function fetchCompleted(e,t){return{type:i.REVIEW_CRITERIA_FETCH_COMPLETED,linkedItemId:e,reviewCriteriaGroups:t}}(e,n))}),r.ZP.notifyError)}function addGroup(e){return{type:i.REVIEW_CRITERIA_ADD_GROUP,linkedItemId:e}}function startEdit(e,t,n){return{type:i.REVIEW_CRITERIA_GROUP_START_EDIT,linkedItemId:e,reviewCriteriaGroupId:t,reviewCriteriaGroup:n}}function changeName(e,t,n){return{type:i.REVIEW_CRITERIA_GROUP_CHANGE_NAME,linkedItemId:e,reviewCriteriaGroupId:t,name:n}}function cancelEdit(e,t){return{type:i.REVIEW_CRITERIA_GROUP_CANCEL_EDIT,linkedItemId:e,reviewCriteriaGroupId:t}}function addCriterion(e,t){return{type:i.REVIEW_CRITERIA_GROUP_ADD_CRITERION,linkedItemId:e,reviewCriteriaGroupId:t}}function changeCriterion(e,t,n,a){return{type:i.REVIEW_CRITERIA_GROUP_CHANGE_CRITERION,linkedItemId:e,reviewCriteriaGroupId:t,rowIndex:n,text:a}}function deleteCriterion(e,t,n){return{type:i.REVIEW_CRITERIA_GROUP_DELETE_CRITERION,linkedItemId:e,reviewCriteriaGroupId:t,rowIndex:n}}function ReviewCriteriaReduxActions_createReviewCriteriaGroup(e,t){return n=>{n(function startCreate(e){return{type:i.REVIEW_CRITERIA_GROUP_START_CREATE,linkedItemId:e}}(e));(function createReviewCriteriaGroup(e,t,n){return Promise.resolve(a.ty({url:"/1/api/review-criteria-groups",data:{linkedItemId:e,name:t,reviewCriteria:n}}))})(e,t.name,t.reviewCriteria).then((t=>{n(function groupCreated(e,t){return{type:i.REVIEW_CRITERIA_GROUP_CREATE_COMPLETED,linkedItemId:e,savedReviewCriteriaGroup:t}}(e,t))
r.ZP.success("Successfully created review criteria.")}),(t=>{n(function createFailed(e){return{type:i.REVIEW_CRITERIA_GROUP_CREATE_FAILED,linkedItemId:e}}(e))
r.ZP.notifyError(t)}))}}function ReviewCriteriaReduxActions_updateReviewCriteriaGroup(e,t){return n=>{n(function startUpdate(e,t){return{type:i.REVIEW_CRITERIA_GROUP_START_UPDATE,linkedItemId:e,reviewCriteriaGroupId:t}}(e,t.id));(function updateReviewCriteriaGroup(e,t,n){return Promise.resolve(a.Yh({url:`/1/api/review-criteria-groups/${e}`,data:{name:t,reviewCriteria:n}}))})(t.id,t.name,t.reviewCriteria).then((t=>{n(function groupUpdated(e,t){return{type:i.REVIEW_CRITERIA_GROUP_UPDATE_COMPLETED,linkedItemId:e,reviewCriteriaGroupId:t.id,savedReviewCriteriaGroup:t}}(e,t))
r.ZP.success("Successfully updated review criteria.")}),(a=>{n(function groupUpdateFailed(e,t){return{type:i.REVIEW_CRITERIA_GROUP_UPDATE_FAILED,linkedItemId:e,reviewCriteriaGroupId:t}}(e,t.id))
r.ZP.notifyError(a)}))}}function ReviewCriteriaReduxActions_deleteReviewCriteriaGroup(e,t){return n=>{n(function startDelete(e){return{type:i.REVIEW_CRITERIA_GROUP_START_DELETE,reviewCriteriaGroupId:e}}(t));(function deleteReviewCriteriaGroup(e){return Promise.resolve(a.$v({url:`/1/api/review-criteria-groups/${e}`}))})(t).then((()=>{n(function groupDeleted(e,t){return{type:i.REVIEW_CRITERIA_GROUP_DELETE_COMPLETED,linkedItemId:e,reviewCriteriaGroupId:t}}(e,t))
r.ZP.success("Successfully deleted review criteria.")}),(e=>{n(function groupDeleteFailed(e){return{type:i.REVIEW_CRITERIA_GROUP_DELETE_FAILED,reviewCriteriaGroupId:e}}(t))
r.ZP.notifyError(e)}))}}function newGroupScrolledIntoView(e){return{type:i.REVIEW_CRITERIA_NEW_GROUP_SCROLLED_INTO_VIEW,linkedItemId:e}}function ReviewCriteriaReduxActions_updateReviewCriterion(e,{status:t}){return async n=>{const{criterion:r}=await function updateReviewCriterion(e,t){return Promise.resolve(a.Yh({url:`/1/api/review-criterion/${e}`,data:t}))}(e,{status:t})
n(function reviewCriterionUpdated(e,t){return{type:i.REVIEW_CRITERION_UPDATED,criterionId:e,criterion:t}}(e,r))}}},376377:(e,t,n)=>{n.d(t,{EI:()=>bulkGetReviewChangeTimestamps,HG:()=>isReviewUpdatedResponse,OH:()=>validateFileTags,XU:()=>createReview,Xl:()=>sendForRLCReview,Xu:()=>bulkValidateFileTags,fN:()=>fetchAuditors,g8:()=>updateReview,gT:()=>fetchAuditorsForWorkflow,ik:()=>retryReviewSnapshot,kQ:()=>createReviewChange,lr:()=>reassignRLCReviewer,oO:()=>fetchReview,qK:()=>bulkCreateReview})
var a=n(769784),i=n(681896),r=n(91092),s=n(974913),o=n(379346),l=n(771398),c=n(899801)
function isReviewUpdatedResponse(e){return null!=e}function fetchAuditors(e){return l.UJ("/1/api/reviews/actions/get-auditor-options",{id:e})}function fetchReview(e){return l.UJ(`/1/api/reviews/${e}`)}async function updateReview(e,t,n){return await l.Ry({url:`/1/api/reviews/${e}`,data:{signatureInfo:t,...n}})}function validateFileTags(e){return l.s0({url:"/1/api/reviews/actions/validate-file-tags",data:{id:e}}).then((({errors:e})=>e))}const bulkValidateFileTags=async e=>{const{errorsByReviewableId:t}=await l.s0({url:"/1/api/reviews:bulk-validate-file-tags",data:{reviewableIds:e}})
return t},bulkGetReviewChangeTimestamps=async e=>{const{reviewChangeTimestampsByEntryId:t}=await l.s0({url:"/1/api/reviews:bulk-get-review-change-timestamps",data:{entryIds:e}})
return t}
function bulkCreateReview(e){return l.s0({url:"/1/api/reviews:bulk-create",data:e})}const fetchAuditorsForWorkflow=async e=>{const{auditors:t}=await l.UJ("/1/api/reviews/workflow-auditor-options",{workflowId:e})
return t}
async function createReview(e,t){const n=await l.s0({url:"/1/api/reviews/",data:{signatureInfo:e,...t}})
await fetchReviewSummaryIfEntry(t.fileApiId)
return n}async function createReviewChange(e,t,n,a){const i=await l.s0({url:`/1/api/reviews/${t}:create-review-change`,data:{signatureInfo:n,...a}})
await fetchReviewSummaryIfEntry(e)
return i}async function retryReviewSnapshot(e,t){const n=await l.s0({url:`/1/api/reviews/${t}:retry-review-snapshot`})
await fetchReviewSummaryIfEntry(e)
return n}const d=a.ZP`
  query ReviewSummaryForEntryQuery($entryId: StrictString!) @skipAudit @engComponent(name: NOTEBOOK) {
    entry(id: $entryId) {
      ... on EntryNode {
        id
        review {
          ...ReviewLifecycleReviewSummaryGraphQL
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,r.f)("ReviewLifecycleReviewSummary").fragment}
  ${(0,r.f)("InaccessibleInfo").fragment}
`
function fetchReviewSummaryIfEntry(e){return o.ZP.isEntry(e)?(0,i.doQuerySafe)({query:d},{variables:{entryId:e},fetchPolicy:"network-only"}):Promise.resolve(null)}async function getSignatureInfo(){let e
try{e=await(0,c.ZP)()}catch(e){if(e instanceof c.zd){s.ZP.error(e.message)
throw new Error(e.message)}throw new Error("Failed to authenticate")}return e}async function sendForRLCReview(e){const t=await getSignatureInfo(),n=await l.s0({url:"/1/api/rlc-reviews/",data:{signatureInfo:t,...e}})
await fetchReviewSummaryIfEntry(e.fileApiId)
return n}async function reassignRLCReviewer(e){const t=await getSignatureInfo(),n=await l.s0({url:"/1/api/update-reviewer/",data:{signatureInfo:t,...e}})
await fetchReviewSummaryIfEntry(e.fileId)
return n}},902680:(e,t,n)=>{n.d(t,{Jm:()=>searchForReviewers,Qs:()=>canUserReviewTemplate,SL:()=>getIconNameFromAction,Sp:()=>ensureCurrentRuntimeSnapshotPersisted,XO:()=>getStatusIcon,bm:()=>canSendForReviewFromStatus,bq:()=>refreshVersionedChipVersion,fD:()=>canUserReviewType,fs:()=>actionToButtonStyle,jP:()=>getStatusCSSClassFromReview,kR:()=>getStatusTextFromReview,m0:()=>hasReviewsEnabled,p8:()=>isTypeReviewable,ql:()=>getDefaultReviewComment,tJ:()=>getReviewFromStore,zU:()=>getEditWarning})
var a=n(64558),i=n(841996),r=n(232606),s=n(348920),o=n(459830),l=n(741522),c=n(256605),d=n(111770),u=n(126781),m=n(6025),p=n(967911),h=n(334148),E=n(87209),S=n(102385),T=n(379346),g=(n(10584),n(726763)),f=n(901113),I=n(866648),A=n(7232)
const y={[u.JF.REJECT]:h.ZJ.NEGATIVE,[u.JF.SEND_FOR_REVIEW]:h.ZJ.TERTIARY_GRAY,[u.JF.ACCEPT]:h.ZJ.PRIMARY,[u.JF.RETRACT]:h.ZJ.NEGATIVE,[u.JF.COMMENT]:h.ZJ.TERTIARY_GRAY}
function canUserReviewTemplate(e){return S.Z.hasLicense("LICENSE_REVIEWS")&&[o.STAGE_CONFIGURATION,o.TEMPLATE].includes(e)}function isTypeReviewable(e){return[o.ENTRY,o.STAGE_ENTRY].includes(e)}async function ensureCurrentRuntimeSnapshotPersisted(e){if(!s.ZP.ELN_ENABLE_RUNTIME_SNAPSHOT_SAVE||T.ZP.apiIdToType(e)!==o.ENTRY)return
if(!p.Z.inStore(e))throw new Error("Snapshot resolution failed")
const t=(new Date).getTime(),n=12e4
if(s.ZP.ELN_ENABLE_RUNTIME_SNAPSHOT_SAVE)for(;;){if(_isEvaluationSnapshotFinishedLoading(p.Z.getEntry(e).note.noteRuntimeSnapshot)){d.S0("EvaluationSnapshots.awaitEntrySnapshotResolution",(new Date).getTime()-t,{})
break}if((new Date).getTime()-t>=n)throw new Error("Snapshot query resolution timed out")
await(0,a._v)(1e3)}else{await i.Z.generateEvaluationSnapshot(e)
d.S0("EvaluationSnapshots.awaitEntrySnapshotGeneration",(new Date).getTime()-t,{})}const r=(new Date).getTime()
i.Z.update(e,{$merge:{}},{bumpVersion:!0})
for(;;){if(!p.Z.hasUnsavedChanges(e)){d.S0("EvaluationSnapshots.persistEntryWithSnapshotForReview",(new Date).getTime()-r,{})
return}if((new Date).getTime()-t>=n)throw new Error("Snapshot save resolution timed out")
await(0,a._v)(1e3)}}function _isEvaluationSnapshotFinishedLoading(e){return null!=e.excessVersion&&null!=e.evaluationSnapshot&&!m.hasLoadingCells(e.evaluationSnapshot)}function getReviewFromStore(e){var t
return p.Z.inStore(e)?p.Z.getEditorState(e).entry.review:I.Z.inStore(e)&&null!==(t=I.Z.getEditorState(e).stageEntryDocument.review)&&void 0!==t?t:null}function canUserReviewType(e){return S.Z.hasLicense("LICENSE_REVIEWS")&&isTypeReviewable(e)}function hasReviewsEnabled(e){return e===o.TEMPLATE?s.ZP.ENABLE_ELN_REVIEW_CRITERIA:S.Z.hasLicense("LICENSE_REVIEWS")&&isTypeReviewable(e)}function getDefaultReviewComment(e){return null==e?"":s.ZP.ELN_REVIEW_DEFAULT_COMMENTS[e]||""}function actionToButtonStyle(e){return y[e]}function getIconNameFromAction(e){switch(e){case u.JF.ACCEPT:return c.CT.ACCEPTED
case u.JF.REJECT:return c.CT.REJECTED
case u.JF.RETRACT:return c.CT.RETRACTED
case u.JF.SEND_FOR_REVIEW:return c.CT.NEEDS_REVIEW
case u.JF.COMMENT:return u.Ab
default:(0,r.Gp)(!1,`Unexpected review action: ${(0,f.vE)(e)}`)
return"notdef"}}function getEditWarning(e){switch(e){case u.ZP.REVIEW_SNAPSHOT_IN_PROGRESS:return"Editing is disabled because this entry is currently being snapshotted for review."
case u.ZP.ACTION_REQUIRED:case u.ZP.NEEDS_REVIEW:return"Editing is disabled because this entry is currently under review."
case u.ZP.ACCEPTANCE_SNAPSHOT_IN_PROGRESS:return"Editing is disabled because this entry is currently being snapshotted after acceptance."
case u.ZP.ACCEPTED:return"Editing is disabled because this entry has already been accepted."
default:throw new Error(`Unexpected review status: ${e}`)}}function getStatusCSSClassFromReview(e){switch(e){case c.CT.REJECTED:return"is-rejected"
case c.CT.REVIEW_SNAPSHOT_IN_PROGRESS:case c.CT.NEEDS_REVIEW:return"is-needsReview"
case c.CT.ACCEPTANCE_SNAPSHOT_IN_PROGRESS:case c.CT.ACCEPTED:return"is-accepted"
case c.CT.RETRACTED:return"is-retracted"
case null:case void 0:return"is-inProgress"
default:throw new Error(`Unexpected review status: ${e}`)}}function getStatusIcon(e){return e&&e!==u.ZP.RETRACTED?e:u.kN}function getStatusTextFromReview(e,t){const n=t?A.vw[t]:"Accepted"
switch(e){case u.ZP.REJECTED:return"Needs revision"
case u.ZP.ACTION_REQUIRED:return"Action required"
case u.ZP.REVIEW_SNAPSHOT_IN_PROGRESS:return"Sent for review (pending snapshot)"
case u.ZP.NEEDS_REVIEW:return"Needs review"
case u.ZP.ACCEPTANCE_SNAPSHOT_IN_PROGRESS:return`${n} (pending snapshot)`
case u.ZP.ACCEPTED:return n
case u.ZP.RETRACTED:case null:case void 0:return"In progress"
default:throw new Error(`Unexpected review status: ${e}`)}}function searchForReviewers(e,t,n,a,i){switch(t){case c.Ir.TEAM:{(0,r.hu)(null!=i,"Reviewer type is team but there is no selected team on the review lifecycle stage")
const t=[i]
return l.Z.searchCollaboratorsForUsers(n,e,t).then((e=>{var t
return{entitySummaries:null===(t=e.entitySummaries)||void 0===t?void 0:t.filter((e=>null==(null==a?void 0:a.find((t=>t.id===e.id)))))}}))}case c.Ir.PROJECT_MEMBERS:return l.Z.searchCollaboratorsForUsers(n,e).then((e=>{var t
return{entitySummaries:null===(t=e.entitySummaries)||void 0===t?void 0:t.filter((e=>null==(null==a?void 0:a.find((t=>t.id===e.id)))))}}))
case c.Ir.AUTHOR:return Promise.resolve({entitySummaries:null==a?void 0:a.filter((t=>t.name.match(new RegExp((0,g.Z)(e),"i")))).map((e=>({...e,text:""})))})
default:(0,r.hu)(!1,`Unexpected reviewerType: ${(0,f.vE)(t)}`)}}function canSendForReviewFromStatus(e){return null==e||[c.CT.REJECTED,c.CT.RETRACTED].includes(e)}async function refreshVersionedChipVersion(e,t){const n=T.ZP.apiIdToType(e)
if(n===o.STAGE_ENTRY)return
let a
a=t===c.CT.NEEDS_REVIEW?"Sending for Review":t===c.CT.ACCEPTED?"Accepting Review":"Retracting Review"
E.$Z(a);(0,r.hu)(n===o.ENTRY,"Unexpected entry type",{entryId:e})
await i.Z.open(e)
E.Cp()}},7232:(e,t,n)=>{n.d(t,{Jv:()=>c,Ro:()=>o,Vu:()=>E,Z7:()=>s,ds:()=>p,gE:()=>l,hW:()=>h,hi:()=>u,pW:()=>m,vP:()=>r,vw:()=>d})
var a=n(256605),i=n(954505)
const r="Self-review stage",s="Self-review",o={[a.Ir.AUTHOR]:"Author(s)",[a.Ir.PROJECT_MEMBERS]:"Project collaborators",[a.Ir.TEAM]:"Team"},l={[a.OQ.ACCEPT]:"Accept",[a.OQ.APPROVE]:"Approve",[a.OQ.COMPLETE]:"Complete",[a.OQ.REVIEW]:"Review",[a.OQ.WITNESS]:"Witness",[a.OQ.SELF_REVIEW]:"Self-review"},c={[a.OQ.ACCEPT]:"Accepted",[a.OQ.APPROVE]:"Approved",[a.OQ.COMPLETE]:"Completed",[a.OQ.REVIEW]:"Reviewed",[a.OQ.WITNESS]:"Witnessed",[a.OQ.SELF_REVIEW]:"Self-reviewed"},d={[a.Ho.APPROVED]:"Approved",[a.Ho.COMPLETED]:"Completed",[a.Ho.ACCEPTED]:"Accepted",[a.Ho.REVIEWED]:"Reviewed",[a.Ho.WITNESSED]:"Witnessed",[a.Ho.SELF_REVIEWED]:"Self-reviewed"},u=Object.keys(a.rF).map((e=>({value:e,name:i._R[e]}))),m=[a.rF.SEQUENTIAL,a.rF.PARALLEL],p=Object.keys(a.Ir).map((e=>({value:e,name:o[e]}))),h=Object.keys(a.OQ).map((e=>({value:e,name:l[e]}))),E=Object.keys(a.Ho).map((e=>({value:e,name:d[e]})))},361038:(e,t,n)=>{n.d(t,{Fj:()=>reviewLifecyclesListingURL,K9:()=>createReviewLifecycle,KH:()=>updateReviewLifecycle,KR:()=>bulkUnarchiveReviewLifecycles,Pt:()=>bulkArchiveReviewLifecycles,qt:()=>configureReviewLifecycleURL,y3:()=>reviewLifecycleURL})
var a=n(974913),i=n(886911),r=n(771398),s=n(8747)
function reviewLifecyclesListingURL(){return"/entry-review-processes"}function configureReviewLifecycleURL(){return"/entry-review-processes/configuration"}function reviewLifecycleURL(e){return`/entry-review-processes/${e}`}function createReviewLifecycle({organizationId:e,lifecycleType:t,name:n,terminalState:a,reviewStages:i}){const s={name:n,lifecycleType:t,reviewStages:i,terminalState:a}
return r.s0({url:"/1/api/review-lifecycles",data:{reviewLifecycleVersionSpec:s,organizationId:e}})}async function updateReviewLifecycle({reviewLifecycleId:e,lifecycleType:t,name:n,terminalState:r,reviewStages:o}){var l
let c=!1
const d=null!==(l=i.BL("update_review_lifecycle",{enabled:!0,getMetadata:()=>({success:c})}))&&void 0!==l?l:""
i.hY(d)
const u={name:n,lifecycleType:t,reviewStages:o,terminalState:r},{response:m}=await s.Ry({url:`/1/api/review-lifecycles/${e}`,data:{reviewLifecycleVersionSpec:u}}).then((e=>{c=!0
return e}))
i.Eb(d)
i.sT(d)
a.ZP.success("Review lifecycle has successfully updated. It might take up to a few minutes for the changes to reflect in search.")
return m}function bulkArchiveReviewLifecycles(e,t){return r.s0({url:"/1/api/review-lifecycles/archive",data:{reviewLifecycleIds:e,reason:t}})}function bulkUnarchiveReviewLifecycles(e){return r.s0({url:"/1/api/review-lifecycles/unarchive",data:{reviewLifecycleIds:e}})}},954505:(e,t,n)=>{n.d(t,{ZP:()=>QueryingReviewLifecyclesSettingsPage,_R:()=>M})
var a=n(769784),i=n(692013),r=n(989526),s=n(764677),o=n(759426),l=n(836291),c=n(382857),d=n(675649),u=n(256605),m=n(751512),p=n(91092),h=n(697134),E=n(688620),S=n(129270),T=n(334148),g=n(271359),f=n(954240),I=n(898808),A=n(389760),y=n(476604),_=n(36424),C=n(472347),R=n(173220),N=n(257846),O=n(226778),b=n(361038)
const v=[{name:"Name",width:3},{name:"Organization",width:3},{name:"Type",width:3},{name:"Review Stage",width:3}],{SELF_REVIEW:P,PARALLEL:L,SEQUENTIAL:D}=u.rF,M={[P]:"Self-review",[D]:"Sequential",[L]:"Parallel"},w=a.Ps`
  query ReviewLifecyclesSettingsPageQuery($organizationIds: [StrictString!]!)
  @skipAudit
  @engComponent(name: NOTEBOOK) {
    currentUser {
      id
      organizations {
        admin
      }
    }
    organizations(ids: $organizationIds) {
      ... on OrganizationNode {
        id
        name
        reviewLifecycles {
          id
          archiveRecord {
            purpose
          }
          organization {
            id
            name
          }
          currentVersion {
            id
            name
            lifecycleType
            reviewStages {
              name
            }
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,p.f)("InaccessibleInfo").fragment}
`,F="All organizations"
function mapReviewLifecycleToRowValue(e){const{currentVersion:t}=e,n=M[t.lifecycleType]
return[t.name,e.organization.name,n,t.reviewStages.map((e=>e.name)).join(", ")]}function EmptyReviewLifecycleState({writable:e}){return r.createElement("div",{className:(0,i.iv)(k.emptyComponent,k.centerColumnHorizontally,k.centerVertically)},r.createElement(_.Z,{className:(0,i.iv)(k.icon,k.darkGray),icon:"benchling"}),r.createElement("div",{className:(0,i.iv)(k.headerDescription)},"No Entry Review Processes"),e&&r.createElement("div",{className:(0,i.iv)(k.subDescription,k.darkGray)},"Review Processes allow you to define your own process for how entries need to be reviewed and completed. You can create multi-stage reviews to capture many signatures or simple author based reviews to close entries quickly."),r.createElement("div",{className:(0,i.iv)(k.subDescription,k.darkGray)},"You can learn more about Review Processes"," ",r.createElement(E.Z,{helpArticle:E.q.CREATE_ENTRY_REVIEW_PROCESS},"here"),"."),e&&r.createElement("div",{className:(0,i.iv)(k.subDescription)},r.createElement(T.Co,{buttonStyle:T.ZJ.SECONDARY,onClick:()=>{d.c4(null,b.qt())},size:T.qE.SMALL,text:"Create entry review process",dataTestAttrs:{component:"EditableItemTable",element:"createButton"}})))}function ReviewLifecyclesListing({reviewLifecycles:e,organizationNames:t,writable:n,refetchReviewLifecycles:a}){const[u,m]=(0,r.useState)(""),[p,h]=(0,r.useState)(F),[E,S]=(0,r.useState)([s.BH]);(0,A.Z)((()=>{(0,d._w)("Entry review processes")}))
const g=[{name:F,value:F}].concat((null!=t?t:[]).map((e=>({name:e,value:e})))),y=function getFilteredSchemas(e,t,n,a){const i=null==e?void 0:e.map((e=>({...e,name:e.currentVersion.name}))),r=i&&o.F(i,a)||[],s=e?e.filter((e=>r.some((t=>t.id===e.id)))):[]
return s?s.filter((e=>N.Z.caseInsensitiveContains(e.currentVersion.name,t)&&(e.organization.name===n||n===F))):[]}(e,u,p,E)
const _=0===e.length?r.createElement(EmptyReviewLifecycleState,{writable:n}):"No entry review processes are present"
const P=y.map(((e,t)=>({id:e.id,itemIndex:t,values:mapReviewLifecycleToRowValue(e),isArchivable:!0,isArchived:(0,c.ZP)({...e,name:e.currentVersion.name})})))
return r.createElement("div",{className:"settingsPage"},r.createElement("div",{className:"settingsPage-contentWrapper"},r.createElement(I.ZP,{tableName:"Entry review processes",columnHeaders:v,customCreateButton:r.createElement(T.Co,{buttonStyle:T.ZJ.SECONDARY,text:"Create",size:T.qE.SMALL,onClick:()=>{d.c4(null,b.qt())}}),emptyMessage:_,isLoading:null==e,rows:P,getEditUrl:function getReviewLifecycleUrlForRow(e){const t=y[e]
return b.y3(t.id)},writable:n,onArchive:function handleReviewLifecyclesArchive(e){(0,O.t)([y[e]],a)},onUnarchive:async function handleReviewLifecyclesUnarchive(e){await(0,O._)([y[e]],a)},leftSubheaderNode:r.createElement("div",{className:"u-flex-display"},r.createElement(R.ZP,{className:(0,i.iv)(k.searchInput),borderRadius:R.cM.LARGE,placeholder:"Search",value:u,onChange:e=>{m(e.target.value)},onEscape:()=>{m("")}}),r.createElement(f.ZP,{className:(0,i.iv)(k.marginRight),displayName:p,menu:r.createElement(C.Z,{onSelect:h,optionDatas:g,selectedValue:p}),dataTestAttrs:{component:"ReviewLifecyclesListing",element:"root"}}),r.createElement(l.Z,{itemIds:e?e.map((e=>e.id)):[],onChangePurposes:function handleChangeArchivePurposeFilters(e){S(e)},selectedPurposes:E}))})))}function QueryingReviewLifecyclesSettingsPage(e){return r.createElement(m.ZP,{query:w,variables:{organizationIds:e.organizationIds},fetchPolicy:"cache-and-network",renderLoading:()=>r.createElement(y.b,null)},((e,{refetch:t})=>{const{organizationNames:n,reviewLifecycles:a,isAdminOfAnyOrgs:i}=function queryDataToReviewLifecycles({organizations:e,currentUser:t}){var n
const a=e.filter((e=>!(0,h.CZ)(e)))
return{organizationNames:a.map((e=>e.name)),reviewLifecycles:a.map((e=>e.reviewLifecycles)).flat(),isAdminOfAnyOrgs:null!==(n=null==t?void 0:t.organizations.some((e=>!0===e.admin)))&&void 0!==n&&n}}(e)
return r.createElement(ReviewLifecyclesListing,{reviewLifecycles:a,organizationNames:n,writable:i,refetchReviewLifecycles:async()=>{await t()}})}))}const k=i.mM.create({searchInput:{marginRight:10,width:200},centerVertically:{display:"flex",alignItems:"center"},learnMoreText:{fontSize:"7px",fontWeight:S.KB},learnMoreButton:{padding:"0px 4px",marginLeft:"10px",height:"14px"},centerColumnHorizontally:{height:"70vh",justifyContent:"center",flexDirection:"column"},emptyComponent:{paddingLeft:"30%",paddingRight:"30%"},headerDescription:{margin:"0px",color:g.Rl,...S.cf},darkGray:{color:g.pp},subDescription:{marginTop:"20px"},reviewDescription:{...S.E0},icon:{margin:"20px",width:"69px",height:"69px"},marginRight:{marginRight:10}})},52145:(e,t,n)=>{n.d(t,{HA:()=>toPastTense,KD:()=>teamHasValidReviewersForEntry,Nr:()=>getRlcTeamsWithoutMemberAccessToProject,W1:()=>getReviewLifecycleTypeText,bP:()=>isAuthorReviewInReviewLifecyclesEnabled,bW:()=>areTeamReviewsEnabled,yR:()=>areReviewLifecyclesEnabledForUser,yl:()=>formatListWithBoldedNames})
var a=n(56063),i=n(348920),r=n(954505)
function areReviewLifecyclesEnabledForUser(){return i.ZP.ENABLE_ENTRY_REVIEW_PROCESSES}function isAuthorReviewInReviewLifecyclesEnabled(){return i.ZP.ENABLE_AUTHOR_REVIEW_IN_ENTRY_REVIEW_PROCESSES}function areTeamReviewsEnabled(){return i.ZP.ENABLE_TEAM_REVIEW_IN_ENTRY_REVIEW_PROCESSES}function toPastTense(e){return"e"===e.slice(-1)?`${e}d`:`${e}ed`}function getReviewLifecycleTypeText(e){return null==e?null:r._R[e]}function formatListWithBoldedNames(e){if((e=e.map((e=>`<b>${e}</b>`))).length<3)return e.join(" and ")
e[e.length-1]=`and ${e[e.length-1]}`
return e.join(", ")}function getRlcTeamsWithoutMemberAccessToProject(e,t,n,i,r){const s=t.find((e=>e.id===n))
if(null!=s&&(0,a.Yb)(s)&&null!=(null==s?void 0:s.memberDataPolicyId)||i===n&&null!=(null==r?void 0:r.memberDataPolicyId))return[]
const o=new Set(e.map((({id:e})=>e))),l=new Set(t.filter((({id:e})=>o.has(e))).filter((e=>(0,a.Yb)(e)&&null==e.memberDataPolicyId)).map((({id:e})=>e))),c=new Set(t.map((({id:e})=>e)))
return e.filter((({id:e})=>!c.has(e)||l.has(e)))}function teamHasValidReviewersForEntry(e,t){return e.filter((e=>!t.includes(e))).length>0}},688620:(e,t,n)=>{n.d(t,{Z:()=>WithReviewProcessHelpLink,q:()=>a})
var a,i=n(989526)
!function(e){e.CREATE_ENTRY_REVIEW_PROCESS="CREATE_ENTRY_REVIEW_PROCESS"
e.ADD_AUDITORS_FOR_NOTEBOOK_REVIEWS="LEGACY_WITNESS_AND_REVIEW"}(a||(a={}))
const r={[a.CREATE_ENTRY_REVIEW_PROCESS]:"https://help.benchling.com/hc/articles/10450761643917",[a.ADD_AUDITORS_FOR_NOTEBOOK_REVIEWS]:"https://help.benchling.com/hc/en-us/articles/9684260674189-Add-auditors-for-Notebook-reviews"}
function WithReviewProcessHelpLink({helpArticle:e,children:t}){return i.createElement("a",{href:r[e],target:"_blank",rel:"noopener noreferrer"},t)}},226778:(e,t,n)=>{n.d(t,{_:()=>onReviewLifecyclesUnarchive,t:()=>onReviewLifecyclesArchive})
var a=n(996447),i=n(675649),r=n(974913),s=n(883026),o=n(361038)
function onReviewLifecyclesArchive(e,t){const n=e.filter((e=>!e.archiveRecord))
a.bA({items:n.map((e=>({...e,name:e.currentVersion.name}))),onArchive:async function archiveHandler(e,n){await(0,s.jI)((0,o.Pt)(e,n),"Archiving...").then((t=>{r.ZP.success(`${(0,i._6)(e.length,"Review Process")} successfully archived.`)})).catch(r.ZP.notifyError)
await t()}})}async function onReviewLifecyclesUnarchive(e,t){const n=e.filter((e=>e.archiveRecord)).map((e=>e.id))
await(0,o.KR)(n).then((e=>{r.ZP.success(`${(0,i._6)(n.length,"Review Process")} successfully unarchived.`)})).catch(r.ZP.notifyError)
await t()}},634852:(e,t,n)=>{n.d(t,{d:()=>a})
var a
!function(e){e.APPEND="append"
e.REPLACE="replace"}(a||(a={}))},150005:(e,t,n)=>{n.d(t,{d:()=>hydrateBioentityFromSampleId,e:()=>hydrateContainerFromId})
var a=n(166459),i=n(795110)
function hydrateBioentityFromSampleId(e){const{fileSummariesById:t}=(0,a.getStore)().getState().models
return null!=t[e]?{id:e,name:t[e].name,displayLabel:t[e].displayLabel}:null}function hydrateContainerFromId(e){const t=i.Z.getContainerSummary(e)
return null!=t?{id:e,name:t.name,barcode:t.barcode}:null}},494355:(e,t,n)=>{n.d(t,{FB:()=>makeContainerSampleCell,Sh:()=>makeBioentitySampleCell,X5:()=>makePositionSampleCell,ZP:()=>makeSampleCell,e:()=>makeGridSampleCell})
var a=n(232606),i=n(348920),r=n(186087),s=n(851422),o=n(497790)
const l=[o.FieldType.BIOENTITY_LINK,o.FieldType.STORABLE_LINK,o.FieldType.TEXT,o.FieldType.FLOAT,o.FieldType.INTEGER,o.FieldType.BOOLEAN]
function makeSampleCell(e,t){switch(e.type){case s.TableColumnType.EXISTING_BIOENTITY:(0,a.hu)(null!=t.bioentityInfo,"Bioentity cell requires a bioentitySummary",{columnDefinition:e,sampleDetails:t})
return makeBioentitySampleCell(t.bioentityInfo)
case s.TableColumnType.TAG_VALUE:if(!(0,a.Gp)(l.includes(e.schemaField.fieldType),"Trying to add a sample into a tagValue column other than a bioentity, storable column, text, boolean, or numbers",{columnDefinition:e}))return null
if(e.schemaField.fieldType===o.FieldType.BIOENTITY_LINK){(0,a.hu)(null!=t.bioentityInfo,"Bioentity tagValue cell requires a bioentitySummary",{columnDefinition:e,sampleDetails:t})
return function makeBioentityLinkSampleCell(e){var t
return{text:"",typedValue:{type:o.FieldType.BIOENTITY_LINK,value:null,targetFiles:[{id:e.id,name:e.name,url:null!==(t=e.editURL)&&void 0!==t?t:""}]}}}(t.bioentityInfo)}if(e.schemaField.fieldType===o.FieldType.STORABLE_LINK&&null!=t.containerInfo)return makeContainerSampleCell(t.containerInfo)
if(e.schemaField.fieldType===o.FieldType.STORABLE_LINK&&null!=t.plateInfo)return makeGridSampleCell(t.plateInfo)
if(e.schemaField.fieldType===o.FieldType.BOOLEAN&&null!=t.booleanInfo&&i.ZP.ENABLE_ENHANCED_ADD_FROM_STRUCTURED_TABLE)return makeBooleanCell(t.booleanInfo)
if(e.schemaField.fieldType===o.FieldType.TEXT&&null!=t.textInfo&&i.ZP.ENABLE_ENHANCED_ADD_FROM_STRUCTURED_TABLE)return makeStringCell(t.textInfo)
if(null!=t.numberInfo&&i.ZP.ENABLE_ENHANCED_ADD_FROM_STRUCTURED_TABLE){if(e.schemaField.fieldType===o.FieldType.FLOAT)return makeFloatCell(t.numberInfo)
if(e.schemaField.fieldType===o.FieldType.INTEGER)return makeIntegerCell(t.numberInfo)}return null
case s.TableColumnType.CUSTOM:if(e.customColumnConfig.dataType===r.Je.TEXT&&null!=t.textInfo&&i.ZP.ENABLE_ENHANCED_ADD_FROM_STRUCTURED_TABLE)return makeStringCell(t.textInfo)
if(e.customColumnConfig.dataType===r.Je.BOOLEAN&&null!=t.booleanInfo&&i.ZP.ENABLE_ENHANCED_ADD_FROM_STRUCTURED_TABLE)return makeBooleanCell(t.booleanInfo)
if(null!=t.numberInfo&&i.ZP.ENABLE_ENHANCED_ADD_FROM_STRUCTURED_TABLE){if(e.customColumnConfig.dataType===r.Je.FLOAT)return makeFloatCell(t.numberInfo)
if(e.customColumnConfig.dataType===r.Je.INTEGER)return makeIntegerCell(t.numberInfo)}return null
case s.TableColumnType.CONTAINERS:(0,a.hu)(null!=t.containerInfo,"Container cell requires a containerInfo",{columnDefinition:e,sampleDetails:t})
return makeContainerSampleCell(t.containerInfo)
case s.TableColumnType.PLATE:(0,a.hu)(null!=t.plateInfo,"Plate cell requires a plateInfo",{columnDefinition:e,sampleDetails:t})
return makeGridSampleCell(t.plateInfo)
case s.TableColumnType.BOX:(0,a.hu)(null!=t.boxInfo,"Box cell requires a boxInfo",{columnDefinition:e,sampleDetails:t})
return makeGridSampleCell(t.boxInfo)
default:(0,a.Gp)(!1,"Unknown column type when adding a new sample",{columnDefinition:e,sampleDetails:t})
return null}}function makeBioentitySampleCell(e){return{text:"",typedValue:{type:s.BaseTypedValueType.BIOENTITY,bioentitySummary:{id:e.id,name:e.name}}}}function makeContainerSampleCell(e){return{text:"",typedValue:{type:s.BaseTypedValueType.STORABLES,storableSummaries:[{id:e.id,name:e.name}]}}}function makeGridSampleCell(e){return{text:"",typedValue:{type:s.BaseTypedValueType.STORABLES,storableSummaries:[{id:e.id,name:e.name}]}}}function makePositionSampleCell(e){return{text:"",typedValue:{type:s.BaseTypedValueType.GRID_COORDINATES,gridCoordinates:{columnIndex:e.columnIndex,rowIndex:e.rowIndex}}}}function makeStringCell(e){return{text:"",typedValue:{type:o.FieldType.TEXT,value:e.value}}}function makeFloatCell(e){return{text:"",typedValue:{type:o.FieldType.FLOAT,value:String(e.value),floatValue:e.value}}}function makeIntegerCell(e){return{text:"",typedValue:{type:o.FieldType.INTEGER,value:String(e.value),integerValue:e.value}}}function makeBooleanCell(e){return{text:"",typedValue:{type:o.FieldType.BOOLEAN,value:null==e.value?null:e.value?"True":"False",booleanValue:e.value}}}},560406:(e,t,n)=>{n.d(t,{H:()=>gatherLiveCellValuesForTable})
var a=n(84587),i=n.n(a),r=n(615439),s=n.n(r),o=n(232606),l=n(273887),c=n(6025),d=n(851422),u=n(194170),m=n(251808),p=n(379346),h=n(23546)
function gatherLiveCellValuesForTable({tableSchemas:e,structuredTableColumns:t,adapter:n,primarySamplesByRow:a,computedTable:r,storeData:E}){const S=function gatherValuesPerRow({primarySamplesByRow:e,storeData:{fileSummariesById:t,storableSummariesById:n}}){var a,i,r,s
const o=[]
for(const l of e){const e=[]
for(const o of l){let l=null
const{columnGroup:c,schemaId:d,sampleLookupInfo:u}=o
if(null!=(null==u?void 0:u.idForLookup)){const{idForLookup:e}=u
p.ZP.isBiologicalEntity(e)?l=null!==(i=null===(a=null==t?void 0:t[e])||void 0===a?void 0:a.tags)&&void 0!==i?i:null:p.ZP.isStorable(e)&&(l=null!==(s=null===(r=null==n?void 0:n[e])||void 0===r?void 0:r.tags)&&void 0!==s?s:null)}l&&e.push({columnGroup:c,schemaId:d,sampleLookupInfo:u,tags:l})}o.push(e)}return o}({primarySamplesByRow:a,storeData:E})
return S.map(((p,S)=>t.map(((t,T)=>function getLiveCellValue({tableSchemas:e,rowValues:t,column:n,columnIndex:a,primarySamples:r,adapter:p,storeData:E,evaluatedCell:S}){var T,g,f,I,A,y,_,C,R,N,O,b,v,P,L,D,M,w,F,k,U,x,B,Z,q,G
const V=function getLiveCellValueFromRowUpdater({column:e,primarySamples:t,adapter:n}){for(const a of n.getAllRowUpdaters()){const n=getUpdatedTypedValueFromRowUpdater(t,a,e)
if("NO_VALUE"!==n)return n}return"NO_VALUE"}({column:n,primarySamples:r,adapter:p})
if("NO_VALUE"!==V)return V
if(n.columnType===d.TableColumnType.DEDICATED_LOOKUP){const e=null==S?void 0:S.resolutions
if(null!=e)for(const t of e){const e=i()(t.query),n=null===(T=E.resolutionResultsByResolutionQuery)||void 0===T?void 0:T[e]
if((null===(g=t.error)||void 0===g?void 0:g.type)===c.LoadingError.type||null==n)return"NO_VALUE"
const a=n.resolvedValue.typedValue
if(!s()(t.resolvedValue,a))return a}}if(n.columnType===d.TableColumnType.EXISTING_BIOENTITY){const e=null===(I=null===(f=t[a])||void 0===f?void 0:f.sampleLookupInfo)||void 0===I?void 0:I.idForLookup
if(null!=e){const t=null===(A=E.fileSummariesById)||void 0===A?void 0:A[e]
if(null!=t)return{type:d.BaseTypedValueType.BIOENTITY,bioentitySummary:{id:t.id,name:t.displayLabel}}}return"NO_VALUE"}if(n.columnType===d.TableColumnType.BIOENTITY_NAME){const e=null===(_=null===(y=r[0])||void 0===y?void 0:y.sampleLookupInfo)||void 0===_?void 0:_.idForLookup
if(null!=e){(0,o.Gp)(1===r.length,"LiveCellValues needs to be updated to support rows with multiple primary samples.")
const t=null===(C=E.fileSummariesById)||void 0===C?void 0:C[e]
if(null!=t)return{type:d.BaseTypedValueType.STRING,rawValue:t.name}}return"NO_VALUE"}if(n.columnType===d.TableColumnType.ALIAS){const e=null===(N=null===(R=r[0])||void 0===R?void 0:R.sampleLookupInfo)||void 0===N?void 0:N.idForLookup,t=e?null===(O=E.fileSummariesById)||void 0===O?void 0:O[e]:null,n=e?l.Z.getBioentityAliasInfos(e):null
return null==n||null==t?"NO_VALUE":{type:d.BaseTypedValueType.ARRAY,rawValue:n.filter((e=>null==e.registryCollectionOwner&&e.alias!==t.name)).map((e=>({type:d.BaseTypedValueType.STRING,rawValue:e.alias})))}}if(n.columnType===d.TableColumnType.DNA_BASES){const e=null===(v=null===(b=r[0])||void 0===b?void 0:b.sampleLookupInfo)||void 0===v?void 0:v.idForLookup,t=e&&null!==(L=null===(P=E.fileSummariesById)||void 0===P?void 0:P[e])&&void 0!==L?L:null
if(t){let e=""
t.bases&&(e=null!==(D=t.bases)&&void 0!==D?D:"")
return{type:d.BaseTypedValueType.STRING,rawValue:e}}return"NO_VALUE"}if([d.TableColumnType.PLATE,d.TableColumnType.BOX,d.TableColumnType.PARENT_STORABLE].includes(n.columnType)){let e=null===(w=null===(M=r[0])||void 0===M?void 0:M.sampleLookupInfo)||void 0===w?void 0:w.idForLookup
n.columnType===d.TableColumnType.PARENT_STORABLE&&e&&(e=null!==(U=null===(k=null===(F=E.storableSummariesById)||void 0===F?void 0:F[e])||void 0===k?void 0:k.parentStorableId)&&void 0!==U?U:void 0)
const t=null!=e&&null!==(B=null===(x=E.storableSummariesById)||void 0===x?void 0:x[e])&&void 0!==B?B:null
return null==t?"NO_VALUE":{type:d.BaseTypedValueType.STORABLES,storableSummaries:[{id:t.id,name:t.name}]}}if(!(0,h.tw)(n)||null==n.tagSchemaFieldId)return"NO_VALUE"
const H=null===(Z=e.find((e=>e.allFields.some((e=>e.id===n.tagSchemaFieldId)))))||void 0===Z?void 0:Z.id
if(!(0,o.Gp)(null!=H,`Structured table is missing schema for field ID ${n.tagSchemaFieldId}`))return"NO_VALUE"
const W=null!==(q=n.columnGroup)&&void 0!==q?q:null,Y=null===(G=t.find((({columnGroup:e,schemaId:t})=>e===W&&t===H)))||void 0===G?void 0:G.tags
if(null==Y)return"NO_VALUE"
const $=(0,m.pS)(Y,n.tagSchemaFieldId)
return $?(0,u.EK)($):null}({tableSchemas:e,rowValues:p,column:t,columnIndex:T,primarySamples:a[S],evaluatedCell:null==r?void 0:r[S][T],storeData:E,adapter:n})))))}function getUpdatedTypedValueFromRowUpdater(e,t,n){for(const a of e){const{sampleLookupInfo:e,columnGroup:i}=a
if(null!=e){const a=t.readFromCache(e)
if(null!=a){const e=t.updateCell(a,i,n)
if("NO_VALUE"!==e)return e}}}return"NO_VALUE"}},26652:(e,t,n)=>{n.d(t,{L0:()=>a,a3:()=>getFormTableSwitcherStatus})
var a
n(166459)
!function(e){e.SET_FORM_TABLE_SWITCHER_STATUS_ACTION="SET_FORM_TABLE_SWITCHER_STATUS_ACTION"}(a||(a={}))
function getFormTableSwitcherStatus(e,t){var n
return null!==(n=e.ui.formTableSwitcherState[t])&&void 0!==n?n:null}},781272:(e,t,n)=>{n.d(t,{BX:()=>fetchLiveDataForStaleEvaluation,zc:()=>fetchStructuredTableLiveData})
var a,i=n(84587),r=n.n(i),s=n(377249),o=n(593732),l=n(804796),c=n(668784),d=n(552848),u=n(976295),m=n(886911),p=n(379346),h=n(658822)
const E=null!==(a=m.BL("fetch_structured_table_live_data",{enabled:!0,getMetadata:()=>({})},{interval:6e4,aggregations:[m.Pe.COUNT,m.Pe.MEDIAN,m.Pe.MAX]}))&&void 0!==a?a:""
async function fetchLiveDataForStaleEvaluation(e){await l.Z.fetchMulti(e.filter((e=>e.type===u.I.CUSTOM&&e.customResolutionQueryType===d.yd.LOOKUP_COLUMN)).map((e=>r()(e))))}async function fetchStructuredTableLiveData(e,t,n){m.hY(E)
t.forEach((e=>{p.ZP.isBiologicalEntity(e.idForLookup)&&(0,o.u)(s.V.BIOENTITY_SUMMARY,e.idForLookup)}))
await(0,h.Z)(e,n)
await(0,c.Z)(t.map((e=>({sampleLookupInfo:e,columnGroup:null,schemaId:null}))),e.getAllRowUpdaters())
m.Eb(E)}},547638:(e,t,n)=>{n.d(t,{Z:()=>useLiveData})
var a=n(84587),i=n.n(a),r=n(989526),s=n(453580),o=n(389760),l=n(781272)
function useLiveData(e,t,n,a){!function useLiveDataOnMount(e,t,n,a){(0,o.Z)((()=>{(0,l.zc)(e,t,a).then((()=>{n()}))}))}(e,t,n,a)
!function useRecurringLiveData(e,t,n,a){(0,r.useEffect)((()=>{const i=setInterval((()=>{(0,l.zc)(e,t,a).then((()=>{n()}))}),s.gb)
return()=>{clearInterval(i)}}),[e,i()(t),n])}(e,t,n,a)}},877288:(e,t,n)=>{n.d(t,{B7:()=>getColumnInfoByProvenanceUuid,Hq:()=>l,U:()=>getDefaultLookupStepForInputColumn,Y3:()=>getInitialInputColumnProvenanceUuid,ig:()=>o})
var a=n(232606),i=n(878385),r=n(863940),s=n(379346)
const o="Any Storable",l="Any Entity"
function getColumnInfoByProvenanceUuid(e,t){var n
return null!==(n=e.find((({provenanceUuid:e})=>e===t)))&&void 0!==n?n:null}function getInitialInputColumnProvenanceUuid(e,t){var n,i
if(null!=t){(0,a.hu)(-1!==e.findIndex((({provenanceUuid:e})=>e===t.provenanceUuid)),`Column with prov. UUID: ${t.provenanceUuid} either does not exist or is not a\n      valid input column for lookup.`)
return t.provenanceUuid}return null!==(i=null===(n=e[0])||void 0===n?void 0:n.provenanceUuid)&&void 0!==i?i:null}function getDefaultLookupStepForInputColumn(e,t){var n,a
const o=getColumnInfoByProvenanceUuid(e,t)
if(null==o)return null
const l=null!==(n=o.schemaId)&&void 0!==n?n:null
let c,d=null
l&&(d=s.ZP.isStorableSchema(l)?(0,i.o4)(l):(0,i.y4)(l))
if(d){let e={}
e=s.ZP.isStorableSchema(l)?{notebookColumnStorableSchema:l}:{notebookColumnEntitySchema:l}
c={type:r.fN.NOTEBOOK_COLUMN_TYPECHECK,notebookColumnItemType:o.itemType,...e}}else{const e=null!==(a=o.itemType)&&void 0!==a?a:r.Mu.ENTITY
c={type:r.fN.NOTEBOOK_COLUMN_TYPECHECK,notebookColumnItemType:e}}return c}},936769:(e,t,n)=>{n.d(t,{Q:()=>parseIdFromLookupInputTypedValues,e:()=>parseTextValueFromLookupInputTypedValue})
var a=n(851422),i=n(497790)
function parseIdFromLookupInputTypedValues(e){switch(e.type){case a.BaseTypedValueType.BIOENTITY:return[e.bioentitySummary.id]
case i.FieldType.BIOENTITY_LINK:return e.targetFiles.filter((({id:e})=>null!=e)).map((e=>e.id))
case a.BaseTypedValueType.STORABLES:return e.storableSummaries.map((e=>e.id))
case i.FieldType.STORABLE_LINK:return e.targetStorables.map((e=>e.id))
case a.BaseTypedValueType.PROCESS_TASK:return[e.id]
case a.BaseTypedValueType.ARRAY:return e.rawValue.flatMap((e=>parseIdFromLookupInputTypedValues(e)))
default:return[]}}function parseTextValueFromLookupInputTypedValue(e){return e.type===i.FieldType.TEXT?e.value:null}},627305:(e,t,n)=>{n.d(t,{Z:()=>cellHasOutdatedValue})
var a=n(348920),i=n(851422),r=n(194170),s=n(260929),o=n(453580)
function cellHasOutdatedValue({isCellInUnsubmittedRow:e,structuredTableColumn:t,evaluatedValue:n,liveCellValue:l,tableKind:c}){if(a.ZP.INVENTORY_ENABLE_UPDATING_CONTAINER_METADATA_IN_NOTEBOOK&&!e&&c===o.sl.INVENTORY)return!1
if((null==n?void 0:n.type)!==i.BaseTypedValueType.COMPUTING&&e&&t.columnType!==i.TableColumnType.DEDICATED_LOOKUP&&(c!==o.sl.INVENTORY||(t.columnType===i.TableColumnType.TAG_VALUE||t.columnGroup===o.Og.CONCENTRATION)&&a.ZP.INVENTORY_ENABLE_UPDATING_CONTAINER_METADATA_IN_NOTEBOOK))return!1
if((null==n?void 0:n.type)===i.BaseTypedValueType.COMPUTING&&"pending"===n.computedState.status)return!1
if("NO_VALUE"===l)return!1
try{return!(0,r.at)(n,l)}catch(e){s.vU("Failed to compare whether cell is outdated.",{extra:{evaluatedValue:n,liveCellValue:l}})
return!0}}},528690:(e,t,n)=>{n.d(t,{Z:()=>getInitialCellValuesForColumn})
var a=n(232606),i=n(560406),r=n(282886)
function getInitialCellValuesForColumn(e,t,n){var s,o
const l=null!==(o=null===(s=n.columnConstraints)||void 0===s?void 0:s.structuredTableColumn)&&void 0!==o?o:null;(0,a.hu)(null!=l,"Attempting to get values for a null column")
const c=e.getStoreDataForLiveValues(t),d=e.getPrimarySamples(t),u=t.rows.map((e=>d[e.rowId]))
return i.H({tableSchemas:t.schemas,structuredTableColumns:[l],adapter:e,primarySamplesByRow:u,storeData:c}).flatMap((e=>{(0,a.hu)(e.length<=1,"Expected only 1 new column")
return(0,r.Z)(0===e.length?"NO_VALUE":e[0])}))}},237584:(e,t,n)=>{n.d(t,{C2:()=>toggleOutputTableCollapsed,CD:()=>a,LU:()=>setInitialCollapsedStateForOutputTable,Lw:()=>setInitialCollapsedStateForTableEditable,M4:()=>setCollapsedStateForTableEditable,g_:()=>toggleTableEditableCollapsed,i6:()=>setInitialCollapsedStateForInputTable,mS:()=>toggleInputTableCollapsed})
var a,i=n(166459)
!function(e){e.TABLE_EDITABLE_INITIAL_COLLAPSED_STATE_SET="TABLE_EDITABLE_INITIAL_COLLAPSED_STATE_SET"
e.TABLE_EDITABLE_COLLAPSED_STATE_TOGGLED="TABLE_EDITABLE_COLLAPSED_STATE_TOGGLED"
e.TABLE_EDITABLE_COLLAPSED_STATE_SET="TABLE_EDITABLE_COLLAPSED_STATE_SET"
e.INPUT_TABLE_INITIAL_COLLAPSED_STATE_SET="INPUT_TABLE_INITIAL_COLLAPSED_STATE_SET"
e.INPUT_TABLE_COLLAPSED_STATE_TOGGLED="INPUT_TABLE_COLLAPSED_STATE_TOGGLED"
e.OUTPUT_TABLE_INITIAL_COLLAPSED_STATE_SET="OUTPUT_TABLE_INITIAL_COLLAPSED_STATE_SET"
e.OUTPUT_TABLE_COLLAPSED_STATE_TOGGLED="OUTPUT_TABLE_COLLAPSED_STATE_TOGGLED"
e.REQUEST_ENTRY_TABLE_INITIAL_COLLAPSED_STATE_SET="REQUEST_ENTRY_TABLE_INITIAL_COLLAPSED_STATE_SET"
e.REQUEST_ENTRY_TABLE_COLLAPSED_STATE_TOGGLED="REQUEST_ENTRY_TABLE_COLLAPSED_STATE_TOGGLED"}(a||(a={}))
function setInitialCollapsedStateForTableEditable(e,t){(0,i.getStore)().dispatch(function tableEditableInitialCollapsedStateSet(e,t){return{type:a.TABLE_EDITABLE_INITIAL_COLLAPSED_STATE_SET,tableCollapseId:e,collapsedState:t}}(e,t))}function toggleTableEditableCollapsed(e){(0,i.getStore)().dispatch(function tableEditableCollapsedStateToggled(e){return{type:a.TABLE_EDITABLE_COLLAPSED_STATE_TOGGLED,tableCollapseId:e}}(e))}function setCollapsedStateForTableEditable(e,t){(0,i.getStore)().dispatch(function tableEditableCollapsedStateSet(e,t){return{type:a.TABLE_EDITABLE_COLLAPSED_STATE_SET,tableCollapseId:e,collapsedState:t}}(e,t))}function setInitialCollapsedStateForInputTable(e,t){(0,i.getStore)().dispatch(function inputTableInitialCollapsedStateSet(e,t){return{type:a.INPUT_TABLE_INITIAL_COLLAPSED_STATE_SET,entryId:e,collapsedState:t}}(e,t))}function toggleInputTableCollapsed(e){(0,i.getStore)().dispatch(function inputTableCollapsedStateToggled(e){return{type:a.INPUT_TABLE_COLLAPSED_STATE_TOGGLED,entryId:e}}(e))}function setInitialCollapsedStateForOutputTable(e,t){(0,i.getStore)().dispatch(function outputTableInitialCollapsedStateSet(e,t){return{type:a.OUTPUT_TABLE_INITIAL_COLLAPSED_STATE_SET,entryId:e,collapsedState:t}}(e,t))}function toggleOutputTableCollapsed(e){(0,i.getStore)().dispatch(function outputTableCollapsedStateToggled(e){return{type:a.OUTPUT_TABLE_COLLAPSED_STATE_TOGGLED,entryId:e}}(e))}},387695:(e,t,n)=>{n.r(t)
n.d(t,{AUTOSCROLL_TRIGGER_RATE:()=>_e,TableEditable:()=>TableEditable,TableEditableConnector:()=>TableEditableConnector,default:()=>Ne,defaultEditorMarginOffset:()=>defaultEditorMarginOffset})
var a=n(64558),i=n(764403),r=n.n(i),s=n(512902),o=n(250965),l=n.n(o),c=n(602652),d=n.n(c),u=n(989526),m=n(573961),p=n(615439),h=n.n(p),E=n(531041),S=n(232606),T=n(348920),g=n(675649),f=n(88823),I=n(634489),A=n(178727),y=n(426076),_=n(636878),C=n(252130),R=n(959871),N=n(929006),O=n(261280),b=n(938417),v=n(459561),P=n(932628),L=n(122174),D=n(367458),M=n(305515),w=n(769455),F=n(237584),k=n(851436),U=n(167018),x=n(716923),B=n(568291),Z=n(227638),q=n(189546),G=n(397108),V=n(690619),H=n(121160),W=n(259470),Y=n(110341),$=n(851422),K=n(709321),z=n(327659),Q=n(430329),j=n(834381),J=n(194170),X=n(372146),ee=n(485281),te=n(974913),ne=n(497790),ae=n(389528),ie=n(263137),re=n(36424),se=n(195300),oe=n(502633),le=n(978047),ce=n(348881),de=n(927517),ue=n(583034),me=n(685370),pe=n(421814),he=n(917735),Ee=n(913027),Se=n(586847),Te=n(149668)
const{TABLE_MAX_COLUMNS:ge,TABLE_DEFAULT_COLUMN_WIDTH:fe,TABLE_SELECTION_ROW:Ie,TABLE_SELECTION_COLUMN:Ae,TABLE_SELECTION_CELL:ye}=$,_e=32
function tableMultiSelectKey(e){return`multiSelect-${e}`}function getCollapseId(e){return e.collapseId||e.cid}class TableEditableConnector extends I.C{getReduxCollapsedState(){const e=getCollapseId(this.props)
if(null==e){(0,S.Gp)(!1,"Collapsible tables should have a CID")
return null}return this.reduxState().ui.collapsedTables.tableEditableCollapsedStateByCollapseId[e]}getIsTableCollapsedInitially(){return Boolean(this.props.isCollapsible)&&(0,U.Z)(this.props.table.table.length,this.props.autoCollapseLimit)}getIsExpanded(){if(this.props.forceCollapsed)return!1
if(this.props.isMaximized)return!0
if(!this.props.isCollapsible)return!0
if(this.props.viewer)return!0
const e=this.getReduxCollapsedState()
if(null==e)return!this.getIsTableCollapsedInitially()
if(e===k.Z.COLLAPSED)return!1;(0,S.hu)(e===k.Z.EXPANDED,"Expected table to be either EXPANDED or COLLAPSED")
return!0}enhanceProps(){return{isExpanded:this.getIsExpanded(),isCollapsedInitially:this.getIsTableCollapsedInitially()}}}const defaultEditorMarginOffset=()=>0,Ce={canAttachFileToCell:e=>!1,canAddRemoveColumns:!0,canAddColumnsFreeform:!0,canRename:!0,getEditWhileCellLockedWarning:function getDefaultEditWhileCellLockedWarning(){return(0,he.nk)(he.so.GENERIC)},editWhileTableLockedWarning:(0,he.n8)(he.U.GENERIC),indentation:0,disableFormulas:!1,selectorsEnabled:!0,isMaximized:!1,disableMaximizedTables:!1,dirty:!1,viewer:!1,isCollapsible:!1,isCompactBottomSpacing:!1,isLeftAlignColumnHeader:!0,isLeftAlignRowHeader:!1,hasPlaceholderRows:!1,disableLegacyHeader:!1,forceCollapsed:!1,isNestedInParentComponent:!1,isTableHeaderFaded:!1,...N.xH},Re=u.forwardRef(((e,t)=>u.createElement(v.q.Consumer,null,(({showFormulas:n})=>O.AQ({...e,ref:t,multiGetHTMLForCopy:e.multiGetHTMLForCopy,multiGetTextForCopy:e.multiGetTextForCopy,multiCopyOptions:{showFormulas:n}})))))
class TableEditable extends u.Component{constructor(){super(...arguments)
this._isMounted=!1
this.saveMultiSelect=e=>{null==e&&({state:e}=this)
O.Ju(e,this.props.storeState,this.multiSelectKey())}
this.multiEditableMouseDownHandler=(e,t)=>{if(!this._isMounted)return
const n={multiStartIndex:this.state.multiStartIndex,multiEndIndex:this.state.multiEndIndex,multiSelIndex:this.state.multiSelIndex,setState:this.setState.bind(this),allowSingleMultiSelect:this.allowSingleMultiSelect(),multiTryInsert:this.multiTryInsert,multiCrossEditing:this.multiCrossEditing(),multiFinalizeEditHandler:this.multiFinalizeEditHandler,isIndexBetween:this.isIndexBetween,compareIndex:this.compareIndex,setMultiEditing:this.setMultiEditing,getMultiEditingText:this.getMultiEditingText,getMultiEditingTypedValue:this.getMultiEditingTypedValue,focusBearerNode:m.findDOMNode(this.focusBearerRef.current),disallowShiftExpand:!this.hasRealSelection()}
O.R$(e,t,n)}
this._getCopySelectionHTML=()=>this.multiGetHTMLForCopy()
this._getCopySelection=()=>this.multiGetTextForCopy()
this.focusBearerRef=u.createRef()
this.hiddenInputRef=u.createRef()
this.horizontalScrollContainerRef=u.createRef()
this.tableRef=u.createRef()
this.tableTitleBarRef=u.createRef()
this.stickyHeaderRef=u.createRef()
this._multiWindowMouseDownHandler=e=>{if(!this._isMounted)return
const t={multiEditing:this.props.multiEditing,multiCanInsert:this.multiCanInsert,multiNamespace:this.multiNamespace(),multiFinalizeEditHandler:this.multiFinalizeEditHandler,domNode:m.findDOMNode(this),multiStartIndex:this.state.multiStartIndex,multiEndIndex:this.state.multiEndIndex,setMultiEditing:this.setMultiEditing,setState:this.setState.bind(this),multiActive:this.state.multiActive,multiCrossEditing:this.multiCrossEditing()}
O.tb(e,t)}
this._multiWindowMouseUpHandler=e=>{if(!this._isMounted)return
const t={multiEditing:this.props.multiEditing,multiCanInsert:this.multiCanInsert,multiNamespace:this.multiNamespace(),multiFinalizeEditHandler:this.multiFinalizeEditHandler,domNode:m.findDOMNode(this),multiStartIndex:this.state.multiStartIndex,multiEndIndex:this.state.multiEndIndex,setMultiEditing:this.setMultiEditing,setState:this.setState.bind(this),multiActive:this.state.multiActive,multiCrossEditing:this.multiCrossEditing()}
O.WU(e,t)}
this.setTableNameRef=e=>{this.tableNameRef=e}
this.setCanShowStickyHeader=e=>{this.setState({canShowStickyHeader:e})}
this.setStickyHeaderPositioning=e=>{this.setState({stickyHeaderPositioning:e})}
this.setSelectionFormatting=(e,t)=>{if(["subscript","superscript"].includes(e))te.ZP.warn("Tables do not support subscript or superscript")
else{(0,S.hu)(["bold","underline","italic","strikethrough","align","foregroundColor","backgroundColor","important","scientificNotation","text"].includes(e),`Unexpected format in setSelectionFormatting ${e}`)
this._setSelectionProperty(e,t)}}
this.setSelectionSelector=e=>{this._setSelectionProperty("selectorId",e)}
this.setSelectionPrecision=e=>{this._setSelectionProperty("precision",e)}
this.mergeHandler=e=>{(0,S.hu)(this.supportsMerge(),"Expected table to support merge")
e?this.mergeSelection():this.unmergeSelection()}
this.setLinkAndClose=e=>{if(null!=e){const t="text"in e?e.text:e.name,n="/"===(null!=e.url?e.url[0]:void 0)?g.jp(e.url):e.url,[a,i]=Array.from(this.getRequiredMultiSelIndex()),r=(0,s.ZP)(this.props.table,(e=>{e.table[a][i]={...e.table[a][i],...this._makeCell(t,{link:n})}}))
this.setMultiEditing({editing:!1,text:t})
this.props.updateHandler(this.props.index,{table:r})}this.setState({showInsertLinkModal:!1})}
this.setTableNameAndClose=e=>{null!=e&&this.renameTable(e)
this.setState({showRenameTableModal:!1})}
this.state={isInsertingRows:!1,rowHeights:[],isAffixed:!1,headerWidth:0,showSetSelectorModal:!1,showSetPrecisionModal:!1,showInsertLinkModal:!1,showRenameTableModal:!1,canShowStickyHeader:!1,stickyHeaderPositioning:void 0,multiStartIndex:null,multiEndIndex:null,multiActive:null,multiSelIndex:null,multiActualIndex:null,multiExtra:{},hideHoverCell:!1}
this.mouseDownHandler=e=>{this.props.mouseDownHandler&&this.props.mouseDownHandler(this.props.index,e)}
this.mouseOverHandler=e=>{this.props.mouseOverHandler&&this.props.mouseOverHandler(this.props.index,e)}
this.setMultiEditing=e=>{this.props.setMultiEditingForTable(this.props.table.name,e)}
this.multiTryInsert=e=>this.props.tryInsert(this.props.table.name,e)
this.multiCanInsert=e=>this.props.canInsert(e)
this.multiFinalizeEditHandler=()=>{if(!this.props.multiEditing||null==this.state.multiSelIndex)return;(0,S.hu)(this.hasRealSelection(),"Expected to have a real selection")
const e=this.state.multiSelIndex,{formula:t,typedValue:n}=Y.Z.getState(this.props.tableNamespace),[a,i]=Array.from(e),r=this.props.table.table[a][i].typedValue||null;(0,S.Gp)(void 0!==n,"typedValue can be null but not undefined")
if(t===this.props.table.table[a][i].text&&h()(n,r))return
this.saveMultiSelect()
const o=this._makeCell(t)
if(n&&!(0,J.fp)(n)){o.typedValue=n
o.text=""}else o.typedValue=null
const l=(0,s.ZP)(this.props.table,(e=>{e.table[a][i]={...e.table[a][i],...o}}))
this.props.updateHandler(this.props.index,{table:l})}
this.getMultiEditingText=e=>{const t=this.getMultiEditingCellValue(e)
return t&&null!=t.text?t.text:""}
this.getMultiEditingTypedValue=e=>{const t=this.getMultiEditingCellValue(e)
return t&&null!=t.typedValue?t.typedValue:null}
this.setColumnWidth=(e,t)=>{const n=parseInt(e,10),a=(0,s.ZP)(this.props.table.widths,(e=>{e[n]=t}))
this.setTableWidths(a)}
this.lastIndex=()=>[this.props.table.table.length-1,this.props.table.table[0].length-1]
this.compareIndex=(e,t)=>e[0]-t[0]||e[1]-t[1]
this.isIndexBetween=(...e)=>{const[t,n]=Array.from(e[0]),[a,i]=Array.from(e[1]),[r,s]=Array.from(e[2])
return(t<=r&&r<=a||a<=r&&r<=t)&&(n<=s&&s<=i||i<=s&&s<=n)}
this.allowSingleMultiSelect=()=>!0
this.deleteRangeHelper=()=>{if(!this.hasRealSelection())return
this.saveMultiSelect()
const e=(0,s.ZP)(this.props.table,(e=>{for(let t=0;t<e.table.length;t++)for(let n=0;n<e.table[t].length;n++)this.isCellSelected([t,n])&&(e.table[t][n]=this._makeCell("",(0,J.bd)(e.table[t][n])))}))
this.props.updateHandler(this.props.index,{table:e})
this.setMultiEditing({editing:!1,text:""})}
this.expandToAndEditCell=([e,t],n=!1)=>{if(this.isLockedWithEditWarn())return
let a,i,r
if(this.isRealIndex([e,t])){a=null
i=null
r=this.props.table.table[e][t].text.length}else{({text:a,typedValue:i}=this.expandToCell([e,t]))
r=a.length}this.multiSelectSingle([e,t],{text:a,typedValue:i||null,editing:!0,collapse:!1,selection:{cid:this.cellCid(e,t),start:n?0:r,end:r}})}
this.multiKeyDownHandler=e=>{if(this.isFillDownActive())e.preventDefault()
else{this.hideHoverCell()
if(de.isADeleteKey(e)){e.preventDefault()
if(this.isLockedWithEditWarn())return
this.deleteRangeHelper()}else if(de.isTabKey(e)){e.preventDefault()
this.moveFromCell({index:this.getRequiredMultiSelIndex(),wrap:!0,dir:e.shiftKey?"left":"right"})}else if(de.isEnterKey(e)){e.preventDefault()
this.expandToAndEditCell(this.getRequiredMultiSelIndex(),!0)}else if("F2"===e.key){e.preventDefault()
this.expandToAndEditCell(this.getRequiredMultiSelIndex(),!1)}else if(de.isAnArrowKey(e)){e.preventDefault()
const t=de.getArrowKeyDirection(e),n=e.shiftKey
this.processArrowKeyPress(t,n)}else{const t=_.Z.formatTypeFromKeydown(e,{allowLink:!1})
if(t===C.Z.SYMBOL){te.ZP.warn("Inserting symbols into tables is not currently supported.")
return}if(t===C.Z.CYCLE_HEADER)return
if(null!=t){e.preventDefault()
if(this.isLockedWithEditWarn())return
this.setSelectionFormatting(t,!this.getSelectionFormatting(t))}}}}
this.multiInputHandler=({index:e,text:t})=>{(0,S.hu)(!this.props.locked,"TableEditable.multiInputHandler unexpectedly called while locked")
if(null==e){this.improperFocusHook()
return}const[n,a]=Array.from(e)
if(this.hasRealSelection()){if(""===t){this.deleteRangeHelper()
return}}else{if(""===t)return
this.expandToCell([n,a])}this.multiSelectSingle([n,a],{text:t,editing:!0,collapse:!1,selection:{cid:this.cellCid(n,a),start:t.length,end:t.length}})}
this.multiGetHTMLForCopy=({showFormulas:e=!1}={})=>{if(!this.hasRealSelection())return""
return(0,W.Z)(this.props.table,this.props.computedTable,this._multiSelectionBox(),{disableFormulas:this.props.disableFormulas,showFormulas:e})[0].outerHTML}
this.multiGetTextForCopy=({showFormulas:e=!1}={})=>{if(!this.hasRealSelection())return""
const{minI:t,maxI:n,minJ:a,maxJ:i}=this._multiSelectionBox(),r=[]
for(let s=t;s<=n;s++){const t=[]
for(let n=a;n<=i;n++)t.push(e?this.props.table.table[s][n].text:(0,J.Gh)(this.props.computedTable[s][n].value,this.props.table.table[s][n]))
r.push(t.join("\t"))}return r.join("\n")}
this._parseRawDataToCells=e=>{for(;e.length>0&&"\n"===e[e.length-1];)e=e.slice(0,e.length-1)
e=(0,pe.X)(e)
let t=!1
const n=e.split("\n").map((e=>e.split("\t").map((e=>{if(T.ZP.ELN_ENABLE_LOCALE_AWARE_PARSING_FOR_COPY_PASTE){const n=(0,A.i)(e,this.props.table._tableType)
if(e!==n){t=!0
e=n}}return this._makeCell(e)}))))
T.ZP.ELN_ENABLE_LOCALE_AWARE_PARSING_FOR_COPY_PASTE&&t&&(0,ue.u)()
const a=E.default.max(n,(e=>e.length)).length
return n.map((e=>{return e.concat((t=e.length,function __range__(e,t,n){const a=[],i=e<t,r=n?i?t+1:t-1:t
for(let t=e;i?t<r:t>r;i?t++:t--)a.push(t)
return a}(0,a-t,!1).map((e=>K.Z.makeEmptyCell()))))
var t}))}
this.multiPasteHandler=(e,t)=>{let n;(0,S.hu)(!this.props.locked,"TableEditable.multiPasteHandler unexpectedly called while locked")
if(this._canAttachFileToSelectedCell()){const t=y.Z.extractImageFromPaste(e)
if(t){t.then((e=>{e&&this._attachFileToCell(e)}))
return}}e.preventDefault()
const a=y.Z.processClipboard(e.clipboardData,{allowTables:!0,ignoreTableMinWidth:!0,ignoreTableMinHeight:!0,tableType:this.props.table._tableType})
1===a.length&&"table"===a[0].type?({table:n}=a[0].text):n=this._parseRawDataToCells(e.clipboardData.getData("text/plain"))
this.saveMultiSelect()
this._pasteTable(n,t)}
this.cellEscapeHandler=()=>{(0,S.hu)(this.hasRealSelection(),"Expected to have a real selection")
this.multiCancelEdit(this.getRequiredMultiSelIndex())}
this.cellEnterHandler=e=>{const[t,n]=e.index?e.index:this.getRequiredMultiSelIndex()
this.saveMultiSelect()
this.updateCell([t,n],e.text,e.cellData)
this.moveFromCell({index:[t,n],text:e.text,dir:e.enterKey?e.shiftKey?"up":"down":"none"})}
this.setIsInsertingRows=e=>{e.preventDefault()
this.setState({isInsertingRows:!0})}
this.handleAddBlankRowsFromDragHandle=e=>{const{table:t}=this.props
if(!(0,S.Gp)(void 0===t.maxRows||t.table.length+e<=t.maxRows,"Expecting DraggableRowInserter to prevent adding more rows than the maximum")){te.ZP.warn(`Cannot add more than ${t.maxRows} rows to this table.`)
if(t.table.length+e===t.maxRows)return
e=t.maxRows-t.table.length}let n
this.setState({isInsertingRows:!1})
const{start:a,end:i}=this._rowRange(t.table.length-1)
this.saveMultiSelect({multiStartIndex:a,multiEndIndex:i,multiSelIndex:a})
const r=t.table[t.table.length-1].map((e=>K.Z.makeEmptyCell(null!=e.precision?{precision:e.precision}:{}))),o=(0,s.ZP)(t,(t=>{for(n=0;n<e;n++)t.table.push(r)}))
n=o.table.length-1
this.props.updateHandler(this.props.index,{table:o})
this.setMultiIndices({start:[n,0],end:[n,o.table[0].length-1],text:o.table[n][0].text})}
this.deleteRows=(e,t)=>{null==t&&(t=e)
if(null==e||null==t)return
const{start:n,end:a}=this._rowRange(e,t)
this.saveMultiSelect({multiStartIndex:n,multiEndIndex:a,multiSelIndex:n})
this.props.deleteRows(this.props.index,e,t)}
this.deleteColumns=(e,t)=>{if(!this.props.canAddRemoveColumns)return
null==t&&(t=e)
if(null==e||null==t)return
const{start:n,end:a}=this._colRange(e,t)
this.saveMultiSelect({multiStartIndex:n,multiEndIndex:a,multiSelIndex:n})
this.props.deleteColumns(this.props.index,e,t)}
this.insertRowsAbove=(e,t)=>{null==t&&(t=e)
if(null==e||null==t)return
const{start:n,end:a}=this._rowRange(e,t)
this.saveMultiSelect({multiStartIndex:n,multiEndIndex:a,multiSelIndex:n})
this.props.insertRowsAbove(this.props.index,e,t)}
this.insertRowsBelow=(e,t)=>{null==t&&(t=e)
if(null==e||null==t)return
const{start:n,end:a}=this._rowRange(e,t)
this.saveMultiSelect({multiStartIndex:n,multiEndIndex:a,multiSelIndex:n})
this.props.insertRowsBelow(this.props.index,e,t)}
this.insertColumnsLeft=(e,t,n={})=>{if(!this.props.canAddRemoveColumns)return
null==t&&(t=e)
if(null==e||null==t)return
const{start:a,end:i}=this._colRange(e,t)
this.saveMultiSelect({multiStartIndex:a,multiEndIndex:i,multiSelIndex:a})
this.props.insertColumnsLeft(this.props.index,e,t,n)}
this.insertColumnsRight=(e,t,n={})=>{if(!this.props.canAddRemoveColumns)return
null==t&&(t=e)
if(null==e||null==t)return
const{start:a,end:i}=this._colRange(e,t)
this.saveMultiSelect({multiStartIndex:a,multiEndIndex:i,multiSelIndex:a})
this.props.insertColumnsRight(this.props.index,e,t,n)}
this.renameColumn=(e,t)=>{var n,a,i
this.saveMultiSelect()
this.props.updateHandler(this.props.index,{table:null!==(i=null===(a=(n=this.props).withColumnNameSet)||void 0===a?void 0:a.call(n,this.props.table,e,t))&&void 0!==i?i:K.Z.withColumnNameSet(this.props.table,e,t)})}
this.deleteTable=()=>{this.props.deleteHandler(this.props.index)}
this.toggleHeaderColHandler=()=>{const e=(0,s.ZP)(this.props.table,(e=>{e.headerCol=!e.headerCol
e.table.forEach((e=>{e.forEach(((e,t)=>{0===t&&delete e.bold}))}))}))
this.props.updateHandler(this.props.index,{table:e})}
this.toggleHeaderRow=()=>{const e=(0,s.ZP)(this.props.table,(e=>{e.headerRow=!e.headerRow
e.table[0].forEach((e=>{delete e.bold}))}))
this.props.updateHandler(this.props.index,{table:e})}
this.handleFunctionClicked=async({name:e,asyncOnClick:t})=>{if(null==t){const t=1+e.length+1
this._setFormula(`=${e}()`,t)}else{const{minI:e,maxI:n,minJ:a,maxJ:i}=this._multiSelectionBox(),r=null!=this.props.table.rowData&&e===n&&a===i?this.props.table.rowData[e]:null,s=e===n&&a===i?this.props.computedTable[e]:null,o=await t({rowData:r,evaluatedRow:s,onUpdateSelectedCell:t=>{this._handleUpdateCellData(e,a,t)}})
o&&this._setFormula(o.formula,o.cursorPosition)}}
this.mouseMoveHandler=e=>{this._showHoverCell()}
this.hideHoverCell=()=>{this.state.hideHoverCell||this.setState({hideHoverCell:!0})}
this.cellCid=(e,t)=>`table-${this.props.cid}-${e}-${t}`
this.updateCell=(e,t,n)=>{null==n&&(n={})
const a=E.default.extend({text:t},n),[i,r]=Array.from(e)
this._handleUpdateCellData(i,r,a)}
this.moveFromCell=({index:e,dir:t,text:n,wrap:a})=>{let i,r
null==n&&(n=null)
const[s,o]=this.hasRealSelection()?[this.state.multiStartIndex,this.state.multiEndIndex]:[e,e]
if(0===this.compareIndex(s,o)){({newIndex:r,newActualIndex:i}=this.moveCell(e,this.firstIndex(),this.lastIndex(),t,a))
this.multiSelectSingle(r,{editing:!1,collapse:!0,text:0===this.compareIndex(r,e)?n:null,multiActualIndex:i})}else{({newIndex:r,newActualIndex:i}=this.moveCell(e,s,o,t,a))
this.multiSelectSingle(r,{editing:!1,collapse:!1,text:0===this.compareIndex(r,e)?n:null,multiActualIndex:i})}}
this.toggleIsMaximized=()=>{this.props.isMaximized?this.props.setMaximizedTable(null):this.props.setMaximizedTable(this.props.cid)}
this.selectCell=(e,t)=>{this.multiFinalizeEditHandler()
this.multiSelectSingle(e,t)}
this.improperFocusHook=()=>{this.selectTable()}
this._handleTableSelected=()=>{this.setMultiEditing({editing:!1,text:null})
this.clearMultiSelect()
this.selectTable()}
this.openTableContextMenu=e=>{e.preventDefault()
const t=this.getLockedWarningMessage(this.props.locked)
t?te.ZP.warn(t):f.e.open(e.nativeEvent,this._tableContextMenuOptions(),!0)}
this.hiddenCopyHandler=e=>{e.preventDefault()
this.props.setClipboard(this.props.index,e)}
this.hiddenCutHandler=e=>{if(!this.isLockedWithEditWarn()&&this._canDeleteTable()){e.preventDefault()
this.props.setClipboard(this.props.index,e)
this.deleteTable()
this.props.setSelectionAbove(this.props.index)}}
this.hiddenKeyDownHandler=e=>{if(this._isMounted)if(de.isCtrlC(e)||de.isCtrlX(e)){const e=m.findDOMNode(this.hiddenInputRef.current)
l()(e).html("&nbsp;")
b.td(e)}else{e.preventDefault()
switch(e.which){case 38:"function"==typeof this.props.moveHandler&&this.props.moveHandler(this.props.index,{up:!0,beginning:!0})
return
case 40:"function"==typeof this.props.moveHandler&&this.props.moveHandler(this.props.index,{up:!1,beginning:!0})
return}if(de.isUndoRedo(e)){if(this.isParentLockedWithEditWarn({forUndoRedo:!0})){e.preventDefault()
return}"function"==typeof this.props.restoreState&&this.props.restoreState(e,{selection:b.xH()})}else if([8,46,13,9].includes(e.which)&&this.isParentLockedWithEditWarn())e.preventDefault()
else switch(e.which){case 8:if(this._canDeleteTable()){this.deleteTable()
this.props.setSelectionAbove(this.props.index)}break
case 46:if(this._canDeleteTable()){this.deleteTable()
this.props.setSelectionBelow(this.props.index)}break
case 13:this.props.insertItemHandler(this.props.index-1)
break
case 9:this.props.storeState({selection:b.xH()})
"function"==typeof this.props.tabHandler&&this.props.tabHandler(this.props.index,{shiftKey:e.shiftKey,target:e.target})}}}
this.setColumnConstraint=(e,t,n={})=>{this.saveMultiSelect()
const a=(0,s.ZP)(this.props.table,(a=>{a.columnConstraints[e]=t
a.table[0][e]={...a.table[0][e],...n}}))
this.props.updateHandler(this.props.index,{table:a})}
this._handleHorizontalScroll=()=>{if(!this._isMounted)return
if(!this.props.isExpanded)return
const e=m.findDOMNode(this).querySelector(".mediocre-tableEditable-table--main"),t=l()(e).offset().left-parseInt(l()(e).css("left"),10)<l()(this._getScrollArea()).offset().left
this.state.isAffixed!==t&&this.setState({isAffixed:t})}
this._handleDoubleClickToAddRows=async()=>{var e
const t=await(0,oe.Z)(Se.Z,{max:(null!==(e=this.props.table.maxRows)&&void 0!==e?e:T.ZP.ELN_MAX_STRUCTURED_TABLE_ROWS)-this.props.table.table.length})
null!=t&&this.handleAddBlankRowsFromDragHandle(t)}
this._toggleCollapsed=()=>{this.props.isCollapsible&&!this.props.isMaximized&&F.g_(getCollapseId(this.props))}
this.finalizeAndExitEditMode=()=>{this.state.multiSelIndex&&this.selectCell(this.state.multiSelIndex,{collapse:!1,editing:!1})}
this.openSetPrecisionModalAndFinalize=()=>{this.finalizeAndExitEditMode()
this.setState({showSetPrecisionModal:!0})}
this.openSetSelectorModalAndFinalize=()=>{this.finalizeAndExitEditMode()
this.setState({showSetSelectorModal:!0})}
this.closeSetSelectorModal=()=>{this.setState({showSetSelectorModal:!1})}
this.closeSetPrecisionModal=()=>{this.setState({showSetPrecisionModal:!1})}
this.openInsertLinkModal=()=>{this.setState({showInsertLinkModal:!0})}
this.openRenameTableModal=()=>{this.setState({showRenameTableModal:!0})}
this._handleUpdateCells=e=>{const t={...this.props.table,table:e}
this.props.updateHandler(this.props.index,{table:t})}
this._createSelectedCellsUpdate=e=>{this.finalizeAndExitEditMode();(0,S.hu)(this.hasRealSelection(),"Expected to have a real selection")
const{minI:t,maxI:n,minJ:a,maxJ:i}=this._multiSelectionBox()
e({minI:t,maxI:n,minJ:a,maxJ:i,table:this.props.table,onUpdateCells:this._handleUpdateCells})}
this._handleTableControlsMouseDown=()=>{this.props.multiEditing&&this.finalizeAndExitEditMode()}
this.formulaFocusHandler=e=>{this.hasRealSelection()||this.expandToCell(this.getRequiredMultiSelIndex())
this.setMultiEditing({editing:!0,text:e})}
this.scrollAreaMouseDownHandler=e=>{this.clientX=e.clientX
this.clientY=e.clientY
e.target===e.currentTarget&&e.preventDefault()}
this.scrollAreaMouseMoveHandler=e=>{if(this.state.multiActive||this.isFillDownActive()){this.clientX=e.clientX
this.clientY=e.clientY
this.startDragAutoscroll(e)}}
this.startDragAutoscroll=e=>{this.autoscrollIntervalId?this.stopDragAutoscroll():l()(window).one("mouseup",this.stopDragAutoscroll)
this.autoscrollIntervalId=window.setInterval((()=>{if(e&&this.verticalScrollContainer&&this.tableRef.current){const{pageY:t}=e,n=this.verticalScrollContainer.getBoundingClientRect(),a=this.tableRef.current.getBoundingClientRect()
t>n.bottom-50&&n.bottom<a.bottom+200?this.verticalScrollContainer.scrollBy({top:20,behavior:"instant"}):t<n.top+50+$.TABLE_FULL_TITLE_BAR_CLEARANCE+this.state.rowHeights[0]&&n.top>a.top-200&&this.verticalScrollContainer.scrollBy({top:-20,behavior:"instant"})
this._scrollCompleteHandler()}}),_e)}
this.stopDragAutoscroll=()=>{clearInterval(this.autoscrollIntervalId)
this.autoscrollIntervalId=void 0}
this._scrollCompleteHandler=()=>{if(!this.state.multiActive||null==this.clientX||null==this.clientY)return
const e=document.elementFromPoint(this.clientX,this.clientY),t=l()(e).closest(".cell")
if(!t.length)return
const n=this.cellIndexFromCid(t.attr("data-cid"))
if(null!=n&&this.isIndexBetween(this.firstIndex(),this.lastIndex(),n)){this.cellDragOverHandler(n)
this.fillDownMouseMoveHandler(n)}}
this.fillDownMouseMoveHandler=e=>{let t
if(!this.isFillDownActive()||!this._isMounted)return
const[n,a]=Array.from(e),{minI:i,maxI:r,minJ:s,maxJ:o}=this._multiSelectionBox(),l=this._cellBox(n,a),c=l.left+l.width/2,d=l.top+l.height/2
let u=n,m=a
n<r&&this.clientY>d&&u++
n>r&&this.clientY<d&&u--
a<o&&this.clientX>c&&m++
a>o&&this.clientX<c&&m--
const p=Math.min(u,i),E=Math.max(u,r),S=Math.min(m,s),T=Math.max(m,o)
t=Math.max(E-r,i-p)>=Math.max(T-o,s-S)?{minI:p,maxI:E,minJ:s,maxJ:o}:{minI:i,maxI:r,minJ:S,maxJ:T}
if(this._containsMergedRegion(t))this.setMultiExtra({fillDownInvalid:!0})
else{this.setMultiExtra({fillDownInvalid:!1})
h()(this.getFillDownBox(),t)||this.setMultiExtra({fillDownBox:t})}}
this.cellDragOverHandler=e=>{this.isFillDownActive()||this.multiEditableMouseOverHandler(this._expandSelectionIndex(e,this.state.multiActive))}
this.fillDownMouseUpHandler=()=>{if(this.isFillDownActive()&&!this.isFillDownInvalid())try{this.performFillDown()}finally{this.setMultiExtra({fillDownActive:!1,fillDownBox:null,fillDownInvalid:!1})}else this.setMultiExtra({fillDownActive:!1,fillDownBox:null,fillDownInvalid:!1})}
this.getSelectionRange=(e,t)=>{const n=__guard__(this._multiAxisDimSelection(),(t=>t[e]))
if(null==n)return null
const[a,i]=Array.from(n)
return a<=t&&t<=i?{minIndex:a,maxIndex:i}:null}
this.axisCellDragStartHandler=(e,t)=>{let{start:n}=e
const{active:a}=e,i=this._expandSelectionIndex(n,a)
t.shiftKey&&null!=this.state.multiSelIndex&&(n=a===Ie?[this.state.multiSelIndex[0],0]:[0,this.state.multiSelIndex[1]])
this.multiEditableMouseDownHandler({start:n,end:i,active:a},t)}
this.axisCellDragOverHandler=(e,t)=>{this.multiEditableMouseOverHandler(this._expandSelectionIndex(e,this.state.multiActive))}
this.fillDownSquareMouseDownHandler=e=>{e.preventDefault();(0,S.hu)(this.hasMultiSelection(),"Expected to have a selection")
this.setMultiExtra({fillDownActive:!0,fillDownBox:this._multiSelectionBox()})
l()(window).one("mouseup",this.fillDownMouseUpHandler)}}static selectionAtStart(e){return{multiSelectKey:tableMultiSelectKey(e),data:{multiActive:null,multiStartIndex:[0,0],multiEndIndex:[0,0],multiSelIndex:[0,0]}}}static hiddenInputCid(e){return`${e}-table`}getRenderedRowLabel(e){return this.props.table.rowLabels&&this.props.table.rowLabels[e]||null}clearMultiSelect(){O.ye(this.setState.bind(this))}setMultiExtra(e){O.Yi(e,this.setState.bind(this),this.state.multiExtra)}multiSelectSingle(e,t){if(!this._isMounted)return
const n={setState:this.setState.bind(this),multiStartIndex:this.state.multiStartIndex,multiEndIndex:this.state.multiEndIndex,setMultiEditing:this.setMultiEditing,getMultiEditingText:this.getMultiEditingText,getMultiEditingTypedValue:this.getMultiEditingTypedValue,focusBearerNode:m.findDOMNode(this.focusBearerRef.current)}
O.t9(e,t,n)}multiCancelEdit(e){if(!this._isMounted)return
const t={setMultiEditing:this.setMultiEditing,getMultiEditingText:this.getMultiEditingText,getMultiEditingTypedValue:this.getMultiEditingTypedValue,focusBearerNode:m.findDOMNode(this.focusBearerRef.current)}
O.MW(e,t)}setMultiIndices({start:e,end:t,text:n}){if(!this._isMounted)return
const a={setState:this.setState.bind(this),setMultiEditing:this.setMultiEditing,getMultiEditingText:this.getMultiEditingText,getMultiEditingTypedValue:this.getMultiEditingTypedValue,focusBearerNode:m.findDOMNode(this.focusBearerRef.current)}
O.Vc({start:e,end:t,text:n},a)}hasMultiSelection(){return O.oO(this.state.multiStartIndex,this.state.multiEndIndex)}multiEditableMouseOverHandler(e){if(!this._isMounted)return
const t={setState:this.setState.bind(this),multiActive:this.state.multiActive,multiStartIndex:this.state.multiStartIndex,multiEndIndex:this.state.multiEndIndex,multiExtra:this.state.multiExtra,disallowMultiExpand:!1,multiCrossEditing:this.multiCrossEditing(),allowSingleMultiSelect:this.allowSingleMultiSelect(),multiTryInsert:this.multiTryInsert,compareIndex:this.compareIndex,focusBearerNode:m.findDOMNode(this.focusBearerRef.current)}
O.f6(e,t)}renderFocusBearer(){return u.createElement(Re,{ref:this.focusBearerRef,state:this.state,isLockedWithEditWarn:this.isLockedWithEditWarn.bind(this),restoreState:this.props.restoreState,setState:this.setState.bind(this),setMultiEditing:this.setMultiEditing,getMultiEditingText:this.getMultiEditingText,getMultiEditingTypedValue:this.getMultiEditingTypedValue,firstIndex:this.firstIndex(),lastIndex:this.lastIndex(),multiSelectable:this,multiSelectKey:this.multiSelectKey(),multiSelIndex:this.state.multiSelIndex,multiKeyDownHandler:this.multiKeyDownHandler,multiInputHandler:this.multiInputHandler,multiPasteHandler:this.multiPasteHandler,multiGetHTMLForCopy:this.multiGetHTMLForCopy,multiGetTextForCopy:this.multiGetTextForCopy,dataTestAttrs:{component:"TableEditable",element:"focusBearer"}})}measureRowHeights(){if(!this._isMounted)return
const e=Array.from(m.findDOMNode(this).querySelectorAll(".mediocre-tableEditable-table--main tr")).map((e=>e.getBoundingClientRect().height))
h()(this.state.rowHeights,e)||this.setState({rowHeights:e})}measureHeaderWidth(){var e
const t=null===(e=this.tableNameRef)||void 0===e?void 0:e.getBoundingClientRect().width
null==t||h()(this.state.headerWidth,t)||this.setState({headerWidth:t})}_measureTableSize(){this.measureRowHeights()
this.measureHeaderWidth()}canModifyDims(){return!this.props.viewer&&!this.props.locked&&!K.Z.hasLockedDims(this.props.table)}canRemoveRows(){return!this.props.viewer&&!this._isTableLocked()&&K.Z.allowRowRemoval(this.props.table)&&Boolean(this.props.deleteRows)}canAddRows(){return!this.props.viewer&&!this.props.locked&&K.Z.allowAddRows(this.props.table)}shouldRenderAddRows(){return this.canAddRows()||this.props.dirty}shouldComponentUpdate(e,t){return!h()(this.props,e)||!h()(this.state,t)}UNSAFE_componentWillMount(){O.l5(this.props.metadataForRestore,this.multiSelectKey(),this.setState.bind(this))}componentDidMount(){this._isMounted=!0
this._measureId=setInterval((()=>{this._measureTableSize()}),500)
const e=getCollapseId(this.props)
e&&F.Lw(e,this.props.isCollapsedInitially?k.Z.COLLAPSED:k.Z.EXPANDED)
O._4(this._multiWindowMouseDownHandler,this._multiWindowMouseUpHandler)
T.ZP.ELN_ENABLE_TABLE_STICKY_HEADER&&(this.verticalScrollContainer=(0,ce.Z)(m.findDOMNode(this)))}componentDidUpdate(e,t){if(!this._isMounted)return
this.scrollUpdateIntoView(t)
this.props.isExpanded&&!e.isExpanded&&this._measureTableSize()
const n={domNode:m.findDOMNode(this),multiEditing:this.props.multiEditing,improperFocusHook:this.improperFocusHook,multiStartIndex:this.state.multiStartIndex,multiEndIndex:this.state.multiEndIndex,focusBearerNode:m.findDOMNode(this.focusBearerRef.current)}
O.y0(n)}componentWillUnmount(){this._isMounted=!1
clearInterval(this._measureId)
this.stopDragAutoscroll()
l()(window).off("mouseup",this.fillDownMouseUpHandler)
O.dk(this._multiWindowMouseDownHandler,this._multiWindowMouseUpHandler)}UNSAFE_componentWillReceiveProps(e){O.SO(this.props,e,this.multiSelectKey(),this.setState.bind(this))}hasRealSelection(){return this.hasMultiSelection()&&this.isRealIndex(this.state.multiStartIndex)&&this.isRealIndex(this.state.multiEndIndex)}isRealIndex(e){return this.isIndexBetween(this.firstIndex(),this.lastIndex(),e)}isCellSelected(e){if(!this.hasMultiSelection())return!1
const{minI:t,maxI:n,minJ:a,maxJ:i}=this._multiSelectionBox()
return this.isIndexBetween([t,a],[n,i],e)}getSelectionPrecision(){if(!this.hasRealSelection())return null
const{minI:e,maxI:t,minJ:n,maxJ:a}=this._multiSelectionBox()
let i=null
for(let r=e;r<=t;r++)for(let e=n;e<=a;e++)if(!K.Z.isNotRendered(r,e,this.props.computedTable[r][e])){if(null!=i&&i!==this.props.table.table[r][e].precision)return null
null==i&&({precision:i}=this.props.table.table[r][e])}return i}getSelectionLink(){if(!this.hasRealSelection()||this.linkButtonDisabled())return null
const[e,t]=Array.from(this.state.multiStartIndex)
return{url:this.props.table.table[e][t].link,text:this.props.table.table[e][t].text}}_isSelectionOnlyDatetimeCells(){var e,t
if(!this.hasRealSelection())return!1
const{minJ:n,maxJ:a}=this._multiSelectionBox()
for(let i=n;i<=a;i++){const n=this.props.table.columnConstraints[i]
if((null===(e=null==n?void 0:n.columnDefinition)||void 0===e?void 0:e.type)!==$.TableColumnType.TAG_VALUE||(null===(t=null==n?void 0:n.columnDefinition)||void 0===t?void 0:t.schemaField.fieldType)!==ne.FIELD_TYPES.DATETIME.type)return!1}return!0}getSelectionFormatting(e,t){null==t&&(t=!1)
const n=E.default.iteratee(e)
if(!this.hasRealSelection())return t
let a=null
const{minI:i,maxI:r,minJ:s,maxJ:o}=this._multiSelectionBox()
for(let l=i;l<=r;l++)for(let r=s;r<=o;r++){if(K.Z.isNotRendered(l,r,this.props.computedTable[l][r]))continue
const o=this.props.table.table[l][r],c=this.props.computedTable[l][r]
if("bold"===e&&(0===l&&this.props.table.headerRow||0===r&&this.props.table.headerCol))a=!0
else if(l===i&&r===s)a=n(o,c)
else if(a!==n(o,c))return t}return a}getEvaluatedFillDownDestCells(){if(!this.getFillDownBox()||!this.hasMultiSelection())return[]
const e=[],{minI:t,maxI:n,minJ:a,maxJ:i}=this.getFillDownBox()
for(let r=t;r<=n;r++)for(let t=a;t<=i;t++)this.isRealIndex([r,t])&&!this.isCellSelected([r,t])&&e.push({evaluatedCell:this.props.computedTable[r][t],cellId:{row:r,column:t}})
return e}getSelectedEvaluatedCells(){if(!this.hasMultiSelection())return[]
const e=[],{minI:t,maxI:n,minJ:a,maxJ:i}=this._multiSelectionBox()
for(let r=t;r<=n;r++)for(let t=a;t<=i;t++)this.isRealIndex([r,t])&&e.push({evaluatedCell:this.props.computedTable[r][t],cellId:{row:r,column:t}})
return e}_setSelectionProperty(e,t){this.saveMultiSelect()
const n=(0,s.ZP)(this.props.table,(n=>{n.table.forEach(((n,a)=>{n.forEach(((n,i)=>{this.isCellSelected([a,i])&&(null!=t?n[e]=t:delete n[e])}))}))}))
this.props.updateHandler(this.props.index,{table:n})}_mergeButtonFormatting(){if(!this.hasRealSelection())return{active:!1}
const{multiStartIndex:e,multiEndIndex:t}=this.state,{minI:n,minJ:a}=K.Z.indicesToCorners(e,t)
if(0!==this.compareIndex(e,t))return this.props.allowMergeSelection?{active:!1,disabled:!this.props.allowMergeSelection(e,t)}:{active:!1}
const i=this.props.computedTable[n][a]
return K.Z.isRenderedMergedCell(n,a,i)?{active:!0}:{active:!1,disabled:!0}}_hasTextInMergedRegion({minI:e,maxI:t,minJ:n,maxJ:a}){for(let i=e;i<=t;i++)for(let t=n;t<=a;t++){if(i===e&&t===n)continue
if(""!==this.props.table.table[i][t].text)return!0}return!1}mergeSelection(){this.saveMultiSelect()
const e=this._multiSelectionBox()
if(this._hasTextInMergedRegion(e)){const t="Merging cells will only preserve the top-leftmost value. Merge anyway?"
me.iG("Merge Selection",t,"danger").done((()=>{this.props.mergeRegion(this.props.index,e)}))}else this.props.mergeRegion(this.props.index,e)}unmergeSelection(){this.saveMultiSelect()
this.props.unmergeRegion(this.props.index,this._multiSelectionBox())}supportsMerge(){return null!=this.props.mergeRegion&&null!=this.props.unmergeRegion}isFillDownActive(){return null!=this.state.multiExtra.fillDownActive&&this.state.multiExtra.fillDownActive}isFillDownInvalid(){return null!=this.state.multiExtra.fillDownInvalid&&this.state.multiExtra.fillDownInvalid}getFillDownBox(){return this.state.multiExtra.fillDownBox}multiCrossEditing(){return null!=this.props.lookUpTableNameWithActiveEdit()}multiNamespace(){return this.props.tableNamespace}getRequiredMultiSelIndex(){(0,S.hu)(null!=this.state.multiSelIndex,"Table interaction failed due to missing selection")
return this.state.multiSelIndex}getMultiEditingCellValue(e){const[t,n]=Array.from(e),a=this.props.table.table[t]
if(null==a)return null
const i=a[n]
return null==i?null:i}setTableWidths(e){this.saveMultiSelect()
this.props.updateHandler(this.props.index,{table:{...this.props.table,widths:e}})}previousIndex(...e){const[t,n]=Array.from(e[0])
return[t,Math.max(n-1,0)]}nextIndex(...e){const[t,n]=Array.from(e[0])
return[t,Math.min(n+1,this.props.table.table[0].length-1)]}firstIndex(){return[0,0]}extendedLastIndex(){const e=K.Z.getColumnCount(this.props.table,this.shouldShowGhostCells())
return[this.props.table.table.length-1,e-1]}multiSelectKey(){return tableMultiSelectKey(this.props.cid)}_isTableLocked(){return this.props.locked||this.props.hasPlaceholderRows}_anyCellsLockedOrArchived(e){return e.some((({evaluatedCell:e,cellId:t})=>{var n
return e.locked||(0,ee.d)(null===(n=this.props.table.rowData)||void 0===n?void 0:n[t.row])}))}_isCellSelectionEditingLocked(e){const t=this._anyCellsLockedOrArchived(this.getSelectedEvaluatedCells())
return this._isTableLocked()||(!e||!e.forUndoRedo)&&t}_isFillDownBoxEditingLocked(){return this._isTableLocked()||this._anyCellsLockedOrArchived(this.getEvaluatedFillDownDestCells())}getLockedWarningMessage(e,t){if(e){if(this._isTableLocked()&&this.props.editWhileTableLockedWarning)return this.props.editWhileTableLockedWarning
if(!this._isTableLocked()&&this.props.getEditWhileCellLockedWarning&&t)return this.props.getEditWhileCellLockedWarning(t)}return null}isFillDownBoxLockedWithEditWarn(){const e=this._isFillDownBoxEditingLocked(),t=this.getLockedWarningMessage(e,this.getFillDownBox())
t&&te.ZP.warn(t,{id:"TableEditable.isLockedWithEditWarn"})
return e}isLockedWithEditWarn(e){const t=this._isCellSelectionEditingLocked(e),n=this.hasMultiSelection()?this._multiSelectionBox():null,a=this.getLockedWarningMessage(t,n)
a&&te.ZP.warn(a,{id:"TableEditable.isLockedWithEditWarn"})
return t}isParentLockedWithEditWarn(e){return this.props.isParentLockedWithEditWarn?this.props.isParentLockedWithEditWarn():this.isLockedWithEditWarn(e)}processArrowKeyPress(e,t){let n,a
if(t){if(!this.hasRealSelection())return
0===this.compareIndex(this.getRequiredMultiSelIndex(),this.state.multiActualIndex)?({newIndex:a,newActualIndex:n}=this.moveCell(this.state.multiEndIndex,this.firstIndex(),this.lastIndex(),e,!1)):({newIndex:a,newActualIndex:n}=this.moveCell(this.state.multiActualIndex,this.firstIndex(),this.lastIndex(),e,!1))
const t=a
if(this.isIndexBetween(this.state.multiStartIndex,t,this.getRequiredMultiSelIndex()))this.setState({multiEndIndex:t,multiActualIndex:n})
else{({newIndex:a,newActualIndex:n}=this.moveCell(this.state.multiStartIndex,this.firstIndex(),this.lastIndex(),e,!1))
const t=a
this.isIndexBetween(t,this.state.multiEndIndex,this.getRequiredMultiSelIndex())&&this.setState({multiEndIndex:t,multiStartIndex:this.state.multiEndIndex,multiActualIndex:n})}}else{if(0===this.compareIndex(this.state.multiStartIndex,this.state.multiEndIndex))({newIndex:a,newActualIndex:n}=this.moveCell(this.state.multiActualIndex,this.firstIndex(),this.extendedLastIndex(),e,!1))
else{const t={start:this.getRequiredMultiSelIndex(),end:this.getRequiredMultiSelIndex()};({newIndex:a,newActualIndex:n}=this.moveCell(this.getRequiredMultiSelIndex(),this.firstIndex(),this.extendedLastIndex(),e,!1,t))}this.multiSelectSingle(a,{editing:!1,collapse:!0,multiActualIndex:n})}}_isPasteAllowed(e,t,n,a,i){const r=n.some((e=>e.some((e=>null!=e.mergeRowSpan&&1!==e.mergeRowSpan||null!=e.mergeColSpan&&1!==e.mergeColSpan))))
if(r&&!this.supportsMerge()){te.ZP.error("Merged cells are not supported for this table.")
return!1}if(!this.isRealIndex([a,i]))return!0
if(r&&this.props.allowMergeSelection){if(n.some(((t,n)=>t.some(((t,r)=>{var s,o
if(t.mergeRowSpan&&t.mergeRowSpan>1||t.mergeColSpan&&t.mergeColSpan>1){const l=a+n,c=i+r,d=l+(null!==(s=t.mergeRowSpan)&&void 0!==s?s:1)-1,u=c+(null!==(o=t.mergeColSpan)&&void 0!==o?o:1)-1
return!(c>=e.table[0].length)&&!this.props.allowMergeSelection([l,c],[d,u])}return!1}))))){te.ZP.error("The merged range(s) in the content to be pasted are invalid for this table.")
return!1}}const s=n.length,o=n[0].length,l=Math.min(o+i,e.table[0].length),c=Math.min(s+a,e.table.length)
for(let e=a;e<c;e++)for(let n=i;n<l;n++){if(null!=t[e][n].mergedBox){te.ZP.error("Pasting in a region with merged cells is not allowed.")
return!1}}return!0}_areTypedValuesAllowed(){return this.props.table.columnConstraints.some((e=>Boolean(e&&e.columnDefinition)))}_canAttachFileToSelectedCell(){const e=this.state.multiSelIndex
return Boolean(e&&this.props.canAttachFileToCell(e))}async _attachFileToCell(e){if(this._canAttachFileToSelectedCell()){const t=this.getRequiredMultiSelIndex(),{text:n,cellData:a}=await this.props.convertFileToCellData(e)
this.cellEnterHandler({text:n,cellData:a,index:t})}}_pasteTable(e,t={type:Z.KF.HTML}){t.transpose&&(e=(0,Ee.Z)(e))
const{minI:n,maxI:a,minJ:i,maxJ:r}=this._multiSelectionBox(),s=a-n+1,o=r-i+1,l=this.props.table.disallowCustomColumns?this.props.table.table[0].length:ge,c=e[0].length+i-l
c>0&&(e=(()=>{const t=[]
for(const n of Array.from(e))t.push(n.slice(0,-c))
return t})())
function fillToDimension(e,t){const n=t.slice()
for(;n.length+t.length<=e;)n.push(...Array.from(t||[]))
return n}e=fillToDimension(s,(()=>{const t=[]
for(const n of Array.from(e))t.push(fillToDimension(o,n))
return t})())
if(this._isPasteAllowed(this.props.table,this.props.computedTable,e,n,i)){e=(e=this._areTypedValuesAllowed()?e.map((e=>e.map((e=>e.typedValue?{...e,text:""}:e)))):e.map((e=>e.map((e=>E.default.omit(e,"typedValue")))))).map((e=>e.map((e=>e.typedValue?{...e,typedValue:(0,X.j)(e.typedValue)}:e))));(0,L.O)({pastedTables:[e],existingSelectors:this.props.selectorsLink.value,selectorsEnabled:this.props.selectorsEnabled}).then((t=>{const{table:a,box:r}=H.Z.ops.paste(this.props.table,this.props.computedTable,e,n,i)
if(!K.Z.isInvalidOpWithWarn(this.props.table,a)){this.setMultiIndices({start:[r.minI,r.minJ],end:[r.maxI,r.maxJ],text:a.table[r.minI][r.minJ].text})
this.props.updateHandler(this.props.index,{table:a},t)}}))}}performFillDown(){if(this.isFillDownBoxLockedWithEditWarn())return
this.saveMultiSelect()
const{table:e,box:t}=H.Z.ops.fillDown(this.props.table,this.props.computedTable,this._multiSelectionBox(),this.getFillDownBox(),this.props.disableFormulas)
this.props.updateHandler(this.props.index,{table:e},this.props.selectorsLink.value)
this.setMultiIndices({start:[t.minI,t.minJ],end:[t.maxI,t.maxJ],text:e.table[t.minI][t.minJ].text})}_makeCell(e,t={}){return{text:e,...t}}_indentationPx(){return this.props.isMaximized?0:this.props.indentation*P.sh}expandToCell(e){(0,S.hu)(!K.Z.hasLockedDims(this.props.table),"Prevented unexpected table expansion with locked dimensions")
this.saveMultiSelect({multiStartIndex:e,multiEndIndex:e,multiSelIndex:e})
const[t,n]=Array.from(e),a=Math.max(0,n+1-this.props.table.widths.length),i=Array(a).fill(K.Z.makeEmptyCell())
let r=(0,s.ZP)(this.props.table.table,(e=>{for(const t of e)t.push(...i)}))
const o=Math.max(0,t+1-this.props.table.table.length),l=r[r.length-1].map((e=>K.Z.makeEmptyCell(null!=e.precision?{precision:e.precision}:{})))
r=(0,s.ZP)(r,(e=>{for(let t=0;t<o;t++)e.push(l)}))
const c=(0,s.ZP)(this.props.table,(e=>{e.table=r
for(const[t,n]of Object.entries($.COLUMN_FIELD_DEFAULTS))e[t].push(...Array(a).fill(n))}))
this.props.updateHandler(this.props.index,{table:c})
return r[t][n]}_tableSize(){return[this.props.table.table.length-1,this.props.table.table[0].length-1]}_rowRange(e,t){null==t&&(t=e)
return{start:[Math.min(e,t),0],end:[Math.max(e,t),this._tableSize()[1]]}}_colRange(e,t){null==t&&(t=e)
const n=Math.min(e,t),a=Math.max(e,t)
return{start:[0,n],end:[this._tableSize()[0],a]}}selectRows(e,t){const{start:n,end:a}=this._rowRange(e,t)
this.setMultiIndices({start:n,end:a})}selectCols(e,t){const{start:n,end:a}=this._colRange(e,t)
this.setMultiIndices({start:n,end:a})}renameTable(e){this.saveMultiSelect({selection:{cid:this.getTableItemCid(),start:0,end:0}})
this.props.renameTable(this.props.index,e)}_canDeleteTable(){return null!=this.props.deleteHandler}_setFormula(e,t){this.setMultiEditing({editing:!0,text:e,selection:{cid:`${this.props.cid}-formula-box`,start:t,end:t}})}_showHoverCell(){this.state.hideHoverCell&&this.setState({hideHoverCell:!1})}_hasActiveCell(){return this.props.multiEditing}cellIndexFromCid(e){const t=new RegExp(`table-${this.props.cid}-(\\d+)-(\\d+)`).exec(e)
return null==t?null:[parseInt(t[1],10),parseInt(t[2],10)]}_multiSelectionBox(e=this.state.multiStartIndex,t=this.state.multiEndIndex){if(!this.isRealIndex(e)||!this.isRealIndex(t))return K.Z.indicesToCorners(e,t)
const n=K.Z.indicesToCorners(this._clampIndexToTable(e),this._clampIndexToTable(t))
let[a,i,r,s]=Array.from([n.minI,n.maxI,n.minJ,n.maxJ]),[o,l,c,d]=Array.from([-1,-1,-1,-1])
for(;o!==a||l!==i||c!==r||d!==s;){[o,l,c,d]=Array.from([a,i,r,s])
for(let e=a;e<=i;e++)for(let t=r;t<=s;t++){const n=this.props.computedTable[e][t]
if(null!=n&&null!=n.mergedBox){const{mergedBox:e}=n
a=Math.min(a,e.minI)
i=Math.max(i,e.maxI)
r=Math.min(r,e.minJ)
s=Math.max(s,e.maxJ)}}}return{minI:a,maxI:i,minJ:r,maxJ:s}}_mergedBoxesInMultiSelection(e){let t,n,a,i;({minI:a,maxI:t,minJ:i,maxJ:n}=null==e?this._multiSelectionBox():this._multiSelectionBox(e.start,e.end))
const r=[]
for(let e=a;e<=t;e++)for(let t=i;t<=n;t++){const n=this.props.computedTable[e][t]
null!=n&&null!=n.mergedBox&&n.mergedBox.minI===e&&n.mergedBox.minJ===t&&r.push(n.mergedBox)}return r}_mergedBoxesOverlapping(e,t,n){const a=this._mergedBoxesInMultiSelection(n)
let[i,r,s,o]=Array.from([e,e,t,t])
const l=a.slice().sort(((e,t)=>K.Z.rowCmpMergedBoxes(e,t))),c=a.slice().sort(((e,t)=>K.Z.colCmpMergedBoxes(e,t)))
for(e=0;e<a.length;e++){const t=l[e],n=l[a.length-e-1],d=c[e],u=c[a.length-e-1]
n.minI<=i&&i<=n.maxI&&(i=Math.min(i,n.minI))
t.minI<=r&&r<=t.maxI&&(r=Math.max(r,t.maxI))
u.minJ<=s&&s<=u.maxJ&&(s=Math.min(s,u.minJ))
d.minJ<=o&&o<=d.maxJ&&(o=Math.max(o,d.maxJ))}return{overMinI:i,overMaxI:r,overMinJ:s,overMaxJ:o}}_findClosestIndexInDirection(e,t,n,a,i){let[r,s]=Array.from(e)
const[o,l]=Array.from(n),[c,d]=Array.from(a),{overMinI:u,overMaxI:m,overMinJ:p,overMaxJ:h}=this._mergedBoxesOverlapping(r,s,i),[E,S,T,g]=Array.from([u,m,p,h])
switch(t){case"up":[r,s]=Array.from([E-1,s])
r<o&&(r=E)
break
case"down":[r,s]=Array.from([S+1,s])
r>c&&(r=S)
break
case"left":[r,s]=Array.from([r,T-1])
s<l&&(s=T)
break
case"right":[r,s]=Array.from([r,g+1])
s>d&&(s=g)}return[r,s]}_findClosestIndexInDirectionTabbed(e,t,n,a,i){let[r,s]=Array.from(e),[o,l]=Array.from(n),[c,d]=Array.from(a)
const{minI:u,maxI:m,minJ:p,maxJ:h}=this._multiSelectionBox(n,a);[o,l]=Array.from([u,p]);[c,d]=Array.from([m,h])
switch(t){case"left":[r,s]=Array.from([r,s-1])
for(;!K.Z.isRenderedInRegion(r,s,this.props.computedTable[r][s],[o,l],[c,d]);)if(s>l)[r,s]=Array.from([r,s-1])
else{if(!(r>o)){[r,s]=Array.from([c,d])
break}[r,s]=Array.from([r-1,d])}break
case"right":[r,s]=Array.from([r,s+1])
for(;!K.Z.isRenderedInRegion(r,s,this.props.computedTable[r][s],[o,l],[c,d]);)if(s<d)[r,s]=Array.from([r,s+1])
else{if(!(r<c)){[r,s]=Array.from([o,l])
break}[r,s]=Array.from([r+1,l])}}return[r,s]}_findUnmergedCell(e){const[t,n]=Array.from(e),a=this.props.computedTable[t][n]
return null!=a&&null!=a.mergedBox?[a.mergedBox.minI,a.mergedBox.minJ]:[t,n]}_moveCellActualIndex(e,t,n,a,i,r){if("none"===a)return e
let[s,o]=Array.from(e),[l,c]=Array.from(t),[d,u]=Array.from(n)
l>d&&([l,d]=Array.from([d,l]))
c>u&&([c,u]=Array.from([u,c]));[s,o]=i?Array.from(this._findClosestIndexInDirectionTabbed(e,a,[l,c],[d,u])):Array.from(this._findClosestIndexInDirection(e,a,[l,c],[d,u],r))
return[s,o]}moveCell(e,t,n,a,i,r){const s=this._moveCellActualIndex(e,t,n,a,i,r)
return{newIndex:this._findUnmergedCell(s),newActualIndex:s}}_handleUpdateCellData(e,t,n){const a={...E.default.omit(this.props.table.table[e][t],"error","typedValue"),...n},i=(0,s.ZP)(this.props.table,(n=>{n.table[e][t]=a}))
this.props.updateHandler(this.props.index,{table:i})}shouldShowGhostCells(){return!!(this.canModifyDims()&&this.props.canAddRemoveColumns&&this.props.canAddColumnsFreeform)&&(this.hasMultiSelection()||this.props.isMaximized)}ghostCellsCount(){return K.Z.getColumnCount(this.props.table,this.shouldShowGhostCells())-this.props.table.table[0].length}getFillDownRenderBox(){if(null==this.getFillDownBox())return null
let{minI:e,maxI:t,minJ:n,maxJ:a}=this.getFillDownBox()
const{minI:i,maxI:r,minJ:s,maxJ:o}=this._multiSelectionBox()
if(i<=e&&e<=t&&t<=r&&s<=n&&n<=a&&a<=o)return null
if(e===i&&t===r)a>o?n=o+1:n<s&&(a=s-1)
else{(0,S.hu)(n===s&&a===o,"Expected filldown to be either vertical or horizontal")
t>r?e=r+1:e<i&&(t=i-1)}return{minI:e,maxI:t,minJ:n,maxJ:a}}_renderStickyHeader(){const{stickyHeaderPositioning:e}=this.state
return e?u.createElement("div",{ref:this.stickyHeaderRef,className:"mediocre-tableEditable-stickyHeader",style:{...this.state.stickyHeaderPositioning,paddingTop:void 0,visibility:this._isStickyHeaderVisible()?"visible":"hidden"}},this._renderTable({sliceStart:null,sliceEnd:null,headerOnly:!0})):null}_renderHeaderTR(e,t,n){var a,i
let r,s
this.hasMultiSelection()&&({minJ:r,maxJ:s}=this._multiSelectionBox())
const{column:o}=this._multiAxisDimSelection(),l=this._tableSize()[1]
return u.createElement(q.Z,{fileId:this.props.fileId,table:this.props.table,canAddRemoveColumns:this.props.canAddRemoveColumns,ghostCellsCount:this.ghostCellsCount(),isTableSelected:null!=o&&0===o[0]&&o[1]===l,maxJ:null!=s?s:null,minJ:null!=r?r:null,disableColumnLocking:this.props.disableColumnLocking,disableLegacyHeader:this.props.disableLegacyHeader,isLeftAlignColumnHeader:this.props.isLeftAlignColumnHeader,isLeftAlignRowHeader:this.props.isLeftAlignRowHeader,locked:this.props.locked,disableFormulas:this.props.disableFormulas,showExcessLabels:this.props.showExcessLabels,viewer:this.props.viewer,isProtected:this.props.isProtected,hideColumnHeaderIcons:this.props.hideColumnHeaderIcons,...n&&this._isStickyHeaderVisible()&&{stickyHeaderCells:!0,stickyTop:$.TABLE_FULL_TITLE_BAR_CLEARANCE-(null!==(i=null===(a=this.state.stickyHeaderPositioning)||void 0===a?void 0:a.paddingTop)&&void 0!==i?i:0)},sliceStart:e,sliceEnd:t,rowHeight:n?this.state.rowHeights[0]:null,getDisallowedColumnNames:this.props.getDisallowedColumnNames,getExtraContextMenuOptions:this.props.getExtraContextMenuOptions?e=>this.props.getExtraContextMenuOptions(e,this.setColumnConstraint):void 0,getSelectionRange:this.getSelectionRange,insertableColumnInfos:this.props.insertableColumnInfos,disableMaximizedTables:this.props.disableMaximizedTables,isMaximized:this.props.isMaximized,toggleIsMaximized:this.toggleIsMaximized,axisCellDragOverHandler:this.axisCellDragOverHandler,axisCellDragStartHandler:this.axisCellDragStartHandler,deleteColumns:this.deleteColumns,deleteTable:this._canDeleteTable()?this.deleteTable:null,finalizeAndExitEditMode:this.finalizeAndExitEditMode,insertColumnsLeft:this.insertColumnsLeft,insertColumnsRight:this.insertColumnsRight,renameColumn:this.renameColumn,setColumnConstraint:this.setColumnConstraint,toggleHeaderColHandler:this.toggleHeaderColHandler,...(0,N.sK)(this.props,"tableHeaderRow")})}_getRowProperties(e){var t,n,a,i,r,s,o
return{hasErrors:null===(t=this.props.errorRows)||void 0===t?void 0:t[e],hasUnsubmittedChanges:(null===(i=null===(a=null===(n=this.props.table.rowData)||void 0===n?void 0:n[e])||void 0===a?void 0:a.uiData)||void 0===i?void 0:i.hasUnsubmittedChanges)&&!(0,M.Z)(this.props.table._tableType),isOutdated:null!=this.props.staleRows&&this.props.staleRows.length>0&&this.props.staleRows.includes(e),archivePurpose:null===(o=null===(s=null===(r=this.props.table.rowData)||void 0===r?void 0:r[e])||void 0===s?void 0:s.uiData)||void 0===o?void 0:o.archivePurpose}}_renderTR(e,{sliceStart:t,sliceEnd:n,rowHeight:a}={sliceStart:null,sliceEnd:null}){var i
const r=this._hasActiveCell()&&null!=this.state.multiSelIndex?this.state.multiSelIndex[0]:null
let s,o,l,c
const d=null!=r&&e===r
let m=null,p=null,h=null,E=null
if(this.hasMultiSelection()){({minI:l,maxI:s,minJ:c,maxJ:o}=this._multiSelectionBox())
if(l<=e&&e<=s){m=c
p=o}const t=this.getRequiredMultiSelIndex()
t[0]===e&&(h=t[1])
this._hasActiveCell()||this.state.multiActive||e!==s||this._isTableLocked()||!this.props.enableFillDown&&this.props.disableFormulas||({fillDownSquareMouseDownHandler:E}=this)}let S=null,T=null,g=!1,f=!1,I=!1
const A=this.getFillDownRenderBox()
if(null!=A){({minI:l,maxI:s,minJ:c,maxJ:o}=A)
if(l-1<=e&&e<=s+1){S=c
T=o}I=l<=e&&e<=s
g=e===l||e===s+1
f=e===s||e===l-1}const{row:y}=this._multiAxisDimSelection(),_=this._tableSize()[0]
return u.createElement(G.Z,{...(0,N.sK)(this.props,e),calculateInView:!this.props.viewer&&void 0,key:e,fileId:this.props.fileId,tableNamespace:this.props.tableNamespace,getLastIndex:this.lastIndex,renderedLabel:this.getRenderedRowLabel(e),locked:this._isTableLocked(),isProtected:this.props.isProtected,canModifyDims:this.canModifyDims(),allowNoRows:K.Z.allowNoRows(this.props.table),i:e,row:this.props.table.table[e],evaluatedRow:this.props.computedTable[e],rowData:this.props.table.rowData?this.props.table.rowData[e]:null,rowState:this.props.rowStates?this.props.rowStates[e]:null,isHeaderRow:0===e&&this.props.table.headerRow,hasHeaderCol:this.props.table.headerCol,columnConstraints:this.props.table.columnConstraints,cellColors:null!=(null!=this.props.cellColors?this.props.cellColors[e]:void 0)?null!=this.props.cellColors?this.props.cellColors[e]:void 0:null,cellCid:this.cellCid,isLeftAlignRowHeader:this.props.isLeftAlignRowHeader,ghostCellsCount:this.ghostCellsCount(),rowProperties:this._getRowProperties(e),disableFormulas:this.props.disableFormulas,showExcessLabels:this.props.showExcessLabels,sliceStart:t,sliceEnd:n,rowHeight:a,getCopySelection:this._getCopySelection,getCopySelectionHTML:this._getCopySelectionHTML,clearSelection:this.deleteRangeHelper,deleteRows:this.canRemoveRows()?this.deleteRows:null,insertRowsAbove:this.insertRowsAbove,insertRowsBelow:this.insertRowsBelow,multiPasteHandler:this.multiPasteHandler,deleteTable:this._canDeleteTable()?this.deleteTable:null,getExtraAxisCellContextMenuOptions:this.props.getExtraRowAxisContextMenuOptions,getSelectionRange:this.getSelectionRange,isTableSelected:null!=y&&0===y[0]&&y[1]===_,toggleHeaderRow:this.props.disableLegacyHeader?void 0:this.toggleHeaderRow,numRows:this.props.table.table.length,lockedRowIndices:null!==(i=K.Z.lockedRowIndices(this.props.table))&&void 0!==i?i:[],fillMaxJ:T,fillMinJ:S,isFillDownBoxBottomEdge:f,isFillDownBoxTopEdge:g,isFilledDown:I,hasActiveCell:d,selectedJ:h,selectedMinJ:m,selectedMaxJ:p,expandToAndEditCell:this.expandToAndEditCell,storeState:this.saveMultiSelect,commitCell:this.updateCell,moveFromCell:this.moveFromCell,selectCell:this.selectCell,axisCellDragOver:this.axisCellDragOverHandler,axisCellDragStart:this.axisCellDragStartHandler,cellEnterHandler:this.cellEnterHandler,cellEscapeHandler:this.cellEscapeHandler,cellDragOver:this.cellDragOverHandler,cellDragStart:this.multiEditableMouseDownHandler,cellMouseMoveHandler:this.fillDownMouseMoveHandler,fillDownSquareMouseDownHandler:E,keyDownHook:this.hideHoverCell,selectorsEnabled:this.props.selectorsEnabled,openManageSelectorsModal:this.props.openManageSelectorsModal})}getHiddenInputCid(){return TableEditable.hiddenInputCid(this.props.cid)}getTableItemCid(){return null!=this.props.tableItemCid?this.props.tableItemCid:TableEditable.hiddenInputCid(this.props.cid)}selectTable(){this.props.selectTable?this.props.selectTable():this.props.requestSelection&&this.props.requestSelection({selection:{cid:this.getTableItemCid(),start:0,end:0}})}_tableContextMenuOptions(){return E.default.compact([!this.props.table._hideRename&&this.props.canRename&&{name:"Rename Table",click:this.openRenameTableModal}])}isFormulaBoxVisible(){return this.props.showFormulaBox&&!this.props.suppressTitleBar&&(this.hasMultiSelection()||this.props.isMaximized)&&this.props.computedTable[0].length>0}_renderAddRowTR(e){return this.shouldRenderAddRows()?u.createElement("tr",{key:"add-row-filler",className:r()({"invisible disabled":!e})},u.createElement("td",{onMouseDown:this.setIsInsertingRows,onDoubleClick:this._handleDoubleClickToAddRows,className:r()("mediocre-tableEditable-axisCell mediocre-tableEditable-addRowDraggerCell",{"u-no-mouse-target u-faded":!this.canAddRows()}),...(0,ie.Z)({component:"TableEditable",element:"rowDraggerCell"})},u.createElement(re.Z,{icon:"bars"}))):null}_renderColgroup(e,t){return u.createElement("colgroup",null,K.Z.mapColumns({ghostCellsCount:this.ghostCellsCount(),normalCellsCount:this.props.table.table[0].length,sliceStart:e,sliceEnd:t,mapLeadingCell:()=>u.createElement("col",{key:"colWidth-lead",style:{width:K.Z.firstColumnWidth(this.props.table)}}),mapNormalCell:e=>u.createElement("col",{"data-id":e,key:`colWidth-${e}`,style:{width:this.props.table.widths[e]}}),mapGhostCell:e=>u.createElement("col",{key:`colWidth-${this.props.table.widths.length+e}`,style:{width:fe}})}))}getSliceWidthPx(e,t){return K.Z.tableWidth(this.props.table,this.shouldShowGhostCells(),{sliceStart:e,sliceEnd:t})}_renderFormulaBox(){var e,t,n
if(!this.isFormulaBoxVisible())return null
const a=u.createElement(z.Z,{fileId:this.props.fileId,tableNamespace:this.props.tableNamespace,getLastIndex:this.lastIndex,disableFormulas:this.props.disableFormulas,hasRealSelection:this.hasRealSelection(),multiSelIndex:this.state.multiSelIndex,columnConstraints:this.props.table.columnConstraints,cid:this.props.cid,error:this._getError(),mouseDownHandler:this._handleTableControlsMouseDown,cellEnterHandler:this.cellEnterHandler,cellEscapeHandler:this.cellEscapeHandler,additionalButtons:this.props.renderAdditionalFormulaBoxButtons?this.props.renderAdditionalFormulaBoxButtons(this.hasRealSelection()?this._multiSelectionBox():null):void 0,additionalFunctions:this.props.additionalFunctions,additionalSettings:this.props.additionalSettings,createSelectedCellsUpdate:this._createSelectedCellsUpdate,onFunctionClick:this.handleFunctionClicked,onFormulaFocus:this.formulaFocusHandler,openSetSelectorModal:this.openSetSelectorModalAndFinalize,openSetPrecisionModal:this.openSetPrecisionModalAndFinalize,mergeHandler:this.supportsMerge()?this.mergeHandler:void 0,setSelectionFormatting:this.setSelectionFormatting,selectorsEnabled:this.props.selectorsEnabled,openInsertLinkModal:this.openInsertLinkModal,linkButtonDisabled:this.linkButtonDisabled(),formatting:{bold:this.getSelectionFormatting("bold"),italic:this.getSelectionFormatting("italic"),underline:this.getSelectionFormatting("underline"),strikethrough:this.getSelectionFormatting("strikethrough"),align:this.getSelectionFormatting(((e,t)=>K.Z.alignCell(e,t)),"left"),link:null!=__guard__(this.getSelectionLink(),(e=>e.url)),foregroundColor:this.getSelectionFormatting("foregroundColor",""),backgroundColor:this.getSelectionFormatting("backgroundColor",""),important:this.getSelectionFormatting("important"),scientificNotation:this.getSelectionFormatting("scientificNotation"),merge:this._mergeButtonFormatting(),datetime:this._isSelectionOnlyDatetimeCells()},locked:this._isCellSelectionEditingLocked(),rowMetadata:this.state.multiSelIndex&&null!==(n=null===(t=null===(e=this.props.table.rowData)||void 0===e?void 0:e[this.state.multiSelIndex[0]])||void 0===t?void 0:t.rowMetadata)&&void 0!==n?n:null})
return u.createElement("div",{className:"mediocre-tableEditable-formulaBox"},a)}_renderHeaderControls(){return this.props.viewer?null:"function"==typeof this.props.headerControls?this.props.headerControls({multiSelectionBox:this.hasMultiSelection()?this._multiSelectionBox():null,computedTable:this.props.computedTable}):this.props.headerControls}_shouldRenderCollapserChevron(){return!this.props.forceCollapsed&&!this.props.isMaximized&&(!this.props.isExpanded||this.props.isCollapsible)}_renderTitleBarVariant(){return this.props.suppressTitleBar?null:u.createElement(le.E.Provider,{value:{isTableInitiallyCollapsed:this.props.isCollapsedInitially}},this.props.isExpanded?this._renderFullTitleBar():this._renderCollapsedTitleBar())}_renderToolTipText(){let e="";(0,S.Gp)(!this.props.table.nameTooltip||!this.props.tableStatus,"Expected tooltip text to not be set while the table has a status")
if(this.props.table.nameTooltip)return this.props.table.nameTooltip
if((0,M.Z)(this.props.table._tableType))e=""
else switch(this.props.tableStatus){case $.TableIndicatorStatus.ERROR:e="Some values with error"
break
case $.TableIndicatorStatus.UNSUBMITTED_CHANGES:e="Some values not submitted"
break
case $.TableIndicatorStatus.ROWS_ARCHIVED:e="Some values archived"
break
case $.TableIndicatorStatus.TABLE_OR_SCHEMA_ARCHIVED:e="Table or required schemas archived"
break
case $.TableIndicatorStatus.OUT_OF_DATE:e="Some values out of date"
break
default:e=""}return e}_renderFullTitleBar(){var e,t,n,a,i
let s=null
this.props.table.metadata&&"schemas"in this.props.table.metadata&&(s=null===(e=this.props.table.metadata.schemas[0])||void 0===e?void 0:e.name)
return u.createElement("div",{className:r()("mediocre-tableEditable-titleBarWrapper",{"mediocre-tableEditable-titleBarWrapper--sticky":this._isStickyHeaderVisible()}),style:{top:this._isStickyHeaderVisible()?$.FORMULA_BOX_HEIGHT-(null!==(n=null===(t=this.state.stickyHeaderPositioning)||void 0===t?void 0:t.paddingTop)&&void 0!==n?n:0)-1:void 0},ref:this.tableTitleBarRef},this._isStickyHeaderVisible()&&null!=this.state.stickyHeaderPositioning&&u.createElement("div",{className:"mediocre-tableEditable-titleBarWrapper-backdrop",style:{width:this.state.stickyHeaderPositioning.width,left:this.state.stickyHeaderPositioning.left-(null!==(i=null===(a=this.tableTitleBarRef.current)||void 0===a?void 0:a.getBoundingClientRect().left)&&void 0!==i?i:0)}}),!this.props.isMaximized&&this._renderFormulaBox(),u.createElement(V.Z,{rightHeaderControls:this._renderHeaderControls(),onHeaderControlsMouseDown:this._handleTableControlsMouseDown,icon:this.props.icon,schemaName:s,isTableExpanded:!0,leftHeaderControls:this.props.leftHeaderControls,tableIndentationPx:this._indentationPx(),tableTypeLabel:this.props.tableLabel,tableName:this.props.table.renderedName||this.props.table.name,onOpenContextMenu:this.openTableContextMenu,onTitleBarClick:this._handleTableSelected,onTableNameRefChanged:this.setTableNameRef,onToggleCollapsed:this._toggleCollapsed,shouldRenderCollapserChevron:this._shouldRenderCollapserChevron(),usePointerCursor:this._shouldShowTitlePointer(),tooltipText:this._renderToolTipText(),shouldIncreaseCollapserSpacing:this.props.isNestedInParentComponent,dataTestAttrs:{component:"TableEditable",element:"titleBar"},status:(0,M.Z)(this.props.table._tableType)||null==this.props.tableStatus?$.TableIndicatorStatus.NO_STATUS:this.props.tableStatus,...(0,N.sK)(this.props,"name")}),this.props.isMaximized&&this._renderFormulaBox())}_renderCollapsedHeaderControls(){const e=null==this.props.forceRowCount?this.props.table.table.length:this.props.forceRowCount
return u.createElement(w.Z,{rowsCount:e,collapsedHeaderControls:this.props.collapsedHeaderControls})}_shouldShowTitlePointer(){return Boolean(!this.props.forceCollapsed&&(null!=this.props.requestSelection||this.props.isCollapsible))}_renderCollapsedTitleBar(){var e;(0,S.hu)(this.props.isCollapsible,"Expected table to be collapsible");(0,S.hu)(!this.props.isMaximized,"Expected table not to be maximized")
let t=null
this.props.table.metadata&&"schemas"in this.props.table.metadata&&(t=null===(e=this.props.table.metadata.schemas[0])||void 0===e?void 0:e.name)
return u.createElement("div",{className:"mediocre-tableEditable-titleBarWrapper",...(0,ie.Z)({component:"TableEditable",element:"titleBar"})},u.createElement(V.Z,{rightHeaderControls:this._renderCollapsedHeaderControls(),onHeaderControlsMouseDown:this._handleTableControlsMouseDown,icon:this.props.icon,schemaName:t,isTableExpanded:!1,useRoundedBottomBorder:!0,tableIndentationPx:this._indentationPx(),tableTypeLabel:this.props.tableLabel,tableName:this.props.table.renderedName||this.props.table.name,shouldRenderCollapserChevron:this._shouldRenderCollapserChevron(),usePointerCursor:this._shouldShowTitlePointer(),tooltipText:this._renderToolTipText(),onOpenContextMenu:this.openTableContextMenu,onTitleBarClick:this._handleTableSelected,onTableNameRefChanged:this.setTableNameRef,onToggleCollapsed:this._toggleCollapsed,status:(0,M.Z)(this.props.table._tableType)||null==this.props.tableStatus?$.TableIndicatorStatus.NO_STATUS:this.props.tableStatus,shouldIncreaseCollapserSpacing:this.props.isNestedInParentComponent,isTableHeaderFaded:this.props.isTableHeaderFaded,...(0,N.sK)(this.props,"name")}))}_renderTable({sliceStart:e,sliceEnd:t,isAffixed:n=!1,headerOnly:a=!1,ref:i}){if(!this.props.isExpanded)return null
const s=!n&&!a
return u.createElement("table",{ref:i,className:r()("mediocre-tableEditable-table",{"mediocre-tableEditable-table--main":s,"mediocre-tableEditable-table--affixed":n,"header-row":this.props.table.headerRow,"header-col":this.props.table.headerCol}),style:{width:this.getSliceWidthPx(e,t),top:n&&!this.props.isMaximized?this._headerHeight()+$.TABLE_PADDING:void 0},...s?(0,ie.Z)({component:"TableEditable",element:"table"}):{"aria-hidden":"true"}},this._renderColgroup(e,t),u.createElement("tbody",null,this._renderHeaderTR(e,t,n),!a&&this.props.table.table.map(((a,i)=>this._renderTR(i,{sliceStart:e,sliceEnd:t,rowHeight:n?this.state.rowHeights[i+1]:null})))),!a&&u.createElement("tfoot",null,this._renderAddRowTR(null==e)))}_headerHeight(){return this.props.suppressTitleBar?0:$.TABLE_HEADER_HEIGHT}_renderTableBorder(){const e=K.Z.tableWidth(this.props.table,this.shouldShowGhostCells())
return u.createElement("div",{className:"mediocre-tableEditable-border multi-editable",style:{left:this._getEditorMarginOffset()+this._indentationPx()-$.TABLE_SELECTION_PADDING,top:-this._headerHeight()-$.TABLE_SELECTION_PADDING,bottom:$.TABLE_PADDING-$.TABLE_SELECTION_PADDING,width:e+2*$.TABLE_SELECTION_PADDING,minWidth:this.state.headerWidth+2*$.TABLE_SELECTION_PADDING}})}_getPrintableLayoutWidth(){return this._indentationPx()+K.Z.tableWidth(this.props.table,this.shouldShowGhostCells())+2*$.TABLE_PADDING}_getEditorMarginOffset(){return this.props.editorMarginOffset?this.props.editorMarginOffset():defaultEditorMarginOffset()}_isStickyHeaderVisible(){return this.state.canShowStickyHeader&&this.hasMultiSelection()}render(){return u.createElement("div",{className:r()("mediocre-tableEditable printable-container-scaleForPrint",{"hide-hover":this.state.hideHoverCell}),"data-index":this.props.index,"data-subindex":"cell","data-formattable":!0,"data-printable-layout-width":this._getPrintableLayoutWidth(),...(0,ie.Z)(this.props.dataTestAttrs?this.props.dataTestAttrs:{component:"TableEditable",element:"root"})},T.ZP.ELN_ENABLE_TABLE_STICKY_HEADER&&u.createElement(Te.Z,{tableName:this.tableNameRef,verticalScrollContainer:this.verticalScrollContainer,horizontalScrollContainer:this.horizontalScrollContainerRef.current,stickyHeader:this.stickyHeaderRef.current,table:this.tableRef.current,headerRowHeight:this.state.rowHeights[0],canShowStickyHeader:this.state.canShowStickyHeader,setCanShowStickyHeader:this.setCanShowStickyHeader,stickyHeaderPositioning:this.state.stickyHeaderPositioning,setStickyHeaderPositioning:this.setStickyHeaderPositioning}),u.createElement("div",null,this.props.selectorsEnabled?u.createElement(D.Z,{open:this.state.showSetSelectorModal,onRequestClose:this.closeSetSelectorModal,selectorsLink:this.props.selectorsLink,setSelector:this.setSelectionSelector}):void 0,this.state.showSetPrecisionModal&&u.createElement(j.ZP,{open:!0,onRequestClose:this.closeSetPrecisionModal,precisionLink:{value:this.getSelectionPrecision(),requestChange:this._isCellSelectionEditingLocked()?void 0:this.setSelectionPrecision}}),u.createElement(se.Z,{open:this.state.showInsertLinkModal},u.createElement(R.Z,{open:this.state.showInsertLinkModal,initialText:__guard__(this.getSelectionLink(),(e=>e.text)),initialUrl:__guard__(this.getSelectionLink(),(e=>e.url)),setLinkAndClose:this.setLinkAndClose,fileId:this.props.fileId})),u.createElement(se.Z,{open:this.state.showRenameTableModal},u.createElement(Q.Z,{open:this.state.showRenameTableModal,fileId:this.props.fileId,isCurrentlyExpanded:this.props.isExpanded,initialTableName:this.props.table.name,setTableNameAndClose:this.setTableNameAndClose,isTableNameUsed:this.props.isTableNameUsed}))),this.renderFocusBearer(),u.createElement("div",{ref:this.hiddenInputRef,className:"hiddenFocusEditable editable hiddenFocusEditable--fullTable","data-cid":this.getHiddenInputCid(),"data-index":this.props.index,"data-subindex":"table","data-formattable":!0,contentEditable:!0,onKeyDown:this.hiddenKeyDownHandler,onCopy:this.hiddenCopyHandler,onCut:this.hiddenCutHandler},null),this._renderTitleBarVariant(),u.createElement("div",{className:"u-position-relative mediocre-tableEditable-scrollAreaWrapper",style:this.props.isMaximized?{}:{marginLeft:-this._getEditorMarginOffset(),marginRight:-this._getEditorMarginOffset()}},this.state.isAffixed&&!this.props.isMaximized&&this._renderTable({sliceStart:null,sliceEnd:K.Z.getAffixedColumnCount(this.props.table),isAffixed:!0}),u.createElement("div",{ref:this.horizontalScrollContainerRef,...(0,ie.Z)({component:"TableEditable",element:"horizontalScroll"}),className:r()("mediocre-tableEditable-scrollArea",{"mediocre-tableEditable-scrollArea--collapsed":!this.props.isExpanded}),onMouseMove:this.scrollAreaMouseMoveHandler,onMouseDown:this.scrollAreaMouseDownHandler,onScroll:this._handleHorizontalScroll,style:{paddingTop:this.props.isMaximized?0:this._headerHeight()+$.TABLE_PADDING}},u.createElement("div",{className:r()("mediocre-tableEditable-tableWrapper",{"mediocre-tableEditable-tableWrapper--activeCell":this._hasActiveCell(),"mediocre-tableEditable-tableWrapper--compact":this.props.isCompactBottomSpacing,"mediocre-tableEditable-tableWrapper--fillDown":this.isFillDownActive()&&!this.isFillDownInvalid(),"mediocre-tableEditable-tableWrapper--fillDownInvalid":this.isFillDownInvalid()}),onMouseMove:this.mouseMoveHandler,onMouseOver:this.props.locked?void 0:this.mouseOverHandler,onMouseDown:this.props.locked?void 0:this.mouseDownHandler,style:{paddingLeft:this._getEditorMarginOffset()+this._indentationPx()}},this._renderTableBorder(),u.createElement("div",{className:"mediocre-tableEditable-flexBoxWrapper"},this._renderTable({sliceStart:null,sliceEnd:null,isAffixed:!1,ref:this.tableRef}),!this.props.isMaximized&&this._renderStickyHeader(),this.props.isExpanded&&u.createElement("div",{className:"mediocre-tableEditable-fillerTableWrapper",style:{marginRight:this._getEditorMarginOffset()+$.TABLE_PADDING}},u.createElement("table",{className:"mediocre-tableEditable-fillerTable",style:{display:this.props.viewer?"none":void 0}},u.createElement("tbody",null,(()=>(this.shouldRenderAddRows()?this.state.rowHeights.slice(0,-1):this.state.rowHeights).map(((e,t)=>u.createElement("tr",{style:{height:e},key:t},u.createElement("td",null)))))()))),!this.props.locked&&!this.isFillDownActive()&&this.props.isExpanded&&u.createElement(x.Z,{minSize:20,widths:this.props.table.widths,setColumnWidth:this.setColumnWidth})),!this.props.locked&&this.state.isInsertingRows&&u.createElement(B.Z,{tableContainerSelector:".mediocre-tableEditable-scrollArea",addRows:this.handleAddBlankRowsFromDragHandle,initialNumRows:this.props.table.table.length,initialNumColumns:this.props.table.table[0].length,maxTotalRows:this.props.table.maxRows,messageOverlayDuringResize:this.props.messageOverlayDuringResize})))),this.props.viewer&&(this.props.unsaved||this.state.multiEditing)?u.createElement("div",null,u.createElement("span",{style:{fontWeight:700}},"Note: "),u.createElement("span",null,"Changes made to this table will not be saved. "),this.props.unsaved?u.createElement("a",{onClick:this.props.resetHandler},"Reset changes."):void 0):void 0)}linkButtonDisabled(){const e=this.state.multiStartIndex,t=this.state.multiEndIndex
return!(null!=e&&null!=t&&0===this.compareIndex(e,t))}_getError(){var e
if(!this.hasRealSelection())return null
const t=this.getRequiredMultiSelIndex()
return null===(e=this.props.computedTable[t[0]][t[1]])||void 0===e?void 0:e.error}_getScrollArea(){return m.findDOMNode(this.horizontalScrollContainerRef.current)}scrollBy(e,t){if(!this._isMounted||0===e&&0===t)return
const n=this._getScrollArea()
l()(n).stop().animate({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t},{complete:this._scrollCompleteHandler,duration:200})}_containsMergedRegion({minI:e,maxI:t,minJ:n,maxJ:a}){for(let i=e;i<=t;i++)for(let e=n;e<=a;e++)if(null!=this.props.computedTable[i][e]&&null!=this.props.computedTable[i][e].mergedBox)return!0
return!1}_expandSelectionIndex(e,t){const[n,a]=Array.from(e),[i,r]=Array.from(this._tableSize())
return(()=>{switch(t){case ye:return e
case Ie:return[n,r]
case Ae:return[i,a]
default:return e}})()}_multiAxisDimSelection(){const{multiStartIndex:e,multiEndIndex:t}=this.state
if(null==e&&null==t)return{}
const{minI:n,maxI:a,minJ:i,maxJ:r}=this._multiSelectionBox(),[s,o]=Array.from(this._tableSize())
return{row:0===i&&r===o?[n,a]:void 0,column:0===n&&a===s?[i,r]:void 0}}_cellBox(e,t){const n=this._getScrollArea()
return __guard__(l()(n).find(`[data-cid='${this.cellCid(e,t)}']`)[0],(e=>e.getBoundingClientRect()))}scrollUpdateIntoView(e){let t,n
if(!this.hasMultiSelection())return
if(this.state.multiActive===$.TABLE_SELECTION_ROW)return
const hasChanged=t=>null==e[t]||0!==this.compareIndex(this.state[t],e[t])
if(hasChanged("multiSelIndex"))[t,n]=Array.from(this.getRequiredMultiSelIndex())
else{if(!hasChanged("multiEndIndex"))return;[t,n]=Array.from(this.state.multiEndIndex)}this.isRealIndex([t,n])&&([t,n]=Array.from(this._findUnmergedCell(this._clampIndexToTable([t,n]))))
this._scrollCellIntoView([t,n])}_scrollCellIntoView(...e){if(!this._isMounted)return
let t,n
const[a,i]=Array.from(e[0]),r=this._getScrollArea().getBoundingClientRect(),s=this._cellBox(a,i)
if(null!=s){t=s.left<r.left?s.left-r.left-30:s.right>r.right?s.right-r.right+30:0
n=s.top<r.top?s.top-r.top-30:s.bottom>r.bottom?s.bottom-r.bottom+30:0
this.scrollBy(t,n)}}_clampIndexToTable(e){const t=this.props.table.table.length,n=this.props.table.table[0].length
return[(0,a.uZ)(0,t-1,e[0]),(0,a.uZ)(0,n-1,e[1])]}}TableEditable.propTypes={leftHeaderControls:d().node,collapsedHeaderControls:d().node,fileId:d().string.isRequired,cid:d().oneOfType([d().string,d().number]),updateHandler:d().func.isRequired,mouseDownHandler:d().func,mouseOverHandler:d().func,moveHandler:d().func,requestSelection:d().func,selectTable:d().func,isParentLockedWithEditWarn:d().func,getEditWhileCellLockedWarning:d().func,editWhileTableLockedWarning:d().string,tableNamespace:d().string.isRequired,table:$.table.isRequired,computedTable:d().array.isRequired,showExcessLabels:d().bool.isRequired,cellColors:d().object,additionalFunctions:d().arrayOf(d().shape({name:d().string.isRequired,asyncOnClick:d().func.isRequired}).isRequired),additionalSettings:d().arrayOf(d().shape({name:d().string.isRequired,applySettingToSelection:d().func.isRequired}).isRequired),renderAdditionalFormulaBoxButtons:d().func,showFormulaBox:d().bool.isRequired,icon:d().string,index:d().number.isRequired,indentation:d().number.isRequired,deleteHandler:d().func,canAddRemoveColumns:d().bool.isRequired,deleteRows:d().func,deleteColumns:d().func.isRequired,insertRowsAbove:d().func.isRequired,insertRowsBelow:d().func.isRequired,insertColumnsLeft:d().func.isRequired,insertColumnsRight:d().func.isRequired,renameTable:d().func.isRequired,isTableNameUsed:d().func.isRequired,mergeRegion:d().func,unmergeRegion:d().func,disableFormulas:d().bool.isRequired,enableFillDown:d().bool,insertableColumnInfos:d().arrayOf($.insertableColumnInfo.isRequired),tableItemCid:d().string,lookUpTableNameWithActiveEdit:d().func.isRequired,tryInsert:d().func.isRequired,canInsert:d().func.isRequired,setMultiEditingForTable:d().func.isRequired,multiEditing:d().bool.isRequired,selectorsEnabled:d().bool.isRequired,selectorsLink:d().shape({value:d().array.isRequired,requestChange:d().func,selectorUsageCounts:d().object.isRequired}).isRequired,openManageSelectorsModal:d().func.isRequired,setMaximizedTable:d().func.isRequired,isMaximized:d().bool.isRequired,disableMaximizedTables:d().bool.isRequired,editorMarginOffset:d().func,viewer:d().bool.isRequired,headerControls:d().oneOfType([d().node,d().func]),isCollapsible:d().bool.isRequired,forceCollapsed:d().bool.isRequired,forceRowCount:d().number,isCompactBottomSpacing:d().bool.isRequired,isExpanded:d().bool.isRequired,isLeftAlignColumnHeader:d().bool,isLeftAlignRowHeader:d().bool,getExtraContextMenuOptions:d().func,getDisallowedColumnNames:d().func,hasPlaceholderRows:d().bool.isRequired,disableLegacyHeader:d().bool.isRequired,canAttachFileToCell:d().func.isRequired,convertFileToCellData:d().func,storeState:d().func,restoreState:d().func,metadataForRestore:d().object,isNestedInParentComponent:d().bool,isTableHeaderFaded:d().bool,dataTestAttrs:ae.C,staleRows:d().array,tableStatus:d().string,errorRows:d().array}
TableEditable.tableMultiSelectKey=tableMultiSelectKey
TableEditable.defaultProps=Ce
const Ne=TableEditableConnector.connect(TableEditable,{throttleUpdates:!0,shouldPropagateNextState:(e,t)=>!h()(e,t)})
function __guard__(e,t){return null!=e?t(e):void 0}},301358:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(764403),i=n.n(a),r=n(989526),s=n(686836)
function ErrorTrianglePopover(e){const t=Boolean(e.message)&&e.message.length>0
return r.createElement(s.Z,{renderContent:()=>r.createElement("div",null,r.createElement("div",{className:i()("label",e.labelClass,{"u-tiny-spacing-right":t})},e.title),t&&e.message)},e.children)}ErrorTrianglePopover.displayName="ErrorTrianglePopover"
const o=ErrorTrianglePopover},793900:(e,t,n)=>{n.d(t,{Mr:()=>m,UX:()=>u,ZP:()=>h})
var a=n(64558),i=n(250965),r=n.n(i),s=n(28366),o=n(547387),l=n(991346),c=n(6025),d=n(194170)
function _tokenize(e){let t,n,a
const i=c.getFormulaText(e)
if(null==i){n=""
a=[]
t=e}else{n="="
try{a=l.ZP.tokenize(i)
t=""}catch(e){if(e instanceof c.FormulaTokenizeError)({tokens:a,leftover:t}=e)
else{a=[]
t=i}}}return{prefix:n,tokens:a,leftover:t}}var u
!function(e){e.ENABLE="ENABLE"
e.DISABLE="DISABLE"
e.DETECT="DETECT"}(u||(u={}))
const m="cell-insert-placeholder"
class CellInsertVisitor{constructor(e,t,n,a){var i,r
this.targetReplaceCell=null
const s=t?p.tryInsert(e,e,n,{index:[0,0],start:t.start,end:t.end,cid:t.cid,shift:!1}):null
this.cellRefStart=null!==(i=null==s?void 0:s.replaced.start)&&void 0!==i?i:null
this.cellRefEnd=null!==(r=null==s?void 0:s.replaced.end)&&void 0!==r?r:null
if(a===u.DISABLE||a===u.DETECT&&this.cellRefEnd!==this.cellRefStart){this.cellRefEnd=null
this.cellRefStart=null}}visitPrefix(e,t,n){this.cellRefStart===this.cellRefEnd&&this.cellRefStart===e.length&&t.append(this.makeCellInsertPlaceholder())}visitToken(e,t,n){const a=n,i=a+e.text.length
this.cellRefEnd===this.cellRefStart?this.cellRefStart===i&&t.append(this.makeCellInsertPlaceholder()):this.cellRefEnd===i&&this.cellRefStart===a&&this.makeCellInsertReplace(t)
this.cellRefEnd===i&&(this.targetReplaceCell=e.node instanceof s.Cell?e.node.id:e.node instanceof s.CellRange?e.node.end:null)}visitLeftover(e,t,n){}getState(){return null==this.cellRefStart&&null==this.cellRefEnd?null:{target:this.targetReplaceCell}}addCellInsertTooltip(e){e.attr("data-toggle","tooltip")
e.attr("data-html","true")
e.attr("title",'Use the mouse or arrow keys to reference cell(s). Tap <kbd style="scale:0.9">Ctrl</kbd> to toggle the behavior.')}makeCellInsertPlaceholder(){const e=r()("<span></span>")
e.addClass(m)
this.addCellInsertTooltip(e)
return e}makeCellInsertReplace(e){e.addClass("cell-insert-existing")
this.addCellInsertTooltip(e)}}class SyntaxHighlightVisitor{constructor(e){this.cellColors={}
this.assigned={}
this.pos=0
this.tableName=e}getState(){return this.cellColors}visitPrefix(e,t,n){}visitToken(e,t,n){if(e.isASTNode())if(e.node instanceof s.FunctionOperator)t.css({fontWeight:700})
else if(e.node instanceof s.Cell||e.node instanceof s.CellRange){this.assigned[e.text]||(this.assigned[e.text]=function _cellColor(e){return"cell-highlight-"+e%5}(this.pos++))
const n=this.assigned[e.text]
t.addClass(n)
for(const{row:t,column:a,table:i}of Array.from(e.node.dependencies())){let e=i
null==e&&(e=this.tableName)
null==this.cellColors[e]&&(this.cellColors[e]={})
null==this.cellColors[e][t]&&(this.cellColors[e][t]={})
this.cellColors[e][t][a]=n}}else e.node instanceof s.Value&&e.node.typedValue.type===c.ValueType.STRING?t.addClass("cell-highlight-string"):e.node instanceof s.Value&&((0,d.dp)(e.node.typedValue)||(0,d.ZR)(e.node.typedValue))&&t.addClass("cell-highlight-value")}visitLeftover(e,t,n){e.startsWith('"')&&t.addClass("cell-highlight-string")}}const p={getFormattedFormula:(e,t,n,a=u.DETECT)=>{const i={cellInsert:new CellInsertVisitor(e,null!=n?n:null,t,a),syntaxHighlight:new SyntaxHighlightVisitor(e)},s=function traverseFormula(e,t){const n=r()("<div></div>"),span=e=>r()("<span></span>").text(e),{prefix:a,tokens:i,leftover:s}=_tokenize(e)
let o=0
if(a.length){const e=span(a)
for(const n of t)n.visitPrefix(a,e,o)
n.append(e)
o+=a.length}i.forEach((e=>{const a=span(e.text)
for(const n of t)n.visitToken(e,a,o)
n.append(a)
o+=e.text.length}))
if(null==s?void 0:s.length){const e=span(s)
for(const n of t)n.visitLeftover(s,e,o)
n.append(e)
o+=s.length}return n}(t,Object.values(i))
return{formulaHTML:s.html(),cellColors:i.syntaxHighlight.getState(),cellInsertLoc:i.cellInsert.getState()}},tryInsert:(e,t,n,{index:a,start:i,end:r,cid:o,shift:l})=>{const{prefix:d,tokens:u,leftover:m}=_tokenize(n),p={table:e===t?null:e,row:a[0],column:a[1]}
function makeFormula(e,t,a,i,r){const s=n.slice(0,e)+i,l=r+n.slice(t),c=e+i.length+a.length
return{formula:s+a+l,selection:{cid:o,start:c,end:c},replaced:{start:s.length,end:n.length-l.length}}}if("="!==d||i<d.length)return null
{let h=c.toCellReferenceTokenText(p)
if(0===u.length)return 0===(null==m?void 0:m.length)?makeFormula(d.length,d.length,h,"",""):null
{let E,S=d.length
function validPredecessor(e){return null==u[e]||(u[e].isSpace()?validPredecessor(e-1):u[e].isLeftParen()||u[e].isComma()||u[e].isASTNode()&&u[e].node instanceof s.BinaryOperator)}function validSuccessor(e){return null==u[e]?0===(null==m?void 0:m.length):u[e].isSpace()?validSuccessor(e+1):!u[e].isASTNode()||!(u[e].node instanceof s.FunctionOperator||u[e].node instanceof s.Value||u[e].isCellRef())}for(let T=0;T<u.length;T++){const g=u[T]
E=S+g.text.length
if(S<=i&&i<=r&&r<=E&&g.isCellRef()){if(l){let f=g.node instanceof s.Cell?g.node.id:(g.node,s.RelCellRange,g.node.start)
if((g.node.getTable()||t)===e){f=f.table===t?{...f,table:null}:f
h=f.row===p.row&&f.column===p.column?c.toCellReferenceTokenText(p):c.toCellRangeReferenceTokenText(f,p)}}return makeFormula(S,E,h,"","")}if(S===i)return validPredecessor(T-1)&&validSuccessor(T)?makeFormula(S,S,h,"",""):null
if(r<E){if(validPredecessor(T-1)&&g.isSpace()&&validSuccessor(T+1)){return makeFormula(S,E,h,g.text.slice(0,i-S),g.text.slice(r-S))}return null}S=E}return E===i&&i===r&&u&&validPredecessor(u.length-1)?makeFormula(E,E,h,"",""):null}}},updateCellReferencesForPaste:(e,t)=>{const{prefix:n,tokens:a}=_tokenize(e)
if("="===n){return n+a.map((e=>{if(e.node instanceof s.Cell){const n=e.node.id
n.table&&t[n.table]&&(n.table=t[n.table])
return c.toCellReferenceTokenText(n,e.node.locks)}if(e.node instanceof s.CellRange){const n=e.node,a=n.start,i=n.end
a.table&&t[a.table]&&(a.table=t[a.table])
i.table&&t[i.table]&&(i.table=t[i.table])
return c.toCellRangeReferenceTokenText(a,i,e.node.locks)}return e.text})).join("")}return e},canInsert:(e,t,{start:n,end:a,cid:i,shift:r})=>null!=p.tryInsert("SomeTable",e,t,{index:[0,0],start:n,end:a,cid:i,shift:r}),completeFunctionName(e,t){const n=_tokenize(e)
if("="===n.prefix){return`=${`${n.tokens.map((e=>e.text)).join("")}`}${t}(`}return`=${t}(`},moveCell({index:e,lastIndex:t,dir:n}){let[i,r]=e
const[s,o]=t
switch(n){case"up":i-=1
break
case"down":i+=1
break
case"left":r-=1
break
case"right":r+=1}i=(0,a.uZ)(0,s,i)
r=(0,a.uZ)(0,o,r)
return[i,r]},getScopedFunction(e,t){const n=_tokenize(e)
if("="!==n.prefix||n.tokens.length<2||t<=n.prefix.length)return null
let a=0
const i=[]
let r=n.prefix.length
for(const e of n.tokens){if(r>=t){if(i[i.length-1].isASTNode()&&e.isLeftParen()){i.push(e)
r+=e.text.length
a=-1}break}i.push(e)
r+=e.text.length}let l=0
for(let e=i.length-1;e>=0;e--){const t=i[e]
if(t.isRightParen())l++
else if(t.isLeftParen())l--
else if(0===l&&t.isComma())a++
else if(l<0&&t.isASTNode()&&t.node instanceof s.FunctionOperator){const e=(0,o.uf)(t.node.type)
return e?{function:e,currentParameterIndex:a}:null}}return null}},h=p},225378:(e,t,n)=>{n.d(t,{Z:()=>makeTableCSV})
var a=n(298801),i=n(717235)
function makeTableCSV({table:e,computedTable:t,headerRow:n,rowLabels:r,rowLabelHeader:s,includeCellValueModifiers:o,rowUiData:l}){const c=(0,a.Z)(e,t,null==o||o,n,r,s,l)
return i.VB(c,",")}},485345:(e,t,n)=>{n.d(t,{N:()=>setFormula,j:()=>setTypedValue})
var a=n(232606),i=n(787004),r=n(947730)
function setFormula({tableNamespace:e,tableName:t,formula:n,typedValue:s,editing:o,selection:l,cellInsertMode:c}){(0,a.Gp)(void 0!==s,"typedValue is required")
r.Z.dispatch({actionType:i.SHv,tableNamespace:e,tableName:t,formula:n,typedValue:s,editing:o,selection:l,cellInsertMode:c})}function setTypedValue(e){r.Z.dispatch({actionType:i.hae,typedValue:e})}},468047:(e,t,n)=>{n.d(t,{Z:()=>a})
const a=new class SpreadsheetEvalCache{constructor(){this.cachedTableMapByFileId={}
this.cachedComputedTablesByFileId={}}setValues(e,t,n){this.cachedTableMapByFileId[e]=t
this.cachedComputedTablesByFileId[e]=n}getCachedTableMap(e){return this.cachedTableMapByFileId[e]}getCachedComputedTables(e){return this.cachedComputedTablesByFileId[e]}evictValues(e){delete this.cachedTableMapByFileId[e]
delete this.cachedComputedTablesByFileId[e]}}},110341:(e,t,n)=>{n.d(t,{Z:()=>d})
var a=n(615439),i=n.n(a),r=n(787004),s=n(947730),o=n(391028),l=n(793900)
const c={}
class SpreadsheetStore extends o.Z{resetState(){this.activeNamespace=null
this.editingTable=null
this.formula=""
this.formulaHTML=""
this.typedValue=null
this.cellColors=c
this.selection=null
this.cellInsertLoc=null}getState(e){return e!==this.activeNamespace?{formula:"",formulaHTML:"",typedValue:null,cellColors:c,editingTable:null,selection:null,cellInsertLoc:null}:{formula:this.formula,formulaHTML:this.formulaHTML,typedValue:this.typedValue,cellColors:this.cellColors,editingTable:this.editingTable,selection:this.selection,cellInsertLoc:this.cellInsertLoc}}payloadHandler(e){switch(e.actionType){case r.SHv:this.selection=e.selection||null
this.activeNamespace=e.tableNamespace
this.editingTable=e.editing?e.tableName:null
this.typedValue=e.typedValue
if(null!=e.formula){const{formulaHTML:t,cellColors:n,cellInsertLoc:a}=l.ZP.getFormattedFormula(e.tableName,e.formula,this.selection,e.cellInsertMode)
this.formula=e.formula
this.formulaHTML=t
i()(n,this.cellColors)||(this.cellColors=n)
i()(a,this.cellInsertLoc)||(this.cellInsertLoc=a)}else this.resetState()
this.emitChange()
break
case r.hae:{const{typedValue:t}=e
this.typedValue=t
this.emitChange()
break}}return!0}}const d=new SpreadsheetStore(s.Z)},129047:(e,t,n)=>{n.d(t,{BX:()=>getSchemaFieldApiIdFromColumnConstraint,d9:()=>getSchemaFieldApiIdForColumn,iX:()=>getSchemaFieldApiIdsInTableSelection})
var a=n(337917)
function getSchemaFieldApiIdFromColumnConstraint(e,t=!0){if(null==e||!e.columnDefinition)return null
const{columnDefinition:n}=e
return n&&(0,a.rU)(n)&&(t||!(0,a.W6)(n))?n.tagSchemaFieldApiId:null}function getSchemaFieldApiIdForColumn(e,t,n=!0){return e?getSchemaFieldApiIdFromColumnConstraint(e[t],n):null}function getSchemaFieldApiIdsInTableSelection(e,t,n=!0){const a=[]
for(let i=t.minJ;i<=t.maxJ;i++){const t=getSchemaFieldApiIdForColumn(e.columnConstraints,i,n)
t&&a.push(t)}return a}},604448:(e,t,n)=>{n.d(t,{Z:()=>S,v:()=>E})
var a=n(602652),i=n.n(a),r=n(989526),s=n(840391),o=n(851422),l=n(194170),c=n(618068),d=n(621999),u=n(497790),m=n(114252),p=n(251808)
const{FIELD_TYPES:h}=u,E=[h.BATCH_LINK.type,h.ENTRY_LINK.type,h.BIOENTITY_LINK.type,h.PART_LINK.type,h.STORABLE_LINK.type,h.TRANSCRIPTION_LINK.type,h.TRANSLATION_LINK.type,h.SELECTOR.type,h.DATETIME.type,h.DATE.type]
class TagValueTypedValueInput extends r.Component{constructor(){super(...arguments)
this._handleSetTagValue=e=>{const t=p.l3(e.tagSchemaField.fieldType)
p.yS(t.type)&&!p.PB(e)||t===u.FIELD_TYPES.DATETIME&&!e.datetimeValue||t===u.FIELD_TYPES.DATE&&!e.dateValue?this.props.onSetCellData(e.value,{typedValue:null}):this.props.onSetCellData([u.FIELD_TYPES.DATETIME,u.FIELD_TYPES.DATE].includes(t)?"":e.value,{typedValue:(0,l.EK)(e)})}
this._handleUpdateControlledTagValue=e=>{this.props.onUpdateTypedValue((0,l.EK)(e))}}_getTagValue(e){if(null!=e){const t=(0,l.Lz)(e,this.props.schemaField)
if(t)return t}return p.bt(this.props.schemaField)}render(){const{onEscape:e,schemaField:t}=this.props,n=this._getTagValue(this.props.cell.typedValue)
if(E.includes(t.fieldType)){const t={...p.bt(this.props.schemaField),value:this.props.initialQuery}
return r.createElement(c.Z,{onBlur:this.props.onBlur,onEscape:e,onSetTagValue:this._handleSetTagValue,onTabKey:this.props.onTabKey,onUpdateTagValue:this._handleUpdateControlledTagValue,query:this.props.query||"",onUpdateQuery:this.props.onUpdateQuery,tagValue:(()=>this.props.typedValue?this._getTagValue(this.props.typedValue):this.props.initialQuery?t:n)(),autoFocus:this.props.autoFocus,isOutsideTable:this.props.isOutsideTable,areChipsClickable:this.props.areChipsClickable})}if(t.fieldType===h.BOOLEAN.type){const handleSetControlledTagValue=e=>{this.props.onUpdateTypedValue((0,l.EK)({...n,...e}))}
return r.createElement(m.Z,{onUpdate:handleSetControlledTagValue,defaultValue:n.booleanValue})}return r.createElement(r.Fragment,null,r.createElement(d.Z,{onEscape:e,onSetTagValue:this._handleSetTagValue,schemaField:t,tagValue:n}),r.createElement(s.Z,{tag:n}))}}TagValueTypedValueInput.propTypes={cell:o.cell.isRequired,initialQuery:i().string,query:i().string,typedValue:o.TYPED_VALUE_SHAPE,onBlur:i().func,onEscape:i().func.isRequired,onSetCellData:i().func.isRequired,onTabKey:i().func,onUpdateQuery:i().func.isRequired,onUpdateTypedValue:i().func.isRequired,schemaField:u.SCHEMA_FIELD_SHAPE.isRequired,autoFocus:i().bool,isOutsideTable:i().bool,areChipsClickable:i().bool}
const S=TagValueTypedValueInput},733754:(e,t,n)=>{n.d(t,{J$:()=>s,Qm:()=>a,ZP:()=>u})
var a,i=n(602652),r=n(531041)
!function(e){e.BOX="BOX"
e.DROPBOX="DROPBOX"
e.EGNYTE="EGNYTE"
e.GDRIVE="GDRIVE"
e.HOSTED_S3="HOSTED_S3"
e.ONEDRIVE="ONEDRIVE"}(a||(a={}))
const s={[a.BOX]:"box-color",[a.DROPBOX]:"dropbox",[a.EGNYTE]:"egnyte-color",[a.GDRIVE]:"google-drive-color",[a.ONEDRIVE]:"one-drive",[a.HOSTED_S3]:"aws"},o={id:i.string.isRequired,name:i.string.isRequired,accountType:i.oneOf(r.default.values(a)).isRequired},l=r.default.extend({},o,{accountId:i.string.isRequired,isFolder:i.bool.isRequired}),c=i.shape(r.default.extend({},l,{children:i.array})),d=i.shape(o),u={FILE:"FILE",FOLDER:"FOLDER",TFI_FILTER:"TFI_FILTER",ACCOUNT_TYPE:a,SYNC_STATUS:{NOT_STARTED:"NOT_STARTED",IN_PROGRESS:"IN_PROGRESS",COMPLETE:"COMPLETE",ERROR:"ERROR"},TFI_OBJECT_SHAPE:i.shape(l),TFI_FILE_SHAPE:i.shape(r.default.extend({},l,{modifiedAt:i.string.isRequired,revisionId:i.string.isRequired,fileSize:i.number.isRequired})),TFI_FOLDER_SHAPE:c,ACCOUNT_SHAPE:d}},591256:(e,t,n)=>{n.d(t,{EY:()=>c,HH:()=>s,Nl:()=>o,qs:()=>l})
var a=n(602652),i=n(647517)
const r=a.shape({id:a.string.isRequired,concentration:i.U5,containerTransferId:a.string.isRequired,outputParentStorableId:a.string.isRequired}),s=a.shape({id:a.string.isRequired,stageRunId:a.string.isRequired,transferRecords:a.arrayOf(r.isRequired).isRequired}),o=a.shape({id:a.string.isRequired,transferOperationIds:a.arrayOf(a.string).isRequired})
var l,c
!function(e){e.SOURCE="SOURCE"
e.TARGET="TARGET"}(l||(l={}))
!function(e){e[e.LEGACY=0]="LEGACY"
e[e.SOURCE_FOR_TRANSFER_TABLE=1]="SOURCE_FOR_TRANSFER_TABLE"
e[e.NEW_DESTINATION_FOR_TRANSFER_TABLE=2]="NEW_DESTINATION_FOR_TRANSFER_TABLE"
e[e.EXISTING_DESTINATION_FOR_TRANSFER_TABLE=3]="EXISTING_DESTINATION_FOR_TRANSFER_TABLE"
e[e.INGREDIENT_COMPONENT_LOT=4]="INGREDIENT_COMPONENT_LOT"
e[e.INVENTORY_CONTAINER=5]="INVENTORY_CONTAINER"}(c||(c={}))},200337:(e,t,n)=>{n.d(t,{$n:()=>r,E0:()=>d,Gq:()=>l,LX:()=>i,_m:()=>a,t:()=>c})
var a,i,r,s=n(357444),o=n(281100)
!function(e){e.NOT_SELECTED="NOT_SELECTED"
e.LOADING="LOADING"
e.LOADED="LOADED"}(a||(a={}))
!function(e){e.TOP="TOP"
e.BOTTOM="BOTTOM"
e.UP="UP"
e.DOWN="DOWN"}(i||(i={}))
!function(e){e.SKIPPED="SKIPPED"
e.COMPLETED="COMPLETED"
e.FAILED="FAILED"
e.READY="READY"
e.ACTIVE="ACTIVE"}(r||(r={}))
const l={[s.xy.PENDING]:r.READY,[s.xy.READY]:r.READY,[s.xy.COMPLETED]:r.COMPLETED,[s.xy.FAILED]:r.FAILED,[s.xy.SKIPPED]:r.SKIPPED,[s.xy.ACTIVE]:r.ACTIVE},c={[r.READY]:s.xy.READY,[r.COMPLETED]:s.xy.COMPLETED,[r.FAILED]:s.xy.FAILED,[r.SKIPPED]:s.xy.SKIPPED,[r.ACTIVE]:s.xy.ACTIVE},d={handle:"User Not Found",avatar_url:o.O}},186837:(e,t,n)=>{n.d(t,{Z:()=>WorksheetStepStatusIcon})
var a=n(692013),i=n(989526),r=n(200337),s=n(271359),o=n(36424)
function WorksheetStepStatusIcon(e){var t,n,r
return i.createElement(o.Z,{icon:null!==(n=null===(t=c[e.status])||void 0===t?void 0:t.icon)&&void 0!==n?n:"request-pending",className:(0,a.iv)([l.taskStatusIcon,null===(r=c[e.status])||void 0===r?void 0:r.style,e.style])})}const l=a.mM.create({taskStatusIcon:{height:"12px",width:"12px"},pending:{color:s.TG},failed:{color:s.hM},skipped:{color:s.ud},completed:{color:s.ZA}}),c={[r.$n.READY]:{icon:"request-pending",name:"Pending",style:l.pending},[r.$n.FAILED]:{icon:"status-failed",name:"Failed",style:l.failed},[r.$n.SKIPPED]:{icon:"cancelled",name:"Skipped",style:l.skipped},[r.$n.COMPLETED]:{icon:"status-success",name:"Completed",style:l.completed},[r.$n.ACTIVE]:{icon:"request-pending",name:"Active",style:l.pending}}},645968:(e,t,n)=>{n.d(t,{LZ:()=>p,TV:()=>f,aj:()=>g,dP:()=>h,kQ:()=>I,qh:()=>S,t8:()=>m,t_:()=>A,y$:()=>T,zq:()=>E})
var a=n(989526),i=n(531041),r=n(922633),s=n(475242),o=n(202170),l=n(579807),c=n(408783),d=n(788836),u=n(36424)
const m="notebook",p="Explore Notebook to Get More Space",h="molecular_biology",E="Explore Molecular Biology to Earn Space",S="sidepanel",T={[r.ZP.MODULES.GETTING_STARTED]:{key:S,title:"Getting Started"},[r.ZP.MODULES.ENTRY]:{key:m,title:p},[r.ZP.MODULES.SEQUENCE]:{key:h,title:E}},g={[r.ZP.MODULES.ENTRY]:"benchling.onboarding.hide-entry-nue-module",[r.ZP.MODULES.SEQUENCE]:"benchling.onboarding.hide-sequence-nue-module"},f=i.default.object([[r.ZP.CREATE_ENTRY,{title:"Create a new entry",description:()=>a.createElement("div",null,"Click ",a.createElement(u.Z,{icon:"compose"}),' on the left then "Blank entry" to create your first entry from scratch.')}],[r.ZP.CREATE_EDIT_TABLE,{title:"Create and edit a table",description:()=>"Insert a table and try using a formula."}],[r.ZP.INSERT_DAY,{title:"Insert a new day",description:()=>'Find "New Day" in the Insert menu in the top toolbar.'}],[r.ZP.LINK_SEQUENCE,{title:"Link a sequence",description:()=>'Type "@pBR322_EGFR" to mention a sequence in your entry.'}],[r.ZP.ATTACH_PROTOCOL,{title:"Attach a protocol",description:()=>'Click "Add Protocol" and choose a protocol to attach.'}]]),I=i.default.object([[r.ZP.SPLIT_WORKSPACE,{title:"Split your workspace",steps:['Click "Split Workspace" below this to see a plasmid map alongside the sequence map.']}],[r.ZP.AUTO_ANNOTATE,{title:"Add annotations",steps:["Click on the Annotations button - the first gray button on the right side panel.",'Click "Auto-annotate" to search for a pre-populated library of annotation features.',"Search for the Default Features library.",'Add the two matching features to the sequence as annotations by clicking "Add Annotations."']}],[r.ZP.RUN_DIGEST,{title:"Run a digest",steps:["Click on the Digests button - the gray scissors on the right side panel.",'Under "Find Enzyme," click to select two restriction enzymes in the list.','Click "Run Digest."','To see virtual results, click the "Virtual Digest" tab toward the top of your screen.'],tutorialLink:s.F.MOLBIO_SIMULATE_DIGEST}],[r.ZP.VIEW_ALIGNMENT,{title:"View an alignment",steps:["Click on the Alignments button on the right side panel.",'Find "Saved Alignments" - a history of all other alignments performed against this sequence.',"Click on the saved alignment to open and view the results of example sequencing preps."]}],[r.ZP.IMPORT_SEQUENCE,{title:"Import a new sequence",steps:['Click "+" on the left then "DNA / RNA Sequence" and "New DNA / RNA Sequence."','Find the "Search External Databases" tab to search for a sequence from a database.',"Import the sequence you searched for!"]}]]),A=new Map([[r.ZP.VERIFY_EMAIL,{title:"Verify your email address",onClick:()=>{window.open(`/${d.Z.currentUser().url_identifier}/settings`,"_blank","noopener,noreferrer")},resultForTracking:"page_profile_settings_opened"}],[r.ZP.CREATE_OR_JOIN_ORG,{title:"Create or join an organization",onClick:()=>{l.Z.openSearchOrgModal()},resultForTracking:"modal_join_organization_opened"}],[r.ZP.CREATE_FIRST_FILE,{title:"Create your first item",onClick:()=>{c.N1()},resultForTracking:"menu_global_create_opened"}],[r.ZP.MAIN_TOUR,{title:"Take a tour of Benchling",onClick:()=>{o.x()},resultForTracking:"tour_navigation_opened"}],[r.ZP.SET_RECOVERY_EMAIL,{title:"Set a recovery email address",onClick:()=>{window.open(`/${d.Z.currentUser().url_identifier}/settings`,"_blank","noopener,noreferrer")},resultForTracking:"page_profile_settings_opened"}]])},45219:(e,t,n)=>{n.d(t,{$Y:()=>h,Cz:()=>d,J:()=>u,JC:()=>p,Jt:()=>E,Kb:()=>g,Lv:()=>l,O2:()=>a,QF:()=>o,RC:()=>S,Uf:()=>m,eZ:()=>c,j2:()=>i,ji:()=>r,qk:()=>s,tx:()=>T})
const a="JOIN_ORGANIZATION_SCREEN",i="CALL_TO_ACTION_SCREEN",r="ENTRY_INFO_SCREEN",s="MOL_BIO_INFO_SCREEN",o="ROLE_INFO_SCREEN",l="ROLE_INFO_SCREEN_WITHOUT_FLOW",c="SIGNUP_FLOW_V2_AFFILIATION_SCREEN",d="SIGNUP_FLOW_V2_ACADEMIC_ROLE_INFO_SCREEN",u="SIGNUP_FLOW_V2_INDUSTRY_ROLE_INFO_SCREEN",m="SIGNUP_FLOW_V2_JOIN_ORGANIZATION_SCREEN",p="SIGNUP_FLOW_V2_MOLBIO_OR_NOTEBOOK_SCREEN",h=[i,p],E=[a,i,r,s,o,l,c,d,u,m,p],S="LAB_NOTEBOOK_FLOW",T={[S]:[r],MOL_BIO_FLOW:[s]},g={JOIN_ORGANIZATION_SCREEN:"join_organization",CALL_TO_ACTION_SCREEN:"choose_cta",ENTRY_INFO_SCREEN:"notebook_overview",MOL_BIO_INFO_SCREEN:"molecular_biology_overview",SIGNUP_FLOW_V2_AFFILIATION_SCREEN:"affiliation",SIGNUP_FLOW_V2_ACADEMIC_ROLE_INFO_SCREEN:"academic_role_info",SIGNUP_FLOW_V2_INDUSTRY_ROLE_INFO_SCREEN:"industry_role_info",SIGNUP_FLOW_V2_JOIN_ORGANIZATION_SCREEN:"join_organization",SIGNUP_FLOW_V2_MOLBIO_OR_NOTEBOOK_SCREEN:"molbio_or_notebook"}},468011:(e,t,n)=>{n.d(t,{B2:()=>i,Jt:()=>l,ML:()=>r,dF:()=>o,hA:()=>s,o6:()=>a})
const a="REGISTRY_ACTIVATION_WELCOME",i="REGISTRY_ACTIVATION_ORG",r="REGISTRY_ACTIVATION_MEMBERS",s="REGISTRY_ACTIVATION_REGISTRY_EXISTS",o="REGISTRY_ACTIVATION_WEBINAR",l=[a,i,r,s,o]},683376:(e,t,n)=>{n.d(t,{F:()=>hasAnyOrgsWithDisablePersonalOwnables,I:()=>hasAllOrgsWithDisablePersonalOwnables})
var a=n(788836)
function getCurrentUserOrganizations(){const e=a.Z.currentUser()
return e&&e.organizations?e.organizations:[]}function hasAnyOrgsWithDisablePersonalOwnables(){const e=getCurrentUserOrganizations()
return e.length>0&&e.some((e=>e.disablePersonalOwnables))}function hasAllOrgsWithDisablePersonalOwnables(){const e=getCurrentUserOrganizations()
return e.length>0&&e.every((e=>e.disablePersonalOwnables))}},263174:(e,t,n)=>{n.r(t)
n.d(t,{ACCESS_TAB:()=>L,ALL_SCREENS:()=>_,ALL_TABS:()=>M,APPS_TAB:()=>P,CALENDAR_TAB:()=>N,CREATE_ORGANIZATION_SCREEN:()=>T,CREATE_TEAM_SCREEN:()=>y,MEMBER:()=>p,MEMBERS_TAB:()=>O,MEMBER_INVITE:()=>h,MEMBER_REQUEST:()=>E,ORGANIZATION:()=>l,ORGANIZATION_PAGE_SECTION_URL_PARAM_TO_TAB:()=>w,ORGANIZATION_PAGE_TAB_TO_URL_PARAM:()=>U,ORGANIZATION_REQUEST:()=>m,ORGANIZATION_SCREEN:()=>f,OrganizationPermissionRole:()=>d,PROJECTS_TAB:()=>R,PartyType:()=>c,Plan:()=>o,ROLES_TAB:()=>D,SEEN_FEATURE_BANNER_PREFERENCE:()=>C,SETTINGS_TAB:()=>b,SHARE_PROJECTS_SCREEN:()=>g,TEAM:()=>S,TEAMS_TAB:()=>v,TEAM_PAGE_SECTION_URL_PARAM_TO_TAB:()=>F,TEAM_PAGE_TAB_TO_URL_PARAM:()=>x,TEAM_SCREEN:()=>I,TeamPermissionRole:()=>u,USER_PAGE_SECTION_URL_PARAM_TO_TAB:()=>k,USER_PAGE_TAB_TO_URL_PARAM:()=>B,USER_SCREEN:()=>A})
var a=n(602652),i=n(531041),r=n(468991)
const{USER_SHAPE:s}=r.ZP
var o
!function(e){e.ELN_PRO="eln_pro"
e.SCHOLAR="scholar"}(o||(o={}))
const l=a.shape({admin:a.bool.isRequired,adminGrantsTenantAdmin:a.bool,avatar_url:a.string.isRequired,disablePersonalOwnables:a.bool.isRequired,defaultOwnableMemberDataPolicyId:a.string,disablePublic:a.bool.isRequired,email:a.string.isRequired,handle:a.string.isRequired,id:a.string.isRequired,location:a.string,member:a.bool.isRequired,name:a.string.isRequired,url_identifier:a.string.isRequired,website:a.string})
var c,d,u
!function(e){e.USER="user"
e.ORGANIZATION="organization"
e.TEAM="team"
e.APP="app"}(c||(c={}))
!function(e){e[e.MEMBER=1]="MEMBER"
e[e.ADMIN=0]="ADMIN"}(d||(d={}))
!function(e){e[e.MEMBER=1]="MEMBER"
e[e.ADMIN=0]="ADMIN"}(u||(u={}))
const m=a.shape({createdAt:a.string.isRequired,inviter:a.shape(s).isRequired,organization:l,organizationAccepted:a.bool.isRequired,user:a.shape(s).isRequired,userAccepted:a.bool.isRequired}),p=a.shape({id:a.string.isRequired,name:a.string.isRequired,email:a.string,avatar_url:a.string.isRequired,handle:a.string.isRequired}),h=a.shape({email:a.string.isRequired,createdAt:a.string.isRequired}),E=a.shape({user:a.shape({id:a.string.isRequired,name:a.string.isRequired,email:a.string.isRequired,handle:a.string.isRequired}).isRequired,createdAt:a.string.isRequired,userAccepted:a.bool.isRequired}),S=a.shape({id:a.string.isRequired,name:a.string.isRequired,avatar_url:a.string.isRequired,description:a.string.isRequired,organizationId:a.string.isRequired,memberCount:a.number.isRequired}),T="CREATE_ORGANIZATION_SCREEN",g="SHARE_PROJECTS_SCREEN",f="ORGANIZATION_SCREEN",I="TEAM_SCREEN",A="USER_SCREEN",y="CREATE_TEAM_SCREEN",_=[T,y,g,f,I,A],C="organizations.seen_feature_banner",R="PROJECTS_TAB",N="CALENDAR_TAB",O="MEMBERS_TAB",b="SETTINGS_TAB",v="TEAMS_TAB",P="APPS_TAB",L="ACCESS_TAB",D="ROLES_TAB",M=[R,N,O,b,v,P,L,D],w={members:O,projects:R,calendar:N,settings:b,teams:v,apps:P},F={calendar:N,members:O,projects:R,settings:b,apps:P},k={settings:b,roles:D,access:L},U=i.default.invert(w),x=i.default.invert(F),B=i.default.invert(k)},93619:(e,t,n)=>{n.d(t,{Ah:()=>removeMember,U2:()=>get,Ue:()=>create,Vx:()=>update,Yv:()=>updateMemberRole,Zw:()=>getMembers,bl:()=>fetchProjects,dn:()=>teamURL,fC:()=>deleteTeam,fZ:()=>addMember,q4:()=>updateTeamAvatar})
var a=n(771398)
function get(e){return a.xA(`/1/api/teams/${e}`)}function create(e){return a.ty({url:"/1/api/teams/",data:e})}function getMembers(e,{getMemberInfo:t=!0}){return a.xA(`/1/api/teams/${e}/members`,{getMemberInfo:t})}function updateMemberRole(e,t,n){return a.Yh({url:`/1/api/teams/${e}/members/${t}`,data:n})}function removeMember(e,t){return a.$v({url:`/1/api/teams/${e}/members/${t}`})}function addMember(e,t){return a.ty({url:`/1/api/teams/${e}/members/${t}`})}function update(e,t){return a.Yh({url:`/1/api/teams/${e}`,data:t})}function fetchProjects(e){return a.UJ(`/1/api/teams/${e}/projects`)}function teamURL(e){return`/teams/${e}`}function updateTeamAvatar(e,t){return a.uB({url:`/1/api/teams/${e}/actions/update-avatar`,key:"avatar",file:t})}function deleteTeam(e){return a.$v({url:`/1/api/teams/${e}`})}},569535:(e,t,n)=>{n.d(t,{Y0:()=>a,dQ:()=>updateOrganizationMembers,g:()=>fetchTeamPageOrganization})
var a,i=n(769784),r=n(681896),s=n(91092),o=n(771398)
!function(e){e.ADD_MEMBER="ADD_MEMBER"
e.REMOVE_MEMBER="REMOVE_MEMBER"}(a||(a={}))
function updateOrganizationMembers(e,t,n){return o.Ry({url:`/1/api/organizations/${t}/members`,data:{updates:e.map((e=>({userId:e,operation:n})))}})}const l=i.Ps`
  fragment OrganizationPageOrganization on OrganizationNode {
    id
    handle
    name
    urlIdentifier
    admin
    member
    avatarUrl
    disablePersonalOwnables
    disablePublic
    email
  }
`,c=i.Ps`
  query GetTeamPageOrganizationQuery($orgId: StrictString!) @skipAudit {
    organization(id: $orgId) {
      ... on OrganizationNode {
        ...OrganizationPageOrganization
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${l}
  ${(0,s.f)("InaccessibleInfo").fragment}
`
async function fetchTeamPageOrganization(e){var t
const n=(await(0,r.doQuerySafe)({query:c},{variables:{orgId:e}})).organization
if(function isOrganizationInaccessible(e){return void 0!==e.invalidId}(n))throw new Error(`Organization ${e} not found.`)
return{...n,url_identifier:n.urlIdentifier,avatar_url:null!==(t=n.avatarUrl)&&void 0!==t?t:""}}},545082:(e,t,n)=>{n.d(t,{ZP:()=>UsersForm,mn:()=>E,zA:()=>a})
var a,i=n(692013),r=n(764403),s=n.n(r),o=n(767807),l=n.n(o),c=n(989526),d=n(271359),u=n(36424),m=n(801455),p=n(665704),h=n(923058)
!function(e){e.NAME="NAME"
e.EMAIL="EMAIL"
e.HANDLE="HANDLE"}(a||(a={}))
const E={[a.NAME]:"",[a.EMAIL]:"",[a.HANDLE]:"",hasEmailError:!1}
class UserRow extends c.Component{constructor(){super(...arguments)
this._handleChangeName=e=>{this.props.onUpdate({[a.NAME]:e.target.value})}
this._handleChangeEmail=e=>{this.props.onUpdate({[a.EMAIL]:e.target.value})}
this._validateEmail=e=>{const t=this.props.userRowInfo.EMAIL
this.props.onUpdate({hasEmailError:!(0,h.Z)(t)})}
this._handleChangeHandle=e=>{this.props.onUpdate({[a.HANDLE]:e.target.value})}}render(){return c.createElement("div",{className:(0,i.iv)(S.userRow)},c.createElement("div",{className:(0,i.iv)(this.props.userRowInfo.hasEmailError&&S.bottomMarginError)},c.createElement(p.Z,{className:(0,i.iv)(S.userRowField),onChange:this._handleChangeName,value:this.props.userRowInfo[a.NAME],label:"Name",labelStyle:m.Z.STYLES.HIDDEN,placeholder:"Name",dataTestAttrs:{component:"UsersForm",element:"input",key:"name"}})),c.createElement("div",null,c.createElement(p.Z,{className:(0,i.iv)(S.userRowField),inputClassName:(0,i.iv)(this.props.userRowInfo.hasEmailError&&S.emailErrorBorderColor),onChange:this._handleChangeEmail,onBlur:this._validateEmail,value:this.props.userRowInfo[a.EMAIL],label:"Email",labelStyle:m.Z.STYLES.HIDDEN,placeholder:"Email",dataTestAttrs:{component:"UsersForm",element:"input",key:"email"}}),this.props.userRowInfo.hasEmailError&&c.createElement("span",{className:(0,i.iv)(S.emailErrorFontColor)},"Invalid email")),c.createElement("div",{className:(0,i.iv)(this.props.userRowInfo.hasEmailError&&S.bottomMarginError)},c.createElement(p.Z,{className:(0,i.iv)(S.userRowField),onChange:this._handleChangeHandle,value:this.props.userRowInfo[a.HANDLE],label:"Username",labelStyle:m.Z.STYLES.HIDDEN,placeholder:"Username",dataTestAttrs:{component:"UsersForm",element:"input",key:"username"}})),c.createElement("div",{className:s()((0,i.iv)(S.userRowRemoveIcon),(0,i.iv)(this.props.userRowInfo.hasEmailError&&S.bottomMarginError))},c.createElement(u.Z,{icon:"close",className:"u-faded u-pointer",onClick:this.props.onRemove})))}}class UsersForm extends c.Component{constructor(){super(...arguments)
this._handleAddUser=()=>{this.props.onUpdate([...this.props.userRowInfos,E])}
this._handleRemoveUser=e=>{this.props.onUpdate(l()(this.props.userRowInfos,{$splice:[[e,1]]}))}
this._handleUpdateUserRow=(e,t)=>{this.props.onUpdate(l()(this.props.userRowInfos,{[e]:{$merge:t}}))}}render(){return c.createElement("div",null,this.props.userRowInfos.map(((e,t)=>c.createElement(UserRow,{key:t,userRowInfo:e,onUpdate:e=>{this._handleUpdateUserRow(t,e)},onRemove:()=>{this._handleRemoveUser(t)}}))))}}const S=i.mM.create({userRow:{alignItems:"center",display:"flex",marginBottom:12},userRowField:{flex:1,marginRight:12},userRowRemoveIcon:{flex:"none"},bottomMarginError:{marginBottom:16.5},emailErrorFontColor:{color:d.hM},emailErrorBorderColor:{borderColor:d.hM}})},923058:(e,t,n)=>{n.d(t,{Z:()=>isValidEmail})
var a=n(531041)
const i=[" ",";",","]
function isValidEmail(e){return!a.default.any(i.map((t=>e.includes(t))))&&(1===(e.match(/@/g)||[]).length&&function getEmailRegExp(e){return RegExp("(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[-\b\v\f-!#-[]-]|\\\\[-\t\v\f-])*\")@"+(null!=e?e:"(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[-\b\v\f-!-ZS-]|\\\\[-\t\v\f-])+)\\])")+"$")}().test(String(e).toLowerCase()))}},458573:(e,t,n)=>{n.d(t,{A:()=>updateAndRunPipelineStep,Oz:()=>bulkArchivePipelines,dM:()=>bulkUnarchivePipelines,dS:()=>unarchiveSavedResultsFromPipelineStep,gn:()=>addAndRunPipelineStep,hH:()=>deletePipelineSteps,xe:()=>archiveSavedResultsFromPipelineStep})
var a=n(771398),i=n(8747)
function addAndRunPipelineStep(e,t){return a.s0({url:`/1/api/pipelines/${e}:add-and-run-step`,data:{step:t}})}function deletePipelineSteps(e,t){return a.WY({url:`/1/api/pipelines/${e}:delete-analysis-steps`,data:t})}function updateAndRunPipelineStep(e,t){return a.s0({url:`/1/api/pipelines/${e}:update-and-run-step`,data:t})}function archiveSavedResultsFromPipelineStep(e,t){return i.s0({url:"/1/api/pipelines:archive-saved-results-from-step",data:{stepId:e,purpose:t}})}function unarchiveSavedResultsFromPipelineStep(e){return i.s0({url:"/1/api/pipelines:unarchive-saved-results-from-step",data:{stepId:e}})}function bulkUnarchivePipelines(e){return a.s0({url:"/1/api/pipelines:bulk-unarchive",data:{ids:e}})}function bulkArchivePipelines(e,t){return a.s0({url:"/1/api/pipelines:bulk-archive",data:{ids:e,purpose:t}})}},185856:(e,t,n)=>{n.d(t,{B5:()=>c,EC:()=>r,HC:()=>s,On:()=>l,QV:()=>i.QV,TP:()=>o,pA:()=>isMaterialInputM0,vt:()=>a})
var a,i=n(256605)
function isMaterialInputM0(e){return e.hasOwnProperty("details")&&!e.hasOwnProperty("materialType")}!function(e){e.PRE_CREATE="PRE_CREATE"
e.CREATED="CREATED"
e.UNSET="UNSET"}(a||(a={}))
const r={type:a.UNSET}
var s
!function(e){e.PRE_RUN="PRE_RUN"
e.RUN="RUN"
e.POST_RUN="POST_RUN"}(s||(s={}))
const o={[s.PRE_RUN]:"Pre-run",[s.RUN]:"Run",[s.POST_RUN]:"Post-run"}
var l,c
!function(e){e.METHOD="METHOD"}(l||(l={}))
!function(e){e.RECIPE="recipe"}(c||(c={}))},633856:(e,t,n)=>{n.r(t)
n.d(t,{PROCEDURE_PAGE_QUERY:()=>wn,PresentationalProcedurePage:()=>PresentationalProcedurePage,RestrictedAccessProcedureBanner:()=>RestrictedAccessProcedureBanner,default:()=>ProcedurePage,getClonedFlowchart:()=>getClonedFlowchart,procedurePageUrl:()=>procedurePageUrl,procedureRestrictedStatus:()=>procedureRestrictedStatus})
var a=n(64558),i=n(769784),r=n(989526),s=n(615439),o=n.n(s),l=n(468943),c=n(804589),d=n(382857),u=n(232606),m=n(675649),p=n(581197),h=n(751512),E=n(91092),S=n(697134),T=n(138966),g=n(739074),f=n(579635),I=n(387361)
var A=n(974913),y=n(982337),_=n(692013),C=n(60473),R=n(334148),N=n(205986)
function ProcedureConfirmExitWithUnsavedChangesModal(e){return r.createElement(N.ZP,{title:"Save before leaving?",flexContent:!0,buttons:[{text:"Cancel",className:(0,_.iv)(O.cancelButton),submit:!1,style:R.ZJ.TRANSPARENT,onClick:()=>{e.onRequestClose()}},{text:"Leave without saving",submit:!1,style:R.ZJ.TERTIARY_GRAY,onClick:()=>{e.onRequestLeaveWithoutSaving()
e.onRequestClose()}},{text:"Save changes",submit:!0,style:R.ZJ.PRIMARY}],onRequestSubmit:()=>{e.onRequestSubmit()},onRequestClose:e.onRequestClose},r.createElement("p",{className:(0,_.iv)(O.modalBody)},`If you leave, any changes youve made to this ${(0,C.ZP)(C.B3.TITLE,{stringCase:C.P8.LOWER})} will not be saved.`))}const O=_.mM.create({modalBody:{fontSize:"14px"},cancelButton:{background:"transparent"}})
var b=n(422236),v=n(648214),P=n(348920),L=n(171471),D=n(211495),M=n(185856)
const w="experimental_design_modal"
function trackToggledProcedureViewEvent(e,t){l.L9(D.ci.TOGGLED_PROCEDURE_VIEW,{actionOrigin:t,actionInstanceId:l.Vr(),eventGroupId:l.Vr(),procedureId:e,procedureType:M.B5.RECIPE})}function trackClosedExperimentalDesignModalEvent(e,t){l.gx(L.U9.CLOSED_MODAL,L.XC.PROCEDURES,{actionOrigin:L.D2.PROCEDURE_EXPERIMENT_DESIGNER,actionInstanceId:l.Vr(),modalType:w,eventGroupId:t,procedureId:e,procedureType:M.B5.RECIPE})}var F=n(494327)
const k=(0,F.x)((function getProcedurePageContextFallback(){return{isProcedureDirty:!1,setProcedureDirty:a.ZT,saveImmediately:a.ZT,isSaving:!1,editingMethodCid:null,setEditingMethodCid:a.ZT}}),"ProcedurePageContext")
var U=n(213150),x=n(135117),B=n(541247),Z=n(271359),q=n(927517),G=n(317275),V=n(36424),H=n(634168)
const W=238,Y=_.mM.create({wrapper:{width:"238px",borderRadius:5},nodeSelected:{boxShadow:`0 0 6px ${Z.mu}`},node:{border:`1px solid ${Z.TG}`,background:Z.Cj,width:"100%"},nodeTop:{borderRadius:"5px 5px 0px 0px",borderBottom:"none"},nodeBottom:{borderRadius:"0px 0px 5px 5px",borderTop:"none",cursor:"move"},text:{userSelect:"none",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},nodeNameBox:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 8px",height:"48px",background:Z.bs,borderTopLeftRadius:5,borderTopRightRadius:5,position:"relative",overflow:"visible",":hover":{color:Z.Rl,cursor:"pointer"}},nodeNameTextEllipses:{fontWeight:"bold",fontSize:15,textAlign:"left",lineHeight:1.1,paddingRight:"8px",...(0,H.n6)(2)},subSection:{padding:"4px 0px",borderTop:`1px solid ${Z.pF}`},placeholderName:{fontStyle:"italic",color:Z.pp},activelyDraggingNode:{opacity:.65},noDraggingNode:{opacity:1},hasValidationErrors:{border:`1px solid ${Z.hM}`},isIntersectingDropZone:{border:`2px solid ${Z.Ej}`}}),makeRawOpacityStyle=e=>({opacity:null!=e?.65:1}),makeOpacityStyle=e=>null!=e?Y.activelyDraggingNode:Y.noDraggingNode,$=Y.wrapper,makeNodeWrapperWithOpacityClass=(e,t)=>(0,_.iv)($,e&&Y.nodeSelected,makeOpacityStyle(t)),nodeNameBoxClass=(e,t=!1)=>(0,_.iv)(Y.node,t&&Y.isIntersectingDropZone,e&&Y.hasValidationErrors,Y.nodeTop,Y.text,Y.nodeNameBox),K=(0,_.iv)(Y.text,Y.nodeNameTextEllipses),methodBodyClass=(e,t=!1)=>(0,_.iv)(Y.node,t&&Y.isIntersectingDropZone,e&&Y.hasValidationErrors,Y.nodeBottom),z=(0,_.iv)(Y.subSection),Q=(0,_.iv)(Y.text),makePlaceholderNameClass=e=>(0,_.iv)(!e&&Y.placeholderName),getMethodNameOrPlaceholder=e=>e||`Untitled ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}`,j={zIndex:1001}
function ProcedureAddFirstMethodCard(e){return r.createElement("div",{className:(0,_.iv)(J.backingBox)},r.createElement("p",{className:(0,_.iv)(J.descriptionText)},`Add a ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})} to get started`),r.createElement("div",{className:(0,_.iv)(J.buttonBox),onClick:t=>{t.stopPropagation()
e.onClick()}},r.createElement(V.Z,{className:(0,_.iv)(J.plusSign),icon:"plus"}),r.createElement("div",{className:(0,_.iv)(J.addMethodText)},`Add ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}`)))}const J=_.mM.create({backingBox:{background:Z.tN,border:"1px solid",borderColor:Z.pF,borderRadius:"4px",borderStyle:"dashed",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",width:"238px",height:"174px"},descriptionText:{fontSize:"14px",fontWeight:400,color:Z.Rl,lineHeight:"16px",textAlign:"center",padding:"49px 42px 6px"},buttonBox:{background:Z.Cj,border:"1px solid",borderColor:Z.pF,borderRadius:"4px",display:"inline-flex",alignItems:"center",justifyContent:"space-between",padding:"6px 10px"},plusSign:{color:Z.pp,width:"12px",height:"12px"},addMethodText:{fontSize:"13px",fontWeight:600,color:Z.pp,lineHeight:"16px",paddingLeft:"4px"}})
var X=n(764403),ee=n.n(X),te=n(361974),ne=n(686836)
const ae=(0,F.x)((()=>({procedureValidationErrors:[]})),"ProcedureValidationContext")
var ie=n(317201)
function ProcedureValidationErrorInfoButton(e){const{procedureValidationErrors:t}=ae.useContext(),n=null!=e.primaryObject?(0,ie.Zq)((0,ie.w3)(t,e.primaryObject)):(0,ie.Zq)(e.preFilteredValidationErrors)
return null!=n?r.createElement(ne.Z,{placement:te.ZH.TOP,renderContent:()=>r.createElement("div",{className:(0,_.iv)(re.validationErrorTooltip)},n)},r.createElement(V.Z,{className:(0,_.iv)(re.validationErrorIcon),icon:"exclamation-circle"})):r.createElement(r.Fragment,null)}const re=_.mM.create({validationErrorIcon:{color:Z.hM,width:"15px",height:"15px",marginRight:"8px",display:"flex"},validationErrorTooltip:{lineHeight:"14px",whiteSpace:"pre-line",textAlign:"center",maxWidth:"170px"}})
var se=n(620058),oe=n(383628),le=n(476604)
const ce=i.Ps`
  query ConfigureCreatedExecutionTemplateButtonQuery($templateId: StrictString!)
  @skipAudit
  @engComponent(name: NOTEBOOK) {
    template(id: $templateId) {
      ... on TemplateNode {
        id
        name
        editUrl
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,E.f)("InaccessibleInfo").fragment}
`
function ConfigureCreatedExecutionTemplateButton(e){return r.createElement(h.ZP,{query:ce,renderLoading:()=>r.createElement(le.b,null),variables:{templateId:e.entryTemplateId}},(({template:t})=>{if((0,S.CZ)(t)){(0,u.Gp)(!1,"Got inaccessible template",{templateId:t.invalidId})
return r.createElement(oe.ZP,{bannerType:oe.ct.ERROR,text:"You do not have access to this template."})}return r.createElement(se.Z,{entryTemplate:{id:t.id,name:t.name,editUrl:t.editUrl},onChange:e.onChange,buttonLabel:e.buttonLabel,modalTitle:e.modalTitle,defaultTemplateCollectionId:e.defaultTemplateCollectionId,isDisabled:e.isDisabled,isHovering:e.isHovering})}))}var de=n(869016),ue=n(512902),me=n(243327),pe=n(4042),he=n(260497),Ee=n(759345)
function StepNameEditorListItem(e){const t=(0,r.useRef)(e.name||"Untitled step"),[n,a]=(0,r.useState)(t.current);(0,r.useEffect)((()=>()=>{null!=t.current&&e.setName(t.current)}),[])
return r.createElement(Ee.Z,{value:n,onChange:e=>{a(e.target.value)
t.current=e.target.value},onBlur:()=>{e.setName(n)},onKeyDown:a=>{if((0,q.isEnterKey)(a)){a.preventDefault()
e.setName(n)
t.current=null
e.unmountNow()}else if((0,q.isEscapeKey)(a)){a.preventDefault()
t.current=null
e.unmountNow()}},className:(0,_.iv)(Se.editor),autoFocus:!0})}const Se=_.mM.create({editor:{height:"40px",fontSize:13,padding:"7px",background:Z.Ro,border:0,borderTop:`1px solid ${Z.tN}`,borderRadius:"0"}})
var Te=n(126350),ge=n(157168),fe=n(263137),Ie=n(650546)
function AddStepButton(e){return r.createElement("div",{className:(0,_.iv)(Ae.addStepButtonWrapper)},r.createElement(R.Co,{buttonStyle:R.ZJ.TEXT,onClick:e.onClick,size:R.qE.MEDIUM,icon:"compose",text:"Add step",...(0,fe.Z)({component:"AddStepButton",element:M.TP[e.group]})}))}function StepSelectorSidebar(e){var t
const n=null!==(t=e.method.stepGroups)&&void 0!==t?t:(0,he.nG)(),[a,i]=(0,r.useState)(null),{saveImmediately:s}=k.useContext()
function moveStep(t,a,i){e.onChangeSteps((0,ue.ZP)(n,(e=>{const{steps:n}=e[t],r=n[a]
n.splice(a,1)
n.splice(a+i,0,r)})))}function deleteStep(t,a){e.onChangeSteps((0,ue.ZP)(n,(e=>{const{steps:n}=e[t]
n.splice(a,1)})))}function makeOverflowMenu(e,t,a){return[{icon:"arrow-up",contents:r.createElement(r.Fragment,null,"Move up"),onSelect:()=>{moveStep(e,t,-1)},isDisabled:0===t},{icon:"arrow-down",contents:r.createElement(r.Fragment,null,"Move down"),onSelect:()=>{moveStep(e,t,1)},isDisabled:t===a-1},{icon:"trash-can",contents:r.createElement(r.Fragment,null,"Remove"),onSelect:()=>{!async function deleteStepWithConfirmation(e,t){const a=n[e].steps[t].documentId;(0,u.hu)(null!=a,"Unexpectedly missing document ID")
const i=pe.Z.getDocument(a);(0,u.hu)(null!=i,"Unexpectedly missing document");(i.documentVersion.entryVersion.note.noteParts.length<=1||await(0,Ie.Z)({typeName:"step"}))&&deleteStep(e,t)}(e,t)},isDisabled:!1}]}return r.createElement("div",{className:(0,_.iv)(Ae.wrapper),style:{width:`${e.sidebarWidth}px`}},n.map(((t,o)=>r.createElement(Te.Z,{key:o,name:M.TP[t.group],locked:!1},t.steps.map(((s,l)=>a===s.cid?r.createElement(StepNameEditorListItem,{key:s.cid,name:s.name,setName:t=>{const a=(0,ue.ZP)(n,(e=>{e[o].steps[l].name=t}))
e.onChangeSteps(a)},unmountNow:()=>{i(null)}}):r.createElement(ge.Z,{key:s.cid,name:s.name||"Untitled step",nameClassName:makePlaceholderNameClass(s.name),isSelected:e.selectedStepCid===s.cid,onClick:()=>{i(null)
e.onChangeSelection(s.cid)},onDoubleClick:()=>{i(s.cid)},overflowMenuItems:makeOverflowMenu(o,l,t.steps.length)}))),r.createElement(AddStepButton,{group:t.group,onClick:()=>{const t=(0,he.xv)(),a=(0,ue.ZP)(n,(e=>{e[o].steps.push(t)}))
e.onChangeSteps(a)
e.onChangeSelection(t.cid)
s()}})))))}const Ae=_.mM.create({wrapper:{marginLeft:-16,border:`1px solid ${Z.tN}`},addStepButtonWrapper:{borderTop:`1px solid ${Z.tN}`,background:Z.Cj,width:"250px"}})
function StepConfigEditor(e){const[t,n]=(0,r.useState)(null),a=(0,r.useMemo)((()=>null==t||null==e.method.stepGroups?null:(0,he.jQ)(e.method.stepGroups,t)),[e.method.stepGroups,t])
return r.createElement("div",{className:(0,_.iv)(ye.editorPage)},r.createElement("div",{className:(0,_.iv)(ye.sidebarWrapper)},r.createElement("div",{className:(0,_.iv)(ye.stepsSidebar)},r.createElement(StepSelectorSidebar,{method:e.method,onChangeSteps:e.onChangeSteps,selectedStepCid:t,onChangeSelection:n,sidebarWidth:250}))),r.createElement("div",{className:"u-flex-grow u-min-width-zero"},null!=a&&(null==a.documentId?r.createElement(le.b,null):r.createElement(me.Z,{id:a.documentId,locked:!1,disableInternalAutoSaver:!0,onChange:()=>{const t=a.documentId
null!=t&&pe.Z.inStore(t)&&pe.Z.hasUnsavedChanges(t)&&e.onChangeSteps((0,ue.ZP)(e.method.stepGroups,(e=>{const n=(0,he.jQ)(e,a.cid)
n&&(n.documentVersionUpdate=pe.Z.getToServerDocument(t))})))},isConfig:!0}))))}const ye=_.mM.create({editorPage:{marginTop:"-23px",width:"100%",height:"100%",background:Z.Cj,display:"flex"},sidebarWrapper:{height:"100%"},stepsSidebar:{margin:"0 -1px 0 16px",paddingRight:"2px",borderRight:`1px solid ${Z.pF}`}})
var _e=n(159332),Ce=n(294780),Re=n(73374)
function OneMethodListing(e){return r.createElement("div",{onClick:()=>{e.onClick(e.methodId)},className:(0,_.iv)(Oe.methodNameWrapper,e.isSelected&&Oe.selectedMethodWrapper)},r.createElement(ProcedureValidationErrorInfoButton,{primaryObject:{id:e.methodId,objectType:_e.F.METHOD}}),r.createElement("p",{className:ee()((0,_.iv)(Oe.methodNameTextEllipses,e.isSelected&&Oe.selectedMethod),makePlaceholderNameClass(e.method.name))},getMethodNameOrPlaceholder(e.method.name)))}function MethodSelectorSidebar(e){const handleClickMethodName=t=>{e.onChangeSelection(t)}
return r.createElement("div",{className:(0,_.iv)(Oe.wrapper),style:{width:`${e.sidebarWidth}px`}},r.createElement(Re.BB,{className:(0,_.iv)(Oe.heading)},`${(0,C.ZP)(C.B3.METHOD,{plural:!0})}`),e.methods.map((t=>{const n=function extractMethodIdByKey(e,t){const n=e[t];(0,u.hu)(null!=n,"Method IDs must not be null at this stage")
return n}(t,e.methodIdKey)
return r.createElement(OneMethodListing,{key:n,method:t,methodId:n,isSelected:n===e.selectedMethodId,onClick:handleClickMethodName})})))}const Ne=`1px solid ${Z.pF}`,Oe=_.mM.create({wrapper:{marginLeft:-16},heading:{height:"41px",lineHeight:"41px",borderRight:Ne,borderBottom:Ne,paddingLeft:"16px",margin:0,background:Z.bs},methodNameWrapper:{lineHeight:"14px",height:"46px",fontWeight:400,borderRight:Ne,borderBottom:Ne,paddingLeft:"16px",paddingRight:"4px",display:"flex",alignItems:"center",cursor:"pointer",":hover":{background:Z.bs}},selectedMethodWrapper:{background:Z.Ro,":hover":{background:Z.Ro}},methodNameTextEllipses:{fontSize:"13px",lineHeight:1.5,verticalAlign:"middle",margin:0,paddingRight:"2px",textAlign:"left",...(0,H.n6)(2)},placeholderName:{fontStyle:"italic",color:Z.pp},selectedMethod:{fontWeight:"bold"}})
var be=n(184445),ve=n(684402),Pe=n(944230),Le=n(678150),De=n(567202),Me=n(801455),we=n(745826),Fe=n(212300),ke=n(178570),Ue=n(26652),xe=n(155880)
const Be=(0,Fe.$j)((function mapStateToProps(e,t){var n
return{renderType:null!==(n=(0,Ue.a3)(e,t.tableCid))&&void 0!==n?n:xe.S8.TABLE}}))((function UnconnectedProcedureConfigTable(e){const{onChangeDetails:t,rowToDetail:n,detailToRow:a,details:i,locked:s}=e,o=(0,r.useRef)({}),l=(0,r.useRef)({...e.tableAdapter.createTable(e.createStructuredTableProps),cid:e.tableCid}),c=(0,r.useMemo)((()=>({...l.current,rows:i.map(((e,t)=>{const n=a(e,l.current,t)
o.current[n.rowId]=e.id
return n}))})),[i,a]),d=(0,r.useCallback)((e=>{const a=[]
for(const t of e.rows){let e=o.current[t.rowId]
if(null==e){e=(0,ke.Z)()
o.current[t.rowId]=e}a.push(n(t,e))}t(a)}),[t,n])
return r.createElement("div",null,r.createElement(xe.ZP,{shouldShowAs:e.renderType,structuredTable:c,cid:e.tableCid,updateHandler:d,includeUnsubmittedStatus:!1,hideColumnHeaderIcons:!0,hideFormulaBox:!0,hasPrimarySamples:!1,isCollapsible:!1,iconOverride:"",locked:s}))}))
function MethodEditorHeader(e){const t=r.createElement("div",{className:(0,_.iv)(Ve.headerNameDisplay)},`Edit ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}: ${e.methodName}`),n=r.createElement("div",{className:(0,_.iv)(Ve.headerSpacer)}),a=r.createElement("a",{onClick:e.onClose,className:(0,_.iv)(Ve.headerCloseButton)},r.createElement(V.Z,{icon:"close",className:(0,_.iv)(Ve.headerCloseIcon)}))
return r.createElement("div",{className:(0,_.iv)(Ve.editorHeader)},t,n,a)}function normalizeName(e){return e.trim()}function MethodNameField(e){const t=(0,Ce.id)(e.name)
return r.createElement(r.Fragment,null,r.createElement("input",{className:(0,_.iv)(Ve.methodNameField,t&&Ve.methodNameFieldError),type:"text",value:e.name,onChange:t=>{e.onNameChange(t.target.value)},onKeyPress:t=>{"Enter"===t.key&&e.onNameChange(normalizeName(e.name))},onBlur:t=>{e.onNameChange(normalizeName(t.target.value))},autoFocus:!0,disabled:e.isDisabled}),t&&r.createElement(Le.Z,{message:`${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.TITLE})} names are required`}))}var Ze
!function(e){e.DEFINITIONS="Definitions"
e.STEP_CONFIG="Step configuration"
e.METADATA="Metadata"}(Ze||(Ze={}))
function generateEntryTemplateForConfigureButton(e){switch(e.type){case M.vt.PRE_CREATE:return{name:e.name,templateCollectionId:e.templateCollectionId,sourceTemplateId:e.sourceTemplateId}
case M.vt.UNSET:return null
default:(0,u.hu)(!1,"Unhandled entry template status")}return null}function MethodMetadataTabContent(e){const t=(0,C.ZP)(C.B3.TITLE,{stringCase:C.P8.LOWER}),n=(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER}),a=e.isProcedureReadOnly?`Template selection is disabled on ${procedureRestrictedStatus(e.isProcedureArchived)} ${t}.`:`No template selected; users will complete this ${n} using a simple data table in a modal window.`,i={onChange:(t,n,a)=>{e.onChangeMethod({...e.selectedMethod,executionTemplateInfo:{templateCollectionId:t.id,name:n,sourceTemplateId:a,type:M.vt.PRE_CREATE}})},buttonLabel:"Select template",modalTitle:"Select template",defaultTemplateCollectionId:e.procedureTemplateCollectionId,isDisabled:e.isProcedureReadOnly}
return r.createElement("div",{className:(0,_.iv)(Ve.metadataTabContent)},r.createElement(Me.Z,{isRequired:!0,label:"Name"}),r.createElement(MethodNameField,{name:e.selectedMethod.name,onNameChange:t=>{e.onChangeMethod({...e.selectedMethod,name:t})},isDisabled:e.isProcedureReadOnly}),r.createElement("div",{className:(0,_.iv)(Ve.templateSelection)},r.createElement(Me.Z,{label:`What template will be used to complete this ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}?`}),r.createElement("div",{className:(0,_.iv)(Ve.templateSelectionButtonGroup)},e.selectedMethod.executionTemplateInfo.type===M.vt.CREATED?r.createElement(ConfigureCreatedExecutionTemplateButton,{...i,entryTemplateId:e.selectedMethod.executionTemplateInfo.id}):r.createElement(se.Z,{...i,entryTemplate:generateEntryTemplateForConfigureButton(e.selectedMethod.executionTemplateInfo)}),r.createElement(R.Co,{size:R.qE.SMALL,buttonStyle:R.ZJ.TERTIARY_GRAY,icon:"format-delete",className:"u-mini-spacing-left",disabled:e.selectedMethod.executionTemplateInfo.type===M.vt.UNSET||e.isProcedureReadOnly,onClick:()=>{e.onChangeMethod({...e.selectedMethod,executionTemplateInfo:{type:M.vt.UNSET}})}})),e.selectedMethod.executionTemplateInfo.type===M.vt.UNSET&&r.createElement("div",{className:(0,_.iv)(Ve.warningBanner)},r.createElement(oe.ZP,{bannerType:oe.ct.WARNING,supportingInfo:a}))))}function MethodEditorTabTitle(e){return r.createElement("div",{className:(0,_.iv)(Ve.tabLabel)},r.createElement(ProcedureValidationErrorInfoButton,{preFilteredValidationErrors:e.tabRelatedValidationErrors}),e.tabTitle)}const qe=(0,De.ZP)(Ze.DEFINITIONS)
function MethodEditor(e){const[t,n]=qe.useGlobalClientState(Ze.DEFINITIONS),a=e.methods.find((({cid:t})=>t===e.editingMethodCid));(0,u.hu)(null!=a,`selected ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})} must exist`)
const{procedureValidationErrors:i}=ae.useContext(),s=(0,ie.w3)(i,{id:e.editingMethodCid,objectType:_e.F.METHOD}),o=(0,r.useCallback)((t=>{e.onChangeMethod({...a,parameters:t})}),[e,a]),l=(0,r.useCallback)((t=>{e.onChangeMethod({...a,materialInputs:t})}),[e,a]),c=(0,r.useCallback)((t=>{e.onChangeMethod({...a,materialOutputs:t})}),[e,a]),d=(0,r.useCallback)((t=>{e.onChangeMethod({...a,equipmentList:t})}),[e,a]),m=(0,r.useCallback)((t=>{e.onChangeMethod({...a,stepGroups:t})}),[e,a]),p={name:"",schemas:[],entryId:null,metadata:{materialType:ve.e.INPUT},selectorsById:{}},h={name:"",schemas:[],entryId:null,metadata:{materialType:ve.e.OUTPUT},selectorsById:{}}
return r.createElement("div",{className:(0,_.iv)(Ve.editorPage)},r.createElement(MethodEditorHeader,{methodName:a.name,onClose:e.onCloseMethodEditor}),r.createElement("div",{className:(0,_.iv)(Ve.editorBody)},r.createElement("div",{className:(0,_.iv)(Ve.sidebarWrapper)},r.createElement("div",{className:(0,_.iv)(Ve.methodsSidebar)},r.createElement(MethodSelectorSidebar,{methods:e.methods,methodIdKey:"cid",selectedMethodId:e.editingMethodCid,onChangeSelection:e.setEditingMethodCid,sidebarWidth:232}))),r.createElement(we.Xl,{className:ee()("u-flex-grow u-min-width-zero tabContainer--compact",(0,_.iv)(Ve.tabContainer)),headerDividerClassName:(0,_.iv)(Ve.tabContainerHeaderDividerBorder),activeTab:t,onRequestTabChange:n},r.createElement(we.OK,{tabKey:Ze.DEFINITIONS,title:r.createElement(MethodEditorTabTitle,{tabTitle:"Definitions",tabRelatedValidationErrors:[...(0,ie.XR)(s,{primaryObjectType:_e.F.PARAMETER}),...(0,ie.XR)(s,{primaryObjectType:_e.F.MATERIAL_INPUT}),...(0,ie.XR)(s,{primaryObjectType:_e.F.MATERIAL_OUTPUT}),...(0,ie.XR)(s,{primaryObjectType:_e.F.EQUIPMENT})]})},r.createElement("div",{className:(0,_.iv)(Ve.contentCard)},r.createElement(Be,{key:"Parameters",title:`${(0,C.ZP)(C.B3.PARAMETER,{plural:!0})}`,tableAdapter:Pe.Z.getAdapter(),createStructuredTableProps:{name:"",schemas:[],entryId:null,metadata:{},selectorsById:{}},details:a.parameters,onChangeDetails:o,detailToRow:(e,t,n)=>Pe.Z.parameterToRow(e,t,n,i),rowToDetail:Pe.Z.rowToParameter,tableCid:`procedureParamTable-${e.editingMethodCid}`,locked:e.isProcedureReadOnly}),r.createElement(Be,{key:"Material inputs",title:`${(0,C.ZP)(C.B3.MATERIAL)} inputs`,tableAdapter:ve.Z.getAdapter(),createStructuredTableProps:p,details:a.materialInputs,onChangeDetails:l,detailToRow:(t,n,r)=>ve.Z.materialToRow(t,n,r,i,null!=t.id&&function isMaterialInputMappedFromUpstreamMethod(e,t,n){return n.edges.some((n=>n.type===M.QV.MATERIAL_EDGE&&n.targetHandle===(0,de.Wq)(e,t,"target")))}(a.cid,t.id,e.flowchart)?`The details for this material are mapped from another ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}.`:null),rowToDetail:ve.Z.rowToMaterial,tableCid:`procedureMaterialInputsTable-${e.editingMethodCid}`,locked:e.isProcedureReadOnly}),r.createElement(Be,{key:"Material outputs",title:`${(0,C.ZP)(C.B3.MATERIAL)} outputs`,tableAdapter:ve.Z.getAdapter(),createStructuredTableProps:h,details:a.materialOutputs,onChangeDetails:c,detailToRow:(e,t,n)=>ve.Z.materialToRow(e,t,n,i),rowToDetail:ve.Z.rowToMaterial,tableCid:`procedureMaterialOutputsTable-${e.editingMethodCid}`,locked:e.isProcedureReadOnly}),r.createElement(Be,{key:"Equipment",title:`${(0,C.ZP)(C.B3.EQUIPMENT,{plural:!0})}`,tableAdapter:be.Z.getAdapter(),createStructuredTableProps:{name:"",schemas:[],entryId:null,metadata:{},selectorsById:{}},details:a.equipmentList,onChangeDetails:d,detailToRow:(e,t,n)=>be.Z.equipmentToRow(e,t,n,i),rowToDetail:be.Z.rowToEquipment,tableCid:`procedureEquipmentTable-${a.cid}`,locked:e.isProcedureReadOnly}))),r.createElement(we.OK,{tabKey:Ze.STEP_CONFIG,title:r.createElement(MethodEditorTabTitle,{tabTitle:"Step configuration",tabRelatedValidationErrors:[]})},r.createElement(StepConfigEditor,{method:a,onChangeSteps:m})),r.createElement(we.OK,{tabKey:Ze.METADATA,title:r.createElement(MethodEditorTabTitle,{tabTitle:"Metadata",tabRelatedValidationErrors:[...(0,ie.XR)(s,{errorType:_e.l.INVALID_NAME,primaryObjectType:_e.F.METHOD}),...(0,ie.XR)(s,{errorType:_e.l.NON_UNIQUE_NAME,primaryObjectType:_e.F.METHOD})]})},r.createElement("div",{className:(0,_.iv)(Ve.contentCard)},r.createElement(MethodMetadataTabContent,{selectedMethod:a,onChangeMethod:e.onChangeMethod,procedureTemplateCollectionId:e.procedureTemplateCollectionId,isProcedureReadOnly:e.isProcedureReadOnly,isProcedureArchived:e.isProcedureArchived}))))))}const Ge=`1px solid ${Z.pF}`,Ve=_.mM.create({editorPage:{width:"100%",height:"100%",background:Z.Cj},editorHeader:{display:"flex",alignItems:"center",height:"48px",width:"100%",borderBottom:Ge},headerNameDisplay:{flex:"0 0 auto",fontSize:"13px",fontWeight:600,paddingLeft:"16px"},headerSpacer:{flex:"1 0 auto"},headerCloseButton:{flex:"0 0 auto",marginRight:"16px"},headerCloseIcon:{width:"16px",height:"16px",color:Z.pp},editorBody:{display:"flex",flexDirection:"row",width:"100%",height:"100%"},sidebarWrapper:{height:"100%",borderRight:Ge,marginLeft:"16px"},tabContainer:{height:"calc(100% - 120px)",overflowY:"scroll"},metadataTabContent:{width:"50%"},methodsSidebar:{marginRight:"-1px"},tabLabel:{display:"flex",fontSize:"12px",paddingTop:"12px",paddingBottom:"6px",marginLeft:"12px",marginRight:"12px"},templateSelection:{marginTop:"12px"},templateSelectionButtonGroup:{display:"flex"},warningBanner:{marginTop:"12px"},contentCard:{margin:"-8px 25px"},methodNameField:{border:Ge},methodNameFieldError:{border:`1px solid ${Z.hM}`},tabContainerHeaderDividerBorder:{borderTop:Ge}})
const He=(0,Fe.$j)((function ProcedureDetailsEditorM0_mapStateToProps(e,t){var n
return{renderType:null!==(n=(0,Ue.a3)(e,t.tableCid))&&void 0!==n?n:xe.S8.TABLE}}))((function UnconnectedProcedureDetailsEditorM0(e){const{onChangeDetails:t,rowToDetail:n,detailToRow:a,details:i,locked:s}=e,o=(0,r.useRef)({}),l=(0,r.useRef)({...e.tableAdapter.createTable(e.createStructuredTableProps),cid:e.tableCid}),c=(0,r.useMemo)((()=>({...l.current,rows:i.map(((e,t)=>{const n=a(e,l.current,t)
o.current[n.rowId]=e.id
return n}))})),[i,a]),d=(0,r.useCallback)((e=>{const a=[]
for(const t of e.rows){let e=o.current[t.rowId]
if(null==e){e=(0,ke.Z)()
o.current[t.rowId]=e}a.push(n(t,e))}t(a)}),[t,n])
return r.createElement("div",null,r.createElement(xe.ZP,{shouldShowAs:e.renderType,structuredTable:c,cid:e.tableCid,updateHandler:d,includeUnsubmittedStatus:!1,hideColumnHeaderIcons:!0,hideFormulaBox:!0,hasPrimarySamples:!1,isCollapsible:!1,iconOverride:"",locked:s}))}))
function MethodEditorHeaderM0(e){const t=r.createElement("div",{className:(0,_.iv)($e.headerNameDisplay)},`Edit ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}: ${e.methodName}`),n=r.createElement("div",{className:(0,_.iv)($e.headerSpacer)}),a=r.createElement("a",{onClick:e.onClose,className:(0,_.iv)($e.headerCloseButton)},r.createElement(V.Z,{icon:"close",className:(0,_.iv)($e.headerCloseIcon)}))
return r.createElement("div",{className:(0,_.iv)($e.editorHeader)},t,n,a)}function MethodEditorM0_normalizeName(e){return e.trim()}function MethodNameFieldM0(e){const t=(0,Ce.id)(e.name)
return r.createElement(r.Fragment,null,r.createElement("input",{className:(0,_.iv)($e.MethodNameFieldM0,t&&$e.methodNameFieldError),type:"text",value:e.name,onChange:t=>{e.onNameChange(t.target.value)},onKeyPress:t=>{"Enter"===t.key&&e.onNameChange(MethodEditorM0_normalizeName(e.name))},onBlur:t=>{e.onNameChange(MethodEditorM0_normalizeName(t.target.value))},autoFocus:!0,disabled:e.isDisabled}),t&&r.createElement(Le.Z,{message:`${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.TITLE})} names are required`}))}var We
!function(e){e.METADATA="Metadata"
e.PARAMETERS="Parameters"
e.MATERIAL_INPUTS="Material inputs"
e.MATERIAL_OUTPUTS="Material outputs"
e.EQUIPMENT="Equipment"
e.STEPS="Steps"}(We||(We={}))
function MethodEditorM0_generateEntryTemplateForConfigureButton(e){switch(e.type){case M.vt.PRE_CREATE:return{name:e.name,templateCollectionId:e.templateCollectionId,sourceTemplateId:e.sourceTemplateId}
case M.vt.UNSET:return null
default:(0,u.hu)(!1,"Unhandled entry template status")}return null}function MethodEditorM0_MethodMetadataTabContent(e){const t=(0,C.ZP)(C.B3.TITLE,{stringCase:C.P8.LOWER}),n=(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER}),a=e.isProcedureReadOnly?`Template selection is disabled on ${procedureRestrictedStatus(e.isProcedureArchived)} ${t}.`:`No template selected; users will complete this ${n} using a simple data table in a modal window.`,i={onChange:(t,n,a)=>{e.onChangeMethod({...e.selectedMethod,executionTemplateInfo:{templateCollectionId:t.id,name:n,sourceTemplateId:a,type:M.vt.PRE_CREATE}})},buttonLabel:"Select template",modalTitle:"Select template",defaultTemplateCollectionId:e.procedureTemplateCollectionId,isDisabled:e.isProcedureReadOnly}
return r.createElement("div",{className:(0,_.iv)($e.metadataTabContent)},r.createElement(Me.Z,{isRequired:!0,label:"Name"}),r.createElement(MethodNameFieldM0,{name:e.selectedMethod.name,onNameChange:t=>{e.onChangeMethod({...e.selectedMethod,name:t})},isDisabled:e.isProcedureReadOnly}),r.createElement("div",{className:(0,_.iv)($e.templateSelection)},r.createElement(Me.Z,{label:`What template will be used to complete this ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}?`}),r.createElement("div",{className:(0,_.iv)($e.templateSelectionButtonGroup)},e.selectedMethod.executionTemplateInfo.type===M.vt.CREATED?r.createElement(ConfigureCreatedExecutionTemplateButton,{...i,entryTemplateId:e.selectedMethod.executionTemplateInfo.id}):r.createElement(se.Z,{...i,entryTemplate:MethodEditorM0_generateEntryTemplateForConfigureButton(e.selectedMethod.executionTemplateInfo)}),r.createElement(R.Co,{size:R.qE.SMALL,buttonStyle:R.ZJ.TERTIARY_GRAY,icon:"format-delete",className:"u-mini-spacing-left",disabled:e.selectedMethod.executionTemplateInfo.type===M.vt.UNSET||e.isProcedureReadOnly,onClick:()=>{e.onChangeMethod({...e.selectedMethod,executionTemplateInfo:{type:M.vt.UNSET}})}})),e.selectedMethod.executionTemplateInfo.type===M.vt.UNSET&&r.createElement("div",{className:(0,_.iv)($e.warningBanner)},r.createElement(oe.ZP,{bannerType:oe.ct.WARNING,supportingInfo:a}))))}function MethodEditorM0_MethodEditorTabTitle(e){return r.createElement("div",{className:(0,_.iv)($e.tabLabel)},r.createElement(ProcedureValidationErrorInfoButton,{preFilteredValidationErrors:e.tabRelatedValidationErrors}),e.tabTitle)}function MethodEditorM0(e){const t=e.methods.find((({cid:t})=>t===e.editingMethodCid));(0,u.hu)(null!=t,`selected ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})} must exist`)
const{procedureValidationErrors:n}=ae.useContext(),a=(0,ie.w3)(n,{id:e.editingMethodCid,objectType:_e.F.METHOD}),i=(0,r.useCallback)((n=>{e.onChangeMethod({...t,parameters:n})}),[e,t]),s=(0,r.useCallback)((n=>{e.onChangeMethod({...t,materialInputs:n})}),[e,t]),o=(0,r.useCallback)((n=>{e.onChangeMethod({...t,materialOutputs:n})}),[e,t]),l=(0,r.useCallback)((n=>{e.onChangeMethod({...t,equipmentList:n})}),[e,t]),c=(0,r.useCallback)((n=>{e.onChangeMethod({...t,stepGroups:n})}),[e,t]),d={name:"",schemas:[],entryId:null,metadata:{materialType:ve.e.INPUT},selectorsById:{}},m={name:"",schemas:[],entryId:null,metadata:{materialType:ve.e.OUTPUT},selectorsById:{}}
return r.createElement("div",{className:(0,_.iv)($e.editorPage)},r.createElement(MethodEditorHeaderM0,{methodName:t.name,onClose:e.onCloseMethodEditor}),r.createElement("div",{className:(0,_.iv)($e.editorBody)},r.createElement("div",{className:(0,_.iv)($e.sidebarWrapper)},r.createElement("div",{className:(0,_.iv)($e.methodsSidebar)},r.createElement(MethodSelectorSidebar,{methods:e.methods,methodIdKey:"cid",selectedMethodId:e.editingMethodCid,onChangeSelection:e.setEditingMethodCid,sidebarWidth:232}))),r.createElement(we.Xl,{className:ee()("u-flex-grow u-min-width-zero tabContainer--compact",(0,_.iv)($e.tabContainer)),headerDividerClassName:(0,_.iv)($e.tabContainerHeaderDividerBorder),activeTab:e.currentTab,onRequestTabChange:e.setCurrentTab},r.createElement(we.OK,{tabKey:We.METADATA,title:r.createElement(MethodEditorM0_MethodEditorTabTitle,{tabTitle:"Metadata",tabRelatedValidationErrors:[...(0,ie.XR)(a,{errorType:_e.l.INVALID_NAME,primaryObjectType:_e.F.METHOD}),...(0,ie.XR)(a,{errorType:_e.l.NON_UNIQUE_NAME,primaryObjectType:_e.F.METHOD})]})},r.createElement("div",{className:(0,_.iv)($e.contentCard)},r.createElement(MethodEditorM0_MethodMetadataTabContent,{selectedMethod:t,onChangeMethod:e.onChangeMethod,procedureTemplateCollectionId:e.procedureTemplateCollectionId,isProcedureReadOnly:e.isProcedureReadOnly,isProcedureArchived:e.isProcedureArchived}))),r.createElement(we.OK,{tabKey:We.PARAMETERS,title:r.createElement(MethodEditorM0_MethodEditorTabTitle,{tabTitle:`${(0,C.ZP)(C.B3.PARAMETER,{plural:!0})}`,tabRelatedValidationErrors:(0,ie.XR)(a,{primaryObjectType:_e.F.PARAMETER})})},r.createElement("div",{className:(0,_.iv)($e.contentCard)},r.createElement(He,{key:"Parameters",title:`${(0,C.ZP)(C.B3.PARAMETER,{plural:!0})}`,tableAdapter:Pe.Z.getAdapter(),createStructuredTableProps:{name:"",schemas:[],entryId:null,metadata:{},selectorsById:{}},details:t.parameters,onChangeDetails:i,detailToRow:(e,t,a)=>Pe.Z.parameterToRow(e,t,a,n),rowToDetail:Pe.Z.rowToParameter,tableCid:`procedureParamTable-${e.editingMethodCid}`,locked:e.isProcedureReadOnly}))),r.createElement(we.OK,{tabKey:We.MATERIAL_INPUTS,title:r.createElement(MethodEditorM0_MethodEditorTabTitle,{tabTitle:`${(0,C.ZP)(C.B3.MATERIAL)} inputs`,tabRelatedValidationErrors:(0,ie.XR)(a,{primaryObjectType:_e.F.MATERIAL_INPUT})})},r.createElement("div",{className:(0,_.iv)($e.contentCard)},r.createElement(He,{key:"Material inputs",title:`${(0,C.ZP)(C.B3.MATERIAL)} inputs`,tableAdapter:ve.Z.getAdapter(),createStructuredTableProps:d,details:t.materialInputs,onChangeDetails:s,detailToRow:(a,i,r)=>{(0,u.hu)((0,M.pA)(a),"Expected an M0 material")
return ve.Z.materialToRow(a,i,r,n,function MethodEditorM0_isMaterialInputMappedFromUpstreamMethod(e,t,n){return n.edges.some((n=>n.type===M.QV.MATERIAL_EDGE&&n.targetHandle===(0,de.Wq)(e,t,"target")))}(t.cid,a.id,e.flowchart)?`The details for this material are mapped from another ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}.`:null)},rowToDetail:ve.Z.rowToMaterial,tableCid:`procedureMaterialInputsTable-${e.editingMethodCid}`,locked:e.isProcedureReadOnly}))),r.createElement(we.OK,{tabKey:We.MATERIAL_OUTPUTS,title:r.createElement(MethodEditorM0_MethodEditorTabTitle,{tabTitle:`${(0,C.ZP)(C.B3.MATERIAL)} outputs`,tabRelatedValidationErrors:(0,ie.XR)(a,{primaryObjectType:_e.F.MATERIAL_OUTPUT})})},r.createElement("div",{className:(0,_.iv)($e.contentCard)},r.createElement(He,{key:"Material outputs",title:`${(0,C.ZP)(C.B3.MATERIAL)} outputs`,tableAdapter:ve.Z.getAdapter(),createStructuredTableProps:m,details:t.materialOutputs,onChangeDetails:o,detailToRow:(e,t,a)=>ve.Z.materialToRow(e,t,a,n),rowToDetail:ve.Z.rowToMaterial,tableCid:`procedureMaterialOutputsTable-${e.editingMethodCid}`,locked:e.isProcedureReadOnly}))),r.createElement(we.OK,{tabKey:We.EQUIPMENT,title:r.createElement(MethodEditorM0_MethodEditorTabTitle,{tabTitle:`${(0,C.ZP)(C.B3.EQUIPMENT,{plural:!0})}`,tabRelatedValidationErrors:(0,ie.XR)(a,{primaryObjectType:_e.F.EQUIPMENT})})},r.createElement("div",{className:(0,_.iv)($e.contentCard)},r.createElement(He,{key:"Equipment",title:`${(0,C.ZP)(C.B3.EQUIPMENT,{plural:!0})}`,tableAdapter:be.Z.getAdapter(),createStructuredTableProps:{name:"",schemas:[],entryId:null,metadata:{},selectorsById:{}},details:t.equipmentList,onChangeDetails:l,detailToRow:(e,t,a)=>be.Z.equipmentToRow(e,t,a,n),rowToDetail:be.Z.rowToEquipment,tableCid:`procedureEquipmentTable-${t.cid}`,locked:e.isProcedureReadOnly}))),P.ZP.PROCEDURES_ENABLE_M1&&r.createElement(we.OK,{tabKey:We.STEPS,title:r.createElement(MethodEditorM0_MethodEditorTabTitle,{tabTitle:"Steps",tabRelatedValidationErrors:[]})},r.createElement(StepConfigEditor,{method:t,onChangeSteps:c})))))}const Ye=`1px solid ${Z.pF}`,$e=_.mM.create({editorPage:{width:"100%",height:"100%",background:Z.Cj},editorHeader:{display:"flex",alignItems:"center",height:"48px",width:"100%",borderBottom:Ye},headerNameDisplay:{flex:"0 0 auto",fontSize:"13px",fontWeight:600,paddingLeft:"16px"},headerSpacer:{flex:"1 0 auto"},headerCloseButton:{flex:"0 0 auto",marginRight:"16px"},headerCloseIcon:{width:"16px",height:"16px",color:Z.pp},editorBody:{display:"flex",flexDirection:"row",width:"100%",height:"100%"},sidebarWrapper:{height:"100%",borderRight:Ye,marginLeft:"16px"},tabContainer:{height:"calc(100% - 120px)",overflowY:"scroll"},metadataTabContent:{width:"50%"},methodsSidebar:{marginRight:"-1px"},tabLabel:{display:"flex",fontSize:"12px",paddingTop:"12px",paddingBottom:"6px",marginLeft:"12px",marginRight:"12px"},templateSelection:{marginTop:"12px"},templateSelectionButtonGroup:{display:"flex"},warningBanner:{marginTop:"12px"},contentCard:{margin:"-8px 25px"},MethodNameFieldM0:{border:Ye},methodNameFieldError:{border:`1px solid ${Z.hM}`},tabContainerHeaderDividerBorder:{borderTop:Ye}})
var Ke=n(195941)
const ze={getDOMElementDimensions(e){if(null==e)return{width:0,height:0}
const{width:t,height:n}=e.getBoundingClientRect()
return{width:t,height:n}}},Qe=100,je=(0,F.x)((()=>{(0,u.hu)(!1,"Grid layout engine requires GridLayoutContext to be set up")}),"GridLayoutContext",(()=>!0)),GridLayoutContextProvider=e=>{const t=(0,r.useRef)({nodeCidToDOMElement:{}})
return r.createElement(je.Provider,{value:t.current},e.children)}
function getCanvasCoordinateForSingleAxis(e,t){const n=(0,a.vM)(e,t.getSingleAxisGridCoordinate),i=(0,a.Xc)(n,(e=>Math.max(...e.map((({cid:e})=>t.getSingleAxisSize(e)))))),r=Object.keys(i).map((e=>Number(e))).sort(((e,t)=>e-t))
let s=t.canvasOriginCoordinate
const o={}
for(const e of r){for(const t of n[e])o[t.cid]=s
const a=t.canvasCoordinateToClientCoordinate(s)+i[e]
s=t.clientCoordinateToCanvasCoordinate(a)+t.pixelGap}return{nodeCidToComputedCanvasPos:o,maxClientLengthByGridCoordinate:i}}function buildConvertedProcedureGraph(e,t,n,a,i,r){return{nodes:e.nodes.map((e=>function buildMethodCanvasNode(e,t,n){var a
return{id:e.cid,type:e.type,position:null!==(a=n[e.cid])&&void 0!==a?a:{x:0,y:0},data:{...e,...t},style:{...j}}}(e,n,t))),edges:e.edges.map((t=>function buildProcedureCanvasEdge(e,t,n,a,i){const{sourceHandle:r,targetHandle:s}=e,o={id:(0,de.lK)(r,s),source:e.fromMethodCid,target:e.toMethodCid,sourceHandle:r,targetHandle:s}
let l
switch(e.type){case M.QV.METHOD_EDGE:l={...o,type:e.type,data:{...e,...a}}
break
case M.QV.MATERIAL_EDGE:{const a=(0,y.s9)(t,e.fromMethodCid),r=(null==a?void 0:a.cid)===e.toMethodCid
l={...o,type:e.type,data:{...e,...i,allMethodNodesInFlowchart:n,doesMaterialEdgeHaveMatchingMethodEdge:r}}
break}default:(0,u.hu)(!1,"unsupported edge type")}return l}(t,e,r,a,i)))}}function useConvertedGridLayoutGraph(e,t,n,i,s){!function assertNodesHaveUniqueGridCoordinates(e){const t=new Set(e.map((({canvasGridCoordinates:e})=>`row${e.row}-col${e.column}`)));(0,u.hu)(t.size===e.length,"No two nodes can have the same grid coordinates")}(e.nodes)
const{clientOriginPos:l,clientPointToCanvasPoint:c,canvasPointToClientPoint:d}=s,{nodeCidToDOMElement:m}=je.useContext(),[p,h]=(0,r.useState)({}),[E,S]=(0,r.useState)({}),[T,g]=(0,r.useState)({}),f=(0,Ke.N)(e.nodes,0);(0,r.useLayoutEffect)((()=>{const t=(0,a.Pe)(e.nodes,(({cid:e})=>e)),n=(0,a.Xc)(t,(({cid:e,canvasGridCoordinates:t})=>({dimensions:ze.getDOMElementDimensions(m[e]),canvasGridCoordinates:t})))
if(o()(p,n))return;(0,_.dY)()
const i=c(l),{nodeCidToComputedCanvasPos:r}=getCanvasCoordinateForSingleAxis(e.nodes,{canvasCoordinateToClientCoordinate:e=>d({x:e,y:0}).x,clientCoordinateToCanvasCoordinate:e=>c({x:e,y:0}).x,getSingleAxisGridCoordinate:e=>e.canvasGridCoordinates.column,getSingleAxisSize:e=>n[e].dimensions.width,pixelGap:Qe,canvasOriginCoordinate:i.x}),{nodeCidToComputedCanvasPos:s,maxClientLengthByGridCoordinate:u}=getCanvasCoordinateForSingleAxis(e.nodes,{canvasCoordinateToClientCoordinate:e=>d({x:0,y:e}).y,clientCoordinateToCanvasCoordinate:e=>c({x:0,y:e}).y,getSingleAxisGridCoordinate:e=>e.canvasGridCoordinates.row,getSingleAxisSize:e=>n[e].dimensions.height,pixelGap:40,canvasOriginCoordinate:i.y}),E=(0,a.Xc)(t,(({cid:e})=>({x:r[e],y:s[e]})))
S(E)
h(n)
g(u)}),[e,E,p,m,l,c,d])
return{convertedProcedureGraph:(0,r.useMemo)((()=>buildConvertedProcedureGraph(e,E,t,n,i,f)),[e,E,t,n,i,f]),nodeCidToComputedCanvasPos:E,maxHeightByRow:T}}var Je=n(934337)
function buildLinearFlowchartMethodDropZones(e,t,n,a){if(0===Object.keys(t).length||0===e.nodes.length)return[]
const i=(0,y.TP)(e.edges),r=i.map((e=>e.fromMethodCid)),s=e.nodes.filter((e=>!r.includes(e.cid)))
if(!(0,u.Gp)(1===s.length,"Only linear flowcharts are supported"))return[]
const o=s[0],l=i.map((e=>e.toMethodCid)),c=e.nodes.filter((e=>!l.includes(e.cid)))
if(!(0,u.Gp)(1===c.length,"Only linear flowcharts are supported"))return[]
const d=c[0],m=function buildMethodEdgeDropZones(e,t,n,a,i){return e.map((e=>{const r=n[e.cid],s=a({x:r.x+119,y:r.y}),o=a({x:r.x+357+Qe,y:r.y}),l=t.find((t=>t.fromMethodCid===e.cid));(0,u.hu)(null!=l,"Unexpectedly could not find related edge")
return{type:Je.F.METHOD_EDGE,position:s,width:o.x-s.x,height:i[e.canvasGridCoordinates.row],edgeId:l.id,fromMethod:e.cid,toMethod:l.toMethodCid}}))}(e.nodes.filter((e=>r.includes(e.cid)&&Object.keys(t).includes(e.cid))),i,t,n,a)
let p=m
Object.keys(t).includes(d.cid)&&(p=p.concat(function buildMethodRootDropZone(e,t,n,a){const i=t[e.cid],r=n({x:i.x-119-Qe,y:i.y}),s=n({x:i.x+119,y:i.y})
return{type:Je.F.METHOD_ROOT,position:r,width:s.x-r.x,height:a[e.canvasGridCoordinates.row],prependToMethodCid:e.cid}}(d,t,n,a)))
Object.keys(t).includes(o.cid)&&(p=p.concat(function buildMethodLeafDropZone(e,t,n,a){const i=t[e.cid],r=n({x:i.x+119,y:i.y}),s=n({x:i.x+357+Qe,y:i.y})
return{type:Je.F.METHOD_LEAF,position:r,width:s.x-r.x,height:a[e.canvasGridCoordinates.row],appendFromMethodCid:e.cid}}(o,t,n,a)))
return p}function getDropZoneIntersectionRectangle(e){return{position:{x:e.position.x,y:e.position.y-20},width:e.width,height:e.height+40}}function ProcedureDropZoneRenderer(e){const{dropZone:t,zoom:n}=e
let a=0
const i=168*n
switch(t.type){case Je.F.METHOD_ROOT:a=t.position.x+t.width-i-2
break
case Je.F.METHOD_LEAF:a=t.position.x+i
break
case Je.F.METHOD_EDGE:a=t.position.x+t.width/2-n
break
default:(0,u.hu)(!1,"Unsupported drop zone type")}return r.createElement("div",{className:(0,_.iv)(Xe.dropZone),style:{top:t.position.y+48*n,left:a,width:4*n,height:t.height-48*n}})}const Xe=_.mM.create({dropZone:{position:"absolute",background:Z.t0,borderRadius:"4px"}})
function ProcedureMethodBeingDraggedNodeRenderer(e){const t=nodeNameBoxClass(!1,e.isIntersectingDropZone),n=methodBodyClass(!1,e.isIntersectingDropZone),a=(0,_.iv)(et.grayBox),i=r.createElement("div",{className:z},r.createElement("div",{className:a}))
return r.createElement("div",{className:(0,_.iv)($,et.shadow),style:{top:e.position.y,left:e.position.x,position:"absolute",transformOrigin:"top left",transform:`scale(${e.zoom}) translate(-50%, -50%)`}},r.createElement("div",{className:t},r.createElement("div",{className:ee()(K,makePlaceholderNameClass(e.name))},getMethodNameOrPlaceholder(e.name))),r.createElement("div",{className:n},i,i,i,i))}const et=_.mM.create({grayBox:{width:"100px",height:"16px",background:Z.tN,margin:"4px 8px"},shadow:{boxShadow:`0px 2px 6px 0px rgba(${(0,Z.a7)(Z.pp,.7)})`}})
function MethodDragOverlay(e){return null!=e.methodBeingDragged?r.createElement("div",null,null!=e.intersectingDropZone&&r.createElement(ProcedureDropZoneRenderer,{dropZone:e.intersectingDropZone,zoom:e.viewportZoom}),r.createElement(ProcedureMethodBeingDraggedNodeRenderer,{name:e.methodBeingDragged.name,position:e.methodBeingDragged.position,zoom:e.viewportZoom,isIntersectingDropZone:null!=e.intersectingDropZone})):r.createElement(r.Fragment,null)}function useMethodDragOverlay(e,t,n,a,i,s,o){var l
const[c,d]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),{x:h,y:E}=(0,b.Sj)(),S=(0,r.useMemo)((()=>buildLinearFlowchartMethodDropZones(e,i,a,s)),[a,e,s,i,h,E]),T=(0,r.useCallback)(((n,a)=>{if(null!=m){const n=(0,y.oE)(e,a.id,m)
t(n)}d(null)
p(null)}),[e,m,t]),g=(0,r.useCallback)(((e,t)=>{if(!n.current)return
const a=n.current.getBoundingClientRect(),i={x:e.clientX-a.left,y:e.clientY-a.top},r=function detectDraggingNodeDropZoneIntersection(e,t,n,a){const i=t.filter((t=>{const n=getDropZoneIntersectionRectangle(t)
return function doRectanglesOverlap(e,t){const[n,a]=[e.position.x,e.position.x+e.width],[i,r]=[e.position.y,e.position.y+e.height],[s,o]=[t.position.x,t.position.x+t.width],[l,c]=[t.position.y,t.position.y+t.height]
return n<=o&&a>=s&&i<=c&&r>=l}({position:e,width:W*a,height:181*a},n)}))
if(0===i.length)return null
if(1===i.length)return i[0]
const r=i.find((e=>function isPointInRectangle(e,t){const[n,a]=[e.position.x,e.position.x+e.width],[i,r]=[e.position.y,e.position.y+e.height]
return n<=t.x&&t.x<=a&&i<=t.y&&t.y<=r}(getDropZoneIntersectionRectangle(e),n)))
return null!=r?r:null}({x:i.x-119*o,y:i.y-90.5*o},S,i,o)
if(null!=r){let e=!1
switch(r.type){case Je.F.METHOD_ROOT:e=r.prependToMethodCid!==t.id
break
case Je.F.METHOD_EDGE:e=r.fromMethod!==t.id&&r.toMethod!==t.id
break
case Je.F.METHOD_LEAF:e=r.appendFromMethodCid!==t.id
break
default:(0,u.hu)(!1,"Unsupported drop zone type")}p(e?r:null)}else p(r)
const s={id:t.id,name:t.data.name,position:i}
d(s)}),[S,n,o])
return{dragOverlayComponent:r.createElement(MethodDragOverlay,{methodBeingDragged:c,intersectingDropZone:m,viewportZoom:o}),methodCidBeingDragged:null!==(l=null==c?void 0:c.id)&&void 0!==l?l:null,handleNodeDrag:g,handleNodeDragStop:T}}const tt=(0,F.x)((()=>({handlesInUse:[],invalidMaterialHandles:[],setInvalidMaterialHandles:a.ZT,editingNameMethodCid:null,setEditingNameMethodCid:a.ZT,methodCidBeingDragged:null,selectedMethodSectionFilter:[],isProcedureReadOnly:!1})),"ProcedureEditorContext"),Marker=({id:e,children:t})=>r.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:"15",markerHeight:"15",viewBox:"-10 -10 20 20",orient:"auto",markerUnits:"userSpaceOnUse",refX:"0",refY:"0"},t)
var nt
!function(e){e.INVALID_MATERIAL_EDGE_MARKER="invalid-material-edge-marker"
e.VALID_EDGE_MARKER="valid-edge-marker"
e.SELECTED_MATERIAL_EDGE_MARKER="selected-material-edge-marker"}(nt||(nt={}))
function ProcedureMarkerDefinition({color:e,id:t,strokeWidth:n}){return r.createElement("svg",null,r.createElement("defs",null,r.createElement(Marker,{id:t},r.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}))))}const at=r.createElement("div",null,r.createElement(ProcedureMarkerDefinition,{id:nt.VALID_EDGE_MARKER,color:Z.TG,strokeWidth:1.5}),r.createElement(ProcedureMarkerDefinition,{id:nt.INVALID_MATERIAL_EDGE_MARKER,color:Z.hM,strokeWidth:2}),r.createElement(ProcedureMarkerDefinition,{id:nt.SELECTED_MATERIAL_EDGE_MARKER,color:Z.mu,strokeWidth:2}))
var it=n(175981),rt=n(723635)
const st=function DefaultEdgeLabelRenderer(e){return r.createElement("div",null,r.createElement(b.XQ,null,e.children))}
let ot=st
var lt,ct=n(198964),dt=n(865486),ut=n(924982)
!function(e){e.PARAMETERS="PARAMETERS"
e.MATERIALS="MATERIALS"
e.EQUIPMENT="EQUIPMENT"}(lt||(lt={}))
const mt=[lt.PARAMETERS,lt.MATERIALS,lt.EQUIPMENT]
function getSectionOptionUIString(e){switch(e){case lt.PARAMETERS:return(0,C.ZP)(C.B3.PARAMETER,{plural:!0})
case lt.MATERIALS:return(0,C.ZP)(C.B3.MATERIAL,{plural:!0})
case lt.EQUIPMENT:return(0,C.ZP)(C.B3.EQUIPMENT,{plural:!0})
default:(0,u.hu)(!1,"unsupported method section filter option")}}function getMenuLabel(e,t,n){switch(t.length){case n.length:return"View: All"
case 0:return"View: None"
case 1:return`View: ${getSectionOptionUIString(t[0])}`
default:t.sort(((e,t)=>n.indexOf(e)-n.indexOf(t)))
return`View: ${getSectionOptionUIString(t[0])} + ${t.length-1}`}}function ProcedureMethodSectionFilterDropdown(e){const{filterableSectionOptions:t,selectedMethodSectionFilter:n,setSelectedMethodSectionFilter:a}=e,[i,s]=(0,r.useState)(!1),updateMethodFilterOnSelection=e=>{n.includes(e)?a(n.filter((t=>t!==e))):a([...n,e])},isSelectedStyle=e=>n.includes(e)?pt.filterOptionSelected:pt.filterOptionNotSelected
return r.createElement(ct.ZP,{closeOnInsideClick:!1,closeOnOutsideClick:!0,isOpen:i,onToggle:()=>{s(!i)},menu:r.createElement(dt.ZP,{height:dt.ZP.HEIGHTS.SMALL,width:dt.ZP.WIDTHS.SMALL,isMulti:!0,value:n},t.map((e=>r.createElement(ut.Z,{key:e,className:(0,_.iv)(pt.filterOption,isSelectedStyle(e)),value:e,onSelect:updateMethodFilterOnSelection,contentClassName:(0,_.iv)(isSelectedStyle(e))},r.createElement("div",{className:(0,_.iv)(pt.filterOptionLabel)},getSectionOptionUIString(e)))))),alwaysDropDown:!0},r.createElement(R.Co,{size:R.qE.SMALL,buttonStyle:R.ZJ.TERTIARY_GRAY,text:getMenuLabel(0,n,t),isDropdown:!0,className:(0,_.iv)(pt.floatingFilter,i&&pt.droppedMenu)}))}const pt=_.mM.create({floatingFilter:{zIndex:2e3,background:Z.Cj,border:`1px solid ${Z.pF}`,borderRadius:"4px",position:"absolute",top:"16px",left:"16px"},droppedMenu:{background:Z.tN},filterOption:{padding:"0px 8px 0px 8px",borderRadius:"4px"},filterOptionLabel:{padding:"2px 0px 2px 6px"},filterOptionSelected:{background:Z.Ro},filterOptionNotSelected:{background:Z.Cj}}),ht={drawEdge:it.Vc,generatePath:it.CM,fallback:b.Su,gridRatio:4,nodePadding:45}
const Et=_.mM.create({visibleEdge:{stroke:Z.TG,strokeWidth:"1.5px",strokeDasharray:"4px"},hiddenSelectorEdge:{fill:"none",stroke:"transparent",strokeWidth:28},edgeLabel:{position:"absolute",pointerEvents:"all"},deleteButton:{background:Z.pF,cursor:"pointer",borderRadius:"2px",display:"inline-flex",alignItems:"flex-start",padding:"2px",position:"absolute"},trashCan:{color:Z.pp,width:"12px",height:"12px",padding:"2px"},isSelected:{stroke:Z.mu,strokeWidth:"2px"},unSelectable:{select:"none"},hasValidationErrors:{stroke:Z.hM,strokeWidth:"2px"}})
function ProcedureMethodAddNodeButton(e){const{methodCidBeingDragged:t}=tt.useContext()
return r.createElement(ne.Z,{placement:te.ZH.TOP,renderContent:()=>r.createElement("div",{className:(0,_.iv)(St.addMethodPopover)},`Add ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}`)},r.createElement("button",{className:(0,_.iv)(St.addButton,null!=t&&e.hasValidDropZone&&St.enabledDropZoneShadow),style:{top:`${e.top}px`,left:`${e.left}px`},type:"button",onClick:t=>{t.stopPropagation()
e.onClick()}},r.createElement(V.Z,{className:(0,_.iv)(St.plusSign,null!=t&&e.hasValidDropZone&&St.bluePlusSign),icon:"plus"})))}const St=_.mM.create({addButton:{background:Z.Cj,border:"1px solid",borderColor:Z.pp,cursor:"pointer",borderRadius:"24px",display:"inline-flex",alignItems:"flex-start",padding:"2px",position:"absolute"},enabledDropZoneShadow:{borderColor:Z.Ej,boxShadow:`0px 0px 0px 10px rgba(${(0,Z.a7)(Z.DM)})`},plusSign:{color:Z.pp,width:"12px",height:"12px",marginLeft:"1px"},bluePlusSign:{color:Z.Ej},addMethodPopover:{lineHeight:"18px"}})
const Tt=_.mM.create({edgeLabel:{position:"absolute",fontSize:12,pointerEvents:"all"}})
var gt
!function(e){e[e.ROOT=0]="ROOT"
e[e.LEAF=1]="LEAF"}(gt||(gt={}))
function ProcedureEndsMethodNodeAddNodeButton(e){const{methodCidBeingDragged:t}=tt.useContext(),n=e.nodeLocationType===gt.ROOT,a=n?y.Sy.UPSTREAM:y.Sy.DOWNSTREAM,i=n?-59:279,s=t!==e.methodCid
return r.createElement("div",{className:ee()("nodrag nopan",(0,_.iv)(ft.endAddMethodButton,!s&&makeOpacityStyle(t)))},r.createElement(ProcedureMethodAddNodeButton,{top:16,left:i,hasValidDropZone:s,onClick:()=>{e.onClick(e.methodCid,a)}}),r.createElement("svg",{width:"40",height:"2",viewBox:"0 0 42 2",fill:"none",className:(0,_.iv)(ft.dashedLine,n?ft.rootDashedLine:ft.leafDashedLine,makeOpacityStyle(t))},r.createElement("path",{d:"M0 1L100 1",stroke:Z.TG,strokeDasharray:"2 2",strokeWidth:"2px"})))}const ft=_.mM.create({endAddMethodButton:{position:"absolute",fontSize:12,pointerEvents:"all"},dashedLine:{position:"absolute",top:"24px"},rootDashedLine:{left:"-40px"},leafDashedLine:{left:"239px"}})
var It,At=n(88941),yt=n(901113)
function EditModeFieldActionButtons(e){return r.createElement("span",{tabIndex:-1},r.createElement("a",{className:ee()((0,_.iv)(_t.cancelButtonLink),"metadata-action faded"),onClick:e.onCancel},r.createElement(V.Z,{className:ee()("metadata-action-icon--close",(0,_.iv)(_t.singleButton)),icon:"close"})),e.completeDisabled&&r.createElement("a",{className:ee()((0,_.iv)(_t.completeButtonLink),"metadata-action faded"),onClick:e.onComplete},r.createElement(V.Z,{className:ee()("metadata-action-icon--complete",(0,_.iv)(_t.singleButton)),icon:"check"})))}!function(e){e[e.CANNOT_COMPLETE=0]="CANNOT_COMPLETE"
e[e.REPLACE_WITH_DEFAULT_ON_COMPLETE=1]="REPLACE_WITH_DEFAULT_ON_COMPLETE"
e[e.ALLOW_COMPLETE=2]="ALLOW_COMPLETE"}(It||(It={}))
function DoubleClickEditableTextField(e){const[t,n]=(0,r.useState)(e.value),{isEditing:a,setIsEditing:i}=e
const s=function isTextValidForCompletion(e,t){if(""===e.trim())switch(t){case It.CANNOT_COMPLETE:return!1
case It.ALLOW_COMPLETE:case It.REPLACE_WITH_DEFAULT_ON_COMPLETE:return!0
default:return(0,u.Gp)(!1,`Unexpected completion policy: ${(0,yt.vE)(t)}`)}return!0}(t,e.emptyStringCompletionPolicy)
function handleCancel(){n(e.value)
i(!1)}function handleComplete(){(0,u.Gp)(s,"DoubleClickEditableTextField should have had completable status here.",{value:t})
let a=t
if(e.emptyStringCompletionPolicy===It.REPLACE_WITH_DEFAULT_ON_COMPLETE&&""===a.trim()){a=e.defaultValue
n(a)}e.onComplete(a)
setTimeout((()=>{i(!1)}),0)}const o=r.createElement("div",{className:(0,_.iv)(_t.editor),onBlur:function handleBlur(e){e.stopPropagation()
e.preventDefault()
null!=e.relatedTarget&&e.currentTarget.contains(e.relatedTarget)||handleComplete()}},r.createElement(At.Z,{className:"u-flex-grow",onChange:e=>{n(e.target.value)},onKeyDown:function handleKeyDown(e){q.isEnterKey(e)?handleComplete():q.isEscapeKey(e)?handleCancel():q.isADeleteKey(e)&&e.stopPropagation()},focusOnMount:!0,type:"text",value:t,maxLength:e.maxValueLength,placeholder:e.placeholderText}),r.createElement(EditModeFieldActionButtons,{onCancel:handleCancel,onComplete:handleComplete,completeDisabled:s})),l=r.createElement("div",{className:(0,_.iv)(_t.wrapper),onDoubleClick:function handleStartEdit(t){t.stopPropagation()
n(e.value)
i(!0)}},e.viewer)
return a?o:l}const _t=_.mM.create({singleButton:{width:"12px",height:"12px"},cancelButtonLink:{marginLeft:"8px",marginRight:"4px",padding:"0px"},completeButtonLink:{marginLeft:"4px",padding:"0px"},wrapper:{width:"100%",overflow:"hidden"},editor:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",overflow:"hidden",width:"100%"}})
function ProcedureHandle(e){const{handlesInUse:t,invalidMaterialHandles:n}=tt.useContext(),{procedureValidationErrors:a}=ae.useContext(),i=(0,b.Mi)(),s=(0,r.useMemo)((()=>n.includes(e.id)||function isHandleConnectedToInvalidMaterialEdge(e,t,n){return(0,de.m2)(e)===de.PP.MATERIAL&&null!=t.filter((t=>t.type===M.QV.MATERIAL_EDGE&&(t.sourceHandle===e||t.targetHandle===e))).find((e=>(0,ie.XR)(n,{primaryObjectId:e.id}).length>0))}(e.id,i,a)),[i,n,a,e.id]),o=(0,_.iv)(Ct.handle,!e.isVisible&&Ct.invisibleHandle,t.includes(e.id)&&Ct.connectedHandle,s&&Ct.invalidHandle)
return r.createElement(b.HH,{type:e.type,position:"source"===e.type?b.Ly.Right:b.Ly.Left,className:o,isValidConnection:e=>function isValidConnection(e,t){const n=(0,de.dd)(e.sourceHandle),a=(0,de.dd)(e.targetHandle),i=n.procedureHandleType===a.procedureHandleType
return null!=e.targetHandle&&!t.includes(e.targetHandle)&&i}(e,t),id:e.id})}const Ct=_.mM.create({handle:{width:10,height:10,margin:"0 -1px",border:`1px solid ${Z.TG}`,background:Z.Cj,borderRadius:"50%"},invisibleHandle:{visibility:"hidden"},connectedHandle:{background:Z.TG},invalidHandle:{background:Z.Cj,border:`1px solid ${Z.hM}`,visibility:"visible"}})
function getComponentDisplayName(e){return e.name||r.createElement("span",{className:(0,_.iv)(Rt.emptyNameText)},"<no name>")}function ParameterDisplay(e){const t=e.parameter,n=t.value?`${t.value}${t.unit}`:null
return r.createElement("div",{className:"u-lr-split"},r.createElement("div",{className:(0,_.iv)(Rt.subElementName)},getComponentDisplayName(t)),r.createElement("div",{className:(0,_.iv)(Rt.setPointValue)},n))}function ProcedureMethodSectionElementWrapper({children:e}){const t=ee()(Q,(0,_.iv)(Rt.subElement))
return r.createElement("div",{className:t},e)}function ProcedureMethodSectionWrapper(e){const t=ee()(Q,(0,_.iv)(Rt.subTitle))
return r.createElement("div",{className:z},r.createElement("div",{className:t},e.sectionTitle),e.children)}function ProcedureParametersMethodSection(e){return r.createElement(ProcedureMethodSectionWrapper,{sectionTitle:e.sectionTitle},e.data.parameters.map((e=>r.createElement(ProcedureMethodSectionElementWrapper,{key:e.id},r.createElement(ParameterDisplay,{parameter:e})))))}function ProcedureEquipmentMethodSection(e){return r.createElement(ProcedureMethodSectionWrapper,{sectionTitle:e.sectionTitle},e.data.equipmentList.map((e=>r.createElement(ProcedureMethodSectionElementWrapper,{key:e.id},r.createElement("div",{className:(0,_.iv)(Rt.subElementName)},getComponentDisplayName(e))))))}function ProcedureMaterialsMethodSection(e){const{data:t,handlesInUse:n,isHovered:a,isRootNode:i,methodCid:s,isProcedureReadOnly:o}=e,l=(0,r.useCallback)((e=>function isMaterialHandleConnected(e,t){return t.includes(e)}(e,n)||a&&!o),[n,a,o])
return r.createElement(r.Fragment,null,r.createElement(ProcedureMethodSectionWrapper,{sectionTitle:`${e.sectionTitle} Inputs`},t.materialInputs.map((e=>{const t=(0,de.Wq)(s,e.id,"target")
return r.createElement(ProcedureMethodSectionElementWrapper,{key:e.id},r.createElement("div",{className:(0,_.iv)(Rt.subElementName)},getComponentDisplayName(e)),r.createElement(ProcedureHandle,{type:"target",id:t,isVisible:!i&&l(t)}))}))),r.createElement(ProcedureMethodSectionWrapper,{sectionTitle:`${e.sectionTitle} Outputs`},e.data.materialOutputs.map((e=>{const t=(0,de.Wq)(s,e.id,"source")
return r.createElement(ProcedureMethodSectionElementWrapper,{key:e.id},r.createElement("div",{className:(0,_.iv)(Rt.subElementName)},getComponentDisplayName(e)),r.createElement(ProcedureHandle,{type:"source",id:t,isVisible:l(t)}))}))))}const Rt=_.mM.create({emptyNameText:{color:Z.pF},subTitle:{fontWeight:"bold",fontSize:13,padding:"4px 8px"},subElement:{fontSize:12,padding:"2px 8px",position:"relative",overflow:"visible"},subElementName:{fontSize:12,overflow:"hidden",textOverflow:"ellipsis"},setPointValue:{color:Z.pp}})
function ProcedureMethodSettingsDropdown(e){return r.createElement(ct.ZP,{closeOnInsideClick:!0,closeOnOutsideClick:!0,menu:r.createElement(dt.ZP,{height:dt.ZP.HEIGHTS.SMALL,width:dt.ZP.WIDTHS.MEDIUM},r.createElement(ut.Z,{onSelect:()=>{e.onEditMethodSelection(e.methodCid)}},"Edit details"),r.createElement(ut.Z,{onSelect:()=>{e.onDuplicateClick(e.methodCid)}},"Duplicate"),r.createElement(ut.Z,{onSelect:()=>{e.onDeleteMethod(e.methodCid)}},"Delete")),alwaysDropDown:!0},r.createElement(V.Z,{className:(0,_.iv)(Nt.settingsNodeButton),icon:"settings"}))}const Nt=_.mM.create({settingsNodeButton:{float:"right",padding:"8px",width:"14px",height:"14px",borderRadius:4,background:Z.tN,color:Z.pp,":hover":{color:Z.Rl,cursor:"pointer"}}})
function MethodNameViewer(e){const[t,n]=(0,rt.Z)()
return r.createElement("div",{id:`${e.methodCid}-viewer`,className:(a=(0,_.iv)(Ot.nameAndValidationBox),ee()("nodrag",a))},r.createElement(ProcedureValidationErrorInfoButton,{primaryObject:{id:e.methodCid,objectType:_e.F.METHOD}}),r.createElement("div",{className:ee()(K,makePlaceholderNameClass(e.name),(0,_.iv)(e.isHoverable&&t&&Ot.onHoverName)),...n},getMethodNameOrPlaceholder(e.name)))
var a}function ProcedureMethodEditorViewButton(e){return r.createElement(V.Z,{className:(0,_.iv)(Ot.viewMethodEditorButton),icon:"eye",onClick:()=>{e.onViewMethodEditor(e.methodCid)}})}const Ot=_.mM.create({nameAndValidationBox:{display:"flex",alignItems:"center"},viewMethodEditorButton:{float:"right",zIndex:100,padding:"8px",width:"14px",height:"14px",borderRadius:4,background:Z.tN,color:Z.pp,":hover":{color:Z.Rl,cursor:"pointer"}},onHoverName:{backgroundColor:Z.pF,cursor:"text",paddingRight:"8px",marginRight:"8px"}})
var bt=n(531041)
function ProcedureConnectionLineRenderer({fromX:e,fromY:t,fromPosition:n,fromHandle:a,toX:i,toY:s,toPosition:o,connectionStatus:l,isActivelyConnecting:c}){const{invalidMaterialHandles:d,setInvalidMaterialHandles:u}=tt.useContext()
let m=!1
if(null!=a&&null!=a.id){const t=(0,de.dd)(a.id)
if(t.handleType){m="source"===t.handleType?e<=i+20:e>=i-20}}const p=m&&"invalid"!==l;(0,r.useEffect)((()=>{null!=a&&null!=a.id&&u(!c||p?d.filter((e=>e!==a.id)):bt.default.unique(d.concat(a.id)))}),[a,d,c,p,u])
const[h]=(0,b.OW)({sourceX:e,sourceY:t,sourcePosition:n,targetX:i,targetY:s,targetPosition:o})
return r.createElement("g",null,r.createElement("path",{fill:"none",strokeWidth:1.5,className:(0,_.iv)(p?vt.valid:vt.invalid),d:h}))}const vt=_.mM.create({invalid:{stroke:Z.hM},valid:{stroke:Z.pF}})
const Pt={[M.On.METHOD]:function ProcedureMethodNodeRenderer(e){const t=e.data.cid,[n,a]=(0,rt.Z)(),{procedureValidationErrors:i}=ae.useContext(),s=0!==(0,ie.w3)(i,{id:t,objectType:_e.F.METHOD}).length,{handlesInUse:o,editingNameMethodCid:l,setEditingNameMethodCid:c,methodCidBeingDragged:d,selectedMethodSectionFilter:u,isProcedureReadOnly:m}=tt.useContext(),p=(0,r.useMemo)((()=>getSectionOptionUIString(lt.PARAMETERS)),[]),h=(0,r.useMemo)((()=>getSectionOptionUIString(lt.EQUIPMENT)),[]),E=l===t,S=(0,r.useCallback)((e=>{c(e?t:null)}),[t,c]),T=function useGridLayoutNodeDOMRefCallback(){const{nodeCidToDOMElement:e}=je.useContext()
return(0,r.useCallback)(((t,n)=>{e[t]=n}),[e])}(),g=(0,r.useCallback)((e=>{T(t,e)}),[t,T]),f=!o.includes((0,de.si)(t,"source")),I=!o.includes((0,de.si)(t,"target")),shouldRenderMethodSection=e=>u.includes(e)
return r.createElement("div",{onDoubleClick:function handleDoubleClick(n){n.stopPropagation()
e.data.onEditMethod(t)}},I&&!m&&r.createElement(ProcedureEndsMethodNodeAddNodeButton,{methodCid:t,onClick:e.data.onAddMethod,nodeLocationType:gt.ROOT}),f&&!m&&r.createElement(ProcedureEndsMethodNodeAddNodeButton,{methodCid:t,onClick:e.data.onAddMethod,nodeLocationType:gt.LEAF}),r.createElement("div",{className:makeNodeWrapperWithOpacityClass(e.selected&&!m,d),ref:g},r.createElement("div",{className:nodeNameBoxClass(s)},m?r.createElement(MethodNameViewer,{methodCid:t,name:e.data.name,isHoverable:!1}):r.createElement(DoubleClickEditableTextField,{onComplete:function(n){e.data.onChangeMethodName(t,n.trim())},viewer:r.createElement(MethodNameViewer,{methodCid:t,name:e.data.name,isHoverable:!0}),isEditing:E,setIsEditing:S,value:e.data.name,emptyStringCompletionPolicy:It.ALLOW_COMPLETE,defaultValue:"",maxValueLength:140,placeholderText:"Enter a name"}),!E&&!m&&r.createElement(ProcedureMethodSettingsDropdown,{methodCid:t,onDuplicateClick:e.data.onDuplicateClick,onEditMethodSelection:e.data.onEditMethod,onDeleteMethod:e.data.onDeleteMethod}),m&&r.createElement(ProcedureMethodEditorViewButton,{methodCid:t,onViewMethodEditor:e.data.onEditMethod}),r.createElement(ProcedureHandle,{type:"source",id:(0,de.si)(t,"source"),isVisible:!1}),r.createElement(ProcedureHandle,{type:"target",id:(0,de.si)(t,"target"),isVisible:!1})),r.createElement("div",{className:methodBodyClass(s),...a},shouldRenderMethodSection(lt.MATERIALS)&&r.createElement(ProcedureMaterialsMethodSection,{sectionTitle:(0,C.ZP)(C.B3.MATERIAL),isHovered:n,isRootNode:I,data:e.data,handlesInUse:o,methodCid:t,isProcedureReadOnly:m}),shouldRenderMethodSection(lt.PARAMETERS)&&r.createElement(ProcedureParametersMethodSection,{sectionTitle:p,data:e.data}),shouldRenderMethodSection(lt.EQUIPMENT)&&r.createElement(ProcedureEquipmentMethodSection,{sectionTitle:h,data:e.data}))))}},Lt={[M.QV.METHOD_EDGE]:function ProcedureMethodEdgeRenderer({id:e,data:t,sourceX:n,sourceY:a,targetX:i,targetY:s,selected:o,sourcePosition:l,targetPosition:c,style:d={},markerEnd:m}){var p,h;(0,u.hu)(null!=t,"node.data should always be present")
const{methodCidBeingDragged:E,isProcedureReadOnly:S}=tt.useContext(),[T,g,f]=(0,b.OW)({sourceX:n,sourceY:a,sourcePosition:l,targetX:i,targetY:s,targetPosition:c}),I=T.split("Q ")
let A=g,C=f
if(I.length>1){const e=I.at(I.length-1),t=null==e?void 0:e.split(" ")[0],n=null==t?void 0:t.split(",")
A=Number(null!==(p=null==n?void 0:n[0])&&void 0!==p?p:0)
C=Number(null!==(h=null==n?void 0:n[1])&&void 0!==h?h:0)}const R=C+-9,N=A+-9,O=t.fromMethodCid!==E&&t.toMethodCid!==E,v={stroke:Z.TG,strokeWidth:"1.5px",...makeRawOpacityStyle(E)}
return r.createElement(r.Fragment,null,r.createElement(b.u5,{path:T,markerEnd:`url(#${nt.VALID_EDGE_MARKER})`,style:v}),r.createElement(ot,null,r.createElement("div",{className:ee()("nodrag nopan",(0,_.iv)(Tt.edgeLabel,!O&&makeOpacityStyle(E)))},!S&&r.createElement(ProcedureMethodAddNodeButton,{top:R,left:N,hasValidDropZone:O,onClick:()=>{t.onAddMethodClick(t.fromMethodCid,y.Sy.DOWNSTREAM)}}))))},[M.QV.MATERIAL_EDGE]:function ProcedureMaterialEdgeRenderer(e){const{id:t,data:n,selected:a,sourcePosition:i,targetPosition:s,sourceX:o,sourceY:l,targetX:c,targetY:d,markerStart:m}=e,{allMethodNodesInFlowchart:p,doesMaterialEdgeHaveMatchingMethodEdge:h}=n,{methodCidBeingDragged:E,selectedMethodSectionFilter:S,isProcedureReadOnly:T}=tt.useContext(),[g,f]=(0,rt.Z)(),{procedureValidationErrors:I}=ae.useContext(),A=(0,ie.XR)(I,{primaryObjectId:e.id}).length>0,y=(0,b.SM)().filter((e=>e.type===M.On.METHOD)),{edgeCenterX:C,edgeCenterY:R,svgPathString:N}=(0,r.useMemo)((()=>{if(h){const[e,t,n]=(0,b.OW)({sourceX:o,sourceY:l,sourcePosition:i,targetX:c,targetY:d,targetPosition:s,borderRadius:2})
return{edgeCenterX:t,edgeCenterY:n,svgPathString:e}}const e=(0,it.t4)({sourcePosition:i,targetPosition:s,sourceX:o,sourceY:l,targetX:c,targetY:d,nodes:y,options:ht});(0,u.hu)(null!=e,"Unable to find smart material edge")
return e}),[p,h]),O=A?nt.INVALID_MATERIAL_EDGE_MARKER:a&&!T?nt.SELECTED_MATERIAL_EDGE_MARKER:nt.VALID_EDGE_MARKER
return r.createElement(r.Fragment,null,S.includes(lt.MATERIALS)&&r.createElement(r.Fragment,null,r.createElement("path",{...f,className:ee()("react-flow__edge-path-selector",(0,_.iv)(Et.hiddenSelectorEdge,T&&Et.unSelectable)),d:N}),r.createElement("path",{...f,className:ee()("react-flow__edge-path",(0,_.iv)(Et.visibleEdge,T&&Et.unSelectable,a&&!T&&Et.isSelected,A&&Et.hasValidationErrors,makeOpacityStyle(E))),d:N,markerEnd:`url(#${O})`,markerStart:m}),r.createElement(ot,null,(g||a)&&!T&&r.createElement("div",{className:ee()("nodrag nopan",(0,_.iv)(Et.edgeLabel,makeOpacityStyle(E))),style:{top:R-10+"px",left:C-10+"px"}},r.createElement("div",{...f,className:(0,_.iv)(Et.deleteButton),onClick:e=>{e.stopPropagation()
n.onDeleteMaterialEdge(t)}},r.createElement(V.Z,{className:(0,_.iv)(Et.trashCan),icon:"delete"}))))))}}
function isInitialFlowchart(e){const t=1===e.nodes.length,n=0===e.edges.length
return t&&n&&function isMethodNodeEmpty(e){const t=["name","description","materialInputs","materialOutputs","parameters","equipmentList"]
return o()((0,G.Z)(e,...t),(0,G.Z)((0,y.gZ)(0,0),...t))}(e.nodes[0])}function ProcedureFlowchartEditor(e){const t=(0,b._K)(),n=(0,b.AC)(),{x:a,y:i,zoom:s}=(0,b.Sj)(),{setFlowchart:o,reactFlowWrapper:l,isProcedureReadOnly:c}=e,{nodes:d,edges:m}=e.flowchart,[p,h]=(0,r.useState)([]),{editingNameMethodCid:E,setEditingNameOnExistingMethod:S,autofocusEditNameOnNewMethod:T}=function useEditingMethodNameState(e){const[t,n]=(0,r.useState)(null),a=(0,r.useCallback)((e=>{setTimeout((()=>{n(e)}))}),[]);(0,r.useEffect)((()=>{isInitialFlowchart(e)&&a(e.nodes[0].cid)}),[])
return{editingNameMethodCid:t,setEditingNameOnExistingMethod:n,autofocusEditNameOnNewMethod:a}}(e.flowchart),[g,f]=(0,r.useState)(mt),I=(0,r.useCallback)((e=>function rendererPointToPoint({x:e,y:t},[n,a,i]){return{x:e*i+n,y:t*i+a}}(e,n.getState().transform)),[n]),A=(0,r.useCallback)((e=>t.project(e)),[t]),{methodNodeCallbacks:C,methodEdgeCallbacks:R,materialEdgeCallbacks:N}=function useProcedureFlowchartEditorCustomCallbacks(e){const{flowchart:t,setFlowchart:n,startEditMethod:a,autofocusEditNameOnNewMethod:i}=e,s=(0,r.useCallback)((e=>{const{updatedFlowchart:a,newMethodCid:r}=(0,y.QI)(t,e)
n(a)
i(r)}),[t,n,i]),o=(0,r.useCallback)(((e,a)=>{n((0,y.FX)(t,e,a))}),[t,n]),l=(0,r.useCallback)(((e,a)=>{const{updatedFlowchart:r,newMethodCid:s}=(0,y.Df)(t,e,{appendDirection:a})
n(r)
i(s)}),[t,n,i])
return{methodNodeCallbacks:{onDuplicateClick:s,onChangeMethodName:o,onAddMethod:l,onEditMethod:a,onDeleteMethod:(0,r.useCallback)((e=>{n((0,y._y)(t,e))}),[t,n])},methodEdgeCallbacks:{onAddMethodClick:l},materialEdgeCallbacks:{onDeleteMaterialEdge:(0,r.useCallback)((t=>{n((0,y.pQ)(e.flowchart,t))}),[e.flowchart,n])}}}({flowchart:e.flowchart,setFlowchart:o,startEditMethod:e.startEditMethod,autofocusEditNameOnNewMethod:T}),{convertedProcedureGraph:O,nodeCidToComputedCanvasPos:P,maxHeightByRow:L}=useConvertedGridLayoutGraph(e.flowchart,C,R,N,{clientPointToCanvasPoint:A,canvasPointToClientPoint:I,clientOriginPos:{x:a,y:i}}),{dragOverlayComponent:D,methodCidBeingDragged:w,handleNodeDrag:F,handleNodeDragStop:k}=useMethodDragOverlay(e.flowchart,o,l,I,P,L,s),{handleNodeSelectionChanges:B,handleEdgeSelectionChanges:Z,handleDeleteSelection:G,convertedProcedureGraphWithSelected:V}=function useProcedureFlowchartEditorSelection(e,t,n,a){const[i,s]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),c=(0,r.useCallback)((t=>{const n=(0,y.AL)(e.nodes).map((({cid:e})=>e)),a=t.filter((e=>e.selected)).map((({id:e})=>e)),r=t.filter((e=>!e.selected)).map((({id:e})=>e))
s(i.filter((e=>!r.includes(e))).concat(a).filter((e=>n.includes(e))))}),[e.nodes,i]),d=(0,r.useCallback)((t=>{const n=(0,y.yF)(e.edges).map((({id:e})=>e)),a=t.filter((e=>e.selected)).map((({id:e})=>e)),i=t.filter((e=>!e.selected)).map((({id:e})=>e))
l(o.filter((e=>!i.includes(e))).concat(a).filter((e=>n.includes(e))))}),[e.edges,o]),u=(0,r.useCallback)((e=>{a()
if(e.nodes.filter((e=>!i.includes(e.cid))).length<e.nodes.length){e.nodes.filter((e=>i.includes(e.cid))).forEach((t=>{e=(0,y._y)(e,t.cid)}))
s([])}return e}),[i,a]),m=(0,r.useCallback)((e=>{const n=e.edges.filter((e=>!(o.includes(e.id)&&e.type!==M.QV.METHOD_EDGE)))
if(n.length<e.edges.length){e.edges=n
t(e)
l([])}return e}),[o,t])
return{handleNodeSelectionChanges:c,handleEdgeSelectionChanges:d,handleDeleteSelection:(0,r.useCallback)((()=>{let n=u(e)
n=m(n)
t(n)}),[e,m,u,t]),convertedProcedureGraphWithSelected:{nodes:(0,r.useMemo)((()=>n.nodes.map((e=>({...e,selected:i.includes(e.id)})))),[n.nodes,i]),edges:(0,r.useMemo)((()=>n.edges.map((e=>({...e,selected:o.includes(e.id)})))),[n.edges,o])}}}(e.flowchart,o,O,e.stopEditMethod),H=(0,r.useCallback)((e=>{const t=e.filter((e=>"select"===e.type))
B(t)}),[B]),W=(0,r.useCallback)((e=>{const t=e.filter((e=>"select"===e.type))
Z(t)}),[Z]),{handleConnectStart:Y,handleConnectEnd:$,handleConnect:K,materialEdgeConnectionLine:z}=function useProcedureMaterialEdgeConnection(e,t){const[n,a]=(0,r.useState)(!1)
return{handleConnectStart:(0,r.useCallback)((()=>{a(!0)}),[]),handleConnectEnd:(0,r.useCallback)((()=>{a(!1)}),[]),handleConnect:(0,r.useCallback)((({source:n,target:a,sourceHandle:i,targetHandle:r})=>{(0,u.hu)(null!=n&&null!=a&&null!=i&&null!=r,"Invalid connection")
if(!(0,y.Pz)(n,a,(0,y.TP)(e.edges)))return
const s=(0,de.lK)(i,r)
if(e.edges.find((e=>e.id===s)))return
const o={id:s,fromMethodCid:n,toMethodCid:a,type:(0,de.xD)(i),sourceHandle:i,targetHandle:r}
t({nodes:e.nodes,edges:[...e.edges,o]})}),[e.edges,e.nodes,t]),materialEdgeConnectionLine:(0,r.useCallback)((e=>r.createElement(ProcedureConnectionLineRenderer,{...e,isActivelyConnecting:n})),[n])}}(e.flowchart,o),Q=(0,r.useMemo)((()=>{const e=new Set
for(const t of m){e.add(t.sourceHandle)
e.add(t.targetHandle)}return[...e]}),[m]),j=(0,r.useMemo)((()=>({handlesInUse:Q,invalidMaterialHandles:p,setInvalidMaterialHandles:h,editingNameMethodCid:E,setEditingNameMethodCid:S,methodCidBeingDragged:w,selectedMethodSectionFilter:g,isProcedureReadOnly:c})),[E,Q,p,h,w,S,g,c])
return 0===d.length?r.createElement("div",{className:(0,_.iv)(Dt.procedureGetStartedButtun)},r.createElement(ProcedureAddFirstMethodCard,{onClick:()=>{const e=(0,y.gZ)(300,300)
o({edges:m,nodes:[...d,e]})
T(e.cid)}})):r.createElement(tt.Provider,{value:j},r.createElement(ProcedureMethodSectionFilterDropdown,{selectedMethodSectionFilter:g,setSelectedMethodSectionFilter:f,filterableSectionOptions:mt}),r.createElement(U.Z,{width:e.reactFlowContainerWidth,containerWidthForControls:e.reactFlowContainerWidth,onKeyDown:e=>{if(q.isADeleteKey(e)&&!c){G()
e.preventDefault()}}},r.createElement(b.x$,{proOptions:x.l,nodesConnectable:!c,nodesDraggable:!c,selectNodesOnDrag:!1,elementsSelectable:!0,multiSelectionKeyCode:["Meta","ShiftLeft","ShiftRight"],nodes:V.nodes,edges:V.edges,nodeTypes:Pt,edgeTypes:Lt,onNodesChange:H,onNodeDragStop:k,onNodeDrag:F,onEdgesChange:W,onConnect:K,onConnectStart:Y,onConnectEnd:$,connectionLineComponent:z,panOnScroll:!0,panOnDrag:!0,selectionOnDrag:!1,zoomOnScroll:!1,zoomOnPinch:!0,defaultViewport:{x:40,y:200,zoom:1}},at,r.createElement(v.Z,{className:(0,_.iv)(Dt.controls),showInteractive:!1}))),D)}function ProcedureEditor(e){const{flowchart:t,setFlowchart:n,procedureId:a}=e,i=(0,r.useRef)(null),{width:s}=B.y({ref:i}),{editingMethodCid:o,setEditingMethodCid:l}=k.useContext(),[c,d]=(0,r.useState)(We.METADATA),stopEditMethod=()=>{null!=o&&trackToggledProcedureViewEvent(a,L.D2.PROCEDURE_DESIGNER_DETAILS)
l(null)
d(We.METADATA)},u=(0,r.useCallback)((e=>{n((0,y.PQ)(t,e))}),[t,n]),m=(0,r.useMemo)((()=>(0,y.kz)(e.flowchart.nodes)),[e.flowchart.nodes]),p=null!=o&&null!=m.find((({cid:e})=>e===o))
return r.createElement("div",{className:(0,_.iv)(Dt.wrapper)},p?r.createElement("div",{className:(0,_.iv)(Dt.methodEditorWrapper)},P.ZP.PROCEDURES_ENABLE_M1?r.createElement(MethodEditor,{key:o,methods:m,editingMethodCid:o,setEditingMethodCid:l,onChangeMethod:u,onCloseMethodEditor:stopEditMethod,procedureTemplateCollectionId:e.templateCollectionId,isProcedureReadOnly:e.isProcedureReadOnly,isProcedureArchived:e.isProcedureArchived,flowchart:t}):r.createElement(MethodEditorM0,{methods:m,editingMethodCid:o,setEditingMethodCid:l,currentTab:c,setCurrentTab:d,onChangeMethod:u,onCloseMethodEditor:stopEditMethod,procedureTemplateCollectionId:e.templateCollectionId,isProcedureReadOnly:e.isProcedureReadOnly,isProcedureArchived:e.isProcedureArchived,flowchart:t})):r.createElement("div",{ref:i,className:(0,_.iv)(Dt.flowchartEditorWrapper)},r.createElement(b.tV,null,r.createElement(GridLayoutContextProvider,null,null!=s&&r.createElement(ProcedureFlowchartEditor,{reactFlowContainerWidth:s,startEditMethod:e=>{l(e)
trackToggledProcedureViewEvent(a,L.D2.PROCEDURE_DESIGNER_FLOWCHART)},stopEditMethod,reactFlowWrapper:i,...e})))))}const Dt=_.mM.create({wrapper:{width:"100%",height:"100vh",background:Z.bs,position:"relative",overflow:"hidden"},flowchartEditorWrapper:{width:"100%",height:"100%",zIndex:0,position:"relative"},methodEditorWrapper:{width:"100%",height:"100%",zIndex:1,position:"relative"},controls:{bottom:"60px",left:"1px"},procedureGetStartedButtun:{top:"200px",left:"40px",position:"absolute"}})
var Mt=n(402360),wt=n(996447),Ft=n(108696),kt=n(805937),Ut=n(62335),xt=n(955080),Bt=n(103593),Zt=n(102176),qt=n(929123),Gt=n(59860)
function DuplicateProcedureModal(e){const[t,n]=(0,r.useState)(e.sourceProcedureName),[a,i]=(0,r.useState)(e.sourceProcedureTemplateCollectionId)
return r.createElement(N.ZP,{title:"Duplicate procedure",buttons:[{text:"Duplicate",submit:!0}],onRequestSubmit:()=>{e.onRequestSubmit({name:t,templateCollectionId:a})},onRequestClose:()=>{e.onRequestClose()}},r.createElement(Zt.Z,null,r.createElement(Gt.Z,null,r.createElement(Bt.Z,{md:6},r.createElement(qt.Z,null,"Name"),r.createElement("input",{type:"text",value:t,onChange:e=>{n(e.target.value)},autoFocus:!0})),r.createElement(Bt.Z,{md:6},r.createElement(qt.Z,null,"Template collection"),r.createElement(xt.Z,{value:a,onChange:e=>{i(e.id)}})))))}var Vt=n(124640),Ht=n(369706),Wt=n(413714),Yt=n(502633)
function ProcedureEditorHeader(e){const{isSaving:t,isProcedureDirty:n}=k.useContext(),i=(0,d.ZP)(e.procedureMetadata),{movable:s,archivable:o,unarchivable:l}=e.procedureMetadata.permissions,c=!e.isProcedureReadOnly&&s?[{icon:"move",contents:r.createElement("span",null,"Move"),onSelect:()=>{(0,Yt.Z)(Ut.c,{title:"Move procedure",onRequestSubmit:e.onMove,onRequestClose:a.ZT,initialTemplateCollectionId:e.procedureMetadata.templateCollectionId})}}]:[],u={icon:"audit-trail",contents:r.createElement("span",null,kt.QU),onSelect:()=>{Ft.dV([e.procedureMetadata.id])}},m=e.isProcedureReadOnly?[]:[{icon:"copy",contents:r.createElement("span",null,"Duplicate"),onSelect:()=>{(0,Yt.Z)(DuplicateProcedureModal,{sourceProcedureName:e.procedureMetadata.name,sourceProcedureTemplateCollectionId:e.procedureMetadata.templateCollectionId,onRequestClose:a.ZT,onRequestSubmit:e.onDuplicate})}}],p=o&&!i?[{icon:"archive",contents:r.createElement("span",null,"Archive"),onSelect:()=>{wt.bA({items:[e.procedureMetadata],onArchive:e.onArchive})}}]:l&&i?[{icon:"unarchive",contents:r.createElement("span",null,"Unarchive"),onSelect:()=>{e.onUnarchive()}}]:[]
return r.createElement("div",{className:(0,_.iv)($t.headerBar)},r.createElement("div",{className:(0,_.iv)($t.nameAndIconGroup)},r.createElement(V.Z,{className:(0,_.iv)($t.icon),icon:Vt.m.Recipe}),r.createElement(Re.R6,{className:(0,_.iv)($t.name)},e.isProcedureReadOnly?r.createElement("div",{className:(0,_.iv)($t.archivedProcedureName)},r.createElement("span",null,e.procedureMetadata.name),(0,d.ZP)(e.procedureMetadata)&&r.createElement(Mt.Z,{item:{id:e.procedureMetadata.id,archiveData:e.procedureMetadata.archiveData,name:e.procedureMetadata.name}})):r.createElement(Ht.Z,{requestChange:e.onRename,value:e.procedureMetadata.name,maxLength:140,isDisabled:e.isProcedureReadOnly}))),r.createElement("div",{className:(0,_.iv)($t.saveStateIndicator)},t?"Saving...":n&&"Unsaved changes"),r.createElement("div",{className:(0,_.iv)($t.buttonGroup)},r.createElement(ne.Z,{placement:te.ZH.TOP,renderContent:()=>r.createElement("div",{className:(0,_.iv)($t.disablePlanExperimentPopover)},!e.isProcedureValid&&`Fix all errors in this ${(0,C.ZP)(C.B3.TITLE,{stringCase:C.P8.LOWER})} before planning an experiment`),isDisabled:e.isProcedureValid||e.isProcedureReadOnly},r.createElement(R.Co,{className:(0,_.iv)($t.button),buttonStyle:R.ZJ.TERTIARY_GRAY,size:R.qE.MEDIUM,text:"Plan experiment",onClick:e.onPlanExperimentClick,disabled:!e.enablePlanExperimentButton})),r.createElement("div",{className:(0,_.iv)($t.rightButtonGroup)},r.createElement(R.Co,{className:(0,_.iv)($t.button),buttonStyle:R.ZJ.TERTIARY_GRAY,size:R.qE.MEDIUM,text:"Exit",onClick:e.onExitClick}),r.createElement(Wt.Z,{options:[...m,...c,...p,u],menuProps:{dropLeft:!0},buttonProps:{size:R.qE.MEDIUM}}))))}const $t=_.mM.create({headerBar:{background:Z.Cj,borderBottom:`1px solid ${Z.TG}`,display:"flex",alignItems:"center",flexGrow:1},button:{marginLeft:5,marginRight:5},nameAndIconGroup:{display:"flex",marginLeft:10,marginTop:15,marginBottom:10,whiteSpace:"nowrap",flexGrow:1},name:{flexGrow:.3},archivedProcedureName:{justifyContent:"space-between"},buttonGroup:{display:"flex",justifyContent:"flex-end",marginTop:10,marginBottom:10,marginRight:15},rightButtonGroup:{borderLeft:`1px solid ${Z.pF}`,display:"flex",marginLeft:10,paddingLeft:10},icon:{height:20,marginRight:10,color:Z.pF,marginTop:8},disablePlanExperimentPopover:{borderRadius:3,background:Z.Cj,boxShadow:`0px 2px 8px 2px ${(0,Z.a7)(Z.pF,.8)};`,width:"170px",textAlign:"center",lineHeight:"14px",margin:"-2px 0px"},saveStateIndicator:{color:Z.pF,marginRight:"4px"}})
var Kt,zt,Qt=n(635439),jt=n(400783),Jt=n(379346)
!function(e){e.PARAMETERS="parameters"
e.MATERIAL_INPUTS="materialInputs"
e.EQUIPMENT="equipment"}(Kt||(Kt={}))
!function(e){e[e.CONDITIONS_ON_ROWS=0]="CONDITIONS_ON_ROWS"
e[e.CONDITIONS_ON_COLUMNS=1]="CONDITIONS_ON_COLUMNS"}(zt||(zt={}))
class ExperimentPlanBuilder{constructor(e){this.buildParams=e}buildExperimentPlan(){this.validateBuildParameters()
const e=[]
for(let t=0;t<this.buildParams.numConditions;t++){const n=this.buildAllPlannedMethodInstancesForCondition(t)
e.push(n)}return{experimentName:this.buildParams.experimentName,numReplicates:this.buildParams.numReplicates,replicatesPerCondition:this.buildParams.replicatesPerCondition,experimentPlanPerCondition:e,metadata:{organizationId:this.buildParams.organizationId,folderId:this.buildParams.folderId}}}validateBuildParameters(){(0,u.hu)(""!==this.buildParams.experimentName&&this.buildParams.experimentName.length<=140,"Expected length of experiment name to be between 1 and 140");(0,u.hu)(this.buildParams.numConditions>0,"Expected at least one condition");(0,u.hu)(this.buildParams.numReplicates>0,"Expected at least one replicate");(0,u.hu)(this.buildParams.replicatesPerCondition.length===this.buildParams.numConditions,"Expected there to be a replicate value for each condition");(0,u.hu)(Jt.ZP.isFolder(this.buildParams.folderId),"Expected folderId to be the ID of a folder");(0,u.hu)(Jt.ZP.isEntity(this.buildParams.organizationId),"Expected organizationId to be the ID of an entity");(0,u.hu)(Object.values(this.buildParams.experimentalInputs).every((e=>e.values.length===this.buildParams.numConditions)),"Expected there to be one set of values per condition")}buildAllPlannedMethodInstancesForCondition(e){const t=[]
for(const[n,a]of Object.entries(this.buildParams.experimentalInputs))t.push({...this.buildPlannedMethodInstanceForCondition(a.values[e],a.defaultValues,a.ids),methodId:n})
return t}buildPlannedMethodInstanceForCondition(e,t,n){const a={[Kt.PARAMETERS]:[],[Kt.EQUIPMENT]:[],[Kt.MATERIAL_INPUTS]:[]}
for(const i of Object.values(Kt)){const r=e[i],s=t[i],o=n[i],l=o.length;(0,u.hu)(r.length===l&&s.length===l,"Expected every field to have a value and default value")
for(let e=0;e<l;e++){const t=o[e]
a[i].push({sourceId:t,value:r[e]||s[e]})}}return{parameterValues:a[Kt.PARAMETERS],materialInputs:a[Kt.MATERIAL_INPUTS],equipmentInputs:a[Kt.EQUIPMENT]}}}var Xt=n(605604),en=n(69258),tn=n(517967),nn=n(851422),an=n(459830),rn=n(204026),sn=n(947212),on=n(714700)
const ln=i.Ps`
  query ProcedureExperimentalInputsModalSettingsQuery($folderId: StrictString!)
  @skipAudit
  @engComponent(name: PROJECT_FOLDER) {
    folder(id: $folderId) {
      ... on FolderNode {
        id
        name
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,E.f)("InaccessibleInfo").fragment}
`,cn={hideFormulaBox:!0,isCompactBottomSpacing:!0,isCollapsible:!0,isLeftAlignRowHeader:!0,locked:!1}
function InfoPopOver(e){return r.createElement(ne.Z,{placement:te.ZH.RIGHT,renderContent:()=>r.createElement("div",{className:(0,_.iv)(dn.infoTooltip)},e.tooltipText)},r.createElement(V.Z,{className:(0,_.iv)(dn.infoIcon),icon:"info",altText:"info button",color:Z.pp}))}function DefaultColumnLabel(e){return r.createElement("div",{className:(0,_.iv)(dn.contentRow)},r.createElement("span",null,e.label),r.createElement(InfoPopOver,{tooltipText:"Changes to the default value will\nbe applied to all conditions."}))}function getReplicateCellValue(e){if(null==e.text)return null
const t=Number.parseInt(e.text,10)
return Number.isNaN(t)||t>fn||t<=0?null:t}function ReplicateTable(e){const{numConditions:t,replicatesPerCondition:n,setReplicatesPerCondition:i}=e,[s,o]=(0,r.useState)(e.replicatesPerCondition[0]),l=function makeInitialReplicateTable(e,t,n,a){const makeValueCell=e=>({text:e.toString(),locked:!1,align:"right",foregroundColor:Z.Rl,bold:!1}),i=[r.createElement(RowLabel,{name:"Number of replicates"})],s=["Default"].concat(fillArray(t,(e=>`Condition ${e+1}`))),o=[{renderedLabel:r.createElement(DefaultColumnLabel,{label:"Default"})}],l=[[makeValueCell(n)].concat(fillArray(t,(e=>makeValueCell(a[e]))))]
return{name:e,_firstColumnWidth:170,widths:s.map((()=>120)),rowLabels:i,_rowHeader:r.createElement(en.Z,{key:"Replicates",index:0,dim:nn.TableDimension.COLUMN,label:"Replicates per condition",numDims:s.length}),columnLabels:s,columnConstraints:o,headerCol:!0,headerRow:!1,table:l,lockedDims:!0,allowColumnEdits:!1}}("Replicates per condition",t,s,n)
return r.createElement("div",{className:"u-flex-display mediocre"},r.createElement("div",{className:(0,_.iv)(dn.maxWidth)},r.createElement(Xt.ZP,{...Xt.W9,...cn,table:l,cid:"doe-replicates",updateHandler:(e,{table:t})=>{!function updateTableCells(e,t,n,a,i){const r=[...a],s=e.table[0],o=getReplicateCellValue(s[0]),l=null!=o&&o!==t
for(let e=0;e<a.length;e++){const t=getReplicateCellValue(s[e+1])
r[e]=null!=t?t:r[e]
r[e]=l?o:r[e]}l&&n(o)
i(r)}(t,s,o,n,i)},storeState:a.ZT})))}function ProcedureExperimentalPlanSettings(e){return r.createElement("div",null,r.createElement(Re.BB,{className:(0,_.iv)(dn.header)},"Experiment plan settings"),r.createElement("div",{className:(0,_.iv)(dn.contentRow,dn.paddingTop)},r.createElement("div",{className:(0,_.iv)(dn.fieldLabelAndValue)},r.createElement("div",{className:(0,_.iv)(dn.contentRow)},r.createElement(Me.Z,{label:"Conditions per unit operation"}),r.createElement(InfoPopOver,{tooltipText:"Conditions per unit operation cannot be changed once the experiment plan is started."})),r.createElement("p",null,e.numConditions))),r.createElement(ReplicateTable,{...e}))}function isNameEmpty(e){return null==e||0===e.trim().length}function ProcedureExperimentNameField(e){function normalizeName(e){return e.trim()}return r.createElement(Ee.Z,{className:ee()(e.className,(0,_.iv)(dn.text,isNameEmpty(e.experimentName)&&dn.nameFieldError)),hasError:isNameEmpty(e.experimentName),onBlur:t=>{e.setExperimentName(normalizeName(t.target.value))},onKeyPress:t=>{"Enter"===t.key&&e.setExperimentName(normalizeName(e.experimentName))},value:e.experimentName,onChange:t=>{e.setExperimentName(t.target.value)}})}function ProcedureExperimentalExecutionSettings(e){const t=(0,on.u)()
return r.createElement("div",{className:(0,_.iv)(dn.experimentalExecutionSettings)},r.createElement(Re.BB,{className:(0,_.iv)(dn.header)},"Experiment execution settings"),r.createElement("div",{className:(0,_.iv)(dn.contentRow)},r.createElement("div",{className:(0,_.iv)(dn.fieldLabelAndValue,dn.maxWidth,dn.paddingTop)},r.createElement(Me.Z,{className:(0,_.iv)(dn.text,dn.fieldLabel),label:"Experiment name",isRequired:!0}),r.createElement(ProcedureExperimentNameField,{className:(0,_.iv)(dn.maxWidth),experimentName:e.experimentName,setExperimentName:e.setExperimentName}))),r.createElement("div",{className:(0,_.iv)(dn.contentRow,dn.paddingTop)},r.createElement("div",{className:(0,_.iv)(dn.fieldLabelAndValue)},r.createElement(Me.Z,{className:(0,_.iv)(dn.text,dn.fieldLabel),label:"Folder",isRequired:!0}),r.createElement(rn.Z,{allowCreateFolder:!0,allowNone:!1,enableRedesign:!0,showInventory:!0,showNotebook:!0,showRegistries:!1,value:e.folderId,onChange:t=>{e.setFolderId(t.target.value)}})),r.createElement("div",{className:ee()((0,_.iv)(dn.fieldLabelAndValue),(0,_.iv)(dn.secondColumnFieldLabelAndValue))},r.createElement(sn.Z,{ownerChoices:t,owner:e.organization,onOwnerChanged:e.setOrganization,className:(0,_.iv)(dn.ownerDropdown),ownerLabel:"Organization"}))))}function ProcedureExperimentalInputsModalSettings(e){return P.ZP.PROCEDURES_ENABLE_M1?r.createElement("div",{className:(0,_.iv)(dn.settingsTabContent)},r.createElement(ProcedureExperimentalPlanSettings,{...e}),r.createElement(ProcedureExperimentalExecutionSettings,{...e})):r.createElement("div",{className:(0,_.iv)(dn.settingsTabContent,dn.settingsTabAlignment)},r.createElement(Re.BB,{className:(0,_.iv)(dn.header)},"Experiment Settings"),r.createElement("div",null,r.createElement("div",{className:(0,_.iv)(dn.contentRow)},r.createElement("div",{className:(0,_.iv)(dn.fieldLabelAndValue)},r.createElement(Me.Z,{label:"Conditions per unit operation"}),r.createElement("p",null,e.numConditions)),r.createElement("div",{className:ee()((0,_.iv)(dn.fieldLabelAndValue),(0,_.iv)(dn.secondColumnFieldLabelAndValue))},r.createElement(Me.Z,{label:"Replicates per condition"}),r.createElement("p",null,e.replicatesPerCondition[0]))),r.createElement("div",{className:(0,_.iv)(dn.contentRow)},r.createElement("div",{className:(0,_.iv)(dn.fieldLabelAndValue)},r.createElement(Me.Z,{label:"Project folder"}),r.createElement(h.ZP,{query:ln,variables:{folderId:e.folderId},renderLoading:()=>r.createElement(le.Z,null)},(t=>{const{folder:n}=t
let a
if((0,S.CZ)(n)){(0,u.Gp)(!1,`Expected folder ${e.folderId} to be accessible.`)
a="No access"}else a=n.name
return r.createElement("p",null,r.createElement(V.Z,{icon:an.FOLDER,className:(0,_.iv)(dn.folderIcon)}),a)}))),r.createElement("div",{className:ee()((0,_.iv)(dn.fieldLabelAndValue),(0,_.iv)(dn.secondColumnFieldLabelAndValue))},r.createElement(Me.Z,{label:"Organization"}),r.createElement("p",null,e.organization.name)))))}const dn=_.mM.create({contentRow:{display:"flex",flexDirection:"row",width:"55%",alignContent:"center"},text:{fontSize:"13px",fontWeight:400,lineHeight:"16px",textAlign:"left"},fieldLabel:{fontWeight:600},fieldLabelAndValue:{display:"flex",flexDirection:"column",marginBottom:"4px",whiteSpace:"nowrap",width:"50%"},folderIcon:{paddingRight:"4px",color:Z.pp},header:{fontSize:"14px",fontWeight:400,color:Z.Rl,lineHeight:"16px"},secondColumnFieldLabelAndValue:{marginLeft:"24px"},maxWidth:{width:"100%"},paddingTop:{paddingTop:"16px"},largerPaddingTop:{paddingTop:"20px"},settingsTabContent:{display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"flex-start",paddingTop:"24px",paddingLeft:"24px",width:"90%",height:"100%",overflow:"hidden"},settingsTabAlignment:{alignContent:"center"},experimentalExecutionSettings:{display:"flex",flexDirection:"column",alignContent:"space-between",width:"70%",paddingTop:"24px"},nameFieldError:{border:`1px solid ${Z.hM}`},ownerDropdown:{flex:1},infoTooltip:{lineHeight:"14px",whiteSpace:"pre-line",textAlign:"center",maxWidth:"254px"},infoIcon:{color:Z.TG,width:"16px",height:"16px",marginLeft:"8px",display:"flex"}})
function ProcedureExperimentConfirmCancelModal(e){return r.createElement(N.ZP,{title:"Leave experiment plan?",buttons:[{text:"Leave without saving",submit:!0,style:R.ZJ.TERTIARY_GRAY},{text:"Go back to experiment plan",submit:!1,style:R.ZJ.PRIMARY,onClick:()=>{e.onRequestClose()}}],onRequestSubmit:()=>{e.onRequestSubmit({})},onRequestClose:e.onRequestClose},r.createElement("p",{className:(0,_.iv)(un.modalBody)},"If you leave, any changes you've made to this experiment plan will not be saved."))}const un=_.mM.create({modalBody:{fontSize:"14px"}})
var mn
!function(e){e.EXPERIMENT_PLAN="Plan"
e.SETTINGS="Settings"}(mn||(mn={}))
const stringifyParameter=e=>null==e.value?"":String(e.value),pn="No change",hn=(0,F.x)((()=>{(0,u.hu)(!1,"This context cannot be skipped")}),"ExperimentalInputsContext")
function fillArray(e,t){return Array.from(Array(e),((e,n)=>t(n)))}function RowLabel(e){return r.createElement("span",{className:"mediocre-tableEditable-axisCell-label-text"},r.createElement("span",{className:ee()(["mediocre-tableEditable-axisCell--header",(0,_.iv)(En.parameterValueCellName)])},e.name),e.unit&&r.createElement("span",{className:ee()(["u-tiny-padding-left","mediocre-tableEditable-axisCell--fontWeightRegular",(0,_.iv)(En.parameterUnitCellName)])},`(${e.unit})`))}function makeInitialTable(e,t,n,a,i,s,o,l){const c=[...t.names[n]],d=n===Kt.MATERIAL_INPUTS?function getMaterialInputIdsMappedFromUpstreamMethod(e,t){const n=t.edges.filter((t=>t.type===M.QV.MATERIAL_EDGE&&t.toMethodCid===e.cid)).map((({targetHandle:e})=>e))
return e.materialInputs.filter((t=>n.includes((0,de.Wq)(e.cid,t.id,"target")))).map((({id:e})=>e))}(o,l):[],u=c.length,m="left",p=[...t.defaultValues[n]],h=p.map((e=>({text:e,locked:!0,align:m,foregroundColor:Z.Rl,bold:!1}))),E=[...t.units[n]],S=(e=>e===Kt.PARAMETERS)(n),T=[i].concat(fillArray(e,(e=>`Condition ${e+1}`))),g=s===zt.CONDITIONS_ON_COLUMNS,f=c.map(((e,t)=>r.createElement(RowLabel,{name:e,key:e,unit:S?E[t]:""}))),I=c.map(((e,t)=>E[t]?`${e} (${E[t]})`:e)),A=g?T:I,makeValueCell=(e,a)=>{let i=t.values[e][n][a]
i=i===p[a]?pn:i
const s=d.includes(t.ids[n][a])
let o
s&&(o=r.createElement(tn.ZP,{state:tn.uY.VALID_WITH_TRIANGLE,message:`This material is mapped from another ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})} and cannot be varied in the experiment.`,title:"",location:tn.rM.CELL}))
return{text:i,locked:s,userAnnotationIndicator:o,align:m,foregroundColor:i===pn?Z.TG:Z.Rl}}
let y
y=g?fillArray(u,(t=>[h[t]].concat(fillArray(e,(e=>makeValueCell(e,t)))))):[h].concat(fillArray(e,(e=>fillArray(u,(t=>makeValueCell(e,t))))))
return{defaultValues:p,table:{name:a,_firstColumnWidth:170,widths:A.map((()=>120)),rowLabels:g?f:T,_rowHeader:r.createElement(en.Z,{key:"Name",index:0,dim:nn.TableDimension.COLUMN,label:"Name",numDims:A.length}),columnLabels:A,columnConstraints:A.map((()=>null)),headerCol:g,headerRow:!g,table:y,lockedDims:!0,allowColumnEdits:!1}}}function updateTableCellTextProperties(e,t){const updateCell=e=>{if(!e.locked){e.text=""===e.text?pn:e.text
e.foregroundColor=e.text===pn?Z.TG:Z.Rl}}
return(0,ue.ZP)(e,(n=>{if(t===zt.CONDITIONS_ON_ROWS)for(let t=0;t<e.length;t++){const e=n[t]
for(let t=0;t<e.length;t++)updateCell(e[t])}else for(let t=0;t<e.length;t++){const e=n[t]
for(let t=0;t<e.length;t++)updateCell(e[t])}}))}function convertTableToExperimentalInputs(e,t,n,a,i){return(0,ue.ZP)(e,(e=>{if(i===zt.CONDITIONS_ON_ROWS)for(let i=1;i<n.length;++i){const r=n[i]
for(let n=0;n<r.length;++n)e[i-1][a][n]=r[n].text!==pn?r[n].text:t[n]}else for(let i=0;i<n.length;++i){const r=n[i]
for(let n=1;n<r.length;++n)e[n-1][a][i]=r[n].text!==pn?r[n].text:t[i]}}))}function ExperimentPlan(e){const t=hn.useContext(),n=e.methods.find((t=>t.id===e.selectedMethodId));(0,u.hu)(null!=n,"Selected method should not be null")
const i=t.draftInputs[e.selectedMethodId],s=zt.CONDITIONS_ON_COLUMNS,o=(0,r.useMemo)((()=>({parameters:n.parameters.length>0,materialInputs:n.materialInputs.length>0,equipment:n.equipmentList.length>0})),[n]),[l,c]=(0,r.useState)(o.parameters?makeInitialTable(t.numConditions,i,Kt.PARAMETERS,`${(0,C.ZP)(C.B3.PARAMETER,{plural:!0})}`,"Recipe setpoint",s,n,e.procedureFlowchart):null),[d,m]=(0,r.useState)(o.materialInputs?makeInitialTable(t.numConditions,i,Kt.MATERIAL_INPUTS,`${(0,C.ZP)(C.B3.MATERIAL)} inputs`,"Recipe entities",s,n,e.procedureFlowchart):null),[p,h]=(0,r.useState)(o.equipment?makeInitialTable(t.numConditions,i,Kt.EQUIPMENT,`${(0,C.ZP)(C.B3.EQUIPMENT,{plural:!0})}`,"Recipe make/model/ID",s,n,e.procedureFlowchart):null),E={hideFormulaBox:!0,isCompactBottomSpacing:!0,isCollapsible:!0,isLeftAlignRowHeader:!0,locked:!1},S=o.parameters&&r.createElement(Xt.ZP,{...Xt.W9,...E,table:l.table,cid:"doe-params",updateHandler:(n,{table:a})=>{a.table=updateTableCellTextProperties(a.table,s)
c({...l,table:a})
const r=convertTableToExperimentalInputs(i.values,i.defaultValues.parameters,a.table,Kt.PARAMETERS,s)
t.setExperimentalInputs(e.selectedMethodId,r)},storeState:a.ZT}),T=o.materialInputs&&r.createElement(Xt.ZP,{...Xt.W9,...E,table:d.table,cid:"doe-material-inputs",updateHandler:(n,{table:a})=>{a.table=updateTableCellTextProperties(a.table,s)
m({...d,table:a})
const r=convertTableToExperimentalInputs(i.values,i.defaultValues.materialInputs,a.table,Kt.MATERIAL_INPUTS,s)
t.setExperimentalInputs(e.selectedMethodId,r)},storeState:a.ZT}),g=o.equipment&&r.createElement(Xt.ZP,{...Xt.W9,...E,table:p.table,cid:"doe-equipment",updateHandler:(n,{table:a})=>{a.table=updateTableCellTextProperties(a.table,s)
h({...p,table:a})
const r=convertTableToExperimentalInputs(i.values,i.defaultValues.equipment,a.table,Kt.EQUIPMENT,s)
t.setExperimentalInputs(e.selectedMethodId,r)},storeState:a.ZT}),f=S||T||g
return r.createElement("div",{className:ee()("u-flex-display mediocre",(0,_.iv)(En.experimentPlan))},r.createElement("div",{className:(0,_.iv)(En.sidebarWrapper)},r.createElement("div",{className:(0,_.iv)(En.methodSelectorSidebar)},r.createElement(MethodSelectorSidebar,{methods:e.methods,methodIdKey:"id",selectedMethodId:e.selectedMethodId,onChangeSelection:e.onChangeSelectedMethod,sidebarWidth:172}))),r.createElement("div",{className:ee()("scrollbar-override",(0,_.iv)(En.experimentPlanBody))},r.createElement("div",{className:(0,_.iv)(En.methodInfo)},r.createElement("div",{className:(0,_.iv)(En.methodTitle)},n.name)),f?r.createElement("div",{className:(0,_.iv)(En.tableWrapper)},S,T,g):r.createElement("div",{className:(0,_.iv)(En.noInputsBanner)},r.createElement(oe.ZP,{bannerType:oe.ct.WARNING,text:`${(0,C.ZP)(C.B3.PARAMETER,{stringCase:C.P8.TITLE,plural:!0})}, ${(0,C.ZP)(C.B3.MATERIAL,{stringCase:C.P8.LOWER,plural:!0})}, and ${(0,C.ZP)(C.B3.EQUIPMENT,{stringCase:C.P8.LOWER,plural:!0})} were not added to this ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}.`,supportingInfo:`To vary conditions for this ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}, close the experiment plan and edit this ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})} in the ${(0,C.ZP)(C.B3.TITLE,{stringCase:C.P8.LOWER})}.`}))))}function ExperimentalInputsTabTitle(e){return r.createElement("div",{className:(0,_.iv)(En.tabLabel)},e.tabTitle)}function ProcedureExperimentalInputsModalBody(e){const[t,n]=(0,r.useState)(mn.EXPERIMENT_PLAN),[a,i]=(0,r.useState)(e.methods[0].id)
return r.createElement(we.Xl,{activeTab:t,onRequestTabChange:n,className:ee()("u-flex-grow u-min-width-zero tabContainer--compact",(0,_.iv)(En.tabContainer)),isFullHeight:!0},r.createElement(we.OK,{tabKey:mn.EXPERIMENT_PLAN,title:r.createElement(ExperimentalInputsTabTitle,{tabTitle:"Experiment Plan"})},r.createElement("div",{className:(0,_.iv)(En.settingsPageContainerSection)},r.createElement(ExperimentPlan,{key:a,methods:e.methods,procedureFlowchart:e.procedureFlowchart,selectedMethodId:a,onChangeSelectedMethod:i}))),r.createElement(we.OK,{tabKey:mn.SETTINGS,title:r.createElement(ExperimentalInputsTabTitle,{tabTitle:"Settings"})},r.createElement("div",{className:(0,_.iv)(En.settingsPageContainerSection)},r.createElement(ProcedureExperimentalInputsModalSettings,{numConditions:e.numConditions,replicatesPerCondition:e.replicatesPerCondition,setReplicatesPerCondition:e.setReplicatesPerCondition,folderId:e.folderId,setFolderId:e.setFolderId,organization:e.organization,setOrganization:e.setOrganization,experimentName:e.experimentName,setExperimentName:e.setExperimentName}))))}function ProcedureExperimentalInputsModal(e){const[t,n]=(0,r.useState)(function prepareInitialExperimentalInputs(e,t){const n={}
for(const a of t){const t=a.parameters.map((e=>stringifyParameter(e))),i=a.materialInputs.map((e=>(0,u.Gp)((0,M.pA)(e),"DoE window needs support for m1 materials")?e.details:"")),r=a.equipmentList.map((e=>e.details))
n[a.id]={values:fillArray(e,(()=>({parameters:[...t],materialInputs:[...i],equipment:[...r]}))),names:{parameters:a.parameters.map((e=>e.name)),materialInputs:a.materialInputs.map((e=>e.name)),equipment:a.equipmentList.map((e=>e.name))},defaultValues:{parameters:[...t],materialInputs:[...i],equipment:[...r]},ids:{parameters:a.parameters.map((e=>e.id)),materialInputs:a.materialInputs.map((e=>e.id)),equipment:a.equipmentList.map((e=>e.id))},units:{parameters:a.parameters.map((e=>e.unit)),materialInputs:[],equipment:[]}}}return n}(e.numConditions,e.methods)),[a,i]=(0,r.useState)(e.initialFolderId),[s,o]=(0,r.useState)(e.procedureName),[c,d]=(0,r.useState)(e.initialOrganization),[m,p]=(0,r.useState)(Array(e.numConditions).fill(e.initialNumReplicates)),h=(0,r.useCallback)(((e,a)=>{(0,u.hu)(t.hasOwnProperty(e),`Unknown methodId: ${e}`)
n({...t,[e]:{...t[e],values:a}})}),[t]),E=(0,r.useMemo)((()=>({numConditions:e.numConditions,numReplicates:e.initialNumReplicates,draftInputs:t,setExperimentalInputs:h})),[t,h])
return r.createElement(hn.Provider,{value:E},r.createElement(N.ZP,{title:`Plan experiment: ${e.procedureName}`,buttons:[{text:"Start experiment",submit:!0,disabled:!1}],onRequestClose:async()=>{if(null!=await(0,Yt.Z)(ProcedureExperimentConfirmCancelModal,{})){trackClosedExperimentalDesignModalEvent(e.procedureId,e.eventGroupId)
e.onRequestClose()}},onRequestSubmit:()=>{!function trackSubmittedExperimentalDesignModalEvent(e,t){l.gx(L.U9.SUBMITTED_MODAL,L.XC.PROCEDURES,{actionOrigin:L.D2.PROCEDURE_EXPERIMENT_DESIGNER,actionInstanceId:l.Vr(),modalType:w,eventGroupId:t,procedureId:e,procedureType:M.B5.RECIPE})}(e.procedureId,e.eventGroupId)
!function trackClickedStartExperimentEvent(e,t,n,a){l.L9(D.ci.CLICKED_START_EXPERIMENT,{actionOrigin:L.D2.PROCEDURE_EXPERIMENT_DESIGNER,actionInstanceId:l.Vr(),eventGroupId:t,procedureId:e,procedureType:M.B5.RECIPE,conditionsPerExperiment:n,replicatesPerCondition:a})}(e.procedureId,e.eventGroupId,e.numConditions,e.initialNumReplicates)
e.onRequestSubmit({experimentalInputs:t,folderId:a,organization:c,replicatesPerCondition:m,experimentName:s})},closeableOnEscapeKey:!1,extraLarge:!0,fullHeight:!0},r.createElement(ProcedureExperimentalInputsModalBody,{...e,folderId:a,setFolderId:i,organization:c,setOrganization:d,experimentName:s,setExperimentName:o,replicatesPerCondition:m,setReplicatesPerCondition:p})))}const En=_.mM.create({tabContainer:{display:"flex",flexDirection:"column",height:"100%",margin:"-16px",overflow:"hidden"},tabLabel:{fontSize:"12px",padding:"12px 12px 6px"},settingsPageContainerSection:{height:"100%",position:"relative",top:"-23px",paddingLeft:"12px",paddingTop:"0px"},sidebarWrapper:{height:"100%",borderRight:`1px solid ${Z.tN}`,marginLeft:"4px"},methodSelectorSidebar:{marginRight:"-1px"},experimentPlan:{display:"flex",flexDirection:"row",height:"calc(100% + 55px)"},experimentPlanBody:{width:"100%",padding:"24px",overflowX:"hidden",overflowY:"auto"},methodInfo:{paddingBottom:"7px"},methodTitle:{color:Z.Rl,fontSize:"14px",fontWeight:600,lineHeight:"16px",marginBottom:"16px"},noInputsBanner:{width:"50%"},info:{display:"flex",flexDirection:"row"},infoIcon:{color:Z.pp,width:"16px",height:"16px",flexShrink:0,paddingRight:"8px"},infoText:{color:Z.Rl,fontSize:"13px",fontWeight:400,lineHeight:"16px"},tableWrapper:{width:"100%",paddingRight:"24px"},parameterValueCellName:{color:Z.Rl,fontWeight:400},parameterUnitCellName:{fontWeight:400,color:Z.pp}})
var Sn=n(137975)
function ProcedureExperimentParametersModal(e){var t
const n=(0,on.u)(),[a,i]=(0,r.useState)(1),[s,o]=(0,r.useState)(1),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(null!==(t=null==n?void 0:n[0])&&void 0!==t?t:null),m=null!=a&&a>0&&null!=s&&s>0&&""!==l&&null!=d
return r.createElement(N.ZP,{title:"Experiment plan settings",buttons:[{text:"Start experiment plan",submit:!0,disabled:!m}],onRequestClose:()=>{trackClosedExperimentalDesignModalEvent(e.procedureId,e.eventGroupId)
e.onRequestClose()},onRequestSubmit:()=>{e.onRequestSubmit({numConditions:a,numReplicates:s,folderId:l,organization:d})}},r.createElement("div",{className:(0,_.iv)(Tn.wrapper)},r.createElement("div",{className:(0,_.iv)(Tn.bannerContainer)},r.createElement(oe.ZP,{bannerType:oe.ct.WARNING,text:"These settings cannot be changed once the experiment plan is started."})),r.createElement(Zt.Z,{className:(0,_.iv)(Tn.formGroup)},r.createElement(Gt.Z,{className:(0,_.iv)(Tn.row)},r.createElement(Bt.Z,{sm:6},r.createElement(Me.Z,{label:`Conditions per ${(0,C.ZP)(C.B3.METHOD,{stringCase:C.P8.LOWER})}`,isRequired:!0}),r.createElement(Sn.Z,{onChange:e=>{i(e.target.numericValue)},min:1,max:gn,placeholder:"Number of conditions",required:!0,value:a,validateInteger:!0})),r.createElement(Bt.Z,{sm:6},r.createElement(Me.Z,{label:"Replicates per condition",isRequired:!0}),r.createElement(Sn.Z,{onChange:e=>{o(e.target.numericValue)},min:1,max:fn,placeholder:"Number of replicates",required:!0,value:s,validateInteger:!0}))),r.createElement(Gt.Z,{className:(0,_.iv)(Tn.row)},r.createElement(Bt.Z,{sm:6},r.createElement(Me.Z,{label:"Project folder",isRequired:!0}),r.createElement(rn.Z,{allowCreateFolder:!0,allowNone:!1,enableRedesign:!0,showInventory:!0,showNotebook:!0,showRegistries:!1,value:l,onChange:e=>{c(e.target.value)},unsetOnFetchFail:!0})),n.length>1&&r.createElement(Bt.Z,{sm:6},r.createElement(sn.Z,{ownerChoices:n,owner:d,onOwnerChanged:u,className:(0,_.iv)(Tn.ownerDropdown),ownerLabel:"Organization"}))))))}const Tn=_.mM.create({wrapper:{flex:1,display:"flex",flexDirection:"column"},bannerContainer:{margin:"8px",paddingBottom:"8px"},formGroup:{paddingLeft:"8px",paddingRight:"8px"},row:{paddingBottom:"8px"},ownerDropdown:{flex:1}}),gn=48,fn=10
async function planExperiment(e,t,n){!function trackOpenedExperimentalDesignModalEvent(e,t){l.gx(L.U9.OPENED_MODAL,L.XC.PROCEDURES,{actionOrigin:L.D2.PROCEDURE_EXPERIMENT_DESIGNER,actionInstanceId:l.Vr(),modalType:w,eventGroupId:t,procedureId:e,procedureType:M.B5.RECIPE})}(e,n)
const a=await(0,Yt.Z)(ProcedureExperimentParametersModal,{procedureId:e,eventGroupId:n})
if(null==a)return null
const i=await(0,Yt.Z)(ProcedureExperimentalInputsModal,{procedureId:e,eventGroupId:n,procedureName:t.procedureName,numConditions:a.numConditions,initialNumReplicates:a.numReplicates,initialFolderId:a.folderId,initialOrganization:a.organization,methods:t.methods,procedureFlowchart:t.procedureFlowchart})
return null==i?null:function buildFullExperimentPlan(e){return new ExperimentPlanBuilder(e).buildExperimentPlan()}({experimentName:i.experimentName,replicatesPerCondition:i.replicatesPerCondition,numReplicates:a.numReplicates,numConditions:a.numConditions,folderId:i.folderId,organizationId:i.organization.id,experimentalInputs:i.experimentalInputs})}var In=n(761974)
const An="--doe-table-num-runs"
function DoETopLevelTableHeader(e){return r.createElement("thead",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("tr",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("th",{scope:"col",className:(0,_.iv)(yn.topLevelHeaderCell,yn.topLevelHeaderTopLeftCell,yn.fixedFirstColumn)}),r.createElement("th",{scope:"col",className:(0,_.iv)(yn.topLevelHeaderCell)},"Master procedure setpoint"),r.createElement("th",{scope:"col",className:(0,_.iv)(yn.topLevelHeaderCell)},"Master procedure range"),e.setpointRuns.map(((e,t)=>r.createElement("th",{scope:"col",className:(0,_.iv)(yn.topLevelHeaderCell),key:t},"Run ",t+1)))))}function DoETableSectionGap(e){return r.createElement("tbody",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("tr",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("td",{className:(0,_.iv)(yn.gapRowCell),colSpan:3+e.numRuns})))}function DoETableReplicatesSection(e){return r.createElement("tbody",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("tr",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("th",{scope:"row",className:(0,_.iv)(yn.replicatesHeaderCell,yn.fixedFirstColumn,yn.masterProcedureColumn)},"Replicates"),r.createElement("td",{className:(0,_.iv)(yn.replicatesValueCell,yn.masterProcedureColumn,yn.cellStaticText)},"--"),r.createElement("td",{className:(0,_.iv)(yn.replicatesValueCell,yn.masterProcedureColumn,yn.cellStaticText)},"--"),e.setpointRuns.map(((t,n)=>r.createElement("td",{className:(0,_.iv)(yn.replicatesValueCell,n===e.setpointRuns.length-1&&yn.borderRadiusR),key:n},r.createElement(Sn.A,{className:(0,_.iv)(yn.cellInputNumeric),value:t.numReplicates,onChange:({target:{numericValue:a,value:i}})=>{e.updateSetpointRun(n,{...t,numReplicates:null!=a?a:i})},validateInteger:!0,min:1}))))))}function DoETableMethodSection(e){const t=0===e.method.parameters.length
return r.createElement("tbody",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("tr",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid)},r.createElement("th",{scope:"row",className:(0,_.iv)(yn.methodNameHeader)},r.createElement("div",{className:(0,_.iv)(yn.methodNameHeaderText,t&&yn.borderRadiusBL)},e.method.name),r.createElement("div",{className:(0,_.iv)(yn.methodNameHeaderSpacer,t&&yn.borderRadiusBR)}))),e.method.parameters.map(((t,n)=>{var a,i,s
const o=n===e.method.parameters.length-1
return r.createElement("tr",{className:(0,_.iv)(yn.letChildrenParticipateInParentGrid),key:t.id},r.createElement("th",{scope:"row",className:(0,_.iv)(yn.paramNameCell,yn.fixedFirstColumn,yn.masterProcedureColumn,o&&yn.borderRadiusBL)},t.name+(null==t.unit?"":` (${t.unit})`)),r.createElement("td",{className:(0,_.iv)(yn.paramValueCell,yn.masterProcedureColumn,yn.cellStaticText)},null!==(a=t.value)&&void 0!==a?a:"--"),r.createElement("td",{className:(0,_.iv)(yn.paramValueCell,yn.masterProcedureColumn,yn.cellStaticText)},`${null!==(i=t.lowerLimit)&&void 0!==i?i:"?"}${null!==(s=t.upperLimit)&&void 0!==s?s:"?"}`),e.setpointRuns.map(((n,a)=>{const i=a===e.setpointRuns.length-1
return r.createElement("td",{className:(0,_.iv)(yn.paramValueCell,o&&i&&yn.borderRadiusBR),key:a},r.createElement(Sn.A,{className:(0,_.iv)(yn.cellInputNumeric),value:n.setpointByParameterId[t.id],onChange:({target:{numericValue:i,value:r}})=>{e.updateSetpointRun(a,((e,t,n)=>(0,ue.ZP)(e,(e=>{(0,u.hu)(e.setpointByParameterId.hasOwnProperty(t),`Expected setpointRun object to know about parameter id ${t}`)
e.setpointByParameterId[t]=n})))(n,t.id,null!=i?i:r))}}))})))})))}function ProcedureDoETable(e){(0,u.hu)(e.numberOfRuns>0,"Cannot have zero runs")
const t=function topoSortedMethods(e){return e.nodes}(e.masterProcedureFlowchart),getNewSetpointRun=()=>({numReplicates:1,setpointByParameterId:Object.fromEntries(t.flatMap((({parameters:e})=>e.map((({id:e,value:t})=>[e,t])))))}),[n,a]=(0,r.useState)(Array(e.numberOfRuns).fill(0).map((()=>getNewSetpointRun()))),updateSetpointRun=(e,t)=>{a((n=>(0,ue.ZP)(n,(n=>{n[e]=t}))))}
return r.createElement("div",{className:(0,_.iv)(yn.container),style:{[An]:n.length}},r.createElement("div",{className:(0,_.iv)(yn.topLevelHeaderSideExtension,yn.topLevelHeaderSideExtensionLeft)}),r.createElement("table",{className:(0,_.iv)(yn.tableGrid)},r.createElement(DoETopLevelTableHeader,{setpointRuns:n}),r.createElement(DoETableSectionGap,{numRuns:n.length}),r.createElement(DoETableReplicatesSection,{setpointRuns:n,updateSetpointRun}),t.flatMap((e=>[r.createElement(DoETableSectionGap,{numRuns:n.length,key:`gap-${e.id}`}),r.createElement(DoETableMethodSection,{method:e,setpointRuns:n,updateSetpointRun,key:e.id})]))),r.createElement("div",{className:(0,_.iv)(yn.topLevelHeaderSideExtension,yn.topLevelHeaderSideExtensionRight)},r.createElement(In.Z,{onClick:()=>{a([...n,getNewSetpointRun()])},className:(0,_.iv)(yn.addRunColumnButton)})))}const yn=_.mM.create({container:{position:"relative",zIndex:0,display:"flex",alignItems:"flex-start",height:"100%",width:"100%"},tableGrid:{flex:"0 1 auto",overflow:"scroll",maxHeight:"100%",display:"grid",gridTemplateColumns:"[param-name-col-start] 200px [master-setpoint-col-start] minmax(min-content, 107px) [master-range-col-start] minmax(min-content, 107px) repeat(var(--doe-table-num-runs), [run-col-start] 72px)",gridTemplateRows:"[header-row-start] 44px [header-row-end] ",gridAutoRows:"min-content",background:Z.Cj},topLevelHeaderSideExtension:{display:"flex",alignItems:"center",height:"44px",background:Z.bs,borderTop:`1px solid ${Z.pF}`,borderBottom:`1px solid ${Z.pF}`},topLevelHeaderSideExtensionLeft:{flex:"1 0 10%"},topLevelHeaderSideExtensionRight:{flex:"2 0 10%",minWidth:"64px"},addRunColumnButton:{width:"15px",height:"15px",margin:"0 16px"},letChildrenParticipateInParentGrid:{display:"contents"},masterProcedureColumn:{background:Z.bs,minWidth:"107px"},fixedFirstColumn:{position:"sticky",left:0,gridColumnStart:1},gapRowCell:{height:"24px",gridColumnStart:1,gridColumnEnd:"span calc(3 + var(--doe-table-num-runs))"},topLevelHeaderCell:{position:"sticky",top:0,zIndex:11,padding:"6px 12px",display:"flex",justifyContent:"flex-end",alignItems:"center",minWidth:"64px",borderTop:`solid 1px ${Z.pF}`,borderBottom:`solid 1px ${Z.pF}`,borderRight:`solid 1px ${Z.pF}`,background:Z.bs,color:Z.pp,fontSize:"13px",fontWeight:600,lineHeight:"16px"},topLevelHeaderTopLeftCell:{zIndex:12},replicatesHeaderCell:{display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"6px 28px",border:`1px solid ${Z.pF}`,borderRadius:"4px 0 0 4px",color:Z.pp,fontSize:"13px",fontWeight:400},replicatesValueCell:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:0,borderTop:`1px solid ${Z.pF}`,borderRight:`1px solid ${Z.pF}`,borderBottom:`1px solid ${Z.pF}`,color:Z.Rl,fontSize:"13px",fontWeight:400},methodNameHeader:{gridColumnStart:1,gridColumnEnd:"span calc(3 + var(--doe-table-num-runs))",zIndex:0,display:"flex",justifyContent:"flex-start",alignItems:"center",padding:0},methodNameHeaderText:{position:"sticky",left:0,zIndex:2,flex:"0 0 auto",padding:"6px 28px",borderTop:`1px solid ${Z.pF}`,borderBottom:`1px solid ${Z.pF}`,borderLeft:`1px solid ${Z.pF}`,borderTopLeftRadius:"4px",background:Z.bs,color:Z.pp,fontSize:"16px",fontWeight:600},methodNameHeaderSpacer:{flex:"1 1 auto",alignSelf:"stretch",borderTop:`1px solid ${Z.pF}`,borderBottom:`1px solid ${Z.pF}`,borderRight:`1px solid ${Z.pF}`,borderTopRightRadius:"4px",background:Z.bs},paramNameCell:{display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"6px 28px",borderLeft:`1px solid ${Z.pF}`,borderRight:`1px solid ${Z.pF}`,borderBottom:`1px solid ${Z.pF}`,color:Z.Rl,fontSize:"13px",fontWeight:400},paramValueCell:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:0,borderRight:`1px solid ${Z.pF}`,borderBottom:`1px solid ${Z.pF}`,color:Z.Rl,fontSize:"13px",fontWeight:400},cellInputNumeric:{borderRadius:0,height:"100%",textAlign:"right"},cellStaticText:{padding:"6px 12px"},borderRadiusBL:{borderBottomLeftRadius:"4px"},borderRadiusBR:{borderBottomRightRadius:"4px"},borderRadiusR:{borderBottomRightRadius:"4px",borderTopRightRadius:"4px"}})
var _n,Cn,Rn=n(911623),Nn=n(256605)
function getCidForRootSchemaField(e){return`root-${e}`}function generateSchemaFieldBuildCommand(e,t,n){var a,i
const r=n.isForRootSchema?getCidForRootSchemaField(e.id):e.id
return{name:(n.isForRootSchema&&null!=n.nameOfMethodToMapTo?`${e.name} for ${n.nameOfMethodToMapTo}`:e.name).trim(),cid:r,apiId:null!==(i=null===(a=(null!=t?t:[]).find((e=>e.cid===r)))||void 0===a?void 0:a.apiId)&&void 0!==i?i:null}}function generateFlowchartTaskBuildCommandForCondition(e,t){var n
const a=[]
for(const i of t){const t=[...i.materialInputs,...i.parameterValues,...i.equipmentInputs]
for(const{sourceId:i,value:r}of t){const t=getCidForRootSchemaField(i),s=null===(n=e.metadata.flowchartTaskSchemaCorrelationIds.schemaFieldCorrelationIds.find((({cid:e})=>t===e)))||void 0===n?void 0:n.apiId
null!=s&&a.push({apiId:s,value:r})}}return{schemaFieldSetCommands:a}}!function(e){e.ROOT="ROOT"
e.METHOD_OUTPUT="METHOD_OUTPUT"
e.METHOD_TASK="METHOD_TASK"}(_n||(_n={}))
!function(e){e.METHOD="METHOD"
e.FLOWCHART_OUTPUT="FLOWCHART_OUTPUT"}(Cn||(Cn={}))
function getSchemaFieldMapperConfigFromRootCommandForProcedureObject(e,t){return{lookupSourceType:_n.ROOT,fromSchemaFieldCid:getCidForRootSchemaField(e.id),toSchemaFieldCid:e.id,fromNodeCid:t}}function getMaterialOutputFromEdge(e,t){const n=e.materialOutputs.find((n=>(0,de.Wq)(e.cid,n.id,"source")===t.sourceHandle));(0,u.hu)(null!=n,`Expected to find a material output on method ${e.name} with outgoing edge ${t.id}`)
return n}function getMaterialInputFromEdge(e,t){const n=e.materialInputs.find((n=>(0,de.Wq)(e.cid,n.id,"target")===t.targetHandle));(0,u.hu)(null!=n,`Expected to find a material input on method ${e.name} with incoming edge ${t.id}`);(0,u.hu)((0,M.pA)(n),"Schema mapper config needs updating to handle M1 materials")
return n}function generateSchemaFieldMapperCommandsFromRoot(e,t,n,a,i){var r
const s=i.find((t=>t.toMethodCid===e.cid)),o=null!=s?null===(r=t.find((({cid:e})=>e===s.fromMethodCid)))||void 0===r?void 0:r.id:a;(0,u.hu)(null!=o,`Could not find incoming method with cid ${null==s?void 0:s.fromMethodCid}`)
return[...e.parameters.map((e=>getSchemaFieldMapperConfigFromRootCommandForProcedureObject(e,o))),...e.equipmentList.map((e=>getSchemaFieldMapperConfigFromRootCommandForProcedureObject(e,o))),...n.map((e=>getSchemaFieldMapperConfigFromRootCommandForProcedureObject(e,o)))]}function generateSchemaMapperCommandsToFlowchartOutput(e){return e.materialOutputs.length?[{sinkType:Cn.FLOWCHART_OUTPUT,schemaFieldMapperConfigs:e.materialOutputs.map((t=>({lookupSourceType:_n.METHOD_OUTPUT,fromNodeCid:e.id,fromSchemaFieldCid:t.id,toSchemaFieldCid:getCidForRootSchemaField(t.id)})))}]:[]}function generateSchemaFieldMapperCommandsForDirectConnectMaterialEdges(e,t,n,a){const i=a.nodes.find((t=>{var n;(0,u.hu)(null!=t.id,"Method IDs should not be null")
return(null===(n=(0,y.s9)(a,t.cid))||void 0===n?void 0:n.cid)===e.cid}))
if(null==i)return[]
const r=t.find((e=>e.id===i.id));(0,u.hu)(null!=r,"Could not find previous method")
const s=n.filter((t=>t.toMethodCid===e.cid&&t.fromMethodCid===i.cid))
return 0===s.length?[]:s.map((t=>function getSchemaFieldMapperConfigCommandForDirectMaterialEdge(e,t,n){const a=t.materialOutputs.find((n=>(0,de.Wq)(t.cid,n.id,"source")===e.sourceHandle));(0,u.hu)(null!=a,`Expected to find a material output on method ${t.name} with outgoing edge ${e.id}`)
const i=n.materialInputs.find((t=>(0,de.Wq)(n.cid,t.id,"target")===e.targetHandle));(0,u.hu)(null!=i,`Expected to find a material input on method ${n.name} with incoming edge ${e.id}`)
return{lookupSourceType:_n.METHOD_OUTPUT,fromSchemaFieldCid:a.id,fromNodeCid:t.id,toSchemaFieldCid:i.id}}(t,r,e)))}function findNodesBetween(e,t,n){const a=[]
let i=(0,y.s9)(e,t)
for(;null!=i&&i.cid!==n;){a.push(i)
i=(0,y.s9)(e,i.cid)}return a}function addIndirectMapperConfig(e,t,n){return(0,ue.ZP)(e,(e=>{const a=e.find((e=>e.sinkType===Cn.METHOD&&e.toSchemaCid===n))
null==a?e.push({toSchemaCid:n,sinkType:Cn.METHOD,schemaFieldMapperConfigs:[t]}):a.schemaFieldMapperConfigs.push(t)}))}function findOutboundIndirectConnectEdges(e,t){const n=(0,y.s9)(e,t.cid)
return null==n?[]:e.edges.filter((e=>e.type===M.QV.MATERIAL_EDGE&&e.fromMethodCid===t.cid&&e.toMethodCid!==n.cid))}function makeCidForPassThruSchemaField(e,t,n){return`${e}.${n} -> ${t.name} (${t.cid})`}function generateFlowchartBuildCommand(e,t,n,i,r,s,o){const l=e.edges.filter((e=>e.type===M.QV.METHOD_EDGE)),c=[...n.map(((a,i)=>({toSchemaCid:a.id,sinkType:Cn.METHOD,schemaFieldMapperConfigs:[...generateSchemaFieldMapperCommandsFromRoot(a,n,s[i],t,l),...generateSchemaFieldMapperCommandsForDirectConnectMaterialEdges(a,n,o,e)]}))),...generateSchemaMapperCommandsToFlowchartOutput(i)],{methodSchemaBuildCommands:d,schemaMapperConfigCommands:m}=function generateSchemaMapperCommandsForIndirectConnectMaterialEdges(e,t,n,a){let i=n,r=a
for(const n of e){const a=findOutboundIndirectConnectEdges(t,n)
if(0!==a.length)for(const s of a){const a=n,o=e.find((e=>e.cid===s.toMethodCid)),l=getMaterialOutputFromEdge(a,s),c=l.name,d=getMaterialInputFromEdge(o,s),m={method:a,schemaFieldCid:l.id,lookupSourceType:_n.METHOD_OUTPUT},p=findNodesBetween(t,a.cid,o.cid)
for(const e of p){const t=makeCidForPassThruSchemaField(m.method.name,e,c),n=`${c} (passed thru ${e.name})`
i=(0,ue.ZP)(i,(a=>{const i=a.find((({cid:t})=>t===e.id));(0,u.hu)(null!=i,`Expected to find a build command for ${e.id}`)
i.schemaFields.push({cid:t,name:n,apiId:null})}))
r=addIndirectMapperConfig(r,{lookupSourceType:m.lookupSourceType,fromSchemaFieldCid:m.schemaFieldCid,fromNodeCid:m.method.cid,toSchemaFieldCid:t},e.cid)
m.method=e
m.schemaFieldCid=t
m.lookupSourceType=_n.METHOD_TASK}r=addIndirectMapperConfig(r,{lookupSourceType:m.lookupSourceType,fromSchemaFieldCid:m.schemaFieldCid,fromNodeCid:m.method.cid,toSchemaFieldCid:d.id},o.cid)}}return{methodSchemaBuildCommands:i,schemaMapperConfigCommands:r}}(n,e,r,c),p=(0,a.Xc)((0,a.Pe)(n,(({cid:e})=>e)),(({id:e})=>e))
return{edges:l.map((e=>{const t=p[e.fromMethodCid],n=p[e.toMethodCid];(0,u.hu)(null!=t,`Edge source method ${t} not found`);(0,u.hu)(null!=n,`Edge target method ${n} not found`)
return{cid:e.id,apiId:null,fromNodeCid:t,toNodeCid:n}})),schemaMapperConfigs:m,methodSchemaBuildCommands:d}}function generateRootSchemaFields(e,t,n){return e.map(((e,a)=>[...e.parameters.map((n=>generateSchemaFieldBuildCommand(n,t,{isForRootSchema:!0,nameOfMethodToMapTo:e.name}))),...e.equipmentList.map((n=>generateSchemaFieldBuildCommand(n,t,{isForRootSchema:!0,nameOfMethodToMapTo:e.name}))),...n[a].map((n=>generateSchemaFieldBuildCommand(n,t,{isForRootSchema:!0,nameOfMethodToMapTo:e.name})))])).flat()}function generateRootOutputSchemaFields(e,t){return e.materialOutputs.map((e=>generateSchemaFieldBuildCommand(e,t,{isForRootSchema:!0,nameOfMethodToMapTo:null})))}function generateFlowchartSchemaBuildCommand(e,t,n){var a,i
const{flowchartTaskSchemaCorrelationIds:r}=e.metadata,s=e.flowchart.edges.filter((e=>e.type===M.QV.MATERIAL_EDGE)),o=e.flowchart.edges.filter((e=>e.type===M.QV.METHOD_EDGE)),l=t.map((e=>function getDeNovoMaterialInputsForMethod(e,t){const n=t.filter((t=>t.toMethodCid===e.cid))
return e.materialInputs.filter((t=>!n.some((n=>n.targetHandle===(0,de.Wq)(e.cid,t.id,"target")))))}(e,s))),c=t.filter((e=>!o.some((t=>t.fromMethodCid===e.cid))));(0,u.hu)(1===c.length,"Only linear flowcharts are supported")
const d=c[0],m=null!==(a=null==r?void 0:r.schemaCorrelationIds.cid)&&void 0!==a?a:function generateNewFlowchartSchemaCid(e){return`flwchrt_sch_${e}`}(e.metadata.id),{methodSchemaBuildCommands:p,...h}=generateFlowchartBuildCommand(e.flowchart,m,t,d,n,l,s)
return{name:e.metadata.name,cid:m,apiId:null!==(i=null==r?void 0:r.schemaCorrelationIds.apiId)&&void 0!==i?i:null,schemaFields:generateRootSchemaFields(t,null==r?void 0:r.schemaFieldCorrelationIds,l),outputSchemaFields:generateRootOutputSchemaFields(d,null==r?void 0:r.outputSchemaFieldCorrelationIds),flowchart:h,methodSchemaBuildCommands:p}}function convertExecutionTemplateInfoToExecutionData(e){switch(e.type){case M.vt.UNSET:return{type:Nn.Pf.DIRECT}
case M.vt.CREATED:return null
case M.vt.PRE_CREATE:return{type:Nn.Pf.ENTRY,executionTemplate:{templateCollectionId:e.templateCollectionId,templateName:e.name,sourceTemplateId:e.sourceTemplateId}}
default:(0,u.hu)(!1,`Unexpected execution template info type ${(0,yt.vE)(e).type}`)}}function generateWorkflowBuildCommand(e,t,n){const a=t.map((e=>function generateMethodSchemaBuildCommand(e){var t,n
const a=null!==(n=null===(t=e.methodTaskSchemaCorrelationIds)||void 0===t?void 0:t.methodSchemaCorrelationIds.apiId)&&void 0!==n?n:null
return{name:e.name,cid:e.id,apiId:a,schemaFields:[...e.parameters.map((t=>{var n
return generateSchemaFieldBuildCommand(t,null===(n=e.methodTaskSchemaCorrelationIds)||void 0===n?void 0:n.parameterSchemaFieldCorrelationIds,{isForRootSchema:!1})})),...e.materialInputs.map((t=>{var n
return generateSchemaFieldBuildCommand(t,null===(n=e.methodTaskSchemaCorrelationIds)||void 0===n?void 0:n.materialInputSchemaFieldCorrelationIds,{isForRootSchema:!1})})),...e.equipmentList.map((t=>{var n
return generateSchemaFieldBuildCommand(t,null===(n=e.methodTaskSchemaCorrelationIds)||void 0===n?void 0:n.equipmentSchemaFieldCorrelationIds,{isForRootSchema:!1})}))],outputSchemaFields:e.materialOutputs.map((t=>{var n
return generateSchemaFieldBuildCommand(t,null===(n=e.methodTaskSchemaCorrelationIds)||void 0===n?void 0:n.materialOutputSchemaFieldCorrelationIds,{isForRootSchema:!1})})),executionData:convertExecutionTemplateInfoToExecutionData(e.executionTemplateInfo)}}(e))),{methodSchemaBuildCommands:i,...r}=generateFlowchartSchemaBuildCommand(e,t,a)
return{metadata:{recipeName:e.metadata.name,organizationId:n},methodSchemaBuildCommands:i,flowchartSchemaBuildCommand:r}}function retrieveCorrelationId(e,t){const n=t.find((t=>t.cid===e.id))
return(0,u.Gp)(null!=n,"API element result not found",{element:e})?n:{cid:"null",apiId:"null"}}async function executeExperiment(e){const t=generateWorkflowBuildCommand(e.procedureWithMetadata,e.methods,e.organizationId),n=await(0,Qt.bV)(t),a=function storeCorrelationIdsAndExecutionTemplateInfoIntoProcedure(e,t){return(0,ue.ZP)(e,(e=>{e.metadata.flowchartTaskSchemaCorrelationIds={schemaCorrelationIds:{cid:t.fulfilledFlowchartSchema.cid,apiId:t.fulfilledFlowchartSchema.apiId},schemaFieldCorrelationIds:t.fulfilledFlowchartSchema.fulfilledSchemaFields,outputSchemaFieldCorrelationIds:t.fulfilledFlowchartSchema.fulfilledOutputSchemaFields}
for(const n of e.flowchart.nodes){const e=t.fulfilledMethodSchemas.find((e=>e.cid===n.id))
if(!(0,u.Gp)(null!=e,"API result not found",{methodNode:n}))continue
const a=e
n.methodTaskSchemaCorrelationIds={methodSchemaCorrelationIds:(0,G.Z)(a,"cid","apiId"),parameterSchemaFieldCorrelationIds:n.parameters.map((e=>retrieveCorrelationId(e,a.fulfilledSchemaFields))),equipmentSchemaFieldCorrelationIds:n.equipmentList.map((e=>retrieveCorrelationId(e,a.fulfilledSchemaFields))),materialInputSchemaFieldCorrelationIds:n.materialInputs.map((e=>retrieveCorrelationId(e,a.fulfilledSchemaFields))),materialOutputSchemaFieldCorrelationIds:n.materialOutputs.map((e=>retrieveCorrelationId(e,a.fulfilledOutputSchemaFields)))}
null!=a.executionTemplateId&&(n.executionTemplateInfo={type:M.vt.CREATED,id:a.executionTemplateId})}}))}(e.procedureWithMetadata,n),i=function generateProcedureExecutionCommand(e,t){const n=e.metadata.flowchartTaskSchemaCorrelationIds.schemaCorrelationIds.apiId;(0,u.hu)(null!=n,"Expected flowchart task schema to be persisted with an API ID")
const a=[]
for(const n of t.experimentPlanPerCondition)a.push(generateFlowchartTaskBuildCommandForCondition(e,n))
return{numDuplicatesPerTask:t.numReplicates,folderId:t.metadata.folderId,schemaId:n,flowchartTaskBuildCommands:a}}(a,e.experimentPlan),{taskGroupId:r}=await(0,Qt.ov)({...i,actionOrigin:Rn.wJ[Nn.D2.PROCEDURE_EXPERIMENT_DESIGNER],actionMethod:Rn.mX[Nn.LY.CREATE_MODAL]})
return{procedure:a,taskGroupId:r}}var On,bn=n(609133),vn=n(788836),Pn=n(127081),Ln=n(351702),Dn=n(260929),Mn=n(883026)
function normalizeFlowchartOrderingForComparison(e){return{...e,nodes:[...e.nodes].sort(((e,t)=>function compareCids(e,t){return e<t?-1:e>t?1:0}(e.cid,t.cid)))}}!function(e){e[e.PROCEDURE_EDITOR=0]="PROCEDURE_EDITOR"
e[e.DOE=1]="DOE"
e[e.EXECUTION=2]="EXECUTION"
e[e.REDIRECTING=3]="REDIRECTING"}(On||(On={}))
function procedurePageUrl(e){return(0,m.Dv)(`/${vn.Z.currentUser().url_identifier}/procedures/${e}`,{})}const wn=i.ZP`
  query ProcedurePageQuery($procedureId: StrictString!) @skipAudit @engComponent(name: PROCEDURES) {
    procedure(id: $procedureId) {
      ...ProcedureGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,E.f)("InaccessibleInfo").fragment}
  ${(0,E.f)("Procedure").fragment}
`
function getClonedFlowchart(e){const t=(0,y.bu)(e)
return{edges:[...t.edges],nodes:t.nodes.map((e=>({...e,methodTaskSchemaCorrelationIds:null,executionTemplateInfo:e.executionTemplateInfo.type===M.vt.CREATED?{type:M.vt.UNSET}:e.executionTemplateInfo})))}}const procedureRestrictedStatus=e=>e?"archived":"read-only"
function RestrictedAccessProcedureBanner({isArchived:e}){const t=(0,C.ZP)(C.B3.TITLE,{stringCase:C.P8.LOWER})
return r.createElement(p.Z,{banner:`Editing disabled on ${procedureRestrictedStatus(e)} ${t}.`,fullScreen:!1})}function ProcedurePage({procedureId:e}){var t
const n=(0,h.IJ)(wn,{variables:{procedureId:e},renderCachedDataWhenRefetching:!0})
if(n.type===h.NI.ERROR){A.ZP.error("Could not load procedure; try reloading the page.")
Dn.vU(`error: ${null===(t=n.error)||void 0===t?void 0:t.message}`)
return null}if(n.type===h.NI.PENDING)return r.createElement(le.b,null)
if((0,S.CZ)(n.data.procedure)){A.ZP.error("This procedure does not exist, or you do not have permission to view this procedure.")
return null}return r.createElement(ProcedurePageWriteManager,{procedureGraphQL:n.data.procedure,refetch:async()=>{const e=(await n.refetch()).data.procedure;(0,u.hu)(!(0,S.CZ)(e),"procedure not viewable after updating")
return e}})}function ProcedurePageWriteManager(e){const t=(0,r.useMemo)((()=>function generateInitialIdToCidMap(e){const t=(0,a.m8)(e.currentFlowchartVersion.nodes.map((({id:e})=>[e,(0,ke.Z)()])))
e.currentFlowchartVersion.nodes.forEach((({stepGroups:e})=>{e.forEach((({steps:e})=>{e.forEach((({id:e})=>{t[e]=(0,ke.Z)()}))}))}))
return t}(e.procedureGraphQL)),[]),[n,i]=(0,r.useState)(t),s=(0,jt.R9)(e.procedureGraphQL,(e=>{const t=n[e];(0,u.hu)(null!=t,`No cid found for the given id ${e}`)
return t}))
return r.createElement(PresentationalProcedurePage,{procedureMetadata:s.metadata,persistedFlowchart:s.flowchart,duplicateProcedure:async({name:e,templateCollectionId:t})=>{if(null==s){A.ZP.error("Procedure was unexpectedly null, unable to duplicate")
return}const n={name:e,templateCollectionId:t,flowchart:getClonedFlowchart(s.flowchart)}
await(0,Mn.jI)((0,Ln.Z)((async({name:e,templateCollectionId:t,flowchart:n})=>{const{createdIds:[a]}=await Qt.Nc({name:e,templateCollectionId:t,flowchart:(0,jt.D$)({flowchart:n,metadata:{}})})
return{id:a}})(n).then((({id:e})=>{(0,T.ZP)(procedurePageUrl(e))}))),`Duplicating ${(0,C.ZP)(C.B3.TITLE,{stringCase:C.P8.LOWER})}...`)},updateAndPersistProcedure:async t=>{const{metadata:{name:n,id:r,templateCollectionId:s}}=t,{updatedIds:[o],cidToIdMap:l}=await Qt.qi({id:r,name:n,flowchart:(0,jt.D$)(t),templateCollectionId:s});(0,u.hu)(r===o,"updated procedure id does not match provided id")
const c=(0,a.m8)(Object.entries(l).map((([e,t])=>[t,e])))
i((e=>({...e,...c})))
const d=await e.refetch()
i(c)
return{updatedProcedure:(0,jt.R9)(d,(e=>{const t=c[e];(0,u.hu)(null!=t,`No cid found for the given id ${e}`)
return t})),cidToIdMap:l}}})}function PresentationalProcedurePage({procedureMetadata:e,persistedFlowchart:t,updateAndPersistProcedure:n,duplicateProcedure:i}){const[s,p]=(0,r.useState)(On.PROCEDURE_EDITOR),[h,E]=(0,r.useState)(t),[S,_]=(0,r.useState)(null),[C,R]=(0,r.useState)(!1),[N,O]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[P,w]=(0,r.useState)(null),F=(0,r.useRef)(0),U=(0,r.useCallback)((e=>{E((n=>{const a=e(n)
o()(normalizeFlowchartOrderingForComparison(a),normalizeFlowchartOrderingForComparison(t))||R(!0)
return a}))}),[t]),[x,B]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(null!=x){U(x.updater)
B(null)}}),[x,U])
const updateAndPersistProcedureWithBookkeeping=async(e,t)=>{R(!1)
const a=function getDocumentVersionUpdates(e){var t
const n=[]
for(const a of e.nodes)for(const e of null!==(t=a.stepGroups)&&void 0!==t?t:[])for(const t of e.steps)t.documentVersionUpdate&&n.push(t.documentVersionUpdate)
return n}(e)
g.Z.notifySaveStart(a.map((e=>e.documentId)))
const{updatedProcedure:i,cidToIdMap:r}=await n({metadata:t,flowchart:e})
g.Z.notifySaveComplete(a,r)
B({updater:e=>{const t=function syncPersistedIdsIntoLocalFlowchart(e,t){return(0,ue.ZP)(e,(e=>{for(const n of e.nodes){const e=t[n.cid]
n.id=null!=e?e:n.id
for(const e of n.stepGroups)for(const n of e.steps){const e=t[n.cid]
n.id=null!=e?e:n.id}}}))}(e,r),n=function syncPersistedDocumentsIntoLocalFlowchart(e,t,n){const a={}
e.flowchart.nodes.forEach((e=>{e.stepGroups.forEach((e=>{e.steps.forEach((e=>{a[e.cid]=[e.documentId,e.documentVersionId]}))}))}))
return(0,ue.ZP)(t,(e=>{for(const t of e.nodes)for(const e of t.stepGroups)for(const t of e.steps)if(null!=a[t.cid]){t.documentId=a[t.cid][0]
t.documentVersionId=a[t.cid][1]
null!=t.documentVersionUpdate&&n.find((e=>{var n,a
return e.documentId===(null===(n=t.documentVersionUpdate)||void 0===n?void 0:n.documentId)&&e.openVersion===(null===(a=t.documentVersionUpdate)||void 0===a?void 0:a.openVersion)}))&&(t.documentVersionUpdate=null)}}))}(i,t,a)
return n}});++F.current};(0,r.useEffect)((()=>{(0,m._w)(e.name)}),[e.name])
const Z=(0,d.ZP)(e),q=Z||!e.permissions.writable,G=(0,r.useMemo)((()=>(0,Ce.rx)(h,e)),[h,e]),handleSave=async()=>{(0,u.hu)(!q,"Save is disabled in a read-only procedure")
try{O(!0)
await updateAndPersistProcedureWithBookkeeping(h,e)}finally{O(!1)}},navigateBackToParentTemplateCollection=t=>{const n=null!=t?t:(0,l.Vr)()
!function trackClickedExitProcedureEvent(e,t){l.L9(D.ci.CLICKED_EXIT_PROCEDURE,{actionOrigin:L.D2.PROCEDURE_DESIGNER,actionInstanceId:l.Vr(),eventGroupId:t,procedureId:e,procedureType:M.B5.RECIPE})}(e.id,n);(0,T.ZP)(f.Z.collectionURL(e.templateCollectionId))}
!function useAutosaver(e){const t=(0,r.useMemo)((()=>new I.Z({id:e.id,friendlyName:e.friendlyName,doSave:e.doSave,getItemState:()=>({openVersion:e.openVersion,savedVersion:e.savedVersion}),persistToLocalStorage:!1,checkItemLoaded:!1,showErrors:!1})),[]);(0,r.useEffect)((()=>{t.getItemState=()=>({openVersion:e.openVersion,savedVersion:e.savedVersion})}),[t,e.openVersion,e.savedVersion]);(0,r.useEffect)((()=>{t.doSave=e.doSave}),[t,e.doSave]);(0,r.useEffect)((()=>()=>{t.stop()}),[t])}({id:e.id,friendlyName:"Procedure",openVersion:F.current,savedVersion:F.current-(C?1:0),doSave:C&&!N?handleSave:a.ZT})
const handleSaveAndNavigate=async()=>{(0,u.hu)(!q,"Save is disabled in a read-only procedure")
const e=(0,l.Vr)()
await handleSave()
navigateBackToParentTemplateCollection(e)};(0,r.useEffect)((()=>{const handleDisplayCloseTabAndReload=e=>{if(C){e.preventDefault()
e.returnValue=""}}
window.addEventListener("beforeunload",handleDisplayCloseTabAndReload)
return()=>{(0,T.Re)()
window.removeEventListener("beforeunload",handleDisplayCloseTabAndReload)}}),[C]);(0,Pn.Z)(C,"Leave without saving?")
return r.createElement("div",null,r.createElement(k.Provider,{value:{isProcedureDirty:C,setProcedureDirty:R,isSaving:N,saveImmediately:handleSave,editingMethodCid:P,setEditingMethodCid:w}},s===On.PROCEDURE_EDITOR&&r.createElement(ProcedureEditorHeader,{procedureMetadata:e,onExitClick:async()=>{if(C){(0,T.Re)()
await(0,Yt.Z)(ProcedureConfirmExitWithUnsavedChangesModal,{onRequestLeaveWithoutSaving:navigateBackToParentTemplateCollection,onRequestSubmit:handleSaveAndNavigate})}else navigateBackToParentTemplateCollection()},enablePlanExperimentButton:0===G.length&&!q&&!b,onPlanExperimentClick:async()=>{(0,u.hu)(!q,"Plan experiment is disabled in a read-only procedure")
v(!0)
C&&await handleSave()
const n=(0,l.Vr)(),a=(0,y.kz)(t.nodes).map((e=>{(0,u.hu)(null!=e.id,"Method IDs must not be null")
return{...e,id:e.id}})),i=await planExperiment(e.id,{procedureName:e.name,methods:a,procedureFlowchart:t},n)
if(null==i){v(!1)
return}const r={name:e.name,numberOfRuns:i.numReplicates*i.experimentPlanPerCondition.length}
_(r)
p(On.REDIRECTING)
const s=await(0,Mn.jI)((async()=>{const{procedure:n,taskGroupId:r}=await executeExperiment({experimentPlan:i,procedureWithMetadata:{flowchart:t,metadata:e},organizationId:i.metadata.organizationId,methods:a})
U((()=>n.flowchart))
await updateAndPersistProcedureWithBookkeeping(n.flowchart,n.metadata)
return r})(),"Executing experiment...")
v(!1);(0,T.ZP)((0,bn.Uv)(s))
A.ZP.success("Created tasks")},onDuplicate:i,onRename:t=>{const n=t.trim()
!(0,Ce.id)(n)?updateAndPersistProcedureWithBookkeeping(h,{...e,name:n}):A.ZP.error("Procedure names must be non-empty",{duration:7})},onMove:async t=>{await(0,Mn.jI)((0,Ln.Z)(updateAndPersistProcedureWithBookkeeping(h,{...e,templateCollectionId:t}).then((n=>{(0,T.ZP)(f.Z.collectionURL(t));(0,T.ZP)(procedurePageUrl(e.id))})).then((()=>{A.ZP.success("Procedure was moved succesfully.")}))),"Moving Procedure to different template collection...")},onArchive:(e,t,n)=>{(0,Mn.jI)((0,Ln.Z)(new Promise((a=>{a((0,c.np)(e)(e,t,n))}))),"Archiving...")},onUnarchive:()=>{(0,Mn.jI)((0,Ln.Z)(new Promise((t=>{(0,c.cI)([e.id])([e.id])
t()}))),"Unarchiving...")},isProcedureValid:0===G.length,isProcedureReadOnly:q}),s===On.PROCEDURE_EDITOR&&q&&r.createElement(RestrictedAccessProcedureBanner,{isArchived:Z}),s===On.PROCEDURE_EDITOR&&r.createElement(ae.Provider,{value:{procedureValidationErrors:G}},r.createElement(ProcedureEditor,{flowchart:h,setFlowchart:e=>{U((()=>e))},procedureId:e.id,templateCollectionId:e.templateCollectionId,isProcedureReadOnly:q,isProcedureArchived:(0,d.ZP)(e)})),s===On.DOE&&null!=S&&r.createElement(ProcedureDoETable,{masterProcedureFlowchart:h,numberOfRuns:S.numberOfRuns}),s===On.REDIRECTING&&r.createElement(le.b,null)))}},60473:(e,t,n)=>{n.d(t,{B3:()=>a,P8:()=>l,ZP:()=>getProcedureUIString})
var a,i=n(232606),r=n(348920),s=n(675649)
!function(e){e.TITLE="TITLE"
e.METHOD="METHOD"
e.MATERIAL="MATERIAL"
e.PARAMETER="PARAMETER"
e.EQUIPMENT="EQUIPMENT"}(a||(a={}))
const o={TITLE:"Procedure",METHOD:"Method",MATERIAL:"Material",PARAMETER:"Parameter",EQUIPMENT:"Equipment"}
var l
!function(e){e.TITLE="TITLE"
e.LOWER="LOWER"
e.UPPER="UPPER"}(l||(l={}))
const c={Equipment:"Equipment"}
function getProcedureUIString(e,{stringCase:t=l.TITLE,plural:n=!1}={}){var a
let d=null!==(a=r.ZP.PROCEDURES_OVERRIDE_STRINGS[e])&&void 0!==a?a:o[e]
n&&(d=Object.keys(c).includes(d)?c[d]:(0,s._6)(2,d))
switch(t){case l.TITLE:break
case l.LOWER:d=d.toLowerCase()
break
case l.UPPER:d=d.toUpperCase()
break
default:(0,i.hu)(!1,"Invalid stringCase supplied")}return d}},982337:(e,t,n)=>{n.d(t,{AL:()=>extractMethodNodes,AR:()=>getNewProcedureFlowchart,Df:()=>addMethodToLinearFlowchart,FX:()=>changeMethodName,PQ:()=>changeMethodDetails,Pz:()=>isMaterialEdgeFlowingDownstream,QI:()=>duplicateMethodFromLinearFlowchart,Sy:()=>a,TP:()=>extractMethodEdges,Yg:()=>getOrderedDownstreamLinearMethodNodes,_y:()=>deleteMethodFromLinearFlowchart,bu:()=>installNewFlowchartUuidsForDuplication,gZ:()=>makeNewEmptyMethodNode,kz:()=>sortMethodNodesByRowColumn,oE:()=>reorderMethodsInLinearFlowchart,pQ:()=>deleteMaterialEdge,s9:()=>getNextLinearMethodNode,yF:()=>extractMaterialEdges})
var a,i=n(64558),r=n(512902),s=n(178570),o=n(232606),l=n(869016),c=n(260497),d=n(185856),u=n(934337)
function generateNewParameterId(){return`param-${(0,s.Z)()}`}function generateNewMaterialInputId(){return`matin-${(0,s.Z)()}`}function generateNewMaterialOutputId(){return`matout-${(0,s.Z)()}`}function generateNewEquipmentId(){return`equip-${(0,s.Z)()}`}function installNewNodeUuids(e){return(0,r.ZP)(e,(e=>{e.cid=`method-${(0,s.Z)()}`
for(const t of e.parameters)t.id=generateNewParameterId()
for(const t of e.materialInputs)t.id=generateNewMaterialInputId()
for(const t of e.materialOutputs)t.id=generateNewMaterialOutputId()
for(const t of e.equipmentList)t.id=generateNewEquipmentId()
return e}))}function installNewFlowchartUuidsForDuplication(e){return(0,r.ZP)(e,(e=>{const t={},n={}
e.nodes=e.nodes.map((e=>(0,r.ZP)(e,(e=>{e.id=null
for(const t of e.parameters)t.id=generateNewParameterId()
for(const n of e.materialInputs){const e=generateNewMaterialInputId()
t[n.id]=e
n.id=e}for(const t of e.materialOutputs){const e=generateNewMaterialOutputId()
n[t.id]=e
t.id=e}for(const t of e.equipmentList)t.id=generateNewEquipmentId()
return e}))))
e.edges=e.edges.map((e=>{if(e.type===d.QV.METHOD_EDGE)return e;(0,o.hu)(e.type===d.QV.MATERIAL_EDGE,"Unexpected edge type supplied")
return(0,r.ZP)(e,(e=>{const a=(0,l.MV)(e.sourceHandle),i=n[a]
e.sourceHandle=(0,l.Wq)(e.fromMethodCid,i,"source")
const r=(0,l.MV)(e.targetHandle),s=t[r]
e.targetHandle=(0,l.Wq)(e.toMethodCid,s,"target")}))}))}))}function getNextLinearMethodNode(e,t){const n=e.edges.filter((({type:e,fromMethodCid:n})=>e===d.QV.METHOD_EDGE&&n===t));(0,o.hu)(n.length<=1,"Only linear flowcharts are supported")
const[a]=n
return null!=a?e.nodes.find((({cid:e})=>e===a.toMethodCid)):null}function getOrderedDownstreamLinearMethodNodes(e,t){let n=getNextLinearMethodNode(e,t)
const a=[]
for(;null!=n;){a.push(n)
n=getNextLinearMethodNode(e,n.cid)}return a}function makeNewEmptyMethodNode(e,t){return installNewNodeUuids({...{id:null,cid:"new method",name:"",description:"",stepGroups:(0,c.nG)(),parameters:[],materialInputs:[],materialOutputs:[],equipmentList:[],methodTaskSchemaCorrelationIds:null,executionTemplateInfo:d.EC},type:d.On.METHOD,canvasGridCoordinates:{row:e,column:t}})}function generateNewMethodEdge(e,t){const n=(0,l.si)(e,"source"),a=(0,l.si)(t,"target")
return{id:(0,l.lK)(n,a),fromMethodCid:e,toMethodCid:t,type:d.QV.METHOD_EDGE,sourceHandle:n,targetHandle:a}}!function(e){e[e.UPSTREAM=0]="UPSTREAM"
e[e.DOWNSTREAM=1]="DOWNSTREAM"}(a||(a={}))
function rightShiftAllDownstreamCanvasCoordinatesAfterNode(e,t){return(0,r.ZP)(e,(e=>{getOrderedDownstreamLinearMethodNodes(e,t.cid).forEach((e=>{e.canvasGridCoordinates.column+=1}))}))}function addMethodToLinearFlowchart(e,t,{appendDirection:n=a.DOWNSTREAM,methodToAdd:i}={}){const s=e.edges.filter((e=>e.type===d.QV.METHOD_EDGE&&e.fromMethodCid===t));(0,o.hu)(s.length<=1,"Unexpectedly found a non-linear flowchart")
const l=e.edges.filter((e=>e.type===d.QV.METHOD_EDGE&&e.toMethodCid===t));(0,o.hu)(l.length<=1,"Unexpectedly found a non-linear flowchart")
const c=e.nodes.find((e=>e.cid===t));(0,o.hu)(null!=c,"Unexpectedly could not find node",{value:t})
const u=function updateMethodToAddWithNewCoordinates(e,t,n){const i=n===a.DOWNSTREAM?1:-1
return(0,r.ZP)(e,(e=>{e.canvasGridCoordinates={row:t.canvasGridCoordinates.row,column:t.canvasGridCoordinates.column+i}}))}(null!=i?i:makeNewEmptyMethodNode(c.canvasGridCoordinates.row,c.canvasGridCoordinates.column),c,n)
let m=e
if(n===a.UPSTREAM&&0===l.length){m=function prependFromRootNode(e,t,n){const a=generateNewMethodEdge(e.cid,t)
return(0,r.ZP)(n,(t=>{t.edges=t.edges.concat([a])
t.nodes.push(e)
t.nodes=rightShiftAllDownstreamCanvasCoordinatesAfterNode(t,e).nodes}))}(u,t,e)
return{updatedFlowchart:m,newMethodCid:u.cid}}m=0===s.length?function appendToLeafNode(e,t,n){const a=generateNewMethodEdge(e,t.cid)
return{edges:[...n.edges,a],nodes:[...n.nodes,t]}}(t,u,e):function insertBetweenTwoNodes(e,t,n){const a=e[0],{fromMethodCid:i,toMethodCid:s}=a,l=t.nodes.find((e=>e.cid===i));(0,o.hu)(null!=l,"Unexpectedly could not find method",{value:i})
const c=generateNewMethodEdge(i,n.cid),d=generateNewMethodEdge(n.cid,s)
return(0,r.ZP)(t,(e=>{e.edges=e.edges.filter((e=>e.id!==a.id)).concat([c,d])
e.nodes.push(n)
e.nodes=rightShiftAllDownstreamCanvasCoordinatesAfterNode(e,n).nodes}))}(s,e,u)
return{updatedFlowchart:m,newMethodCid:u.cid}}function duplicateMethodFromLinearFlowchart(e,t){const n=e.nodes.find((e=>e.cid===t));(0,o.hu)(null!=t,"Did not find a method to duplicate with the given method Id")
if((null==n?void 0:n.type)===d.On.METHOD){let a=installNewNodeUuids(n)
a=(0,r.ZP)(a,(e=>{e.name+=" (Copy)"}))
return addMethodToLinearFlowchart(e,t,{methodToAdd:a})}(0,o.hu)(!1,"Unsupported procedure node type")}function getReplacementMaterialEdgesForMaterialName(e,t){return e.flatMap((e=>t.map((t=>{const n=(0,l.MV)(e.sourceHandle),a=(0,l.MV)(t.targetHandle)
return function generateNewMaterialEdge(e){const t=(0,l.Wq)(e.fromMethodCid,e.materialOutputId,"source"),n=(0,l.Wq)(e.toMethodCid,e.materialInputId,"target")
return{id:(0,l.lK)(t,n),fromMethodCid:e.fromMethodCid,toMethodCid:e.toMethodCid,sourceHandle:t,targetHandle:n,type:d.QV.MATERIAL_EDGE}}({fromMethodCid:e.fromMethodCid,materialOutputId:n,toMethodCid:t.toMethodCid,materialInputId:a})}))))}function reorderMethodsInLinearFlowchart(e,t,n){const i=e.nodes.find((e=>e.cid===t));(0,o.hu)(null!=i,"Method to reorder must exist in flowchart")
let r,s,l=a.DOWNSTREAM
switch(n.type){case u.F.METHOD_ROOT:r=n.prependToMethodCid
l=a.UPSTREAM
break
case u.F.METHOD_LEAF:r=n.appendFromMethodCid
break
case u.F.METHOD_EDGE:r=n.fromMethod
s=n.toMethod
break
default:(0,o.hu)(!1,"Unsupported drop zone type supplied")}if(t===r||t===s)return e
const c=e.edges.filter((e=>e.type===d.QV.MATERIAL_EDGE))
let m=deleteMethodFromLinearFlowchart(e,t)
m=addMethodToLinearFlowchart(m,r,{methodToAdd:i,appendDirection:l}).updatedFlowchart
const p=m.edges.filter((e=>e.type!==d.QV.MATERIAL_EDGE)).concat(c)
return{...m,edges:p}}function getUniqueMaterialEdges(e){return Object.values((0,i.Xc)((0,i.vM)(e,(e=>e.id)),(e=>e[0])))}function buildMaterialEdgesForCommonMaterials(e,t){const n=Object.keys(e),a=Object.keys(t)
return getUniqueMaterialEdges((0,i.wf)([n,a]).flatMap((n=>{var a,i
return getReplacementMaterialEdgesForMaterialName(null!==(a=e[n])&&void 0!==a?a:[],null!==(i=t[n])&&void 0!==i?i:[])})))}function getMergedMaterialEdgesFromInternalNames(e,t){const n=t.filter((({toMethodCid:t})=>t===e.cid)),a=t.filter((({fromMethodCid:t})=>t===e.cid)),r=(0,i.Xc)((0,i.Pe)([...e.materialInputs,...e.materialOutputs],(e=>e.id)),(e=>e.name))
return buildMaterialEdgesForCommonMaterials((0,i.vM)(n,(e=>r[(0,l.MV)(e.targetHandle)])),(0,i.vM)(a,(e=>r[(0,l.MV)(e.sourceHandle)])))}function getMergedMaterialEdgesFromExternalNames(e,t,n){const a=n.filter((({toMethodCid:e})=>e===t.cid)),r=n.filter((({fromMethodCid:e})=>e===t.cid)),s=(0,i.vM)(n,(e=>e.fromMethodCid===t.cid?e.toMethodCid:e.fromMethodCid)),c=new Set(n.map((e=>e.fromMethodCid===t.cid?(0,l.MV)(e.targetHandle):(0,l.MV)(e.sourceHandle)))),d=Object.keys(s).flat().map((t=>{const n=e.nodes.find((e=>e.cid===t));(0,o.hu)(null!=n,"Node is expected for given method Id")
return[...n.materialInputs,...n.materialOutputs]})).flat().filter((e=>c.has(e.id))),u=(0,i.Xc)((0,i.Pe)(d,(e=>e.id)),(e=>e.name))
return buildMaterialEdgesForCommonMaterials((0,i.vM)(a,(e=>u[(0,l.MV)(e.sourceHandle)])),(0,i.vM)(r,(e=>u[(0,l.MV)(e.targetHandle)])))}function deleteMethodFromLinearFlowchart(e,t){const n=e.edges.filter((e=>e.type===d.QV.METHOD_EDGE)),a=e.nodes.filter((e=>e.cid===t));(0,o.hu)(1===a.length,"Did not find exactly one method with expected id")
const i=a[0],r=n.filter((e=>e.toMethodCid===t));(0,o.hu)(r.length<=1,"Expecting flowchart to be linear")
const s=r[0],l=n.filter((e=>e.fromMethodCid===t));(0,o.hu)(l.length<=1,"Expecting flowchart to be linear")
const c=l[0],u=e.edges.filter((e=>e.type===d.QV.MATERIAL_EDGE&&(e.toMethodCid===t||e.fromMethodCid===t))),m=u.map((e=>e.id)),p=e.edges.filter((e=>e.id!==(null==c?void 0:c.id)&&e.id!==(null==s?void 0:s.id)&&!m.includes(e.id))),h=null!=s&&null!=c?[generateNewMethodEdge(s.fromMethodCid,c.toMethodCid)]:[],E=p.concat(function getSelfHealedMaterialEdges(e,t,n){return 0===n.length?n:getUniqueMaterialEdges([...getMergedMaterialEdgesFromExternalNames(e,t,n),...getMergedMaterialEdgesFromInternalNames(t,n)])}(e,i,u),h)
return{edges:E,nodes:e.nodes.filter((e=>e.cid!==t))}}function changeMethodName(e,t,n){const a=e.nodes.map((e=>e.cid===t?{...e,name:n}:e))
return{edges:e.edges,nodes:a}}function changeMethodDetails(e,t){return(0,r.ZP)(e,(e=>{const n=e.nodes.find((({cid:e})=>e===t.cid));(0,o.hu)(null!=n,"Could not find a node with the id")
const a=t.materialInputs.map((e=>e.id)),i=n.materialInputs.filter((e=>!a.includes(e.id))).map((e=>(0,l.Wq)(n.cid,e.id,"target"))),r=t.materialOutputs.map((e=>e.id)),s=n.materialOutputs.filter((e=>!r.includes(e.id))).map((e=>(0,l.Wq)(n.cid,e.id,"source")))
Object.assign(n,t)
e.edges=e.edges.filter((e=>!(e.type===d.QV.MATERIAL_EDGE&&(s.includes(e.sourceHandle)||i.includes(e.targetHandle)))))}))}function deleteMaterialEdge(e,t){return{edges:e.edges.filter((e=>e.type!==d.QV.MATERIAL_EDGE||e.id!==t)),nodes:e.nodes}}function getNewProcedureFlowchart(){return{nodes:[makeNewEmptyMethodNode(40,200)],edges:[]}}function isMaterialEdgeFlowingDownstream(e,t,n){return function depthFirstEdgeSearch(e,t,n){var a
const i=new Set,r=[]
r.push(t)
for(;0!==r.length;){const t=r.pop();(0,o.hu)(null!=t,"Current method id was null")
i.add(t)
const s=null!==(a=e[t])&&void 0!==a?a:[]
if(s.includes(n))return!0
s.forEach((e=>{i.has(e)||r.push(e)}))}return!1}((0,i.Xc)((0,i.vM)(n,(e=>e.fromMethodCid)),(e=>e.map((e=>e.toMethodCid)))),e,t)}function extractMethodNodes(e){return e.filter((e=>e.type===d.On.METHOD))}function extractMethodEdges(e){return e.filter((e=>e.type===d.QV.METHOD_EDGE))}function extractMaterialEdges(e){return e.filter((e=>e.type===d.QV.MATERIAL_EDGE))}function sortMethodNodesByRowColumn(e){return e.sort(((e,t)=>{const n=e.canvasGridCoordinates.row-t.canvasGridCoordinates.row,a=e.canvasGridCoordinates.column-t.canvasGridCoordinates.column
return n||a}))}},869016:(e,t,n)=>{n.d(t,{MV:()=>getMaterialIdFromHandle,PP:()=>r,Wq:()=>createHandleIdForMaterial,dd:()=>getHandleTypeDetails,lK:()=>createEdgeId,m2:()=>getHandleType,si:()=>createHandleIdForMethod,xD:()=>getEdgeTypeFromSourceHandle})
var a=n(232606),i=n(185856)
var r
!function(e){e.METHOD="METHOD"
e.MATERIAL="MATERIAL"}(r||(r={}))
function createEdgeId(e,t){return`edge_${e}$${t}`}function createHandleIdForMethod(e,t){return`${"source"===t?"SM_":"TM_"}${e}`}function createHandleIdForMaterial(e,t,n){return`${"source"===n?"SMO_":"TMI_"}${e||"none"}$${t}`}function getHandleType(e){switch(e.split("_")[0]){case"SM":case"TM":return r.METHOD
case"SMO":case"TMI":return r.MATERIAL
default:(0,a.hu)(!1,`Invalid handle id: ${e}`)}}function getHandleTypeDetails(e){const t=e.split("_")[0],n={SM:{procedureHandleType:r.METHOD,handleType:"source"},TM:{procedureHandleType:r.METHOD,handleType:"target"},SMO:{procedureHandleType:r.MATERIAL,handleType:"source"},TMI:{procedureHandleType:r.MATERIAL,handleType:"target"}}[t];(0,a.hu)(null!=n,`Invalid handle id: ${e}`)
return n}function getEdgeTypeFromSourceHandle(e){return getHandleType(e)===r.METHOD?i.QV.METHOD_EDGE:i.QV.MATERIAL_EDGE}function getMaterialIdFromHandle(e){const t=e.split("$");(0,a.hu)(2===t.length,"Invalid handle string provided")
return t[1]}},934337:(e,t,n)=>{n.d(t,{F:()=>a})
var a
!function(e){e[e.METHOD_EDGE=0]="METHOD_EDGE"
e[e.METHOD_ROOT=1]="METHOD_ROOT"
e[e.METHOD_LEAF=2]="METHOD_LEAF"}(a||(a={}))},260497:(e,t,n)=>{n.d(t,{jQ:()=>findStep,nG:()=>makeEmptyStepGroups,xv:()=>makeEmptyStep})
var a=n(178570),i=n(185856)
function makeEmptyStepGroups(){return[{group:i.HC.PRE_RUN,steps:[]},{group:i.HC.RUN,steps:[]},{group:i.HC.POST_RUN,steps:[]}]}function findStep(e,t){for(const n of e){const e=n.steps.find((e=>e.cid===t))
if(null!=e)return e}return null}function makeEmptyStep(){return{id:null,cid:(0,a.Z)(),name:"",documentId:null,documentVersionId:null,documentVersionUpdate:null}}},159332:(e,t,n)=>{n.d(t,{F:()=>i,l:()=>a})
var a,i
!function(e){e[e.NON_UNIQUE_NAME=0]="NON_UNIQUE_NAME"
e[e.INVALID_NAME=1]="INVALID_NAME"
e[e.UPSTREAM_MATERIAL_EDGE=2]="UPSTREAM_MATERIAL_EDGE"
e[e.MISSING_INPUTS=3]="MISSING_INPUTS"}(a||(a={}))
!function(e){e[e.METHOD=0]="METHOD"
e[e.MATERIAL_INPUT=1]="MATERIAL_INPUT"
e[e.MATERIAL_OUTPUT=2]="MATERIAL_OUTPUT"
e[e.PARAMETER=3]="PARAMETER"
e[e.EQUIPMENT=4]="EQUIPMENT"
e[e.MATERIAL_EDGE=5]="MATERIAL_EDGE"
e[e.STEP=6]="STEP"}(i||(i={}))},317201:(e,t,n)=>{n.d(t,{XR:()=>filterProcedureValidationErrors,Zq:()=>buildTooltipFromErrors,w3:()=>findRelevantProcedureValidationErrors})
var a,i=n(531041),r=n(232606)
function filterProcedureValidationErrors(e,t={}){const n=Object.keys(t)
return e.filter((e=>n.every((n=>{if(null==t[n])return!0
if("errorType"===n)return t.errorType===e.type
if("primaryObjectType"===n)return t.primaryObjectType===e.primaryObject.objectType
if("primaryObjectId"===n)return t.primaryObjectId===e.primaryObject.id
if("parentObjectType"===n)return e.parentObjects.find((e=>e.objectType===t.parentObjectType))
if("parentObjectId"===n)return e.parentObjects.find((e=>e.id===t.parentObjectId));(0,r.Gp)(!1,"Unhandled filter key")
return!1}))))}function findRelevantProcedureValidationErrors(e,t){return filterProcedureValidationErrors(e,{primaryObjectId:t.id,primaryObjectType:t.objectType}).concat(filterProcedureValidationErrors(e,{parentObjectId:t.id,parentObjectType:t.objectType}))}!function(e){e.PERIOD="."
e.NEWLINE="\n"
e.PERIOD_SPACE=". "
e.PERIOD_SPACE_NEWLINE=". \n"}(a||(a={}))
const s=a.PERIOD_SPACE_NEWLINE
function buildTooltipFromErrors(e,t=s){if(0===e.length)return null
const n=i.default.unique(e.map((e=>e.errorMessage))).join(t)
return t===a.NEWLINE?n:n.concat(".")}},294780:(e,t,n)=>{n.d(t,{id:()=>isNameEmpty,rx:()=>validateProcedure})
var a=n(531041),i=n(60473),r=n(982337),s=n(159332)
function isNameEmpty(e){return null==e||""===e.trim()}function extractMethodComponentsNames(e){return e.map((e=>e.name))}function extractDuplicateNames(e){const t=a.default.countBy(e,(e=>e))
return Object.keys(t).filter((e=>t[e]>1))}function createErrorsForMethodComponentsWithEmptyName(e,t,n,a){return e.filter((e=>isNameEmpty(e.name))).map((e=>({errorMessage:n,type:s.l.INVALID_NAME,primaryObject:{id:e.id,objectType:t},parentObjects:a})))}function createErrorsForMethodComponentsWithMatchingName(e,t,n,a,i){return e.filter((e=>e.name===n)).map((e=>({errorMessage:a,type:s.l.NON_UNIQUE_NAME,primaryObject:{id:e.id,objectType:t},parentObjects:i})))}function validateMethodSectionHaveNonEmptyNames(e,t,n){const a=`${(0,i.ZP)(i.B3.PARAMETER)} ${t}`,r=`${(0,i.ZP)(i.B3.MATERIAL)} ${t}`,o=`${(0,i.ZP)(i.B3.EQUIPMENT)} ${t}`
return[...createErrorsForMethodComponentsWithEmptyName(e.materialInputs,s.F.MATERIAL_INPUT,r,n),...createErrorsForMethodComponentsWithEmptyName(e.materialOutputs,s.F.MATERIAL_OUTPUT,r,n),...createErrorsForMethodComponentsWithEmptyName(e.parameters,s.F.PARAMETER,a,n),...createErrorsForMethodComponentsWithEmptyName(e.equipmentList,s.F.EQUIPMENT,o,n)]}function validateMaterialOutputsHaveUniqueNames(e,t,n){return extractDuplicateNames(extractMethodComponentsNames(e.materialOutputs)).flatMap((a=>createErrorsForMethodComponentsWithMatchingName(e.materialOutputs,s.F.MATERIAL_OUTPUT,a,t,n)))}function validateNonMaterialOutputsHaveUniqueNames(e,t,n){return extractDuplicateNames([...extractMethodComponentsNames(e.parameters),...extractMethodComponentsNames(e.materialInputs),...extractMethodComponentsNames(e.equipmentList)]).flatMap((a=>[...createErrorsForMethodComponentsWithMatchingName(e.parameters,s.F.PARAMETER,a,t,n),...createErrorsForMethodComponentsWithMatchingName(e.materialInputs,s.F.MATERIAL_INPUT,a,t,n),...createErrorsForMethodComponentsWithMatchingName(e.equipmentList,s.F.EQUIPMENT,a,t,n)]))}function validateProcedureMethods(e){const t=(0,i.ZP)(i.B3.METHOD),n=e.nodes.flatMap((e=>isNameEmpty(e.name)?{errorMessage:`${t} names are required`,type:s.l.INVALID_NAME,primaryObject:{id:e.cid,objectType:s.F.METHOD},parentObjects:[]}:[])),a=e.nodes.flatMap((e=>function doesMethodHaveAnyInputs(e){return e.parameters.length>0||e.materialInputs.length>0||e.equipmentList.length>0}(e)?[]:{errorMessage:`${t}s must have at least one material input, parameter, or equipment defined`,type:s.l.MISSING_INPUTS,primaryObject:{id:e.cid,objectType:s.F.METHOD},parentObjects:[]})),r=e.nodes.flatMap((e=>function validateProcedureMethodSectionDetails(e){const t=(0,i.ZP)(i.B3.METHOD,{stringCase:i.P8.LOWER}),n=(0,i.ZP)(i.B3.PARAMETER,{plural:!0}),a=(0,i.ZP)(i.B3.MATERIAL,{plural:!1,stringCase:i.P8.LOWER}),r=(0,i.ZP)(i.B3.MATERIAL,{plural:!1,stringCase:i.P8.TITLE}),o=`${n}, ${a} inputs and ${(0,i.ZP)(i.B3.EQUIPMENT,{plural:!0,stringCase:i.P8.LOWER})} must have unique names within a ${t}`,l=`${r} outputs must have unique names within a ${t}`,c=[{id:e.cid,objectType:s.F.METHOD}]
return[...validateMethodSectionHaveNonEmptyNames(e,"names are required",c),...validateMaterialOutputsHaveUniqueNames(e,l,c),...validateNonMaterialOutputsHaveUniqueNames(e,o,c)]}(e)))
return n.concat(r,a)}function validateProcedure(e,t){let n=[]
const pushErrors=e=>{null!=e&&(n=n.concat(e))}
pushErrors(validateProcedureMethods(e))
pushErrors(function validateProcedureMaterialEdges(e){const t=(0,i.ZP)(i.B3.MATERIAL,{plural:!0}),n=(0,i.ZP)(i.B3.METHOD,{plural:!0,stringCase:i.P8.LOWER})
return(0,r.yF)(e.edges).flatMap((a=>null==(0,r.Yg)(e,a.fromMethodCid).find((e=>e.cid===a.toMethodCid))?{errorMessage:`${t} can only flow from left to right between ${n}`,type:s.l.UPSTREAM_MATERIAL_EDGE,primaryObject:{id:a.id,objectType:s.F.MATERIAL_EDGE},parentObjects:[{id:a.fromMethodCid,objectType:s.F.METHOD},{id:a.toMethodCid,objectType:s.F.METHOD}]}:[]))}(e))
return n}},635439:(e,t,n)=>{n.d(t,{Nc:()=>createProcedure,bV:()=>upsertWorkflowSchemasFromProcedure,ov:()=>createFlowchartTasksFromProcedure,qi:()=>updateProcedure})
var a=n(188663),i=n(581210),r=n(771398)
function createProcedure(e){const t=[e]
return(0,r.s0)({url:(0,i.Kq)(a.J.PROCEDURE),data:{creates:t}})}function updateProcedure(e){const t=[e]
return(0,r.Ry)({url:(0,i.Kq)(a.J.PROCEDURE),data:{updates:t}})}function createFlowchartTasksFromProcedure(e){return(0,r.s0)({url:`${(0,i.Kq)(a.J.PROCEDURE)}:create-tasks`,data:e})}function upsertWorkflowSchemasFromProcedure(e){return(0,r.s0)({url:`${(0,i.Kq)(a.J.PROCEDURE)}:build-workflow`,data:e})}},400783:(e,t,n)=>{n.d(t,{D$:()=>serializeProcedureFlowchartForNetwork,R9:()=>parseProcedureFromNetwork})
var a=n(64558),i=n(232606),r=n(256605),s=n(869016),o=n(185856),l=n(38317)
function parseMethodNodeFromNetwork(e,t){const{id:n,name:a,description:i}=e,{executionTemplateInfo:r,methodTaskSchemaCorrelationIds:s}=e.jsonBetaAttributes
return{id:n,cid:t(n),type:o.On.METHOD,name:a,description:i,stepGroups:e.stepGroups.map((e=>function parseStepGroupFromNetwork(e,t){const{group:n,steps:a}=e
return{group:n,steps:a.map((e=>function parseProcedureStepConfigFromNetwork(e,t){const{id:n,name:a,documentVersion:i}=e,r=null!=i&&null!=i.document?i.document.id:null,s=null!=i?i.id:null
return{id:n,cid:t(n),name:a,documentId:r,documentVersionId:s,documentVersionUpdate:null}}(e,t)))}}(e,t))),parameters:e.parameters.map((e=>function parseParameterFromNetwork(e){return(0,l.C)(e,"__typename")}(e))),materialInputs:e.materialInputs.map((e=>function parseMaterialInputFromNetwork(e){return(0,l.C)(e,"__typename")}(e))),materialOutputs:e.materialOutputs.map((e=>function parseMaterialOutputFromNetwork(e){return(0,l.C)(e,"__typename")}(e))),equipmentList:e.equipmentList.map((e=>function parseEquipmentFromNetwork(e){return(0,l.C)(e,"__typename")}(e))),canvasGridCoordinates:(0,l.C)(e.gridLayoutCoordinates,"__typename"),executionTemplateInfo:null!=r?r:{type:o.vt.UNSET},methodTaskSchemaCorrelationIds:s}}function serializeMethodNodeForNetwork(e){const{id:t,cid:n,name:a,description:r,executionTemplateInfo:s,methodTaskSchemaCorrelationIds:l}=e
return{id:t,cid:n,name:a,description:r,stepGroups:null==e.stepGroups?[]:e.stepGroups.map((e=>function serializeProcedureStepGroupForNetwork(e){const{group:t,steps:n}=e
return{group:t,steps:n.map((e=>function serializeProcedureStepConfigForNetwork(e){const{id:t,cid:n,name:a,documentId:i,documentVersionId:r,documentVersionUpdate:s}=e,o={cid:n,name:a}
null!=t&&(o.id=t)
if(null!=r&&null!=i){o.documentVersion={id:r}
s&&(o.documentVersion.jsonData=s.serverDocument)}return o}(e)))}}(e))),parameters:e.parameters.map((e=>function serializeParameterForNetwork(e){const{id:t,name:n,comments:a,unit:i,value:r,lowerLimit:s,upperLimit:o}=e
return{id:t,name:n,comments:a,unit:i,value:"number"==typeof r?r.toString():r,lowerLimit:"number"==typeof s?s.toString():s,upperLimit:"number"==typeof o?o.toString():o}}(e))),materialInputs:e.materialInputs.map((e=>function serializeMaterialInputForNetwork(e){return(0,i.Gp)((0,o.pA)(e),"Procedures network translation layer needs M1 support")?e:{id:e.id,name:e.name,details:"",comments:""}}(e))),materialOutputs:e.materialOutputs.map((e=>function serializeMaterialOutputForNetwork(e){const{id:t,name:n,details:a,comments:i}=e
return{id:t,name:n,details:a,comments:i}}(e))),equipmentList:e.equipmentList.map((e=>function serializeEquipmentForNetwork(e){const{id:t,name:n,details:a,comments:i}=e
return{id:t,name:n,details:a,comments:i}}(e))),gridLayoutCoordinates:e.canvasGridCoordinates,jsonBetaAttributes:{executionTemplateInfo:s,methodTaskSchemaCorrelationIds:l}}}function parseProcedureEdgeFromNetwork(e,t,n){const{type:a,sourceId:o,targetId:l}=e
switch(a){case r.QV.METHOD_EDGE:return function parseMethodEdgeFromNetwork(e,t){const n=(0,s.si)(e,"source"),a=(0,s.si)(t,"target")
return{id:(0,s.lK)(n,a),type:r.QV.METHOD_EDGE,fromMethodCid:e,toMethodCid:t,sourceHandle:n,targetHandle:a}}(n(o),n(l))
case r.QV.MATERIAL_EDGE:return function parseMaterialEdgeFromNetwork(e,t,n){const a=n[e],i=n[t],o=(0,s.Wq)(a,e,"source"),l=(0,s.Wq)(i,t,"target")
return{id:(0,s.lK)(o,l),type:r.QV.MATERIAL_EDGE,fromMethodCid:a,toMethodCid:i,sourceHandle:o,targetHandle:l}}(o,l,t)
default:(0,i.hu)(!1,"unsupported edge type!")}}function parseProcedureFromNetwork(e,t){var n
const{id:i,name:r,archiveData:s,creator:o,createdAt:l,modifiedAt:c,permissions:d}=e,u=function generateMaterialIdToMethodCidMap(e){const t=e.flatMap((({cid:e,materialInputs:t,materialOutputs:n})=>[...t,...n].map((({id:t})=>({materialId:t,methodCid:e})))))
return(0,a.Xc)((0,a.Pe)(t,(({materialId:e})=>e)),(({methodCid:e})=>e))}(e.currentFlowchartVersion.nodes.map((e=>({...e,cid:t(e.id)}))))
return{flowchart:{nodes:e.currentFlowchartVersion.nodes.map((e=>parseMethodNodeFromNetwork(e,t))),edges:e.currentFlowchartVersion.edges.map((e=>parseProcedureEdgeFromNetwork(e,u,t)))},metadata:{id:i,name:r,templateCollectionId:e.templateCollection.id,archiveData:s,creator:o,createdAt:l,modifiedAt:c,permissions:d,flowchartTaskSchemaCorrelationIds:null!==(n=e.currentFlowchartVersion.jsonBetaAttributes.flowchartTaskSchemaCorrelationIds)&&void 0!==n?n:void 0}}}function serializeProcedureFlowchartForNetwork(e){const{flowchart:{nodes:t,edges:n},metadata:{flowchartTaskSchemaCorrelationIds:a}}=e
return{nodes:t.map((e=>serializeMethodNodeForNetwork(e))),edges:n.map((e=>function serializeProcedureEdgeForNetwork(e){const{type:t,fromMethodCid:n,toMethodCid:a,sourceHandle:o,targetHandle:l}=e
switch(t){case r.QV.METHOD_EDGE:return{type:t,sourceId:n,targetId:a}
case r.QV.MATERIAL_EDGE:return{type:t,sourceId:(0,s.MV)(o),targetId:(0,s.MV)(l)}
default:(0,i.hu)(!1,"unsupported edge type!")}}(e))),jsonBetaAttributes:{flowchartTaskSchemaCorrelationIds:a}}}},407532:(e,t,n)=>{n.d(t,{Z:()=>ProcedureMaterialTypeSelectorForTables})
var a=n(989526),i=n(751512),r=n(965131),s=n(851422),o=n(334450),l=n(476604),c=n(509156),d=n(608786)
function ProcedureMaterialTypeSelectorForTables(e){var t
const n=(0,i.IJ)(o._),u=(0,a.useMemo)((()=>n.type===i.NI.SUCCESS?(0,r.NA)("TagSchema",n.data.tagSchemas):null),[n]),m=(null===(t=e.typedValue)||void 0===t?void 0:t.type)===s.BaseTypedValueType.PROCEDURE_SCHEMA_FIELD_TYPE?e.typedValue:(0,c.kv)(d._)
return null==u?a.createElement(l.b,null):a.createElement(d.Z,{staticDisplay:e.staticDisplay,selectedMaterialType:(0,c._J)(m,u),onChangeSelection:t=>{e.onUpdate((0,c.kv)(t))}})}},126350:(e,t,n)=>{n.d(t,{Z:()=>ProcedureStepGroup})
var a=n(692013),i=n(989526),r=n(200337),s=n(129270),o=n(946948),l=n(759345),c=n(205986)
const d="Untitled"
function AddStepModal({onRequestClose:e,onRequestSubmit:t,stepGroupName:n}){const[s,m]=(0,i.useState)(d),[p,h]=(0,i.useState)(r.LX.TOP)
return i.createElement(c.ZP,{title:"Add step",onRequestClose:e,onRequestSubmit:()=>{t({name:s,placement:p})},buttons:[{text:"Add step",submit:!0,dataTestAttrs:{component:"AddStepModal",element:"submitButton"}}]},i.createElement("div",null,i.createElement("div",{className:(0,a.iv)(u.section)},i.createElement("span",{className:(0,a.iv)(u.label)},"Step name"),i.createElement(l.Z,{className:(0,a.iv)(u.input),onChange:e=>{m(e.target.value)},onFocus:e=>{s===d&&e.target.select()},autoFocus:!0,value:s})),i.createElement("div",{className:(0,a.iv)(u.section)},i.createElement("span",{className:(0,a.iv)(u.label)},"Placement"),i.createElement("div",{className:(0,a.iv)(u.input)},i.createElement(o.t,{hasBottomSpacing:!0,selectedValue:p,options:[{label:`Add to the top of ${n}`,value:r.LX.TOP},{label:`Add to the bottom of ${n}`,value:r.LX.BOTTOM}],onChange:e=>{h(e)},isVertical:!0})))))}const u=a.mM.create({section:{marginTop:"12px",marginBottom:"12px"},label:{fontSize:"13px",fontWeight:s.KB,lineHeight:"16px"},input:{marginTop:"4px"}})
var m=n(263137),p=n(271359),h=n(224993),E=n(502633)
function AddStepButton(e){return i.createElement(h.Z,{icon:"plus",iconStyle:h.L.POSITIVE,className:(0,a.iv)(S.buttonHover),onClick:t=>{t.stopPropagation();(0,E.Z)(AddStepModal,{onRequestSubmit:t=>{e.onAddStep(t.name,t.placement)},stepGroupName:e.stepGroupName})},...(0,m.Z)({component:"AddStepButton",element:"clickableIcon"})})}const S=a.mM.create({buttonHover:{":hover":{color:p.Ej}}})
var T=n(634168),g=n(317255),f=n(36424)
function ProcedureStepGroup({name:e,isOpenByDefault:t=!0,locked:n,onAddStep:r,children:s}){return i.createElement("div",{className:(0,a.iv)(I.headerContainer)},i.createElement(g.Z,{isOpenByDefault:t,expandIconPosition:"right",headerSpacing:"none",headerStyle:"gray",header:i.createElement("div",{className:(0,a.iv)(I.nameContainer)},i.createElement("span",{...(0,m.Z)({component:"ProcedureStepGroup",element:"name"}),className:(0,a.iv)(I.name)},e,n&&i.createElement("div",{...(0,m.Z)({component:"ProcedureStepGroup",element:"icon"})},i.createElement(f.Z,{icon:"lock",className:(0,a.iv)(I.lockIcon)})),!n&&null!=r&&i.createElement(AddStepButton,{stepGroupName:e,onAddStep:r})))},s))}const I=a.mM.create({headerContainer:{width:"250px",border:`1px solid ${p.tN}`,display:"flex",flexDirection:"row",alignItems:"center"},nameContainer:{paddingTop:"6px",paddingBottom:"6px",width:"225px",height:"32px",cursor:"pointer"},name:{fontSize:"13px",fontWeight:"bold",...(0,T.n6)(1),paddingLeft:"12px",display:"flex",alignItems:"center",gap:"8px"},lockIcon:{color:p.TG,width:"12px"}})},157168:(e,t,n)=>{n.d(t,{Z:()=>ProcedureStepsListItem})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(186837),l=n(557715),c=n(634168),d=n(263137),u=n(334148),m=n(271359),p=n(723635),h=n(413714),E=n(927517)
function ProcedureStepsListItem({name:e,isSelected:t,onClick:n,onDoubleClick:i,nameClassName:c,processTaskData:m,overflowMenuItems:T}){const[g,f]=(0,p.Z)(),I=s.createElement("div",{className:(0,a.iv)(S.container,t&&S.selectedContainer),tabIndex:0,onClick:n,onDoubleClick:i,onKeyDown:e=>{var t,a
const i=document.activeElement
if((0,E.isEnterKey)(e)){e.preventDefault()
e.stopPropagation()
n()}else if((0,E.isDownKey)(e)){e.preventDefault()
e.stopPropagation()
null===(t=null==i?void 0:i.nextSibling)||void 0===t||t.focus()}else if((0,E.isUpKey)(e)){e.preventDefault()
e.stopPropagation()
null===(a=null==i?void 0:i.previousSibling)||void 0===a||a.focus()}},role:"button",...f,...(0,d.Z)({component:"ProcedureStepsListItem",element:"container"})},(null==m?void 0:m.shouldRenderStatusIcon)&&s.createElement(o.Z,{style:S.icon,status:m.status,...(0,d.Z)({component:"ProcedureStepsListItem",element:"icon"})}),s.createElement("div",{className:r()("u-lr-split",(0,a.iv)(S.nameContainer)),...(0,d.Z)({component:"ProcedureStepsListItem",element:"name"})},s.createElement("span",{className:r()((0,a.iv)(S.name,t&&S.selectedName),c)},e),s.createElement("span",null,null!=T&&s.createElement(h.Z,{options:T,buttonProps:{buttonStyle:u.ZJ.TERTIARY_WHITE_TRANSPARENT,className:(0,a.iv)(S.overflowMenuButton,(g||t)&&S.overflowMenuButtonVisible)}}))))
return null!=m?s.createElement(l.Z,{apiIdToSubscribe:m.taskId,refetch:m.refetch},I):s.createElement("div",null,I)}const S=a.mM.create({container:{display:"flex",flexDirection:"row",alignItems:"center",height:"40px",width:"250px",background:m.Cj,borderTop:`1px solid ${m.tN}`,verticalAlign:"middle",cursor:"pointer",":hover":{background:m.bs}},selectedContainer:{background:m.Ro,":hover":{background:m.Ro}},icon:{paddingLeft:"12px"},nameContainer:{width:"100%",padding:"0 8px"},name:{fontSize:"13px",...(0,c.n6)(2)},selectedName:{fontWeight:"bold"},overflowMenuButton:{border:"none",color:m.hc,opacity:0},overflowMenuButtonVisible:{opacity:1}})},684402:(e,t,n)=>{n.d(t,{Z:()=>ProcedureMaterialsPrototypeTableAdapter,e:()=>a})
var a,i=n(232606),r=n(675649),s=n(564058),o=n(269062),l=n(1456),c=n(453580),d=n(783851),u=n(851422),m=n(194170),p=n(159332),h=n(185856),E=n(60473),S=n(430865)
!function(e){e.INPUT="INPUT"
e.OUTPUT="OUTPUT"}(a||(a={}))
class ProcedureMaterialsPrototypeTableAdapter extends o.Z{getActionFunctions(e,t){return{secondary:[s.C]}}getDisplayName(e){return`${(0,E.ZP)(E.B3.MATERIAL)} ${e.metadata.materialType===a.INPUT?"inputs":"outputs"}`}getRowDisplayName(e){return`${(0,E.ZP)(E.B3.MATERIAL,{stringCase:E.P8.LOWER})}`}getBlankRowMetadata(e){return{}}static getAdapter(){return(0,l.getStructuredTableAdapters)()[c.sl.RECIPE_MATERIALS_PROTOTYPE]}allowPasteTable(){return!1}allowDeleteTable(e){return{canDelete:!1}}messageOverlayDuringResize(e){const t=e.numRowsToAdd+e.initialNumRows
return`${t} ${(0,r._6)(t,"material")}`}_getAllSupportedColumns({entryId:e,metadata:t,schemas:n,selectorsById:a}){return[(0,d.Ao)({columnType:u.TableColumnType.STRING,name:"Name",isRequired:!0}),(0,d.Ao)({columnType:u.TableColumnType.STRING,name:"Details",isRequired:!1}),(0,d.Ao)({columnType:u.TableColumnType.STRING,name:"Comments",isRequired:!1,width:400})]}static materialToRow(e,t,n,r,s){const o=ProcedureMaterialsPrototypeTableAdapter.getAdapter().getBlankRow(t.metadata,n,t.columns,{}),l=t.metadata.materialType===a.INPUT?p.F.MATERIAL_INPUT:p.F.MATERIAL_OUTPUT;(0,i.hu)((0,h.pA)(e),"Procedures M0 table used for M1 content")
return{...o,cells:[(0,S.S)(e.name,{error:(0,S.W)(e.id,l,r)}),(0,S.S)(e.details,{cellLockedMessage:s}),(0,S.S)(e.comments)]}}static rowToMaterial(e,t){(0,i.hu)(e.cells.length>=2,"Table is not large enough")
const cellText=t=>{const n=e.cells[t]
return n.text||(n.typedValue?(0,m.Gh)(n.typedValue):"")}
return{id:t,name:cellText(0),details:cellText(1),comments:cellText(2)}}toTable(e){return{...super.toTable(e),lockedDims:!0,allowColumnEdits:!1}}}},550910:(e,t,n)=>{n.d(t,{fl:()=>useProcessTaskSchemasForCreate,gb:()=>getProcessTaskSchemaContextualCreateOptions,iz:()=>getProcessTaskSchemaGlobalCreateOptions,w5:()=>openCreateProcessModal})
var a=n(769784),i=n(468943),r=n(930630),s=n(171471),o=n(256605),l=n(751512),c=n(271112),d=n(502633),u=n(410968)
const m=a.Ps`
  query CreateMenuProcessQuery($platformFeature: ProcessPlatformFeatureType!)
  @skipAudit
  @engComponent(name: WORKFLOWS) {
    processTaskSchemasSupportingPlatformFeature(platformFeature: $platformFeature) {
      id
      name
      canOnlyBePartOfFlowchart
      isManualTaskCreationDisabled
      taskGroupInstructions
      taskGroupInstructionsHtml
      archiveRecord {
        purpose
      }
    }
  }
`
function useProcessTaskSchemasForCreate(){const e=(0,l.IJ)(m,{fetchPolicy:"cache-and-network",variables:{platformFeature:o.Nk.GLOBAL_CREATE}})
return e.type!==l.NI.SUCCESS?[]:e.data.processTaskSchemasSupportingPlatformFeature.filter((e=>null==e.archiveRecord&&!e.canOnlyBePartOfFlowchart&&!e.isManualTaskCreationDisabled))}function openCreateProcessModal(e,t,n,a){const o=(0,i.Vr)()
i.gx(s.U9.OPENED_MODAL,s.XC.WORKFLOWS,{event_group_id:o,action_origin:s.D2.SIDEPANEL_GLOBAL_CREATE,default_task_creation_view:c.PL[(0,u.H$)(e.id)[0]],modal_type:r.Wk});(0,d.Z)(c.ZP,{processTaskSchemaId:e.id,processTaskSchemaName:e.name,initialFolderId:n,taskGroupInstructions:e.taskGroupInstructions,sourceType:t,analyticsEventGroupId:o,defaultTaskValuesByColumnType:a})}function getProcessTaskSchemaGlobalCreateOptions(e){return 0===e.length?[{disabled:!0,name:"No task schemas"}]:e.map((e=>({name:e.name,handleOnClick:()=>{openCreateProcessModal(e,"global_create",null)}})))}function getProcessTaskSchemaContextualCreateOptions(e,t){return e.map((e=>({name:e.name,value:e.id,handleClick:()=>{openCreateProcessModal(e,"global_create",null)}})))}},357444:(e,t,n)=>{n.d(t,{$o:()=>S,Br:()=>d,ES:()=>isProcessTaskStatus,F0:()=>getEnabledClientOrigins,NJ:()=>statusTypeToDisplayName,T3:()=>c,TC:()=>m,_y:()=>getEnabledProcessExecutionTypesForPlatformFeature,bJ:()=>f,dk:()=>getEnabledProcessExecutionTypes,fw:()=>A,g$:()=>y,gW:()=>u,iR:()=>T,jT:()=>h,tF:()=>I,vZ:()=>g,xh:()=>p,xy:()=>E})
var a=n(348920),i=n(459830),r=n(256605),s=n(973538),o=n(129270),l=n(257846)
const c="(No access)",d=150,u=295,m={[r.Pf.ENTRY]:"Entry",[r.Pf.DIRECT]:"Direct",[r.Pf.FLOWCHART]:"Flowchart",[r.Pf.PROCEDURE_METHOD]:"Procedure method",[r.Pf.PROCEDURE]:"Procedure",[r.Pf.PROCEDURE_STEP]:"Procedure step"},p={[r.Mr.DIRECT_EXECUTION_MODAL]:"Direct execution modal",[r.Mr.ENTRY]:"Notebook entry",[r.Mr.PROCESS]:"Task group",[r.Mr.PROCESSES_REQUEST_MIGRATION]:"Migrated from Request",[r.Mr.PROCESSES_SCHEMA_FIELD_MAPPER]:"Flowchart path",[r.Mr.STAGE_ENTRY]:"Stage entry"},h={[r.Lt.PROCESSES]:"Workflows",[r.Lt.RECIPES]:"Bioprocessing"}
var E,S
!function(e){e.PENDING="Pending"
e.PLANNED="Planned"
e.IN_PROGRESS="In Progress"
e.FAILED="Failed"
e.CANCELLED="Cancelled"
e.INVALID="Invalid"
e.COMPLETED="Completed"
e.COMPLETED_AFTER_REVIEW="Completed (after review)"
e.ACTIVE="Active"
e.SKIPPED="Skipped"
e.NOT_READY="Not Ready"
e.READY="Ready"}(E||(E={}))
function isProcessTaskStatus(e){return Object.keys(r.HS).includes(e)}function getEnabledClientOrigins(){const e=[r.Lt.PROCESSES]
a.ZP.PROCEDURES_ENABLE_M1&&e.push(r.Lt.RECIPES)
return e}function getEnabledProcessExecutionTypes(){const e={[r.Pf.PROCEDURE_METHOD]:a.ZP.PROCEDURES_ENABLE_M1,[r.Pf.PROCEDURE]:a.ZP.PROCEDURES_ENABLE_M1,[r.Pf.PROCEDURE_STEP]:a.ZP.PROCEDURES_ENABLE_M1}
return Object.values(r.Pf).filter((t=>{var n
return null===(n=e[t])||void 0===n||n}))}function getEnabledProcessExecutionTypesForPlatformFeature(e){return getEnabledProcessExecutionTypes().filter((t=>(0,s.v)(e,t)))}function statusTypeToDisplayName(e){return isProcessTaskStatus(e)?l.Z.toSentenceCase(e).replace(/_/g,"-"):null}!function(e){e.CREATE_MODAL="CREATE_MODAL"
e.WORKSPACE_TAB="WORKSPACE_TAB"
e.ENTRY="ENTRY"
e.STATUS_CONFIRMATION_MODAL="STATUS_CONFIRMATION_MODAL"
e.DIRECT_EXECUTION_MODAL="DIRECT_EXECUTION_MODAL"
e.FIELD_MAPPING_MODAL="FIELD_MAPPING_MODAL"
e.TASK_DETAILS_OUTPUTS_TAB="TASK_DETAILS_OUTPUTS_TAB"}(S||(S={}))
const T="Source",g={[i.PROCESS]:"task group",[i.PROCESS_TASK]:"task",[i.PROCESS_OUTPUT]:"output"},f="Unassigned",I="No responsible parties set",A={fontWeight:o.hS,marginLeft:6}
var y
!function(e){e[e.CREATE_MODAL=2]="CREATE_MODAL"
e[e.WORKSPACE_TAB=4]="WORKSPACE_TAB"}(y||(y={}))},67917:(e,t,n)=>{n.d(t,{$_:()=>l,RF:()=>c,Ti:()=>r,VH:()=>s,e:()=>o,eL:()=>u})
var a=n(769784),i=n(91092)
const r=a.Ps`
  fragment ProcessRouterNodeDetails on ProcessRouterNodeDetailsNode {
    id
    type
    ... on ProcessRouterNodeDetailsNode {
      id
      name
      routerFunctions {
        ... on ProcessRouterFunctionNode {
          id
          name
          edgeConfig {
            id
            fromNodeConfig {
              id
            }
            toNodeConfig {
              id
            }
          }
          isDefault
          expression {
            ... on BenchlingExpressionNode {
              expressionJson
            }
            ...InaccessibleInfoGraphQL
          }
        }
      }
    }
  }
  ${(0,i.f)("InaccessibleInfo").fragment}
`,s=a.Ps`
  fragment ProcessTaskStatus on ProcessTaskStatusNode {
    id
    displayName
    statusType
  }
`,o=a.Ps`
  fragment ProcessTaskStatusLifecycle on ProcessTaskStatusLifecycleNode {
    id
    schemaExecutionType
    initialStatus {
      ... on ProcessTaskStatusNode {
        ...ProcessTaskStatus
      }
    }
    transitions {
      id
      isAutomatedTransition
      inStatus {
        ... on ProcessTaskStatusNode {
          ...ProcessTaskStatus
        }
      }
      outStatus {
        ... on ProcessTaskStatusNode {
          ...ProcessTaskStatus
        }
      }
    }
  }
  ${s}
`,l=a.Ps`
  fragment ProcessTask on ProcessTaskNode {
    id
    humanId
    fields
    status {
      ... on ProcessTaskStatusNode {
        ...ProcessTaskStatus
      }
    }
    assignee {
      ... on UserNode {
        id
        handle
        name
        avatarUrl
      }
    }
    executionOrigin {
      ... on ProcessTaskExecutionOriginNode {
        executionType
        executionEntry {
          id
          name
          editUrl
        }
        createdAt
      }
    }
    scheduledOnDate
    ...HasArchiveRecordGraphQL
    ...StudyableTypedValueDataGraphQL
  }
  ${s}
  ${(0,i.f)("HasArchiveRecord").fragment}
  ${(0,i.f)("StudyableTypedValueData").fragment}
`,c=a.Ps`
  fragment ProcessTaskSchema on ProcessTaskSchemaNode {
    id
    name
    prefix
    fields
    allFields
    archiveRecord {
      purpose
    }
  }
`,d=a.Ps`
  fragment TaskFinderLookupConfig on LookupConfigNode {
    id
    isMulti
    multiFlattenLevel
    lookupSteps
  }
`,u=a.Ps`
  fragment ProcessOutputSchema on ProcessOutputSchemaNode {
    id
    name
    prefix
    fields
    allFields
    archiveRecord {
      purpose
    }
    taskFinderLookupConfig {
      ... on LookupConfigNode {
        ...TaskFinderLookupConfig
      }
    }
    processExecutionType
  }
  ${d}
`},557715:(e,t,n)=>{n.d(t,{Z:()=>ProcessRealtimeUpdateSubscriptionWrapper})
var a=n(926025),i=n(348920),r=n(989526),s=n(615439),o=n.n(s),l=n(232606),c=n(840784),d=n(980886),u=n(906621)
function useRealtimeChannel(e,t){const[n,a]=(0,r.useState)(null),s=(0,u.Z)({channelName:e,capabilities:t});(0,r.useEffect)((()=>{o()(s,{channelName:e,capabilities:t})||(async()=>{if(i.ZP.ELN_ENABLE_REALTIME_UPDATES_M1){const i=await(0,c.Z)(e,t)
null!=n&&n.stop()
a(i)}})()}),[e,t]);(0,r.useEffect)((()=>()=>{if(null!=n){a(null)
n.stop()}}),[])
return n}var m=n(968953)
function ProcessRealtimeUpdateSubscriptionWrapper(e){const t=(0,a.D)(e.refetch,500,{maxWait:5e3,isImmediate:!1})
!function useRealtimeChannelSubscription(e,t){const n=useRealtimeChannel(e,[d.Yu.SUBSCRIBE]);(0,r.useEffect)((()=>{if(null!=n)try{n.subscribe(t)}catch(t){(0,l.Gp)(!1,`Error subscribing to realtime channel: ${e}, ${[d.Yu.SUBSCRIBE]})}`,t)}}),[n,e,t])}((0,m.b)(e.apiIdToSubscribe),(n=>{var a
i.ZP.ELN_ENABLE_REALTIME_UPDATES_M1&&i.ZP.WORKFLOWS_ENABLE_LIVE_UPDATING_UI&&(null==(null===(a=n.data)||void 0===a?void 0:a.clientId)?t():(0,m.d)(n.data.clientId)&&!e.refetchOnMessagesFromSameClient||t())}))
return e.children}},609133:(e,t,n)=>{n.d(t,{GS:()=>exportToCSV,Hp:()=>fixFailedRoutingAndMapping,I7:()=>bulkCopyTasks,KM:()=>createProcess,LD:()=>getAutomatedMappingResult,ML:()=>bulkCreateOrUpdateProcessTasks,Mx:()=>isExecuteIntoNewEntryParameters,NB:()=>startDirectExecution,Q3:()=>updateProcess,RO:()=>runTaskFinder,Re:()=>bulkUnarchive,Uv:()=>processDetailsURL,_0:()=>isExecuteIntoExistingEntryParameters,bJ:()=>undoDirectExecution,iI:()=>undoEntryExecution,uc:()=>bulkArchive,uz:()=>processTaskDetailsURL,vx:()=>executeProcessTasks,xy:()=>completeDirectExecution,yf:()=>bulkCreateOrUpdateProcessOutputs})
var a=n(531041),i=n(232606),r=n(675649),s=n(459830),o=n(771398),l=n(883026),c=n(8747)
function processDetailsURL(e){return`/workflows/${e}`}function processTaskDetailsURL(e){return`/workflow-tasks/${e}`}function getApiUrlBase(e){if(e===s.PROCESS)return"/1/api/processes"
if(e===s.PROCESS_TASK)return"/1/api/process-tasks"
if(e===s.PROCESS_OUTPUT)return"/1/api/process-outputs";(0,i.hu)(!1,"Expected item to be one of Process, ProcessTask, or ProcessOutput")}function bulkArchive(e,t,n){return c.s0({url:`${getApiUrlBase(e)}:bulk-archive`,data:{ids:t,purpose:n}})}function bulkUnarchive(e,t){return c.s0({url:`${getApiUrlBase(e)}:bulk-unarchive`,data:{ids:t}})}function exportToCSV(e,t){let n
e===s.PROCESS?n="processIds":e===s.PROCESS_TASK?n="processTaskIds":e===s.PROCESS_OUTPUT?n="processOutputIds":(0,i.hu)(!1,"Expected item to be one of Process, ProcessTask, or ProcessOutput")
return c.s0({url:`${getApiUrlBase(e)}:export-to-csv`,data:{[n]:t}})}function updateProcess(e){return(0,l.jI)(o.Ry({url:`${getApiUrlBase(s.PROCESS)}/${e.id}`,data:a.default.omit(e,"id")}),"Saving task group...")}function bulkCreateOrUpdateProcessTasks(e){return(0,l.jI)(o.s0({url:getApiUrlBase(s.PROCESS_TASK),data:{tasks:e}}),`Saving ${(0,r._6)(e.length,"task")}...`)}function bulkCopyTasks(e){return(0,l.jI)(o.s0({url:`${getApiUrlBase(s.PROCESS_TASK)}:copy`,data:{taskIds:e}}),`Copying ${(0,r._6)(e.length,"task")}...`)}function bulkCreateOrUpdateProcessOutputs(e,t){return(0,l.jI)(o.s0({url:getApiUrlBase(s.PROCESS_OUTPUT),data:{processOutputs:e,processTasks:t}}),`Saving ${(0,r._6)(e.length,"output")}...`)}function createProcess(e){return(0,l.jI)(o.s0({url:getApiUrlBase(s.PROCESS),data:e}),"Saving task group...")}function isExecuteIntoNewEntryParameters(e){return null!=e.entryName}function isExecuteIntoExistingEntryParameters(e){return null!=e.entryId}function executeProcessTasks(e){const t=isExecuteIntoNewEntryParameters(e)?"execute":"execute-into-existing-entry"
return(0,l.jI)(o.s0({url:`${getApiUrlBase(s.PROCESS_TASK)}:${t}`,data:e}),`Preparing ${(0,r._6)(e.taskIds.length,"task")} for execution...`)}function runTaskFinder({processOutputSchemaId:e,availableTaskIds:t,rows:n}){return o.s0({url:`${getApiUrlBase(s.PROCESS_OUTPUT)}:find-tasks`,data:{processOutputSchemaId:e,availableTaskIds:t,rows:n}})}function startDirectExecution(e){return o.s0({url:`${getApiUrlBase(s.PROCESS_TASK)}:start-direct-execution`,data:e})}function undoDirectExecution(e){return o.s0({url:`${getApiUrlBase(s.PROCESS_TASK)}:undo-direct-execution`,data:e})}function completeDirectExecution(e){return(0,l.jI)(o.s0({url:`${getApiUrlBase(s.PROCESS_TASK)}:complete-direct-execution`,data:e}),`Creating ${(0,r._6)(e.outputs.length,"output")}...`)}function undoEntryExecution(e){return o.s0({url:`${getApiUrlBase(s.PROCESS_TASK)}:undo-entry-execution`,data:e})}function getAutomatedMappingResult(e){return(0,l.jI)(o.s0({url:`${getApiUrlBase(s.PROCESS_TASK)}:get-automated-mapping-result`,data:e}),"Getting automated mapping result...")}function fixFailedRoutingAndMapping(e){return o.s0({url:"/1/api/fix-failed-routing-and-mapping",data:e})}},456765:(e,t,n)=>{n.d(t,{Lv:()=>processTaskSchemasURL,NF:()=>createProcessTaskSchema,Re:()=>bulkUnarchive,fL:()=>createProcessTaskSchemaURL,k_:()=>processTaskSchemaURL,uc:()=>bulkArchive,w:()=>updateProcessTaskSchema})
var a=n(771398)
function processTaskSchemasURL(){return"/workflow-task-schemas"}function createProcessTaskSchemaURL(){return"/workflow-task-schemas/create"}function processTaskSchemaURL(e){return`/workflow-task-schemas/${e}`}function bulkArchive(e,t){return a.s0({url:"/1/api/process-task-schemas:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return a.s0({url:"/1/api/process-task-schemas:bulk-unarchive",data:{ids:e}})}function createProcessTaskSchema(e){return a.s0({url:"/1/api/process-task-schemas",data:e})}function updateProcessTaskSchema(e){const{schemaId:t,...n}=e
return a.Ry({url:`/1/api/process-task-schemas/${t}`,data:n})}},204940:(e,t,n)=>{n.d(t,{Z:()=>CreateFromSchemaButton})
var a=n(692013),i=n(989526),r=n(382857),s=n(305466),o=n(868710),l=n(334148),c=n(472347)
function CreateFromSchemaButton(e){const[t,n]=(0,i.useState)(!1),u=e.schemas?e.schemas.filter((e=>!(0,r.ZP)(e)&&!e.canOnlyBePartOfFlowchart&&!e.isManualTaskCreationDisabled)):[],m=null==e.schemas?null:0===u.length?i.createElement("ul",{className:"dropdown-menu pull-right"},i.createElement("li",{className:"disabled"},i.createElement("a",null,"No schemas configured"))):i.createElement(c.Z,{onSelect:t=>{e.onSelect(t)},optionDatas:u.map((e=>({value:e,name:e.name}))),scrollable:!0,className:(0,a.iv)(d.pullRight)}),p=m?"Create...":"Loading..."
return i.createElement("div",{className:"u-display-inline-block dropdown"},i.createElement(s.ZP,{onRequestClose:()=>{n(!1)},open:t,menu:m,shouldCloseOnInsideClick:!0},i.createElement(o.ZP,{title:p,placement:o.TQ.BOTTOM,container:"body"},i.createElement(l.Co,{buttonStyle:l.ZJ.SECONDARY,disabled:!m,icon:"compose",onClick:()=>{n(!0)},size:l.qE.SMALL,dataTestAttrs:{component:"CreateFromSchemaButton",element:"root"}}))))}const d=a.mM.create({pullRight:{right:0}})},522872:(e,t,n)=>{n.d(t,{Z:()=>ExecuteButton,q:()=>compareTaskGroupOrder})
var a=n(692013),i=n(989526),r=n(974913),s=n(719593),o=n(868710),l=n(334148),c=n(883026)
const compareTaskGroupOrder=(e,t)=>{const n=e.process.id.localeCompare(t.process.id)
return 0!==n?n:e.sortValue.localeCompare(t.sortValue)}
function ExecuteButton({disabledMessage:e,getTasksToExecute:t,onTasksOrOutputsChange:n,actionOrigin:u}){return i.createElement(o.pf,{tooltipTitle:e},i.createElement(l.Co,{buttonStyle:l.ZJ.SECONDARY,className:(0,a.iv)(d.button),disabled:null!=e,size:l.qE.SMALL,text:"Execute",onClick:async()=>{const e=(await(0,c.jI)(t(),"Executing tasks")).filter((e=>null==e.archiveRecord))
0!==e.length?1===e.length&&(0,s.Ho)(e[0])?(0,s.Ii)(e[0]):(0,s.ft)(e,n,u):r.ZP.error("There are no tasks available to execute.")},dataTestAttrs:{component:"ProcessManagementToolbar",element:"ExecuteTaskButton"}}))}const d=a.mM.create({button:{borderWidth:"0"}})},756881:(e,t,n)=>{n.d(t,{ZP:()=>ExecuteTasksButton,d:()=>getExecuteTooltipMessage,ky:()=>isProcessTaskExecutionAllowed})
var a=n(989526),i=n(348920),r=n(256605),s=n(357444),o=n(973538),l=n(522872),c=n(176065)
function getExecuteTooltipMessage(e){if(0===e.length)return"No tasks selected"
if(!e.every((e=>(0,c.vQ)(e))))return"All selected items must be tasks"
const t=e,n=new Set(t.map((e=>e.schema.clientOrigin)))
if(n.size>1||!t.every((e=>e.schema.id===t[0].schema.id)))return"All selected tasks must have the same schema"
const[a]=n
if(a===r.Lt.RECIPES){if(t.some((e=>e.schema.executionType===r.Pf.PROCEDURE)))return"You cannot execute Experiment Runs"
return t.every((e=>[r.Pf.PROCEDURE_METHOD,r.Pf.PROCEDURE_STEP].includes(e.schema.executionType)))?1!==t.length?"Select one task to go to its Worksheet":null:"Unsupported task(s)"}return a!==r.Lt.PROCESSES?"Unsupported task(s)":t.every((e=>e.status.statusType===r.HS.PENDING))?null!=t[0].schema.entryTemplate&&t.length>i.ZP.WORKFLOWS_MAX_TASKS_PER_ENTRY?`You cannot execute more than ${i.ZP.WORKFLOWS_MAX_TASKS_PER_ENTRY} tasks into a single entry`:null==t[0].schema.entryTemplate&&null==t[0].schema.outputSchema?"You cannot execute direct execution tasks without an output schema configuration":t.every((e=>(0,o.v)(r.Nk.IS_DIRECTLY_EXECUTABLE,e.schema.executionType)))?null:"All selected tasks must be directly executable":`All selected tasks must be ${(0,s.NJ)(r.HS.PENDING)}`}function isProcessTaskExecutionAllowed(e){return null==getExecuteTooltipMessage(e)}function ExecuteTasksButton({selectedItems:e,actionOrigin:t}){const n=getExecuteTooltipMessage(e)
return a.createElement(l.Z,{getTasksToExecute:()=>Promise.resolve(e),disabledMessage:n,actionOrigin:t})}},176065:(e,t,n)=>{n.d(t,{Hg:()=>sidepanelProcessItemIsProcess,MD:()=>outputHasCreationEntry,RZ:()=>sidepanelProcessItemIsProcessOutput,VZ:()=>getWorkspaceItemIdFromProcessItem,dB:()=>areProcessDashboardModelTypesSupported,uJ:()=>raiseInvalidProcessItemError,vF:()=>o,vQ:()=>sidepanelProcessItemIsProcessTask,vz:()=>taskHasExecutionEntry})
var a=n(232606),i=n(459830),r=n(256605),s=n(379346)
function sidepanelProcessItemIsProcess(e){return s.ZP.isProcess(e.id)}function sidepanelProcessItemIsProcessTask(e){return s.ZP.isProcessTask(e.id)}function sidepanelProcessItemIsProcessOutput(e){return s.ZP.isProcessOutput(e.id)}function taskHasExecutionEntry(e){var t
return(null===(t=e.executionOrigin)||void 0===t?void 0:t.executionType)===r.Rp.ENTRY}function outputHasCreationEntry(e){return e.creationOrigin.originType===r.Mr.ENTRY}function raiseInvalidProcessItemError(){(0,a.hu)(!1,"Expected process item to be Process, ProcessTask, or ProcessOutput")}function getWorkspaceItemIdFromProcessItem(e){return sidepanelProcessItemIsProcessOutput(e)?e.task.id:e.id}const o={[r.Lt.PROCESSES]:[i.PROCESS,i.PROCESS_TASK,i.PROCESS_OUTPUT],[r.Lt.RECIPES]:[i.RECIPE_RUN_TASK,i.RECIPE_UNIT_OPERATION_TASK,i.RECIPE_STEP_TASK]}
function areProcessDashboardModelTypesSupported(e,t){return o[e]&&t.every((t=>o[e].includes(t)))}},671513:(e,t,n)=>{n.d(t,{RG:()=>setTypeFilterPreference,Sw:()=>getTypeFilterPreference})
var a=n(432128)
function getTypeFilterPreference(){const e=a.Z.get(getTypeFilterPreferenceKey())
if(null!=e)return"string"==typeof e?[e]:e}function setTypeFilterPreference(e){a.Z.set({[getTypeFilterPreferenceKey()]:e})}function getTypeFilterPreferenceKey(){return"TYPE_FILTER_PROCESS_MANAGEMENT_SIDEPANEL"}},959194:(e,t,n)=>{n.d(t,{KJ:()=>getDefaultFiltersForClientOrigin,s2:()=>defaultProcessManagementSearchParams})
var a=n(232606),i=n(294120),r=n(256605),s=n(872543),o=n(357444),l=n(62315),c=n(374669),d=n(521222)
function getDefaultFiltersForClientOrigin(e){return[{...(0,l.QW)(l.Vm.PROCESS_CLIENT_ORIGIN),value:e},{...(0,l.QW)(l.Vm.TYPES),value:(0,d.W8)(e)}]}function defaultProcessManagementSearchParams(){const e=function getDefaultClientOrigin(){const e=(0,o.F0)()
return(0,a.Gp)(e.length>0,"Expected at least one process client origin to be enabled")?e.includes(r.Lt.PROCESSES)?r.Lt.PROCESSES:e[0]:r.Lt.PROCESSES}(),t=c.hN(i.$0.PROCESSES)
return{filters:t.some((e=>e.key===l.Vm.PROCESS_CLIENT_ORIGIN&&null!=e.value&&(0,o.F0)().includes(e.value)))?t:getDefaultFiltersForClientOrigin(e),limit:(0,s.z3)(),offset:0,query:"",sorts:c.i_(i.$0.PROCESSES)}}},27208:(e,t,n)=>{n.d(t,{RY:()=>getTasksFilteredByHumanIds,Z$:()=>getOutputsFilteredByProcessesUrl,mu:()=>getOutputsFilteredByTasksUrl,rj:()=>getTasksFilteredByProcessesUrl,vI:()=>getOutputsFilteredByHumanIds})
var a=n(232606),i=n(459830),r=n(294120),s=n(749334),o=n(872543),l=n(62315),c=n(374669)
function getModelFilteredByProcesses(e,t,n){(0,a.Gp)(t.length>0,"Expected at least one processId")
return{filters:[{...(0,l.QW)(l.Vm.TYPES),value:[e]},...null!=n?[{...(0,l.QW)(l.Vm.SCHEMA),value:[n]}]:[],{...(0,l.QW)(l.Vm.PROCESS),value:t}],limit:(0,o.z3)(),offset:0,query:"",sorts:c.i_(r.$0.PROCESSES)}}function getModelFilteredByHumanIds(e,t){(0,a.Gp)(t.length>0,"Expected at least one humanId")
return{filters:[{...(0,l.QW)(l.Vm.TYPES),value:[e]},{...(0,l.QW)(l.Vm.NAMES),value:t}],limit:(0,o.z3)(),offset:0,query:"",sorts:c.i_(r.$0.PROCESSES)}}function getDashboardUrl(e){return(0,s.q7)("/workflows",e,function getFilterErrorsArray(e){return new Array(e.filters.length).fill(null)}(e))}function getTasksFilteredByHumanIds(e){return getDashboardUrl(getModelFilteredByHumanIds(i.PROCESS_TASK,e))}function getTasksFilteredByProcessesUrl(e,t){return getDashboardUrl(getModelFilteredByProcesses(i.PROCESS_TASK,e,t))}function getOutputsFilteredByHumanIds(e){return getDashboardUrl(getModelFilteredByHumanIds(i.PROCESS_OUTPUT,e))}function getOutputsFilteredByProcessesUrl(e,t){return getDashboardUrl(getModelFilteredByProcesses(i.PROCESS_OUTPUT,e,t))}function getOutputsFilteredByTasksUrl(e){const t=function getOutputsFilteredByTasks(e){(0,a.Gp)(e.length>0,"Expected at least one taskId")
return{filters:[{...(0,l.QW)(l.Vm.TYPES),value:[i.PROCESS_OUTPUT]},{...(0,l.QW)(l.Vm.PROCESS_TASK),value:e}],limit:(0,o.z3)(),offset:0,query:"",sorts:c.i_(r.$0.PROCESSES)}}(e)
return getDashboardUrl(t)}},521222:(e,t,n)=>{n.d(t,{W8:()=>getDefaultTypes,cD:()=>getIsTypeRequired,rB:()=>getAvailableTypes})
var a=n(232606),i=n(459830),r=n(256605),s=n(671513),o=n(901113),l=n(176065)
function getIsTypeRequired(e){switch(e){case r.Lt.PROCESSES:return!0
case r.Lt.RECIPES:return!1
default:(0,a.hu)(!1,`Unexpected value for client origin '${(0,o.vE)(e)}'`)
return!0}}function getDefaultTypes(e){var t
switch(e){case r.Lt.PROCESSES:return null!==(t=s.Sw())&&void 0!==t?t:[i.PROCESS]
case r.Lt.RECIPES:return l.vF[r.Lt.RECIPES]
default:(0,a.hu)(!1,`Unexpected value for client origin '${(0,o.vE)(e)}'`)
return[]}}function getAvailableTypes(e){return l.vF[e]}},338235:(e,t,n)=>{n.d(t,{Bg:()=>getNodeInstanceData,Ee:()=>f,Gp:()=>A,_E:()=>I,eA:()=>y,fk:()=>g,nc:()=>getNodeDefinition})
var a=n(692013),i=n(576118),r=n.n(i),s=n(256605),o=n(614131),l=n(724475),c=n(271359)
const d=a.mM.create({errorIconTopLeft:{position:"absolute",top:"4px",left:"6px"},errorIconCenter:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}),u=a.mM.create({actionFunctionToolbarDefault:{marginTop:-15,marginLeft:-5},actionFunctionToolbarRouterNode:{marginTop:-5,marginLeft:-25},actionFunctionToolbarEndNode:{marginTop:-10,marginLeft:-10}}),m=a.mM.create({ovalNode:{borderRadius:"50px",padding:"8px 24px",height:l.hj.DEFAULT},rectangleNode:{width:"100%",borderRadius:4,height:l.hj.DEFAULT},diamondNode:{width:l.XI.DIAMOND,height:l.XI.DIAMOND,minWidth:"auto",transform:"translatey(25%) rotate(-45deg)"},pillNode:{width:l.$L.PILL,height:l.hj.PILL,minWidth:"auto",borderRadius:"32px"}}),p=a.mM.create({lightNodeName:{color:c.pp},darkNodeName:{color:c.Rl}}),h={errorStyle:d.errorIconTopLeft,shapeStyle:m.rectangleNode,actionFunctionStyle:u.actionFunctionToolbarDefault,nameStyle:p.darkNodeName},E={errorStyle:d.errorIconCenter,shapeStyle:m.diamondNode,actionFunctionStyle:u.actionFunctionToolbarRouterNode,nameStyle:p.lightNodeName},S={errorStyle:d.errorIconTopLeft,shapeStyle:m.ovalNode,actionFunctionStyle:u.actionFunctionToolbarDefault,nameStyle:p.darkNodeName},T={errorStyle:d.errorIconTopLeft,shapeStyle:m.pillNode,actionFunctionStyle:u.actionFunctionToolbarEndNode,nameStyle:p.lightNodeName},g={nodeDefinition:{nodeStyles:h,dropKey:"_task"},instanceData:{shape:o.lb.RECTANGLE,height:l.hj.DEFAULT,width:l.$L.DEFAULT}},f={nodeDefinition:{nodeStyles:S,dropKey:"_root"},instanceData:{shape:o.lb.OVAL,height:l.hj.DEFAULT,width:l.$L.DEFAULT}},I={nodeDefinition:{nodeStyles:S,dropKey:"_output"},instanceData:{shape:o.lb.OVAL,height:l.hj.DEFAULT,width:l.$L.DEFAULT}},A={nodeDefinition:{nodeStyles:E,dropKey:"_router"},instanceData:{shape:o.lb.DIAMOND,height:l.hj.DIAMOND,width:l.$L.DIAMOND,nameHeight:l.av}},y={nodeDefinition:{nodeStyles:T,dropKey:"_end"},instanceData:{shape:o.lb.PILL,height:l.hj.PILL,width:l.$L.PILL,nameHeight:l.av}},_={[s.Og.TASK_NODE_DETAILS]:g,[s.Og.ROUTER_NODE_DETAILS]:A,[s.Og.END_NODE_DETAILS]:y,[s.Og.ROOT_NODE_DETAILS]:f,[s.Og.OUTPUT_NODE_DETAILS]:I}
function getNodeDefinition(e){return _[e].nodeDefinition}function getNodeInstanceData(e,t){const n=_[e].instanceData,a=[s.Og.ROUTER_NODE_DETAILS,s.Og.END_NODE_DETAILS],i=[s.Og.ROOT_NODE_DETAILS,s.Og.OUTPUT_NODE_DETAILS,s.Og.TASK_NODE_DETAILS]
if(a.includes(e))return n
r()(i.includes(e),`Unsupported node type ${e}`)
return t.length>l.p3?{...n,width:l.$L.WIDE}:n}},890273:(e,t,n)=>{n.d(t,{$k:()=>getNodeTypeForProcessStaticFlowchart,Cf:()=>getClientIdForProcessFlowchartEdge,Dt:()=>getTargetHandleIdForEdge,jS:()=>getNodeTypeForProcessInteractiveFlowchart})
var a=n(415033),i=n(724475),r=n(281902)
function getNodeTypeForProcessInteractiveFlowchart(e,t){return(0,r.QH)(e)?i.qc.START_NODE:(0,r.Yd)(e)||(0,r.Vx)(e)?i.qc.END_NODE:i.qc.MIDDLE_NODE}function getNodeTypeForProcessStaticFlowchart(e,t){const n=(0,a.U$)(e,t),r=(0,a.ad)(e,t)
return n||r?n?r?i.qc.MIDDLE_NODE:i.qc.END_NODE:i.qc.START_NODE:i.qc.DISCONNECTED_NODE}function getClientIdForProcessFlowchartEdge(e,t){return`e${e}/${t}`}function getTargetHandleIdForEdge(e){return`${e}-target`}},864430:(e,t,n)=>{n.d(t,{$:()=>convertFlowchartV2GqlToProcessInteractiveFlowchart,H:()=>convertFlowchartV2GqlToProcessStaticFlowchart})
var a=n(697134),i=n(890273),r=n(323199),s=n(136922),o=n(178570),l=n(232606),c=n(256605),d=n(338235),u=n(357444),m=n(724475)
function makeRootNode(e,t){return{clientId:null!=t?t:m.UJ,name:e.name,instanceData:d.Ee.instanceData,type:c.Og.ROOT_NODE_DETAILS}}function makeIntermediateRouterNode(e,t){(0,l.hu)((0,r.XY)(e.nodeDetails),"Expected router node to have router node details")
const n=e.nodeDetails,a=null!=t?t:o.Z(),s=n.routerFunctions.reduce(((e,t)=>{var n
e[null==(n=t.edgeConfig)?(0,i.Cf)(a,m.o8):(0,i.Cf)(n.fromNodeConfig.id,n.toNodeConfig.id)]=t.name
return e}),{})
return{clientId:a,name:n.name,instanceData:d.Gp.instanceData,type:c.Og.ROUTER_NODE_DETAILS,outboundEdgeIdToLabel:s}}function makeTaskOrControlNode(e){if((0,r.ff)(e.nodeDetails))return function makeIntermediateTaskNode(e,t){(0,l.hu)((0,r.ff)(e.nodeDetails),"Expected task node to have task node details")
const n=e.nodeDetails.schema,i=(0,a.CZ)(n)
return{clientId:null!=t?t:o.Z(),...i?{isInaccessible:!0}:null,name:i?u.T3:n.name,instanceData:d.fk.instanceData,type:c.Og.TASK_NODE_DETAILS}}(e,e.id)
if((0,r.XY)(e.nodeDetails))return makeIntermediateRouterNode(e,e.id)
if((0,r.Cy)(e.nodeDetails))return function makeEndNode(e,t){(0,l.hu)((0,r.Cy)(e.nodeDetails),"Expected end node to have end node details")
const n=e.nodeDetails
return{clientId:null!=t?t:o.Z(),name:n.name,instanceData:d.eA.instanceData,type:c.Og.END_NODE_DETAILS}}(e,e.id);(0,l.hu)(!1,"Found unexpected node type.",{nodeGQL:e})}function makeBaseEdge({clientId:e,fromNodeClientId:t,toNodeClientId:n}){return{clientId:e,fromNodeClientId:t,toNodeClientId:n}}function convertFlowchartV2GqlToProcessStaticFlowchart(e){return convertFlowchartV2GqlToProcessFlowchart({flowchartGql:e,makeRootNode,makeTaskOrControlNode,makeOutputNode:(e,t)=>function makeOutputNode(e){return{clientId:null!=e?e:m.o8,name:"Outputs",instanceData:d._E.instanceData,type:c.Og.OUTPUT_NODE_DETAILS}}(t),makeEdge:makeBaseEdge})}function convertFlowchartV2GqlToProcessInteractiveFlowchart(e){return convertFlowchartV2GqlToProcessFlowchart({flowchartGql:e,makeRootNode:s.yB,makeTaskOrControlNode:s.vm,makeOutputNode:s.li,makeEdge:makeBaseEdge})}function convertFlowchartV2GqlToProcessFlowchart({flowchartGql:e,makeRootNode:t,makeTaskOrControlNode:n,makeOutputNode:s,makeEdge:o}){const l={},c=[]
for(const t of e.edgeConfigs){const e=o({clientId:(0,i.Cf)(t.fromNodeConfig.id,t.toNodeConfig.id),fromNodeClientId:t.fromNodeConfig.id,toNodeClientId:t.toNodeConfig.id})
c.push(e)
l[t.id]=[e]}const d=e.nodeConfigs.map((e=>(0,r.a7)(e.nodeDetails)?t((0,a.i2)(e.nodeDetails.taskSchema),e.id):(0,r.pO)(e.nodeDetails)?s((0,a.i2)(e.nodeDetails.outputSchema).taskSchema,e.id):n(e,l)))
return{clientId:e.id,nodes:d,edges:c}}},281902:(e,t,n)=>{n.d(t,{QH:()=>isRootNode,Vx:()=>isEndNode,Yd:()=>isOutputNode,hL:()=>isRouterNode,m7:()=>isTaskNode})
var a=n(256605)
function isTaskNode(e){return e.type===a.Og.TASK_NODE_DETAILS}function isRouterNode(e){return e.type===a.Og.ROUTER_NODE_DETAILS}function isOutputNode(e){return e.type===a.Og.OUTPUT_NODE_DETAILS}function isRootNode(e){return e.type===a.Og.ROOT_NODE_DETAILS}function isEndNode(e){return e.type===a.Og.END_NODE_DETAILS}},415033:(e,t,n)=>{n.d(t,{DY:()=>findNode,U$:()=>doesNodeHaveAnInputHandle,ad:()=>doesNodeHaveAnOutputHandle,ft:()=>convertNodeForReactFlow})
function findNode(e,t){return e.find((e=>e.clientId===t))}function doesNodeHaveAnInputHandle(e,t){return null!=t.find((({toNodeClientId:t})=>t===e.clientId))}function doesNodeHaveAnOutputHandle(e,t){return null!=t.find((({fromNodeClientId:t})=>t===e.clientId))}function convertNodeForReactFlow(e,t){return{id:e.clientId,data:{...e,layout:{...e.layout,position:t}},position:t}}},183990:(e,t,n)=>{n.d(t,{I:()=>getSchemaFromSchemaInfo,l:()=>isLegacyMappingErrorRecord})
var a=n(459830)
function getSchemaFromSchemaInfo(e){return e.itemType===a.PROCESS_TASK?e.taskSchema:e.taskSchema.outputSchema}function isLegacyMappingErrorRecord(e){return"ProcessFlowchartSchemaMappingRecordNode"===e.asyncData.__typename}},702024:(e,t,n)=>{n.d(t,{x:()=>updateProcessDetailsQueryCache,z:()=>h})
var a=n(769784),i=n(64558),r=n(232606),s=n(256605),o=n(18526),l=n(681896),c=n(91092),d=n(697134),u=n(67917),m=n(241362),p=n(770998)
const h=a.Ps`
  query ProcessDetailsQuery($processId: StrictString!) @skipAudit @engComponent(name: WORKFLOWS) {
    process(id: $processId) {
      ... on ProcessNode {
        id
        name
        archiveRecord {
          purpose
        }
        permissions {
          ...ListingPermissionsGraphQL
        }
        pendingTasksCount
        processTaskSchema {
          id
          name
          prefix
          allFields
          fields
          executionType
          entryTemplate {
            id
            name
          }
          canSetAssigneeOnTaskCreation
          taskGroupInstructions
          taskGroupInstructionsHtml
          archiveRecord {
            ...ArchiveRecordGraphQL
          }
          outputSchema {
            id
            name
            prefix
            allFields
            fields
            processExecutionType
            taskFinderLookupConfig {
              id
            }
            archiveRecord {
              ...ArchiveRecordGraphQL
            }
          }
          statusLifecycle {
            ... on ProcessTaskStatusLifecycleNode {
              ...ProcessTaskStatusLifecycle
            }
          }
          isUserConfigurationDisabled
          isManualTaskCreationDisabled
        }
        watchers {
          id
          name
          handle
          avatarUrl
        }
        outputs {
          ... on ProcessOutputNode {
            ...ProcessOutputGraphQL
          }
        }
        tasks {
          ... on ProcessTaskNode {
            ...ProcessTaskGraphQL
            ...StudyableTypedValueDataGraphQL
          }
        }
        folder {
          id
        }
        rootProcess {
          ... on ProcessNode {
            id
            editUrl
            name
          }
          ...InaccessibleInfoGraphQL
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,c.f)("ListingPermissions").fragment}
  ${(0,c.f)("ProcessOutput").fragment}
  ${(0,c.f)("ProcessTask").fragment}
  ${(0,c.f)("StudyableTypedValueData").fragment}
  ${(0,c.f)("ArchiveRecord").fragment}
  ${u.e}
  ${(0,c.f)("InaccessibleInfo").fragment}
`
function mergeAndSortIdObjectArrays(e,t){const n=function mergeIdObjectArrays(e,t){return Object.values({...(0,i.m8)(e.map((e=>[e.id,e]))),...(0,i.m8)(t.map((e=>[e.id,e])))})}(e,t),getPos=n=>{const a=e.findIndex((e=>e.id===n.id)),i=-1===a?t.findIndex((e=>e.id===n.id)):-1;(0,r.hu)(a>=0||i>=0,"Expected element to be in one of the arrays")
return a>=0?a:e.length+i}
return n.sort(((e,t)=>getPos(e)-getPos(t)))}function updateProcessDetailsQueryCache(e,{tasks:t,mergeTasks:n,outputs:a,mergeOutputs:i,watchers:c}){const u=(0,l.readQuerySafe)({query:h},{variables:{processId:e}})
if(null==u)return
const E=u.process
if((0,d.CZ)(E)){(0,r.Gp)(!1,"Cannot update inaccessible response")
return}let S=null
null!=t&&(S=(t=n?mergeAndSortIdObjectArrays(E.tasks,t):t).filter((({status:e})=>e.statusType===s.HS.PENDING)).length)
null!=a&&(a=i?mergeAndSortIdObjectArrays(E.outputs,a):a);(0,o.W)().writeQuery({query:h,data:{process:{...E,...null!=S?{pendingTasksCount:S}:{},...null!=t?{tasks:t}:{},...null!=a?{outputs:a}:{},...null!=c?{watchers:c}:{}}},variables:{processId:e}})
null!=t&&(0,p.Cf)(t)
null!=a&&(0,m.mv)(a)}},910426:(e,t,n)=>{n.d(t,{A4:()=>l,H5:()=>o,Hp:()=>s})
var a=n(769784),i=n(91092),r=n(67917)
const s=a.Ps`
  query ProcessTaskFileStateQuery($taskId: StrictString!) @skipAudit @engComponent(name: WORKFLOWS) {
    processTask(id: $taskId) {
      ... on ProcessTaskNode {
        id
        name
        url
        schema {
          id
          executionType
          outputSchema {
            id
          }
        }
        rootTask {
          id
          executionFlowchart {
            id
          }
        }
        executionFlowchart {
          id
        }
      }
      ...HasArchiveRecordGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("HasArchiveRecord").fragment}
  ${(0,i.f)("InaccessibleInfo").fragment}
`,o=a.Ps`
  query ProcessTaskOutputsQuery($taskId: StrictString!) @skipAudit @engComponent(name: WORKFLOWS) {
    processTask(id: $taskId) {
      ... on ProcessTaskNode {
        id
        name
        process {
          id
        }
        status {
          ... on ProcessTaskStatusNode {
            id
          }
        }
        schema {
          id
          name
          prefix
          allFields
          fields
          executionType
          entryTemplate {
            id
            name
          }
          canSetAssigneeOnTaskCreation
          taskGroupInstructions
          archiveRecord {
            purpose
          }
          outputSchema {
            id
            name
            prefix
            allFields
            fields
            processExecutionType
            taskFinderLookupConfig {
              id
            }
            archiveRecord {
              purpose
            }
          }
          statusLifecycle {
            ... on ProcessTaskStatusLifecycleNode {
              ...ProcessTaskStatusLifecycle
            }
          }
        }
        outputs {
          ... on ProcessOutputNode {
            ...ProcessOutputGraphQL
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("ProcessOutput").fragment}
  ${r.e}
  ${(0,i.f)("InaccessibleInfo").fragment}
`,l=a.Ps`
  query ProcessTaskDetailsQuery($processTaskId: StrictString!) @skipAudit @engComponent(name: WORKFLOWS) {
    processTask(id: $processTaskId) {
      ... on ProcessTaskNode {
        id
        name
        status {
          ... on ProcessTaskStatusNode {
            id
            statusType
            displayName
          }
        }
        lastStatusChange {
          id
          createdAt
          creator {
            id
            name
            handle
            avatarUrl
          }
        }
        assignee {
          ... on UserNode {
            id
            name
            handle
            avatarUrl
          }
        }
        scheduledOnDate
        process {
          id
          name
          editUrl
          responsibleTeam {
            id
            name
            handle
            avatarUrl
          }
        }
        schema {
          id
          name
          fields
          allFields
          executionType
          clientOrigin
          entryTemplate {
            id
            name
          }
          statusLifecycle {
            ... on ProcessTaskStatusLifecycleNode {
              ...ProcessTaskStatusLifecycle
            }
          }
          defaultEntryExecutionFolderOrInaccessible {
            ... on FolderNode {
              id
            }
            ...InaccessibleInfoGraphQL
          }
          outputSchema {
            id
          }
        }
        executionOrigin {
          createdAt
          executionType
          executionEntry {
            id
          }
        }
        modifiedAt
        createdAt
        creator {
          id
          name
          handle
          avatarUrl
        }
        executor {
          id
          name
          handle
          avatarUrl
        }
        creationOrigin {
          originType
        }
        lineageEdgesTo {
          fromVertex {
            ... on ProcessTaskNode {
              id
              name
            }
            ... on ProcessOutputNode {
              id
              name
            }
          }
        }
        rootTask {
          id
          name
        }
        fields
        responsibleParties {
          ... on PartyInterface {
            id
            name
            handle
            avatar_url: avatarUrl
          }
        }
        permissions {
          readable
          writable
          admin
          appendable
        }
        sortValue
      }
      ...HasArchiveRecordGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("HasArchiveRecord").fragment}
  ${r.e}
  ${(0,i.f)("InaccessibleInfo").fragment}
`},611764:(e,t,n)=>{n.d(t,{Z:()=>readProcessOutputSchemaFromCache})
var a=n(681896)
const i={fragment:n(67917).eL,fragmentName:"ProcessOutputSchema"}
function readProcessOutputSchemaFromCache(e){return(0,a.readFragmentFromCache)(i,e)}},925451:(e,t,n)=>{n.d(t,{Z:()=>readProcessTaskSchemaFromCache})
var a=n(681896)
const i={fragment:n(67917).RF,fragmentName:"ProcessTaskSchema"}
function readProcessTaskSchemaFromCache(e){return(0,a.readFragmentFromCache)(i,e)}},620058:(e,t,n)=>{n.d(t,{Z:()=>ConfigureExecutionTemplateButton,g:()=>isEntryTemplatePreCreate})
var a,i=n(692013),r=n(989526),s=n(232606),o=n(533308),l=n(417241),c=n(103593),d=n(59860),u=n(334148),m=n(954240),p=n(476604),h=n(801455),E=n(759345),S=n(865486),T=n(472347),g=n(205986),f=n(198210),I=n(901113)
!function(e){e.CREATE_BLANK_TEMPLATE="CREATE_BLANK_TEMPLATE"
e.CLONE_EXISTING_TEMPLATE="CLONE_EXISTING_TEMPLATE"}(a||(a={}))
function ConfigureExecutionTemplateModal(e){var t,n
const[i,o]=(0,r.useState)(null),[m,h]=(0,r.useState)(null!=e.sourceTemplateId?a.CLONE_EXISTING_TEMPLATE:a.CREATE_BLANK_TEMPLATE),[E,S]=(0,r.useState)(null),[T,A]=(0,r.useState)(null!==(t=e.templateName)&&void 0!==t?t:""),[y,_]=(0,r.useState)(null!==(n=e.sourceTemplateId)&&void 0!==n?n:null);(0,r.useEffect)((()=>{l.Z.fetchCollections("write").done((t=>{o(t)
const n=t.find((t=>t.id===e.initialTemplateCollectionId))
S(null!=n?n:null)}))}),[e.initialTemplateCollectionId])
return r.createElement(g.ZP,{buttons:[{submit:!0,text:"Create",disabled:null==E||0===T.trim().length||m===a.CLONE_EXISTING_TEMPLATE&&null==y,style:u.ZJ.SECONDARY}],onRequestClose:e.onRequestClose,onRequestSubmit:()=>{e.onRequestSubmit({templateCollection:E,newTemplateName:T.trim(),sourceTemplateId:m===a.CLONE_EXISTING_TEMPLATE?y:null})},title:e.modalTitle},r.createElement(d.Z,null,r.createElement(c.Z,{sm:9},r.createElement(f.Z,{selection:m,size:u.qE.SMALL,isFullWidth:!1,onChangeSelection:e=>{h(e)},options:[{id:a.CREATE_BLANK_TEMPLATE,buttonProps:{text:"Create blank template"}},{id:a.CLONE_EXISTING_TEMPLATE,buttonProps:{text:"Clone existing template"}}]}))),(()=>{if(null==i)return r.createElement(p.b,null)
switch(m){case a.CREATE_BLANK_TEMPLATE:return r.createElement(ConfigureCreateBlankTemplateModal,{templateCollections:i,templateName:T,setTemplateName:A,selectedTemplateCollection:E,setSelectedTemplateCollection:S})
case a.CLONE_EXISTING_TEMPLATE:return r.createElement(ConfigureCloneExistingTemplateModal,{templateCollections:i,templateName:T,setTemplateName:A,selectedTemplateCollection:E,setSelectedTemplateCollection:S,sourceTemplateId:y,setSourceTemplateId:_})
default:(0,s.Gp)(!1,`Unexpected execution type: ${(0,I.vE)(m)}`)
return null}})())}function ConfigureCreateBlankTemplateModal(e){var t,n
return r.createElement(d.Z,null,r.createElement(c.Z,{sm:6},r.createElement(h.Z,{label:"Template name",isRequired:!0}),r.createElement(E.Z,{value:e.templateName,onChange:t=>{e.setTemplateName(t.target.value)},dataTestAttrs:{component:"ConfigureCreateBlankTemplateModal",element:"nameInputField"}})),r.createElement(c.Z,{sm:6},r.createElement(h.Z,{label:"Template collection",isRequired:!0}),r.createElement(m.ZP,{displayName:null!==(n=null===(t=e.selectedTemplateCollection)||void 0===t?void 0:t.name)&&void 0!==n?n:"Select a template collection",disabled:!1,menu:r.createElement(T.Z,{height:S.ZP.HEIGHTS.MEDIUM,width:S.ZP.WIDTHS.XLARGE,optionDatas:0===e.templateCollections.length?[{name:"No template collections found",value:null}]:[...e.templateCollections.map((e=>({name:e.name,value:e})))],onSelect:e.setSelectedTemplateCollection,scrollable:!0}),dataTestAttrs:{component:"ConfigureCreateBlankTemplateModal",element:"templateCollectionDropdown"}})))}function ConfigureCloneExistingTemplateModal(e){var t,n,a
return r.createElement(r.Fragment,null,r.createElement(d.Z,null,r.createElement(c.Z,{sm:6,className:(0,i.iv)(A.sourceTemplateSelector)},r.createElement(h.Z,{label:"Select a template to clone",isRequired:!0}),r.createElement(o.Z,{isDisabled:!1,selectedTemplateId:null!==(t=e.sourceTemplateId)&&void 0!==t?t:"",onChangeSelectedTemplate:t=>{e.setSourceTemplateId(t.id)}}))),r.createElement(d.Z,null,r.createElement(c.Z,{sm:6},r.createElement(h.Z,{label:"Cloned template name",isRequired:!0}),r.createElement(E.Z,{value:e.templateName,onChange:t=>{e.setTemplateName(t.target.value)},dataTestAttrs:{component:"ConfigureCloneExistingTemplateModal",element:"nameInputField"}})),r.createElement(c.Z,{sm:6},r.createElement(h.Z,{label:"Destination collection",isRequired:!0}),r.createElement(m.ZP,{displayName:null!==(a=null===(n=e.selectedTemplateCollection)||void 0===n?void 0:n.name)&&void 0!==a?a:"Select a template collection",disabled:!1,menu:r.createElement(T.Z,{height:S.ZP.HEIGHTS.MEDIUM,width:S.ZP.WIDTHS.XLARGE,optionDatas:0===e.templateCollections.length?[{name:"No template collections found",value:null}]:[...e.templateCollections.map((e=>({name:e.name,value:e})))],onSelect:e.setSelectedTemplateCollection,scrollable:!0}),dataTestAttrs:{component:"ConfigureCloneExistingTemplateModal",element:"templateCollectionDropdown"}}))))}const A=i.mM.create({sourceTemplateSelector:{marginBottom:"15px"}})
var y=n(263137),_=n(271359),C=n(36424),R=n(502633),N=n(808844)
function isEntryTemplatePreCreate(e){return void 0!==e.templateCollectionId}function ConfigureExecutionTemplateButton(e){const handleEditExecutionTemplate=async()=>{var t,n,a,i,r,o,l
if(null!=e.entryTemplate&&!isEntryTemplatePreCreate(e.entryTemplate)){(0,s.Gp)(!1,"Can only edit the entry template when a task schema is being created")
return}const c=await(0,R.Z)(ConfigureExecutionTemplateModal,{initialTemplateCollectionId:null!==(a=null!==(n=null===(t=e.entryTemplate)||void 0===t?void 0:t.templateCollectionId)&&void 0!==n?n:e.defaultTemplateCollectionId)&&void 0!==a?a:null,templateName:null!==(r=null===(i=e.entryTemplate)||void 0===i?void 0:i.name)&&void 0!==r?r:null,sourceTemplateId:null!==(l=null===(o=e.entryTemplate)||void 0===o?void 0:o.sourceTemplateId)&&void 0!==l?l:null,modalTitle:e.modalTitle})
null!=c&&e.onChange(c.templateCollection,c.newTemplateName,c.sourceTemplateId)}
if(null!=e.entryTemplate){const t=r.createElement("div",{className:(0,i.iv)(O.innerTemplateDisplay)},r.createElement(C.Z,{icon:"template"}),r.createElement("div",{className:(0,i.iv)(O.templateName)},(0,N.fk)(e.entryTemplate.name,56)),!e.isDisabled&&e.isHovering&&r.createElement(u.Co,{buttonStyle:u.ZJ.LINK,className:(0,i.iv)(O.editButton),onClick:async e=>{e.stopPropagation()
await handleEditExecutionTemplate()},icon:"edit"}))
return function isCreatedEntryTemplate(e){return void 0!==e.editUrl}(e.entryTemplate)?r.createElement("a",{className:(0,i.iv)(O.templateDisplay),href:e.entryTemplate.editUrl,...(0,y.Z)({component:"ConfigureExecutionTemplateButton",element:"templateDisplay"})},t):r.createElement("span",{className:(0,i.iv)(O.templateDisplay)},t)}return r.createElement(u.Co,{buttonStyle:u.ZJ.TERTIARY_GRAY,disabled:e.isDisabled,onClick:async()=>{await handleEditExecutionTemplate()},size:u.qE.SMALL,fullWidth:!0,text:e.buttonLabel,icon:"template",dataTestAttrs:{component:"ConfigureExecutionTemplateButton",element:"button"}})}const O=i.mM.create({templateDisplay:{width:"100%",lineHeight:"16px"},templateName:{marginLeft:"4px"},innerTemplateDisplay:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",width:"100%"},editButton:{marginLeft:"auto",color:_.TG,boxShadow:"none",paddingLeft:"8px",paddingRight:"8px",":hover":{color:_.t0}}})},455884:(e,t,n)=>{n.r(t)
n.d(t,{DATA_TEST_ATTRS:()=>Qt,EXECUTION_TYPES_WITH_TASK_FINDER:()=>$t,PROCESS_TASK_SCHEMA_EDITOR_QUERY:()=>Wt,ProcessSchemaFieldTable:()=>ProcessSchemaFieldTable,ProcessTaskSchemaTabs:()=>Kt,SUPPORTED_SCHEMAS_QUERY:()=>Yt,default:()=>ProcessTaskSchemaEditor,getMinimalEntitiesFromResponsibleParties:()=>getMinimalEntitiesFromResponsibleParties,styles:()=>jt})
var a=n(769784),i=n(692013),r=n(764403),s=n.n(r),o=n(512902),l=n(989526),c=n(615439),d=n.n(c),u=n(178570),m=n(232606),p=n(95537),h=n(714529),E=n(348920),S=n(675649),T=n(171471),g=n(459830),f=n(537076),I=n(506276),A=n(256605),y=n(681896),_=n(751512),C=n(91092),R=n(965131),N=n(697134),O=n(477956),b=n(922805),v=n(974913),P=n(456765),L=n(973538),D=n(357444),M=n(88292),w=n(693719),F=n(863940),k=n(844155),U=n(868710),x=n(334148),B=n(502633),Z=n(883026)
const q={component:"ConfigureTaskFinder"},G={taskFinderSet:{...q,element:"set"},taskFinderEdit:{...q,element:"edit"},taskFinderRemove:{...q,element:"remove"},taskFinderLookupConfigDescription:{...q,element:"lookupConfigDescription"}}
async function runLookupConfigModalForProcessTaskFinder(e){await(0,Z.jI)((0,y.doQuerySafe)({query:Yt}))
if(!(0,k.pQ)(e))throw new Error("Lookup is not supported in UI but no JSON editor is available");(0,B.Z)(w.ZP,e)}function ConfigureTaskFinderButton(e){const t={processTaskSchema:e.taskSchema}
if(e.taskFinderLookupConfig)return l.createElement(M.Z,{baseSchema:e.outputSchema,lookupConfig:e.taskFinderLookupConfig,context:t,onEdit:()=>{runLookupConfigModalForProcessTaskFinder({baseSchema:e.outputSchema,firstLookupStepTypes:[F.fN.SCHEMA_FIELD],intermediateLookupStepTypes:F.bS,finalLookupStepTypes:F.Tn,initialLookupConfig:e.outputSchema.taskFinderLookupConfig,onRequestSubmit:({lookupConfig:t})=>{e.onChange(t)},submitButtonText:"Done",context:t})},onRemove:()=>{e.onChange(null)},lookupType:"output  task lookup",isDisabled:e.isArchived,editTestAttrs:G.taskFinderEdit,removeTestAttrs:G.taskFinderRemove,lookupConfigDescriptionTestAttrs:G.taskFinderLookupConfigDescription})
{let t=null
0===e.outputSchema.fields.length?t="Output schema must have at least one field":0===e.taskSchema.fields.length&&(t="Task schema must have at least one field")
const n=l.createElement(x.Co,{size:x.qE.SMALL,disabled:Boolean(e.isArchived||null!=t),buttonStyle:x.ZJ.TERTIARY_GRAY,onClick:()=>{runLookupConfigModalForProcessTaskFinder({baseSchema:e.outputSchema,firstLookupStepTypes:[F.fN.SCHEMA_FIELD],intermediateLookupStepTypes:F.bS,finalLookupStepTypes:F.Tn,onRequestSubmit:({lookupConfig:t})=>{e.onChange(t)},submitButtonText:"Done",context:{processTaskSchema:e.taskSchema}})},dataTestAttrs:G.taskFinderSet,text:"Configure"})
return null!=t?l.createElement(U.ZP,{title:t},n):n}}var V=n(102176),H=n(271359),W=n(10708),Y=n(476604),$=n(393686)
function InnerConfigureTaskFinderSection(e){var t
return e.isBeingCreated?l.createElement("span",{className:(0,i.iv)(K.descriptionText)},"Configure the lookup after the task schema is created."):l.createElement(l.Fragment,null,l.createElement(ConfigureTaskFinderButton,{...e,taskSchema:e.taskSchema,outputSchema:e.outputSchema}),l.createElement(W.Z,{error:null!==(t=e.error)&&void 0!==t?t:null}))}function ConfigureTaskFinderSection(e){return l.createElement("div",{className:(0,i.iv)(K.taskFinderWrapper)},l.createElement(V.Z,{className:s()("u-no-spacing-bottom",(0,i.iv)(K.descriptionContents))},l.createElement($.DU,{label:"Output  task lookup",name:"Output  task lookup",helpIcon:l.createElement($.q5,{renderContent:()=>l.createElement("div",{className:(0,i.iv)(K.helpTooltip)},"Configure a lookup to automatically associate each output with a corresponding task field.")})}),e.isLoading?l.createElement(Y.Z,null):l.createElement(InnerConfigureTaskFinderSection,{...e})))}const K=i.mM.create({taskFinderWrapper:{display:"flex",flexDirection:"row",marginTop:"32px",marginBottom:"32px"},descriptionContents:{flex:.5},descriptionText:{color:H.TG,fontSize:"13px",lineHeight:"16px"},helpTooltip:D.fw})
var z=n(531041)
const Q=i.mM.create({checkboxWrapper:{width:"100%"},checkboxField:{lineHeight:"28px"},messageText:{paddingTop:4,color:H.TG,fontSize:"13px",lineHeight:"16px"},input:{flex:1},helpTooltip:D.fw})
var j=n(229329),J=n(801455),X=n(676328)
function CanOnlyBePartOfFlowchartField(e){const t=(0,l.useRef)(z.default.uniqueId("canOnlyBePartOfFlowchartWrapper")),n=(0,l.useRef)(z.default.uniqueId("canOnlyBePartOfFlowchartCheckbox"))
return l.createElement(X.Z,{id:t.current,label:"Flowchart only",labelStyle:J.Z.STYLES.LABEL},e.executionType!==A.Pf.FLOWCHART?l.createElement("div",{className:s()((0,i.iv)(Q.checkboxWrapper),"editableField")},l.createElement(j.Z,{id:n.current,className:(0,i.iv)(Q.checkboxField),label:"Can only be used as part of a flowchart",checked:e.value,disabled:e.disabled,onChange:t=>{e.onChange(t.target.checked)}})):l.createElement("span",{className:(0,i.iv)(Q.messageText)},"This setting is only available if execution type is Entry or Direct."))}function IsPropagateWatchersEnabledField(e){var t
const n=(0,l.useRef)(z.default.uniqueId("isPropagateWatchersEnabledWrapper")),a=(0,l.useRef)(z.default.uniqueId("isPropagateWatchersEnabledCheckbox"))
return l.createElement("div",null,l.createElement(X.Z,{id:n.current,label:"Watchers",labelStyle:J.Z.STYLES.LABEL},e.executionType===A.Pf.FLOWCHART?l.createElement("div",{className:s()((0,i.iv)(Q.checkboxWrapper),"editableField")},l.createElement(j.Z,{id:a.current,className:(0,i.iv)(Q.checkboxField),label:l.createElement("div",null,l.createElement("div",null,"Propagate watchers"),l.createElement("div",{className:(0,i.iv)(Q.messageText)},"Watchers will be propagated to this flowcharts task groups the first time they are added.")),checked:null!==(t=e.value)&&void 0!==t&&t,disabled:e.disabled,onChange:t=>{e.onChange(t.target.checked)}})):l.createElement("span",{className:(0,i.iv)(Q.messageText)},"Watchers can only be propagated when the execution type is Flowchart.")))}var ee=n(556543)
async function runLookupConfigModalForResponsibleParty(e){await(0,Z.jI)((0,y.doQuerySafe)({query:Yt}));(0,m.hu)((0,k.pQ)(e),"Lookup config is not supported in the lookup modal",{modalProps:e});(0,B.Z)(w.ZP,e)}function ResponsiblePartyLookupFieldContent(e){var t
if(e.isBeingCreated)return l.createElement("span",{className:(0,i.iv)(Q.messageText)},"Configure the lookup after the task schema is created.")
let n=""
e.taskSchema.fields.some((e=>(0,ee.Iv)(e.fieldType)))||(n="Not available if there are no link fields on the task schema")
const a=Boolean(e.isDisabled)||Boolean(n)
return l.createElement(l.Fragment,null,null!=e.value?l.createElement(M.Z,{baseSchema:e.taskSchema,lookupConfig:e.value,onEdit:()=>{runLookupConfigModalForResponsibleParty({baseSchema:e.taskSchema,initialLookupConfig:e.value,firstLookupStepTypes:[F.fN.SCHEMA_FIELD],intermediateLookupStepTypes:F.bS,finalLookupStepTypes:[F.fN.AUTHORIZED_USERS,F.fN.SAMPLE_OWNERS],onRequestSubmit:({lookupConfig:t})=>{e.onChange(t)},submitButtonText:"Done"})},onRemove:()=>{e.onChange(null)},lookupType:"task to responsible party",isDisabled:Boolean(e.isDisabled)||Boolean(n),lookupConfigDescriptionTestAttrs:{component:"ResponsiblePartyLookup",element:"lookupConfigDescription"}}):l.createElement(U.ZP,{title:n},l.createElement(x.Co,{className:s()((0,i.iv)(te.addLookupUserButton),{[(0,i.iv)(te.addLookupUserButtonDisabled)]:a}),size:x.qE.SMALL,buttonStyle:x.ZJ.SECONDARY_WHITE,icon:"compose",text:"Add lookup user",onClick:()=>{runLookupConfigModalForResponsibleParty({baseSchema:e.taskSchema,firstLookupStepTypes:[F.fN.SCHEMA_FIELD],intermediateLookupStepTypes:F.bS,finalLookupStepTypes:[F.fN.AUTHORIZED_USERS,F.fN.SAMPLE_OWNERS],onRequestClose:()=>{},onRequestSubmit:({lookupConfig:t})=>{e.onChange(t)},submitButtonText:"Done"})},dataTestAttrs:{component:"ResponsiblePartyLookup",element:"set"},disabled:a})),l.createElement(W.Z,{error:null!==(t=e.error)&&void 0!==t?t:null}))}function ResponsiblePartyLookupConfigField(e){const t=(0,l.useRef)(z.default.uniqueId())
return l.createElement(X.Z,{id:t.current,label:e.label,labelStyle:J.Z.STYLES.LABEL,isRequired:!1,help:"Configure a lookup to automatically create responsible parties for a task based on a task field (in addition to the specified default responsible parties)."},l.createElement(V.Z,{className:s()("u-no-spacing-bottom")},e.isLoading?l.createElement(Y.Z,null):l.createElement(ResponsiblePartyLookupFieldContent,{...e})))}const te=i.mM.create({addLookupUserButton:{color:H.t0,fontWeight:600,background:"transparent",border:"none",boxShadow:"none",marginRight:"6px",marginLeft:"-9px"},addLookupUserButtonDisabled:{color:H.pF}})
var ne=n(954240),ae=n(865486),ie=n(297020),re=n(924982)
const se="Configure the statuses a task will use in its lifecycle."
function StatusLifecycleField(e){const t=(0,l.useRef)(z.default.uniqueId("statusLifecycle"))
return l.createElement(l.Fragment,null,e.isBeingCreated?l.createElement(X.Z,{id:t.current,label:"Status lifecycle",labelStyle:J.Z.STYLES.LABEL,isRequired:!0,help:se},l.createElement(ne.ZP,{displayName:e.value.name,className:(0,i.iv)(Q.input),menu:l.createElement(ae.ZP,{value:e.value.id,width:ie.zL.FULL},e.options.map((t=>l.createElement(re.Z,{key:t.id,value:t.id,onSelect:()=>{e.onChange(t)}},t.name))))})):l.createElement($.ZP,{label:"Status lifecycle",name:"Status lifecycle",value:e.value.name,isBeingCreated:!1,isRequired:!1,isWritable:!1,onChange:()=>{},dataTestAttrs:{component:"StatusLifecycleField",element:"root"},helpIcon:l.createElement($.q5,{renderContent:()=>l.createElement("div",{className:(0,i.iv)(Q.helpTooltip)},se)})}),null!=e.error&&l.createElement(W.Z,{error:e.error}))}var oe=n(64558),le=n(468943),ce=n(703103),de=n(650546),ue=n(210347),me=n(965858),pe=n(30564)
function areClientFlowchartConfigsDifferent(e,t){if(e.isFlowchartModifiableOnCreation!==t.isFlowchartModifiableOnCreation||e.isFlowchartModifiableAfterCreation!==t.isFlowchartModifiableAfterCreation)return!0
const getTaskSchemaIdsSet=e=>new Set(e.availableTaskSchemas.map((e=>(0,pe.n)(e)?e.placeholderClientId:e.id)))
return!(0,oe.OL)(getTaskSchemaIdsSet(e),getTaskSchemaIdsSet(t))||(!!function areSchemaMapperConfigListsDifferent(e,t){if(!(0,oe.OL)(new Set(e.map((({clientId:e})=>e))),new Set(t.map((({clientId:e})=>e)))))return!0
const n=(0,oe.Pe)(e,(({clientId:e})=>e))
for(const e of t)if(!d()(e,n[e.clientId]))return!0
return!1}(e.schemaMapperConfigs,t.schemaMapperConfigs)||(0,me.Z)(e.templateFlowchart,t.templateFlowchart))}var he=n(592218),Ee=n(281902),Se=n(634630),Te=n(824579)
var ge=n(696988),fe=n(44254),Ie=n(263137),Ae=n(383628),ye=n(36424),_e=n(745826),Ce=n(666743),Re=n(583960),Ne=n(630089),Oe=n(472347)
function SelectTaskSchemaDropdown(e){var t,n,a
const r=e.possibleTaskSchemas.map((({id:e,name:t})=>({name:t,value:e})))
return e.disabled?l.createElement("div",{className:(0,i.iv)(be.dropdown),...(0,Ie.Z)({component:"SelectTaskSchemaDropdown",element:"name"})},function getTaskSchemaNameItem(e,t){var n
return e&&t?l.createElement(Ne.Z,{href:S.jp((0,P.k_)(e.id))},e.name):l.createElement("div",null,null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"No task schema selected")}(e.taskSchema,e.isLink)):l.createElement(ne.ZP,{displayName:null!==(n=null===(t=e.taskSchema)||void 0===t?void 0:t.name)&&void 0!==n?n:"Select a task schema",className:(0,i.iv)(be.dropdown),dataTestAttrs:e.dataTestAttrs,menu:l.createElement(Oe.Z,{selectedValue:null===(a=e.taskSchema)||void 0===a?void 0:a.id,width:ae.ZP.WIDTHS.FULL,scrollable:!0,onSelect:e.onSelectTaskSchemaId,optionDatas:r})})}const be=i.mM.create({dropdown:{flex:"0.9",whiteSpace:"normal"}})
function AvailableTaskSchemasPane(e){const[t,n]=(0,l.useMemo)((()=>{const t=e.allTaskSchemas.filter((({executionType:e,archiveRecord:t})=>e!==A.Pf.FLOWCHART&&null==t))
return[t,(0,oe.Pe)(t,(e=>e.id))]}),[e.allTaskSchemas]),a=new Set(e.availableTaskSchemas.filter((e=>!(0,pe.n)(e))).map((({id:e})=>e))),r=t.filter((({id:e})=>!a.has(e)))
return l.createElement("div",{className:(0,i.iv)(ve.wrapper),...(0,Ie.Z)({component:"AvailableTaskSchemasPane",element:"root"})},e.isEditing&&l.createElement(x.Co,{className:s()((0,i.iv)(ve.singleButton),(0,i.iv)(ve.addButton)),textClassName:(0,i.iv)(ve.addButtonText),buttonStyle:x.ZJ.LINK,onClick:()=>{e.onChange([...e.availableTaskSchemas,{placeholderClientId:u.Z()}])},icon:"compose",text:"Add task schema",dataTestAttrs:{component:"AvailableTaskSchemasPane",element:"addTaskSchemaButton"}}),0===e.availableTaskSchemas.length?l.createElement("div",null,"No tasks schemas added to flowchart configuration."):l.createElement("div",{className:(0,i.iv)(ve.listWrapper)},l.createElement(Ce.Z,{itemDatas:e.availableTaskSchemas.map(((t,c)=>((t,c)=>{const d=(0,pe.n)(t)?t.placeholderClientId:t.id
return{id:d,itemClass:Re.Z,itemProps:{isDraggingDisabled:!e.isEditing,rowContainerClassName:(0,i.iv)(ve.listItemContainer),dragHandleClassName:(0,i.iv)(ve.dragHandle),row:{id:d,cells:[{key:`${d}-selectTaskSchema`,contents:l.createElement("div",{className:(0,i.iv)(ve.selectItemContainer,ve.dropdownContainer)},l.createElement(SelectTaskSchemaDropdown,{taskSchema:(0,pe.n)(t)?null:t,possibleTaskSchemas:(0,pe.n)(t)?r:[t,...r],onSelectTaskSchemaId:t=>{t!==d&&(a.has(t)?v.ZP.error("Cannot select a task schema thats already included in the flowchart configuration"):e.onChange((0,o.ZP)(e.availableTaskSchemas,(e=>{e[c]=n[t]
return e}))))},isLink:!0,disabled:!e.isEditing,dataTestAttrs:{component:"AvailableTaskSchemasPane",element:"selectTaskSchemaDropdown",key:d}}))},...e.isEditing?[{key:`${d}-delete`,cellClassName:"simpleDivTable-actionGroupContainer",contents:l.createElement("div",{className:(0,i.iv)(ve.buttonContainer)},l.createElement(U.pf,{tooltipTitle:"Remove from flowchart config"},l.createElement(x.Co,{buttonStyle:x.ZJ.LINK,className:s()((0,i.iv)(ve.singleButton),(0,i.iv)(ve.deleteButton)),icon:"delete",onClick:()=>{e.onChange((0,o.ZP)(e.availableTaskSchemas,(e=>{e.splice(c,1)
return e})))},dataTestAttrs:{component:"AvailableTaskSchemasPane",element:"removeTaskSchemaButton",key:d}})))}]:[]]}}}})(t,c))),onMoveItem:t=>{e.onChange(t.map((e=>{var t
return null!==(t=n[e])&&void 0!==t?t:{placeholderClientId:e}})))},onMoveItemEnd:oe.ZT})))}const ve=i.mM.create({wrapper:{margin:"16px 0"},listWrapper:{borderLeft:`1px solid ${H.tN}`,borderRight:`1px solid ${H.tN}`,borderBottom:`1px solid ${H.tN}`},selectItemContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},mappingColumnHeader:{paddingLeft:"50px"},dropdownContainer:{display:"flex",flexDirection:"row"},dragHandle:{marginRight:0,width:"16px"},buttonContainer:{marginLeft:"15px"},singleButton:{padding:"0px",boxShadow:"none"},deleteButton:{paddingLeft:"8px",paddingRight:"8px",color:H.pF,":hover":{color:H.hM}},addButton:{marginBottom:"16px",marginTop:"-7px"},addButtonText:{marginLeft:"4px"},listItemContainer:{marginLeft:"-16px"}})
var Pe=n(205986),Le=n(183990),De=n(497790),Me=n(129270),we=n(124640),Fe=n(134749),ke=n(601790),Ue=n(379346),xe=n(808844)
function FieldMapperSourceDropdown(e){var t,n
return l.createElement(ne.ZP,{dataTestAttrs:e.dataTestAttrs,disabled:e.disabled,displayName:null!==(n=null===(t=e.selectedTaskSchema)||void 0===t?void 0:t.name)&&void 0!==n?n:"Select a source",menu:l.createElement(ae.ZP,{height:ae.ZP.HEIGHTS.MEDIUM,width:ae.ZP.WIDTHS.FULL},e.possibleTaskSchemas.map((({id:t,name:n})=>l.createElement(re.Z,{key:t,value:t,onSelect:t=>{e.onSelect(t)}},n))))})}var Be=n(257846)
function MapperSourceTable(e){(0,m.hu)(e.fromSchemaInfos.length>0,"Expected at least one source schema")
return l.createElement("div",{className:(0,i.iv)(Ze.fromItemSection)},l.createElement("div",{className:(0,i.iv)(Ze.modalText)},(e.disabled?"Mapping ":"Choose to map")+" from source schema's task or output"),l.createElement(ke.iA,{numRows:e.fromSchemaInfos.length},l.createElement(ke.sg,{header:"Source schema",renderCell:t=>l.createElement(ke.bL,null,e.fromSchemaInfos[t].taskSchema.name)}),l.createElement(ke.sg,{header:e.disabled?"Mapping from":"Map from",renderCell:t=>l.createElement(ke.bL,null,l.createElement(ne.ZP,{dataTestAttrs:{component:"MapperSourceTable",element:"mapperSourceDropdown",key:e.fromSchemaInfos[t].taskSchema.id,index:`${t}`},disabled:Boolean(e.disabled||!e.fromSchemaInfos[t].canChangeItemType),className:(0,i.iv)(Ze.sourceDropdown),displayName:Be.Z.toSentenceCase(D.vZ[e.fromSchemaInfos[t].itemType]),menu:l.createElement(ae.ZP,{height:ae.ZP.HEIGHTS.MEDIUM,width:ae.ZP.WIDTHS.FULL},[g.PROCESS_TASK,g.PROCESS_OUTPUT].map((n=>l.createElement(re.Z,{key:n,value:n,onSelect:n=>{e.onChangeFromItemType(n,t)}},Be.Z.toSentenceCase(D.vZ[n])))))}))})))}const Ze=i.mM.create({sourceDropdown:{flex:.33},fromItemSection:{paddingTop:22},modalText:{...Me.cf,paddingBottom:16,paddingLeft:6}})
var qe=n(264867),Ge=n(901444),Ve=n(138250)
var He=n(484649)
async function runLookupConfigModalForProcessSchemaMapper({fromSchema:e,lookupConfig:t,flowchartTaskSchema:n,onSubmit:a,allSchemasById:i,toSchemaField:r}){await(0,Z.jI)((0,y.doQuerySafe)({query:He.Pe}))
const s={baseSchema:e,initialLookupConfig:t,context:{flowchartTaskSchema:n},firstLookupStepTypes:[F.fN.SCHEMA_FIELD,F.fN.PROCESS_TASK,F.fN.FLOWCHART_PROCESS_TASK],intermediateLookupStepTypes:[...F.bS,F.fN.FLOWCHART_PROCESS_TASK],finalLookupStepTypes:F.Tn,onRequestSubmit:({lookupConfig:e})=>{a(e)},getLookupConfigValidationError:e=>function getLookupConfigValidationMessage(e,t,n){var a,i,r,s,o
const l=De.FIELD_TYPE_TO_LEAF_TYPE[t.fieldType]
if(!(0,qe.wk)(e.typeDef,l))return`${t.name} expects type ${(0,Ve.e)(l)} but got ${(0,Ve.e)(e.typeDef)}.`
const c=(0,qe.ho)(l)
if(e.isMultiplex&&(c||!t.isMulti))return`${t.name} expects exactly one value but the mapper can return multiple values.`
if(c)return null
const d=(0,De.getRequiredLinkFolderItemType)(t),u=(0,De.getRequiredLinkSchemaId)(t),m=null!=u&&null!==(a=n[u])&&void 0!==a?a:null,p=(0,Ge.aC)(m,d,l)
if(!(0,qe.wk)(e.typeDef,p))return`${t.name} expects type ${(0,Ve.e)(p)} but got ${(0,Ve.e)(e.typeDef)}.`
if(null!=m&&(null===(i=e.linkSchema)||void 0===i?void 0:i.id)!==m.id)return`${t.name} expects ${(0,S._6)(t.isMulti?2:1,(0,Ve.e)(p))} of schema ${m.name} but got items of schema ${null!==(s=null===(r=e.linkSchema)||void 0===r?void 0:r.name)&&void 0!==s?s:"None"}.`
const h=t.schemaFieldSelectorId
return null!=h&&h!==e.linkSelectorId?`${t.name} expects options of dropdown ${h} but got ${null!==(o=e.linkSelectorId)&&void 0!==o?o:"None"}.`:null}(e,r,i),submitButtonText:"Done"};(0,m.hu)((0,k.pQ)(s),"Lookup config is not supported in the lookup modal",{runLookupConfigModalParams:s});(0,B.Z)(w.ZP,s)}function SchemaFieldLookup(e){const{allSchemasById:t}=(0,He.kA)()
return e.lookupConfig?l.createElement("div",{className:(0,i.iv)(We.lookupCellContainer)},l.createElement(M.Z,{baseSchema:e.fromSchema,isDisabled:e.disabled,lookupConfig:e.lookupConfig,context:{flowchartTaskSchema:e.flowchartTaskSchema},onEdit:()=>{runLookupConfigModalForProcessSchemaMapper({...e,fromSchema:e.fromSchema,allSchemasById:t})},onRemove:e.onRemove,lookupType:"Schema field mapper",editTestAttrs:{component:"SchemaFieldLookup",element:"editButton"},removeTestAttrs:{component:"SchemaFieldLookup",element:"removeButton"},lookupConfigDescriptionTestAttrs:{component:"SchemaFieldLookup",element:"description"}})):e.disabled?l.createElement("span",{...(0,Ie.Z)({component:"SchemaFieldLookup",element:"description",key:"ignoredText"})},"Ignored"):l.createElement(U.pf,{tooltipTitle:null==e.fromSchema?"A source must be configured":null},l.createElement(x.Co,{size:x.qE.SMALL,buttonStyle:x.ZJ.TERTIARY_GRAY,disabled:null==e.fromSchema,onClick:()=>{runLookupConfigModalForProcessSchemaMapper({...e,fromSchema:e.fromSchema,allSchemasById:t})},text:"Configure mapping",dataTestAttrs:{component:"SchemaFieldLookup",element:"configureMappingButton"}}))}const We=i.mM.create({lookupCellContainer:{whiteSpace:"normal"}})
function FieldInfoIcon({schemaField:e,allSchemasById:t}){const n=function getIconForSchemaField(e){switch(e.fieldType){case De.FieldType.ASSAY_REQUEST_LINK:return g.REQUEST
case De.FieldType.ASSAY_RESULT_LINK:return g.RESULT_SCHEMA
case De.FieldType.ASSAY_RUN_LINK:return g.ASSAY_RUN
case De.FieldType.BATCH_LINK:return g.BATCH
case De.FieldType.BLOB_LINK:return"external_file"
case De.FieldType.BOOLEAN:return"boolean"
case De.FieldType.DATE:return"calendar"
case De.FieldType.DATETIME:return"eln-timestamp"
case De.FieldType.ENTRY_LINK:return we.m.Entry
case De.FieldType.BIOENTITY_LINK:return g.BIOENTITY_MIXIN
case De.FieldType.FLOAT:case De.FieldType.INTEGER:return"number"
case De.FieldType.JSON:return"brackets"
case De.FieldType.LONG_TEXT:return"text"
case De.FieldType.PART_LINK:return g.SEQUENCE_PRIMER
case De.FieldType.SAMPLE_LINK:return g.SAMPLE
case De.FieldType.SELECTOR:return"schema_field_selector"
case De.FieldType.STORABLE_LINK:{const t=(0,De.getRequiredLinkStorableSchema)(e)
return null==t||Ue.ZP.isContainerSchema(t.id)?g.CONTAINER:Ue.ZP.isPlateSchema(t.id)?g.PLATE:Ue.ZP.isBoxSchema(t.id)?g.BOX:Ue.ZP.isLocationSchema(t.id)?g.LOCATION:g.CONTAINER}case De.FieldType.TEXT:return"text"
case De.FieldType.TRANSCRIPTION_LINK:return we.m.RNASequence
case De.FieldType.TRANSLATION_LINK:return g.SEQUENCE_PRIMER
default:(0,m.hu)(!1,`Unexpected schema field type ${e.fieldType}`)
return"unknown"}}(e),a=(0,De.getRequiredLinkSchemaId)(e),r=null!=a?t[a]:null,s=(0,De.getRequiredLinkFolderItemType)(e)
let o
const c=Object.values(De.FIELD_TYPES).find((({type:t})=>t===e.fieldType)).label
o=null!=r?`${c} (${r.name})`:null!=s?`${c} (Any ${(0,xe.E2)(s)})`:c
return l.createElement(U.ZP,{title:o},l.createElement(ye.Z,{icon:n,className:(0,i.iv)(Ye.fieldIcon)}))}function SchemaMapperConfigModalBody(e){const t=(0,Le.I)(e.toSchemaInfo).fields.filter((e=>!e.isComputed&&!e.isSnapshot))
return l.createElement("div",null,l.createElement(MapperSourceTable,{disabled:e.disabled,fromSchemaInfos:e.fromSchemaInfos,onChangeFromItemType:e.onChangeFromItemType}),l.createElement("div",{className:(0,i.iv)(Ye.modalText)},e.disabled?"Mapping":"Map to"," fields in"," ",l.createElement("strong",null,e.toSchemaInfo.taskSchema.name)," from fields in"," ",l.createElement("strong",null,e.fromSchemaInfos.map((({taskSchema:e})=>e.name)).join(", "))),l.createElement("div",null,t.length>0?l.createElement(ke.iA,{numRows:t.length},l.createElement(ke.sg,{header:e.disabled?"Mapping to":"Map to",renderCell:n=>l.createElement(ke.bL,null,l.createElement(FieldInfoIcon,{schemaField:t[n],allSchemasById:e.allSchemasById}),t[n].name,t[n].isRequired&&l.createElement(J.S,null))}),e.fromSchemaInfos.length>1&&l.createElement(ke.sg,{header:"Source schema",renderCell:n=>{let a
const{fromSchemaId:i}=e.fieldToFieldMapperData[t[n].apiId]
a=null==i?null:e.fromSchemaInfos.find((({taskSchema:e})=>{var t
return e.id===i||(null===(t=e.outputSchema)||void 0===t?void 0:t.id)===i})).taskSchema
return l.createElement(ke.bL,null,l.createElement(FieldMapperSourceDropdown,{disabled:e.disabled,possibleTaskSchemas:e.fromSchemaInfos.map((({taskSchema:e})=>e)),onSelect:a=>{e.onChangeFieldMapperSource(t[n].apiId,a)},selectedTaskSchema:a,dataTestAttrs:{component:"SchemaMapperConfigModalBody",element:"fieldMapperSourceDropdown",key:t[n].apiId}}))}}),l.createElement(ke.sg,{header:e.disabled?"Mapping from":"Map from",renderCell:n=>{var a
const{lookupConfig:i,fromSchemaId:r}=e.fieldToFieldMapperData[t[n].apiId],s=null!=r&&null!==(a=e.allSchemasById[r])&&void 0!==a?a:null
return l.createElement(ke.bL,null,l.createElement(SchemaFieldLookup,{flowchartTaskSchema:e.flowchartTaskSchema,disabled:e.disabled,lookupConfig:i,fromSchema:s,toSchemaField:t[n],onSubmit:a=>{e.onSubmit(t[n].apiId,a)},onRemove:()=>{e.removeLookupConfigForField(t[n].apiId)},...(0,Ie.Z)({component:"SchemaMapperConfigModalBody",element:"schemaFieldLookup",key:t[n].apiId})}))}}),E.ZP.WORKFLOWS_ENABLE_CONDITIONAL_MAPPING&&l.createElement(ke.sg,{header:l.createElement(ke.bL,null,l.createElement("span",null,l.createElement("span",null,"Require field to map"),l.createElement(U.ZP,{title:`${e.disabled?"Prevent":"Check the box to prevent"} ${(0,S._6)(2,D.vZ[e.toSchemaInfo.itemType])} with empty or null values for the specified field from being created.`},l.createElement(ye.Z,{icon:"info-circle",className:(0,i.iv)(Ye.helpIcon)})))),renderCell:n=>{const a=t[n].apiId,{resultMustBeNonNullToMap:i}=e.fieldToFieldMapperData[a],r=z.default.uniqueId("resultMustBeNonNullToMap")
return l.createElement(ke.bL,null,l.createElement(j.Z,{id:r,disabled:e.disabled,checked:i,label:"Require field to map",labelStyle:Fe.gF.HIDDEN,onChange:t=>{e.onChangeResultMustBeNonNullToMap(a,t.target.checked)}}))}})):l.createElement("div",{className:(0,i.iv)(Ye.modalText)},l.createElement("strong",null,e.toSchemaInfo.taskSchema.name)," has no mappable schema fields."),e.errorMessage&&l.createElement(Ae.ZP,{bannerType:Ae.ct.WARNING,text:e.errorMessage})))}const Ye=i.mM.create({modalText:{...Me.cf,paddingBottom:16,paddingTop:22,paddingLeft:6},fieldIcon:{color:H.TG,fontSize:12,marginRight:8},helpIcon:{marginLeft:8}})
function getDisabledMessage(e,t,n){return function areAllRequiredFieldsMapped(e,t){return t.fields.filter((({isRequired:e})=>e)).every((({apiId:t})=>null!=e[t]))}(e,n)?function areAllSelectedSourcesMapped(e,t){const n=z.default.unique(e.map((e=>e.taskSchema.id))),a=[]
for(const e of Object.keys(t)){const n=t[e].fromSchemaId
null==n||a.includes(n)||a.push(n)}if(n.length!==z.default.unique(a).length)return!1
return!0}(t,e)?null:"All source schemas must be used in the mapping.":"All required fields must have a configured mapping."}function SchemaMapperConfigModal(e){(0,m.hu)(e.fromSchemaInfos.length>0,"Expected at least one mapper source")
const[t,n]=(0,l.useState)(e.fromSchemaInfos),a=(0,l.useMemo)((()=>{const t=function getFieldToFieldMapperData(e,t){return(0,Le.I)(e).fields.reduce(((e,n)=>{var a,i,r
const s=null==t?void 0:t.schemaFieldMapperConfigs.find((e=>e.toSchemaFieldId===n.apiId))
e[n.apiId]={lookupConfig:null!==(a=null==s?void 0:s.lookupConfig)&&void 0!==a?a:null,fromSchemaId:null!==(i=null==s?void 0:s.fromSchemaId)&&void 0!==i?i:null,resultMustBeNonNullToMap:null!==(r=null==s?void 0:s.resultMustBeNonNullToMap)&&void 0!==r&&r}
return e}),{})}(e.toSchemaInfo,e.schemaMapperConfig)
if(1===e.fromSchemaInfos.length)for(const n of Object.keys(t))null==t[n].fromSchemaId&&(t[n].fromSchemaId=(0,Le.I)(e.fromSchemaInfos[0]).id)
return t}),[e.toSchemaInfo,e.schemaMapperConfig,e.fromSchemaInfos]),[i,r]=(0,l.useState)(a),s=!function areSameMappings(e,t,n){return Boolean(e)&&d()(t,n)}(e.schemaMapperConfig,a,i),c=getDisabledMessage(i,e.fromSchemaInfos,(0,Le.I)(e.toSchemaInfo))
return l.createElement(Pe.ZP,{title:e.disabled?"View mapping":"Configure mapping",onRequestClose:e.onRequestClose,onRequestSubmit:()=>{e.onRequestSubmit(s?function generateSchemaMapperConfig(e,t){const n=Object.keys(t).filter((e=>null!=t[e].lookupConfig))
return 0===n.length?null:{clientId:(0,u.Z)(),toSchemaId:(0,Le.I)(e).id,schemaFieldMapperConfigs:n.map((e=>({fromSchemaId:t[e].fromSchemaId,toSchemaFieldId:e,lookupConfig:t[e].lookupConfig,resultMustBeNonNullToMap:t[e].resultMustBeNonNullToMap}))),mapperType:A.Wj.FIELD_MAPPER}}(e.toSchemaInfo,i):void 0)},buttons:s?[{key:"finish",text:"Finish",disabled:null!=c,submit:!0}]:[{key:"close",text:"Close",submit:!0,style:x.ZJ.TERTIARY_GRAY}],expandHeight:!0,large:!0},l.createElement(SchemaMapperConfigModalBody,{flowchartTaskSchema:e.flowchartTaskSchema,disabled:e.disabled,fromSchemaInfos:t,toSchemaInfo:e.toSchemaInfo,onChangeFromItemType:(e,a)=>{const s=t[a]
if(e===s.itemType)return
const l=(0,o.ZP)(t,(t=>{t[a].itemType=e})),c=(0,o.ZP)(i,(t=>{var n
for(const[a,{fromSchemaId:i}]of Object.entries(t))null==i||s.taskSchema.id!==i&&(null===(n=s.taskSchema.outputSchema)||void 0===n?void 0:n.id)!==i||(t[a]={lookupConfig:null,resultMustBeNonNullToMap:!1,fromSchemaId:e===g.PROCESS_OUTPUT?s.taskSchema.outputSchema.id:s.taskSchema.id})}))
n(l)
r(c)},onChangeFieldMapperSource:(e,n)=>{const a=(0,Le.I)(t.find((e=>e.taskSchema.id===n)))
r({...i,[e]:{lookupConfig:null,fromSchemaId:a.id,resultMustBeNonNullToMap:!1}})},fieldToFieldMapperData:i,removeLookupConfigForField:e=>{r((0,o.ZP)(i,(t=>{t[e].lookupConfig=null})))},onSubmit:(e,t)=>{r((0,o.ZP)(i,(n=>{n[e].lookupConfig=t})))},onChangeResultMustBeNonNullToMap:(e,t)=>{r((0,o.ZP)(i,(n=>{n[e].resultMustBeNonNullToMap=t})))},allSchemasById:e.allSchemasById,errorMessage:c}))}function ConfigureMapperButton(e){const t=e.isEditing?null==e.schemaMapperConfig.mapperConfig?"Configure":"Edit":"View",n=0===e.schemaMapperConfig.fromTaskSchemas.length?`Source schemas must be set to ${t.toLocaleLowerCase()} mapper.`:null==e.schemaMapperConfig.toTaskSchema?`Destination schema must be set to ${t.toLocaleLowerCase()} mapper.`:null
return l.createElement(U.pf,{tooltipTitle:n},l.createElement(x.Co,{buttonStyle:x.ZJ.LINK,className:(0,i.iv)($e.singleButton),disabled:null!=n,text:t,onClick:async()=>{(0,m.hu)(e.schemaMapperConfig.fromTaskSchemas.length>0&&null!=e.schemaMapperConfig.toTaskSchema,"Expected schema mapper config to be defined")
const t=e.schemaMapperConfig.fromTaskSchemas.map((t=>function getFromSchemaInfo(e,t,n){var a,i
const r=z.default.unique((null!==(i=null===(a=e.mapperConfig)||void 0===a?void 0:a.schemaFieldMapperConfigs)&&void 0!==i?i:[]).map((({fromSchemaId:e})=>e)).filter((e=>{var n
return t.id===e||(null===(n=t.outputSchema)||void 0===n?void 0:n.id)===e})));(0,m.hu)(r.length<=1,"All mappers from a node must use the same source schema")
let s,o=null!=t.outputSchema
if(0===r.length)if(t.id===n.id){o=!1
s=g.PROCESS_TASK}else s=null!=t.outputSchema?g.PROCESS_OUTPUT:g.PROCESS_TASK
else s=Ue.ZP.isProcessOutputSchema(r[0])?g.PROCESS_OUTPUT:g.PROCESS_TASK
return{taskSchema:t,itemType:s,canChangeItemType:o}}(e.schemaMapperConfig,t,e.rootTaskSchema))),n=function getToSchemaInfo(e,t,n){var a
const i=null===(a=e.mapperConfig)||void 0===a?void 0:a.toSchemaId
let r
r=null!=i?Ue.ZP.isProcessOutputSchema(i)?g.PROCESS_OUTPUT:g.PROCESS_TASK:t.id===n.id?g.PROCESS_OUTPUT:g.PROCESS_TASK
return{taskSchema:t,itemType:r}}(e.schemaMapperConfig,e.schemaMapperConfig.toTaskSchema,e.rootTaskSchema),a=await(0,B.Z)(SchemaMapperConfigModal,{fromSchemaInfos:t,toSchemaInfo:n,flowchartTaskSchema:e.rootTaskSchema,schemaMapperConfig:e.schemaMapperConfig.mapperConfig,allSchemasById:e.allSchemasById,disabled:!e.isEditing})
e.onSetMapperConfig(a)},dataTestAttrs:e.dataTestAttrs}))}const $e=i.mM.create({singleButton:{padding:"0px",boxShadow:"none"}})
var Ke=n(903090)
function MultiSelectTaskSchemasDropdown(e){const t=e.possibleTaskSchemas.map((({id:e,name:t})=>({name:t,value:e})))
return e.disabled?l.createElement("div",{className:(0,i.iv)(ze.dropdown)},(0,xe.fk)(e.taskSchemas.length>0?e.taskSchemas.map((({name:e})=>e)).join(", "):"No task schemas selected",35)):l.createElement(Ke.Z,{noneSelectedMessage:"Select one or more task schemas",optionDatas:t,selectedValues:e.taskSchemas.map((({id:e})=>e)),onSelect:e.onSelectTaskSchemaIds,dataTestAttrs:e.dataTestAttrs,className:(0,i.iv)(ze.dropdown)})}const ze=i.mM.create({dropdown:{flex:"0.9",whiteSpace:"normal"}})
function SchemaMapperConfigPane(e){const t=(0,oe.Pe)([e.rootTaskSchema,...e.availableTaskSchemas],(({id:e})=>e)),getReorderableRowItem=(n,a)=>({id:n.clientId,itemClass:Re.Z,itemProps:{isDraggingDisabled:!e.isEditing,rowContainerClassName:(0,i.iv)(Qe.listItemContainer),dragHandleClassName:(0,i.iv)(Qe.dragHandle),row:{id:n.clientId,cells:[{key:`${n.clientId}-fromTaskSchemas`,contents:l.createElement("div",{className:(0,i.iv)(Qe.selectItemContainer,Qe.dropdownContainer)},l.createElement(MultiSelectTaskSchemasDropdown,{taskSchemas:n.fromTaskSchemas,possibleTaskSchemas:[e.rootTaskSchema,...e.availableTaskSchemas],onSelectTaskSchemaIds:n=>{const i=n.map((e=>t[e]))
e.onChange(function setFromSchemas(e,t,n){return(0,o.ZP)(e,(e=>{e[t].fromTaskSchemas=n
e[t].mapperConfig=null
return e}))}(e.schemaMapperConfigs,a,i))},disabled:!e.isEditing,dataTestAttrs:{component:"SchemaMapperConfigsPane",element:"fromTaskSchemasDropdown",key:`${a}`}}))},{key:`${n.clientId}-toTaskSchema`,contents:l.createElement("div",{className:(0,i.iv)(Qe.selectItemContainer,Qe.dropdownContainer)},l.createElement(SelectTaskSchemaDropdown,{taskSchema:n.toTaskSchema,possibleTaskSchemas:null!=e.rootTaskSchema.outputSchema?[e.rootTaskSchema,...e.availableTaskSchemas]:e.availableTaskSchemas,onSelectTaskSchemaId:n=>{e.onChange(function setToSchema(e,t,n){return(0,o.ZP)(e,(e=>{e[t].toTaskSchema=n
e[t].mapperConfig=null
return e}))}(e.schemaMapperConfigs,a,t[n]))},isLink:!1,disabled:!e.isEditing,dataTestAttrs:{component:"SchemaMapperConfigsPane",element:"toTaskSchemaDropdown",key:`${a}`}}))},{key:`${n.clientId}-configureMapper`,contents:l.createElement(ConfigureMapperButton,{schemaMapperConfig:n,rootTaskSchema:e.rootTaskSchema,onSetMapperConfig:t=>{null!=t&&e.onChange(function setMappings(e,t,n){return(0,o.ZP)(e,(e=>{e[t].mapperConfig=n
return e}))}(e.schemaMapperConfigs,a,t))},allSchemasById:e.allSchemasById,isEditing:e.isEditing,dataTestAttrs:{component:"SchemaMapperConfigsPane",element:"configureMapperButton",key:`${a}`}})},...e.isEditing?[{key:`${n.clientId}-delete`,cellClassName:"simpleDivTable-actionGroupContainer",contents:l.createElement("div",{className:(0,i.iv)(Qe.buttonContainer)},l.createElement(U.pf,{tooltipTitle:"Remove from flowchart config"},l.createElement(x.Co,{buttonStyle:x.ZJ.LINK,className:s()((0,i.iv)(Qe.singleButton),(0,i.iv)(Qe.deleteButton)),icon:"delete",onClick:()=>{e.onChange(function removeMapperConfig(e,t){return(0,o.ZP)(e,(e=>{e.splice(t,1)}))}(e.schemaMapperConfigs,a))},dataTestAttrs:{component:"SchemaMapperConfigsPane",element:"removeMapperButton"}})))}]:[]]}}})
return l.createElement("div",{className:(0,i.iv)(Qe.wrapper),...(0,Ie.Z)({component:"SchemaMapperConfigsPane",element:"root"})},e.isEditing&&l.createElement(x.Co,{className:s()((0,i.iv)(Qe.singleButton),(0,i.iv)(Qe.addButton)),textClassName:(0,i.iv)(Qe.addButtonText),buttonStyle:x.ZJ.LINK,onClick:()=>{e.onChange([...e.schemaMapperConfigs,{clientId:u.Z(),mapperConfig:null,fromTaskSchemas:[],toTaskSchema:null}])},icon:"compose",text:"Add transition",dataTestAttrs:{component:"SchemaMapperConfigsPane",element:"addMapperButton"}}),0===e.schemaMapperConfigs.length?l.createElement("div",null,"No transitions added to flowchart configuration."):l.createElement("div",{className:(0,i.iv)(Qe.listWrapper)},l.createElement("div",{className:s()("simpleDivTable-header",(0,i.iv)(Qe.selectItemContainer))},l.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Source"),l.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Target"),l.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Mapping")),l.createElement(Ce.Z,{itemDatas:e.schemaMapperConfigs.map(((e,t)=>getReorderableRowItem(e,t))),onMoveItem:t=>{const n=(0,oe.Pe)(e.schemaMapperConfigs,(({clientId:e})=>e))
e.onChange(t.map((e=>n[e])))},onMoveItemEnd:()=>{}})))}const Qe=i.mM.create({wrapper:{margin:"16px 0"},listWrapper:{border:`1px solid ${H.tN}`},selectItemContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},mappingColumnHeader:{paddingLeft:"50px"},dropdownContainer:{display:"flex",flexDirection:"row"},dragHandle:{marginRight:0,width:"16px"},buttonContainer:{marginLeft:"15px"},singleButton:{padding:"0px",boxShadow:"none"},addButton:{marginBottom:"16px",marginTop:"-7px"},addButtonText:{marginLeft:"4px"},listItemContainer:{marginLeft:"-16px"},deleteButton:{paddingLeft:"8px",paddingRight:"8px",color:H.pF,":hover":{color:H.hM}}})
var je=n(930630),Je=n(712315),Xe=n(795361)
function ProcessFlowchartViewer(e){const[t,n]=(0,l.useState)(u.Z());(0,l.useEffect)((()=>{n(u.Z())}),[e.flowchart,e.designSpace])
return l.createElement(Xe.ZP,{...e,key:t,locked:!0,hideSidebar:!0,onFlowchartChange:oe.ZT,editorEventGroupId:e.editorEventGroupId,actionMethod:e.actionMethod})}var et=n(167797)
function TemplateFlowchartEditorModal(e){var t
const n=null!==(t=e.flowchart)&&void 0!==t?t:(0,et.Z)(e.designSpace.flowchartSchema),[a,i]=(0,l.useState)(n),[r,s]=(0,l.useState)([])
return l.createElement(Pe.ZP,{title:"Configure template flowchart",buttons:[{text:"Cancel",cancel:!0,style:x.ZJ.TERTIARY_GRAY,onClick:()=>{le.gx(T.U9.CLOSED_MODAL,T.XC.WORKFLOWS,{event_group_id:e.eventGroupId,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,action_method:T.LY.TEMPLATE_FLOWCHART_MODIFICATION,task_schema_api_id:e.designSpace.flowchartSchema.id,close_type:T.ot.CANCEL,error_types:r,modal_type:je.t1})
e.onRequestClose()}},{text:"Save",submit:!0,style:x.ZJ.PRIMARY}],bannerProps:0===r.length?null:{bannerType:Ae.ct.WARNING,text:"You can save this template flowchart, but the flowchart configuration can't be submitted until the errors are fixed."},onRequestSubmit:()=>{le.gx(T.U9.SUBMITTED_MODAL,T.XC.WORKFLOWS,{event_group_id:e.eventGroupId,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,action_method:T.LY.TEMPLATE_FLOWCHART_MODIFICATION,task_schema_api_id:e.designSpace.flowchartSchema.id,error_types:r,modal_type:je.t1})
e.onRequestSubmit(a)},onRequestClose:()=>{le.gx(T.U9.CLOSED_MODAL,T.XC.WORKFLOWS,{event_group_id:e.eventGroupId,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,action_method:T.LY.TEMPLATE_FLOWCHART_MODIFICATION,task_schema_api_id:e.designSpace.flowchartSchema.id,close_type:T.ot.EXIT,error_types:r,modal_type:je.t1})
e.onRequestClose()},closeableOnEscapeKey:!1,extraLarge:!0,fullHeight:!0,scrollable:!1},l.createElement(Xe.ZP,{flowchart:n,designSpace:e.designSpace,onFlowchartChange:(e,t)=>{i(e)
s(t)},editorEventGroupId:e.eventGroupId,actionMethod:T.LY.TEMPLATE_FLOWCHART_MODIFICATION,modalType:"TEMPLATE_FLOWCHART_EDITOR_MODAL"}))}function EditTemplateFlowchartSection(e){const t=(0,l.useMemo)((()=>(0,fe.Z)(e.availableTaskSchemas.filter((e=>!(0,pe.n)(e))),e.schemaMapperConfigs,e.rootTaskSchema)),[e.availableTaskSchemas,e.schemaMapperConfigs,e.rootTaskSchema]),openFlowchartConfigEditor=async()=>{(0,le.gx)(T.U9.OPENED_MODAL,T.XC.WORKFLOWS,{event_group_id:e.eventGroupId,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,action_method:T.LY.TEMPLATE_FLOWCHART_MODIFICATION,task_schema_api_id:e.rootTaskSchema.id,error_types:e.templateFlowchart?extractGraphBuilderErrorTypes((0,ge.Z)(e.templateFlowchart,t)):null,modal_type:je.t1})
const n=await(0,B.Z)(TemplateFlowchartEditorModal,{flowchart:e.templateFlowchart,designSpace:t,eventGroupId:e.eventGroupId})
null!=n&&e.onChangeTemplateFlowchart(n)}
return null==e.templateFlowchart?e.isEditing?l.createElement(x.Co,{buttonStyle:x.ZJ.TERTIARY_GRAY,size:x.qE.MEDIUM,text:"Open flowchart editor",onClick:openFlowchartConfigEditor,dataTestAttrs:{component:"TemplateFlowchartPane",element:"openFlowchartEditorButton"}}):l.createElement("span",null,"No template flowchart configured"):l.createElement("div",{className:(0,i.iv)(tt.flowchartEditorWrapper)},l.createElement(ProcessFlowchartViewer,{flowchart:e.templateFlowchart,designSpace:t,reactFlowEmbeddedElement:e.isEditing?l.createElement("div",{className:(0,i.iv)(tt.buttonsInReactFlowWrapper)},l.createElement("div",{className:(0,i.iv)(tt.buttonWrapper)},l.createElement(U.ZP,{title:"Edit template flowchart"},l.createElement(x.Co,{buttonStyle:x.ZJ.LINK,icon:"edit",className:(0,i.iv)(tt.editButton),onClick:openFlowchartConfigEditor,dataTestAttrs:{component:"TemplateFlowchartPane",element:"openFlowchartEditorButton"}})),l.createElement(U.ZP,{title:"Remove template flowchart"},l.createElement(x.Co,{buttonStyle:x.ZJ.LINK,icon:"delete",className:(0,i.iv)(tt.deleteButton),onClick:()=>{e.onChangeTemplateFlowchart(null)
e.onToggleIsFlowchartModifiableOnCreation(!0)},dataTestAttrs:{component:"TemplateFlowchartPane",element:"removeFlowchart"}})))):null,editorEventGroupId:e.eventGroupId,actionMethod:T.LY.TEMPLATE_FLOWCHART_MODIFICATION}))}function TemplateFlowchartPane(e){return l.createElement("div",{className:(0,i.iv)(tt.wrapper),...(0,Ie.Z)({component:"TemplateFlowchartPane",element:"root"})},l.createElement(EditTemplateFlowchartSection,{isEditing:e.isEditing,templateFlowchart:e.templateFlowchart,availableTaskSchemas:e.availableTaskSchemas,schemaMapperConfigs:e.schemaMapperConfigs,rootTaskSchema:e.rootTaskSchema,onChangeTemplateFlowchart:e.onChangeTemplateFlowchart,onToggleIsFlowchartModifiableOnCreation:e.onToggleIsFlowchartModifiableOnCreation,eventGroupId:e.eventGroupId}),l.createElement("div",{className:(0,i.iv)(tt.checkboxSection)},l.createElement("div",{className:(0,i.iv)(tt.checkboxWrapper)},l.createElement(j.Z,{id:"isFlowchartModifiableOnCreation",className:(0,i.iv)(tt.checkbox),checked:e.isFlowchartModifiableOnCreation,label:"Users can modify the flowchart when creating tasks",onChange:t=>{e.onToggleIsFlowchartModifiableOnCreation(t.target.checked)},disabled:!e.isEditing||!e.templateFlowchart,dataTestAttrs:{component:"TemplateFlowchartPane",element:"isFlowchartModifiableOnCreationCheckbox"}}),l.createElement(Je.Z,{className:"u-mini-spacing-left",text:"If no template flowchart is specified, users must define the flowchart when creating tasks"})),l.createElement("div",{className:(0,i.iv)(tt.checkboxWrapper)},l.createElement(j.Z,{id:"isFlowchartModifiableAfterCreation",className:(0,i.iv)(tt.checkbox),checked:e.isFlowchartModifiableAfterCreation,label:"Users can modify the flowchart after tasks have been created",onChange:t=>{e.onToggleIsFlowchartModifiableAfterCreation(t.target.checked)},disabled:!e.isEditing,dataTestAttrs:{component:"TemplateFlowchartPane",element:"isFlowchartModifiableAfterCreationCheckbox"}}))))}const tt=i.mM.create({wrapper:{margin:"16px"},flowchartEditorWrapper:{height:"500px"},checkboxWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},checkboxSection:{borderTop:`1px solid ${H.tN}`,marginTop:"12px",marginBottom:"12px",paddingTop:"12px"},checkbox:{marginTop:"12px",marginBottom:"12px"},buttonsInReactFlowWrapper:{position:"absolute",right:"8px",top:"0",zIndex:5},buttonWrapper:{display:"flex",flexDirection:"row",alignItems:"baseline",justifyContent:"space-between"},editButton:{color:H.TG,padding:"8px",boxShadow:"none",":hover":{color:H.t0}},deleteButton:{color:H.TG,padding:"8px",boxShadow:"none",":hover":{color:H.hM}}})
var nt,at
!function(e){e.AVAILABLE_TASK_SCHEMAS="AVAILABLE_TASK_SCHEMAS"
e.SCHEMA_MAPPER_CONFIGS="SCHEMA_MAPPER_CONFIGS"
e.TEMPLATE_FLOWCHART="TEMPLATE_FLOWCHART"}(nt||(nt={}))
!function(e){e.VIEW="VIEW"
e.EDIT="EDIT"}(at||(at={}))
function GraphBuilderFlowchartConfigHeader(e){return l.createElement("div",{className:s()("simpleDivTable-header",(0,i.iv)(it.selectItemContainer))},l.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title"},"Flowchart configuration"),l.createElement("div",{className:(0,i.iv)(it.selectItemContainer)},e.isEditing?l.createElement(l.Fragment,null,l.createElement(x.Co,{buttonStyle:x.ZJ.TERTIARY_GRAY,size:x.qE.MINI,onClick:e.onCancel,text:"Cancel",className:(0,i.iv)(it.buttonContainer),dataTestAttrs:{component:"GraphBuilderFlowchartConfigHeader",element:"cancelButton"}}),l.createElement(U.pf,{tooltipTitle:e.submitDisabledMessage,tooltipPlacement:U.TQ.AUTO},l.createElement(x.Co,{buttonStyle:x.ZJ.SECONDARY,size:x.qE.MINI,onClick:e.onSubmit,text:"Submit",disabled:null!=e.submitDisabledMessage,className:(0,i.iv)(it.buttonContainer),dataTestAttrs:{component:"GraphBuilderFlowchartConfigHeader",element:"submitButton"}}))):l.createElement(x.Co,{buttonStyle:x.ZJ.TERTIARY_GRAY,size:x.qE.MINI,onClick:()=>{e.onEnableEditing()},icon:"edit",text:"Edit",dataTestAttrs:{component:"GraphBuilderFlowchartConfigHeader",element:"editButton"}})))}function GraphBuilderFlowchartConfigTabContainer(e){var t,n,a
const[r,o]=(0,l.useState)(nt.AVAILABLE_TASK_SCHEMAS),[c,d]=(0,l.useState)((0,le.Vr)())
return l.createElement("div",{className:(0,i.iv)(it.editorContainer),...(0,Ie.Z)({component:"GraphBuilderFlowchartConfigEditor",element:"root"})},l.createElement(GraphBuilderFlowchartConfigHeader,{isEditing:e.isEditing,submitDisabledMessage:null===(t=e.validationResults)||void 0===t?void 0:t.message,onSubmit:()=>{le.L9(T.Zm.SUBMITTED_FLOWCHART_CONFIG_EDITOR,{event_group_id:c,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,active_tab:r})
e.onSubmit(c)},onCancel:()=>{le.L9(T.Zm.CLOSED_FLOWCHART_CONFIG_EDITOR,{event_group_id:c,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,active_tab:r})
e.onCancel()},onEnableEditing:()=>{d((0,le.Vr)())
le.L9(T.Zm.OPENED_FLOWCHART_CONFIG_EDITOR,{event_group_id:c,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,active_tab:r})
e.onEnableEditing()}}),l.createElement("div",{className:(0,i.iv)(it.divider)}),l.createElement(_e.Xl,{activeTab:r,onRequestTabChange:t=>{le.L9(T.Zm.CLICKED_FLOWCHART_CONFIG_TAB,{event_group_id:e.isEditing?c:null,action_origin:T.D2.SETTINGS_TASK_SCHEMA_PAGE_FLOWCHART_CONFIGURATION,tab_clicked:t,navigation_mode_when_clicked:e.isEditing?at.EDIT:at.VIEW})
o(t)},className:s()("u-flex-grow",(0,i.iv)(it.tabContainer))},l.createElement(_e.OK,{tabKey:nt.AVAILABLE_TASK_SCHEMAS,title:"Task schemas"},l.createElement(AvailableTaskSchemasPane,{isEditing:e.isEditing,availableTaskSchemas:e.availableTaskSchemas,allTaskSchemas:e.allTaskSchemas,onChange:e.onChangeAvailableTaskSchemas})),l.createElement(_e.OK,{tabKey:nt.SCHEMA_MAPPER_CONFIGS,title:"Transitions"},l.createElement(SchemaMapperConfigPane,{isEditing:e.isEditing,schemaMapperConfigs:e.schemaMapperConfigs,availableTaskSchemas:e.availableTaskSchemas.filter((e=>!(0,pe.n)(e))),allSchemasById:e.allSchemasById,rootTaskSchema:e.rootTaskSchema,onChange:e.onChangeSchemaMapperConfigs})),l.createElement(_e.OK,{tabKey:nt.TEMPLATE_FLOWCHART,title:(null===(n=e.validationResults)||void 0===n?void 0:n.tab)===nt.TEMPLATE_FLOWCHART?l.createElement(l.Fragment,null,l.createElement(ye.Z,{icon:"revision",className:(0,i.iv)(it.tabIcon)})," Template flowchart"):"Template flowchart"},(null===(a=e.validationResults)||void 0===a?void 0:a.tab)===nt.TEMPLATE_FLOWCHART&&l.createElement("div",{className:(0,i.iv)(it.bannerWrapper)},l.createElement(Ae.ZP,{bannerType:Ae.ct.ERROR,text:"There are some errors in this template flowchart.",supportingInfo:"Edit the template flowchart to fix these errors so it can be used to create tasks."})),l.createElement(TemplateFlowchartPane,{isEditing:e.isEditing,isFlowchartModifiableOnCreation:e.isFlowchartModifiableOnCreation,isFlowchartModifiableAfterCreation:e.isFlowchartModifiableAfterCreation,templateFlowchart:e.templateFlowchart,availableTaskSchemas:e.availableTaskSchemas,schemaMapperConfigs:e.schemaMapperConfigs,rootTaskSchema:e.rootTaskSchema,onChangeTemplateFlowchart:e.onChangeTemplateFlowchart,onToggleIsFlowchartModifiableOnCreation:e.onChangeIsFlowchartModifiableOnCreation,onToggleIsFlowchartModifiableAfterCreation:e.onChangeIsFlowchartModifiableAfterCreation,eventGroupId:c}))))}const it=i.mM.create({editorContainer:{border:`1px solid ${H.tN}`,borderRadius:"4px",position:"relative"},divider:{height:"1px",width:"100%",marginTop:"30px",left:"0px",background:`${H.tN}`,position:"absolute"},tabContainer:{padding:"8px 14px"},selectItemContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},buttonContainer:{marginLeft:"15px"},bannerWrapper:{margin:"16px"},tabIcon:{color:H.JF,marginRight:"2px",transform:"scale(1.2)"}})
function extractGraphBuilderErrorTypes(e){const t=[]
for(const n of e.nodes)t.push(...n.errorTypes||[])
for(const n of e.edges)t.push(...n.errorTypes||[])
return t}function getFlowchartConfigValidationResults({availableTaskSchemas:e,schemaMapperConfigs:t,templateFlowchart:n,isFlowchartModifiableOnCreation:a,rootTaskSchema:i}){let r,s,o=[]
null!=n&&(o=function templateFlowchartErrorTypes(e,t,n,a){const i=(0,fe.Z)(t,n,a)
return extractGraphBuilderErrorTypes((0,ge.Z)(e,i))}(n,e,t,i))
if((0,m.Gp)(e.every((e=>null!=e)),"Available task schemas must be defined"))if(0===e.length){r=nt.AVAILABLE_TASK_SCHEMAS
s="Flowchart config must have at least one task schema"}else if(e.some((e=>(0,pe.n)(e)))){r=nt.AVAILABLE_TASK_SCHEMAS
s="All task schemas must be set"}else if(0===t.length){r=nt.SCHEMA_MAPPER_CONFIGS
s="Flowchart config must have at least one transition"}else if(t.some((({fromTaskSchemas:e})=>0===e.length))){r=nt.SCHEMA_MAPPER_CONFIGS
s="All transitions must have a source"}else if(t.some((({toTaskSchema:e})=>null==e))){r=nt.SCHEMA_MAPPER_CONFIGS
s="All transitions must have a destination"}else if(t.some((({mapperConfig:e})=>null==e))){r=nt.SCHEMA_MAPPER_CONFIGS
s="All transitions must have a configured mapper"}else if(function doMapperConfigsCoverSameTransition(e){(0,m.hu)(e.every((({fromTaskSchemas:e,toTaskSchema:t})=>e.length>0&&null!=t)),"Mapper configs must be defined")
const t=(0,oe.vM)(e,(({toTaskSchema:e})=>e.id))
for(const e of Object.values(t))for(const t of e){const n=new Set(t.fromTaskSchemas.map((({id:e})=>e)))
if(e.some((e=>{if(e.clientId===t.clientId)return!1
const a=new Set(e.fromTaskSchemas.map((({id:e})=>e)))
return(0,oe.KX)(n,a)})))return!0}return!1}(t)){r=nt.SCHEMA_MAPPER_CONFIGS
s="A transition may not be a subset of another transition"}else if(a||null!=n){if(null!=n&&o.length>0){r=nt.TEMPLATE_FLOWCHART
s="The template flowchart must not have any errors"}}else{r=nt.TEMPLATE_FLOWCHART
s="The flowchart must be modifiable on task creation if a template flowchart is not set"}else{r=nt.AVAILABLE_TASK_SCHEMAS
s="Available task schemas must be defined"}return r&&s?{tab:r,message:s,errorTypes:o}:null}function GraphBuilderFlowchartConfigEditor(e){const t=(0,l.useMemo)((()=>(0,ce.Q)(e.flowchartConfig,e.allTaskSchemas,e.rootTaskSchema)),[e.flowchartConfig,e.allTaskSchemas,e.rootTaskSchema]),[n,a]=(0,l.useState)(t.availableTaskSchemas),[i,r]=(0,l.useState)(t.schemaMapperConfigs),[s,o]=(0,l.useState)(t.templateFlowchart),[c,d]=(0,l.useState)(t.isFlowchartModifiableOnCreation),[u,p]=(0,l.useState)(t.isFlowchartModifiableAfterCreation),h=(0,l.useMemo)((()=>{const a=getFlowchartConfigValidationResults({availableTaskSchemas:n,schemaMapperConfigs:i,templateFlowchart:s,isFlowchartModifiableOnCreation:c,rootTaskSchema:e.rootTaskSchema})
return null!=a?a:areClientFlowchartConfigsDifferent(t,{availableTaskSchemas:n,schemaMapperConfigs:i,templateFlowchart:s,isFlowchartModifiableOnCreation:c,isFlowchartModifiableAfterCreation:u})?null:{tab:null,message:"Flowchart config has not been changed",errorTypes:[]}}),[n,i,s,c,e.rootTaskSchema,t,u]),setStateToServerFlowchartConfig=()=>{a(t.availableTaskSchemas)
r(t.schemaMapperConfigs)
o(t.templateFlowchart)
d(t.isFlowchartModifiableOnCreation)
p(t.isFlowchartModifiableAfterCreation)};(0,l.useEffect)((()=>{setStateToServerFlowchartConfig()}),[e.rootTaskSchema])
return l.createElement(GraphBuilderFlowchartConfigTabContainer,{availableTaskSchemas:n,schemaMapperConfigs:i,templateFlowchart:s,isFlowchartModifiableOnCreation:c,isFlowchartModifiableAfterCreation:u,isEditing:e.isEditing,rootTaskSchema:e.rootTaskSchema,allSchemasById:e.allSchemasById,allTaskSchemas:e.allTaskSchemas,validationResults:h,onEnableEditing:()=>{e.onSetIsEditing(!0)},onSubmit:t=>{e.onSetIsEditing(!1)
const a=i.map((({clientId:e,fromTaskSchemas:t,toTaskSchema:n})=>({clientId:e,fromTaskSchemaIds:t.map((({id:e})=>e)),toTaskSchemaId:n.id})))
let r
r=null!=s?{templateFlowchart:(0,ue.Z)(s,a,e.rootTaskSchema)}:{templateFlowchart:null}
e.onSubmit({availableTaskSchemaIds:n.map((e=>e.id)),schemaMapperConfigs:i.filter((({mapperConfig:e})=>null!=e)).map((e=>({...e.mapperConfig,clientId:e.clientId}))),...r,isFlowchartModifiableOnCreation:c,isFlowchartModifiableAfterCreation:u},t)},onCancel:()=>{setStateToServerFlowchartConfig()
e.onSetIsEditing(!1)},onChangeAvailableTaskSchemas:async e=>{const t=new Set(e.filter((e=>!(0,pe.n)(e))).map((({id:e})=>e))),o=new Set(n.filter((e=>!(0,pe.n)(e)&&!t.has(e.id))).map((({id:e})=>e))),l=i.filter((e=>!function doesSchemaMapperConfigDependOnSchemas(e,t){return!(null==e.toTaskSchema||!t.has(e.toTaskSchema.id))||null!=e.fromTaskSchemas.find((({id:e})=>t.has(e)))}(e,o))),c=null!=s&&function doesTemplateFlowchartDependOnSchemas(e,t){return e.nodes.some((e=>(0,Ee.m7)(e)&&t.has(e.taskSchemaId)))}(s,o),d=l.length!==i.length
if(d||c){let t,n
if(d&&c){t="a transition and the template flowchart"
n="the transition will be removed and the template flowchart will need to be deleted or corrected before the flowchart config can be saved"}else if(d){t="a transition"
n="the transition will be removed"}else{t="the template flowchart"
n="the template flowchart will need to be deleted or corrected before the flowchart config can be saved"}le.L9(T.Zm.WARNING_SHOWN_FLOWCHART_CONFIG_ITEM_DELETION)
if(!await(0,de.Z)({typeName:"task schema",message:`This task schema is referenced by ${t}. If the task schema is removed, ${n}.`,onSubmit:()=>{a(e)
r(l)
le.L9(T.Zm.WARNING_OVERRIDDEN_FLOWCHART_CONFIG_ITEM_DELETION)},onCancel:()=>{le.L9(T.Zm.WARNING_CLOSED_FLOWCHART_CONFIG_ITEM_DELETION,{close_type:T.ot.CANCEL})},onExit:()=>{le.L9(T.Zm.WARNING_CLOSED_FLOWCHART_CONFIG_ITEM_DELETION,{close_type:T.ot.EXIT})}}))return}a(e)
r(l)},onChangeSchemaMapperConfigs:async e=>{const t=(0,oe.TV)(new Set(i.map((({clientId:e})=>e))),new Set(e.map((({clientId:e})=>e))))
if(null!=s&&function doesTemplateFlowchartDependOnSchemaMapperConfigs(e,t,n){var a
const i=t.filter((({fromTaskSchemas:e,toTaskSchema:t})=>e.length>0&&null!=t)).map((({clientId:e,fromTaskSchemas:t,toTaskSchema:n})=>({clientId:e,fromTaskSchemaIds:t.map((({id:e})=>e)),toTaskSchemaId:n.id}))),r={},s={},o={}
for(const t of e.nodes){(0,m.hu)(null==o[t.clientId],"Found multiple nodes with the same client id")
o[t.clientId]=t
r[t.clientId]=[];((0,Ee.m7)(t)||(0,Ee.QH)(t)||(0,Ee.Yd)(t))&&(s[t.clientId]=t.taskSchemaId)}for(const t of e.edges){null==r[t.toNodeClientId]&&(r[t.toNodeClientId]=[])
r[t.toNodeClientId].push(t.fromNodeClientId)}for(const t of e.nodes){if(!(0,he.H)(t))continue
const e=(0,Te.Z)(t.clientId,r,(e=>(0,Ee.m7)(o[e])||(0,Ee.QH)(o[e]))).map((({nodeId:e})=>e)),l=new Set(e.map((e=>s[e])))
if((null!==(a=(0,Se.Z)(t,l,i))&&void 0!==a?a:[]).some((({clientId:e})=>n.has(e))))return!0}return!1}(s,i,t)){if(!await(0,de.Z)({typeName:"transition",message:"This transition is referenced by the template flowchart. If removed, the template flowchart will need to be deleted or corrected before the flowchart config can be saved."}))return}r(e)},onChangeTemplateFlowchart:o,onChangeIsFlowchartModifiableOnCreation:d,onChangeIsFlowchartModifiableAfterCreation:p})}function GraphBuilderFlowchartConfigEditorLoadingWrapper(e){return null==e.allTaskSchemas?l.createElement(Y.b,null):l.createElement(GraphBuilderFlowchartConfigEditor,{...e,allTaskSchemas:e.allTaskSchemas})}var rt=n(443375),st=n(714200),ot=n(619587),lt=n(155014)
function ProcessSchemaFieldTableRow(e){return l.createElement(st.Z,{...e,availableFieldOptions:(0,rt._K)({schemaFieldSelectors:e.schemaFieldSelectors,storableSchemas:e.storableSchemas,tagSchemas:e.tagSchemas,schemaInterfaces:e.schemaInterfaces,initialField:e.initialField,includeSnapshotField:!0,includeBooleanField:!0,snapshotFieldDisabledMessage:(0,ot.K_)(e.schema,e.initialField)}),lookupConfigModalProps:(0,lt.xF)(e.schema,e.schemaType),disableControlsWithTooltips:{[st.X.DELETE_BUTTON]:e.isFieldBeingCreated?null:"Workflow schema fields cannot be deleted; they can only be archived."},isUneditable:e.initialField.isUneditable,shouldShowSubmissionWarningOnCreate:!0})}n(551705)
var ct=n(204026)
const dt="No Access",ut="Choose Folder"
function RemoveFolderButton(e){return l.createElement(U.ZP,{title:"Remove folder"},l.createElement(x.Co,{size:x.qE.SMALL,buttonStyle:x.ZJ.TERTIARY_GRAY,icon:"format-delete",className:"u-mini-spacing-left",disabled:e.disabled,onClick:e.onClick}))}function DefaultCreationFolderSelectorContainer(e){return l.createElement(l.Fragment,null,l.createElement($.DU,{label:"Default task group folder",name:"Default task group folder",isRequired:!1}),l.createElement("div",{className:"u-flex-display"},l.createElement(ct.Z,{enableRedesign:!0,showInventory:!1,showNotebook:!0,value:e.isInaccessible?null:e.defaultCreationFolderId,noFolderText:e.isInaccessible?dt:ut,readOnly:Boolean(e.isDisabled),onChange:t=>{e.onChange(t.target.value)},unsetOnFetchFail:!0}),l.createElement(RemoveFolderButton,{disabled:null==e.defaultCreationFolderId,onClick:()=>{e.onChange(null)}})))}function DefaultEntryExecutionFolderSelectorContainer(e){return l.createElement(l.Fragment,null,l.createElement($.DU,{label:"Default execution entry folder",name:"Default execution entry folder",isRequired:!1}),e.executionType===A.Pf.ENTRY?l.createElement("div",{className:"u-flex-display"},l.createElement(ct.Z,{enableRedesign:!0,showInventory:!1,showNotebook:!0,value:e.isInaccessible?null:e.defaultEntryExecutionFolderId,noFolderText:e.isInaccessible?dt:ut,onChange:t=>{e.onChange(t.target.value)},unsetOnFetchFail:!0}),l.createElement(RemoveFolderButton,{disabled:null==e.defaultEntryExecutionFolderId,onClick:()=>{e.onChange(null)}})):l.createElement("span",{className:(0,i.iv)(jt.descriptionText)},"This setting is only available if execution type is Entry."))}var mt=n(947212)
function OwnerField(e){return e.schema?l.createElement($.ZP,{label:"Owner",name:"Owner",value:e.schema.organization.name,isBeingCreated:!1,isRequired:!1,isWritable:!1,onChange:()=>{},dataTestAttrs:e.dataTestAttrs}):l.createElement(mt.Z,{...e})}function PrefixPreview(e){return l.createElement(l.Fragment,null,null!=e.value&&l.createElement(U.ZP,{title:e.value,placement:U.TQ.BOTTOM},l.createElement("div",{className:(0,i.iv)(pt.prefixPreview)},e.value)))}function PrefixField(e){var t
return l.createElement("div",null,l.createElement($.ZP,{label:e.label,name:e.label,error:e.error,value:e.value,isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:Boolean(!e.isDisabled),onChange:t=>{e.onChange(t)},dataTestAttrs:e.dataTestAttrs}),""===e.error?l.createElement(PrefixPreview,{value:null!==(t=e.prefixPreview)&&void 0!==t?t:null}):l.createElement(W.Z,{error:e.error}))}function NameField(e){return l.createElement(l.Fragment,null,l.createElement($.ZP,{label:e.label,name:e.label,error:e.error,value:e.value,isBeingCreated:e.isBeingCreated,isRequired:!0,isWritable:Boolean(!e.isDisabled),onChange:t=>{e.onChange(t)},dataTestAttrs:e.dataTestAttrs,maxLength:150}),l.createElement(W.Z,{error:e.error}))}function ProcessSchemaMetadataSectionRow(e){return l.createElement("div",{className:(0,i.iv)(pt.schemaMetadataSectionRow)},l.Children.map(e.children,(e=>l.createElement("div",{className:(0,i.iv)(pt.schemaMetadataColumn)},l.createElement("div",{className:s()((0,i.iv)(pt.schemaMetadataField),"u-base-text")},e)))))}const pt=i.mM.create({schemaMetadataSectionRow:{display:"flex",flexDirection:"row",alignItems:"flex-start",width:"100%",marginBottom:"24px"},schemaMetadataColumn:{flex:.33,minWidth:0},schemaMetadataField:{width:"80%",marginBottom:"0"},prefixPreview:{height:"18px",fontSize:"12px",marginBottom:"2px",verticalAlign:"top",color:H.pp,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})
var ht=n(369706)
const Et=n(574796).an
function ProcessTaskGroupInstructionsField(e){return E.ZP.WORKFLOWS_ENABLE_TASK_GROUP_INSTRUCTIONS?l.createElement("div",{className:(0,i.iv)(jt.taskGroupInstructionEditorContainer)},l.createElement($.ZP,{label:e.label,name:e.label,error:e.error,value:e.value,isBeingCreated:e.isBeingCreated,isRequired:!1,isWritable:Boolean(!e.isDisabled),maxLength:Et,onChange:t=>{e.onChange(t)},type:ht.T.TEXTAREA,urlAware:!0,emptyValueAllowed:!0,textPlaceholder:"None",dataTestAttrs:e.dataTestAttrs}),l.createElement(W.Z,{error:e.error})):l.createElement(l.Fragment,null)}var St=n(368734)
function RemoveOutputSchemaModal(e){return l.createElement(Pe.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:e.onRequestSubmit,title:"Remove output schema?",medium:!0,buttons:[{cancel:!0,text:"Cancel"},{submit:!0,text:"Remove output schema",style:x.ZJ.NEGATIVE,dataTestAttrs:{component:"RemoveOutputSchemaModal",element:"button",key:St.Z.REMOVE}}]},l.createElement("p",{className:"u-spacing-bottom"},"Previous output schema configurations will be lost. Output schema cannot be added again after the task schema has been created."))}var Tt=n(578624),gt=n(216101),ft=n(380659),It=n(501202),At=n(688594),yt=n(714700),_t=n(435826),Ct=n(198438),Rt=n(381148),Nt=n(220798)
function PartiesField(e){var t
const n=(0,l.useRef)(z.default.uniqueId()),a={enableNewEntityInput:!0,allowEmails:!0,allowTeams:!0,allowOrganizations:!1,placeholder:"Search for user or team",shouldAllowMultiple:!0,userSearchType:Ct.t.All};(0,m.hu)(!e.isBeingCreated||null!=e.errorText&&null!=e.setDoesNotHaveUnresolvedInput,"errorText and setDoesNotHaveUnresolvedInput props must be provided if isBeingCreated is true")
return l.createElement(l.Fragment,null,l.createElement(X.Z,{id:n.current,label:e.label,labelStyle:J.Z.STYLES.LABEL,isRequired:!1},e.isBeingCreated?l.createElement(Ct.D,{...a,onChange:t=>{e.onChange((n=t)?n.map((e=>({id:e.id,handle:e.handle}))):[])
var n},onChangeInput:t=>{e.setDoesNotHaveUnresolvedInput(""===t)},value:e.value,size:Nt.I.SMALL,className:(0,i.iv)(Ot.inputBox),emptyText:"No results found"}):l.createElement(Rt.Z,{...a,isFullWidth:!0,value:e.value,initialIsBeingEdited:!1,isDisabled:Boolean(e.isDisabled),onChange:t=>{e.onChange(t)},allowEmptyValue:!0,chipSize:Nt.I.SMALL,dataTestAttrs:e.dataTestAttrs,customViewerValue:e.customViewerValue})),e.showError&&l.createElement(W.Z,{error:null!==(t=e.errorText)&&void 0!==t?t:null}))}const Ot=i.mM.create({inputBox:{flex:1}})
var bt=n(633418),vt=n(102385)
var Pt=n(620058)
function ConfigureExecutionTemplateSection(e){const[t,n]=(0,l.useState)(!1)
return l.createElement(X.Z,{id:"execution-template-field",label:"Execution template",isRequired:e.executionType===A.Pf.ENTRY,labelStyle:J.Z.STYLES.LABEL},l.createElement("div",{className:s()((0,i.iv)(Lt.executionTemplateContainer),{editableField:null!=e.executionTemplate}),onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)}},e.executionType===A.Pf.ENTRY?l.createElement(Pt.Z,{entryTemplate:e.executionTemplate,onChange:e.onChange,isDisabled:e.isDisabled,isHovering:t,buttonLabel:"Configure",modalTitle:"Configure execution template"}):l.createElement("span",{className:(0,i.iv)(Lt.descriptionText),...(0,Ie.Z)({component:"ConfigureExecutionTemplateSection",element:"templateNotAvailable"})},"This setting is only available if execution type is Entry.")))}const Lt=i.mM.create({executionTemplateContainer:{width:"100%"},descriptionText:{color:H.TG,fontSize:"13px",lineHeight:"16px"}})
function AutopopulateFromTasksField(e){const t=(0,l.useRef)(z.default.uniqueId("autopopulateFromTasksWrapper")),n=(0,l.useRef)(z.default.uniqueId("autopopulateFromTasksCheckbox"))
return l.createElement(X.Z,{id:t.current,label:"Auto-populate from tasks",labelStyle:J.Z.STYLES.LABEL},l.createElement("div",{className:s()((0,i.iv)(Q.checkboxWrapper),"editableField")},l.createElement(j.Z,{id:n.current,className:(0,i.iv)(Q.checkboxField),label:"Pre-fill one output per task",checked:e.value,disabled:e.disabled,onChange:t=>{e.onChange(t.target.checked)}}),l.createElement(Je.Z,{text:"Enabling this option does not prevent users from adding, removing, or modifying outputs"})))}function CanSetAssigneeOnTaskCreationField(e){const t=(0,l.useRef)(z.default.uniqueId("catSetAssigneeOnTaskCreationWrapper")),n=(0,l.useRef)(z.default.uniqueId("catSetAssigneeOnTaskCreationCheckbox"))
return l.createElement(X.Z,{id:t.current,label:"Assignee",labelStyle:J.Z.STYLES.LABEL},e.hideWithMessage?l.createElement("span",{className:(0,i.iv)(Q.messageText)},e.hideWithMessage):l.createElement("div",{className:s()((0,i.iv)(Q.checkboxWrapper),"editableField")},l.createElement(j.Z,{id:n.current,className:(0,i.iv)(Q.checkboxField),label:"Can set assignee on task creation",checked:e.value,disabled:e.disabled,onChange:t=>{e.onChange(t.target.checked)}})))}function DefaultResponsibleTeamField(e){const t=(0,l.useRef)(z.default.uniqueId()),n={enableNewEntityInput:!0,allowEmails:!1,allowTeams:!0,allowOrganizations:!1,placeholder:"Search for team",shouldAllowMultiple:!1,userSearchType:Ct.t.None}
return l.createElement(l.Fragment,null,l.createElement(X.Z,{id:t.current,label:e.label,labelStyle:J.Z.STYLES.LABEL,isRequired:!1},e.isBeingCreated?l.createElement(Ct.D,{...n,onChange:t=>{e.onChange((n=t[0])?{id:n.id,handle:n.handle}:null)
var n},onChangeInput:t=>{e.setIsDefaultResponsibleTeamValid(""===t)},value:e.value?[e.value]:[],size:Nt.I.SMALL,className:(0,i.iv)(Q.input),emptyText:"No results found"}):l.createElement(Rt.Z,{...n,isFullWidth:!0,value:e.value,initialIsBeingEdited:!1,isDisabled:Boolean(e.isDisabled),onChange:t=>{e.onChange(t)},allowEmptyValue:!0,placeholder:"Search for team",chipSize:Nt.I.SMALL,dataTestAttrs:e.dataTestAttrs})),e.showError&&l.createElement(W.Z,{error:'Invalid "Default responsible team" value'}))}const Dt="Configure tasks to be executed either with a notebook entry, directly, or with a flowchart."
function ExecutionTypeField(e){const t=(0,l.useRef)(z.default.uniqueId("executionType"))
return e.isBeingCreated?l.createElement(X.Z,{id:t.current,label:"Execution type",labelStyle:J.Z.STYLES.LABEL,isRequired:!0,help:Dt},l.createElement(ne.ZP,{displayName:D.TC[e.value],className:(0,i.iv)(Q.input),menu:l.createElement(ae.ZP,{value:e.value,width:ie.zL.FULL},(0,D._y)(A.Nk.SCHEMA_CONFIG).sort(((e,t)=>e.localeCompare(t))).map((t=>l.createElement(re.Z,{key:t,value:t,onSelect:()=>{e.onChange(t)},dataTestAttrs:{component:"ExecutionTypeField",element:"option",key:t}},D.TC[t])))),dataTestAttrs:{component:"ExecutionTypeField",element:"root"}})):l.createElement($.ZP,{label:"Execution type",name:"Execution type",value:D.TC[e.value],isBeingCreated:!1,isRequired:!1,isWritable:!1,onChange:()=>{},dataTestAttrs:{component:"ExecutionTypeField",element:"root"},helpIcon:l.createElement($.q5,{renderContent:()=>l.createElement("div",{className:(0,i.iv)(Q.helpTooltip)},Dt)})})}var Mt=n(169602),wt=n(98190),Ft=n(898808),kt=n(629656),Ut=n(173220),xt=n(10584),Bt=n(567e3)
const Zt="ProcessTaskSchemaFormsList",qt=[{name:"Name",width:4},{name:"Type",width:2},{name:"Author",width:2},{name:"Created",width:2},{name:"Last Modified",width:2}],Gt=a.Ps`
  query ProcessTaskSchemaFormsQuery($schemaId: StrictString!) @skipAudit @engComponent(name: FORMS) {
    processTaskSchema(id: $schemaId) {
      ... on ProcessTaskSchemaNode {
        id
        forms {
          ...InaccessibleInfoGraphQL
          ... on FormDefinitionNode {
            id
            name
            creator
            createdAt
            modifiedAt
            editUrl
            archiveRecord {
              purpose
            }
            isValid
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,C.f)("InaccessibleInfo").fragment}
`
function ProcessTaskSchemaFormsList({schemaId:e,processTaskSchema:t}){const n=(0,_.IJ)(Gt,{fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0,variables:{schemaId:e}}),[a,r]=(0,l.useState)(null),s=(0,l.useMemo)((()=>{var e,t
if(n.type!==_.NI.SUCCESS)return[]
const a=(0,N.CZ)(null===(e=n.data)||void 0===e?void 0:e.processTaskSchema)?[]:(0,N.mj)(null===(t=n.data)||void 0===t?void 0:t.processTaskSchema.forms)
return(0,Bt.Z)(a,[e=>e.name.toLowerCase()])}),[n]).filter((e=>!a||Be.Z.caseInsensitiveContains(e.name,a))),o=s.map(((e,t)=>{const n=[l.createElement(wt.rm,{templateCollectibleInfo:e,markNeedsUpdate:!e.isValid}),"Task creation",e.creator,(0,xt.UT)(e.createdAt,{showTime:!1}),(0,xt.UT)(e.modifiedAt,{showTime:!1})]
return{id:e.id,itemIndex:t,isArchived:null!=e.archiveRecord,values:n}}))
if(n.type===_.NI.ERROR){v.ZP.error("Could not load forms")
return null}return l.createElement("div",{className:(0,i.iv)(Vt.list)},l.createElement(Ft.ZP,{columnHeaders:qt,emptyMessage:"No forms found for this schema",isLoading:n.type===_.NI.PENDING,rows:o,getEditUrl:e=>s[e].editUrl,writable:!0,leftSubheaderNode:l.createElement(Ut.ZP,{className:(0,i.iv)(Vt.searchInput),borderRadius:Ut.cM.LARGE,placeholder:"Search",value:a,onChange:e=>{r(e.target.value)},onEscape:()=>{r(null)}}),rightSubheaderNode:l.createElement(x.Co,{buttonStyle:x.ZJ.PRIMARY,size:x.qE.MEDIUM,text:"Create",onClick:function onClickCreateForm(){kt.bA(Zt,l.createElement(Mt.Z,{onRequestClose:()=>{kt.xv(Zt)},initialTaskSchema:t}))}})}))}const Vt=i.mM.create({searchInput:{width:200},list:{...Me.cf}}),Ht="Saving...",Wt=a.Ps`
  query ProcessTaskSchemaEditorQuery($schemaId: StrictString!) @skipAudit @engComponent(name: WORKFLOWS) {
    processTaskSchema(id: $schemaId) {
      ... on ProcessTaskSchemaNode {
        ...ProcessTaskSchemaGraphQL
        relevantForms {
          ... on FormDefinitionNode {
            id
            isValid
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,C.f)("ProcessTaskSchema").fragment}
  ${(0,C.f)("InaccessibleInfo").fragment}
`,Yt=a.Ps`
  query ProcessTaskSchemaEditorSupportedSchemasQuery @skipAudit @engComponent(name: WORKFLOWS) {
    ...AllStorableSchemasGraphQL
    ...AllTagSchemasAndInterfacesGraphQL
    ...AllResultSchemasGraphQL
    ...AllProcessTaskSchemasGraphQL
    processTaskStatusLifecycles {
      ... on ProcessTaskStatusLifecycleNode {
        id
        name
        schemaExecutionType
      }
    }
  }
  ${(0,C.f)("AllStorableSchemas").fragment}
  ${(0,C.f)("AllTagSchemasAndInterfaces").fragment}
  ${(0,C.f)("AllResultSchemas").fragment}
  ${(0,C.f)("AllProcessTaskSchemas").fragment}
`
function insertOrReplaceTaskSchema(e,t){return(0,o.ZP)(e,(e=>{const n=e.findIndex((({id:e})=>t.id===e))
n<0?e.push(t):e[n]=t}))}function cacheUpdatedTaskSchema(e){const t=(0,y.readQuerySafe)({query:Yt})
if(null!=t){const n=insertOrReplaceTaskSchema(t.processTaskSchemas,e);(0,y.writeQuery)({query:Yt},{...t,processTaskSchemas:n,__typname:"Query"})}(0,y.writeFragmentsToCache)((0,C.f)("ProcessTaskSchema"),[e])}const $t=new Set([A.Pf.DIRECT,A.Pf.ENTRY])
var Kt
!function(e){e.CONFIGURATION="configuration"
e.FORMS="forms"}(Kt||(Kt={}))
const zt={component:"ProcessTaskSchemaEditorQuery"},Qt={action:{...zt,element:"action"},schemaError:{...zt,element:"schemaError"}}
function getMinimalEntitiesFromResponsibleParties(e){return e.map((e=>({id:e.id,handle:e.handle})))}function handleNavigateToSchemaListing(){S.c4(null,P.Lv())}function makeProcessTaskSchemaSettingsPageContainerProps(e){var t
return{onClickTitle:handleNavigateToSchemaListing,subtitle:`${null!==(t=e.subtitle)&&void 0!==t?t:"Create Task Schema"}`,title:"Task Schemas",toolbar:e.processTaskSchema&&vt.Z.hasEnterprisePlan()&&l.createElement(ft.Z,{schemaId:e.processTaskSchema.id,schemaType:g.PROCESS_TASK_SCHEMA})}}function ProcessTaskSchemaEditorContainer(e){return l.createElement(_t.Z,{...makeProcessTaskSchemaSettingsPageContainerProps(e)},l.createElement("div",{className:"u-flex-grow u-min-width-zero"},l.createElement("div",{className:"settingsPageContainer-section"},e.children)))}function ProcessTaskSchemaEditorTabbedContainer(e){const[t,n]=(0,l.useState)((()=>{const e=S.FK()
return function enumIncludes(e,t){return null!=t&&Object.values(e).includes(t)}(Kt,e)?e:Kt.CONFIGURATION})),[a,i]=e.children
return l.createElement(_t.Z,{...makeProcessTaskSchemaSettingsPageContainerProps(e)},l.createElement(_e.Xl,{activeTab:t,onRequestTabChange:e=>{n(e)
e===Kt.CONFIGURATION?S.ov():S.oN(e)},className:"u-flex-grow u-min-width-zero"},l.createElement(_e.OK,{tabKey:Kt.CONFIGURATION,title:"Configuration"},l.createElement("div",{className:"settingsPageContainer-section"},a)),l.createElement(_e.OK,{tabKey:Kt.FORMS,title:"Forms"},l.createElement("div",{className:"settingsPageContainer-section"},i))))}function ProcessTaskSchemaEditorContent(e){var t,n,a,r,s,o,c,h,g,f,y,_,C,R,L,D,M,w,F,k,U,q,G,V,H,W,$,K,z,Q,j,X,ee,te,ne,ae,ie,re,se,oe,le,ce,de,ue,me,pe,he,Ee,Se,Te,ge,fe,ye,_e,Ce,Re,Ne,Oe,be,ve,Pe,Le,De,Me,we,Fe,ke,Ue
const xe=null==e.processTaskSchema,Ze=null!=(null===(t=e.processTaskSchema)||void 0===t?void 0:t.archiveRecord),[qe,Ge]=(0,l.useState)(null!==(a=null===(n=e.processTaskSchema)||void 0===n?void 0:n.taskGroupPrefix)&&void 0!==a?a:""),[Ve,He]=(0,l.useState)(null!==(s=null===(r=e.processTaskSchema)||void 0===r?void 0:r.name)&&void 0!==s?s:""),[We,Ye]=(0,l.useState)(null===(o=e.processTaskSchema)||void 0===o?void 0:o.sqlIdentifier),[$e,Ke]=(0,l.useState)(null!==(h=null===(c=e.processTaskSchema)||void 0===c?void 0:c.executionType)&&void 0!==h?h:A.Pf.ENTRY),[ze,Qe]=(0,l.useState)(null!==(f=null===(g=e.processTaskSchema)||void 0===g?void 0:g.prefix)&&void 0!==f?f:"T"),[je,Je]=(0,l.useState)(null!==(C=null===(_=null===(y=e.processTaskSchema)||void 0===y?void 0:y.outputSchema)||void 0===_?void 0:_.prefix)&&void 0!==C?C:"O"),[Xe,et]=(0,l.useState)(null==e.processTaskSchema||null!=e.processTaskSchema.outputSchema),tt=(0,yt.u)(),[nt,at]=(0,l.useState)(null!==(D=null!==(L=null===(R=e.processTaskSchema)||void 0===R?void 0:R.organization)&&void 0!==L?L:null==tt?void 0:tt[0])&&void 0!==D?D:null),[it,rt]=(0,l.useState)(null!==(w=null===(M=e.processTaskSchema)||void 0===M?void 0:M.allFields)&&void 0!==w?w:[]),[st,lt]=(0,l.useState)(null!==(U=null===(k=null===(F=e.processTaskSchema)||void 0===F?void 0:F.outputSchema)||void 0===k?void 0:k.allFields)&&void 0!==U?U:[]),[ct,dt]=(0,l.useState)(null===(G=null===(q=e.processTaskSchema)||void 0===q?void 0:q.canSetAssigneeOnTaskCreation)||void 0===G||G),[ut,mt]=(0,l.useState)(null===(V=e.processTaskSchema)||void 0===V?void 0:V.isPropagateWatchersEnabled),[pt,ht]=(0,l.useState)(Boolean(null===(W=null===(H=e.processTaskSchema)||void 0===H?void 0:H.outputSchema)||void 0===W?void 0:W.directExecutionModalAutopopulateTaskIds)),[Et,St]=(0,l.useState)(null!==(K=null===($=e.processTaskSchema)||void 0===$?void 0:$.canOnlyBePartOfFlowchart)&&void 0!==K&&K),[Tt,ft]=(0,l.useState)(null!==(Q=(null===(z=e.processTaskSchema)||void 0===z?void 0:z.executionType)===A.Pf.FLOWCHART)&&void 0!==Q&&Q),[_t,Ct]=(0,l.useState)((null===(X=null===(j=e.processTaskSchema)||void 0===j?void 0:j.relevantForms)||void 0===X?void 0:X.filter((e=>(0,p.Eh)(e)||e.isValid)))||[]),[Rt,Nt]=(0,l.useState)((0,u.Z)()),[Ot,bt]=(0,l.useState)((0,u.Z)()),[vt,Lt]=(0,l.useState)((0,u.Z)()),[Dt,Mt]=(0,l.useState)(!1),[wt,Ft]=(0,l.useState)({}),[kt,Ut]=(0,l.useState)((null===(ee=e.processTaskSchema)||void 0===ee?void 0:ee.defaultResponsibleTeam)?{id:e.processTaskSchema.defaultResponsibleTeam.id,handle:e.processTaskSchema.defaultResponsibleTeam.handle}:null),[xt,Bt]=(0,l.useState)(!0),[Zt,qt]=(0,l.useState)(!1),[Gt,Vt]=(0,l.useState)(getMinimalEntitiesFromResponsibleParties(null!==(ne=null===(te=e.processTaskSchema)||void 0===te?void 0:te.responsibleParties)&&void 0!==ne?ne:[])),[Wt,Yt]=(0,l.useState)(!0),[Kt,zt]=(0,l.useState)(!1),[Jt,Xt]=(0,l.useState)(function getResponsiblePartyLookupConfig(e){var t;(0,m.Gp)(e.length<=1,`Expected at most one responsiblePartyLookupConfig ${e}`)
return null!==(t=e[0])&&void 0!==t?t:null}(null!==(ie=null===(ae=e.processTaskSchema)||void 0===ae?void 0:ae.responsiblePartyLookupConfigs)&&void 0!==ie?ie:[])),[en,tn]=(0,l.useState)(null!==(oe=null===(se=null===(re=e.processTaskSchema)||void 0===re?void 0:re.outputSchema)||void 0===se?void 0:se.taskFinderLookupConfig)&&void 0!==oe?oe:null),[nn,an]=(0,l.useState)(null!==(ce=null===(le=e.processTaskSchema)||void 0===le?void 0:le.entryTemplate)&&void 0!==ce?ce:null),[rn,sn]=(0,l.useState)(null==(null===(de=e.processTaskSchema)||void 0===de?void 0:de.defaultCreationFolderOrInaccessible)||(0,N.CZ)(e.processTaskSchema.defaultCreationFolderOrInaccessible)?null:e.processTaskSchema.defaultCreationFolderOrInaccessible.id),[on,ln]=(0,l.useState)(null!=(null===(ue=e.processTaskSchema)||void 0===ue?void 0:ue.defaultCreationFolderOrInaccessible)&&(0,N.CZ)(e.processTaskSchema.defaultCreationFolderOrInaccessible)),[cn,dn]=(0,l.useState)(null==(null===(me=e.processTaskSchema)||void 0===me?void 0:me.defaultEntryExecutionFolderOrInaccessible)||(0,N.CZ)(e.processTaskSchema.defaultEntryExecutionFolderOrInaccessible)?null:e.processTaskSchema.defaultEntryExecutionFolderOrInaccessible.id),[un,mn]=(0,l.useState)(null!=(null===(pe=e.processTaskSchema)||void 0===pe?void 0:pe.defaultEntryExecutionFolderOrInaccessible)&&(0,N.CZ)(e.processTaskSchema.defaultEntryExecutionFolderOrInaccessible)),[pn,hn]=(0,l.useState)(null===(he=e.processTaskSchema)||void 0===he?void 0:he.taskGroupInstructions),{statusLifecycles:En}=e,Sn=(0,l.useMemo)((()=>{const e=(null!=En?En:[]).filter((({schemaExecutionType:e})=>e===$e)).map((e=>({...e,name:Be.Z.toSentenceCase(e.name)})));(0,m.Gp)(null==En||e.length>0,`Expected at least one status lifecycle for executionType ${$e}`)
return e}),[En,$e]),[Tn,gn]=(0,l.useState)(null!==(Se=null===(Ee=e.processTaskSchema)||void 0===Ee?void 0:Ee.statusLifecycle)&&void 0!==Se?Se:Sn[0]);(0,l.useEffect)((()=>{var t,n
gn(null!==(n=null===(t=e.processTaskSchema)||void 0===t?void 0:t.statusLifecycle)&&void 0!==n?n:Sn[0])}),[Sn,e.processTaskSchema]);(0,l.useEffect)((()=>{var t
null==(null===(t=e.processTaskSchema)||void 0===t?void 0:t.statusLifecycle)&&gn(Sn[0])
if($e!==A.Pf.ENTRY){an(null)
dn(null)}}),[$e])
const{tagSchemas:fn,taskSchemas:In,storableSchemas:An,resultSchemas:yn}=e,_n=[fn,In,An,yn].every((e=>null!=e)),Cn=(0,l.useMemo)((()=>{const t=[...null!=fn?fn:[],...null!=An?An:[],...null!=yn?yn:[]].reduce(((e,t)=>{e[t.id]={...t,fields:t.fieldsJson,allFields:t.allFieldsJson}
return e}),{})
for(const e of null!=In?In:[]){t[e.id]=e
null!=e.outputSchema&&(t[e.outputSchema.id]=e.outputSchema)}if(null!=e.processTaskSchema){t[e.processTaskSchema.id]=e.processTaskSchema
null!=e.processTaskSchema.outputSchema&&(t[e.processTaskSchema.outputSchema.id]=e.processTaskSchema.outputSchema)}return t}),[fn,An,yn,In,e.processTaskSchema]),onFieldsChanged=async(e,t,n,a)=>{if((0,ot.yS)(e,t))if(xe)a(t)
else{const a=(0,ot.MT)(e,t)
a.length>0?await createOrUpdateSnapshotField(a,t,n):await updateProcessTaskSchema({[n]:t})}},isEmptyOrWhitespace=e=>e.match(/^\s*$/g),Rn=(()=>{if(null==nt)return"This schema needs to have an owner."
if(isEmptyOrWhitespace(qe)||isEmptyOrWhitespace(Ve)||isEmptyOrWhitespace(ze))return"This schema needs to have prefixes and a schema name before it can be created."
if(0===it.length)return"This schema needs to have Task fields before it can be created."
if(Xe){if(isEmptyOrWhitespace(je))return"This schema needs to have an Output prefix before it can be created."
if(0===st.length)return"This schema has an Output schema, so it needs to have Output fields before it can be created."}return $e===A.Pf.ENTRY&&null==nn?"This schema needs to have an Execution template before it can be created.":null})(),setStateOnUpdate=e=>{var t
null!=e.taskGroupPrefix&&Ge(e.taskGroupPrefix)
null!=e.name&&He(e.name)
null!=e.sqlIdentifier&&Ye(e.sqlIdentifier)
null!=e.taskSchemaPrefix&&Qe(e.taskSchemaPrefix)
if(null!=e.taskFields){rt(e.taskFields)
Ct([])
e.updateTables&&Nt((0,u.Z)())}null!=e.outputSchemaPrefix&&Je(e.outputSchemaPrefix)
if(null!=e.outputFields){lt(e.outputFields)
e.updateTables&&bt((0,u.Z)())}null!=e.autopopulateDirectOutputsFromTasks&&ht(e.autopopulateDirectOutputsFromTasks)
void 0!==e.defaultResponsibleTeam&&Ut(e.defaultResponsibleTeam)
void 0!==e.defaultResponsibleParties&&Vt(e.defaultResponsibleParties)
void 0!==e.responsiblePartyLookupConfig&&Xt(e.responsiblePartyLookupConfig)
e.updateTaskFinder&&tn(null!==(t=e.taskFinderLookupConfig)&&void 0!==t?t:null)
null!=e.canSetAssigneeOnTaskCreation&&dt(e.canSetAssigneeOnTaskCreation)
null!=e.canOnlyBePartOfFlowchart&&St(e.canOnlyBePartOfFlowchart)
void 0!==e.defaultCreationFolderId&&sn(e.defaultCreationFolderId)
void 0!==e.defaultEntryExecutionFolderId&&dn(e.defaultEntryExecutionFolderId)
void 0!==e.taskGroupInstructions&&hn(e.taskGroupInstructions)
null!=e.isPropagateWatchersEnabled&&mt(e.isPropagateWatchersEnabled)
void 0!==e.flowchartConfig&&e.updateTables&&Lt((0,u.Z)())},createOrUpdateSnapshotField=async(t,n,a)=>{var i,r,s
setStateOnUpdate({[a]:n});(0,m.Gp)(1===t.length,"Expected only one created/update snapshot field")
const o=t[0],l="taskFields"===a?e.processTaskSchema.id:e.processTaskSchema.outputSchema.id
try{o.apiId?await(0,At.AY)({snapshotFieldId:o.apiId,displayName:o.displayName,systemName:o.systemName,lookupConfigSpec:o.lookupConfig,archiveRecord:o.archiveRecord}):await(0,At.c3)({schemaId:l,displayName:o.displayName,systemName:o.systemName,lookupConfigSpec:o.lookupConfig});(0,m.hu)(void 0!==e.refetchProcessSchema,"Expected defined refetchProcessSchema prop")
e.refetchProcessSchema()
setStateOnUpdate({taskFields:e.processTaskSchema.allFields,outputFields:null!==(r=null===(i=e.processTaskSchema.outputSchema)||void 0===i?void 0:i.allFields)&&void 0!==r?r:null})
v.ZP.success("Updated schema successfully")}catch(e){null!=e.responseJSON&&Ft(null!==(s=e.responseJSON.errors)&&void 0!==s?s:{})
v.ZP.notifyError(e)}},updateProcessTaskSchema=async t=>{var n,a,i,r,s,o,l
setStateOnUpdate(t)
Ft({})
try{const s=await(0,Z.jI)(P.w({schemaId:e.processTaskSchema.id,...null!=t.taskGroupPrefix?{taskGroupPrefix:t.taskGroupPrefix}:{},...null!=t.name?{name:t.name}:{},...null!=t.sqlIdentifier?{sqlIdentifier:t.sqlIdentifier}:{},...null!=t.taskSchemaPrefix?{prefix:t.taskSchemaPrefix}:{},...null!=t.canSetAssigneeOnTaskCreation?{canSetAssigneeOnTaskCreation:t.canSetAssigneeOnTaskCreation}:{},...null!=t.canOnlyBePartOfFlowchart?{canOnlyBePartOfFlowchart:t.canOnlyBePartOfFlowchart}:{},defaultResponsibleTeamId:void 0===t.defaultResponsibleTeam?void 0:null!==(a=null===(n=t.defaultResponsibleTeam)||void 0===n?void 0:n.id)&&void 0!==a?a:null,defaultResponsiblePartiesIds:void 0===t.defaultResponsibleParties?void 0:t.defaultResponsibleParties.map((({id:e})=>e)),responsiblePartyLookupConfigs:void 0===t.responsiblePartyLookupConfig?void 0:null==t.responsiblePartyLookupConfig?null:[t.responsiblePartyLookupConfig],...null!=t.taskFields?{schemaFields:gt.sanitizeFields(t.taskFields)}:{},processOutputSchema:Xe?{...null!=t.outputSchemaPrefix?{prefix:t.outputSchemaPrefix}:{},...null!=t.outputFields?{schemaFields:gt.sanitizeFields(t.outputFields)}:{},...t.updateTaskFinder?{taskFinderLookupConfig:t.taskFinderLookupConfig}:{},...null!=t.autopopulateDirectOutputsFromTasks?{autopopulateFromTasks:t.autopopulateDirectOutputsFromTasks}:{}}:null,defaultCreationFolderId:t.defaultCreationFolderId,defaultEntryExecutionFolderId:t.defaultEntryExecutionFolderId,...null!=t.flowchartConfig?{flowchartConfig:t.flowchartConfig}:{},taskGroupInstructions:t.taskGroupInstructions,...null!=t.isPropagateWatchersEnabled?{isPropagateWatchersEnabled:t.isPropagateWatchersEnabled}:{},configEditorEventGroupId:t.configEditorEventGroupId,actionOrigin:T.D2.SETTINGS_TASK_SCHEMA_PAGE}),Ht)
cacheUpdatedTaskSchema(s)
setStateOnUpdate({taskFields:s.allFields,outputFields:null!==(r=null===(i=s.outputSchema)||void 0===i?void 0:i.allFields)&&void 0!==r?r:null})
v.ZP.success("Updated schema successfully")}catch(n){null!=n.responseJSON&&Ft(null!==(s=n.responseJSON.errors)&&void 0!==s?s:{})
setStateOnUpdate({taskFields:e.processTaskSchema.allFields,outputFields:null!==(l=null===(o=e.processTaskSchema.outputSchema)||void 0===o?void 0:o.allFields)&&void 0!==l?l:null,updateTables:!0})
null!=t.flowchartConfig&&Mt(!0)
v.ZP.notifyError(n)}},generatePrefixPreview=(e,t)=>isEmptyOrWhitespace(qe)?"":`${e}: ${qe}1-${t}1`
return l.createElement(l.Fragment,null,l.createElement(ProcessTaskSchemaEditorSection,{sectionTitle:"Task",sectionNumber:1},l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(PrefixField,{label:"Task group prefix",value:qe,error:null!==(Te=wt.taskGroupPrefix)&&void 0!==Te?Te:"",isBeingCreated:xe,isDisabled:Ze||Dt||!xe&&E.ZP.WORKFLOWS_DISABLE_CHANGING_TASK_GROUP_PREFIX,onChange:async e=>{e!==qe&&(xe?Ge(e):await updateProcessTaskSchema({taskGroupPrefix:e}))},dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"prefixField"}}),l.createElement(NameField,{label:"Name",value:Ve,error:null!==(ge=wt.processTaskSchemaName)&&void 0!==ge?ge:"",isBeingCreated:xe,isDisabled:Ze||Dt,onChange:async e=>{e!==Ve&&(xe?He(e):await updateProcessTaskSchema({name:e}))},dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"nameField"}}),l.createElement(OwnerField,{className:(0,i.iv)(jt.ownerField),schema:e.processTaskSchema,ownerChoices:tt,owner:nt,onOwnerChanged:at,dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"ownerField"}})),l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(PrefixField,{label:"ID prefix",value:ze,error:null!==(fe=wt.taskSchemaPrefix)&&void 0!==fe?fe:"",isBeingCreated:xe,isDisabled:Ze||Dt,onChange:async e=>{e!==ze&&(xe?Qe(e):await updateProcessTaskSchema({taskSchemaPrefix:e}))},prefixPreview:generatePrefixPreview("Task ID preview",ze)}),l.createElement(ExecutionTypeField,{value:$e,onChange:e=>{Ke(e)
ft(e===A.Pf.FLOWCHART)},isBeingCreated:xe}),Tn?l.createElement(StatusLifecycleField,{value:Tn,onChange:gn,options:Sn,isBeingCreated:xe,error:wt.statusLifecycle}):l.createElement("div",{className:"fieldInput-label-container"},l.createElement(J.Z,{htmlFor:"",label:"Status lifecycle"}),l.createElement("div",{className:"u-small-spacing-top"},l.createElement(Y.Z,null)))),l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(ConfigureExecutionTemplateSection,{executionType:$e,executionTemplate:nn,onChange:(e,t,n)=>{an({templateCollectionId:e.id,name:t,sourceTemplateId:n})},isDisabled:!xe||Ze}),l.createElement(DefaultCreationFolderSelectorContainer,{executionType:$e,defaultCreationFolderId:rn,isInaccessible:on,onChange:async e=>{if(e!==rn)if(xe)sn(e)
else{await updateProcessTaskSchema({defaultCreationFolderId:e})
ln(!1)}},isDisabled:Ze||Dt}),l.createElement(DefaultEntryExecutionFolderSelectorContainer,{executionType:$e,defaultEntryExecutionFolderId:cn,isInaccessible:un,onChange:async e=>{if(e!==cn)if(xe)dn(e)
else{await updateProcessTaskSchema({defaultEntryExecutionFolderId:e})
mn(!1)}},isDisabled:Ze})),l.createElement(ProcessSchemaMetadataSectionRow,null,E.ZP.WORKFLOWS_ENABLE_COLLABORATORS?l.createElement(PartiesField,{label:"Default responsible parties",value:Gt,onChange:async e=>{d()(e,Gt)||(xe?Vt(e):await updateProcessTaskSchema({defaultResponsibleParties:e}))},isBeingCreated:xe,isDisabled:Ze||Dt,setDoesNotHaveUnresolvedInput:Yt,showError:Kt,dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"defaultResponsiblePartiesField"},errorText:'Invalid "Default responsible parties" value'}):l.createElement(DefaultResponsibleTeamField,{label:"Responsible team",value:kt,onChange:async e=>{d()(e,kt)||(xe?Ut(e):await updateProcessTaskSchema({defaultResponsibleTeam:e}))},isBeingCreated:xe,isDisabled:Ze||Dt,setIsDefaultResponsibleTeamValid:Bt,showError:Zt,dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"defaultResponsibleTeamField"}}),l.createElement(CanSetAssigneeOnTaskCreationField,{value:ct,disabled:Dt,hideWithMessage:$e===A.Pf.FLOWCHART?"Flowchart tasks do not have assignees.":null,onChange:async e=>{e!==ct&&(xe?dt(e):await updateProcessTaskSchema({canSetAssigneeOnTaskCreation:e}))}}),l.createElement(CanOnlyBePartOfFlowchartField,{executionType:$e,value:Et,disabled:Dt,onChange:async e=>{e!==Et&&(xe?St(e):await updateProcessTaskSchema({canOnlyBePartOfFlowchart:e}))}})),E.ZP.WORKFLOWS_ENABLE_COLLABORATORS&&(0,b.Eq)(O.F.V1)&&l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(ResponsiblePartyLookupConfigField,{value:Jt,isBeingCreated:xe,isDisabled:Ze||Dt,isLoading:!_n,label:"Task to responsible party lookup",onChange:async e=>{d()(e,Jt)||(xe?Xt(e):await updateProcessTaskSchema({responsiblePartyLookupConfig:e}))},taskSchema:e.processTaskSchema,error:wt.responsiblePartyLookupConfigs})),E.ZP.ENABLE_WAREHOUSE&&E.ZP.SCHEMAS_ENABLE_CHANGE_WAREHOUSE_NAME&&l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(It.Z,{isWritable:!Ze&&!Dt,schema:e.processTaskSchema,sqlIdentifier:null!=We?We:"",onSqlIdentifierChange:async e=>{e!==We&&(xe?Ye(e):await updateProcessTaskSchema({sqlIdentifier:e}))},error:wt.sqlIdentifier,dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"schemaWarehouseName"}})),E.ZP.WORKFLOWS_ENABLE_PROPAGATE_WATCHERS&&l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(IsPropagateWatchersEnabledField,{value:ut,onChange:async e=>{e!==ut&&(xe?mt(e):await updateProcessTaskSchema({isPropagateWatchersEnabled:e}))},disabled:Ze||Dt,executionType:$e})),l.createElement(ProcessTaskGroupInstructionsField,{label:"Instructions",value:null!=pn?pn:"",isBeingCreated:xe,onChange:async e=>{e!==pn&&(xe?hn(e):await updateProcessTaskSchema({taskGroupInstructions:e}))},error:wt.taskGroupInstructions,isDisabled:Ze||Dt,dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"taskGroupInstructionsField"}}),l.createElement(ProcessSchemaErrorList,{error:null!==(ye=wt.taskFields)&&void 0!==ye?ye:""}),l.createElement(ProcessSchemaFieldTable,{isDisabled:Ze||Dt,key:Rt,hasBottomLink:!Xe,schema:null!==(_e=e.processTaskSchema)&&void 0!==_e?_e:null,ownerUrlId:null!==(Ce=null==nt?void 0:nt.url_identifier)&&void 0!==Ce?Ce:"",ownerId:null!==(Re=null==nt?void 0:nt.id)&&void 0!==Re?Re:null,onFieldsChange:e=>{onFieldsChanged(it,e,"taskFields",rt)},schemaType:"task",storableSchemas:e.storableSchemas,tagSchemas:e.tagSchemas,fields:it,resultSchemas:e.resultSchemas,allSchemasById:Cn,dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"taskTable"},changeWarnings:(0,I.u)()&&!xe&&_t.length?[l.createElement(l.Fragment,null,l.createElement(Ae.ZP,{bannerType:Ae.ct.WARNING,text:`Updating this schema will have downstream effects on ${_t.length} existing forms.`,supportingInfo:"This could cause data integrity issues if the affected form changes are not reviewed, acknowledged, and/or updated."}),l.createElement("p",{className:"u-small-spacing-top"},"Please contact the owner or responsible party for the corresponding forms that have been affected."))]:void 0})),l.createElement(ProcessTaskSchemaEditorSection,{isLastSection:!Tt,sectionTitle:"Output",sectionNumber:2},Xe&&l.createElement(l.Fragment,null,l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(PrefixField,{label:"ID prefix",value:je,error:null!==(Ne=wt.outputSchemaPrefix)&&void 0!==Ne?Ne:"",isBeingCreated:xe,isDisabled:Ze||Dt,onChange:async e=>{e!==je&&(xe?Je(e):await updateProcessTaskSchema({outputSchemaPrefix:e}))},prefixPreview:generatePrefixPreview("Output ID preview",je)})),$e===A.Pf.DIRECT&&l.createElement(ProcessSchemaMetadataSectionRow,null,l.createElement(AutopopulateFromTasksField,{value:pt,disabled:!1,onChange:async e=>{e!==pt&&(xe?ht(e):await updateProcessTaskSchema({autopopulateDirectOutputsFromTasks:e}))}})),l.createElement(ProcessSchemaErrorList,{error:null!==(Oe=wt.outputFields)&&void 0!==Oe?Oe:""}),l.createElement(ProcessSchemaFieldTable,{isDisabled:Ze||Dt,key:Ot,hasBottomLink:Xe,schema:null!==(ve=null===(be=e.processTaskSchema)||void 0===be?void 0:be.outputSchema)&&void 0!==ve?ve:null,ownerId:null!==(Pe=null==nt?void 0:nt.id)&&void 0!==Pe?Pe:null,ownerUrlId:null!==(Le=null==nt?void 0:nt.url_identifier)&&void 0!==Le?Le:"",onFieldsChange:e=>{onFieldsChanged(st,e,"outputFields",lt)},schemaType:"output",storableSchemas:e.storableSchemas,tagSchemas:e.tagSchemas,fields:st,resultSchemas:e.resultSchemas,allSchemasById:Cn,dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"outputTable"}}),$t.has($e)&&l.createElement(ConfigureTaskFinderSection,{isBeingCreated:xe,allSchemasById:Cn,isLoading:!_n,taskFinderLookupConfig:en,outputSchema:null!==(Me=null===(De=e.processTaskSchema)||void 0===De?void 0:De.outputSchema)&&void 0!==Me?Me:null,taskSchema:null!==(we=e.processTaskSchema)&&void 0!==we?we:null,isArchived:Ze,error:wt.taskFinderLookupConfig,onChange:e=>{updateProcessTaskSchema({taskFinderLookupConfig:e,updateTaskFinder:!0})}})),xe&&l.createElement(ToggleOutputSchemaButton,{hasOutputSchema:Xe,onClick:()=>{Xe?(0,B.Z)(RemoveOutputSchemaModal,{onRequestSubmit:()=>{et(!1)
Je("O")
lt([])}}):et(!0)}}),!Xe&&!xe&&l.createElement("div",{className:(0,i.iv)(jt.descriptionText)},"Output schema cannot be added after the task schema is created.")),Tt&&l.createElement(ProcessTaskSchemaEditorSection,{isLastSection:!0,sectionTitle:"Flowchart",sectionNumber:3},xe?l.createElement("span",{className:(0,i.iv)(jt.descriptionText,jt.flowchartText)},"Configure the flowchart after the task schema is created."):e.isAnyPartOfFlowchartConfigInaccessible?l.createElement(ProcessSchemaErrorList,{error:"You do not have access to all of the flowchart data.  Please contact your administrator for assistance."}):l.createElement(l.Fragment,null,l.createElement(ProcessSchemaErrorList,{error:null!==(Fe=wt.flowchartConfig)&&void 0!==Fe?Fe:""}),l.createElement(GraphBuilderFlowchartConfigEditorLoadingWrapper,{key:vt,rootTaskSchema:e.processTaskSchema,flowchartConfig:null!==(Ue=null===(ke=e.processTaskSchema.flowchartConfig)||void 0===ke?void 0:ke.currentFlowchartConfigVersion)&&void 0!==Ue?Ue:null,allSchemasById:Cn,allTaskSchemas:e.taskSchemas,isEditing:Dt,onSetIsEditing:Mt,onSubmit:(e,t)=>{updateProcessTaskSchema({flowchartConfig:e,configEditorEventGroupId:t})}}))),null==e.processTaskSchema&&l.createElement(l.Fragment,null,l.createElement(x.Co,{className:(0,i.iv)(jt.createButton),buttonStyle:x.ZJ.SECONDARY,disabled:null!=Rn,onClick:async()=>{var e
Ft({})
if(!xt||!Wt){qt(!xt)
zt(!Wt)
return}const t={name:Ve,sqlIdentifier:We,taskGroupPrefix:qe,prefix:ze,executionType:$e,canSetAssigneeOnTaskCreation:ct,schemaFields:gt.sanitizeFields(it),organizationId:nt.id,defaultResponsibleTeamId:null==kt?void 0:kt.id,defaultResponsiblePartiesIds:Gt.map((({id:e})=>e)),statusLifecycleId:Tn.id,defaultCreationFolderId:rn,taskGroupInstructions:pn,isPropagateWatchersEnabled:ut,processOutputSchema:Xe?{prefix:je,schemaFields:gt.sanitizeFields(st)}:null}
let n
if($e===A.Pf.ENTRY){(0,m.hu)(null!=nn&&(0,Pt.g)(nn),"Expected execution template to be configured for entry type schema")
n={...t,executionType:$e,executionTemplate:{templateCollectionId:null==nn?void 0:nn.templateCollectionId,templateName:null==nn?void 0:nn.name,sourceTemplateId:null==nn?void 0:nn.sourceTemplateId},defaultEntryExecutionFolderId:cn,canOnlyBePartOfFlowchart:Et}}else if($e===A.Pf.DIRECT){n={...t,executionType:$e,canOnlyBePartOfFlowchart:Et}
Xe&&(n.processOutputSchema.autopopulateFromTasks=pt)}else $e===A.Pf.FLOWCHART?n={...t,executionType:$e}:(0,m.hu)(!1,`Unsupported execution type - ${$e}`)
try{const e=await(0,Z.jI)(P.NF(n),Ht)
cacheUpdatedTaskSchema(e)
S.c4(null,P.k_(e.id))}catch(t){t.responseJSON&&Ft(null!==(e=t.responseJSON.errors)&&void 0!==e?e:{})
v.ZP.notifyError(t)}},size:x.qE.MEDIUM,text:"Create",dataTestAttrs:Qt.action}),Rn&&l.createElement("div",{className:(0,i.iv)(jt.schemaErrorMessage),...(0,Ie.Z)(Qt.schemaError)},l.createElement(Ae.ZP,{bannerType:Ae.ct.WARNING,text:Rn}))))}function ToggleOutputSchemaButton(e){return l.createElement("div",{className:(0,i.iv)(jt.outputSchemaToggle)},l.createElement(V.Z,{className:s()("u-no-spacing-bottom",(0,i.iv)(jt.descriptionContents))},l.createElement("div",{className:"settingsPageContainer-label"},l.createElement(x.Co,{buttonStyle:x.ZJ.LINK,onClick:e.onClick,className:e.hasOutputSchema?(0,i.iv)(jt.removeText):"",dataTestAttrs:{component:"ProcessTaskSchemaEditor",element:"outputSchemaControlButton",key:e.hasOutputSchema?"remove":"add"}},e.hasOutputSchema?"Remove output schema":"Add output schema")),l.createElement("div",{className:(0,i.iv)(jt.descriptionText)},`Output schema cannot be ${e.hasOutputSchema?"removed":"added"} after the task schema is\n          created.`)))}function ProcessSchemaErrorList(e){return l.createElement(bt.Z,{errorMessage:e.error})}function ProcessSchemaFieldTable(e){var t,n
return l.createElement("div",{className:e.hasBottomLink?(0,i.iv)(jt.fieldTableWithLink):(0,i.iv)(jt.fieldTable)},e.storableSchemas&&e.tagSchemas&&e.resultSchemas?l.createElement(Tt.ZP,{schemaId:null!==(n=null===(t=e.schema)||void 0===t?void 0:t.id)&&void 0!==n?n:null,schemaType:e.schemaType,isBeingCreated:null==e.schema,onFieldsChange:e.onFieldsChange,ownerUrlId:e.ownerUrlId,ownerId:e.ownerId,itemClass:ProcessSchemaFieldTableRow,fields:e.fields,storableSchemas:(0,R.NA)("StorableSchema",e.storableSchemas),tagSchemas:(0,R.NA)("TagSchema",e.tagSchemas),assaySchemas:(0,R.NA)("ResultSchema",e.resultSchemas),isDisabled:Boolean(e.isDisabled),shouldShowIsRequired:!0,shouldShowIsIntegration:!1,shouldShowIsParentLink:!1,savingState:f.SavingState.COMPLETED,schema:e.schema,dataTestAttrs:e.dataTestAttrs,submissionWarnings:e.changeWarnings,archiveWarnings:e.changeWarnings}):l.createElement(Tt.Bk,{schemaType:e.schemaType}))}const SectionNumber=({sectionNumber:e})=>l.createElement("div",{className:(0,i.iv)(jt.schemaEditorSectionNumber)},e)
function ProcessTaskSchemaEditorSection(e){return l.createElement("div",{className:(0,i.iv)(jt.schemaEditorSection)},l.createElement("div",{className:(0,i.iv)(jt.schemaEditorSectionHeader)},l.createElement(SectionNumber,{sectionNumber:e.sectionNumber}),l.createElement("div",{className:"legacy-font-proxima-14"},e.sectionTitle)),l.createElement("div",{className:(0,i.iv)(jt.schemaEditorSectionChildren,!e.isLastSection&&jt.schemaEditorSectionChildrenBorder)},e.children))}const LoadingProcessTaskSchemaEditor=()=>l.createElement(ProcessTaskSchemaEditorContainer,{subtitle:""},l.createElement(Y.Z,null))
function InnerProcessTaskSchemaEditor(e){const t=(0,_.IJ)(Yt),n=(()=>{var t,n
const a=null===(n=null===(t=e.processTaskSchema)||void 0===t?void 0:t.flowchartConfig)||void 0===n?void 0:n.currentFlowchartConfigVersion
return null!=a&&a.availableSchemas.some((e=>(0,N.CZ)(e)))})()
let a
a=t.type===_.NI.SUCCESS?{schemaId:e.schemaId,storableSchemas:[...t.data.boxSchemas,...t.data.containerSchemas,...t.data.locationSchemas,...t.data.plateSchemas],tagSchemas:t.data.tagSchemas,taskSchemas:null!=e.processTaskSchema?insertOrReplaceTaskSchema(t.data.processTaskSchemas,e.processTaskSchema):t.data.processTaskSchemas,resultSchemas:t.data.resultSchemas,statusLifecycles:t.data.processTaskStatusLifecycles,isAnyPartOfFlowchartConfigInaccessible:n}:{schemaId:e.schemaId,storableSchemas:null,tagSchemas:null,taskSchemas:null,resultSchemas:null,statusLifecycles:null,isAnyPartOfFlowchartConfigInaccessible:null}
return l.createElement(ProcessTaskSchemaEditorContent,{processTaskSchema:e.processTaskSchema,refetchProcessSchema:e.refetchProcessSchema,...a})}function NonConfigurableSchema(){return l.createElement("div",null,"This task schema is not user-configurable.")}function ProcessTaskSchemaEditor(e){return null==e.schemaId?l.createElement(ProcessTaskSchemaEditorContainer,{subtitle:null},l.createElement(InnerProcessTaskSchemaEditor,{schemaId:null,processTaskSchema:null})):l.createElement(_.ZP,{query:Wt,renderLoading:LoadingProcessTaskSchemaEditor,variables:{schemaId:e.schemaId}},((t,{refetch:n})=>(()=>{if((0,N.CZ)(t.processTaskSchema))return l.createElement(h.Z,{inaccessibleInfo:t.processTaskSchema,modelType:"processTaskSchema"})
if(!(0,L.v)(A.Nk.SCHEMA_CONFIG,t.processTaskSchema.executionType)||t.processTaskSchema.isUserConfigurationDisabled)return l.createElement(NonConfigurableSchema,null)
const a=l.createElement(InnerProcessTaskSchemaEditor,{schemaId:e.schemaId,processTaskSchema:t.processTaskSchema,refetchProcessSchema:n})
return(0,I.u)()?l.createElement(ProcessTaskSchemaEditorTabbedContainer,{subtitle:t.processTaskSchema.name,processTaskSchema:t.processTaskSchema},a,l.createElement(ProcessTaskSchemaFormsList,{schemaId:e.schemaId,processTaskSchema:t.processTaskSchema})):l.createElement(ProcessTaskSchemaEditorContainer,{subtitle:t.processTaskSchema.name,processTaskSchema:t.processTaskSchema},a)})()))}const jt=i.mM.create({schemaEditorSection:{display:"block",alignItems:"center",justifyContent:"space-between"},schemaEditorSectionHeader:{display:"flex",alignItems:"flex-start",flexDirection:"row"},schemaEditorSectionNumber:{display:"flex",alignItems:"center",textAlign:"center",fontSize:"12px",width:"20px",height:"20px",lineHeight:"20px",justifyContent:"center",backgroundColor:H.Cj,color:H.pp,border:`1px solid ${H.pp}`,borderRadius:"50%",boxShadow:`0 0 0 4px ${H.Cj}`,marginRight:"12px"},schemaEditorSectionChildren:{position:"relative",marginLeft:"10px",paddingLeft:"22px",paddingTop:"8px",marginTop:"8px",paddingBottom:"8px",marginBottom:"8px"},schemaEditorSectionChildrenBorder:{borderLeft:`1px solid ${H.tN}`},schemaErrorMessage:{position:"relative",margin:"8px 10px",padding:"8px 22px"},ownerField:{flex:"1"},fieldTable:{marginBottom:"32px"},fieldTableWithLink:{marginBottom:"18px"},outputSchemaToggle:{display:"flex",flexDirection:"row",marginBottom:"32px"},createButton:{marginLeft:"32px"},descriptionContents:{flex:.5},descriptionText:{color:H.TG,fontSize:"13px",lineHeight:"16px"},flowchartText:{display:"inline-block",marginBottom:"12px"},removeText:{color:H.Zl},taskGroupInstructionEditorContainer:{marginBottom:"24px",fontSize:"12px"}})},30564:(e,t,n)=>{n.d(t,{R:()=>isClientSchemaMapperConfigFullyDefined,n:()=>isPlaceholderTaskSchema})
function isPlaceholderTaskSchema(e){return void 0!==e.placeholderClientId}function isClientSchemaMapperConfigFullyDefined(e){return e.fromTaskSchemas.length>0&&null!=e.toTaskSchema&&null!=e.mapperConfig}},908503:(e,t,n)=>{n.d(t,{CV:()=>isTerminalStatus,GP:()=>sortTaskStatuses,Kj:()=>getNextCompletedStatus,Nu:()=>findValidOutStatuses,WX:()=>getStatusFromId,_r:()=>r})
var a=n(256605),i=n(357444)
function isTerminalStatus(e,t){return!t.transitions.some((t=>t.inStatus.id===e))}function getNextCompletedStatus(e,t){var n
const isStatusCompleted=e=>e.displayName===i.xy.COMPLETED||e.displayName===i.xy.COMPLETED_AFTER_REVIEW
if(isStatusCompleted(e))return e
const a=t.transitions.find((t=>t.inStatus.id===e.id&&isStatusCompleted(t.outStatus)))
return null!==(n=null==a?void 0:a.outStatus)&&void 0!==n?n:null}function getStatusFromId(e,t){var n
const a=t.transitions.find((t=>t.inStatus.id===e||t.outStatus.id===e))
return(null==a?void 0:a.inStatus.id)===e?a.inStatus:null!==(n=null==a?void 0:a.outStatus)&&void 0!==n?n:null}function findValidOutStatuses(e,t){return(isTerminalStatus(e.id,t)?[]:[e]).concat(...t.transitions.filter((t=>t.inStatus.id===e.id&&!t.isAutomatedTransition)).map((e=>e.outStatus)))}const r={[a.HS.PENDING]:0,[a.HS.IN_PROGRESS]:1,[a.HS.FAILED]:2,[a.HS.CANCELLED]:3,[a.HS.INVALID]:4,[a.HS.COMPLETED]:5,[a.HS.SKIPPED]:6},s={[a.HS.IN_PROGRESS]:{[i.xy.IN_PROGRESS]:0,[i.xy.COMPLETED_AFTER_REVIEW]:1}}
function sortTaskStatuses(e){return[...e].sort(((e,t)=>{var n,a,i,o
if(e.statusType!==t.statusType)return r[e.statusType]-r[t.statusType]
const l=null!==(a=null===(n=null==s?void 0:s[e.statusType])||void 0===n?void 0:n[e.displayName])&&void 0!==a?a:0,c=null!==(o=null===(i=null==s?void 0:s[e.statusType])||void 0===i?void 0:i[t.displayName])&&void 0!==o?o:0
return l!==c?l-c:e.displayName.localeCompare(t.displayName)}))}},31089:(e,t,n)=>{n.d(t,{Z:()=>ProcessTaskAssigneeSearchInput})
var a=n(989526),i=n(851422),r=n(194170),s=n(198438),o=n(220798)
function ProcessTaskAssigneeSearchInput(e){var t
const n=(null===(t=e.value)||void 0===t?void 0:t.type)===i.BaseTypedValueType.USER?{id:e.value.id,handle:e.value.userHandle}:null
return a.createElement(s.D,{onChange:t=>{e.onChange(function entityToTypedValue(e){return"UserNode"===(null==e?void 0:e.__typename)?{type:i.BaseTypedValueType.USER,id:e.id,userHandle:e.handle,avatarUrl:e.avatar_url,name:e.name}:r._j}(t[0]))},enableNewEntityInput:!0,allowEmails:!0,allowTeams:!1,allowOrganizations:!1,placeholder:"Search for user",emptyText:"No results found.",initialQuery:e.initialQuery,shouldAllowMultiple:!1,value:n?[n]:[],size:o.I.SMALL})}},462611:(e,t,n)=>{n.d(t,{Z:()=>ProcessTaskStatusSelector})
var a=n(989526),i=n(531041),r=n(232606),s=n(898766),o=n(851422),l=n(194170),c=n(908503),d=n(357444),u=n(457438)
function ProcessTaskStatusSelectorContent(e){var t,n,m
const p=null!==(t=e.lastSyncedUpstreamValue)&&void 0!==t?t:e.typedValue
let h=(null==p?void 0:p.type)===o.BaseTypedValueType.TASK_STATUS?{__typename:"ProcessTaskStatusNode",id:p.id,displayName:p.displayName,statusType:p.statusType}:p?function findStatusFromName(e,t){return i.default.flatten(t.transitions.map((e=>[e.inStatus,e.outStatus]))).find((t=>t.displayName===e))}((0,l.Gh)(p),e.statusLifecycle):e.statusLifecycle.initialStatus
null==h&&(h=e.statusLifecycle.initialStatus);(0,r.Gp)(null!=h,"Task status should not be null")
const E=(0,a.useMemo)((()=>(0,c.GP)((0,c.Nu)(h,e.statusLifecycle))),[e.statusLifecycle,e.lastSyncedUpstreamValue]),S=E.map((e=>({node:a.createElement(u.Z,{statusType:e.statusType,displayName:e.displayName,showTerminalStatusTooltip:!1}),onUpdateKey:e.id}))),T=(null===(n=e.typedValue)||void 0===n?void 0:n.type)===o.BaseTypedValueType.TASK_STATUS&&(0,d.ES)(null===(m=e.typedValue)||void 0===m?void 0:m.statusType)?e.typedValue:h,g=a.createElement(u.Z,{statusType:T.statusType,displayName:T.displayName,showTerminalStatusTooltip:!e.locked&&(0,c.CV)(h.id,e.statusLifecycle)})
return e.locked||0===S.length?g:a.createElement("div",{className:"u-position-relative"},a.createElement(s.Z,{locked:!1,isSelected:!0,options:S,onUpdate:t=>{const n=E.find((e=>e.id===t));(0,r.Gp)(null!=n,`Invalid status selected: ${t}`)
e.onUpdate({type:o.BaseTypedValueType.TASK_STATUS,id:n.id,displayName:n.displayName,statusType:n.statusType})},staticDisplay:g,fullWidth:!0,lightHoverBackground:!0}))}function ProcessTaskStatusSelector(e){return null==e.statusLifecycle?null:a.createElement(ProcessTaskStatusSelectorContent,{...e,statusLifecycle:e.statusLifecycle})}},821186:(e,t,n)=>{n.d(t,{S:()=>createEmptyTaskTableFromSchemaWithEmptyRows,Z:()=>createEmptyTaskTableFromSchema})
var a=n(531041),i=n(639812),r=n(655964)
function createEmptyTaskTableFromSchemaWithEmptyRows({numRows:e=0,...t}){const n=r.ZP.getAdapter(),i=createEmptyTaskTableFromSchema(t)
return{...i,rows:a.default.range(0,e).map((e=>n.getBlankRow(i.metadata,e,i.columns)))}}function createEmptyTaskTableFromSchema({name:e,taskSchema:t,tableLocation:n,sourceColumnType:a,locked:r,selectorsById:s,isInFlowchartNode:o,defaultValuesByColumnType:l}){return(0,i.Z)({process:{id:t.id,name:t.name,processTaskSchema:{...t,name:e},tasks:[]},tableLocation:n,selectorsById:s,sourceColumnType:a,locked:r,isInFlowchartNode:o,defaultValuesByColumnType:l})}},32297:(e,t,n)=>{n.d(t,{BG:()=>createOutputTableWithTask,Xk:()=>createOutputTableWithOptionalProcess,ZP:()=>createOutputTable,_i:()=>createOutputTableWithEmptyRows})
var a=n(531041),i=n(1456),r=n(453580),s=n(851422),o=n(357444),l=n(501954),c=n(863282)
function createOutputTableWithEmptyRows(e){const{outputSchema:t,metadata:n,selectorsById:i}=e,r=c.Z.getAdapter(),s={name:t.name,schemas:[{...t,columnGroup:null}],entryId:null,metadata:{...n},selectorsById:i},o=r.createTable(s)
return{...o,cid:`${t.id}-outputs`,rows:null!=e.sourceTasks?e.sourceTasks.map(((e,t)=>{const n=r.getBlankRow({},t,o.columns)
return r.setTaskCell(o.columns,n,(0,l.s0)(e))})):a.default.range(0,e.numRows).map((()=>r.getBlankRow({},0,o.columns)))}}function fillOutputTableWithOutputs({outputs:e,table:t}){const n=(0,i.getStructuredTableAdapters)()[r.sl.PROCESS_OUTPUT]
0===e.length?t.rows=[{...n.getBlankRow({},0,t.columns),isFinalized:!1}]:t.rows=e.map(((e,a)=>{var i
return{...n.getBlankRow({},a,t.columns),...c.Z.makeRowFromOutput(e,t.columns,t.metadata.sourceColumnType),isFinalized:null===(i=e.isPersisted)||void 0===i||i,metadata:n.getBlankRowMetadata(t.metadata),lastSyncedUpstreamValues:c.Z.optimisticallyMakeLastSyncedUpstreamValuesFromOutput(e,t.columns)}}))
return t}function createOutputTableWithTask({processTaskSchema:e,outputs:t,taskId:n,metadata:a,selectorsById:l,locked:c}){const d=(0,i.getStructuredTableAdapters)()[r.sl.PROCESS_OUTPUT],u={name:e.name,schemas:[{...e.outputSchema,columnGroup:null}],entryId:null,metadata:{...a,taskId:n},selectorsById:l},m=d.createTable(u)
a.tableLocation===o.$o.TASK_DETAILS_OUTPUTS_TAB&&(m.columns=m.columns.filter((e=>e.columnType!==s.TableColumnType.PROCESS_TASK)))
c&&(m.columns=m.columns.map((e=>({...e,isReadOnly:!0}))))
return{...fillOutputTableWithOutputs({outputs:t,table:m}),cid:`${n}-outputs`}}function createOutputTableWithOptionalProcess({processTaskSchema:e,outputs:t,processId:n,metadata:a,selectorsById:s,locked:o}){const l=(0,i.getStructuredTableAdapters)()[r.sl.PROCESS_OUTPUT],c={name:e.name,schemas:[{...e.outputSchema,columnGroup:null}],entryId:null,metadata:{...a,processId:n},selectorsById:s},d=l.createTable(c)
o&&(d.columns=d.columns.map((e=>({...e,isReadOnly:!0}))))
return{...fillOutputTableWithOutputs({outputs:t,table:d}),cid:`${null!=n?n:"no-process"}-outputs`}}function createOutputTable({process:e,metadata:t,selectorsById:n,locked:a}){return createOutputTableWithOptionalProcess({processId:e.id,outputs:e.outputs,processTaskSchema:e.processTaskSchema,metadata:t,selectorsById:n,locked:a})}},733727:(e,t,n)=>{n.d(t,{R3:()=>outputTableToCreateDirectExecutionOutputs,ZH:()=>outputTableToOutputsForCreateOrUpdate,n4:()=>outputTableToOutputsForCreate})
var a=n(232606),i=n(861253),r=n(970507),s=n(851422),o=n(194170),l=n(357444),c=n(251808)
const evaluatedTableAssertion=(e,t,n,i)=>{(0,r.Z)(e,{ignoreLoadingErrors:!0})&&(0,a.Gp)(!1,"Attempting to convert a output table with errors BNCH-40814",{sourceType:n,debugInfo:i,errors:e.flat().filter((e=>null!=e.error)),schema:t.schemas[0].id})}
function getOutputIdFromRow(e){const t=e.filter((e=>e.value.type===s.BaseTypedValueType.PROCESS_OUTPUT));(0,a.Gp)(1===t.length||0===t.length,"Expected row to only have one or zero cells with a value of PROCESS_OUTPUT.",{row:e})
return 0===t.length?null:t[0].value.id}function getTaskIdFromRow(e){const t=e.map((e=>(0,o.FJ)({text:(0,o.Gh)(e.value),typedValue:e.value}))).filter((e=>null!=e));(0,a.Gp)(1===t.length||0===t.length,"Expected row to only have one or zero cells with a value of PROCESS_TASK.",{row:e})
return 0===t.length?null:t[0]}function getTagsToUpdateForRow(e,t,n){const r=t.reduce(((t,r,l)=>{r.columnType===s.TableColumnType.TAG_VALUE&&t.push(function convertTagColumnToTag(e,t,n){(0,a.hu)(e.columnType===s.TableColumnType.TAG_VALUE,"Expected tag value column")
const r=(0,i.Z)({structuredTableColumn:e,schemas:t}),l=(0,o.Lz)(n.value,r.schemaField)
return null==l?(0,c.bt)(r.schemaField):l}(r,n,e[l]))
return t}),[])
return(0,c.UR)(r)}function outputTableToOutputsForCreate({table:e,evaluatedTable:t,creationOriginIds:n,sourceType:i,schemaMapperId:r,fromItemIds:o,taskIds:c,debugInfo:d}){evaluatedTableAssertion(t,e,i,d)
return t.reduce(((t,d,u)=>{if(null!=getOutputIdFromRow(d)&&!function hasSourceColumn(e){return e.some((({columnType:e,name:t})=>t===l.iR&&(e===s.TableColumnType.PROCESS_OUTPUT||e===s.TableColumnType.PROCESS_TASK)))}(e.columns))return t
const m=null!=c?c[u]:getTaskIdFromRow(d);(0,a.hu)(null!=m,"Expected task ID to be present for converting table to create outputs.")
const p=getTagsToUpdateForRow(d,e.columns,e.schemas)
t.push({processTaskId:m,fields:p,creationOriginId:n[u],sourceType:i,...null!=o?{fromItemId:o[u]}:{},schemaMapperId:null!=r?r:null})
return t}),[])}function outputTableToOutputsForCreateOrUpdate({table:e,evaluatedTable:t,creationOriginIds:n,sourceType:i,schemaMapperId:r,fromItemIds:s,taskIds:o,debugInfo:l}){evaluatedTableAssertion(t,e,i,l)
return t.reduce(((t,l,c)=>{const d=getOutputIdFromRow(l)
if(null==d){const d=null!=o?o[c]:getTaskIdFromRow(l);(0,a.hu)(null!=d,"Expected task ID to be present for converting table to create outputs.")
const u=getTagsToUpdateForRow(l,e.columns,e.schemas)
t.push({processTaskId:d,fields:u,creationOriginId:n[c],sourceType:i,...null!=s?{fromItemId:s[c]}:{},schemaMapperId:null!=r?r:null})}else{const n=getTagsToUpdateForRow(l,e.columns,e.schemas)
t.push({id:d,fields:n,sourceType:i})}return t}),[])}function outputTableToCreateDirectExecutionOutputs({table:e,evaluatedTable:t,sourceType:n,debugInfo:i}){evaluatedTableAssertion(t,e,n,i)
return t.reduce(((t,i)=>{if(null!=getOutputIdFromRow(i))return t
const r=getTaskIdFromRow(i);(0,a.hu)(null!=r,"Expected task ID to be present for converting table to create direct execution outputs.")
const s=getTagsToUpdateForRow(i,e.columns,e.schemas)
t.push({processTaskId:r,fields:s,sourceType:n})
return t}),[])}},864954:(e,t,n)=>{n.d(t,{Cf:()=>presenceCleanup,D7:()=>a,M9:()=>presenceLeave,Zv:()=>presenceMultiEnter,vr:()=>presenceEnter})
var a
!function(e){e.PRESENCE_ENTER="PRESENCE_ENTER"
e.PRESENCE_LEAVE="PRESENCE_LEAVE"
e.PRESENCE_CLEANUP="PRESENCE_CLEANUP"
e.PRESENCE_MULTI_ENTER="PRESENCE_MULTI_ENTER"}(a||(a={}))
function presenceEnter(e,t,n){return{type:a.PRESENCE_ENTER,resourceId:e,userId:t,ablyConnectionId:n}}function presenceLeave(e,t,n){return{type:a.PRESENCE_LEAVE,resourceId:e,userId:t,ablyConnectionId:n}}function presenceCleanup(e){return{type:a.PRESENCE_CLEANUP,resourceId:e}}function presenceMultiEnter(e,t){return{type:a.PRESENCE_MULTI_ENTER,resourceId:e,members:t}}},980886:(e,t,n)=>{n.d(t,{Lr:()=>RealtimeError,Yu:()=>a,iZ:()=>i})
var a,i,r=n(525098)
!function(e){e.PRESENCE="presence"
e.SUBSCRIBE="subscribe"}(a||(a={}))
class RealtimeError extends r.Z{constructor(e,t){super(e)
this.statusCode=t}}!function(e){e.ENTER="enter"
e.LEAVE="leave"
e.PRESENT="present"}(i||(i={}))},840784:(e,t,n)=>{n.d(t,{Z:()=>getRealtimeChannel})
var a=n(232606),i=n(120470),r=n.n(i),s=n(974913),o=n(771398),l=n(980886)
let c=[],d=[]
const u=new Map
let m=null
const p={authCallback,closeOnUnload:!1}
function getAbly(){null==m&&(m=new(r().Realtime)(p))
return m}async function authCallback(e,t){!function gc(){u.forEach(((e,t)=>{if(Date.now()-e.getTime()>=1e4){u.delete(t)
if(!function isChannelCurrentlyAuthed(e){if(d.filter((t=>t.channelName===e)).length>0)return!0
if([...u.keys()].filter((t=>t.channelName===e)).length>0)return!0
return!1}(t.channelName)){const e=getAbly().channels.get(t.channelName)
"failed"!==e.state&&e.detach((e=>{(0,a.Gp)(!e,"error detaching from channel")}))}}}))}()
await o.s0({url:"/1/api/realtime/auth-token",data:{channels:getCapabilitiesRequest()}}).catch((e=>{var t
throw new l.Lr(null!==(t=s.ZP.getFriendlyError(e))&&void 0!==t?t:"unknown",e.status)})).then((e=>{t(null,e.token)})).catch((e=>{if(!e){(0,a.Gp)(null!=e,"expected err to be non-null")
e=new l.Lr("An unexpected error occurred.")}t(e,null)}))}function mapCapabilityRequestsToAuthRequest(e,t){t.forEach((t=>{e[t.channelName]||(e[t.channelName]=[])
t.capabilities.forEach((n=>{e[t.channelName].indexOf(n)<0&&e[t.channelName].push(n)}))}))}function getCapabilitiesRequest(){const e={}
mapCapabilityRequestsToAuthRequest(e,c)
mapCapabilityRequestsToAuthRequest(e,d)
mapCapabilityRequestsToAuthRequest(e,[...u.keys()])
return e}async function getAblyChannel(e){return await new Promise(((t,n)=>{if(function isCapabilityAuthNeeded(e){const t=new Set
e.capabilities.forEach((e=>t.add(e)))
d.forEach((n=>{n.channelName===e.channelName&&n.capabilities.forEach((e=>t.delete(e)))}))
u.forEach(((n,a)=>{a.channelName===e.channelName&&a.capabilities.forEach((e=>t.delete(e)))}))
return t.size>0}(e)){c.push(e)
getAbly().auth.authorize(((a,i)=>{c=c.filter((t=>t!==e))
if(null!=a){n(ablyErrorToRealtimeError(a))
return}d.push(e)
const r=getAbly().channels.get(e.channelName)
t(r)}))}else{d.push(e)
const n=getAbly().channels.get(e.channelName)
t(n)}}))}function ablyErrorToRealtimeError(e){return new l.Lr(e.message,e.statusCode)}async function getRealtimeChannel(e,t){const n={channelName:e,capabilities:t},i=await getAblyChannel(n)
let r=!1
const s=[],unsubscribeAllPresence=()=>{s.forEach((e=>{i.presence.unsubscribe(e)}))
for(;s.length>0;)s.pop()},o=[],unsubscribeAllChannelSubscriptions=()=>{o.forEach((e=>{i.unsubscribe(e)}))
for(;o.length>0;)o.pop()}
return Promise.resolve({presence:{enter:e=>{(0,a.hu)(!r,"cannot access channel that has been stopped")
let t=null
i.presence.enter((n=>{n&&(t=ablyErrorToRealtimeError(n))
e&&e(t)}))},leave:e=>{(0,a.hu)(!r,"cannot access channel that has been stopped")
let t=null
i.presence.leave((n=>{n&&(t=ablyErrorToRealtimeError(n))
e&&e(t)}))},subscribe(e,t){(0,a.hu)(!r,"cannot access channel that has been stopped")
let n=null
const ablyHandler=t=>{e({type:t.action,userId:t.clientId,connectionId:t.connectionId})}
s.push(ablyHandler)
i.presence.subscribe([l.iZ.ENTER,l.iZ.LEAVE,l.iZ.PRESENT],ablyHandler,(e=>{e&&(n=ablyErrorToRealtimeError(e))
t&&t(n)}))},unsubscribe(){(0,a.hu)(!r,"cannot access channel that has been stopped")
unsubscribeAllPresence()},get(e){i.presence.get(((t,n)=>{t?e(ablyErrorToRealtimeError(t),[]):e(null,n.map((e=>({type:l.iZ.PRESENT,userId:e.clientId,connectionId:e.connectionId}))))}))}},subscribe:(e,t)=>{(0,a.hu)(!r,"cannot access channel that has been stopped")
let n=null
const ablyHandler=t=>{e({name:t.name,data:t.data})}
o.push(ablyHandler)
i.subscribe(ablyHandler,(e=>{e&&(n=ablyErrorToRealtimeError(e))
t&&t(n)}))},unsubscribe:()=>{(0,a.hu)(!r,"cannot access channel that has been stopped")
unsubscribeAllChannelSubscriptions()},stop:()=>{r=!0
unsubscribeAllPresence()
unsubscribeAllChannelSubscriptions()
!function returnAblyChannel(e){d=d.filter((t=>t!==e))
u.set(e,new Date)}(n)}})}},968953:(e,t,n)=>{n.d(t,{b:()=>getRealtimeChannelNameForApiId,d:()=>isCurrentClient})
var a=n(348920),i=n(246476)
function isCurrentClient(e){return e===i.Rl}function getRealtimeChannelNameForApiId(e){return`resource:${function getNormalizedGlobalTenantIdentifier(){return a.ZP.TENANT_ID.replace(":","-")}()}:${e}`}},380490:(e,t,n)=>{n.d(t,{QH:()=>storablesFetchCompleted,VQ:()=>a,WN:()=>registrationRecordListsFetchCompleted,Y_:()=>collaboratorsFetchCompleted,gg:()=>batchesFetchCompleted,js:()=>workflowSummariesFetchCompleted,lE:()=>entriesFetchCompleted,wb:()=>filesFetchCompleted,x3:()=>validationExtrasFetchCompleted})
var a
!function(e){e.ENTRIES_FETCH_COMPLETED="ENTRIES_FETCH_COMPLETED"
e.FILES_FETCH_COMPLETED="FILES_FETCH_COMPLETED"
e.VALIDATION_EXTRAS_FETCH_COMPLETED="VALIDATION_EXTRAS_FETCH_COMPLETED"
e.REGISTRATION_RECORD_LISTS_FETCH_COMPLETED="REGISTRATION_RECORD_LISTS_FETCH_COMPLETED"
e.WORKFLOW_WORKFLOW_SUMMARIES_FETCH_COMPLETED="WORKFLOW_WORKFLOW_SUMMARIES_FETCH_COMPLETED"
e.COLLABORATORS_FETCH_COMPLETED="COLLABORATORS_FETCH_COMPLETED"
e.STORABLES_FETCH_COMPLETED="STORABLES_FETCH_COMPLETED"
e.BATCHES_FETCH_COMPLETED="BATCHES_FETCH_COMPLETED"}(a||(a={}))
function entriesFetchCompleted(e,t=[]){return{type:a.ENTRIES_FETCH_COMPLETED,entrySummariesById:e,inaccessibleEntryIds:t}}function filesFetchCompleted(e,t=[]){return{type:a.FILES_FETCH_COMPLETED,fileSummariesById:e,inaccessibleFileIds:t}}function validationExtrasFetchCompleted(e,t=[]){return{type:a.VALIDATION_EXTRAS_FETCH_COMPLETED,validationExtrasByBioentityId:e,inaccessibleFileIds:t}}function registrationRecordListsFetchCompleted(e){return{type:a.REGISTRATION_RECORD_LISTS_FETCH_COMPLETED,registrationRecordListsById:e}}function workflowSummariesFetchCompleted(e){return{type:a.WORKFLOW_WORKFLOW_SUMMARIES_FETCH_COMPLETED,workflowSummaries:Object.values(e)}}function collaboratorsFetchCompleted(e){return{type:a.COLLABORATORS_FETCH_COMPLETED,collaboratorsByOwnableId:e}}function storablesFetchCompleted(e=[]){return{type:a.STORABLES_FETCH_COMPLETED,inaccessibleStorableIds:e}}function batchesFetchCompleted(e=[]){return{type:a.BATCHES_FETCH_COMPLETED,inaccessibleBatchIds:e}}},767755:(e,t,n)=>{n.d(t,{KV:()=>autofillTranscriptions,Pp:()=>bulkAutofillTranslations,UU:()=>bulkAutofillTranscriptions,ip:()=>autoFillPartFields,sZ:()=>autofillTranslations,vM:()=>bulkAutoFillPartFields})
var a=n(64558),i=n(675649),r=n(787004),s=n(699418),o=n(947730),l=n(380490),c=n(166459),d=n(543305),u=n(532726),m=n(813757)
async function updateSequences(e,t){o.Z.dispatch({actionType:r.JFe,tagData:Object.entries(e).map((([e,t])=>({id:e,tags:t.sequenceSummary.tags})))});(0,c.getStore)().dispatch((0,l.wb)((0,a.Xc)(e,(e=>e.sequenceSummary))))
await s.ZP.get().updateSequenceVersions(t,{showHistoryPanel:!1})}function getAutoFillActionFromName(e){return{part:d.HW,transcription:d.KV,translation:d.sZ}[e]}async function autoFillBioentityLinks({sequenceId:e,autoFillFeatureName:t,customTaskHeading:n,customSuccessMessage:a,analyticsFn:r}){const s=(0,i._6)(2,t),o=u.zy({heading:n||`Auto-filling ${s}`,progress:m.u9})
try{const n=await getAutoFillActionFromName(t)([e])
await updateSequences(n,[e])
let i
i=n[e].didModifySequence?a||`Successfully ran auto-fill ${s}.`:`No new ${s} were found.`
const{warningMessages:l}=n[e]
l&&l.length>0&&(i+=`\n\n**Warnings:**\n\n${l.join("\n\n")}`)
const c=n[e].autofillCount
null==r||r({sequenceId:e,autofillCount:c,autofillErrors:l})
u.Je(o,{progress:m.qJ,heading:i})}catch(e){u.QH(o)
throw e}}async function bulkAutoFillBioentityLinks({sequenceIds:e,autoFillFeatureName:t,customTaskHeading:n,customSuccessMessage:a,analyticsFn:r}){const s=(0,i._6)(2,t),o=e.length,l=u.zy({heading:n||`Auto-filling ${s} on ${o} ${(0,i._6)(o,"DNA sequence")}`,progress:m.u9})
try{const n=await getAutoFillActionFromName(t)(e)
await updateSequences(n,e)
u.Je(l,{progress:m.qJ,heading:a||`Successfully ran auto-fill ${s} on ${o} ${(0,i._6)(o,"sequence")}.`})
for(const[e,t]of Object.entries(n))null==r||r({sequenceId:e,autofillCount:t.autofillCount,autofillErrors:t.warningMessages})}catch(e){u.QH(l)
throw e}}async function autoFillPartFields(e){await autoFillBioentityLinks({sequenceId:e,autoFillFeatureName:"part",customTaskHeading:"Auto-filling part fields",customSuccessMessage:"Successfully replaced sequence with parts."})}async function bulkAutoFillPartFields(e){const t=e.length,n=`Auto-filling part fields on ${t} ${(0,i._6)(t,"DNA sequence")}`,a=`Successfully replaced ${t} ${(0,i._6)(t,"sequence")} with parts.`
await bulkAutoFillBioentityLinks({sequenceIds:e,autoFillFeatureName:"part",customTaskHeading:n,customSuccessMessage:a})}async function autofillTranslations(e){await autoFillBioentityLinks({sequenceId:e,autoFillFeatureName:"translation"})}async function bulkAutofillTranslations(e){await bulkAutoFillBioentityLinks({sequenceIds:e,autoFillFeatureName:"translation"})}async function autofillTranscriptions(e,t){await autoFillBioentityLinks({sequenceId:e,autoFillFeatureName:"transcription",analyticsFn:t})}async function bulkAutofillTranscriptions(e,t){await bulkAutoFillBioentityLinks({sequenceIds:e,autoFillFeatureName:"transcription",analyticsFn:t})}},2272:(e,t,n)=>{n.d(t,{ET:()=>unregister,Ue:()=>create,ih:()=>deleteRegistry,uc:()=>bulkArchive})
var a=n(771398)
function unregister(e,t){return a.ty({url:"/1/api/registries/actions/remove-files",data:{fileIds:e,folderId:t}})}function create(e){return a.ty({url:"/1/api/registries/",data:{organizationId:e,shouldCreateDefaultSchemas:!0}})}function deleteRegistry(e){return a.$v({url:`/1/api/registries/${e}`})}function bulkArchive(e,t){return a.ty({url:"/1/api/registries:bulk-archive",data:{ids:e,purpose:t}})}},216101:(e,t,n)=>{n.r(t)
n.d(t,{USE_IS_REGISTRY_WRITABLE_QUERY:()=>f,countDuplicateWarnings:()=>countDuplicateWarnings,formatSchemaNameAndType:()=>formatSchemaNameAndType,generateFolderValue:()=>generateFolderValue,getAliasComponents:()=>getAliasComponents,getAliasTextExcludingFilename:()=>getAliasTextExcludingFilename,getBoxSchemaSettingsUrl:()=>getBoxSchemaSettingsUrl,getCollectionPreference:()=>getCollectionPreference,getCreateBoxSchemaUrl:()=>getCreateBoxSchemaUrl,getCreateGridSchemaUrl:()=>getCreateGridSchemaUrl,getCreateLabelTemplateUrl:()=>getCreateLabelTemplateUrl,getCreateLocationSchemaUrl:()=>getCreateLocationSchemaUrl,getCreatePlateSchemaUrl:()=>getCreatePlateSchemaUrl,getCreatePrinterUrl:()=>getCreatePrinterUrl,getCreateSchemaFieldSelectorUrl:()=>getCreateSchemaFieldSelectorUrl,getCreateTagSchemaUrl:()=>getCreateTagSchemaUrl,getDefaultCollectionId:()=>getDefaultCollectionId,getErrorData:()=>getErrorData,getGridSchemaSettingsUrl:()=>getGridSchemaSettingsUrl,getLabelTemplateSettingsUrl:()=>getLabelTemplateSettingsUrl,getLocationSchemaSettingsUrl:()=>getLocationSchemaSettingsUrl,getNonRegistryIdentifierAliasInfos:()=>getNonRegistryIdentifierAliasInfos,getPlateSchemaSettingsUrl:()=>getPlateSchemaSettingsUrl,getPrimaryRegistryIdentifier:()=>getPrimaryRegistryIdentifier,getPrimaryRegistryIdentifierGraphQL:()=>getPrimaryRegistryIdentifierGraphQL,getPrinterSettingsUrl:()=>getPrinterSettingsUrl,getRegistryBoxSchemasUrl:()=>getRegistryBoxSchemasUrl,getRegistryContainerSchemasUrl:()=>getRegistryContainerSchemasUrl,getRegistryGeneralSettingsUrl:()=>getRegistryGeneralSettingsUrl,getRegistryGridSchemasUrl:()=>getRegistryGridSchemasUrl,getRegistryIdentifier:()=>getRegistryIdentifier,getRegistryLabelTemplatesUrl:()=>getRegistryLabelTemplatesUrl,getRegistryLocationSchemasUrl:()=>getRegistryLocationSchemasUrl,getRegistryPlateSchemasUrl:()=>getRegistryPlateSchemasUrl,getRegistryPrintersUrl:()=>getRegistryPrintersUrl,getRegistrySchemasSettingsUrl:()=>getRegistrySchemasSettingsUrl,getRegistrySelectorsSettingsUrl:()=>getRegistrySelectorsSettingsUrl,getRegistrySettingsUrl:()=>getRegistrySettingsUrl,getSchemaFieldSelectorSettingsUrl:()=>getSchemaFieldSelectorSettingsUrl,getStorableSchemaSettingsUrl:()=>getStorableSchemaSettingsUrl,getTagSchemaSettingsUrl:()=>getTagSchemaSettingsUrl,getWarningCodesFromValidationResponse:()=>getWarningCodesFromValidationResponse,hasRegistrySupport:()=>hasRegistrySupport,hasSettingsAccess:()=>hasSettingsAccess,isRegistered:()=>isRegistered,isRegistry:()=>isRegistry,isRegistryFolder:()=>isRegistryFolder,isSavingFinished:()=>isSavingFinished,parseFolderValue:()=>parseFolderValue,sanitizeFields:()=>sanitizeFields,setCollectionPreference:()=>setCollectionPreference,useIsRegistryWritableQuery:()=>useIsRegistryWritableQuery})
var a=n(769784),i=n(989526),r=n(531041),s=n(232606),o=n(459830),l=n(537076),c=n(572928),d=n(751512),u=n(91092),m=n(965131),p=n(697134),h=n(974913),E=n(432128),S=n(788836),T=n(263137),g=n(379346)
function _isBioentityAliasInfoOwnedBy(e,t){return Boolean(e.registryCollectionOwner&&e.registryCollectionOwner.handle===t)}function parseFolderValue(e){let t,n
if(!e)return{folderId:null,registryId:null,tagSchemaId:null};(0,s.hu)("string"==typeof e,"folderId must be a string",{folderId:e})
if(e.indexOf(",")>-1){[e,t,n]=e.split(",")
return{folderId:e,registryId:t,tagSchemaId:n}}return{folderId:e,registryId:null,tagSchemaId:null}}function generateFolderValue(e,t,n){return`${e},${t},${n}`}function hasRegistrySupport(e){return l.isRegistrySupportedType(g.ZP.apiIdToType(e))}function getRegistrySettingsUrl(e,t){return getRegistrySchemasSettingsUrl(e,t)}function getRegistryGeneralSettingsUrl(e,t){return`/${e}/registries/${t}/general/`}function getRegistrySchemasSettingsUrl(e,t){return`/${e}/registries/${t}/tag-schemas/`}function getRegistryContainerSchemasUrl(e,t){return`/${e}/registries/${t}/container-schemas/`}function getRegistryBoxSchemasUrl(e,t){return`/${e}/registries/${t}/box-schemas/`}function getCreateBoxSchemaUrl(e,t){return`${getRegistryBoxSchemasUrl(e,t)}create`}function getBoxSchemaSettingsUrl(e,t,n){return`${getRegistryBoxSchemasUrl(e,t)}${n}`}function getRegistryPlateSchemasUrl(e,t){return`/${e}/registries/${t}/plate-schemas/`}function getCreatePlateSchemaUrl(e,t){return`${getRegistryPlateSchemasUrl(e,t)}create`}function getPlateSchemaSettingsUrl(e,t,n){return`${getRegistryPlateSchemasUrl(e,t)}${n}`}function getRegistryGridSchemasUrl(e,t,n){if(n===o.BOX_SCHEMA)return getRegistryBoxSchemasUrl(e,t);(0,s.hu)(n===o.PLATE_SCHEMA,"Invalid grid schema class")
return getRegistryPlateSchemasUrl(e,t)}function getCreateGridSchemaUrl(e,t,n){if(n===o.BOX_SCHEMA)return getCreateBoxSchemaUrl(e,t);(0,s.hu)(n===o.PLATE_SCHEMA,"Invalid grid schema class")
return getCreatePlateSchemaUrl(e,t)}function getGridSchemaSettingsUrl(e,t,n,a){if(a===o.BOX_SCHEMA)return getBoxSchemaSettingsUrl(e,t,n);(0,s.hu)(a===o.PLATE_SCHEMA,"Invalid grid schema class")
return getPlateSchemaSettingsUrl(e,t,n)}function getRegistryLocationSchemasUrl(e,t){return`/${e}/registries/${t}/location-schemas/`}function getCreateLocationSchemaUrl(e,t){return`${getRegistryLocationSchemasUrl(e,t)}create`}function getLocationSchemaSettingsUrl(e,t,n){return`${getRegistryLocationSchemasUrl(e,t)}${n}`}function getStorableSchemaSettingsUrl(e,t,n){if(g.ZP.isBoxSchema(n))return getBoxSchemaSettingsUrl(e,t,n)
if(g.ZP.isContainerSchema(n))return getRegistryContainerSchemasUrl(e,t)
if(g.ZP.isLocationSchema(n))return getLocationSchemaSettingsUrl(e,t,n);(0,s.hu)(g.ZP.isPlateSchema(n),`Unexpected storable schema id ${n}`)
return getPlateSchemaSettingsUrl(e,t,n)}function getRegistryLabelTemplatesUrl(e,t){return`/${e}/registries/${t}/label-templates/`}function getCreateLabelTemplateUrl(e,t){return`${getRegistryLabelTemplatesUrl(e,t)}create`}function getLabelTemplateSettingsUrl(e,t,n){return`${getRegistryLabelTemplatesUrl(e,t)}${n}`}function getRegistryPrintersUrl(e,t){return`/${e}/registries/${t}/printers/`}function getCreatePrinterUrl(e,t){return`${getRegistryPrintersUrl(e,t)}create`}function getPrinterSettingsUrl(e,t,n){return`${getRegistryPrintersUrl(e,t)}${n}`}function getTagSchemaSettingsUrl(e,t,n){return`${getRegistrySchemasSettingsUrl(e,t)}${n}`}function getCreateTagSchemaUrl(e,t){return`${getRegistrySchemasSettingsUrl(e,t)}create`}function getRegistrySelectorsSettingsUrl(e,t){return`/${e}/registries/${t}/dropdowns/`}function getSchemaFieldSelectorSettingsUrl(e,t,n){return`/${e}/registries/${t}/dropdowns/${n}`}function getCreateSchemaFieldSelectorUrl(e,t){return`/${e}/registries/${t}/dropdowns/create`}function getWarningCodesFromValidationResponse(e){const t={}
for(const n of Object.keys(e))t[n]=e[n].warningCode
return t}function countDuplicateWarnings(e){return Object.values(e).filter((e=>e.includes("DUPLICATE_ERROR"))).length}function getRegistryIdentifier(e,t){const n=r.default.find(e,(e=>(null!=e.registryCollectionOwner?e.registryCollectionOwner.id:void 0)===t))
return n?n.alias:null}function getNonRegistryIdentifierAliasInfos(e){return e.bioentityAliasInfos.filter((({registryCollectionOwner:e,alias:t})=>null==e))}function getPrimaryRegistryIdentifier(e){const t=function(e){return e.bioentityAliasInfos.filter((e=>null!=e.registryCollectionOwner))}(e)
if(0===t.length)return null;(0,s.Gp)(isRegistryFolder(e.folder),`Expected bioentity with registry identifiers to be registered. ${e.id} has registry identifiers ${JSON.stringify(t.map((e=>{var t
return`${e.alias} (${null===(t=e.registryCollectionOwner)||void 0===t?void 0:t.handle})`})))} but folder ${e.folder.api_identifier} (${e.folder.name}) is not a registry folder.`)
const n=getRegistryIdentifier(t,e.folder.source.s_owner.id)
if(n)return n
const a=S.Z.currentUser()
if(a){return getRegistryIdentifier(t,a.id)}return null}function getPrimaryRegistryIdentifierGraphQL(e){return getPrimaryRegistryIdentifier((0,m.tY)("BioentitySummary",e))}function getAliasComponents(e,t,n){let a
const r=[]
null!=t&&r.push(i.createElement("span",{key:`name-${t}`,className:"sidepanel-primaryLabel",...(0,T.Z)({component:"Sidepanel",element:"item",key:"primaryLabel"})},`${t} `))
if(null!=n){a=getRegistryIdentifier(e,n)
null!=a&&r.push(i.createElement("span",{key:`registryIdentifier-${a}`,className:"sidepanel-secondaryLabel"},`${a} `))}return r.concat(e.filter((e=>e.alias!==a&&e.alias!==t)).map((e=>i.createElement("span",{key:e.alias,className:"sidepanel-tertiaryLabel"},`${e.alias} `))))}const getAliasTextExcludingFilename=(e,t,n,a)=>{const i=function _sortAliases(e,t,n){return r.default.sortBy(e,(e=>_isBioentityAliasInfoOwnedBy(e,n)?0:_isBioentityAliasInfoOwnedBy(e,t)?1:2))}(e,n,a).map((e=>e.alias))
return r.default.without(i,t).join(" ")},isRegistry=e=>e.sourceType===c.REGISTRY_TYPE,isRegistryFolder=e=>Boolean(e.source&&isRegistry(e.source)),isRegistered=e=>{const t=e.folder.source||e.folder.sourceJson
return Boolean(t)&&isRegistry(t)},getCollectionPreference=()=>E.Z.get(l.RegistryPreferences.DEFAULT_COLLECTION),setCollectionPreference=e=>{E.Z.set(l.RegistryPreferences.DEFAULT_COLLECTION,e)}
function getDefaultCollectionId(e){const t=e.s_owner.id
if(!S.Z.currentUser())return t
const n=S.Z.currentUser().id
if(e.disablePersonalCollections)return t
const a=getCollectionPreference()
if(!a)return n
switch(a){case l.DEFAULT_MY_COLLECTION:return n
case l.DEFAULT_ORG_COLLECTION:return t
default:throw new Error("Invalid default collection preference")}}function getErrorData(e,t){switch(t){case l.LABELING_STRATEGIES.NEW_IDS:return e.existingNameErrors
case l.LABELING_STRATEGIES.IDS_FROM_NAMES:return e.convertedNameErrors
case l.LABELING_STRATEGIES.DELETE_NAMES:return e.deletedNameErrors
case l.LABELING_STRATEGIES.SET_FROM_NAME_PARTS:return e.setNameFromPartsErrors
case l.LABELING_STRATEGIES.REPLACE_NAMES_FROM_PARTS:return e.replaceNamesFromPartsErrors
case l.LABELING_STRATEGIES.KEEP_NAMES:return e.keepNameErrors
case l.LABELING_STRATEGIES.REPLACE_ID_AND_NAME_FROM_PARTS:return e.replaceIdAndNameFromPartsErrors
case l.LABELING_STRATEGIES.CONVERT_IDS:return{errors:[],warnings:[]}
default:throw new Error(`Invalid labelingStrategy ${t}`)}}function sanitizeFields(e){const t=r.default.filter(e,(e=>e.name.length>0))
return r.default.map(t,(e=>r.default.omit(e,"cid")))}function isSavingFinished(e){return[l.SAVING_STATES.SUCCESS,l.SAVING_STATES.FAILURE,l.SAVING_STATES.CREATE_SUCCESS].includes(e)}function hasSettingsAccess(e){return e.areSettingsAdminOnly?e.permissions.admin:e.permissions.writable}const f=a.Ps`
  query UseIsRegistryWritableQuery($registryId: StrictString!) @skipAudit @engComponent(name: REGISTRY) {
    registry(id: $registryId) {
      ...NavStoreRegistryGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,u.f)("NavStoreRegistry").fragment}
  ${(0,u.f)("InaccessibleInfo").fragment}
`
function useIsRegistryWritableQuery(e){const t=(0,d.IJ)(f,{variables:{registryId:e}})
t.type===d.NI.ERROR&&h.ZP.error("Error when loading registry details. Please refresh the page.")
if(t.type===d.NI.ERROR||t.type===d.NI.PENDING)return!1;(0,s.Gp)(!(0,p.CZ)(t.data.registry),"Expected registry to be accessible")
return!(0,p.CZ)(t.data.registry)&&hasSettingsAccess((0,m.tY)("NavStoreRegistry",t.data.registry))}function formatSchemaNameAndType(e,t){return`${e}  ${t}`}},305595:(e,t,n)=>{n.d(t,{WS:()=>bulkValidateFileTagsForReview,OJ:()=>cancelMove,AU:()=>RegistryValidatorActions_checkItems,ku:()=>openRegistryValidatorModal,MS:()=>submitMoveWithDataMods,OH:()=>RegistryValidatorActions_validateFileTags,Qe:()=>validateFileTagsForReview})
var a=n(531041),i=n(232606),r=n(609630),s=n(56063),o=n(348920),l=n(675649),c=n(787004),d=n(776065),u=n(343748),m=n(286291),p=n(551705),h=n(518352),E=n(947730),S=n(241500),T=n(778095),g=n(376377),f=n(974913),I=n(216101),A=n(858794),y=n(386382),_=n(904964),C=n(771398),R=n(8747)
function cancelMove(){E.Z.dispatch({actionType:c.QKG})}function getAndValidateRegistryIdForFiles(e){let t={duration:0,id:"registry-validation"}
for(const n of e)if(!n.tagSchema){1===e.length&&(t={...t,actionText:"Set Schema",onActionClick:()=>{d.Z.openFile(n.id,{onOpen:e=>{e.activateTab(S.Z)}})}})
f.ZP.warn("Files must have a schema set before registering.",t)
return null}const n=a.default.uniq(e.map((e=>e.tagSchema.registryId)))
if(n.length>1){f.ZP.warn("All items for registration must have a schema in the same registry.",t)
return null}const i=n[0]
if(!T.Z.hasSourceAuth(i,s.ZP.APPEND)){f.ZP.error("You do not have permissions to register this file.",t)
return null}return i}async function submitMoveWithDataMods(e,t,n){const s=(0,I.countDuplicateWarnings)(t),S=e.length
await(0,r.GE)({changeSummary:(0,y.P_)({apiIds:[],itemCounts:{entity:S},action:y.wV.REGISTER,entitiesToMergeCount:s}),onRequestClose:()=>{},onRequestSubmit:()=>{!async function RegistryValidatorActions_submitMove(e,t,{inUserCollection:n,inOrgCollection:r,labelingStrategy:s}){const o=getAndValidateRegistryIdForFiles(e)
if(!o)return
const S=a.default.pluck(e,"id")
E.Z.dispatch({actionType:c.GB3})
try{const T=await function submitMove(e,t,n,{inUserCollection:a,inOrgCollection:i,labelingStrategy:r}){return R.by({url:`/1/api/registries/${t}/actions/move-files`,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({fileIds:e,warningCodes:n,inUserCollection:a,inOrgCollection:i,labelingStrategy:r})})}(S,o,t,{inUserCollection:n,inOrgCollection:r,labelingStrategy:s});(0,i.hu)(null!=T,"RegistryValidatorDAO.submitMove unexpectedly returned undefined")
const g=await u.in(o);(0,i.hu)(null!=g,"FileBrowserDAO.fetchSource unexpectedly returned undefined")
const I=await p.Z.fetch(g.rootFolder.api_identifier,{summary:"1"})
E.Z.dispatch({actionType:c.RqX,fileIds:S})
a.default.each(e,(e=>{h.Z.invalidateFolderContents(m.Z.parentFolderId(e))}))
const{changedDisplayLabelsById:y,changedNamesById:_,archivedFileIds:C,bioentityAliasInfosById:N,tagsById:O}=T
d.Z.bulkRemoveFromWorkspace(C);(0,A.Z)(T,S,I)
E.Z.dispatch({actionType:c.yoq,bioentityAliasInfosById:N})
E.Z.dispatch({actionType:c.JFe,tagData:a.default.map(O,((e,t)=>({id:t,tags:e})))})
for(const e of Object.keys(_))E.Z.dispatch({actionType:c.oe2,id:e,name:_[e],bioentityAliasInfos:N[e],displayLabel:y[e]})
E.Z.dispatch({actionType:c.LNQ,ids:S,permissionsById:T.permissionsById,folder:I})
const b=l._6(T.numMoved,"item"),v=l._6(T.numMerged,"item"),P=l._6(T.numMerged,"was","were"),L=l._6(T.numMerged,"its","their")
let D=`Successfully moved ${T.numMoved} ${b} into the registry.`
T.numMerged>0&&(D+=` ${T.numMerged} ${v} ${P} left in the project and ${L} samples moved.`)
f.ZP.success(D)}catch(e){f.ZP.notifyError(e,{duration:0})
E.Z.dispatch({actionType:c.QKG})}}(e,t,n)}},o.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,{module:"REGISTRY",actionOrigin:"inventory_registry_search_ui",modifiedAction:y.wV.REGISTER,numModifiedTotalItems:S,entryId:null})}function RegistryValidatorActions_checkItems(e){E.Z.dispatch({actionType:c.X16})
const t=a.default.pluck(e,"id"),n=getAndValidateRegistryIdForFiles(e)
n&&function checkItems(e,t){return R.by({url:`/1/api/registries/${t}/actions/validate-moving-files`,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({fileIds:e})})}(t,n).done((e=>{(0,i.hu)(null!=e,"RegistryValidatorDAO.checkItems unexpectedly returned undefined")
E.Z.dispatch({actionType:c.CVg,myCollectionErrorsByFileId:e.myCollectionErrors,orgCollectionErrorsByFileId:e.orgCollectionErrors,files:e.files,addedFileIds:e.addedFileIds})})).fail((e=>{f.ZP.notifyError(e,{duration:0})}))}function openRegistryValidatorModal(e){if(getAndValidateRegistryIdForFiles(e)){RegistryValidatorActions_checkItems(e);(0,_.Q)()}}function RegistryValidatorActions_validateFileTags(e,t){(function validateFileTags(e,t){return C.ty({url:`/1/api/registries/${t}/actions/validate-file-tags`,data:{fileId:e}})})(e,t).done((t=>{E.Z.dispatch({actionType:c.VOk,errors:t,fileId:e})}))}async function validateFileTagsForReview(e){try{const t=await g.OH(e)
E.Z.dispatch({actionType:c.VOk,errors:t,fileId:e})
return t}catch(e){f.ZP.notifyError(e)
return[]}}async function bulkValidateFileTagsForReview(e){try{const t=await g.Xu(e)
E.Z.dispatch({actionType:c.lFd,errorsByFileId:t})
return t}catch(e){f.ZP.notifyError(e)
return{}}}},546075:(e,t,n)=>{n.d(t,{p4:()=>isParentLinkSchemaField,zG:()=>getParentLinkFileId})
var a=n(232606)
function isParentLinkSchemaField(e){return e.isParentLink}function getParentLinkFileId(e){(0,a.hu)(isParentLinkSchemaField(e.tagSchemaField),"getParentLinkFileId expected parent link schema tag")
const t=e;(0,a.hu)(t.targetFiles.length<=1,"Expected at most 1 target file for a parent link schema tag, which cannot be multi")
return t.targetFiles.length?t.targetFiles[0].id:null}},127942:(e,t,n)=>{n.d(t,{ZP:()=>QueryingCreateBioentityTagInputs,zL:()=>useCreateBioentityTagInputs})
var a=n(769784),i=n(989526),r=n(232606),s=n(348920),o=n(751512),l=n(91092),c=n(965131),d=n(697134),u=n(883136),m=n(134749)
function useCreateBioentityTagInputs(){const[e,t]=(0,i.useState)(null),[n,a]=(0,i.useState)([])
return[e,n,{onChange:e=>{t(e)},selectedTagSchemaId:null==e?void 0:e.id},{labelStyle:m.gF.LABEL,onChange:a,tagSchemaId:null==e?void 0:e.id,tags:n}]}function CreateBioentityTagInputs({labelStyle:e,onChange:t,tagSchema:n,tags:a}){return i.createElement(u.Z,{labelStyle:e,onChange:t,schema:n,tags:a,showFieldDescription:s.ZP.SCHEMAS_ENABLE_SCHEMA_FIELD_DESCRIPTION_FOR_TAG_SCHEMAS})}const p=a.Ps`
  query CreateBioentityTagInputsQuery($tagSchemaId: StrictString!) @skipAudit @engComponent(name: REGISTRY) {
    tagSchema(id: $tagSchemaId) {
      ...TagSchemaGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,l.f)("TagSchema").fragment}
  ${(0,l.f)("InaccessibleInfo").fragment}
`
function QueryingCreateBioentityTagInputs(e){var t
const n=o.ZP.DEFAULT_RENDER_LOADING
return i.createElement(o.ZP,{query:p,renderLoading:n,skip:!e.tagSchemaId,variables:{tagSchemaId:null!==(t=e.tagSchemaId)&&void 0!==t?t:""}},(t=>{const n=t?t.tagSchema:null;(0,r.hu)(null==n||!(0,d.CZ)(n),`Expecting a TagSchema, but it was inaccessible (tagSchemaId=${e.tagSchemaId})`)
return i.createElement(CreateBioentityTagInputs,{...e,tagSchema:n?(0,c.tY)("TagSchema",n):null})}))}},627742:(e,t,n)=>{n.d(t,{D0:()=>toCreateAndRegisterBioentityArgs,H:()=>I,Ue:()=>create,ew:()=>isComplete,gy:()=>getDefaultCreateBioentityArgs,jD:()=>createAndRegisterWithDataModsOnMerge,pk:()=>getDefaultCreateAndRegisterBioentityArgs,xD:()=>toCreateBioentityArgs})
var a=n(250965),i=n.n(a),r=n(602652),s=n(232606),o=n(609630),l=n(348920),c=n(136701),d=n(955836),u=n(306258),m=n(598464),p=n(459830),h=n(537076),E=n(776065),S=n(227887),T=n(386382),g=n(251808),f=n(87209)
function getDefaultCreateBioentityArgs(){return{name:"",folderId:null,notation:d.gO.NATURAL_BASES,customSyntaxName:null,residues:null,smiles:"",chemicalSketcherValue:u.n$,tagSchema:null,tags:[],studySearchItems:[]}}const I=r.shape({name:r.string.isRequired,labelingStrategy:r.string,projectFolderId:r.string,tagSchema:h.TAG_SCHEMA_SHAPE,tags:r.arrayOf(S.kY.isRequired).isRequired})
function getDefaultCreateAndRegisterBioentityArgs(){const{folderId:e,...t}=getDefaultCreateBioentityArgs()
return{...t,projectFolderId:e,labelingStrategy:null}}function toCreateAndRegisterBioentityArgs(e){const{folderId:t,...n}=e
return void 0===t?n:{...n,projectFolderId:t}}function toCreateBioentityArgs(e){const{projectFolderId:t,...n}=e
return{...n,folderId:t}}function isComplete(e){const t=n(531346).Z,{labelingStrategy:a,projectFolderId:i,tagSchema:r}=e,s=r?r.id:null,o=""!==e.smiles&&e.chemicalSketcherValue!==u.n$
return Boolean(a&&t.isComplete(i)&&s&&!o)}async function createAndRegister(e,t){try{f.$Z("Registering entity...")
const n=await c.jg(function prepareForCreateAndRegisterBioentityServerArgs(e,t){var n;(0,s.hu)(null!=e.tagSchema,"expected tagSchema to be present when creating and registering a bioentity");(0,s.hu)(e.notation===d.gO.CUSTOM_SYNTAX===Boolean(e.customSyntaxName),"Invalid notation selection")
const a=(0,m._F)(e)
return{...e,tagSchemaId:e.tagSchema.id,tags:(0,g.UR)(e.tags),chemicalStructureInput:a,shouldErrorWhenMergingDuplicate:t,studyIds:null===(n=e.studySearchItems)||void 0===n?void 0:n.map((e=>e.id))}}(e,t))
await async function afterCreateAndRegister(e,t){var n;(null===(n=e.tagSchema)||void 0===n?void 0:n.folderItemType)===p.MOLECULE&&await(0,m.mi)(u.c6.MOLFILE,t.chemicalSketcherValue)}(n,e)
return n}finally{f.Cp()}}async function createAndRegisterWithDataModsOnMerge(e){if(!l.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS||!l.ZP.AUDITING_ENABLE_DATA_MODIFICATIONS)return await createAndRegister(e,!1)
try{return await createAndRegister(e,!0)}catch(t){if(c.Dk(t)){const t=i().Deferred()
await(0,o.GE)({changeSummary:(0,T.Y2)(1),onRequestClose:()=>{t.resolve(null)},onRequestSubmit:async()=>{const n=await createAndRegister(e,!1)
t.resolve(n)}},l.ZP.REGISTRY_ENABLE_DATA_MOD_REASONS,{module:"REGISTRY",actionOrigin:"inventory_registry_search_ui",modifiedAction:"REGISTRY_MERGE",numModifiedTotalItems:1,entryId:null})
return await Promise.resolve(t)}throw t}}async function create(e){const t=await c.Ue(function prepareForCreateBioentityServerArgs(e){var t;(0,s.hu)(null!=e.tagSchema,"expected tagSchema to be present when creating bioentity");(0,s.hu)(null!=e.folderId,"expected folderId to be present when creating bioentity")
const n=(0,m._F)(e)
return{...e,tagSchemaId:e.tagSchema.id,folderId:e.folderId,tags:(0,g.UR)(e.tags),chemicalStructureInput:n,studyIds:null===(t=e.studySearchItems)||void 0===t?void 0:t.map((e=>e.id))}}(e))
E.Z.openFile(t.id)
return t}},782975:(e,t,n)=>{n.d(t,{Z:()=>FieldDefinitionLabel})
var a=n(692013),i=n(989526),r=n(175803),s=n(263137),o=n(271359),l=n(361974),c=n(920672),d=n(36424),u=n(666571),m=n(634714),p=n(792209)
function FieldDefinitionLabel({inEditMode:e=!1,...t}){const{icon:n,label:o}=(0,p.Z)(t),E=(0,m.WE)(t.field)
return i.createElement("div",{className:(0,a.iv)(h.labelStyle),...(0,s.Z)({component:"FieldDefinitionLabel",element:"root"})},i.createElement(d.Z,{icon:n,className:(0,a.iv)(h.iconStyle)}),o,E&&!e&&i.createElement("div",{className:(0,a.iv)(h.lineageEnforcementDisplay)},"Lineage enforced",i.createElement(c.Z,{text:(0,r._n)({path:E.edges}),placement:l.ZH.LEFT},i.createElement(u.Z,{className:"tagSchemaSettings-helpIcon u-tiny-spacing-left"}))))}const h=a.mM.create({iconStyle:{color:o.pp,marginRight:"10px",height:"12px",width:"12px"},labelStyle:{alignItems:"center"},lineageEnforcementDisplay:{fontSize:"12px",color:o.pp,whiteSpace:"nowrap"}})},578624:(e,t,n)=>{n.d(t,{Bk:()=>FieldTableLoading,NW:()=>createClientSchemaField,ZP:()=>k})
var a=n(769784),i=n(767807),r=n.n(i),s=n(989526),o=n(531041),l=n(996447),c=n(382857),d=n(232606),u=n(348920),m=n(537076),p=n(256605),h=n(751512),E=n(91092),S=n(490776),T=n(974913),g=n(128963),f=n(497790),I=n(9492),A=n(688594),y=n(263137),_=n(334148),C=n(476604),R=n(87209),N=n(666743),O=n(583960),b=n(685370),v=n(808844),P=n(883026),L=n(946166),D=n(506109)
const{SAVING_STATES:M}=m,w="special-show-archived-fields-row"
function createClientSchemaField(e,t){return{archiveRecord:null,cid:o.default.uniqueId(),name:e,displayName:e,systemName:null!=t?t:"",fieldType:f.FIELD_TYPES.TEXT.type,isRequired:!1,isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isMulti:!1,isParentLink:!1,description:null}}function mapPropsToState(e){return{editingFieldCids:[],fields:e.fields.map((e=>({...e,cid:o.default.uniqueId()}))),isShowingArchived:!1}}class FieldTable extends s.Component{constructor(){super(...arguments)
this.state=mapPropsToState(this.props)
this.handleAddField=()=>{if(this.shouldDisableAddField())return
const e=createClientSchemaField(""),t=r()(this.state.fields,{$push:[e]})
this.setState({editingFieldCids:r()(this.state.editingFieldCids,{$push:[e.cid]}),fields:t})
this.props.isBeingCreated&&this.props.onFieldsChange(t)}
this.handleMoveField=e=>{const t=o.default.indexBy(this.state.fields,"cid")
let n=[]
if(e.includes(w)){e.splice(e.indexOf(w),1)
n=this.state.fields.map((e=>e.cid)).filter((t=>!e.includes(t)))}this.setState({fields:[...e,...n].map((e=>t[e]))})}
this.handleMoveFieldComplete=e=>{const t=o.default.findIndex(this.state.fields,(t=>t.cid===e)),n=this.state.fields[t],a=o.default.findIndex(this.props.fields,(e=>e.id===n.id))
null!=a&&t!==a&&this.props.onFieldsChange(this.state.fields)}}componentDidMount(){this.fetchSchemaFieldSelectors()
this.props.savingState===M.PENDING||R.xj()||R.Cp()}fetchSchemaFieldSelectors(){this.props.registryId?S.Z.fetchForRegistry(this.props.registryId):S.Z.fetchForAllRegistries()}getIdOfNewField(e){const t=o.default.compact(o.default.difference(o.default.pluck(e.fields,"id"),o.default.pluck(this.props.fields,"id")))
if(0===t.length)return null;(0,d.hu)(1===t.length,"Found more than one ID in new FieldTable props.")
return t[0]}UNSAFE_componentWillReceiveProps(e){if(e.schemaId!==this.props.schemaId){this.setState(mapPropsToState(e))
return}if(this.props.savingState===M.FAILURE&&e.savingState===M.COMPLETED||e.savingState===M.FAILURE){this.setState(mapPropsToState(this.props))
return}if(this.props.isBeingCreated)return
const t=this.getIdOfNewField(e)
let n=this.state.fields.map((n=>{let a
a=n.id?e.fields.find((e=>e.id===n.id)):e.fields.find((e=>e.id===t))
return{...n,...a}}))
n=n.filter((t=>null==t.dbId||e.fields.find((e=>e.id===t.id))))
this.setState({fields:n})}componentDidUpdate(e,t){const n=e.savingState===M.PENDING,a=this.props.savingState===M.PENDING
!n&&a?R.$Z("Saving..."):n&&!a&&R.Cp()
this.fetchSchemaFieldSelectors()}verifyFields(e){for(const t of e)if(e.filter((e=>t.name===e.name||t.systemName===e.systemName)).length>1){T.ZP.error(`You may not add two ${this.props.schemaType} fields with the same name or warehouse name.`)
return!1}return!0}shouldDisableAddField(){return!this.props.isBeingCreated&&this.state.fields.filter((e=>null==e.id)).length>0}handleCancelEditField(e){const t=o.default.findIndex(this.state.editingFieldCids,(t=>t===e)),n=t>-1?r()(this.state.editingFieldCids,{$splice:[[t,1]]}):this.state.editingFieldCids
this.setState({editingFieldCids:n})}handleEditField(e){this.setState({editingFieldCids:r()(this.state.editingFieldCids,{$push:[e]})})}handleChangeField(e,t){const n={...this.state.fields.find((t=>t.cid===e)),...t}
this.handleReplaceField(e,n)}handleReplaceField(e,t){const n=this.state.fields.findIndex((t=>t.cid===e)),a=r()(this.state.fields,{$splice:[[n,1,t]]})
if(!this.props.isBeingCreated&&!this.verifyFields(a)){this.setState(mapPropsToState(this.props))
return}const i=o.default.findIndex(this.state.editingFieldCids,(t=>t===e)),s=!this.props.isBeingCreated&&i>-1?r()(this.state.editingFieldCids,{$splice:[[i,1]]}):this.state.editingFieldCids
this.setState({editingFieldCids:s,fields:a})
this.props.onFieldsChange(a)}handleRemoveField(e){const t=o.default.findIndex(this.state.fields,(t=>t.cid===e)),n=this.state.fields[t],a=o.default.find(this.props.fields,(e=>e.id===n.id))
if(null==n.id){const e=r()(this.state.fields,{$splice:[[t,1]]})
this.setState({fields:e})
this.props.isBeingCreated&&this.props.onFieldsChange(e)}else this.props.handleDeleteConfirmation&&null!=a?this.props.handleDeleteConfirmation((t=>{this.handleRemoveFieldComplete(e,t)})):this.handleRemoveFieldComplete(e)}handleRemoveFieldComplete(e,t){const n=o.default.findIndex(this.state.fields,(t=>t.cid===e)),a=t===L.Zk,i=r()(this.state.fields,{$splice:[[n,1]]}),s=o.default.findIndex(this.state.editingFieldCids,(t=>t===e)),l=s>-1?r()(this.state.editingFieldCids,{$splice:[[s,1]]}):this.state.editingFieldCids
this.setState({editingFieldCids:l,fields:i})
this.props.onFieldsChange(i,{deleteOldSchemaTags:a})}handleArchiveField(e){const t=o.default.findIndex(this.state.fields,(t=>t.cid===e)),n=this.state.fields[t],a={...n,id:n.apiId}
l.bA({items:[a],onArchive:(e,t)=>{var n;(null===(n=this.props.archiveWarnings)||void 0===n?void 0:n.length)?(0,b.iG)("Archive field?",this.props.archiveWarnings,_.ZJ.NEGATIVE,{enableRedesign:!0,acceptText:"Archive",onSubmit:()=>{this.handleArchiveFieldConfirm(e,t)}}):this.handleArchiveFieldConfirm(e,t)}})}async handleArchiveFieldConfirm(e,t){const[n]=e,a=o.default.findIndex(this.state.fields,(e=>e.apiId===n))
let i=this.state.fields[a]
if(i.isSnapshot){i={...(await(0,P.jI)((0,A.kq)({snapshotFieldId:n}),"Updating...")).schemaField,cid:i.cid}}const r={...i,archiveRecord:{purpose:t}}
this.handleReplaceField(i.cid,r)}handleUnarchiveField(e){const t=this.state.fields.find((t=>t.cid===e)),n={...t,archiveRecord:null}
this.handleChangeField(t.cid,n)}getVisibleFieldRowDatas(){const[e,t]=o.default.partition(this.state.fields,(e=>{var t
return(0,c.ZP)({...e,id:null!==(t=e.apiId)&&void 0!==t?t:""})})),n=[...t,...this.state.isShowingArchived?e:[]],isReviewableForFieldDataMigration=e=>{var t
return!(!u.ZP.SCHEMAS_ENABLE_SCHEMA_FIELD_MIGRATION||null==this.props.activeMigration)&&((null===(t=this.props.activeMigration.sourceField)||void 0===t?void 0:t.apiId)===e.apiId&&this.props.activeMigration.status===p.l1.SUCCEEDED)}
return n.map(((e,t)=>{var n
return{itemClass:this.props.itemClass,id:e.cid,itemProps:{id:e.cid,disabled:this.props.isDisabled,initialField:e,isBeingEdited:null!=o.default.find(this.state.editingFieldCids,(t=>t===e.cid)),isSchemaBeingCreated:this.props.isBeingCreated,fileType:this.props.fileType,sequenceType:this.props.sequenceType,onCancel:e=>{this.handleCancelEditField(e)},onEdit:e=>{this.handleEditField(e)},tagSchemas:this.props.tagSchemas,batchSchemas:this.props.batchSchemas,storableSchemas:this.props.storableSchemas,assaySchemas:this.props.assaySchemas,schemaInterfaces:this.props.schemaInterfaces,requestArchive:e=>{this.handleArchiveField(e)},requestChange:(e,t)=>{this.handleChangeField(e,t)},requestRemove:e=>{this.handleRemoveField(e)},requestUnarchive:e=>{this.handleUnarchiveField(e)},schemaFieldSelectors:this.props.schemaFieldSelectors,shouldShowIsParentLink:this.props.shouldShowIsParentLink,shouldShowIsRequired:this.props.shouldShowIsRequired,shouldShowDescription:this.props.shouldShowDescription,shouldShowIsIntegration:this.props.shouldShowIsIntegration,batchLinkProps:this.props.batchLinkProps,isFieldBeingCreated:null==e.dbId,registryId:this.props.registryId,ownerId:this.props.ownerId,ownerUrlId:this.props.ownerUrlId,schema:this.props.schema,schemaType:this.props.schemaType,schemaId:this.props.schemaId,schemaHasData:this.props.schemaHasData,schemaFieldDependentsSummaries:null!=this.props.schemaFieldDependentsSummariesById&&null!=e.apiId?null===(n=this.props.schemaFieldDependentsSummariesById)||void 0===n?void 0:n[e.apiId]:null,submissionWarnings:null!=this.props.submissionWarnings?this.props.submissionWarnings:[],isReviewableForFieldDataMigration:isReviewableForFieldDataMigration(e),reviewMigration:()=>{}}}}))}getShowArchivedRowData(){const e=this.state.fields.filter((e=>{var t
return(0,c.ZP)({...e,id:null!==(t=e.apiId)&&void 0!==t?t:""})})).length
return this.state.isShowingArchived||0===e?null:{id:w,itemClass:O.Z,itemProps:{isDraggingDisabled:!0,row:{id:w,cells:[{key:w,contents:s.createElement("div",null,s.createElement("a",{href:"",onClick:e=>{e.preventDefault()
this.setState({isShowingArchived:!0})},...(0,y.Z)({component:"FieldTable",element:"showArchived"})},"Show archived fields (",e,")"))}]}}}}render(){return s.createElement("div",{className:"simpleDivTable simpleDivTable--wide",...(0,y.Z)(this.props.dataTestAttrs?this.props.dataTestAttrs:{component:"FieldTable",element:"root"})},s.createElement(D.Z,{isDisabled:this.props.isDisabled,onAddField:this.shouldDisableAddField()?null:this.handleAddField,shouldShowDefinition:!0,shouldShowIsParentLink:this.props.shouldShowIsParentLink,shouldShowIsRequired:this.props.shouldShowIsRequired,shouldShowIsIntegration:this.props.shouldShowIsIntegration,shouldShowWarehouseName:(0,I.E)(),subheader:this.props.subheader,title:`${(0,v.kC)(this.props.schemaType)} fields`}),(()=>this.props.schemaFieldSelectors?0===this.state.fields.length?s.createElement("div",{className:"simpleDivTable-row"},s.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--emptyMessage"},`This schema does not have any ${this.props.schemaType} fields`)):s.createElement(N.Z,{itemDatas:o.default.compact([...this.getVisibleFieldRowDatas(),this.getShowArchivedRowData()]),onMoveItem:this.handleMoveField,onMoveItemEnd:this.handleMoveFieldComplete}):s.createElement("div",{className:"u-spacing-top u-spacing-bottom u-justify-content-center"},s.createElement(C.Z,null)))())}}FieldTable.defaultProps={isBeingCreated:!1,isDisabled:!1,shouldShowIsParentLink:!1,shouldShowIsRequired:!1,shouldShowIsIntegration:!1,tagSchemas:[],batchSchemas:[],containerSchemas:[],plateSchemas:[],assaySchemas:[],submissionWarnings:[],archiveWarnings:[]}
function FieldTableLoading(e){return s.createElement("div",{className:"simpleDivTable simpleDivTable--wide",...(0,y.Z)(e.dataTestAttrs?e.dataTestAttrs:{component:"FieldTableLoading",element:"root"})},s.createElement(D.Z,{isDisabled:!0,onAddField:null,shouldShowDefinition:!1,shouldShowIsParentLink:!1,shouldShowIsRequired:!1,shouldShowIsIntegration:!1,shouldShowWarehouseName:!1,title:`${(0,v.kC)(e.schemaType)} fields`}),s.createElement("div",{className:"u-spacing-top u-spacing-bottom u-justify-content-center"},s.createElement(C.Z,null)))}const F=a.Ps`
  query FieldTableQuery($organizationId: StrictString) @skipAudit @engComponent(name: SCHEMAS) {
    schemaInterfaces(organizationId: $organizationId) {
      id
      name
      ...HasArchiveRecordGraphQL
    }
  }
  ${(0,E.f)("HasArchiveRecord").fragment}
`
const k=g.Z.connect((function mapSchemaFieldSelectorStoreToProps(e,{registryId:t}){return{schemaFieldSelectors:t?e.getOrderedSelectorsForRegistry(t,{includeArchived:!0}):e.getOrderedSelectors(!0)}}))((function QueryingFieldTable(e){return s.createElement(h.ZP,{query:F,variables:{organizationId:e.ownerId},renderLoading:()=>null},(t=>s.createElement(FieldTable,{...e,schemaInterfaces:e.ownerId?t.schemaInterfaces:[]})))}))},443375:(e,t,n)=>{n.d(t,{JY:()=>getSnapshotFieldOption,P2:()=>getInterfaceFieldOptions,_K:()=>getFieldOptions,jO:()=>y})
var a=n(692013),i=n(392663),r=n(382857),s=n(894833),o=n(232606),l=n(814099),c=n(323539),d=n(348920),u=n(459830),m=n(256605),p=n(776105),h=n(775509),E=n(497790),S=n(271359),T=n(124640),g=n(379346),f=n(808844),I=n(556543)
function filterForEntryTagSchemas(e){return e.filter((e=>e.folderItemType===u.ENTRY))}function sortStorableSchemasByType({storableSchemas:e}){let t=[],n=[],a=[],i=[]
for(const r of e)g.ZP.isPlateSchema(r.id)?n.push(r):g.ZP.isContainerSchema(r.id)?t.push(r):g.ZP.isBoxSchema(r.id)?a.push(r):g.ZP.isLocationSchema(r.id)?i.push(r):(0,o.Gp)(!1,"Expected storable schema")
t=(0,s.Z)(t)
n=(0,s.Z)(n)
a=(0,s.Z)(a)
i=(0,s.Z)(i)
return[...n,...t,...a,...i]}const A={schemaFieldSelectorId:null,requiredLink:null},y={...A,label:"Loading",requiredLink:null,fieldDefinition:E.FieldType.TEXT,disabled:!0}
function getSnapshotFieldOption(){return{...A,fieldDefinition:E.ComputedFieldType.SNAPSHOT,label:"Computed field (snapshot)",icon:"function"}}function entitySubmenu({initialField:e,includeGenericBioentityLinks:t,tagSchemas:n,schemaInterfaces:r,includeCoreTypeLinks:o=!0}){const l=t?[{...A,fieldDefinition:E.FieldType.BIOENTITY_LINK,requiredLink:{folderItemType:null,tagSchema:null,entitySchemaFieldPath:null,schemaInterface:null},label:E.ANY_ENTITY.name,icon:T.m.BasicFolderItem}]:[],c=o?function getAvailableFolderItemTypes(e){const t=(0,h.Z)()
if(!e)return t
const n=(0,E.getRequiredLinkFolderItemType)(e)
n&&n===u.MIXTURE&&!t.includes(n)&&t.push(n)
return t}(e).map((e=>({...A,fieldDefinition:E.FieldType.BIOENTITY_LINK,requiredLink:{folderItemType:e,tagSchema:null,entitySchemaFieldPath:null,schemaInterface:null},label:(0,f.kC)((0,f.E2)(e)),icon:e}))):[],m=d.ZP.SCHEMAS_ENABLE_INTERFACES?(0,s.Z)(r).map((e=>({fieldDefinition:E.FieldType.BIOENTITY_LINK,requiredLink:{schemaInterface:e,folderItemType:null,tagSchema:null,entitySchemaFieldPath:null},label:(0,i.Z)(e),icon:u.SCHEMA_INTERFACE}))):[],p=function filterForEntityTagSchemas(e,t){const n=null!=t?(0,E.getRequiredLinkTagSchema)(t):null,a=n&&n.id
return e.filter((e=>(0,h.Z)().includes(e.folderItemType)||e.id===a))}((0,s.Z)(n),e).map((e=>({...A,fieldDefinition:E.FieldType.BIOENTITY_LINK,requiredLink:{tagSchema:e,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null},label:(0,i.Z)(e),icon:e.iconId}))),S=[]
for(const{sectionLabel:e,options:t}of[{sectionLabel:null,options:l},{sectionLabel:null,options:c},{sectionLabel:"Schema Interfaces",options:m},{sectionLabel:"Schemas",options:p}])if(t.length){const n=[]
null!=e&&n.push({label:e,isHeader:!0})
n.push(...t)
S.length&&(n[0].extraClasses=(0,a.iv)(_.separatorAbove))
S.push(...n)}return S}function getInterfaceFieldOptions({initialField:e,schemaInterfaces:t,includeGenericBioentityLinks:n,includeArchivedSchemaInterfaces:a}){var i
const s=null!==(i=a?t:null==t?void 0:t.filter((e=>!(0,r.ZP)(e))))&&void 0!==i?i:[]
return[{label:"Entity",icon:T.m.BasicFolderItem,submenu:entitySubmenu({initialField:e,includeGenericBioentityLinks:n||d.ZP.SCHEMAS_ENABLE_GENERIC_ENTITY_LINK_EVERYWHERE,tagSchemas:[],schemaInterfaces:s,includeCoreTypeLinks:!1})}]}function getFieldOptions({initialField:e,schemaFieldSelectors:t,assaySchemas:n,batchSchemas:o,storableSchemas:h,tagSchemas:S,schemaInterfaces:g,includeJSONField:f,includeAssayLinks:y,includeBatchLinks:C,includeGenericBioentityLinks:R,includeBooleanField:N,includeSnapshotField:O,includeSequenceLinks:b,includeDnaSequenceSpecificLinks:v,includeArchivedSchemas:P=!0,includeEntrySchemas:L=!1,includeEntryLinks:D=!0,snapshotFieldDisabledMessage:M,sequenceSchemaType:w}){var F
const k=t.filter((e=>!(0,r.ZP)(e))),U=P?n:null==n?void 0:n.filter((e=>null==e.archiveRecord)),x=P?o:null==o?void 0:o.filter((e=>null==e.archiveRecord)),B=P?h:null==h?void 0:h.filter((e=>null==e.archiveRecord)),Z=P?S:null==S?void 0:S.filter((e=>null==e.archiveRecord)),q=null!==(F=P?g:null==g?void 0:g.filter((e=>!(0,r.ZP)(e))))&&void 0!==F?F:[],G=(null!=U?U:[]).filter((e=>e.schemaType===m.nc.ASSAY_RESULT)),V=(null!=U?U:[]).filter((e=>e.schemaType===m.nc.ASSAY_REQUEST)),H=(null!=U?U:[]).filter((e=>e.schemaType===m.nc.ASSAY_RUN))
let W
W=w===m.Ts.RNA_SEQUENCE?u.SequenceSubtype.RNA_SEQUENCE:u.SequenceSubtype.SEQUENCE
const Y=(0,s.Z)(null!=Z?Z:[]).filter((e=>(0,I.Kc)(W,e))),$=(0,s.Z)(null!=Z?Z:[]).filter((e=>e.folderItemType===u.PROTEIN)),K=(0,s.Z)(null!=Z?Z:[]).filter((e=>(0,I.Kc)(u.SequenceSubtype.RNA_SEQUENCE,e)))
return[{label:"Text",icon:"text",submenu:[{...A,fieldDefinition:E.FieldType.TEXT,label:"Text"},{...A,fieldDefinition:E.FieldType.LONG_TEXT,label:"Long text"}]},{label:"Number",icon:"number",submenu:[{...A,fieldDefinition:E.FieldType.INTEGER,label:"Integer"},{...A,fieldDefinition:E.FieldType.FLOAT,label:"Decimal"}]},{label:"Date",icon:"calendar",submenu:[{...A,fieldDefinition:E.FieldType.DATE,label:"Date"},{...A,fieldDefinition:E.FieldType.DATETIME,label:"Datetime"}]},...N?[{...A,fieldDefinition:E.FieldType.BOOLEAN,label:"Boolean",icon:"boolean"}]:[],...k.length?[{icon:"multi-select",label:"Dropdown",submenu:k.map((e=>({...A,fieldDefinition:E.FieldType.SELECTOR,schemaFieldSelectorId:e.id,label:e.name})))}]:[],...f?[{...A,fieldDefinition:E.FieldType.JSON,icon:"json",label:"JSON"}]:[],{...A,fieldDefinition:E.FieldType.BLOB_LINK,icon:"attachment",label:"Attachment",extraClasses:(0,a.iv)(_.separatorBelow)},...D?[{label:"Entry",icon:T.m.Entry,...L?{submenu:filterForEntryTagSchemas(Z).map((e=>({...A,fieldDefinition:E.FieldType.ENTRY_LINK,requiredLink:{tagSchema:e,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null},label:(0,i.Z)(e),icon:e.iconId})))}:{...A,fieldDefinition:E.FieldType.ENTRY_LINK}}]:[],{label:"Entity",icon:T.m.BasicFolderItem,submenu:entitySubmenu({initialField:e,includeGenericBioentityLinks:R||d.ZP.SCHEMAS_ENABLE_GENERIC_ENTITY_LINK_EVERYWHERE,tagSchemas:Z,schemaInterfaces:q})},...B.length>0&&(0,c.cr)({feature:l.TD.INVENTORY_DISCOVER})?[{label:"Inventory",icon:"fridge",submenu:[{...A,fieldDefinition:E.FieldType.STORABLE_LINK,requiredLink:{storableSchema:null},icon:"fridge",label:"Any inventory",extraClasses:(0,a.iv)(_.separatorBelow)},...sortStorableSchemasByType({storableSchemas:B}).map((e=>({...A,label:(0,i.Z)(e),icon:e.iconId,fieldDefinition:E.FieldType.STORABLE_LINK,requiredLink:{storableSchema:e}})))]}]:[],...y&&d.ZP.ENABLE_NEW_RESULTS?[{label:"Result",icon:"result_schema",submenu:[{...A,fieldDefinition:E.FieldType.ASSAY_RESULT_LINK,label:"Any result",extraClasses:(0,a.iv)(_.separatorBelow)},...(0,s.Z)(G).map((e=>({...A,fieldDefinition:E.FieldType.ASSAY_RESULT_LINK,requiredLink:{assaySchema:e},label:(0,i.Z)(e)})))]}]:[],...y&&d.ZP.ENABLE_REQUESTS?[{label:"Request",icon:"request_schema",submenu:[{...A,fieldDefinition:E.FieldType.ASSAY_REQUEST_LINK,label:"Any request",extraClasses:(0,a.iv)(_.separatorBelow)},...(0,s.Z)(V).map((e=>({...A,fieldDefinition:E.FieldType.ASSAY_REQUEST_LINK,requiredLink:{assaySchema:e},label:(0,i.Z)(e)})))]}]:[],...y&&(0,c.or)([{feature:l.d$.LAB_AUTOMATION_ADMIN}])?[{label:"Run",icon:u.RUN_SCHEMA,submenu:[{...A,fieldDefinition:E.FieldType.ASSAY_RUN_LINK,label:"Any run",extraClasses:(0,a.iv)(_.separatorBelow)},...(0,s.Z)(H).map((e=>({...A,fieldDefinition:E.FieldType.ASSAY_RUN_LINK,requiredLink:{assaySchema:e},label:(0,i.Z)(e)})))]}]:[],...b&&Y.length>0?[{label:"Part",icon:"part",submenu:Y.map((e=>({...A,fieldDefinition:E.FieldType.PART_LINK,label:(0,i.Z)(e),requiredLink:{tagSchema:e,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null}})))}]:[],...b&&$.length>0?[{label:"Translation",icon:"translation",submenu:$.map((e=>({...A,fieldDefinition:E.FieldType.TRANSLATION_LINK,label:(0,i.Z)(e),requiredLink:{tagSchema:e,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null}})))}]:[],...v&&K.length>0?[{label:"Transcription",icon:T.m.RNASequence,submenu:K.map((e=>({...A,fieldDefinition:E.FieldType.TRANSCRIPTION_LINK,label:(0,i.Z)(e),requiredLink:{tagSchema:e,folderItemType:null,entitySchemaFieldPath:null,schemaInterface:null}})))}]:[],...C&&(0,p.Z)()?[{label:"Batch",icon:u.BATCH,submenu:[{...A,fieldDefinition:E.FieldType.BATCH_LINK,label:"Any batch",requiredLink:{batchSchema:null,batchSchemaGraph:null},extraClasses:(0,a.iv)(_.separatorBelow)},...(null!=x?x:[]).map((e=>({...A,fieldDefinition:E.FieldType.BATCH_LINK,requiredLink:{batchSchema:e,batchSchemaGraph:null},label:e.name})))]}]:[],...O?[{...A,extraClasses:(0,a.iv)(_.separatorAbove),...getSnapshotFieldOption(),disabled:Boolean(M),disabledMessage:M}]:[]]}const _=a.mM.create({separatorAbove:{borderTopColor:S.tN,borderTopStyle:"solid",borderTopWidth:"1px"},separatorBelow:{borderBottomColor:S.tN,borderBottomStyle:"solid",borderBottomWidth:"1px"}})},714200:(e,t,n)=>{n.d(t,{X:()=>a,Z:()=>B})
var a,i=n(692013),r=n(764403),s=n.n(r),o=n(989526),l=n(615439),c=n.n(l),d=n(392663),u=n(814099),m=n(323539),p=n(348920),h=n(693719),E=n(684321),S=n(111770),T=n(974913),g=n(433372),f=n(619587),I=n(605209),A=n(407307),y=n(497790),_=n(364761),C=n(556969),R=n(682932),N=n(9492),O=n(131109),b=n(263137),v=n(88941),P=n(868710),L=n(334148),D=n(271359),M=n(36424),w=n(502633),F=n(20859),k=n(927517),U=n(808844),x=n(556543)
!function(e){e.ARCHIVE_BUTTON="ARCHIVE_BUTTON"
e.DELETE_BUTTON="DELETE_BUTTON"
e.FIELD_DEFINITION_DROPDOWN="FIELD_DEFINITION_DROPDOWN"
e.IS_MULTI_CHECKBOX="IS_MULTI_CHECKBOX"
e.IS_REQUIRED_CHECKBOX="IS_REQUIRED_CHECKBOX"
e.WAREHOUSE_NAME_INPUT="WAREHOUSE_NAME_INPUT"}(a||(a={}))
class FieldTableRow extends o.Component{constructor(){super(...arguments)
this.state={isBeingEdited:this.props.isBeingEdited||!this.props.initialField.id,editingName:this.props.initialField.name,editingSystemName:this.props.initialField.systemName,editingIsMulti:this.props.initialField.isMulti,editingIsParentLink:this.props.initialField.isParentLink||!1,editingIsRequired:this.props.initialField.isRequired,editingIsIntegration:this.props.initialField.isIntegration,editingLookupConfig:this.props.initialField.lookupConfig,editingDescription:this.props.initialField.description,fieldOption:null}
this.handleChangeName=e=>{this.setStateAndMaybeUpdateParent({editingName:e.target.value})}
this.handleChangeSystemName=e=>{this.setStateAndMaybeUpdateParent({editingSystemName:e.target.value})}
this.handleChangeIsRequired=({target:{checked:e}})=>{this.setStateAndMaybeUpdateParent({editingIsRequired:e})}
this.handleChangeIsIntegration=({target:{checked:e}})=>{this.setStateAndMaybeUpdateParent({editingIsIntegration:e})}
this.handleChangeIsMulti=({target:{checked:e}})=>{this.setStateAndMaybeUpdateParent({editingIsMulti:e})}
this.handleChangeIsParentLink=({target:{checked:e}})=>{this.setStateAndMaybeUpdateParent({editingIsParentLink:e})}
this.handleChangeDescription=e=>{this.setStateAndMaybeUpdateParent({editingDescription:e.target.value||null})}
this.submitFieldChange=()=>{this.props.requestChange(this.props.id,this.getFieldWithChanges())
this.setState({isBeingEdited:!1})}
this.handleComplete=async()=>{var e,t,n,a,i
if(!this.state.editingName){T.ZP.warn("Please provide a non-empty name.")
return}const r=this.props.initialField.isMulti!==this.state.editingIsMulti,s=(0,f.pw)(this.props.initialField),l=null===(e=this.state.fieldOption)||void 0===e?void 0:e.fieldDefinition,c=this.props.shouldShowWarehouseWarning&&!this.props.isSchemaBeingCreated&&!this.props.isFieldBeingCreated&&p.ZP.ENABLE_WAREHOUSE&&(p.ZP.ENABLE_USER_CREATED_WAREHOUSE_CREDENTIALS||(0,m.cr)({feature:u.sZ.INSIGHTS_DISCOVER}))&&(0,I.PL)(r,s,l),h=this.props.shouldShowRelaxationWarning,E=[];(this.props.shouldShowSubmissionWarningOnCreate||!this.props.isFieldBeingCreated)&&this.props.submissionWarnings&&E.push(...this.props.submissionWarnings)
c&&E.push(o.createElement(I.iE,{key:"warehouse",fromFieldDefinition:s,toFieldDefinition:l,isMultiMoreStrict:!this.state.editingIsMulti&&r}))
if(h&&this.state.fieldOption){let e="";(0,y.isRequiredLinkTagSchema)(this.props.initialField.requiredLink)||(0,y.isRequiredLinkSchemaInterface)(this.props.initialField.requiredLink)?e=(0,d.Z)(null!==(n=null!==(t=this.props.initialField.requiredLink.tagSchema)&&void 0!==t?t:this.props.initialField.requiredLink.schemaInterface)&&void 0!==n?n:y.ANY_ENTITY):(0,y.isRequiredLinkFolderItemType)(this.props.initialField.requiredLink)?e=(0,U.E2)(this.props.initialField.requiredLink.folderItemType):(0,S.QX)("schema.field_table_row.relaxation.missing_from_name")
let r=y.ANY_ENTITY.name;(0,y.isRequiredLinkTagSchema)(this.state.fieldOption.requiredLink)||(0,y.isRequiredLinkSchemaInterface)(this.state.fieldOption.requiredLink)?r=(0,d.Z)(null!==(i=null!==(a=this.state.fieldOption.requiredLink.tagSchema)&&void 0!==a?a:this.state.fieldOption.requiredLink.schemaInterface)&&void 0!==i?i:y.ANY_ENTITY):(0,S.QX)("schema.field_table_row.relaxation.to_any_entity")
E.push(o.createElement(I.Mv,{key:"relaxation",fromName:e,toName:r}))}E.length>0?await(0,w.Z)(I.ZP,{onRequestSubmit:()=>{this.submitFieldChange()},content:o.createElement(o.Fragment,null,E)}):this.submitFieldChange()}
this.handleCancel=()=>{if(null==this.props.initialField.id)this.props.requestRemove(this.props.id)
else{null!=this.props.onCancel&&this.props.onCancel(this.props.id)
this.setState({isBeingEdited:!1,editingName:this.props.initialField.name,editingSystemName:this.props.initialField.systemName,editingIsMulti:this.props.initialField.isMulti,editingIsParentLink:this.props.initialField.isParentLink||!1,editingIsRequired:this.props.initialField.isRequired,editingIsIntegration:this.props.initialField.isIntegration,editingLookupConfig:this.props.initialField.lookupConfig,fieldOption:null})}}
this.handleEdit=()=>{null!=this.props.onEdit&&this.props.onEdit(this.props.id)
this.setState({isBeingEdited:!0})}
this.handleArchive=()=>{this.props.requestArchive(this.props.id)}
this.handleRemove=()=>{this.props.requestRemove(this.props.id)}
this.handleUnarchive=()=>{this.props.requestUnarchive(this.props.id)}
this.handleKeyDown=e=>{if(!this.props.isSchemaBeingCreated)if(k.isEnterKey(e)){e.preventDefault()
this.handleComplete()}else if(k.isEscapeKey(e)){e.preventDefault()
this.handleCancel()}}}static getDerivedStateFromProps(e,t){if(!t.isBeingEdited){return{...t.editingSystemName!==e.initialField.systemName&&{editingSystemName:e.initialField.systemName},...t.editingName!==e.initialField.name&&{editingName:e.initialField.name},...t.editingIsMulti!==e.initialField.isMulti&&{editingIsMulti:e.initialField.isMulti},...t.editingIsParentLink!==e.initialField.isParentLink&&{editingIsParentLink:e.initialField.isParentLink||!1},...t.editingIsRequired!==e.initialField.isRequired&&{editingIsRequired:e.initialField.isRequired},...t.editingIsIntegration!==e.initialField.isIntegration&&{editingIsIntegration:e.initialField.isIntegration},...t.editingDescription!==e.initialField.description&&{editingDescription:e.initialField.description},...!c()(t.editingLookupConfig,e.initialField.lookupConfig)&&{editingLookupConfig:e.initialField.lookupConfig}}}return null}setNewField(e,t){const n=e.fieldDefinition===y.ComputedFieldType.SNAPSHOT
this.setStateAndMaybeUpdateParent({fieldOption:e,editingIsMulti:!(n||!x.ZE(e))&&this.state.editingIsMulti,editingIsRequired:!n&&this.state.editingIsRequired,editingIsIntegration:!n&&this.state.editingIsIntegration,editingIsParentLink:!n&&this.state.editingIsParentLink,editingLookupConfig:n?null!=t?t:this.state.editingLookupConfig:void 0})}handleChangeFieldOption(e){e.fieldDefinition===y.ComputedFieldType.SNAPSHOT&&this.props.lookupConfigModalProps?(0,w.Z)(h.ZP,{...this.props.lookupConfigModalProps,initialLookupConfig:this.state.editingLookupConfig,onRequestClose:()=>{},onRequestSubmit:({lookupConfig:t})=>{this.setNewField(e,t)}}):this.setNewField(e)}setStateAndMaybeUpdateParent(e){this.setState(e)
if(this.props.isSchemaBeingCreated){const t={...this.state,...e}
this.props.requestChange(this.props.id,this.getFieldWithChanges(t))}}getFieldWithChanges(e=this.state){var t
const{label:n,icon:a,fieldDefinition:i,disabled:r,...s}=null!==(t=e.fieldOption)&&void 0!==t?t:{}
if(i)if(i===y.ComputedFieldType.SNAPSHOT){s.isSnapshot=!0
s.fieldType=void 0}else{s.isSnapshot=!1
s.fieldType=i}c()(e.editingLookupConfig,this.props.initialField.lookupConfig)||(s.lookupConfig=e.editingLookupConfig)
return{...this.props.initialField,...s,name:e.editingName,displayName:e.editingName,systemName:e.editingSystemName,isRequired:e.editingIsRequired,isIntegration:e.editingIsIntegration,isMulti:e.editingIsMulti,isParentLink:e.editingIsParentLink,description:e.editingDescription}}render(){var e,t,n,r,l,c
const{disabled:d,isDragging:u,disableDrag:m,areRemoveAndArchiveEnabled:h,isSchemaBeingCreated:S,onDragStart:T,shouldShowIsParentLink:f,shouldShowIsRequired:I,shouldShowIsIntegration:D,isReviewableForFieldDataMigration:w}=this.props,k=this.getFieldWithChanges(),U=d||(0,A.Z)(k),B=this.state.isBeingEdited||S,q=B&&!R.m(k),G=B&&!k.isComputed&&!k.isConvertedFromLink,V=S||!d&&h&&this.props.isRemoveOnly||!U&&h&&!p.ZP.ENABLE_ARCHIVING_V2||(0,A.Z)(k)&&k.isComputed,H=!U&&h&&!S&&!this.props.isRemoveOnly,W=!U&&!S,Y=!d&&(0,A.Z)(k)
return o.createElement("div",{className:s()("simpleDivTable-rowContainer",{"is-dragging":this.props.isDragging,[(0,i.iv)(Z.archivedField)]:(0,A.Z)(k)}),...(0,b.Z)({component:"FieldTableRow",element:"root"})},o.createElement("a",{className:s()("u-primary-pointer simpleDivTable-action simpleDivTable-action--move",{faded:!u,"u-primary-color":u,invisible:U||m}),onMouseDown:m?void 0:T},o.createElement(M.Z,{icon:"arrows-up-down-left-right"})),o.createElement("div",{className:s()("simpleDivTable-multiColumnRow",(0,i.iv)(Z.fieldTableMultiColumnRow))},o.createElement("div",{className:s()("simpleDivTable-row",{"is-beingEdited":B})},o.createElement("div",{className:"simpleDivTable-cell"},o.createElement("div",{className:"simpleDivTable-cell-contents"},B?o.createElement(v.Z,{type:"text",name:"name",value:this.state.editingName,onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:"Insert a field",disabled:U,autoFocus:!0,dataTestAttrs:{component:"FieldTableRow",element:"inputField"}}):o.createElement("div",{className:s()((0,i.iv)(Z.verticalOrdering))},o.createElement(C.Z,{field:(0,A.t)(k)}),w&&o.createElement(L.Co,{buttonStyle:L.ZJ.PRIMARY,size:L.qE.MINI,textClassName:"button-text--nowrap",text:"Review & Publish",onClick:this.props.reviewMigration})))),o.createElement(N.Z,{editingName:this.state.editingSystemName,field:k,isBeingEdited:this.state.isBeingEdited,isDisabled:U||null!=(null===(e=this.props.disableControlsWithTooltips)||void 0===e?void 0:e[a.WAREHOUSE_NAME_INPUT]),onChange:this.handleChangeSystemName,onKeyDown:this.handleKeyDown,formInputTooltip:null===(t=this.props.disableControlsWithTooltips)||void 0===t?void 0:t[a.WAREHOUSE_NAME_INPUT]}),I&&o.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--narrow"},o.createElement("div",{className:"simpleDivTable-cell-contents--centered",...(0,b.Z)({component:"FieldTableRow",element:"isRequiredCheckboxRoot"})},(()=>{var e,t
return q?o.createElement(P.pf,{tooltipTitle:null===(e=this.props.disableControlsWithTooltips)||void 0===e?void 0:e[a.IS_REQUIRED_CHECKBOX]},o.createElement("div",null,o.createElement("input",{type:"checkbox",onChange:this.handleChangeIsRequired,checked:this.state.editingIsRequired,name:"isRequired",disabled:null!=(null===(t=this.props.disableControlsWithTooltips)||void 0===t?void 0:t[a.IS_REQUIRED_CHECKBOX]),...(0,b.Z)({component:"FieldTableRow",element:"isRequiredCheckbox"})}))):k.isRequired?"":null})())),D&&o.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--narrow"},o.createElement("div",{className:"simpleDivTable-cell-contents--centered"},(()=>q?o.createElement("input",{type:"checkbox",onChange:this.handleChangeIsIntegration,checked:this.state.editingIsIntegration,name:"isIntegration"}):k.isIntegration?"":null)())),o.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--narrow"},o.createElement("div",{className:"simpleDivTable-cell-contents--centered",...(0,b.Z)({component:"FieldTableRow",element:"isMultiCheckboxRoot"})},(()=>{var e,t
if(q){const n=!x.Fc(k)||k.isParentLink||null!=(null===(e=this.props.disableControlsWithTooltips)||void 0===e?void 0:e[a.IS_MULTI_CHECKBOX])
return o.createElement(P.pf,{tooltipTitle:null===(t=this.props.disableControlsWithTooltips)||void 0===t?void 0:t[a.IS_MULTI_CHECKBOX]},o.createElement("div",null,o.createElement("input",{type:"checkbox",onChange:this.handleChangeIsMulti,checked:this.state.editingIsMulti,disabled:n,name:"isMulti",...(0,b.Z)({component:"FieldTableRow",element:"isMultiCheckbox"})})))}return k.isMulti?"":null})())),f&&o.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--narrow"},o.createElement("div",{className:"simpleDivTable-cell-contents--centered"},(()=>q?x.x3(k.fieldType)?o.createElement("input",{type:"checkbox",onChange:this.handleChangeIsParentLink,checked:this.state.editingIsParentLink,disabled:k.isMulti||null==y.getRequiredLinkTagSchema(k),name:"isParentLink"}):null:k.isParentLink?"":null)())),o.createElement(g.ZP,{isFieldBeingCreated:this.props.isFieldBeingCreated,availableFieldOptions:this.props.availableFieldOptions,schemaFieldSelectors:this.props.schemaFieldSelectors,batchLinkProps:this.props.batchLinkProps,currentFieldState:this.getFieldWithChanges(),disableFieldDefinitionDropdownTooltip:null===(n=this.props.disableControlsWithTooltips)||void 0===n?void 0:n[a.FIELD_DEFINITION_DROPDOWN],inEditMode:G,onSelectFieldOption:e=>{this.handleChangeFieldOption(e)},ownerUrlId:this.props.ownerUrlId,registryId:this.props.registryId,lookupConfigDescriptionProps:this.state.editingLookupConfig&&this.props.lookupConfigModalProps?{baseSchema:null!==(r=this.props.lookupConfigModalProps.baseSchema)&&void 0!==r?r:null,lookupConfig:this.state.editingLookupConfig,context:this.props.lookupConfigModalProps.context,schemaFieldFilterFn:this.props.lookupConfigModalProps.schemaFieldFilterFn}:void 0}),!d&&o.createElement("div",{className:"simpleDivTable-actionGroupContainer"},o.createElement(E.Z,{isEditing:this.state.isBeingEdited&&!S,cancel:this.handleCancel,complete:this.handleComplete,copyAPIID:()=>{(0,F.Z)(this.props.initialField.apiId,{showToastOnSuccess:!0})},archive:H?this.handleArchive:null,remove:V?this.handleRemove:null,unarchive:Y?this.handleUnarchive:null,edit:W?this.handleEdit:null,isCompleteEnabled:Boolean(this.state.editingName),extraActionButtons:this.props.extraActionButtons,disableArchiveButtonWithTooltip:null===(l=this.props.disableControlsWithTooltips)||void 0===l?void 0:l[a.ARCHIVE_BUTTON],disableDeleteButtonWithTooltip:null===(c=this.props.disableControlsWithTooltips)||void 0===c?void 0:c[a.DELETE_BUTTON]})),o.createElement("div",{className:s()("simpleDivTable-actionGroupContainer",{"simpleDivTable-actionGroupContainer--hideOnHover":!d})},this.props.isUneditable&&o.createElement(O.E,{iconClassName:(0,i.iv)(Z.iconStyle)}))),this.props.shouldShowDescription&&(this.state.isBeingEdited||k.description)&&o.createElement("div",{className:s()((0,i.iv)(Z.fieldTableDescriptionRow,B&&Z.highlightedRow))},o.createElement("div",{className:s()("simpleDivTable-cell",(0,i.iv)(Z.fieldTableRowDescriptionCell))},o.createElement("div",{className:"simpleDivTable-cell-contents"},o.createElement(_.Z,{editingDescription:this.state.editingDescription||"",field:k,isEditingOrCreating:this.state.isBeingEdited,isDisabled:U,onChange:this.handleChangeDescription,onKeyDown:this.handleKeyDown}))))))}}FieldTableRow.defaultProps={isBeingEdited:!1,isDragging:!1,disableDrag:!1,isFieldBeingCreated:!1,areRemoveAndArchiveEnabled:!0,isRemoveOnly:!1,isSchemaBeingCreated:!1,disabled:!1,shouldShowIsParentLink:!1,shouldShowIsRequired:!1,shouldShowIsIntegration:!1,shouldShowRelaxationWarning:!1,shouldShowWarehouseWarning:!1,submissionWarnings:[],shouldShowSubmissionWarningOnCreate:!1,shouldShowDescription:!1,isReviewableForFieldDataMigration:!1}
const B=FieldTableRow,Z=i.mM.create({fieldTableMultiColumnRow:{display:"flex",flexDirection:"column",marginRight:"-25px",width:"100%",":hover":{backgroundColor:D.bs}},fieldTableRowDescriptionCell:{flex:"auto",width:"100%"},fieldTableDescriptionRow:{display:"flex",flexDirection:"row",marginRight:"-25px",width:"100%",padding:"0px 14px 10px 14px"},highlightedRow:{backgroundColor:D.bs},archivedField:{opacity:.6},iconStyle:{color:D.pp,marginRight:"10px",height:"12px",width:"12px"},verticalOrdering:{display:"flex",flexDirection:"column",width:"min-content"}})},619587:(e,t,n)=>{n.d(t,{K_:()=>getSnapshotFieldDisabledMessage,MT:()=>getNewOrUpdatedSnapshotFields,pw:()=>getFieldDefinition,yS:()=>haveFieldsChanged})
var a=n(615439),i=n.n(a),r=n(531041),s=n(497790),o=n(379346),l=n(556543)
function getFieldDefinition(e){return e.isSnapshot?s.ComputedFieldType.SNAPSHOT:e.fieldType}function getSnapshotFieldDisabledMessage(e,t){let n
null==e?n="Not available during schema creation":e.fields.some((e=>(0,l.$5)(e.fieldType)))||o.ZP.isProcessOutputSchema(e.id)?null==t.apiId||t.isSnapshot||(n="Cannot change existing field into computed field (snapshot)"):n="Not available if there are no link fields"
return n}function getNewOrUpdatedFields(e,t){const n=e.map((e=>r.default.omit(e,"cid")))
return t.map((e=>r.default.omit(e,"cid"))).filter((e=>!n.some((t=>i()(t,e)))))}function haveFieldsChanged(e,t){return getNewOrUpdatedFields(e,t).length>0||function getDeletedFields(e,t){return e.filter((e=>!t.some((t=>e.apiId===t.apiId))))}(e,t).length>0||function hasReorderedFields(e,t){return t.filter(((t,n)=>e.some(((e,a)=>e.apiId===t.apiId&&n!==a)))).length>0}(e,t)}function getNewOrUpdatedSnapshotFields(e,t){return getNewOrUpdatedFields(e,t).filter((e=>Boolean(e.isSnapshot)))}},170121:(e,t,n)=>{n.d(t,{t:()=>r})
var a=n(769784),i=n(91092)
const r=a.Ps`
  query RegistrySummaryQuery($registryId: StrictString!) @skipAudit @engComponent(name: REGISTRY) {
    registry(id: $registryId) {
      ... on RegistryNode {
        ...RegistrySummaryGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("RegistrySummary").fragment}
  ${(0,i.f)("InaccessibleInfo").fragment}
`},768614:(e,t,n)=>{n.d(t,{JT:()=>s,T$:()=>o,Wr:()=>r,nC:()=>i,wR:()=>isMixtureEditable,xK:()=>ingredientToUpdateIngredientParams})
var a=n(256605)
const i={stringValue:"1.0",numericValue:1},r=a.mJ.L
function isMixtureEditable(e){return e.writable}const s=[a.mJ.L,a.mJ.mL,a.mJ.uL,a.mJ.nL,a.mJ.kg,a.mJ.g,a.mJ.mg,a.mJ.ug,a.mJ.Units],o=[a.lU.L,a.lU.mL,a.lU.uL,a.lU.nL,a.lU.kg,a.lU.g,a.lU.mg,a.lU.ug,a.lU.Units,a.lU.Cells,a.lU.mol,a.lU.mmol,a.lU.umol]
function ingredientToUpdateIngredientParams(e){var t,n,a,i
return{id:e.id,componentBioentityId:e.componentBioentity.id,catalogIdentifier:e.catalogIdentifier,componentLotValues:{text:e.componentLotValues.text,bioentityId:null!==(n=null===(t=e.componentLotValues.bioentity)||void 0===t?void 0:t.id)&&void 0!==n?n:null,containerId:null!==(i=null===(a=e.componentLotValues.container)||void 0===a?void 0:a.id)&&void 0!==i?i:null},amount:e.amount,units:e.units,notes:e.notes}}},785085:(e,t,n)=>{n.d(t,{Z:()=>i})
var a=n(771398)
const i={create:e=>a.ty({url:"/1/api/schema-field-selectors/",data:e}),delete:e=>a.$v({url:`/1/api/schema-field-selectors/${e}`}),bulkArchive:(e,t)=>a.ty({url:"/1/api/schema-field-selectors:bulk-archive",data:{ids:e,purpose:t}}),bulkUnarchive:e=>a.ty({url:"/1/api/schema-field-selectors:bulk-unarchive",data:{ids:e}}),fetch:e=>a.xA("/1/api/schema-field-selectors/",{registryId:e}),update:(e,t)=>a.Yh({url:`/1/api/schema-field-selectors/${e}`,data:t})}},500147:(e,t,n)=>{n.d(t,{$7:()=>R,CB:()=>A,M4:()=>y,Pj:()=>E,Y:()=>h,Z:()=>S,ao:()=>g,c8:()=>T,eE:()=>a,fp:()=>C,iQ:()=>I,il:()=>p,n8:()=>f,us:()=>_})
var a,i=n(602652),r=n(56063),s=n(133832),o=n(468991),l=n(227887),c=n(263174),d=n(497790),u=n(118559),m=n(544192)
!function(e){e.REQUESTED="REQUESTED"
e.SCHEDULED="SCHEDULED"
e.IN_PROGRESS="IN_PROGRESS"
e.COMPLETED="COMPLETED"
e.CANCELLED="CANCELLED"}(a||(a={}))
const p=[a.REQUESTED,a.SCHEDULED,a.IN_PROGRESS,a.COMPLETED,a.CANCELLED],h={[a.REQUESTED]:"Requested",[a.SCHEDULED]:"Scheduled",[a.IN_PROGRESS]:"In Progress",[a.COMPLETED]:"Completed",[a.CANCELLED]:"Cancelled"},E=i.shape({team:c.TEAM,user:i.shape(o.ZP.USER_SHAPE)}),S=(i.shape({id:i.string.isRequired,name:i.string.isRequired}),{id:i.string.isRequired,assignees:i.arrayOf(E.isRequired).isRequired,createdAt:i.string.isRequired,creator:i.object.isRequired,requestor:i.object,name:i.string.isRequired,projectId:i.string,requestStatus:i.oneOf(p).isRequired,scheduledOn:i.string,schemaId:i.string.isRequired,tags:i.arrayOf(l.kY).isRequired,permissions:r.OD.isRequired}),T=i.shape(S),g=i.shape({batch:s.s2,bioentity:l.i2,status:i.oneOf([u.oT,u.sY]).isRequired}),f=i.shape({samples:i.arrayOf(g.isRequired).isRequired}),I=i.shape({id:i.string.isRequired,fields:i.arrayOf(d.SCHEMA_FIELD_SHAPE.isRequired).isRequired,name:i.string.isRequired,prefix:i.string.isRequired,sqlIdentifier:i.string.isRequired,organization:c.ORGANIZATION.isRequired,requestTaskSchemaIds:i.arrayOf(i.string.isRequired).isRequired,sampleGroupSchema:m.UJ}),A="SCHEMA_ID_REQUEST_SCHEMA_ALL",y={id:A,name:"All"},_=(i.objectOf(i.objectOf(i.string.isRequired).isRequired),"input"),C="Inputs",R={SELECT_REQUEST_SAMPLE_FORM_DEFAULT_INPUT_TYPE:"SelectRequestSampleForm.defaultInputType",LAST_USED_REQUEST_PROJECT:"requests.create.LAST_USED_PROJECT"}},976503:(e,t,n)=>{n.d(t,{XO:()=>getFulfillableStatuses,t5:()=>fetchRequest,xf:()=>requestEditorURL})
var a=n(771398)
function fetchRequest(e){return Promise.resolve(a.xA(`/1/api/requests/${e}`))}function requestEditorURL(e){return`/requests/${e}`}function getFulfillableStatuses(e){return Promise.resolve(a.ty({url:"/1/api/requests:bulk-get-fulfillable-statuses",data:{requestIds:e}}))}},986298:(e,t,n)=>{n.d(t,{Z:()=>E})
var a=n(602652),i=n.n(a),r=n(989526),s=n(232606),o=n(377249),l=n(593732),c=n(726456),d=n(617436),u=n(525999),m=n(497790),p=n(793326),h=n(544192)
class RequestSampleCell extends r.Component{componentDidMount(){this._fetchContainerData()}componentDidUpdate(){this._fetchContainerData()}_fetchContainerData(){const e=this._getSample()
if(e&&"containerId"in e&&e.containerId){(0,l.z)(o.V.CONTAINER,e.containerId)
c.Z.requestFetch(e.containerId)}}_getSample(){const e=this.props.samples;(0,s.Gp)(e.length<=1,"Expected at most 1 sample per field per sample group")
return e.length>0?e[0]:null}render(){const e=this._getSample()
return e?r.createElement("div",null,r.createElement(p.Z,{sample:e}),"containerId"in e&&e.containerId&&[r.createElement("span",{key:"containerLink"}," (",r.createElement(d.Z,{containerId:e.containerId}),")"),r.createElement("div",{key:"ancestralStorables"},r.createElement(u.ZP,{className:"richObjectTable-detailText",storableId:e.containerId,noLocationText:"No location",showGridCell:!0,truncate:!0}))]):null}}RequestSampleCell.propTypes={samples:i().arrayOf(h.Lv.isRequired).isRequired,tagSchemaField:m.SCHEMA_FIELD_SHAPE}
const E=RequestSampleCell},722417:(e,t,n)=>{n.d(t,{Z:()=>canRequestsBeExecuted})
var a=n(531041),i=n(975466)
function canRequestsBeExecuted({requests:e,requestSchemaByRequestId:t,requestIdToRequestHasSamples:n}){return 0===e.length?{executeEnabled:!1,explanationMessage:"Select a request to execute"}:function hasExecutePermissionOnRequests(e){return e.every((e=>e.permissions.canExecuteRequest))}(e)?function doRequestsHaveNeededSamples(e,t,n){return!a.default.isEmpty(t)&&e.every((e=>{const a=t[e.id].sampleGroupSchema
return!a||a&&Boolean(n[e.id])}))}(e,t,n)?function areSelectedRequestsCompatible(e,t){const n=e.map((({id:e})=>(0,i.CE)(t[e])))
return n.every((e=>e===n[0]))}(e,t)?{executeEnabled:!0,explanationMessage:null}:{executeEnabled:!1,explanationMessage:"Cannot execute requests because sample types are mismatched"}:{executeEnabled:!1,explanationMessage:"No samples specified"}:{executeEnabled:!1,explanationMessage:"Requires execute permission for all selected requests"}}},951663:(e,t,n)=>{n.d(t,{ZP:()=>lt,mu:()=>defaultRequestsSearchParams})
var a=n(764403),i=n.n(a),r=n(989526),s=n(615439),o=n.n(s),l=n(531041),c=n(232606),d=n(634489),u=n(459830),m=n(294120),p=n(776065),h=n(104801),E=n(256605),S=n(24949),T=n(377249),g=n(781024),f=n(484827),I=n(977288),A=n(817285),y=n(483715),_=n(375619),C=n(971466),R=n(749334),N=n(797431),O=n(321261),b=n(872543),v=n(377145),P=n(320176),L=n(399649),D=n(166459),M=n(722417),w=n(735606),F=n(199052),k=n(500147),U=n(906719),x=n(930113),B=n(554353),Z=n(865886),q=n(224921),G=n(606903),V=n(539593),H=n(14436),W=n(9397),Y=n(496714),$=n(665182),K=n(62315),z=n(374669),Q=n(795424),j=n(68526),J=n(343106),X=n(334148),ee=n(476604),te=n(629656),ne=n(194786),ae=n(75359),ie=n(61279),re=n(602652),se=n.n(re),oe=n(348920),le=n(3472),ce=n(949180),de=n(429549),ue=n(535540),me=n(641329),pe=n(590441),he=n(252511),Ee=n(89635),Se=n(36424),Te=n(269304),ge=n(63573),fe=n(161641),Ie=n(214918),Ae=n(911252),ye=n(271992)
class ExpandedRequestTable extends r.Component{constructor(){super(...arguments)
this._handleToggleSelectRequests=(e,t)=>{const n=(0,ie.Af)({state:{selectedItemIds:this.props.selectedRequestIds},toggledIds:l.default.pluck(e,"id"),isSelected:t,rowSelectionMode:ge.rT.MULTIPLE})
this.props.onUpdateSelectedRequestIds(n.selectedItemIds)}}shouldComponentUpdate(e){return!o()(this.props,e)}_hasAllRequestTaskSchemaIds(){return null!=this.props.requests&&!this.props.requests.some((e=>null==this.props.requestedTaskSchemaIdsByRequestId[e.id]))}render(){if(!(this.props.requests&&this.props.schemas&&this.props.requestTaskSchemasById&&this._hasAllRequestTaskSchemaIds()))return r.createElement(ce.Z,null)
const e=this.props.requests.map((e=>({...e,schema:l.default.findWhere(this.props.schemas,{id:e.schemaId})}))).filter((e=>null!=e.schema)),t=he.IX(e),n=e.map((e=>{const{tagFields:n}=he.MN({tags:e.tags,tagColumns:t}),a=(0,me.Z)(this.props.requestedTaskSchemaIdsByRequestId[e.id].map((e=>this.props.requestTaskSchemasById[e])))
return{id:e.id,data:{name:e.name,assignees:r.createElement(de.Z,{assignees:e.assignees}),created:r.createElement(Ie.h,{datetime:e.createdAt,showTimeInCell:!1}),creator:e.creator.name,requestor:e.requestor.name,scheduledOn:r.createElement(fe.Z,{date:e.scheduledOn}),status:r.createElement(Ae.Z,{requestStatus:e.requestStatus}),sampleStatusCounts:r.createElement(ye.Z,{statusCounts:this.props.sampleStatusCountsByRequestId[e.id]}),requestedTaskSchemas:a.map((e=>e.name)).join(", "),...n},icon:r.createElement(Se.Z,{icon:"request",className:"scrollableTable-cell-icon"}),extra:{request:e},isSelected:this.props.selectedRequestIds.includes(e.id)}})),a=function getColumns(e,t=[]){return[{accessorKey:"name",header:"Request ID",flexGrow:1,isFixed:!0},{accessorKey:"status",header:"Status",flexGrow:1},{accessorKey:"sampleStatusCounts",header:"Samples",flexGrow:1},{accessorKey:"requestedTaskSchemas",header:"Tasks",flexGrow:1},{accessorKey:oe.ZP.REQUESTS_ENABLE_REQUESTOR?"requestor":"creator",header:oe.ZP.REQUESTS_ENABLE_REQUESTOR?"Requestor":"Creator",flexGrow:1},{accessorKey:"created",header:(0,Ee.o7)(K.bo.SORT_CREATED_AT_KEY),flexGrow:1,isSortable:!0,sortDirection:(0,ie.Op)(e,K.bo.SORT_CREATED_AT_KEY),sortKey:K.bo.SORT_CREATED_AT_KEY},{accessorKey:"assignees",header:"Assigned To",flexGrow:1},{accessorKey:"scheduledOn",header:(0,Ee.o7)(K.bo.SORT_SCHEDULED_ON_KEY),flexGrow:1,isSortable:!0,sortDirection:(0,ie.Op)(e,K.bo.SORT_SCHEDULED_ON_KEY),sortKey:K.bo.SORT_SCHEDULED_ON_KEY}].filter((({accessorKey:e})=>!t.includes(e)))}(this.props.sorts,function getOmittedColumnsKeys(e){const t=[]
e.some((e=>null!=e.schema.sampleGroupSchema))||t.push("sampleStatusCounts")
e.some((e=>e.schema&&e.schema.requestTaskSchemaIds.length>0))||t.push("requestedTaskSchemas")
return t}(e)).concat(t)
return r.createElement(Te.Z,{canFilterColumns:!0,canResizeColumns:!0,rowSelectionMode:ge.rT.MULTIPLE,className:"u-flex-grow",columns:a,emptyTableText:this.props.emptyMessage,getRowContentHeight:t=>t>=e.length?ge._5:he.NE(e[t].tags),isCompact:this.props.isCompact,matchParentHeight:!0,onChangeSort:this.props.onChangeSort,onRowClick:e=>{const t=e.extra.request.id;(0,Q.KN)(t,this.props.searchResults)
p.Z.openFile(t)},onRowsSelect:this._handleToggleSelectRequests,rows:n,tableKey:ge.Uw.EXPANDED_REQUEST_TABLE})}}ExpandedRequestTable.propTypes={requests:se().arrayOf(k.c8.isRequired),schemas:se().arrayOf(k.iQ.isRequired),onUpdateSelectedRequestIds:se().func.isRequired,selectedRequestIds:se().arrayOf(se().string.isRequired).isRequired,sorts:le.SORTS_SHAPE.isRequired,onChangeSort:se().func.isRequired,requestTaskSchemasById:se().objectOf(pe.eM),requestedTaskSchemaIdsByRequestId:se().objectOf(se().arrayOf(se().string.isRequired).isRequired).isRequired,sampleStatusCountsByRequestId:se().objectOf(ue.Nz.isRequired).isRequired}
const _e=ExpandedRequestTable
var Ce=n(204940),Re=n(18713)
function NewRequestDropdown(e){return r.createElement(Ce.Z,{schemas:function hasSchemasAndAllTemplates(){if(null==e.schemas||null==e.requestTemplatesById)return!1
for(const t of e.schemas)for(const n of t.requestTemplateIds)if(null==e.requestTemplatesById[n])return!1
return!0}()?e.schemas:null,onSelect:t=>{e.onOpenCreateModal((0,Re.Z)(t,e.requestTemplatesById,e.requestTaskSchemasById))}})}var Ne=n(80549),Oe=n(157530),be=n(751006),ve=n(738648)
const dashboard_RequestsFiltersContainer=e=>{const{allTaskSchemas:t,selectedAssaySchema:n}=e,a=(0,ve.TD)(t||[],n),i=oe.ZP.REQUESTS_ENABLE_REQUESTOR?{filterKey:K.Vm.REQUEST_REQUESTOR}:{filterKey:K.Vm.CREATOR}
return r.createElement(be.Z,{saveSearchButton:e.saveSearchButton,primaryFilterOptions:l.default.compact([{filterKey:K.Vm.ASSAY_SCHEMA,extraProps:{assaySchemas:e.assaySchemas||[]}},a.length>0&&{filterKey:K.Vm.REQUEST_TASK_SCHEMA,extraProps:{selectedAssaySchema:n}},e.isExpanded&&{filterKey:K.Vm.REQUEST_STATUS},e.isExpanded&&i,e.isExpanded&&{filterKey:K.Vm.REQUEST_ASSIGNEE},e.isExpanded&&{filterKey:K.Vm.REQUEST_IDS}]),secondaryFilterGroups:[{filterOptions:l.default.compact([{filterKey:K.Vm.ARCHIVE_PURPOSES,extraProps:{archivePurposes:(0,Oe.FH)(null)}},{filterKey:K.Vm.CREATED_AT},!e.isExpanded&&{filterKey:K.Vm.REQUEST_STATUS},!e.isExpanded&&i,!e.isExpanded&&{filterKey:K.Vm.REQUEST_ASSIGNEE},!e.isExpanded&&{filterKey:K.Vm.REQUEST_IDS},n&&n.id!==k.CB?{filterKey:K.Vm.SCHEMA_FIELD,extraProps:{schemaFields:n.fields}}:null])}],filters:e.filters,filterErrors:e.filterErrors,onChangeFilters:e.onChangeFilters,selectedSchema:n!==k.M4?n:null,clearButton:e.clearButton})}
var Pe=n(212300),Le=n(692008),De=n(675649),Me=n(49002),we=n(868710),Fe=n(198964),ke=n(865486),Ue=n(297020),xe=n(924982),Be=n(502633),Ze=n(64558),qe=n(974913),Ge=n(733714),Ve=n(448009),He=n(103593),We=n(59860),Ye=n(688319),$e=n(389760),Ke=n(308783),ze=n(876542),Qe=n(801455),je=n(134749),Je=n(205986),Xe=n(467922),et=n(10584)
var tt
!function(e){e.ASSIGNEES="ASSIGNEES"
e.SCHEDULED_ON="SCHEDULED_ON"}(tt||(tt={}))
class BulkUpdateRequestsModalConnector extends d.C{constructor(){super(...arguments)
this.stores=[q.Z]}enhanceProps(){return{schema:q.Z.getRequestSchema(this.props.schemaId)}}}const nt=BulkUpdateRequestsModalConnector.connect((function BulkUpdateRequestsModal(e){const[t,n]=(0,Ke.Z)(!1),[a,i]=(0,r.useState)();(0,$e.Z)((()=>{Z._L(e.schemaId)}))
const[s,l]=(0,r.useState)();(0,c.hu)(e.requests.length>0,"BulkUpdateRequestsModal opened with no requests")
function _areAssigneesEqual(e,t){var n,a
return!(!e.user||(null===(n=t.user)||void 0===n?void 0:n.id)!==e.user.id)||!(!e.team||(null===(a=t.team)||void 0===a?void 0:a.id)!==e.team.id)}const d=function _requestsHaveTheSameAssignees(){const t=new Set(e.requests[0].assignees)
for(const n of e.requests)if(!(0,Ze.OL)(t,new Set(n.assignees),_areAssigneesEqual))return!1
return!0}(),u=function _requestsHaveTheSameScheduledOn(){const t=e.requests[0].scheduledOn
return e.requests.every((e=>e.scheduledOn===t))}(),m=(0,r.useMemo)((()=>d?e.requests[0].assignees:[]),[d,e.requests])
return e.schema?r.createElement(Je.ZP,{large:!0,closeableOnEscapeKey:!1,scrollable:!1,title:`Update ${e.schema.name} ${(0,De._6)(e.requests.length,"Request")}`,buttons:[{text:t?"Updating...":"Update",onClick:async function _handleUpdateRequest(){n(!0)
const t={}
if(null!=a){(0,c.Gp)(e.fieldToUpdate===tt.ASSIGNEES,`Changed assignees when fieldToUpdate is ${e.fieldToUpdate}`)
t.assignees=(0,Ve.Z)(a)}if(null!=s){(0,c.Gp)(e.fieldToUpdate===tt.SCHEDULED_ON,`Changed scheduled on when fieldToUpdate is ${e.fieldToUpdate}`)
if(!(0,et.qb)({textValue:s})){qe.ZP.error("Invalid format for scheduled on date.")
n(!1)
return}t.scheduledOn=s}if(o()(t,{}))e.onRequestClose()
else try{await e.onRequestSubmit(t)
e.onRequestClose()}catch(e){n(!1)
throw e}},style:X.ZJ.PRIMARY,disabled:t}],onRequestClose:e.onRequestClose},r.createElement("div",null,e.fieldToUpdate===tt.ASSIGNEES&&r.createElement(We.Z,null,r.createElement(He.Z,{xs:6},r.createElement(Qe.Z,{label:"Previously assigned to:",labelStyle:Qe.Z.STYLES.LABEL}),r.createElement("div",{className:"u-tiny-spacing-top"},d?r.createElement(de.Z,{assignees:e.requests[0].assignees}):r.createElement(Xe.Z,{value:"Requests have different assignees"}))),r.createElement(He.Z,{xs:6},r.createElement(Qe.Z,{label:"New assignee(s):",labelStyle:Qe.Z.STYLES.LABEL}),r.createElement(Ge.Z,{assignees:null!=a?a:m,onUpdateAssignees:i,organizationId:e.schema.organization.id,shouldChangeBeConfirmed:!1}))),e.fieldToUpdate===tt.SCHEDULED_ON&&r.createElement(We.Z,null,r.createElement(He.Z,{xs:6},r.createElement(Qe.Z,{label:"Previously scheduled on:",labelStyle:Qe.Z.STYLES.LABEL}),r.createElement("div",{className:"u-tiny-spacing-top"},u?r.createElement(Ye.Z,{onChange:()=>{},value:e.requests[0].scheduledOn,isDisabled:!0}):r.createElement(Xe.Z,{value:"Requests are scheduled on different dates"}))),r.createElement(He.Z,{xs:6},r.createElement(Qe.Z,{label:"New scheduled on:",labelStyle:Qe.Z.STYLES.LABEL}),r.createElement(ze.Z,{labelStyle:je.WS.HIDDEN,onChange:l,value:null!=s?s:u?e.requests[0].scheduledOn:""}))))):r.createElement(ee.b,null)}))
const at=(0,Pe.$j)(null,(function mapDispatchToProps(e){return{onBulkUpdateRequests:(t,n)=>e((0,Me.Du)(t,n))}}))((function BulkUpdateRequestsButton(e){function _areRequestSchemasIdentical(){const t=e.requests[0].schemaId
for(const n of e.requests)if(n.schemaId!==t)return!1
return!0}const handleBulkUpdateRequests=async t=>{await(0,Be.Z)(nt,{schemaId:e.requests.length>0?e.requests[0].schemaId:"",requests:e.requests,fieldToUpdate:t,onRequestSubmit:t=>e.onBulkUpdateRequests(e.requests.map((({id:e})=>e)),t)})}
return r.createElement("div",{className:"buttonGroup"},r.createElement(we.ZP,{title:function _getTooltipTitle(){return 0===e.requests.length?"Select request(s) to edit":_areRequestSchemasIdentical()?`Edit ${(0,De._6)(e.requests.length,"request")}...`:"Cannot bulk edit requests of different schemas"}(),placement:we.TQ.TOP},r.createElement(Fe.ZP,{menu:r.createElement(ke.ZP,{height:ke.ZP.HEIGHTS.MEDIUM,width:ke.ZP.WIDTHS.SMALL},r.createElement(xe.Z,{contentType:Ue.O7.PLAIN,onSelect:async()=>{await handleBulkUpdateRequests(tt.ASSIGNEES)}},"Assignees"),r.createElement(xe.Z,{contentType:Ue.O7.PLAIN,onSelect:async()=>{await handleBulkUpdateRequests(tt.SCHEDULED_ON)}},"Scheduled On"))},r.createElement(X.Co,{buttonStyle:e.buttonStyle,className:e.className,disabled:0===e.requests.length||!_areRequestSchemasIdentical(),icon:r.createElement(Se.Z,{icon:"edit"}),isDropdown:!0,size:X.qE.SMALL}))))}))
var it=n(627378),rt=n(251658),st=n(595415)
class RequestsToolbar extends r.Component{_handleExportToCSV(){(0,rt.Px)((0,st.L)(this.props.selectedRequests),"requests.csv")}render(){return 0===this.props.selectedRequests.length?null:r.createElement("div",{className:"buttonGroup"},r.createElement(at,{buttonStyle:X.ZJ.TERTIARY_WHITE,requests:this.props.selectedRequests}),oe.ZP.ENABLE_EXPORTS&&r.createElement(Le.Z,{menuItems:[[{name:"Export Selected Rows to CSV",handleOnClick:()=>{this._handleExportToCSV()}}]],useCaret:!0}),r.createElement(it.Z,{isDisabled:!1,buttonStyle:X.ZJ.TERTIARY_WHITE,onUpdateRequestStatus:e=>this.props.onBulkUpdateRequests(this.props.selectedRequests.map((({id:e})=>e)),{requestStatus:e})}))}}const ot=(0,Pe.$j)(null,(function RequestsToolbar_mapDispatchToProps(e){return{onBulkUpdateRequests:(t,n)=>{e(Me.Du(t,n))}}}))(RequestsToolbar)
function defaultRequestsSearchParams(){return{filters:[{...(0,K.QW)(K.Vm.ASSAY_SCHEMA),value:k.CB},{...(0,K.QW)(K.Vm.TYPES),value:[u.REQUEST]}],limit:(0,b.z3)(),offset:0,query:"",sorts:z.i_(m.$0.REQUESTS)}}const fetchAllRequestTemplates=()=>{(0,D.getStore)().dispatch(B.br())},fetchRequestTaskSchemas=()=>{(0,D.getStore)().dispatch(x.Qd())},onOpenCreateModal=e=>{(0,D.getStore)().dispatch((0,Ne.Z)(e))}
class RequestsSidepanelConnector extends d.C{constructor(){super(...arguments)
this.stores=[q.Z]}enhanceProps(){const e=this.reduxState(),{sampleStatusCountsByRequestId:t,requestedTaskSchemaIdsByRequestId:n}=e.models.requests.inputs,{requestTaskSchemasById:a}=e.models.requests.schemas,i=(0,U.SR)(e.models.requests.schemas),{requestTemplatesById:r}=e.models.requests.templates,s=q.Z.getRequestSchemas(),o={fetchAllRequestTemplates,fetchRequestTaskSchemas,isFetchingRequests:!0,onOpenCreateModal,requests:null,requestSchemas:s,requestTaskSchemasById:a,requestedTaskSchemaIdsByRequestId:n,requestTemplatesById:r,sampleStatusCountsByRequestId:t,sortedRequestTaskSchemas:i}
if(!this.props.searchResults)return o
const l=this.getOrFetchMultipleOptionalDeprecated(T.V.REQUEST_BY_ID,this.props.searchResults.ids),c=this.props.searchResults.ids.map((e=>l[e]))
return{...o,isFetchingRequests:!1,requests:c.every((e=>Boolean(e)))?c:null}}}function RequestsSidepanelCrumbs(e){return e.activeSavedSearch?r.createElement(f.bJ,{crumbs:[r.createElement(f.Ak,{key:"requests",text:"Requests",onClick:()=>{e.onSearch(j._j(e.searchParams,[],defaultRequestsSearchParams().filters))
e.onSelectSavedSearch(void 0)}}),r.createElement(f.Ak,{key:"root",text:e.activeSavedSearch.name})]}):r.createElement(f.bJ,{crumbs:[r.createElement("span",{key:"root"},"Requests")]})}class RequestsSidepanel extends r.Component{constructor(){super(...arguments)
this._handleSearch=e=>{this.props.onSearch(e)
z.WN(m.$0.REQUESTS,e.sorts)}
this._handleClear=()=>{this._handleSearch(j._j(this.props.searchParams,[],defaultRequestsSearchParams().filters))
this.props.activeSavedSearch&&this.props.onSelectSavedSearch(void 0)}
this._isClearEnabled=()=>{const e=V.$V(this.props.searchParams.filters,K.Vm.ASSAY_SCHEMA)
return j.yE(this.props.searchParams,[K.Vm.ASSAY_SCHEMA],[u.REQUEST])||!e||e!==k.CB}
this._getEmptyMessage=()=>this.props.loadingState===g.Gu.FAILED?K.Jc:"No requests"}componentDidMount(){Z.TN()
this.props.fetchRequestTaskSchemas();(0,S.Z)("requestTemplates","all",(()=>this.props.fetchAllRequestTemplates()))}shouldComponentUpdate(e){const t=["fetchAllRequestTemplates","fetchRequestTaskSchemas","onOpenCreateModal","onRefreshListing","onSearch","onUpdateFilters","onUpdateOffset","onUpdateQueryString","onUpdateSortOrder","onUpdatePageSize","onUpdateGroupBy","onSelectIds","onToggleItemsExpanded","onRequestMoreChildItems","childPageSize"]
return!o()(l.default.omit(this.props,t),l.default.omit(e,t))}_getSelectedSchemaId(){const e=this.props.searchParams.filters.find((e=>e.key===K.Vm.ASSAY_SCHEMA))
return e?e.value:null}_getSelectedSchema(){return this.props.requestSchemas?this._getSelectedSchemaId()===k.CB?k.M4:l.default.findWhere(this.props.requestSchemas,{id:this._getSelectedSchemaId()})||null:null}_handleChangeSortFromKey(e){const t=(0,ie.dt)(this.props.searchParams.sorts,e)
this.props.onUpdateSortOrder([t])}_openExecuteRequestsModal(){(0,c.Gp)(null!=this.props.requests,"Expected requests to be non-null")
te.bA(F.ZP,r.createElement(F.ZP,{requests:this.props.selectedIds.map((e=>l.default.find(this.props.requests,{id:e}))),initialFilters:this.props.searchParams.filters,requestSchemasByRequestId:this._getSelectedRequestSchemasByRequestId(),onRequestClose:()=>{te.xv(F.ZP)}}))}_getPagination(){return this.props.searchParams&&this.props.searchResults?{offset:this.props.searchParams.offset,limit:this.props.searchParams.limit,total:this.props.searchResults.total,isExact:this.props.searchResults.isExact}:null}_renderResultsPager(){const e=this._getPagination()
return this.props.searchParams&&this.props.searchResults&&this.props.requests&&e?r.createElement(ae.Z,{isLoading:this.props.isFetchingRequests,pagination:e,setOffset:this.props.onUpdateOffset}):null}_getSelectedRequestSchemasByRequestId(){if(null==this.props.requests||null==this.props.requestSchemas)return null
const e={}
for(const t of this._getSelectedRequests()){const n=l.default.findWhere(this.props.requestSchemas,{id:t.schemaId})
e[t.id]=n||null}return e}*_getSelectedRequests(){if(this.props.requests)for(const e of this.props.requests)this.props.selectedIds.includes(e.id)&&(yield e)}_renderExecuteButton(){const e={},t=Array.from(this._getSelectedRequests())
for(const n of t){const t=this.props.sampleStatusCountsByRequestId[n.id]
e[n.id]=Object.values(t).filter((e=>0!==e)).length>0}const{executeEnabled:n,explanationMessage:a}=(0,M.Z)({requests:t,requestSchemaByRequestId:this._getSelectedRequestSchemasByRequestId(),requestIdToRequestHasSamples:e})
return r.createElement(w.Z,{buttonStyle:X.ZJ.TERTIARY_BLUE,className:"u-mini-spacing-right",disabled:!n,onClick:()=>{this._openExecuteRequestsModal()},tooltipTitle:a})}_renderSettingsDropdown(){return r.createElement(A.ZP,{onSetSortOrder:this.props.onUpdateSortOrder,onSetPageSize:this.props.onUpdatePageSize,searchParams:this.props.searchParams,availableSortKeys:[K.bo.SORT_CREATED_AT_KEY,K.bo.SORT_SCHEDULED_ON_KEY,K.bo.SORT_IDENTIFIER_KEY],displaySettingsConfig:{isCompact:this.props.isCompactDisplay,setIsCompactDisplay:this.props.setIsCompactDisplay}})}_renderSidepanelContents(){if(this.props.searchParams&&this.props.requestTaskSchemasById&&this.props.requestSchemas){const e=!this.props.activeSavedSearch&&this._isClearEnabled()?r.createElement(Y.Z,{searchSection:E.yd.REQUESTS,activeSavedSearch:this.props.activeSavedSearch,onSaved:this.props.onSelectSavedSearch,searchParams:this.props.searchParams}):void 0,t=(0,h.Z)("ENABLE_SIGHTGLASS_SHARED_SAVED_SEARCH")&&this.props.activeSavedSearch&&this.props.isExpanded?r.createElement($.Z,{searchSection:E.yd.REQUESTS,activeSavedSearch:this.props.activeSavedSearch,onSaved:this.props.onSelectSavedSearch,onDeleted:()=>{this.props.onSelectSavedSearch(void 0)}}):void 0,n=r.createElement(I.Z,{buttons:r.createElement("div",null,t,r.createElement(v.Z,{className:"u-mini-spacing-left u-mini-spacing-right",expanded:this.props.isExpanded}),this.props.isExpanded?this._renderExecuteButton():null,r.createElement(NewRequestDropdown,{schemas:this.props.requestSchemas,onOpenCreateModal:this.props.onOpenCreateModal,requestTemplatesById:this.props.requestTemplatesById,requestTaskSchemasById:this.props.requestTaskSchemasById})),crumbs:r.createElement(RequestsSidepanelCrumbs,{activeSavedSearch:this.props.activeSavedSearch,onSelectSavedSearch:this.props.onSelectSavedSearch,onSearch:this.props.onSearch,searchParams:this.props.searchParams}),savedSearchHeader:r.createElement(W.Z,{searchSection:E.yd.REQUESTS,onSelectSavedSearch:this.props.onSelectSavedSearch,activeSavedSearch:this.props.activeSavedSearch,key:"saved-searches-dropdown",onSearch:this.props.onSearch,searchParams:this.props.searchParams,isExpanded:this.props.isExpanded}),isExpanded:this.props.isExpanded,queryInput:r.createElement(H.Z,{onUpdateQuery:this.props.onUpdateQueryString,query:this.props.searchParams.query}),filtersContainer:r.createElement(dashboard_RequestsFiltersContainer,{allTaskSchemas:this.props.sortedRequestTaskSchemas,assaySchemas:this.props.requestSchemas,filters:this.props.searchParams.filters,filterErrors:this.props.filterErrors,isExpanded:this.props.isExpanded,onChangeFilters:this.props.onUpdateFilters,selectedAssaySchema:this._getSelectedSchema(),saveSearchButton:e,clearButton:this._isClearEnabled()?r.createElement(G.Z,{onClear:this._handleClear}):null}),settingsDropdown:this._renderSettingsDropdown()}),a=(0,L.B8)()
return this.props.isExpanded?r.createElement(r.Fragment,null,r.createElement(ne.X2,{fluid:!0},r.createElement(ne.JX,{lg:1}),r.createElement(ne.JX,{lg:21,className:"u-flex-display u-vertical-flex"},n,r.createElement("div",{className:"u-lr-split u-small-spacing-top"},r.createElement("div",{className:"u-lr-split"},r.createElement("div",{className:"u-flex-display"},this._renderResultsPager()),this._renderSettingsDropdown()),r.createElement(C.Z,null,r.createElement(N.Z,{numSelected:this.props.selectedIds.length}),this.props.requests&&r.createElement(ot,{selectedRequests:Array.from(this._getSelectedRequests())}))),r.createElement("div",{className:"u-flex-grow u-flex-display u-small-spacing-top"},r.createElement(P.ZP,{...a},r.createElement(_e,{isCompact:this.props.isCompactDisplay,emptyMessage:this._getEmptyMessage(),requests:this.props.requests,schemas:this.props.requestSchemas,sorts:this.props.searchParams.sorts,onChangeSort:e=>{this._handleChangeSortFromKey(e)},onUpdateSelectedRequestIds:this.props.onSelectIds,requestTaskSchemasById:this.props.requestTaskSchemasById,selectedRequestIds:this.props.selectedIds,sampleStatusCountsByRequestId:this.props.sampleStatusCountsByRequestId,requestedTaskSchemaIdsByRequestId:this.props.requestedTaskSchemaIdsByRequestId,searchResults:this.props.searchResults})))))):r.createElement(r.Fragment,null,r.createElement(ne.X2,null,n),r.createElement(ne.X2,null,this._isClearEnabled()&&r.createElement(y.Z,{total:this.props.searchResults?this.props.searchResults.total:null,isExact:this.props.searchResults?this.props.searchResults.isExact:null})),r.createElement(ne.X2,{fluid:!0,className:"u-vertical-flex"},r.createElement("div",{className:"u-flex-grow u-position-relative"},r.createElement("div",{className:"u-absolute-scroll-container"},(()=>{var e
const t=this._getPagination()
return null!=this.props.searchResults&&t?r.createElement(_.Z,{pagination:t,setOffset:this.props.onUpdateOffset},r.createElement(P.ZP,{...a},r.createElement(O.ZP,{activeItemId:this.props.activeItemId,emptyMessage:this._getEmptyMessage(),finderId:null,isCompact:this.props.isCompactDisplay,isSearch:!1,items:this.props.requests||[],openResult:e=>{(0,Q.KN)(e.id,this.props.searchResults)
p.Z.openFile(e.id)},onToggleExpandedItems:this.props.onToggleItemsExpanded,onRequestMoreChildItems:this.props.onRequestMoreChildItems,childPageSize:null!==(e=this.props.childPageSize)&&void 0!==e?e:0,folderId:null,section:null}))):r.createElement(ee.b,null)})()))))}return r.createElement(ee.b,null)}render(){return r.createElement(ne.W2,{className:i()("sidepanel",{expandedContainer:this.props.isExpanded}),size:this.props.isExpanded?"lg":"sidepanel",dataTestAttrs:{component:"RequestsSidepanel",element:"root",key:this.props.isExpanded?"expanded":"collapsed"}},this._renderSidepanelContents())}}const lt=(0,J.ZP)(RequestsSidepanelConnector.connect(RequestsSidepanel),K.Sc.REQUEST,m.$0.REQUESTS,{defaultSearchParams:defaultRequestsSearchParams(),getNavigationUpdate:function getRequestsURL(e,t){return t.isExpanded?{url:(0,R.q7)("/requests",t.searchParams,t.filterErrors),options:{replace:e.isExpanded===t.isExpanded}}:null}})},735606:(e,t,n)=>{n.d(t,{Z:()=>d})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(868710),c=n(334148)
class ExecuteButton extends o.Component{render(){return o.createElement(l.pf,{tooltipTitle:this.props.tooltipTitle,tooltipPlacement:l.TQ.BOTTOM},o.createElement("div",{className:i()("u-display-inline-block",this.props.className)},o.createElement(c.Co,{buttonStyle:this.props.buttonStyle,disabled:this.props.disabled,onClick:this.props.onClick,size:this.props.size,text:"Execute",dataTestAttrs:{component:"ExecuteButton",element:"root"}})))}}ExecuteButton.propTypes={buttonStyle:s().oneOf(Object.values(c.ZJ)).isRequired,className:s().string,disabled:s().bool.isRequired,onClick:s().func.isRequired}
ExecuteButton.defaultProps={disabled:!1,size:c.qE.SMALL}
const d=ExecuteButton},199052:(e,t,n)=>{n.d(t,{ZP:()=>fe})
var a=n(602652),i=n.n(a),r=n(989526),s=n(212300),o=n(926025),l=n(531041),c=n(232606),d=n(166459),u=n(535540),m=n(455040)
const fulfillmentMatchesDefinition=(e,t)=>e.requestId===t.requestId&&e.sampleGroupId===t.sampleGroupId&&e.requestTaskId===t.requestTaskId
var p=n(49002),h=n(500147),E=n(930113),S=n(46538),T=n(62315),g=n(476604),f=n(195300),I=n(205986),A=n(351702),y=n(334148),_=n(260929),C=n(827670)
function isFulfilmentDefinitionSelected(e,t){return null!=l.default.findWhere(t,{cid:e.cid})}var R=n(692013),N=n(198964),O=n(865486),b=n(924982),v=n(554475)
function aggregateFulfillmentStatuses(e){if(0===e.length)return u.lG.PENDING
const t=l.default.last(l.default.sortBy(e,"createdAt"))
return t.status===u.lG.FAILED?u.lG.PENDING:t.status}function getIconAndClassNameForStatus(e){const t=u.V1[e];(0,c.hu)(Boolean(t),`No icon found for fulfillment status "${e}"`)
return t}function FulfillmentStatusFilterDropdown(e){return r.createElement(N.ZP,{menu:r.createElement(O.ZP,{height:O.ZP.HEIGHTS.MEDIUM,width:O.ZP.WIDTHS.MEDIUM,value:e.value},r.createElement(v.Z,null,r.createElement(b.Z,{value:null,icon:"notdef",iconClassName:(0,R.iv)(P.blankIcon),onSelect:e.onSelect},"All")),r.createElement(v.Z,null,e.statusOptions.map((t=>{const{icon:n,className:a}=getIconAndClassNameForStatus(t)
return r.createElement(b.Z,{key:t,value:t,icon:n,iconClassName:a,onSelect:e.onSelect},u.r9[t])}))))},r.createElement(y.Co,{buttonStyle:y.ZJ.CIRCLE_ICON,icon:"filter",size:y.qE.SMALL,isDropdown:!0}))}FulfillmentStatusFilterDropdown.propTypes={statusOptions:i().arrayOf(i().oneOf(Object.values(u.lG)).isRequired).isRequired,value:i().oneOf(Object.values(u.lG)),onSelect:i().func.isRequired}
const P=R.mM.create({blankIcon:{color:"transparent"}})
var L=n(764403),D=n.n(L),M=n(36424)
function FulfillmentStatusIndicator({className:e,status:t}){const{icon:n,className:a}=getIconAndClassNameForStatus(t)
return r.createElement(M.Z,{className:D()(e,a),icon:n})}FulfillmentStatusIndicator.propTypes={className:i().string,status:i().oneOf(Object.values(u.lG)).isRequired}
var w=n(986298),F=n(795110),k=n(356873),U=n(601790),x=n(584651),B=n(772058)
function getTaskSchema(e,t,n){return n[t[e.requestTaskId].schemaId]}class StaticSampleGroupTable extends r.Component{constructor(){super(...arguments)
this._isFulfillmentDefinitionSelected=e=>isFulfilmentDefinitionSelected(e,this.props.selectedFulfillmentDefinitions)
this._handleRowClick=e=>{this.props.onSetSelectedFulfillmentDefinitions(function toggleFulfillmentDefinitionSelection(e,t){return isFulfilmentDefinitionSelected(e,t)?t.filter((t=>t.cid!==e.cid)):[...t,e]}(this.props.fulfillmentDefinitions[e],this.props.selectedFulfillmentDefinitions))}
this._handleToggleHeaderCheckbox=()=>{this.props.onSetSelectedFulfillmentDefinitions(function toggleHeaderCheckboxSelection(e,t){return e.every((e=>isFulfilmentDefinitionSelected(e,t)))?[]:e}(this.props.fulfillmentDefinitions,this.props.selectedFulfillmentDefinitions))}}_hasTasks(){return this.props.fulfillmentDefinitions.some((e=>null!=e.requestTaskId))}_renderSampleGroupColumn(e,t){return r.createElement(U.sg,{key:`${e.id},${t.name}`,header:t.displayName,renderCell:n=>r.createElement(U.bL,null,(()=>{const a=this.props.fulfillmentDefinitions[n]
if(this.props.requestSchemasByRequestId[a.requestId].sampleGroupSchema.id!==e.id)return null
const i=this.props.sampleGroupsById[a.sampleGroupId].tags.find((({name:e})=>e===t.name))
return r.createElement(w.Z,{samples:i.targetSamples,tagSchemaField:t})})())})}_getOrderedSampleGroupSchemas(){const e=l.default.chain(this.props.fulfillmentDefinitions).pluck("requestId").map((e=>this.props.requestSchemasByRequestId[e].sampleGroupSchema)).compact().value()
return l.default.chain(e).unique((e=>e.id)).sortBy((e=>e.id)).value()}_renderSampleGroupColumns(){const e=this._getOrderedSampleGroupSchemas(),t=[]
for(const n of e)for(const e of n.fields)t.push(this._renderSampleGroupColumn(n,e))
return t}render(){return r.createElement(U.iA,{emptyTableText:"No samples",numRows:this.props.fulfillmentDefinitions.length,onRowClick:this._handleRowClick},this.props.fulfillmentDefinitions.length>0&&this.props.allowSelect&&r.createElement(U.sg,{header:r.createElement(U.bL,{className:"simpleTable-checkboxCell"},r.createElement(k.Z,{items:this.props.fulfillmentDefinitions,selectedMap:this._isFulfillmentDefinitionSelected,onChange:this._handleToggleHeaderCheckbox})),renderCell:e=>r.createElement(U.bL,{className:"simpleTable-checkboxCell"},r.createElement("input",{type:"checkbox",checked:this._isFulfillmentDefinitionSelected(this.props.fulfillmentDefinitions[e]),onChange:()=>{this._handleRowClick(e)}}))}),this._renderSampleGroupColumns(),r.createElement(U.sg,{header:"Request ID",renderCell:e=>r.createElement(U.bL,null,(()=>{const t=this.props.fulfillmentDefinitions[e]
return this.props.requestsByFulfillmentDefinitionId[t.cid].name})())}),this._hasTasks()&&r.createElement(U.sg,{header:"Task",renderCell:e=>r.createElement(U.bL,null,(()=>{const t=this.props.fulfillmentDefinitions[e]
return null==t.requestTaskId?null:getTaskSchema(t,this.props.requestTasksById,this.props.requestTaskSchemasById).name})())}),r.createElement(U.sg,{header:r.createElement(U.bL,{className:"u-vertical-center-items"},"Status",r.createElement("div",{className:"u-mini-spacing-left"},r.createElement(FulfillmentStatusFilterDropdown,{statusOptions:Object.values(u.lG),value:this.props.statusFilter,onSelect:this.props.onSetStatusFilter}))),renderCell:e=>{const t=this.props.fulfillmentDefinitions[e],n=aggregateFulfillmentStatuses(this.props.existingFulfillmentsByFulfillmentDefinitionId[t.cid])
return r.createElement(U.bL,null,r.createElement(FulfillmentStatusIndicator,{className:"u-display-inline-block u-valign-middle",status:n}),r.createElement("span",{className:"u-mini-spacing-left u-valign-middle"},u.r9[n]))}}))}}StaticSampleGroupTable.defaultProps={allowSelect:!0}
class SampleGroupTable extends r.Component{_isFulfillmentDefinitionMissingData(e){return null!=e.requestTaskId&&null==this.props.requestTasksById[e.requestTaskId]||null!=e.sampleGroupId&&null==this.props.sampleGroupsById[e.sampleGroupId]||null!=e.requestTaskId&&null==getTaskSchema(e,this.props.requestTasksById,this.props.requestTaskSchemasById)}_isLoading(){return[this.props.fulfillmentDefinitions,this.props.selectedFulfillmentDefinitions,this.props.existingFulfillmentsByFulfillmentDefinitionId,this.props.requestsByFulfillmentDefinitionId,this.props.requestTasksById,this.props.sampleGroupsById,this.props.requestTaskSchemasById].some((e=>null==e))||this.props.fulfillmentDefinitions.some((e=>this._isFulfillmentDefinitionMissingData(e)))}_filterByStatus(e){return null==this.props.statusFilter?e:e.filter((e=>aggregateFulfillmentStatuses(this.props.existingFulfillmentsByFulfillmentDefinitionId[e.cid])===this.props.statusFilter))}_filterByTaskSchema(e){return null==this.props.selectedTaskSchemaId?e:e.filter((e=>{const t=null==e.requestTaskId?null:this.props.requestTasksById[e.requestTaskId]
return null!=t&&t.schemaId===this.props.selectedTaskSchemaId}))}render(){const{fulfillmentDefinitions:e,selectedFulfillmentDefinitions:t,statusFilter:n,existingFulfillmentsByFulfillmentDefinitionId:a,requestsByFulfillmentDefinitionId:i,requestTasksById:s,requestSchemasByRequestId:o,requestTaskSchemasById:l,sampleGroupsById:c,onSetStatusFilter:d,onSetSelectedFulfillmentDefinitions:u}=this.props
return this._isLoading()?r.createElement(g.b,null):r.createElement(StaticSampleGroupTable,{allowSelect:this.props.allowSelect,fulfillmentDefinitions:this._filterByStatus(this._filterByTaskSchema(e)),selectedFulfillmentDefinitions:t,existingFulfillmentsByFulfillmentDefinitionId:a,requestsByFulfillmentDefinitionId:i,requestTasksById:s,requestSchemasByRequestId:o,requestTaskSchemasById:l,sampleGroupsById:c,statusFilter:n,onSetStatusFilter:d,onSetSelectedFulfillmentDefinitions:u})}}SampleGroupTable.defaultProps={allowSelect:!0}
const Z=(0,C.compose)(F.Z.connect((e=>({batchesById:e.getBatches()}))),(0,s.$j)((function mapStateToProps(e,{requestIds:t,fulfillmentDefinitions:n,batchesById:a}){const i=new x.xT(e.models.workflows).getStageRunSampleById(),{requestsById:r,requestTasksById:s}=e.models.requests.inputs,{requestTaskSchemasById:o}=e.models.requests.schemas,{fulfillmentIdsByRequestId:c,fulfillmentsById:d}=e.models.requests.fulfillments,{fileSummariesById:u}=e.models,{sampleGroupsById:m}=e.models.sampleGroups
if(null==n||null==c||null==r||null==s||null==d||null==o||null==i||null==m)return{existingFulfillmentsByFulfillmentDefinitionId:null,requestsByFulfillmentDefinitionId:null,requestTasksById:null,sampleGroupsById:null,requestTaskSchemasById:null}
const p={},h={},E=l.default.flatten(t.map((e=>c[e])))
for(const e of n){p[e.cid]=r[e.requestId]
h[e.cid]=E.map((e=>d[e])).filter((t=>t.requestId===e.requestId&&t.sampleGroupId===e.sampleGroupId&&t.requestTaskId===e.requestTaskId))}const S={batchesById:a,fileSummariesById:u,stageRunSamplesById:i},T=(0,B.Z)(S,Object.values(m))
return{existingFulfillmentsByFulfillmentDefinitionId:h,requestsByFulfillmentDefinitionId:p,requestTasksById:s,sampleGroupsById:l.default.indexBy(T,"id"),requestTaskSchemasById:o}}),{fetchRequestSampleGroups:p.H5}))(SampleGroupTable),execution_ConfirmReexecuteFulfillmentPane=e=>{let t,n
if(0===e.fulfillmentDefinitions.length){_.ZK("Expected at least 1 fulfillmentDefinition")
e.onGoToNextPane()}if(1===e.fulfillmentDefinitions.length){n="Re-execute sample?"
t="You've selected a sample that has already been executed. Are you sure you want to re-execute this sample?"}else{n="Re-execute samples?"
t="You've selected samples that have already been executed. Are you sure you want to re-execute these samples?"}return r.createElement(I.ZP,{buttons:[{key:"back",text:"Back",className:"u-mini-spacing-right",style:y.ZJ.TERTIARY_GRAY,onClick:e.onGoToPrevPane},{key:"next",text:"Re-execute",style:y.ZJ.PRIMARY,onClick:e.onGoToNextPane}],scrollable:!0,large:!0,expandHeight:!0,onRequestClose:e.onRequestClose,showFooterBorder:!1,title:n,wrapInForm:!1},r.createElement("p",null,t),e.fulfillmentDefinitions.length>0&&r.createElement(Z,{allowSelect:!1,requestIds:l.default.pluck(e.requests,"id"),fulfillmentDefinitions:e.fulfillmentDefinitions,statusFilter:e.statusFilter,selectedTaskSchemaId:null,selectedFulfillmentDefinitions:[],requestSchemasByRequestId:e.requestSchemasByRequestId,onSetStatusFilter:e.onSetStatusFilter,onSetSelectedFulfillmentDefinitions:()=>{}}))}
var q=n(277399),G=n(757541),V=n(841996),H=n(348920),W=n(496022),Y=n(250417),$=n(131892),K=n(64558)
function compareOrderedIdsNullsFirst(e,t,n){if(t===n)return 0
if(null==t){(0,c.hu)(null!=n,"Cannot compare null ids")
return-1}if(null==n){(0,c.hu)(null!=t,"Cannot compare null ids")
return 1}const a=e.indexOf(t),i=e.indexOf(n)
if(-1===a||-1===i)throw new Error("ID not found - have all models been fetched?")
return a-i}function compareFulfillments(e,t,{requestsById:n,requestTaskIdsByRequestId:a,sampleGroupIdsByRequestId:i}){(0,c.hu)(null!=n[e.requestId]&&null!=n[t.requestId],"Request not found - have all requests been fetched?")
const r=function compareRequests(e,t){if(e.id===t.id)return 0
const n=(0,K.SL)([e.name,t.name])
if(n[0]===e.name)return-1;(0,c.hu)(n[0]===t.name,"Unexpected sort result")
return 1}(n[e.requestId],n[t.requestId])
if(0!==r)return r;(0,c.hu)(e.requestId===t.requestId,"Expected to return request comparison")
const s=e.requestId
let o
try{o=compareOrderedIdsNullsFirst(a[s],e.requestTaskId,t.requestTaskId)}catch(n){(0,c.hu)(!1,n.message,{requestTaskIdsByRequestId:a,requestId:s,fulfillment1:e,fulfillment2:t})}if(0!==o)return o
return compareOrderedIdsNullsFirst(i[s],e.sampleGroupId,t.sampleGroupId)}function sortFulfillments(e,{requestsById:t,requestTaskIdsByRequestId:n,sampleGroupIdsByRequestId:a}){return e.slice().sort(((e,i)=>compareFulfillments(e,i,{requestsById:t,requestTaskIdsByRequestId:n,sampleGroupIdsByRequestId:a})))}function createFulfillmentDefinition({requestId:e,requestTaskId:t,sampleGroupId:n}){return{requestId:e,requestTaskId:t,sampleGroupId:n,cid:`${e}-${t}-${n}`}}function getRequestFulfillmentDefinitions({requestId:e,requestTaskIds:t,requestSampleGroupIds:n,sampleGroupIdsByRequestTaskId:a}){if(0===t.length)return n.map((t=>createFulfillmentDefinition({requestId:e,requestTaskId:null,sampleGroupId:t})))
const i=[]
for(const n of t){const t=a[n];(0,c.hu)(null!=t,"Sample group is not found in sampleGroupIdsByRequestTaskId. Most likely it was not loaded into the store.")
for(const a of t)i.push(createFulfillmentDefinition({requestId:e,requestTaskId:n,sampleGroupId:a}))}return i}var z=n(191122),Q=n(182242),j=n(122599),J=n(404646)
class SelectExistingEntryModal extends r.Component{constructor(){super(...arguments)
this.state={currentlySubmitting:!1}
this._handleSelectedEntriesChange=e=>{const t=e.length?e[0]:null
this.props.onSetSelectedEntry(t)}
this._handleRequestSubmit=async()=>{(0,c.hu)(this._canSubmit(),"Unexpected submit")
const e=this.props.selectedEntry
this.setState({currentlySubmitting:!0})
try{await this.props.onExecuteIntoExistingEntry(e.id,this.props.fulfillments)}finally{this.setState({currentlySubmitting:!1})}this.props.onRequestClose()}}_canSubmit(){return!this.state.currentlySubmitting&&Boolean(this.props.selectedEntry)}render(){const{selectedEntry:e}=this.props
return r.createElement(I.ZP,{buttons:[{text:"Execute",submit:!0,disabled:!this._canSubmit()}],onRequestClose:this.props.onRequestClose,onRequestSubmit:()=>{this._handleRequestSubmit()},title:"Select existing entry"},r.createElement(j.Z,{onChange:this._handleSelectedEntriesChange,selectedEntries:e?[e]:[],shouldAllowMultiple:!1}))}}const X=(0,s.$j)((function SelectExistingEntryModal_mapStateToProps(e,t){const{selectedEntry:n}=e.ui.requests.executeRequestFlow.existingEntry
return{selectedEntry:n}}),(function mapDispatchToProps(e){return{onSetSelectedEntry:t=>{e((0,J.$)(t))},onExecuteIntoExistingEntry:(t,n)=>e(m.sx(t,n))}}))(SelectExistingEntryModal)
function ExecutionPane(e){switch(e.executionType){case q.nj.ENTRY:return r.createElement(W.Z,{onEntryCreated:e.onRequestClose,onRequestClose:e.onRequestClose,fulfillments:e.fulfillments,showNotebook:!0})
case q.nj.ENTRY_TEMPLATE:return H.ZP.ELN_ENABLE_SCHEMA_ON_ENTRY_CREATE_MODAL?r.createElement(Y.ZP,{onRequestClose:e.onRequestClose,onRequestSubmit:({entryName:t,folderId:n,templateId:a,tagSchemaId:i,schemaTags:r,initialDay:s})=>{V.Z.createFromTemplate({entryName:t,folderId:n,templateId:a,tagSchemaId:i,schemaTags:r,initialDay:s,fulfillments:e.fulfillments,onSuccess:e.onRequestClose})},isTemplateSelectorDisabled:!1}):r.createElement($.Z,{onRequestClose:e.onRequestClose,onRequestSubmit:({entryName:t,folderId:n,templateId:a,initialDay:i})=>{V.Z.createFromTemplate({entryName:t,folderId:n,templateId:a,initialDay:i,fulfillments:e.fulfillments,onSuccess:e.onRequestClose})}})
case q.nj.EXISTING_ENTRY:return r.createElement(X,{onRequestClose:e.onRequestClose,fulfillments:e.fulfillments})
case q.nj.WORKFLOW:return r.createElement(Q.Z,{onRequestClose:e.onRequestClose,fulfillments:e.fulfillments})
default:throw new Error(`Unexpected request execution type ${e.executionType}`)}}ExecutionPane.propTypes={executionType:i().oneOf(Object.keys(q.nj)).isRequired,fulfillments:i().arrayOf(u.hm.isRequired).isRequired,onRequestClose:i().func.isRequired}
const ee=(0,z.Z)((e=>e),{useDeepEquality:!0}),te=(0,s.$j)((function ExecutionPane_mapStateToProps(e,{requests:t,requestSchemasByRequestId:n}){const{requestTaskIdsByRequestId:a,sampleGroupIdsByRequestId:i}=e.models.requests.inputs,r=e.ui.requests.executeRequestFlow.selectedFulfillmentDefinitions
if(t.some((({id:e})=>null==a[e]||null==i[e])))throw new Error("Expected all tasks and sample groups to be loaded before reaching the execution pane.")
const s=[]
for(const e of t)if(null===n[e.id].sampleGroupSchema)s.push(createFulfillmentDefinition({requestId:e.id,requestTaskId:null,sampleGroupId:null}))
else{const t=null!=r?r.filter((t=>t.requestId===e.id)):[]
s.push(...t)}const o=sortFulfillments(s,{requestsById:l.default.indexBy(t,"id"),requestTaskIdsByRequestId:a,sampleGroupIdsByRequestId:i})
return{fulfillments:ee(o)}}))(ExecutionPane)
var ne=n(675649),ae=n(368734),ie=n(807140),re=n(2634)
function SelectExecutionTypePane(e){return r.createElement(I.ZP,{buttons:l.default.compact([!e.isFirstPane&&{key:"back",text:"Back",className:"u-mini-spacing-right",style:y.ZJ.TERTIARY_GRAY,onClick:e.onGoToPrevPane,dataTestAttrs:{component:"SelectExecutionTypePane",element:"footerButton",key:ae.Z.BACK}},{text:"Next",key:"next",style:y.ZJ.PRIMARY,onClick:e.onGoToNextPane,disabled:!e.selectedExecutionType,dataTestAttrs:{component:"SelectExecutionTypePane",element:"footerButton",key:ae.Z.NEXT}}]),onRequestClose:e.onRequestClose,showFooterBorder:!1,title:`Execute ${(0,ne._6)(e.requestIds.length,"request")} as...`,wrapInForm:!1,large:!0},r.createElement(ie.u,{options:[...H.ZP.ELN_ENABLE_BLANK_ENTRY_CREATION?[{value:q.nj.ENTRY,text:"Entry"}]:[],{value:q.nj.ENTRY_TEMPLATE,text:"Entry from template"},{value:q.nj.EXISTING_ENTRY,text:"Existing entry"},{value:q.nj.WORKFLOW,text:(0,re.U8)("Legacy Workflow","Workflow")}],selectedOption:e.selectedExecutionType,onSelectOption:e.onSetExecutionType}))}SelectExecutionTypePane.propTypes={requestIds:i().arrayOf(i().string.isRequired).isRequired,selectedExecutionType:i().oneOf(Object.values(q.nj)),isFirstPane:i().bool.isRequired,onGoToNextPane:i().func.isRequired,onGoToPrevPane:i().func.isRequired,onRequestClose:i().func.isRequired,onSetExecutionType:i().func.isRequired}
const se=SelectExecutionTypePane
var oe=n(590441),le=n(641329),ce=n(267203)
const de="ALL_TASKS_ID"
class RequestTaskSchemaSelector extends r.Component{componentDidMount(){this.props.fetchRequestTaskSchemas()}_getSchemaOptions(){return[{id:de,name:"All"},...this.props.requestTaskSchemas]}render(){return null==this.props.requestTaskSchemas?r.createElement(g.b,null):r.createElement(ce.Z,{onChange:e=>{(0,c.hu)(null!=e,"SchemaSelector sent a null tagSchema")
this.props.onSelectSchema(e.id===de?null:e)},schemas:this._getSchemaOptions(),selectedSchemaId:null==this.props.selectedTaskSchemaId?de:this.props.selectedTaskSchemaId})}}RequestTaskSchemaSelector.propTypes={selectedTaskSchemaId:i().string,onSelectSchema:i().func.isRequired,requestTasks:i().arrayOf(oe.Qc.isRequired).isRequired,requestTaskSchemas:i().arrayOf(oe.eM.isRequired),fetchRequestTaskSchemas:i().func.isRequired}
const ue=(0,s.$j)((function RequestTaskSchemaSelector_mapStateToProps(e,{requestTasks:t}){const{requestTaskSchemasById:n}=e.models.requests.schemas,a=[]
for(const e of t)a.push(n[e.schemaId])
return{requestTaskSchemas:(0,le.Z)(l.default.unique(a,(e=>e.id)))}}),{fetchRequestTaskSchemas:E.Qd})(RequestTaskSchemaSelector)
var me=n(102176),pe=n(929123)
class SelectSamplesPane extends r.Component{constructor(){super(...arguments)
this.state={selectedTaskSchemaId:null}
this._handleTaskSchemaSelected=e=>{const t=null!=e?e.id:null
this.setState({selectedTaskSchemaId:t})}}componentDidMount(){null!=this.props.selectedFulfillmentDefinitions&&this.setState({selectedTaskSchemaId:this._getInitialSelectedTaskSchemaId()})}componentDidUpdate(e,t){null==e.selectedFulfillmentDefinitions&&null!=this.props.selectedFulfillmentDefinitions?this.setState({selectedTaskSchemaId:this._getInitialSelectedTaskSchemaId()}):t.selectedTaskSchemaId!==this.state.selectedTaskSchemaId&&this._filterSelectionByTaskId()}_getInitialSelectedTaskSchemaId(){const e=this.props.initialFilters.find((e=>e.key===T.Oq.REQUEST_TASK_SCHEMA.key))
return null==e?null:e.value}_filterSelectionByTaskId(){if(null==this.state.selectedTaskSchemaId||this.state.selectedTaskSchemaId===oe.Nu)return
const e=new Set(this.props.requestTasks.filter((e=>e.schemaId===this.state.selectedTaskSchemaId)).map((e=>e.id)));(0,c.Gp)(e.size>0,"Selected task schema is expected to match at least one task on the request(s)")
const t=this.props.selectedFulfillmentDefinitions.filter((t=>null!=t.requestTaskId&&e.has(t.requestTaskId)))
this.props.onSetSelectedFulfillmentDefinitions(t)}_isLoading(){return null==this.props.selectedFulfillmentDefinitions}_renderTaskSchemaSelector(){return r.createElement(me.Z,null,r.createElement(pe.Z,null,"Task"),r.createElement(ue,{requestTasks:this.props.requestTasks,selectedTaskSchemaId:this.state.selectedTaskSchemaId,onSelectSchema:this._handleTaskSchemaSelected}))}render(){return r.createElement(I.ZP,{buttons:[{text:"Next",key:"next",style:y.ZJ.PRIMARY,disabled:this._isLoading()||0===this.props.selectedFulfillmentDefinitions.length,onClick:this.props.onGoToNextPane,dataTestAttrs:{component:"SelectSamplesPane",element:"footerButton",key:ae.Z.NEXT}}],scrollable:!0,large:!0,expandHeight:!0,onRequestClose:this.props.onRequestClose,title:`${this.props.titlePrefix}${this.props.requestTasks.length?"Select task and samples":"Select samples"}`},this._isLoading()?r.createElement(g.b,null):r.createElement("div",null,this.props.requestTasks.length?this._renderTaskSchemaSelector():null,r.createElement(Z,{requestIds:l.default.pluck(this.props.requests,"id"),fulfillmentDefinitions:this.props.fulfillmentDefinitions,selectedFulfillmentDefinitions:this.props.selectedFulfillmentDefinitions,statusFilter:this.props.statusFilter,selectedTaskSchemaId:this.state.selectedTaskSchemaId,requestSchemasByRequestId:this.props.requestSchemasByRequestId,onSetStatusFilter:this.props.onSetStatusFilter,onSetSelectedFulfillmentDefinitions:this.props.onSetSelectedFulfillmentDefinitions,dataTestAttrs:{component:"SelectSamplesPane",element:"SampleGroupTable"}})))}}SelectSamplesPane.propTypes={requests:i().arrayOf(h.c8.isRequired).isRequired,requestSchemasByRequestId:i().object.isRequired,statusFilter:i().oneOf(Object.values(u.lG)),initialFilters:i().arrayOf(T._3.isRequired).isRequired,fulfillmentDefinitions:i().arrayOf(u.hm.isRequired),requestTasks:i().arrayOf(oe.Qc.isRequired).isRequired,selectedFulfillmentDefinitions:i().arrayOf(u.hm.isRequired),onGoToNextPane:i().func.isRequired,onRequestClose:i().func.isRequired,onSetSelectedFulfillmentDefinitions:i().func.isRequired,onSetStatusFilter:i().func.isRequired}
const he=(0,s.$j)((function SelectSamplesPane_mapStateToProps(e,t){const{requestTaskIdsByRequestId:n,requestTasksById:a,sampleGroupIdsByRequestId:i,sampleGroupIdsByRequestTaskId:r}=e.models.requests.inputs,{fulfillmentIdsByRequestId:s}=e.models.requests.fulfillments
if(null==r||t.requests.some((({id:e})=>null==s[e]||null==n[e]||null==i[e])))return{fulfillmentDefinitions:null,selectedFulfillmentDefinitions:null}
let o=[]
for(const e of t.requests){const t=n[e.id].map((e=>a[e]))
o=o.concat(t)}const d=function createFulfillmentDefinitions({requests:e,requestTaskIdsByRequestId:t,sampleGroupIdsByRequestId:n,sampleGroupIdsByRequestTaskId:a}){const i=[]
for(const r of e){const e=t[r.id],s=n[r.id];(0,c.hu)(null!=e&&null!=s&&null!=a,"One of the arguments is null. Most likely it was not loaded into the store.")
const o=getRequestFulfillmentDefinitions({requestId:r.id,requestTaskIds:e,requestSampleGroupIds:s,sampleGroupIdsByRequestTaskId:a})
if(null==o)return null
i.push(...o)}return sortFulfillments(i,{requestsById:l.default.indexBy(e,"id"),requestTaskIdsByRequestId:t,sampleGroupIdsByRequestId:n})}({requests:t.requests,requestTaskIdsByRequestId:n,sampleGroupIdsByRequestId:i,sampleGroupIdsByRequestTaskId:r})
let{selectedFulfillmentDefinitions:m}=e.ui.requests.executeRequestFlow
const{fulfillmentsById:p}=e.models.requests.fulfillments,h=Object.keys(p).map((e=>p[e]))
if(null==m)if(null!=d){const e=d.filter((e=>{const t=h.findIndex((t=>fulfillmentMatchesDefinition(t,e)))
return t<0||h[t].status===u.lG.PENDING}))
m=e
t.onSetSelectedFulfillmentDefinitions(e)}else m=[]
return{fulfillmentDefinitions:d,selectedFulfillmentDefinitions:m,requestTasks:o}}))(SelectSamplesPane),Ee="Execute request",Se=`${Ee}: `
class ExecuteRequestFlow extends r.Component{constructor(){super(...arguments)
this.state={dataLoaded:!1,hasSelectedExecutedFulfillment:!1}
this._handleCloseModal=()=>{this.props.onRequestClose()
this.props.closeExecuteRequestFlow()}
this._handleSelectedFulfillmentDefinitions=e=>{this.props.setSelectedFulfillmentDefinitions(e)
const t=this._getSelectedExecutedFulfillmentDefinitions(e)
this.props.setSelectedExecutedFulfillmentDefinitions(t)
this.setState({hasSelectedExecutedFulfillment:t.length>0})}}componentDidMount(){this.props.requests.forEach((e=>(0,c.Gp)(null!=(null==e?void 0:e.id),`Expected request ${e} to have a non-null ID`)))
const e=this._doRequestsHaveSampleGroupSchemas(),t=e?[q.y$.CONFIRM_REEXECUTE]:[q.y$.CONFIRM_REEXECUTE,q.y$.SELECT_SAMPLES],n=e?q.y$.SELECT_SAMPLES:q.y$.SELECT_EXECUTION_TYPE
e||null!=this.props.selectedFulfillmentDefinitions||this.props.setSelectedFulfillmentDefinitions([])
this.props.openExecuteRequestFlow({excludedPanes:t,paneKey:n})
this._loadData()}componentDidUpdate(e,t){if(t.hasSelectedExecutedFulfillment!==this.state.hasSelectedExecutedFulfillment){const e=this._doRequestsHaveSampleGroupSchemas()?[]:[q.y$.SELECT_SAMPLES]
this.state.hasSelectedExecutedFulfillment||e.push(q.y$.CONFIRM_REEXECUTE)
this.props.openExecuteRequestFlow({excludedPanes:e,paneKey:this.props.paneKey})}}async _loadData(){const e=l.default.pluck(this.props.requests,"id")
await(0,A.Z)(Promise.all([this.props.fetchRequestSampleGroups(e),this.props.listFulfillmentsForRequests(e),this.props.fetchRequestTaskSchemas(),this.props.fetchTasksForRequests(e)]),800)
this.setState({dataLoaded:!0})}_doRequestsHaveSampleGroupSchemas(){const e=this.props.requests.every((e=>null!=this.props.requestSchemasByRequestId[e.id].sampleGroupSchema)),t=this.props.requests.every((e=>null==this.props.requestSchemasByRequestId[e.id].sampleGroupSchema));(0,c.hu)(e||t,"Either all requests should have a sample group schema, or none should")
return e}_getRequestIdsWithSelectedFulfillments(){if(null==this.props.selectedFulfillmentDefinitions)return new Set
const e=new Set(l.default.pluck(this.props.selectedFulfillmentDefinitions,"requestId"))
for(const t of this.props.requests)null===this.props.requestSchemasByRequestId[t.id].sampleGroupSchema&&e.add(t.id)
return e}_getSelectedExecutedFulfillmentDefinitions(e){return e.filter((e=>this.props.fulfillmentsByRequestIds[e.requestId].findIndex((t=>fulfillmentMatchesDefinition(t,e)&&(e=>e.status===u.lG.COMPLETED||e.status===u.lG.IN_PROGRESS)(t)))>=0))}_renderLoadingPane(){return r.createElement(I.ZP,{large:!0,onRequestClose:this._handleCloseModal,title:Ee},r.createElement(g.b,null))}_renderPane(){const e=q.VV.filter((e=>!this.props.excludedPanes.includes(e)))[0],t=this._getRequestIdsWithSelectedFulfillments()
switch(this.props.paneKey){case q.aZ.SELECT_SAMPLES:return r.createElement(he,{titlePrefix:Se,requests:this.props.requests,requestSchemasByRequestId:this.props.requestSchemasByRequestId,statusFilter:this.props.statusFilter,initialFilters:this.props.initialFilters,onGoToNextPane:this.props.goToNextPane,onRequestClose:this._handleCloseModal,onSetSelectedFulfillmentDefinitions:this._handleSelectedFulfillmentDefinitions,onSetStatusFilter:this.props.setStatusFilter})
case q.aZ.CONFIRM_REEXECUTE:return r.createElement(execution_ConfirmReexecuteFulfillmentPane,{requests:this.props.requests,requestSchemasByRequestId:this.props.requestSchemasByRequestId,fulfillmentDefinitions:this.props.selectedExecutedFulfillmentDefinitions,statusFilter:this.props.statusFilter,onGoToNextPane:this.props.goToNextPane,onGoToPrevPane:this.props.goToPrevPane,onRequestClose:this._handleCloseModal,onSetStatusFilter:this.props.setStatusFilter})
case q.aZ.SELECT_EXECUTION_TYPE:return r.createElement(se,{requestIds:Array.from(t),selectedExecutionType:this.props.executionType,isFirstPane:e===q.aZ.SELECT_EXECUTION_TYPE,onGoToNextPane:this.props.goToNextPane,onGoToPrevPane:this.props.goToPrevPane,onRequestClose:this._handleCloseModal,onSetExecutionType:this.props.setExecutionType})
case q.aZ.EXECUTE:return r.createElement(te,{executionType:this.props.executionType,requests:this.props.requests.filter((e=>t.has(e.id))),requestSchemasByRequestId:this.props.requestSchemasByRequestId,onRequestClose:this._handleCloseModal})
default:throw new Error(`Unexpected pane ${this.props.paneKey}`)}}render(){return this.state.dataLoaded&&null!=this.props.paneKey?r.createElement(f.Z,{open:!0},this._renderPane()):this._renderLoadingPane()}}ExecuteRequestFlow.propTypes={requests:i().arrayOf(h.c8.isRequired).isRequired,requestSchemasByRequestId:i().object.isRequired,onRequestClose:i().func.isRequired,initialFilters:i().arrayOf(T._3.isRequired).isRequired,excludedPanes:i().arrayOf(i().oneOf(Object.keys(q.aZ))).isRequired,executionType:i().oneOf(Object.keys(q.nj)),paneKey:i().oneOf(Object.keys(q.aZ)),selectedFulfillmentDefinitions:i().arrayOf(u.hm.isRequired),selectedExecutedFulfillmentDefinitions:i().arrayOf(u.hm.isRequired).isRequired,statusFilter:i().oneOf(Object.values(u.lG)),fulfillmentsByRequestIds:i().objectOf(i().arrayOf(u.Fp)),openExecuteRequestFlow:i().func.isRequired,closeExecuteRequestFlow:i().func.isRequired,fetchRequestSampleGroups:i().func.isRequired,fetchTasksForRequests:i().func.isRequired,fetchRequestTaskSchemas:i().func.isRequired,listFulfillmentsForRequests:i().func.isRequired,goToNextPane:i().func.isRequired,goToPrevPane:i().func.isRequired,setExecutionType:i().func.isRequired,setSelectedFulfillmentDefinitions:i().func.isRequired,setStatusFilter:i().func.isRequired}
const Te=(0,o.D)((()=>{(0,d.getStore)().dispatch((0,G.mX)())}),300,{isImmediate:!0}),ge=(0,o.D)((()=>{(0,d.getStore)().dispatch((0,G.$s)())}),300,{isImmediate:!0})
const fe=(0,s.$j)((function ExecuteRequestFlow_mapStateToProps(e){const{excludedPanes:t,executionType:n,paneKey:a,selectedFulfillmentDefinitions:i,selectedExecutedFulfillmentDefinitions:r,statusFilter:s}=e.ui.requests.executeRequestFlow,{fulfillmentIdsByRequestId:o,fulfillmentsById:l}=e.models.requests.fulfillments,c={}
Object.keys(o).forEach((e=>{c[e]=o[e].map((e=>l[e]))}))
return{excludedPanes:t,executionType:n,paneKey:a,selectedFulfillmentDefinitions:i,selectedExecutedFulfillmentDefinitions:r,statusFilter:s,fulfillmentsByRequestIds:c}}),(function ExecuteRequestFlow_mapDispatchToProps(e){return{closeExecuteRequestFlow:()=>{e((0,G.K6)())},fetchRequestSampleGroups:async t=>{await e((0,p.H5)(t))},fetchRequestTaskSchemas:async()=>{await e(E.Qd())},fetchTasksForRequests:async t=>{await e((0,S.qY)(t))},goToNextPane:()=>{Te()},goToPrevPane:()=>{ge()},listFulfillmentsForRequests:async t=>{await e((0,m.He)(t))},openExecuteRequestFlow:t=>{e((0,G.HQ)(t))},setExecutionType:t=>{e((0,G.Tj)(t))},setSelectedFulfillmentDefinitions:t=>{e((0,G.gk)(t))},setSelectedExecutedFulfillmentDefinitions:t=>{e((0,G.j7)(t))},setStatusFilter:t=>{e((0,G.bI)(t))}}}))(ExecuteRequestFlow)},277399:(e,t,n)=>{n.d(t,{VV:()=>r,aZ:()=>a,nj:()=>s,y$:()=>i})
const a={SELECT_SAMPLES:"SELECT_SAMPLES",SELECT_EXECUTION_TYPE:"SELECT_EXECUTION_TYPE",EXECUTE:"EXECUTE",CONFIRM_REEXECUTE:"CONFIRM_REEXECUTE"}
var i
!function(e){e.SELECT_SAMPLES="SELECT_SAMPLES"
e.SELECT_EXECUTION_TYPE="SELECT_EXECUTION_TYPE"
e.EXECUTE="EXECUTE"
e.CONFIRM_REEXECUTE="CONFIRM_REEXECUTE"}(i||(i={}))
const r=[i.SELECT_SAMPLES,i.CONFIRM_REEXECUTE,i.SELECT_EXECUTION_TYPE,i.EXECUTE],s={ENTRY:"ENTRY",ENTRY_TEMPLATE:"ENTRY_TEMPLATE",EXISTING_ENTRY:"EXISTING_ENTRY",WORKFLOW:"WORKFLOW"}
var o
!function(e){e.ENTRY="ENTRY"
e.ENTRY_TEMPLATE="ENTRY_TEMPLATE"
e.EXISTING_ENTRY="EXISTING_ENTRY"
e.WORKFLOW="WORKFLOW"}(o||(o={}))},757541:(e,t,n)=>{n.d(t,{$s:()=>goToPrevPane,HQ:()=>openExecuteRequestFlow,K6:()=>closeExecuteRequestFlow,Tj:()=>setExecutionType,bI:()=>setStatusFilter,gk:()=>setSelectedFulfillmentDefinitions,gp:()=>a,j7:()=>setSelectedExecutedFulfillmentDefinitions,mX:()=>goToNextPane})
var a
!function(e){e.OPEN_EXECUTE_REQUEST_FLOW="OPEN_EXECUTE_REQUEST_FLOW"
e.CLOSE_EXECUTE_REQUEST_FLOW="CLOSE_EXECUTE_REQUEST_FLOW"
e.EXECUTE_REQUEST_FLOW_GO_TO_PREV_PANE="EXECUTE_REQUEST_FLOW_GO_TO_PREV_PANE"
e.EXECUTE_REQUEST_FLOW_GO_TO_NEXT_PANE="EXECUTE_REQUEST_FLOW_GO_TO_NEXT_PANE"
e.EXECUTE_REQUEST_FLOW_SET_SELECTED_EXECUTED_FULFILLMENT_DEFINITIONS="EXECUTE_REQUEST_FLOW_SET_SELECTED_EXECUTED_FULFILLMENT_DEFINITIONS"
e.EXECUTE_REQUEST_FLOW_SET_SELECTED_FULFILLMENT_DEFINITIONS="EXECUTE_REQUEST_FLOW_SET_SELECTED_FULFILLMENT_DEFINITIONS"
e.EXECUTE_REQUEST_FLOW_SET_STATUS_FILTER="EXECUTE_REQUEST_FLOW_SET_STATUS_FILTER"
e.EXECUTE_REQUEST_FLOW_SET_EXECUTION_TYPE="EXECUTE_REQUEST_FLOW_SET_EXECUTION_TYPE"}(a||(a={}))
function openExecuteRequestFlow({excludedPanes:e,paneKey:t}){return{type:a.OPEN_EXECUTE_REQUEST_FLOW,excludedPanes:e,paneKey:t}}function closeExecuteRequestFlow(){return{type:a.CLOSE_EXECUTE_REQUEST_FLOW}}function goToPrevPane(){return{type:a.EXECUTE_REQUEST_FLOW_GO_TO_PREV_PANE}}function goToNextPane(){return{type:a.EXECUTE_REQUEST_FLOW_GO_TO_NEXT_PANE}}function setSelectedFulfillmentDefinitions(e){return{type:a.EXECUTE_REQUEST_FLOW_SET_SELECTED_FULFILLMENT_DEFINITIONS,fulfillmentDefinitions:e}}function setSelectedExecutedFulfillmentDefinitions(e){return{type:a.EXECUTE_REQUEST_FLOW_SET_SELECTED_EXECUTED_FULFILLMENT_DEFINITIONS,fulfillmentDefinitions:e}}function setStatusFilter(e){return{type:a.EXECUTE_REQUEST_FLOW_SET_STATUS_FILTER,statusFilter:e}}function setExecutionType(e){return{type:a.EXECUTE_REQUEST_FLOW_SET_EXECUTION_TYPE,executionType:e}}},404646:(e,t,n)=>{n.d(t,{$:()=>setSelectedEntry,K:()=>a})
var a
!function(e){e.SET_SELECTED_ENTRY="EXECUTE_REQUEST_FLOW_EXISTING_ENTRY_SET_SELECTED_ENTRY"}(a||(a={}))
function setSelectedEntry(e){return{type:a.SET_SELECTED_ENTRY,selectedEntry:e}}},535540:(e,t,n)=>{n.d(t,{Fp:()=>l,Nz:()=>d,V1:()=>s,hm:()=>c,lG:()=>a,r9:()=>r})
var a,i=n(602652)
!function(e){e.PENDING="PENDING"
e.IN_PROGRESS="IN_PROGRESS"
e.COMPLETED="COMPLETED"
e.FAILED="FAILED"}(a||(a={}))
const r={[a.PENDING]:"Pending",[a.IN_PROGRESS]:"In progress",[a.COMPLETED]:"Completed",[a.FAILED]:"Marked for redo"},s={[a.PENDING]:{className:"requestFulfillment-icon--pending",icon:"request-pending"},[a.IN_PROGRESS]:{className:"requestFulfillment-icon--in-progress",icon:"request-in-progress"},[a.COMPLETED]:{className:"requestFulfillment-icon--completed",icon:"request-executed"},[a.FAILED]:{className:"requestFulfillment-icon--pending",icon:"request-pending"}},o={requestId:i.string.isRequired,requestTaskId:i.string,sampleGroupId:i.string,entryId:i.string,workflowId:i.string},l=i.shape({...o,id:i.string.isRequired,createdAt:i.string.isRequired,status:i.oneOf(Object.values(a)).isRequired,statusAfterReview:i.oneOf(Object.values(a)).isRequired}),c=i.shape({...o,cid:i.string.isRequired}),d=i.shape({PENDING:i.number.isRequired,IN_PROGRESS:i.number.isRequired,COMPLETED:i.number.isRequired,FAILED:i.number.isRequired})},455040:(e,t,n)=>{n.d(t,{wI:()=>E,zA:()=>FulfillmentReduxActions_bulkRemoveFulfillments,O3:()=>FulfillmentReduxActions_bulkUpdateFulfillments,sx:()=>FulfillmentReduxActions_executeIntoExistingEntry,qI:()=>FulfillmentReduxActions_fetchRequestFulfillments,$Q:()=>FulfillmentReduxActions_fetchRequestResponse,vl:()=>fulfillmentsLoadedForEntry,He:()=>FulfillmentReduxActions_listFulfillmentsForRequests,f:()=>FulfillmentReduxActions_updateFulfillment})
var a=n(531041),i=n(232606),r=n(787004),s=n(776065),o=n(947730),l=n(974913),c=n(380490),d=n(687715),u=n(46538),m=n(723039),p=n(38209),h=n(771398)
var E,S=n(975466)
!function(e){e.REQUEST_FULFILLMENTS_FETCHED_FOR_REQUESTS="REQUEST_FULFILLMENTS_FETCHED_FOR_REQUESTS"
e.REQUEST_RESPONSE_FETCH_COMPLETED="REQUEST_RESPONSE_FETCH_COMPLETED"
e.REQUEST_FULFILLMENTS_FETCHED="REQUEST_FULFILLMENTS_FETCHED"
e.REQUEST_FULFILLMENTS_FETCH_STARTED="REQUEST_FULFILLMENTS_FETCH_STARTED"
e.REQUEST_FULFILLMENT_UPDATED="REQUEST_FULFILLMENT_UPDATED"
e.REQUEST_FULFILLMENTS_DELETED="REQUEST_FULFILLMENTS_DELETED"
e.FULFILLMENTS_LOADED_FOR_ENTRY="FULFILLMENTS_LOADED_FOR_ENTRY"}(E||(E={}))
function fulfillmentsFetchedForRequests(e,t){return{type:E.REQUEST_FULFILLMENTS_FETCHED_FOR_REQUESTS,requestIds:e,fulfillments:t}}function FulfillmentReduxActions_fetchRequestResponse(e){return t=>function fetchRequestResponse(e){return Promise.resolve(h.xA(`/1/api/requests/${e}/response`))}(e).then((({samples:n,fulfillments:s,entrySummariesById:l,workflowSummaries:d})=>{!function dispatchSamplesFetched(e,t){const n={},s={}
for(const{bioentity:e,batch:a}of t)e?n[e.id]=e:a?s[a.id]=a:(0,i.hu)(!1,"Request response sample should have either a batch or a file")
a.default.isEmpty(n)||e(c.wb(n))
a.default.isEmpty(s)||o.Z.dispatch({actionType:r.z0Y,batchesById:s})}(t,n)
t(c.lE(l))
t({type:c.VQ.WORKFLOW_WORKFLOW_SUMMARIES_FETCH_COMPLETED,workflowSummaries:d})
t(fulfillmentsFetchedForRequests([e],s))
const u=n.map((({bioentity:e,batch:t,status:n})=>({bioentityId:e?e.id:null,batchId:t?t.id:null,status:n})))
t(function requestResponseFetchCompleted(e,t){return{type:E.REQUEST_RESPONSE_FETCH_COMPLETED,requestId:e,samples:t}}(e,u))
return{samples:n}}))}function requestFulfillmentsFetched(e){return{type:E.REQUEST_FULFILLMENTS_FETCHED,fulfillments:e}}function FulfillmentReduxActions_fetchRequestFulfillments(e){return async t=>{const{requestFulfillments:n,sampleGroups:a,stageRunSamples:i,batchesById:r,containersById:s,fileSummariesById:o,requests:l,requestTasks:c}=await function fetchRequestFulfillments(e){return Promise.resolve(h.ty({url:"/1/api/request-fulfillments:bulk-get",data:{fulfillmentIds:e}}))}(e)
t(requestFulfillmentsFetched(n))
p.RC({stageRunSamples:i,batchesById:r,containersById:s,fileSummariesById:o})
t(m.N(a))
t(d.WF(l))
t(u.d_(c))}}function FulfillmentReduxActions_listFulfillmentsForRequests(e){return async t=>{t(function requestFulfillmentsFetchStarted(e){return{type:E.REQUEST_FULFILLMENTS_FETCH_STARTED,requestIds:e}}(e))
const{requestFulfillments:n}=await function listFulfillmentsForRequests(e){return Promise.resolve(h.xA("/1/api/request-fulfillments",{requestIds:e.join(",")}))}(e)
t(fulfillmentsFetchedForRequests(e,n))}}function FulfillmentReduxActions_updateFulfillment(e,t){return n=>{(function updateFulfillment(e,t){return Promise.resolve(h.Yh({url:`/1/api/request-fulfillments/${e}`,data:{fulfillment:t}}))})(e,t).then((({requestFulfillment:e})=>{n(function requestFulfillmentUpdated(e){return{type:E.REQUEST_FULFILLMENT_UPDATED,fulfillment:e}}(e))}),l.ZP.notifyError)}}function FulfillmentReduxActions_bulkUpdateFulfillments(e){return async t=>{const{requestFulfillments:n}=await function bulkUpdateFulfillments(e){return Promise.resolve(h.Yh({url:"/1/api/request-fulfillments:bulk-update",data:{fulfillmentUpdates:e}}))}(e)
t(requestFulfillmentsFetched(n))
l.ZP.success("Requests updated successfully.")}}function FulfillmentReduxActions_bulkRemoveFulfillments(e){return async t=>{await function bulkRemoveFulfillments(e){return h.WY({url:"/1/api/request-fulfillments:bulk-delete",data:{fulfillmentIds:e}})}(e)
t(function requestFulfillmentsDeleted(e){return{type:E.REQUEST_FULFILLMENTS_DELETED,fulfillmentIds:e}}(e))}}function fulfillmentsLoadedForEntry({entryId:e,requestFulfillments:t}){return{type:E.FULFILLMENTS_LOADED_FOR_ENTRY,entryId:e,requestFulfillments:t}}function FulfillmentReduxActions_executeIntoExistingEntry(e,t){return async n=>{const{entryFulfillments:a,numDuplicates:i}=await function executeIntoExistingEntry(e,t){return Promise.resolve(h.ty({url:"/1/api/request-fulfillments:execute-into-existing-entry",data:{entryId:e,fulfillments:t}}))}(e,t)
if(i){const e=(0,S.pi)((0,S.pf)(t))
l.ZP.warn(`${i} ${e} were ignored since they were already present in this entry.`)}n(fulfillmentsLoadedForEntry({entryId:e,requestFulfillments:a}))
s.Z.openFile(e)}}},976880:(e,t,n)=>{n.d(t,{A:()=>headers,JM:()=>checkFulfillmentForRenderRequestTaskField,L7:()=>fulfillmentRow,QY:()=>checkFulfillmentForRenderSampleGroupField})
var a=n(531041),i=n(232606)
function checkFulfillmentForRenderSampleGroupField(e){(0,i.hu)(null!=e.requestSchema.sampleGroupSchema,"renderSampleGroupField should only be called if all fulfillments have a sample group schema",{fulfillmentId:e.fulfillment.id})}function checkFulfillmentForRenderRequestTaskField(e){e.requestTaskSchema&&!e.requestTask&&(0,i.hu)(!1,"Fulfillments with a task schema must have a task",{fulfillmentId:e.fulfillment.id})}function renderSchemaFields(e,t,n){const i=a.default.chain(e).map((e=>t(e))).compact().sortBy("id").uniq("id",!0).value().map((e=>e.fields.map((t=>n(t,e)))))
return a.default.flatten(i)}function fulfillmentRow(e,t){const{renderSampleGroupField:n,renderRequestID:i,renderTask:r,renderStatus:s,renderRequestField:o,renderRequestTaskField:l}=t,c=a.default.some(e,(e=>null!=e.requestTaskSchema))
return[...a.default.flatten(renderSchemaFields(e,(e=>e.requestSchema.sampleGroupSchema),n)),i(),...c?[r()]:[],s(),...renderSchemaFields(e,(e=>e.requestSchema),o),...renderSchemaFields(e,(e=>e.requestTaskSchema),l)]}function headers(e,{renderCustomSampleGroupFieldHeaders:t}){return fulfillmentRow(e,{renderSampleGroupField:e=>"function"==typeof t?t(e):function sampleHeadersForField(e){return[e.displayName,`${e.displayName} Container`,`${e.displayName} Position`]}(e),renderRequestID:()=>"Request ID",renderTask:()=>"Task",renderStatus:()=>"Mark for redo",renderRequestField:e=>e.displayName,renderRequestTaskField:e=>e.displayName})}},975466:(e,t,n)=>{n.d(t,{CE:()=>requestSchemaToFulfillmentType,pf:()=>fulfillmentDefinitionsToType,pi:()=>fulfillmentTypeToPluralized})
var a,i=n(232606)
!function(e){e.REQUEST="REQUEST"
e.SAMPLE_GROUP="SAMPLE_GROUP"
e.SAMPLE_GROUP_AND_TASK="SAMPLE_GROUP_AND_TASK"}(a||(a={}))
const r={[a.REQUEST]:"request",[a.SAMPLE_GROUP]:"sample",[a.SAMPLE_GROUP_AND_TASK]:"sample"}
function requestSchemaToFulfillmentType(e){return(null==e?void 0:e.sampleGroupSchema)?e.requestTaskSchemaIds.length?a.SAMPLE_GROUP_AND_TASK:a.SAMPLE_GROUP:a.REQUEST}function fulfillmentDefinitionsToType(e){(0,i.hu)(e.length>0,"Expected at least one fulfillment")
const t=e[0]
if(t.requestTaskId){(0,i.hu)(null!=t.sampleGroupId,"sampleGroupId should be set when requestTaskId is set")
return a.SAMPLE_GROUP_AND_TASK}return t.sampleGroupId?a.SAMPLE_GROUP:a.REQUEST}function fulfillmentTypeToPluralized(e){return`${r[e]}s`}},505273:(e,t,n)=>{n.d(t,{Cg:()=>o,ZR:()=>l,eV:()=>c,hH:()=>s})
var a=n(769784),i=n(91092),r=n(12274)
const s={fragment:a.Ps`
  fragment GraphQLRequestTasksRelationship on RequestNode {
    id
    tasks {
      id
      sampleGroups {
        id
      }
    }
  }
`,fragmentName:"GraphQLRequestTasksRelationship"},o={fragment:a.Ps`
  fragment RequestTasks on RequestNode {
    id
    ...GraphQLRequestTasksRelationship
    tasks {
      id
      ...RequestTaskGraphQL
    }
  }
  ${(0,i.f)("RequestTask").fragment}
  ${s.fragment}
`,fragmentName:"RequestTasks"},l={fragment:a.Ps`
  fragment GraphQLRequestSampleGroupsRelationship on RequestNode {
    id
    sampleGroups {
      id
    }
  }
`,fragmentName:"GraphQLRequestSampleGroupsRelationship"},c={fragment:a.Ps`
  fragment RequestSampleGroups on RequestNode {
    id
    ...GraphQLRequestSampleGroupsRelationship
    sampleGroups {
      id
      ...SampleGroupGraphQL
      samples {
        ...FullExecutionSample
      }
    }
  }
  ${(0,i.f)("SampleGroup").fragment}
  ${l.fragment}
  ${r.H.fragment}
`,fragmentName:"RequestSampleGroups"}},49002:(e,t,n)=>{n.d(t,{_Y:()=>a,Du:()=>InputReduxActions_bulkUpdateRequests,hG:()=>InputReduxActions_createRequest,H5:()=>fetchRequestSampleGroups,YT:()=>requestSampleGroupsFetchCompleted,WN:()=>InputReduxActions_updateRequest,D7:()=>InputReduxActions_updateRequestSampleGroups})
var a,i=n(531041),r=n(294120),s=n(776065),o=n(974913),l=n(687715),c=n(46538),d=n(627259),u=n(876225),m=n(723039),p=n(38209),h=n(771398)
!function(e){e.REQUEST_CREATE_STARTED="REQUEST_CREATE_STARTED"
e.REQUEST_CREATE_COMPLETED="REQUEST_CREATE_COMPLETED"
e.REQUEST_CREATE_FAILED="REQUEST_CREATE_FAILED"
e.REQUEST_SAMPLE_GROUPS_FETCH_COMPLETED="REQUEST_SAMPLE_GROUPS_FETCH_COMPLETED"}(a||(a={}))
function InputReduxActions_updateRequest(e,t){return async n=>{await function updateRequest(e,t){return Promise.resolve(h.Yh({url:`/1/api/requests/${e}`,data:t}))}(e,t).then((({request:e})=>{n(l.WF([e]))
o.ZP.success("Request updated successfully.")}),(e=>{o.ZP.notifyError(e)}))}}function InputReduxActions_bulkUpdateRequests(e,t){return async n=>{await function bulkUpdateRequests(e,t){return Promise.resolve(h.ty({url:"/1/api/requests:bulk-update",data:{...t,requestIds:e}}))}(e,t).then((({requests:e})=>{n(l.WF(e))
o.ZP.success("Requests updated successfully.")}),(e=>{o.ZP.notifyError(e)}))}}function InputReduxActions_createRequest({assignees:e,schemaId:t,projectId:n,requestorId:i,requestTasks:l,sampleGroupIdsByRequestTaskId:c,sampleGroups:u,tags:m}){return p=>{p(function requestCreateStarted(){return{type:a.REQUEST_CREATE_STARTED}}())
return function createRequest(e){return Promise.resolve(h.ty({url:"/1/api/requests",data:e}))}({assignees:e,schemaId:t,projectId:n,requestorId:i,requestTasks:l,sampleGroupIdsByRequestTaskId:c,sampleGroups:u,tags:m}).then((({request:e})=>{p(function requestCreateCompleted(e){return{type:a.REQUEST_CREATE_COMPLETED,request:e}}(e))
s.Z.openFile(e.id)
o.ZP.success("Request successfully created")
p(d.f(r.$0.REQUESTS))}),(e=>{p(function requestCreateFailed(){return{type:a.REQUEST_CREATE_FAILED}}())
throw e}))}}function requestSampleGroupsFetchCompleted(e){return{type:a.REQUEST_SAMPLE_GROUPS_FETCH_COMPLETED,sampleGroupIdsByRequestId:e}}function fetchRequestSampleGroups(e){return async t=>{const{sampleGroups:n,sampleGroupIdsByRequestId:a,stageRunSamples:i,batchesById:r,containersById:s,fileSummariesById:o}=await u.U({requestIds:e})
p.RC({stageRunSamples:i,batchesById:r,containersById:s,fileSummariesById:o})
t(m.N(n))
t(requestSampleGroupsFetchCompleted(a))}}function InputReduxActions_updateRequestSampleGroups({requestId:e,sampleGroupIdsByRequestTaskId:t,sampleGroups:n}){return async a=>{const{sampleGroupIdsByRequestTaskId:r,sampleGroups:s,stageRunSamples:o,batchesById:l,containersById:d,fileSummariesById:u}=await function updateRequestSampleGroups({requestId:e,sampleGroupIdsByRequestTaskId:t,sampleGroups:n}){return Promise.resolve(h.Yh({url:`/1/api/requests/${e}/sample-groups`,data:{sampleGroupIdsByRequestTaskId:t,sampleGroups:n}}))}({requestId:e,sampleGroupIdsByRequestTaskId:t,sampleGroups:n})
p.RC({stageRunSamples:o,batchesById:l,containersById:d,fileSummariesById:u})
a(m.N(s))
a(requestSampleGroupsFetchCompleted({[e]:i.default.pluck(s,"id")}))
a(c.I$(r))}}},944082:(e,t,n)=>{n.d(t,{Lb:()=>a,UV:()=>requestSchemasUnarchived,lI:()=>requestSchemasUpdatedFromGQL,o9:()=>requestSchemaFetched,r9:()=>requestSchemasArchived,vc:()=>requestSchemasListed})
var a
!function(e){e.REQUEST_SCHEMAS_LISTED="REQUEST_SCHEMAS_LISTED"
e.REQUEST_SCHEMA_FETCHED="REQUEST_SCHEMA_FETCHED"
e.REQUEST_SCHEMAS_ARCHIVED="REQUEST_SCHEMAS_ARCHIVED"
e.REQUEST_SCHEMAS_UNARCHIVED="REQUEST_SCHEMAS_UNARCHIVED"
e.REQUEST_SCHEMAS_UPDATED_FROM_GQL="REQUEST_SCHEMAS_UPDATED_FROM_GQL"}(a||(a={}))
function requestSchemasListed(e){return{type:a.REQUEST_SCHEMAS_LISTED,requestSchemasById:e}}function requestSchemaFetched(e){return{type:a.REQUEST_SCHEMA_FETCHED,requestSchema:e}}function requestSchemasUpdatedFromGQL(e){return{type:a.REQUEST_SCHEMAS_UPDATED_FROM_GQL,requestSchemasById:e}}function requestSchemasArchived(e,t){return{type:a.REQUEST_SCHEMAS_ARCHIVED,itemIds:e,archiveRecordsByItemId:t}}function requestSchemasUnarchived(e){return{type:a.REQUEST_SCHEMAS_UNARCHIVED,itemIds:e}}},837127:(e,t,n)=>{n.d(t,{Ew:()=>createSchema,Qd:()=>fetchAll,Re:()=>bulkUnarchive,Vc:()=>updateSchemaSpec,_L:()=>fetchSchemaSpec,k4:()=>taskSchemaListingURL,nH:()=>taskSchemaCreateURL,u6:()=>taskSchemaURL,uc:()=>bulkArchive})
var a=n(788836),i=n(771398)
function fetchAll(){return i.UJ("/1/api/request-task-schemas")}function fetchSchemaSpec(e){return i.UJ(`/1/api/request-task-schemas/${e}/spec`)}function updateSchemaSpec(e,t,n){return i.Ry({url:`/1/api/request-task-schemas/${e}`,data:{schemaName:t,spec:n}})}function createSchema(e,t,n){return i.s0({url:"/1/api/request-task-schemas",data:{ownerId:e,name:t,spec:n}})}function taskSchemaListingURL(){return`/${a.Z.currentUser().url_identifier}/request-schemas/tasks/`}function taskSchemaURL(e){return`/${a.Z.currentUser().url_identifier}/request-schemas/tasks/${e}`}function taskSchemaCreateURL(){return`/${a.Z.currentUser().url_identifier}/request-schemas/tasks/create`}function bulkArchive(e,t){return i.s0({url:"/1/api/request-task-schemas:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return i.s0({url:"/1/api/request-task-schemas:bulk-unarchive",data:{ids:e}})}},930113:(e,t,n)=>{n.d(t,{$:()=>requestTaskSchemasUnarchived,Ew:()=>createSchema,Hy:()=>requestTaskSchemasFetched,Mz:()=>requestTaskSchemasUpdatedFromGQL,Qd:()=>fetchAll,Vc:()=>updateSchemaSpec,_L:()=>fetchSchemaSpec,ch:()=>a,iO:()=>requestTaskSchemasArchived})
var a,i=n(675649),r=n(974913),s=n(563009),o=n(883026),l=n(837127)
!function(e){e.REQUEST_TASK_SCHEMAS_FETCHED="REQUEST_TASK_SCHEMAS_FETCHED"
e.REQUEST_TASK_SCHEMA_FETCHED="REQUEST_TASK_SCHEMA_FETCHED"
e.REQUEST_TASK_SCHEMAS_ARCHIVED="REQUEST_TASK_SCHEMAS_ARCHIVED"
e.REQUEST_TASK_SCHEMAS_UNARCHIVED="REQUEST_TASK_SCHEMAS_UNARCHIVED"
e.REQUEST_TASK_SCHEMAS_UPDATED_FROM_GQL="REQUEST_TASK_SCHEMAS_UPDATED_FROM_GQL"}(a||(a={}))
function requestTaskSchemasArchived(e,t){return{type:a.REQUEST_TASK_SCHEMAS_ARCHIVED,itemIds:e,archiveRecordsByItemId:t}}function requestTaskSchemasUnarchived(e){return{type:a.REQUEST_TASK_SCHEMAS_UNARCHIVED,itemIds:e}}function requestTaskSchemasFetched(e){return{type:a.REQUEST_TASK_SCHEMAS_FETCHED,requestTaskSchemasById:e}}function requestTaskSchemaFetched(e){return{type:a.REQUEST_TASK_SCHEMA_FETCHED,requestTaskSchema:e}}function fetchAll(){return async e=>{const{requestTaskSchemasById:t}=await l.Qd()
e(requestTaskSchemasFetched(t))}}function requestTaskSchemasUpdatedFromGQL(e){return{type:a.REQUEST_TASK_SCHEMAS_UPDATED_FROM_GQL,requestTaskSchemasById:e}}function fetchSchemaSpec(e){return async t=>{const{requestTaskSchema:n,schemaSpec:a}=await l._L(e)
t(requestTaskSchemaFetched(n))
t(s.JI(n.id,a))}}function updateSchemaSpec({schemaId:e,schemaName:t,spec:n}){return async a=>{try{const{requestTaskSchema:i,schemaSpec:c}=await(0,o.jI)(l.Vc(e,t,n),"Updating...")
a(requestTaskSchemaFetched(i))
a(s.JI(i.id,c))
r.ZP.success("Updated schema successfully")}catch(e){a(s.Iq(e))}}}function createSchema({ownerId:e,name:t,spec:n}){return async a=>{try{const{requestTaskSchema:r}=await l.Ew(e,t,n)
a(requestTaskSchemaFetched(r))
a(s.JI(r.id,n))
i.c4(null,l.u6(r.id))}catch(e){a(s.Iq(e))}}}},906719:(e,t,n)=>{n.d(t,{SR:()=>getSortedRequestTaskSchemas,Wj:()=>o,ZP:()=>reduceRequestSchemas})
var a=n(478644),i=n(944082),r=n(930113),s=n(641329)
const o={requestTaskSchemasById:null,requestSchemasById:null}
function _getChangedRequestSchemaIds(e,t){return null==e.requestSchemasById?[]:t.filter((t=>e.requestSchemasById.hasOwnProperty(t)))}function reduceRequestSchemas(e=o,t){switch(t.type){case r.ch.REQUEST_TASK_SCHEMAS_FETCHED:{const{requestTaskSchemasById:n}=t
return{...e,requestTaskSchemasById:n}}case r.ch.REQUEST_TASK_SCHEMA_FETCHED:{const{requestTaskSchema:n}=t,a={...e.requestTaskSchemasById,[n.id]:n}
return{...e,requestTaskSchemasById:a}}case i.Lb.REQUEST_SCHEMAS_LISTED:{const{requestSchemasById:n}=t
return{...e,requestSchemasById:n}}case i.Lb.REQUEST_SCHEMA_FETCHED:{const{requestSchema:n}=t,a={...e.requestSchemasById,[n.id]:n}
return{...e,requestSchemasById:a}}case i.Lb.REQUEST_SCHEMAS_UPDATED_FROM_GQL:{const{requestSchemasById:n}=t,a={...e.requestSchemasById,...n}
return{...e,requestSchemasById:a}}case r.ch.REQUEST_TASK_SCHEMAS_ARCHIVED:{const{itemIds:n,archiveRecordsByItemId:i}=t
return function _updateRequestTaskSchemasFromArchiveAction(e,t,n){return null==e.requestTaskSchemasById?e:{...e,requestTaskSchemasById:(0,a.e)(e.requestTaskSchemasById,t,n)}}(e,n,i)}case r.ch.REQUEST_TASK_SCHEMAS_UNARCHIVED:{const{itemIds:n}=t
return function _updateRequestTaskSchemasFromUnarchiveAction(e,t){return null==e.requestTaskSchemasById?e:{...e,requestTaskSchemasById:(0,a.k)(e.requestTaskSchemasById,t)}}(e,n)}case r.ch.REQUEST_TASK_SCHEMAS_UPDATED_FROM_GQL:{const{requestTaskSchemasById:n}=t
return{...e,requestTaskSchemasById:{...e.requestTaskSchemasById,...n}}}case i.Lb.REQUEST_SCHEMAS_ARCHIVED:{const{itemIds:n,archiveRecordsByItemId:i}=t
return function _updateRequestSchemasFromArchiveAction(e,t,n){return null==e.requestSchemasById?e:{...e,requestSchemasById:(0,a.e)(e.requestSchemasById,_getChangedRequestSchemaIds(e,t),n)}}(e,n,i)}case i.Lb.REQUEST_SCHEMAS_UNARCHIVED:{const{itemIds:n}=t
return function _updateRequestSchemasFromUnarchiveAction(e,t){return null==e.requestSchemasById?e:{...e,requestSchemasById:(0,a.k)(e.requestSchemasById,_getChangedRequestSchemaIds(e,t))}}(e,n)}default:return e}}function getSortedRequestTaskSchemas({requestTaskSchemasById:e}){if(null==e)return null
const t=Object.values(e)
return(0,s.Z)(t)}},641329:(e,t,n)=>{n.d(t,{Z:()=>sortRequestTaskSchemas})
var a=n(531041)
function sortRequestTaskSchemas(e){return a.default.sortBy(e,(e=>e.name.toLocaleLowerCase()))}},590441:(e,t,n)=>{n.d(t,{Nu:()=>c,Qc:()=>o,eM:()=>s,nD:()=>l})
var a=n(602652),i=n(227887),r=n(497790)
const s=a.shape({id:a.string.isRequired,name:a.string.isRequired,fields:a.arrayOf(r.SCHEMA_FIELD_SHAPE.isRequired).isRequired,sqlIdentifier:a.string.isRequired}),o=a.shape({id:a.string,cid:a.string,schemaId:a.string.isRequired,tags:a.arrayOf(i.kY).isRequired}),l=a.shape({id:a.string,cid:a.string,schema:a.shape({id:a.string.isRequired}),tagsJson:a.arrayOf(i.kY).isRequired}),c="SCHEMA_ID_REQUEST_TASK_SCHEMA_ALL"},46538:(e,t,n)=>{n.d(t,{op:()=>a,J:()=>RequestTaskReduxActions_createRequestTask,o9:()=>RequestTaskReduxActions_deleteRequestTask,qY:()=>fetchTasksForRequests,I$:()=>requestTaskSampleGroupAssociationsUpdated,d_:()=>requestTasksFetched,p$:()=>requestTasksFetchedForRequests,Z_:()=>RequestTaskReduxActions_updateRequestTask})
var a,i=n(531041),r=n(974913),s=n(87209),o=n(771398)
!function(e){e.REQUEST_TASKS_FETCHED_FOR_REQUESTS="REQUEST_TASKS_FETCHED_FOR_REQUESTS"
e.REQUEST_TASKS_FETCHED="REQUEST_TASKS_FETCHED"
e.REQUEST_TASK_CREATED="REQUEST_TASK_CREATED"
e.REQUEST_TASK_UPDATED="REQUEST_TASK_UPDATED"
e.REQUEST_TASK_DELETED="REQUEST_TASK_DELETED"
e.REQUEST_TASK_SAMPLE_GROUP_ASSOCIATIONS_UPDATED="REQUEST_TASK_SAMPLE_GROUP_ASSOCIATIONS_UPDATED"}(a||(a={}))
function requestTasksFetchedForRequests(e,t){return{type:a.REQUEST_TASKS_FETCHED_FOR_REQUESTS,taskIdsByRequestId:e,sampleGroupIdsByRequestTaskId:t}}function fetchTasksForRequests(e){return async t=>{const{requestTasks:n,sampleGroupIdsByRequestTaskId:a}=await function listRequestTasks(e){return o.s0({url:"/1/api/request-tasks:bulk-get",data:{requestIds:e}})}(e),r={...i.default.object(e.map((e=>[e,[]]))),...i.default.chain(n).groupBy("requestId").mapObject((e=>i.default.pluck(e,"id"))).value()}
t(requestTasksFetched(n))
t(requestTasksFetchedForRequests(r,a))}}function requestTasksFetched(e){return{type:a.REQUEST_TASKS_FETCHED,requestTasks:e}}function RequestTaskReduxActions_createRequestTask(e,t){return async n=>{const{requestTask:i,requestTaskIdsByRequestId:s}=await function createRequestTask(e,t){return o.s0({url:`/1/api/requests/${e}/request-tasks`,data:t})}(e,t)
n(function requestTaskCreated({requestTask:e,requestTaskIdsByRequestId:t}){return{type:a.REQUEST_TASK_CREATED,requestTask:e,requestTaskIdsByRequestId:t}}({requestTask:i,requestTaskIdsByRequestId:s}))
r.ZP.success("Task created successfully.")}}function RequestTaskReduxActions_updateRequestTask(e){return async t=>{const{requestTask:n}=await function updateRequestTask(e){return o.Ry({url:`/1/api/request-tasks/${e.id}`,data:e})}(e)
t(function requestTaskUpdated(e){return{type:a.REQUEST_TASK_UPDATED,updatedRequestTask:e}}(n))
r.ZP.success("Task updated successfully.")}}function RequestTaskReduxActions_deleteRequestTask(e){return async t=>{try{s.$Z()
await function deleteRequestTask(e){return o.WY({url:`/1/api/request-tasks/${e}`})}(e)
t(function requestTaskDeleted(e){return{type:a.REQUEST_TASK_DELETED,requestTaskId:e}}(e))}finally{s.Cp()}}}function requestTaskSampleGroupAssociationsUpdated(e){return{type:a.REQUEST_TASK_SAMPLE_GROUP_ASSOCIATIONS_UPDATED,sampleGroupIdsByRequestTaskId:e}}},190919:(e,t,n)=>{n.d(t,{Sx:()=>createRequestTemplate,Yn:()=>updateRequestTemplate,Z4:()=>bulkFetchRequestTemplates,br:()=>fetchAllRequestTemplates})
var a=n(771398)
function fetchAllRequestTemplates(){return Promise.resolve(a.xA("/1/api/request-templates"))}function bulkFetchRequestTemplates(e){return a.s0({url:"/1/api/request-templates:bulk-get",data:{requestTemplateIds:e}})}function createRequestTemplate(e){return a.s0({url:"/1/api/request-templates",data:{requestSchemaId:e}})}function updateRequestTemplate(e,t){return a.Ry({url:`/1/api/request-templates/${e}`,data:{spec:t}})}},554353:(e,t,n)=>{n.d(t,{Xz:()=>createRequestTemplateCompleted,Yn:()=>updateRequestTemplate,Z5:()=>fetchRequestTemplateSpec,br:()=>fetchAllRequestTemplates,gO:()=>requestTemplatesUpdatedFromGQL,oY:()=>a,pe:()=>fetchAllRequestTemplatesCompleted})
var a,i=n(531041),r=n(974913),s=n(563009),o=n(54548),l=n(883026),c=n(190919)
!function(e){e.CREATE_REQUEST_TEMPLATE_COMPLETED="CREATE_REQUEST_TEMPLATE_COMPLETED "
e.FETCH_ALL_REQUEST_TEMPLATES_COMPLETED="FETCH_ALL_REQUEST_TEMPLATES_COMPLETED"
e.UPDATE_REQUEST_TEMPLATE_COMPLETED="UPDATE_REQUEST_TEMPLATE_COMPLETED"
e.REQUEST_TEMPLATES_UPDATED_FROM_GQL="REQUEST_TEMPLATES_UPDATED_FROM_GQL"}(a||(a={}))
function createRequestTemplateCompleted(e){return{type:a.CREATE_REQUEST_TEMPLATE_COMPLETED,template:e}}function fetchAllRequestTemplatesCompleted(e,t){return{type:a.FETCH_ALL_REQUEST_TEMPLATES_COMPLETED,templates:e,requestTemplatesById:t}}function requestTemplatesUpdatedFromGQL(e){return{type:a.REQUEST_TEMPLATES_UPDATED_FROM_GQL,templates:e}}function fetchAllRequestTemplates(){return async e=>{const t=await c.br(),n=i.default.indexBy(t.templates,"id")
e(fetchAllRequestTemplatesCompleted(t.templates,n))}}function fetchRequestTemplateSpec(e){return async t=>{const{schemaSpecs:n}=await c.Z4([e]),[a]=n
t((0,s.JI)(e,a))}}function updateRequestTemplate(e,t){return async n=>{try{const{schemaSpec:i,template:o}=await(0,l.jI)(c.Yn(e,t),"Updating...")
n((0,s.JI)(e,i))
n(function updateRequestTemplateCompleted(e){return{type:a.UPDATE_REQUEST_TEMPLATE_COMPLETED,template:e}}(o))
r.ZP.success("Updated request template successfully")}catch(e){const t=(0,o.Z)(e)
if(!t)throw e
n((0,s.HO)(t))}}}},946795:(e,t,n)=>{n.d(t,{HA:()=>getPrimaryLinkField,bh:()=>s,cq:()=>getPrimaryLinkTagForResult})
var a=n(232606),i=n(497790),r=n(581001)
const s=[i.FIELD_TYPES.BATCH_LINK.type,i.FIELD_TYPES.BIOENTITY_LINK.type]
function getPrimaryLinkField(e){return e.fields.find((e=>s.includes(e.fieldType)))}function getPrimaryLinkTagForResult(e,t){if(!e)return null
const n=(0,r.N)(t,e.id);(0,a.Gp)(Boolean(n),`Expected result with id ${t.id} to have tag for primary link field ${e.apiId}`)
return n||null}},208029:(e,t,n)=>{n.d(t,{D6:()=>i,Z5:()=>a})
const a="Result schemas",i={Result_Table:"Result Table",Result_table:"Result table",result_table:"result table",result_tables:"result tables",Result:"Result",result:"result",Results:"Results",results:"results",Run:"Run",Runs:"Runs",run:"run",runs:"runs"}},780188:(e,t,n)=>{n.d(t,{Gd:()=>I,XG:()=>getJsonUrl,XU:()=>S,aJ:()=>r.nc,eG:()=>T,j_:()=>E,vB:()=>g,zq:()=>h})
var a=n(602652),i=n(764677),r=n(256605),s=n(453580),o=n(263174),l=n(208029),c=n(497790),d=n(621768),u=n(544192),m=n(276637)
const{Section:p}=d,h={[r.nc.ASSAY_RESULT]:"result",[r.nc.ASSAY_RUN]:"run",[r.nc.ASSAY_REQUEST]:"request"}
function getJsonUrl(e,t){return t?m.mp(e,t,!0):m.DG(e)}const E={ASSAY_RESULT:p.ASSAY_RESULT_SCHEMAS,ASSAY_RUN:p.ASSAY_RUN_SCHEMAS},S={ASSAY_REQUEST:"Request",ASSAY_RESULT:l.D6.Result,ASSAY_RUN:l.D6.Run},T={[r.nc.ASSAY_REQUEST]:"RequestSchemaNode",[r.nc.ASSAY_RESULT]:"ResultSchemaNode",[r.nc.ASSAY_RUN]:"RunSchemaNode"},g=a.shape({...i.HH,id:a.string.isRequired,name:a.string.isRequired,sqlIdentifier:a.string.isRequired}),f={...i.HH,id:a.string.isRequired,derivedParent:g,fields:a.arrayOf(c.SCHEMA_FIELD_SHAPE.isRequired).isRequired,name:a.string.isRequired,organization:o.ORGANIZATION.isRequired,requestTaskSchemaIds:a.arrayOf(a.string.isRequired).isRequired,sampleGroupSchema:u.UJ,schemaType:a.oneOf(Object.values(r.nc)).isRequired,sqlIdentifier:a.string.isRequired,publishedDataTableColumns:a.arrayOf(s.qJ.isRequired)},I=a.shape(f)},276637:(e,t,n)=>{n.d(t,{DG:()=>createAssaySchemaURLJSON,Qd:()=>fetchAll,Re:()=>bulkUnarchive,VO:()=>assaySchemasURL,Zr:()=>createAssaySchemaURL,_C:()=>updateCollaborators,_I:()=>runSchemaURL,_L:()=>fetchSchemaSpec,g0:()=>resultSchemaURL,mp:()=>assaySchemaURL,sr:()=>updateAssaySchema,uc:()=>bulkArchive,xS:()=>createAssaySchema})
var a=n(256605),i=n(788836),r=n(771398)
function _urlPath(e){switch(e){case a.nc.ASSAY_REQUEST:return"requests"
case a.nc.ASSAY_RESULT:return"results"
case a.nc.ASSAY_RUN:return"runs"
default:throw new Error(`Unexpected assay schema type "${e}"`)}}function assaySchemasURL(e){return`/${i.Z.currentUser().url_identifier}/assay-schemas/${_urlPath(e)}/`}function assaySchemaURL(e,t,n){return n&&[a.nc.ASSAY_RESULT,a.nc.ASSAY_RUN].includes(e)?`/${i.Z.currentUser().url_identifier}/assay-schemas/${_urlPath(e)}/json/${t}`:`/${i.Z.currentUser().url_identifier}/assay-schemas/${_urlPath(e)}/${t}`}function createAssaySchemaURL(e){return`/${i.Z.currentUser().url_identifier}/assay-schemas/${_urlPath(e)}/create`}function createAssaySchemaURLJSON(e){return`/${i.Z.currentUser().url_identifier}/assay-schemas/${_urlPath(e)}/json/create`}function runSchemaURL(e){return assaySchemaURL(a.nc.ASSAY_RUN,e,!1)}function resultSchemaURL(e){return assaySchemaURL(a.nc.ASSAY_RESULT,e,!1)}function fetchAll(){return r.xA("/1/api/result-schemas")}function createAssaySchema({ownerId:e,name:t,spec:n,schemaType:a,sqlIdentifier:i,sessionId:s,isSpecJsonFormat:o=!0,publishDefaultDataTableConfig:l=!1,collaborators:c}){return r.ty({url:"/1/api/result-schemas",data:{ownerId:e,name:t,spec:n,schemaType:a,sqlIdentifier:i,isSpecJsonFormat:o,publishDefaultDataTableConfig:l,collaborators:c,sessionId:s}})}function updateAssaySchema({schemaId:e,schemaName:t,spec:n,sqlIdentifier:a,sessionId:i,isSpecJsonFormat:s=!0,publishDefaultDataTableConfig:o=!1}){return r.Ry({url:`/1/api/result-schemas/${e}`,data:{schemaName:t,spec:n,isSpecJsonFormat:s,sqlIdentifier:a,sessionId:i,publishDefaultDataTableConfig:o}})}function fetchSchemaSpec(e,t=!0){return r.xA(`/1/api/result-schemas/${e}/spec?isSpecJsonFormat=${t?"true":"false"}`)}function bulkArchive(e,t){return r.s0({url:"/1/api/result-schemas:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return r.s0({url:"/1/api/result-schemas:bulk-unarchive",data:{ids:e}})}function updateCollaborators(e,t){return r.Ry({url:`/1/api/results/${e}/collaborators`,data:t})}},740521:(e,t,n)=>{n.d(t,{ZP:()=>x,sQ:()=>U})
var a,i=n(64558),r=n(692013),s=n(769784),o=n(989526),l=n(746779),c=n(348920),d=n(675649),u=n(320727),m=n(634489),p=n(256605),h=n(751512),E=n(330791),S=n(166459),T=n(865886),g=n(807693),f=n(224921),I=n(198604),A=n(992463),y=n(805884),_=n(563009),C=n(435826),R=n(788836),N=n(476604),O=n(745826),b=n(808844),v=n(780188),P=n(509410),L=n(276637),D=n(391769),M=n(857711),w=n(248270),F=n(250965)
!function(e){e.ASSAY_SCHEMA_GUI_EDITOR="ASSAY_SCHEMA_GUI_EDITOR"
e.ASSAY_SCHEMA_ACCESS_POLICIES="ACCESS ASSAY_SCHEMA_ACCESS_POLICIES"
e.ASSAY_SCHEMA_RELEVANT_TEMPLATES="ASSAY_SCHEMA_RELEVANT_TEMPLATES"
e.SPREADSHEET_MAPPINGS="SPREADSHEET_MAPPINGS"}(a||(a={}))
class AssaySchemaEditorConnector extends m.C{enhanceProps(){const e=this.props.schemaId?f.Z.getAssaySchema(this.props.schemaId):null,t=this.props.schemaPermissions,n=this.reduxState().ui.schemaConfig,{sessionId:a,errorState:i,ownerChoices:r,inputFileConfigs:s,outputFileConfigs:o,hasUnsavedData:l,hasUnsavedInputFileConfigData:c,hasUnsavedOutputFileConfigData:d,allowCreateRunFromNotebook:u,allowInsertRunFromInbox:m,connectionSchemaId:p}=n
let h=n.fields,{name:E,ownerId:S,sqlIdentifier:T}=n
const{errors:g,errorMessage:I}=null!=i?i:{errors:null,errorMessage:null}
if(e){S=e.organization.id
E=null==E?e.name:E
T=null==T?e.sqlIdentifier:T}else null==h&&(h=[])
null!=h&&(h=h.map((e=>({...e,name:e.displayName}))))
return{errors:g,errorMessage:I,ownerChoices:r,ownerId:S,name:null==E?"":E,sqlIdentifier:T,schema:e,inputFileConfigs:null==s?[]:s,outputFileConfigs:null==o?[]:o,fields:h,hasUnsavedData:l,hasUnsavedInputFileConfigData:c,hasUnsavedOutputFileConfigData:d,allowCreateRunFromNotebook:u,allowInsertRunFromInbox:m,connectionSchemaId:p,schemaPermissions:t,sessionId:a}}}const k=AssaySchemaEditorConnector.connect((function AssaySchemaEditor(e){var t
const[n,i]=(0,o.useState)(!0),[r,s]=(0,o.useState)(a.ASSAY_SCHEMA_GUI_EDITOR),l=`Your ${v.zq[e.schemaType]} schema has unsaved changes. Do you want to leave the page and discard your changes?`,beforeUnloadHandler=()=>{if(e.hasUnsavedData)return l};(0,o.useEffect)((()=>{F(window).on("beforeunload",beforeUnloadHandler)
return function cleanup(){F(window).off("beforeunload",beforeUnloadHandler)}}))
const{schemaId:m}=e;(0,o.useEffect)((()=>{i(!0);(0,S.getStore)().dispatch(_.UW())
m&&T._L(m,!1)
i(!1)}),[m])
if(n||null==e.ownerChoices||null==e.fields||e.schemaId&&!e.schema)return o.createElement(N.b,{key:"throbber"})
if(!e.schemaId&&0===e.ownerChoices.length)return o.createElement(I.Z,null)
const h={title:`${(0,b.kC)(v.zq[e.schemaType])} Schemas`,subtitle:e.schemaId?e.schema.name:`Create ${(0,b.kC)(v.zq[e.schemaType])} Schema`,onClickTitle:()=>{d.c4(null,L.VO(e.schemaType))},toolbar:e.schema&&o.createElement(M.Z,{schemaId:e.schema.id,schemaType:e.schemaType,isSpecJsonFormat:!1})}
null!=(null===(t=e.schema)||void 0===t?void 0:t.derivedParent)&&d.c4(null,(0,v.XG)(e.schemaType,e.schemaId))
function shouldRenderPermissionSettingsTab(){return c.ZP.PERMISSIONS_ENABLE_ASSAY_SCHEMA_PERMISSIONS&&null!=e.schema}(0,w.Z)(e.schema,e.schemaType)
return o.createElement(C.Z,{...h},m?o.createElement(O.Xl,{activeTab:r,onRequestTabChange:function handleSetActiveTab(t){s(t)
!function trackOpenTabEvent(t){t===a.ASSAY_SCHEMA_RELEVANT_TEMPLATES&&e.schemaId&&(0,E.iu)({schemaType:e.schemaType,schemaId:e.schemaId,isAdmin:R.Z.currentUser().organizations.some((e=>e.admin))})}(t)},className:"u-flex-grow u-min-width-zero"},o.createElement(O.OK,{tabKey:a.ASSAY_SCHEMA_GUI_EDITOR,title:`${(0,b.kC)(v.zq[e.schemaType])} Settings`},o.createElement(D.ZP,{...e,shouldRenderPermissionSettingsTab:shouldRenderPermissionSettingsTab(),unsavedDataMessage:l})),shouldRenderPermissionSettingsTab()&&o.createElement(O.OK,{tabKey:a.ASSAY_SCHEMA_ACCESS_POLICIES,title:"Access Policies"},o.createElement(g.ZP,{assaySchemaId:m})),null!=e.schema&&function shouldRenderRelevantTemplatesTab(){return c.ZP.SCHEMAS_UI_ENABLE_RELEVANT_TEMPLATES_TAB&&null!=e.schemaId&&e.schemaType===p.nc.ASSAY_RESULT}()&&o.createElement(O.OK,{tabKey:a.ASSAY_SCHEMA_RELEVANT_TEMPLATES,title:A.lT},o.createElement(y.ZP,{schemaId:e.schema.id,schemaOrgUrlId:e.schema.organization.url_identifier})),function shouldRenderSpreadsheetMappingsTab(){return c.ZP.REGISTRY_ENABLE_SPREADSHEET_COLUMNS_MAPPING&&null!=e.schema&&e.schemaType===p.nc.ASSAY_RESULT}()&&o.createElement(O.OK,{tabKey:a.SPREADSHEET_MAPPINGS,title:"Spreadsheet Mappings"},o.createElement(u.ZP,{assaySchemaId:e.schema.id,schemaFields:e.schema.allFields}))):o.createElement(P.Z,{...e,shouldRenderPermissionSettingsTab:shouldRenderPermissionSettingsTab(),unsavedDataMessage:l,organizations:e.organizations}))})),U=s.ZP`
  query AssaySchemaEditorQuery($id: StrictString) @skipAudit @engComponent(name: RESULTS) {
    currentUser {
      id
      organizations {
        ... on OrganizationNode {
          ...OrganizationDefaultSchemaCollaboratorsConfiguration
        }
      }
    }
    resultSchema(id: $id) {
      ... on ResultSchemaNode {
        id
        hasData
        allFields {
          id
          apiId
          dependentsSummaries
        }
        ... on PoliceableInterface {
          id
          currentUserPermissionsJson
        }
      }
    }
    runSchema(id: $id) {
      ... on RunSchemaNode {
        id
        hasData
        allFields {
          id
          apiId
          dependentsSummaries
        }
        ... on PoliceableInterface {
          id
          currentUserPermissionsJson
        }
      }
    }
  }
  ${l.G}
`
function isResultSchema(e){return"ResultSchemaNode"===(null==e?void 0:e.__typename)}function isRunSchema(e){return"RunSchemaNode"===(null==e?void 0:e.__typename)}r.mM.create({fieldSection:{marginBottom:"32px"}})
const x=function QueryingAssaySchemaEditor(e){return o.createElement(h.ZP,{query:U,renderLoading:()=>o.createElement(N.b,null),renderCachedDataWhenRefetching:!0,variables:{id:e.schemaId}},(t=>{const n=isResultSchema(t.resultSchema)&&t.resultSchema.hasData||isRunSchema(t.runSchema)&&t.runSchema.hasData,a=(0,i.m8)((isResultSchema(t.resultSchema)&&t.resultSchema.allFields||isRunSchema(t.runSchema)&&t.runSchema.allFields||[]).map((e=>[e.apiId,e.dependentsSummaries]))),r=isResultSchema(t.resultSchema)&&t.resultSchema.currentUserPermissionsJson||isRunSchema(t.runSchema)&&t.runSchema.currentUserPermissionsJson,s=t.currentUser.organizations
return o.createElement(k,{...e,schemaHasData:n,schemaFieldDependentsSummariesById:a,schemaPermissions:r,organizations:s})}))}},348679:(e,t,n)=>{n.d(t,{Kb:()=>ResultSchemaFieldTableRow,Ly:()=>AssaySchemaFieldTableRow,qW:()=>RunSchemaFieldTableRow})
var a=n(769784),i=n(692013),r=n(989526),s=n(348920),o=n(751512),l=n(684321),c=n(648913),d=n(443375),u=n(714200),m=n(619587),p=n(497790),h=n(155014),E=n(868710),S=n(502633),T=n(98675)
function fieldCanBeRelaxed(e){return(0,p.isRequiredLinkTagSchema)(e.initialField.requiredLink)||(0,p.isRequiredLinkSchemaInterface)(e.initialField.requiredLink)||(0,p.isRequiredLinkFolderItemType)(e.initialField.requiredLink)}function getDisableFieldDefinitionDropdownTooltip(e){return e.schemaHasData&&null!=e.initialField.dbId&&!fieldCanBeRelaxed(e)?"You can't change the field definition once data has been created by users. You may want to archive the field and create a new one instead.":null!=e.schemaFieldDependentsSummaries&&e.schemaFieldDependentsSummaries.length>0?`You can't change the field definition because other fields depend on this one: ${e.schemaFieldDependentsSummaries.join(", ")}`:null}function getDisableIsRequiredCheckboxTooltip(e){if(e.schemaHasData){if(null==e.initialField.dbId)return"You can't add a new required field once data has been created by users."
if(!e.initialField.isRequired)return"You can't make a field required once data has been created by users."}return null}function getDisableArchiveButtonTooltip(e){return e.initialField.isRequired?"Required fields cannot be archived. Please mark the field as not required before archiving.":null}function getDisableDeleteButtonTooltip(e){return null!=e.schemaFieldDependentsSummaries&&e.schemaFieldDependentsSummaries.length>0?`You can't delete this field because other fields depend on it: ${e.schemaFieldDependentsSummaries.join(", ")}`:null}function getDisableIsMultiCheckboxTooltip(e){return e.schemaHasData&&e.initialField.isMulti?"You can't change a field from multi-select to single-select once data has been created by users.":null!=e.schemaFieldDependentsSummaries&&e.schemaFieldDependentsSummaries.length>0?`You can't change whether the field is single-select or multi-select because other fields depend on this field: ${e.schemaFieldDependentsSummaries.join(", ")}`:null}const g=a.Ps`
  query AssaySchemaFieldTableRowQuery($schemaId: StrictString!) @skipAudit @engComponent(name: RESULTS) {
    tagSchema(id: $schemaId) {
      ... on TagSchemaNode {
        id
        interfaces {
          id
        }
      }
    }
  }
`
function AssaySchemaFieldAdvancedSettingsIcon(e){const t=[{name:"Set unit...",disabled:![p.FieldType.FLOAT,p.FieldType.INTEGER].includes(e.field.fieldType),handleOnClick:()=>{(0,S.Z)(T.Z,{existingUnitId:e.field.unitApiIdentifier,readOnly:Boolean(e.field.unitApiIdentifier&&e.schemaHasData),readOnlyReason:"You can't change the unit once data has been created by users. You may want to archive the field and create a new one instead.",onRequestSubmit:t=>{e.requestChange(e.fieldId,{...e.field,unitApiIdentifier:t})}})}}],n=t.every((e=>e.disabled))
return r.createElement(E.pf,{tooltipTitle:n?"Advanced settings do not apply to this field":""},r.createElement(c.Z,{options:[t.filter((e=>!e.disabled))],iconClassName:(0,i.iv)(l.W.singleButton),dropLeft:!0,disabled:n}))}function AssaySchemaFieldTableRow(e){var t
const n=fieldCanBeRelaxed(e)&&e.schemaHasData&&null!=e.initialField.dbId,a=(0,p.isRequiredLinkTagSchema)(e.initialField.requiredLink)?e.initialField.requiredLink.tagSchema.id:"",i=(0,o.A4)(g,{variables:{schemaId:a},skip:!n||""===a})
let s=[]
if(i.type!==o.NI.SKIPPED||n){if(i.type===o.NI.SKIPPED&&n)s=(0,d.P2)({initialField:e.initialField,schemaInterfaces:[],includeArchivedSchemaInterfaces:!1,includeGenericBioentityLinks:!0})
else if(i.type===o.NI.PENDING)s=[d.jO]
else if(i.type===o.NI.SUCCESS){const t="interfaces"in i.data.tagSchema?i.data.tagSchema.interfaces.map((e=>e.id)):[]
s=(0,d.P2)({initialField:e.initialField,schemaInterfaces:e.schemaInterfaces.filter((e=>t.includes(e.id))),includeArchivedSchemaInterfaces:!1,includeGenericBioentityLinks:!0})}}else s=(0,d._K)({initialField:e.initialField,schemaFieldSelectors:e.schemaFieldSelectors,storableSchemas:e.storableSchemas,assaySchemas:e.assaySchemas,tagSchemas:e.tagSchemas,batchSchemas:e.batchSchemas,schemaInterfaces:e.schemaInterfaces,includeJSONField:!0,includeAssayLinks:!0,includeBatchLinks:!0,includeGenericBioentityLinks:!0,includeBooleanField:!0,includeArchivedSchemas:!1,includeSnapshotField:e.includeSnapshotField,snapshotFieldDisabledMessage:(0,m.K_)(e.schema,e.initialField)})
return r.createElement(u.Z,{...e,availableFieldOptions:s,lookupConfigModalProps:(0,h.xF)(e.schema),disableControlsWithTooltips:{[u.X.ARCHIVE_BUTTON]:getDisableArchiveButtonTooltip(e),[u.X.DELETE_BUTTON]:getDisableDeleteButtonTooltip(e),[u.X.FIELD_DEFINITION_DROPDOWN]:getDisableFieldDefinitionDropdownTooltip(e),[u.X.IS_MULTI_CHECKBOX]:getDisableIsMultiCheckboxTooltip(e),[u.X.IS_REQUIRED_CHECKBOX]:getDisableIsRequiredCheckboxTooltip(e)},isUneditable:e.initialField.isUneditable,shouldShowRelaxationWarning:n,shouldShowDescription:e.shouldShowDescription,extraActionButtons:{viewMode:e.schema&&e.showUnitConfigOption?[r.createElement(AssaySchemaFieldAdvancedSettingsIcon,{field:e.initialField,fieldId:e.id,schema:e.schema,requestChange:e.requestChange,schemaHasData:null!==(t=e.schemaHasData)&&void 0!==t&&t,key:"advanced-settings"})]:[],editMode:[]}})}function ResultSchemaFieldTableRow(e){const t=s.ZP.SCHEMAS_ENABLE_SCHEMA_FIELD_DESCRIPTION_FOR_TABLES_SUPPORTED_SCHEMAS
return r.createElement(AssaySchemaFieldTableRow,{...e,includeSnapshotField:s.ZP.RESULTS_ENABLE_RESULTS_AGAINST_CONTAINERS_FEATURES,showUnitConfigOption:s.ZP.UNITS_ENABLE_UNIT_DICTIONARY,shouldShowDescription:t})}function RunSchemaFieldTableRow(e){return r.createElement(AssaySchemaFieldTableRow,{...e,includeSnapshotField:!1,showUnitConfigOption:!1})}},57266:(e,t,n)=>{n.d(t,{Lu:()=>g,ZP:()=>AssaySchemasPage})
var a=n(769784),i=n(989526),r=n(531041),s=n(620080),o=n(402360),l=n(905362),c=n(675649),d=n(256605),u=n(751512),m=n(91092),p=n(727493),h=n(476604),E=n(901113),S=n(780188),T=n(276637)
function getSchemaSpan(e){return i.createElement("span",{className:"u-small-spacing-left"},e.name,i.createElement(o.Z,{item:e}))}function mapSchemaWithoutFieldsToRow(e){return[getSchemaSpan(e),i.createElement(h.Z,null)]}function mapSchemaWithFieldsToRow(e){return[getSchemaSpan(e),e.fieldsJson.map((e=>e.displayName)).join(", ")]}class PresentationalAssaySchemasPage extends i.Component{constructor(){super(...arguments)
this.handleNavigateToCreate=()=>{c.c4(null,T.Zr(this.props.schemaType))}}render(){c._w(`${S.XU[this.props.schemaType]} Schemas`)
return i.createElement(p.Z,{columnHeaders:[{name:"Schemas",width:4},{name:"Fields",width:8}],schemas:this.props.listings,schemaType:this.props.schemaType,navigateToCreate:this.handleNavigateToCreate,urlForSchema:e=>T.mp(this.props.schemaType,e),archiveSchemas:s.i$,unarchiveSchemas:s.RH,isWritable:this.props.areOrganizationSchemasCreatable,mapSchemaToRowValue:this.props.displayFields?mapSchemaWithFieldsToRow:mapSchemaWithoutFieldsToRow})}}const g=a.Ps`
  query AssaySchemasPageWithoutFieldsQuery @skipAudit @engComponent(name: RESULTS) {
    requestSchemas {
      ... on RequestSchemaNode {
        id
        name
        schemaType
      }
      ...HasArchiveRecordGraphQL
    }
    resultSchemas {
      ... on ResultSchemaNode {
        id
        name
        schemaType
      }
      ...HasArchiveRecordGraphQL
    }
    runSchemas {
      ... on RunSchemaNode {
        id
        name
        schemaType
      }
      ...HasArchiveRecordGraphQL
    }
  }
  ${(0,m.f)("HasArchiveRecord").fragment}
`,f=a.Ps`
  query AssaySchemasPageQuery @skipAudit @engComponent(name: RESULTS) {
    requestSchemas {
      ... on RequestSchemaNode {
        id
        name
        schemaType
        fieldsJson
      }
      ...HasArchiveRecordGraphQL
    }
    resultSchemas {
      ... on ResultSchemaNode {
        id
        name
        schemaType
        fieldsJson
      }
      ...HasArchiveRecordGraphQL
    }
    runSchemas {
      ... on RunSchemaNode {
        id
        name
        schemaType
        fieldsJson
      }
      ...HasArchiveRecordGraphQL
    }
  }
  ${(0,m.f)("HasArchiveRecord").fragment}
`
function sortAssaySchemas(e){return r.default.sortBy(e,(({name:e})=>e.toLowerCase()))}function AssaySchemasPage(e){const t=(0,l.Z)(),n=t.queryResultType===u.NI.SUCCESS&&t.areOrganizationSchemasCreatable,a=(0,u.IJ)(g),r=function getQueryFieldFromSchemaType(e){switch(e){case d.nc.ASSAY_REQUEST:return"requestSchemas"
case d.nc.ASSAY_RESULT:return"resultSchemas"
case d.nc.ASSAY_RUN:return"runSchemas"
default:(0,E.vE)(e)
return"runSchemas"}}(e.schemaType),s=a.type===u.NI.SUCCESS?sortAssaySchemas(a.data[r]):null,o=(0,u.IJ)(f,{fetchPolicy:"cache-and-network"}),c=o.type===u.NI.SUCCESS,m=c?sortAssaySchemas(o.data[r]):s
return i.createElement(PresentationalAssaySchemasPage,{...e,listings:m,areOrganizationSchemasCreatable:n,displayFields:c})}},53433:(e,t,n)=>{n.d(t,{BU:()=>writeResultArchiveRecordsToCache,E7:()=>fetchAssayRuns,HN:()=>fetchOversizedNLADTable,L8:()=>searchAssayRuns,QJ:()=>fetchAssayResultsByRun,Ss:()=>exportResultsById,ez:()=>legacySearchAssayRuns,j5:()=>exportRunResults,lb:()=>a,p1:()=>exportResults,pt:()=>updateAssayRun,wF:()=>createAssayRunAndPatchEntry,xl:()=>fetchAssayResults})
var a,i=n(64558),r=n(178570),s=n(468943),o=n(348920),l=n(171471),c=n(759783),d=n(681896),u=n(91092),m=n(473002),p=n(352858),h=n(87036),E=n(974913),S=n(827602),T=n(480353),g=n(62315),f=n(328907),I=n(162617)
!function(e){e.ASSAY_DATA_ATTACHMENTS_SERVER_BOOTSTRAP="ASSAY_DATA_ATTACHMENTS_SERVER_BOOTSTRAP"
e.ASSAY_RUNS_FETCH_COMPLETED="ASSAY_RUNS_FETCH_COMPLETED"
e.ASSAY_RUN_FETCH_DATA_MISSING="ASSAY_RUN_FETCH_DATA_MISSING"
e.ASSAY_RESULTS_FETCH_BY_RUN_STARTED="ASSAY_RESULTS_FETCH_BY_RUN_STARTED"
e.ASSAY_RESULTS_FETCH_BY_RUN_PROGRESSED="ASSAY_RESULTS_FETCH_BY_RUN_PROGRESSED"
e.ASSAY_RESULTS_FETCH_BY_RUN_COMPLETED="ASSAY_RESULTS_FETCH_BY_RUN_COMPLETED"
e.ASSAY_RESULTS_FETCH_BY_RUN_DATA_MISSING="ASSAY_RESULTS_FETCH_BY_RUN_DATA_MISSING"
e.RUN_RESULTS_COUNTED_BY_SCHEMA="RUN_RESULTS_COUNTED_BY_SCHEMA"
e.ASSAY_RESULTS_FETCH_COMPLETED="ASSAY_RESULTS_FETCH_COMPLETED"
e.ASSAY_RESULTS_FETCH_DATA_MISSING="ASSAY_RESULTS_FETCH_DATA_MISSING"
e.ASSAY_RUN_SEARCH_STARTED="ASSAY_RUN_SEARCH_STARTED"
e.ASSAY_RUN_FETCH_MORE_RESULTS_STARTED="ASSAY_RUN_FETCH_MORE_RESULTS_STARTED"
e.ASSAY_RUN_SEARCH_COMPLETED="ASSAY_RUN_SEARCH_COMPLETED"
e.ASSAY_RESULT_SEARCH_STARTED="ASSAY_RESULT_SEARCH_STARTED"
e.ASSAY_RESULT_FETCH_MORE_RESULTS_STARTED="ASSAY_RESULT_FETCH_MORE_RESULTS_STARTED"
e.ASSAY_RESULT_SEARCH_COMPLETED="ASSAY_RESULT_SEARCH_COMPLETED"
e.ASSAY_RUN_UPDATE_COMPLETED="ASSAY_RUN_UPDATE_COMPLETED"
e.LEGACY_ASSAY_RUN_SEARCH_COMPLETED="LEGACY_ASSAY_RUN_SEARCH_COMPLETED"}(a||(a={}))
function invalidIdFromAPIError(e){return e.status>=400&&e.status<500&&e.responseJSON.invalidId?e.responseJSON.invalidId:null}function fetchAssayRuns(e){return t=>I.E7(e).then((({assayRunsById:e})=>{t(function assayRunsFetchCompleted(e){return{type:a.ASSAY_RUNS_FETCH_COMPLETED,assayRunsById:e}}(e))}),(e=>{const n=invalidIdFromAPIError(e)
n?t(function assayRunFetchDataMissing(e){return{type:a.ASSAY_RUN_FETCH_DATA_MISSING,assayRunId:e}}(n)):E.ZP.notifyError(e)}))}function countRunResultsBySchema({assayRunId:e}){return async t=>{const n=await I.Vy({assayRunId:e}),{resultCountBySchemaId:i}=n
t(function runResultsCountedBySchema({assayRunId:e,resultCountBySchemaId:t}){return{type:a.RUN_RESULTS_COUNTED_BY_SCHEMA,assayRunId:e,resultCountBySchemaId:t}}({assayRunId:e,resultCountBySchemaId:i}))
return i}}async function fetchNextResultsByRun(e,t,n,{excludedSchemaIds:i}){try{return await I.QJ(t,n,{excludedSchemaIds:i})}catch(n){if(!(n.status>=400&&n.status<500))throw n
e(function assayResultsFetchByRunDataMissing(e){return{type:a.ASSAY_RESULTS_FETCH_BY_RUN_DATA_MISSING,assayRunId:e}}(t))
return null}}function fetchAssayResultsByRun(e){return async t=>{const n=await t(countRunResultsBySchema({assayRunId:e})),i=Object.keys(n).filter((e=>(0,f.cq)(n[e])))
t(function assayResultsFetchByRunStarted(e){return{type:a.ASSAY_RESULTS_FETCH_BY_RUN_STARTED,assayRunId:e}}(e))
let r=[]
await(0,m.Z)((n=>fetchNextResultsByRun(t,e,n,{excludedSchemaIds:i})),(n=>{r=r.concat(n.assayResults)
t(function assayResultsFetchByRunProgressed(e,t){return{type:a.ASSAY_RESULTS_FETCH_BY_RUN_PROGRESSED,assayRunId:e,assayResults:t}}(e,r))
return n.assayResults}))
t(function assayResultsFetchByRunCompleted(e,t){return{type:a.ASSAY_RESULTS_FETCH_BY_RUN_COMPLETED,assayRunId:e,assayResults:t}}(e,r))}}function fetchAssayResults(e){return t=>I.xl(e).then((({assayResultsById:e})=>{t(function assayResultsFetchCompleted(e){return{type:a.ASSAY_RESULTS_FETCH_COMPLETED,assayResultsById:e}}(e))}),(e=>{const n=invalidIdFromAPIError(e)
n?t(function assayResultsFetchDataMissing(e){return{type:a.ASSAY_RESULTS_FETCH_DATA_MISSING,assayResultId:e}}(n)):E.ZP.notifyError(e)}))}function assayRunSearchStarted({requestId:e}){return{type:a.ASSAY_RUN_SEARCH_STARTED,requestId:e}}function assayRunFetchMoreResultsStarted({requestId:e}){return{type:a.ASSAY_RUN_FETCH_MORE_RESULTS_STARTED,requestId:e}}function searchAssayRuns({searchParams:e,level:t}){return n=>{const i=(0,r.Z)()
0!==e.offset?n(assayRunFetchMoreResultsStarted({requestId:i})):n(assayRunSearchStarted({requestId:i}))
const s=(0,T.DO)(e,g.Sc.RUN)
I.jl(s,t).then((({assayRuns:e,entriesByRunId:t,assayResultSchemasByRunId:r,total:o})=>{n(function assayRunSearchCompleted({requestId:e,assayRuns:t,entriesByRunId:n,assayResultSchemasByRunId:i,offset:r,total:s}){return{type:a.ASSAY_RUN_SEARCH_COMPLETED,requestId:e,assayRuns:t,entriesByRunId:n,assayResultSchemasByRunId:i,offset:r,total:s}}({requestId:i,assayRuns:e,entriesByRunId:t,assayResultSchemasByRunId:r,offset:s.offset+s.limit,total:o}))}),E.ZP.notifyError)}}function legacySearchAssayRuns({schemaId:e,nextToken:t,level:n,originType:i,isAvailable:s,isArchived:o,query:l}){return c=>{const d=(0,r.Z)()
c(t?assayRunFetchMoreResultsStarted({requestId:d}):assayRunSearchStarted({requestId:d}))
I.IO({schemaId:e,nextToken:t,level:n,originType:i,isAvailable:s,isArchived:o,query:l}).then((({assayRuns:e,entriesByRunId:t,assayResultSchemasByRunId:n,nextToken:i})=>{c(function legacyAssayRunSearchCompleted({requestId:e,assayRuns:t,entriesByRunId:n,assayResultSchemasByRunId:i,nextToken:r}){return{type:a.LEGACY_ASSAY_RUN_SEARCH_COMPLETED,requestId:e,assayRuns:t,entriesByRunId:n,assayResultSchemasByRunId:i,nextToken:r}}({requestId:d,assayRuns:e,entriesByRunId:t,assayResultSchemasByRunId:n,nextToken:i}))}),E.ZP.notifyError)}}function updateAssayRun(e,t){return async n=>{const i=await I.pt(e,t),{assayRun:r}=i
await(0,S.b0)(e,r)
n(function assayRunUpdateCompleted(e){return{type:a.ASSAY_RUN_UPDATE_COMPLETED,assayRun:e}}(r))}}function exportResults(e,{bioentityId:t,requestId:n,storableId:a}){(0,c.Z)((async()=>({url:(await I.p1(e,{bioentityId:t,requestId:n,storableId:a})).url})))}function exportResultsById(e){(0,c.Z)((async()=>({url:(await I.Ss(e)).url})))}function exportRunResults(e,t){(0,c.Z)((async()=>({url:(await I.j5(e,t)).url})))}async function fetchOversizedNLADTable(e){return await I.HN(e)}function writeResultArchiveRecordsToCache(e){if(o.ZP.ELN_ENABLE_ARCHIVING_RESULTS_WITH_ENTRY){const t=[]
Object.entries(e).forEach((([e,n])=>{if((0,i.K8)(e)){const a=(0,d.readFragmentFromCache)((0,u.f)("Result"),e)
if(null==a)return
t.push({...a,archiveRecord:null!=n?{__typename:"ArchiveRecordNode",purpose:n.purpose}:null})}}))
if(t.length>0){(0,d.writeFragmentsToCache)((0,u.f)("Result"),t)
s.L9(l.k3.ARCHIVED_ENTRY_WITH_RESULTS,{resultsArchived:t.length})}}}async function createAssayRunAndPatchEntry({entryOrTemplateId:e,noteLinkedAssayDataProvenanceUuid:t,assayRunSchemaId:n,tags:a,connectionId:i,backfillProvenanceUuidFn:r}){await(0,h.yT)({entryId:e,loadingScreenMessage:"Inserting run...",autoSaverAction:p.FW,doPreSaveAction:r,doPerformAction:async()=>{try{await I.wF(e,t,n,a,i)
return{resultType:h.tc.SUCCESS,responseData:null}}catch(e){E.ZP.notifyError(e)
return(0,h.AP)()}},analyticsActionForPerfTracking:"assay_run_create"})}},328907:(e,t,n)=>{n.d(t,{$4:()=>d,Ij:()=>m,U:()=>p,UI:()=>c,VY:()=>u,cq:()=>isOversized,dr:()=>h,s4:()=>l.s4,tF:()=>E})
var a=n(602652),i=n(764677),r=n(56063),s=n(348920),o=n(227887),l=n(256605)
const c="INVALID",d="DATA_MISSING",u="Table has too many rows to be expanded. Download to view the data."
function isOversized(e){return e>=s.ZP.ELN_MAX_STRUCTURED_TABLE_ROWS}const m=a.shape({id:a.string.isRequired,archiveRecord:i.k0,createdAt:a.string.isRequired,creator:a.object.isRequired,originType:a.string.isRequired,permissions:r.OD.isRequired,schemaId:a.string.isRequired,tags:a.arrayOf(o.kY).isRequired,allTags:a.arrayOf(o.kY).isRequired,apiId:a.string}),p=m,h="sample",E="Run outputs"},162617:(e,t,n)=>{n.d(t,{$C:()=>runURL,E7:()=>fetchAssayRuns,HN:()=>fetchOversizedNLADTable,IO:()=>legacyListAssayRuns,Kx:()=>createVersionedDataForRun,OW:()=>bulkFetchAssayRunValidation,QJ:()=>fetchAssayResultsByRun,QN:()=>listAssayResults,Ss:()=>exportResultsById,Ve:()=>unarchiveAssayRuns,Vy:()=>countResultsBySchema,X7:()=>bulkFetchAssayResultValidation,cZ:()=>archiveAssayRuns,j5:()=>exportRunResults,jl:()=>listAssayRuns,kN:()=>archiveAutomationOutputFile,p1:()=>exportResults,pt:()=>updateAssayRun,wF:()=>createAssayRunAndPatchEntry,xl:()=>fetchAssayResults,yi:()=>unarchiveAutomationOutputFile})
var a=n(827602),i=n(816032),r=n(771398),s=n(8747)
function listAssayRuns(e,t){return(0,i.Q)({url:"/1/api/assay-runs:search",data:{...e,level:t}})}function legacyListAssayRuns({schemaId:e,nextToken:t,level:n,originType:a,isAvailable:i,isArchived:s,query:o}){return Promise.resolve(r.xA("/1/api/assay-runs",{assaySchemaId:e,level:n,nextToken:t,originType:a,isAvailable:i,isArchived:s,query:o}))}function listAssayResults({schemaId:e,nextToken:t,excludedSchemaIds:n,bioentityId:a,requestId:i,storableId:s,studyId:o,assayRunId:l,sort:c}){return Promise.resolve(r.xA("/1/api/assay-results",{assaySchemaId:e,excludedSchemaIds:(n||[]).join(","),nextToken:t,bioentityId:a,requestId:i,storableId:s,studyId:o,assayRunId:l,sort:c}))}function countResultsBySchema({assayRunId:e,bioentityId:t,requestId:n,storableId:a,studyId:i}){return Promise.resolve(r.xA("/1/api/assay-results:count-results-by-schema",{assayRunId:e,bioentityId:t,requestId:n,storableId:a,studyId:i}))}function fetchAssayRuns(e){return Promise.resolve(r.xA(`/1/api/assay-runs:bulk-get?assayRunIds=${e.join(",")}`))}async function fetchAssayResultsByRun(e,t="",{excludedSchemaIds:n}){await(0,a.b0)(e)
return r.xA(`/1/api/assay-results?assayRunId=${e}&nextToken=${t}&excludedSchemaIds=${(n||[]).join(",")}`)}function fetchAssayResults(e){return Promise.resolve(r.ty({url:"/1/api/assay-results:bulk-get",data:{assayResultIds:e}}))}function updateAssayRun(e,t){return r.Ry({url:`/1/api/assay-runs/${e}`,data:t})}function archiveAssayRuns(e,t){return r.s0({url:"/1/api/assay-runs:bulk-archive",data:{ids:e,purpose:t}})}function unarchiveAssayRuns(e){return r.s0({url:"/1/api/assay-runs:bulk-unarchive",data:{ids:e}})}function bulkFetchAssayRunValidation(e){return r.s0({url:"/1/api/assay-runs:bulk-fetch-assay-run-validation",data:{assayRunIds:e}})}function bulkFetchAssayResultValidation(e){return r.s0({url:"/1/api/assay-results:bulk-fetch-assay-result-validation",data:{assayResultIds:e}})}function exportResults(e,{bioentityId:t,requestId:n,storableId:a}){return r.ty({url:"/1/api/assay-results:export",data:{assaySchemaId:e,bioentityId:t,requestId:n,storableId:a}}).then((e=>s.Q5(e.status_url)))}function exportResultsById(e){return r.ty({url:"/1/api/assay-results:export-by-ids",data:{ids:e}}).then((e=>s.Q5(e.status_url)))}function exportRunResults(e,t){return r.ty({url:"/1/api/assay-runs:export-results",data:{assayRunId:e,resultSchemaId:t}}).then((e=>s.Q5(e.status_url)))}function createVersionedDataForRun(e,t){return r.s0({url:`/1/api/note-linked-assay-datas/create-versioned-data-for-run/${e}`,data:{fileId:t}})}function fetchOversizedNLADTable(e){return r.UJ(`/1/api/note-linked-assay-datas/${e}/get-oversized-nlad-table`,{structuredTableId:e})}function createAssayRunAndPatchEntry(e,t,n,a,i){return r.s0({url:`/1/api/note-linked-assay-datas/${e}/${t}/create-run`,data:{assayRunSchemaId:n,tags:a,connectionId:i}})}function archiveAutomationOutputFile(e,t){return s.s0({url:"/1/api/assay-runs:archive-automation-output-file",data:{automationOutputFileId:e,archivePurpose:t}})}function unarchiveAutomationOutputFile(e){return s.s0({url:"/1/api/assay-runs:unarchive-automation-output-file",data:{automationOutputFileId:e}})}function runURL(e){return`/assay-runs/${e}`}},348099:(e,t,n)=>{n.d(t,{W:()=>fetchFilteredAssayResults,m:()=>a})
var a,i=n(531041),r=n(473002),s=n(328907),o=n(162617)
!function(e){e.FILTERED_ASSAY_RESULTS_FETCH_COMPLETED="FILTERED_ASSAY_RESULTS_FETCH_COMPLETED"}(a||(a={}))
function fetchFilteredAssayResults(e){return async t=>{const{resultCountBySchemaId:n}=await(0,o.Vy)(e)
let l=[]
if(Object.values(n).some((e=>e>0))){const t=function getOversizedSchemaIds(e){return Object.keys(e).filter((t=>(0,s.cq)(e[t])))}(n),a=await async function listNonOversizedResults(e,t){let n=[]
await(0,r.Z)((n=>(0,o.QN)({nextToken:n,excludedSchemaIds:t,...e,sort:"createdAt:desc"})),(e=>{n=n.concat(e.assayResults)
return e.assayResults}))
return{assayResults:n}}(e,t)
l=a.assayResults}const c=function getServerResultsTableSpecs(e,t){const n=i.default.groupBy(e,"schemaId")
return Object.entries(t).map((([e,t])=>({schemaId:e,total:t,assayResultIds:(n[e]||[]).map((e=>e.id)),isOversized:(0,s.cq)(t)})))}(l,n)
t(function filteredAssayResultsFetchCompleted(e,t,n){return{type:a.FILTERED_ASSAY_RESULTS_FETCH_COMPLETED,assayResults:e,filters:t,serverResultsTableSpecs:n}}(l,e,c))}}},181995:(e,t,n)=>{n.d(t,{CD:()=>m,L4:()=>filterOutDataMissing,ZP:()=>reduceResults,bI:()=>getServerResultsTableSpecs})
var a=n(767807),i=n.n(a),r=n(615439),s=n.n(r),o=n(531041),l=n(466080),c=n(53433),d=n(328907),u=n(348099)
const m={assayResultsById:{},assayResultIdsByRunId:{},assayRunsById:{},assayResultSchemasByRunId:{},assayRunsWithResultsFetching:{},filteredAssayResultResponses:[],runIdToResultSchemaToCount:{}}
function mergeResultsForRun(e,t,n){return i()(e,{assayResultsById:{$merge:o.default.indexBy(t,"id")},assayResultIdsByRunId:{[n]:{$set:o.default.pluck(t,"id")}}})}function areFiltersMatching(e,t){return s()(e,t)}function mergeFilteredAssayResultResponse(e,t,n){const a={filters:t,serverResultsTableSpecs:n},i=[...e],r=e.findIndex((e=>areFiltersMatching(e.filters,t)));-1===r?i.push(a):i[r]=a
return i}function reduceResults(e=m,t){switch(t.type){case c.lb.LEGACY_ASSAY_RUN_SEARCH_COMPLETED:case c.lb.ASSAY_RUN_SEARCH_COMPLETED:{const{assayRuns:n,assayResultSchemasByRunId:a}=t
return i()(e,{assayRunsById:{$merge:o.default.indexBy(n,"id")},assayResultSchemasByRunId:{$merge:a}})}case c.lb.ASSAY_RESULT_SEARCH_COMPLETED:{const{assayResults:n}=t
return i()(e,{assayResultsById:{$merge:o.default.indexBy(n,"id")}})}case c.lb.ASSAY_DATA_ATTACHMENTS_SERVER_BOOTSTRAP:{const{assayRunsById:n,assayResultsById:a,assayResultIdsByRunId:r}=t
return i()(e,{assayRunsById:{$merge:n},assayResultsById:{$merge:a},assayResultIdsByRunId:{$merge:r}})}case c.lb.ASSAY_RUNS_FETCH_COMPLETED:{const{assayRunsById:n}=t
return i()(e,{assayRunsById:{$merge:n}})}case c.lb.ASSAY_RUN_UPDATE_COMPLETED:{const{assayRun:n}=t
return i()(e,{assayRunsById:{[n.id]:{$set:n}}})}case c.lb.ASSAY_RUN_FETCH_DATA_MISSING:return i()(e,{assayRunsById:{[t.assayRunId]:{$set:d.$4}}})
case c.lb.ASSAY_RESULTS_FETCH_COMPLETED:{const{assayResultsById:n}=t
return i()(e,{assayResultsById:{$merge:n}})}case c.lb.ASSAY_RESULTS_FETCH_DATA_MISSING:return i()(e,{assayResultsById:{[t.assayResultId]:{$set:d.$4}}})
case c.lb.ASSAY_RESULTS_FETCH_BY_RUN_STARTED:{const{assayRunId:n}=t
return i()(e,{assayRunsWithResultsFetching:{[n]:{$set:!0}}})}case c.lb.ASSAY_RESULTS_FETCH_BY_RUN_PROGRESSED:{const{assayResults:n,assayRunId:a}=t
return mergeResultsForRun(e,n,a)}case c.lb.ASSAY_RESULTS_FETCH_BY_RUN_COMPLETED:{const{assayResults:n,assayRunId:a}=t
return i()(mergeResultsForRun(e,n,a),{assayRunsWithResultsFetching:{$unset:[a]}})}case u.m.FILTERED_ASSAY_RESULTS_FETCH_COMPLETED:{const{assayResults:n,filters:a,serverResultsTableSpecs:r}=t
return i()(e,{assayResultsById:{$merge:o.default.indexBy(n,"id")},filteredAssayResultResponses:{$set:mergeFilteredAssayResultResponse(e.filteredAssayResultResponses,a,r)}})}case c.lb.ASSAY_RESULTS_FETCH_BY_RUN_DATA_MISSING:return i()(e,{assayResultIdsByRunId:{[t.assayRunId]:{$set:d.$4}}})
case c.lb.RUN_RESULTS_COUNTED_BY_SCHEMA:{const{assayRunId:n,resultCountBySchemaId:a}=t
return i()(e,{runIdToResultSchemaToCount:{[n]:{$set:a}}})}case l.J.DATA_TABLES_VALIDATION_STATUS_FETCH_COMPLETED:{const{assayResultsById:n}=t
return i()(e,{assayResultsById:{$merge:n}})}default:return e}}function getServerResultsTableSpecs(e,t){const n=e.filteredAssayResultResponses.find((e=>areFiltersMatching(e.filters,t)))
return n?n.serverResultsTableSpecs:null}function filterOutDataMissing(e){return e.filter((e=>e!==d.$4))}},911593:(e,t,n)=>{n.d(t,{B7:()=>fieldToColumnWidth,Px:()=>m,ch:()=>getSpecialColumns,dD:()=>p,dK:()=>getColumnLabelForField,tD:()=>u})
var a=n(989526),i=n(219579),r=n(851422),s=n(208029),o=n(497790),l=n(281100),c=n(309718),d=n(10584)
function getColumnLabelForField(e){return e.displayName}const u=118
function fieldToColumnWidth(e){switch(e.fieldType){case o.FIELD_TYPES.ASSAY_REQUEST_LINK.type:case o.FIELD_TYPES.ASSAY_RESULT_LINK.type:case o.FIELD_TYPES.ASSAY_RUN_LINK.type:return 300
case o.FIELD_TYPES.DATETIME.type:return 160
default:{const t=function _getColumnLabelWidth(e){return new i.Z(r.TABLE_AXIS_CELL_FONT_SIZE).width(e.length)}(getColumnLabelForField(e))
return Math.max(u,t+32)}}}const m="PRIMARY_METADATA",p="ADDITIONAL_METADATA",h=[{metadataType:p,name:`${s.D6.Result} ID`,width:300,isHiddenKey:"hideId",renderResult(e){return a.createElement("span",null,this.resultToText(e))},resultToText:e=>e.id},{metadataType:p,name:"Creator",width:u,isHiddenKey:"hideCreator",renderResult(e){return a.createElement("span",null,a.createElement(l.Z,{className:"u-mini-spacing-right",size:c.D.XXSMALL,entity:e.creator}),this.resultToText(e))},resultToText:e=>e.creator.name},{metadataType:p,name:"Created At",width:160,isHiddenKey:"hideCreatedAt",renderResult(e){return a.createElement("span",null,this.resultToText(e))},resultToText:e=>d.UT(e.createdAt)}]
function getSpecialColumns(){return h}},921177:(e,t,n)=>{n.d(t,{$s:()=>AddRunToolbar,OA:()=>validateRunForSubmit,WZ:()=>UploadResultsButton,wM:()=>w,yF:()=>SubmitToolbar})
var a=n(989526),i=n(212300),r=n(827670),s=n(531041),o=n(108696),l=n(805937),c=n(348920),d=n(675649),u=n(572009),m=n(634489),p=n(705161),h=n(432128),E=n(780188),S=n(53433),T=n(328907),g=n(224921),f=n(439454),I=n(208029),A=n(474544),y=n(704985),_=n(599874),C=n(251808),R=n(868710),N=n(334148),O=n(198964),b=n(865486),v=n(297020),P=n(924982),L=n(554475),D=n(20859),M=n(685370)
function BackToInboxButton(e){return a.createElement(R.ZP,{title:"Move back to inbox",key:"back-to-inbox-button"},a.createElement(N.Co,{buttonStyle:N.ZJ.TERTIARY_GRAY,className:"u-mini-spacing-left",icon:"move-to-inbox",size:N.qE.SMALL,onClick:e.onClick,dataTestAttrs:{component:"BackToInboxButton",element:"button"}}))}function UploadResultsButton(e){const t={buttonStyle:N.ZJ.TERTIARY_GRAY,icon:"upload",size:N.qE.SMALL,className:"u-mini-spacing-left"}
return 0===e.resultSchemasForRun.length?a.createElement(R.ZP,{title:`No ${I.D6.result} schemas are configured to link to this run`},a.createElement(N.Co,{...t,disabled:!0})):a.createElement(R.ZP,{title:`Upload ${I.D6.results}`},a.createElement(O.ZP,{menu:a.createElement(b.ZP,{height:b.ZP.HEIGHTS.MEDIUM,width:b.ZP.WIDTHS.XLARGE,dropLeft:!0,scrollable:!0},e.resultSchemasForRun.map((t=>a.createElement(P.Z,{key:t.id,value:t.id,onSelect:()=>{u.Z.open({assayRunId:e.assayRun.id,resultSchema:t,onImportRows:()=>{e.fetchAssayResultsByRun(e.assayRun.id)}})},shouldEllipsize:!0},t.name))))},a.createElement(N.Co,{...t})))}class EditRunToolbarConnector extends m.C{constructor(){super(...arguments)
this.stores=[g.Z]}getResultSchemasForRun(){const e=g.Z.getAssaySchemas(E.aJ.ASSAY_RESULT)
return this.props.assayRun&&e?(0,f.Z)(e,this.props.assayRun.schemaId):null}enhanceProps(){return{resultSchemasForRun:this.getResultSchemasForRun()}}}function UploadOutputFileBlobs(e){const t=e.automationOutputFiles.filter((e=>!e.blob)),n=0===t.length
return a.createElement(R.ZP,{title:n?"All output files have been uploaded.":"Bulk upload output files"},a.createElement(N.Co,{icon:"upload",buttonStyle:N.ZJ.TERTIARY_GRAY,className:"u-mini-spacing-left",onClick:()=>{(0,p.Z)(e.runId,t,e.onUpdateOutputFiles)},size:N.qE.SMALL,disabled:n}))}function OverflowDropdown(e){return a.createElement(O.ZP,{menu:a.createElement(b.ZP,{height:v.Bl.MEDIUM,width:v.zL.MEDIUM,dropLeft:!0},a.createElement(L.Z,null,e.allowArchive&&a.createElement(P.Z,{onSelect:async()=>{await Promise.resolve(M.iG("Archive","Are you sure you want to archive?",N.ZJ.NEGATIVE,{promiseCompatible:!0,enableRedesign:!0}))&&e.handleRemoveAssayRun()},dataTestAttrs:{component:"UnconnectedEditRunToolbar",element:"option",key:"archive"}},e.isAutomationRun?"Archive run":"Archive")),a.createElement(L.Z,null,e.allowCopyId&&a.createElement(P.Z,{onSelect:()=>{(0,D.Z)(e.assayRunId,{showToastOnSuccess:!0})}},"Copy API ID")),a.createElement(L.Z,null,e.assayRunApiId&&a.createElement(P.Z,{onSelect:()=>{e.assayRunApiId&&o.dV([e.assayRunApiId])},dataTestAttrs:{component:"UnconnectedEditRunToolbar",element:"option",key:"exportAuditLog"}},l.QU)))},a.createElement(N.Co,{buttonStyle:N.ZJ.TERTIARY_GRAY,className:"u-mini-spacing-left",icon:"overflow",size:N.qE.SMALL,dataTestAttrs:{component:"UnconnectedEditRunToolbar",element:"overflowButton"}}))}class UnconnectedEditRunToolbar extends a.Component{constructor(){super(...arguments)
this._handleRefreshVersionedData=async()=>{await this.props.handleRefreshVersionedData()}
this._dataLoaded=()=>null!=this.props.assayResults&&!this.props.childrenFetching&&null!=this.props.resultSchemasForRun}render(){const e=this.props.assayRunSchema.automationInputFileConfigs.length>0||this.props.assayRunSchema.automationOutputFileConfigs.length>0,t=this._dataLoaded()&&(0,A.Z)({assayRecord:this.props.assayRun,assayRunSchema:this.props.assayRunSchema,attachedForReview:!0,review:this.props.review})&&a.createElement(y.Z,{className:"u-mini-spacing-left",modalWarningMessage:(n=this.props.assayResults,n&&n.length?`Validation will be set on ${n.length} ${(0,d._6)(n.length,I.D6.result)} linked to this ${I.D6.run}.`:null),size:N.qE.SMALL,validatableInputs:(0,_.Zw)(this.props.assayRun)})
var n
const i=this._dataLoaded()&&!e?a.createElement(UploadResultsButton,{assayRun:this.props.assayRun,resultSchemasForRun:this.props.resultSchemasForRun,fetchAssayResultsByRun:this.props.fetchAssayResultsByRun}):null,r=e&&c.ZP.ENABLE_LAB_AUTOMATION_BULK_UPLOAD_OUTPUT_FILES&&this.props.automationFiles.automationOutputFiles?a.createElement(UploadOutputFileBlobs,{runId:this.props.assayRun.id,automationOutputFiles:this.props.automationFiles.automationOutputFiles,onUpdateOutputFiles:e=>{const t=this.props.automationFiles.automationOutputFiles,n=s.default.indexBy(e,(e=>e.automationOutputFileConfig.name))
this.props.handleUpdateAutomationFiles({automationOutputFiles:null==t?void 0:t.map((e=>n[e.automationOutputFileConfig.name]||e))})}}):null,o=e?a.createElement(R.ZP,{title:"Sync run data"},a.createElement("span",null,a.createElement(N.Co,{buttonStyle:N.ZJ.TERTIARY_GRAY,className:"u-mini-spacing-left",icon:"assembly",onClick:this._handleRefreshVersionedData,size:N.qE.SMALL}))):null
if(this.props.locked)return a.createElement("span",null,t)
const l=this.props.assayRun.originType===T.s4.ELN&&!c.ZP.ENABLE_LAB_AUTOMATION_BULK_UPLOAD_OUTPUT_FILES,u=Boolean(h.Z.get("ENABLE_COPY_API_ID")),m=l||u
return a.createElement("span",null,o,r,i,t,this.props.assayRun.originType===T.s4.API&&a.createElement(BackToInboxButton,{onClick:this.props.handleRemoveAssayRun}),m&&a.createElement(OverflowDropdown,{allowArchive:l,allowCopyId:u,assayRunId:this.props.assayRun.id,handleRemoveAssayRun:this.props.handleRemoveAssayRun,isAutomationRun:e,assayRunApiId:this.props.assayRun.apiId}),(c.ZP.LAB_AUTOMATION_ALLOW_EDITING_API_RUNS||this.props.assayRun.originType===T.s4.ELN)&&a.createElement(N.Co,{buttonStyle:N.ZJ.SECONDARY,className:"u-mini-spacing-left",disabled:this.props.disableEditButton,onClick:this.props.onClickEdit,size:N.qE.SMALL,dataTestAttrs:{component:"UnconnectedEditRunToolbar",element:"editButton"},text:"Edit"}))}}const w=(0,i.$j)(null,(e=>(0,r.bindActionCreators)({fetchAssayResultsByRun:S.QJ},e)))(EditRunToolbarConnector.connect(UnconnectedEditRunToolbar))
function validateRunForSubmit(e,t,n){if(null!=e){const t=(0,C.EF)(e).filter((e=>e.tagSchemaField.isRequired))
for(const e of t)if(!(0,C.qd)(e))return`${e.name} is required`}return n&&!t?"Connection is required":null}function SubmitButton(e){return a.createElement(R.ZP,{title:e.error,disabled:null==e.error},a.createElement(N.Co,{buttonStyle:N.ZJ.SECONDARY,className:"u-mini-spacing-left",size:N.qE.SMALL,onClick:e.onClick,text:e.text,disabled:null!=e.error,dataTestAttrs:e.dataTestAttrs}))}function AddRunToolbar(e){const t=e.validateForSubmit()
return a.createElement("span",null,e.runSchema.allowInsertRunFromInbox?a.createElement(N.Co,{buttonStyle:N.ZJ.TERTIARY_GRAY,size:N.qE.SMALL,icon:"insert-from-inbox",onClick:e.onClickInsertFromInbox,text:"Insert from inbox",dataTestAttrs:{component:"AddRunToolbar",element:"insertFromInboxButton"}}):null,e.runSchema.allowCreateRunFromNlad?a.createElement(SubmitButton,{onClick:e.onClickCreate,text:"Create",error:t,dataTestAttrs:{component:"AddRunToolbar",element:"submitButton"}}):null)}function SubmitToolbar(e){const t=e.validateForSubmit()
return a.createElement("span",null,a.createElement(N.Co,{buttonStyle:N.ZJ.TERTIARY_GRAY,size:N.qE.SMALL,onClick:e.onCancel,text:"Cancel"}),a.createElement(SubmitButton,{onClick:e.onSubmit,text:e.submitText,error:t,dataTestAttrs:{component:"SubmitToolbar",element:"saveButton"}}))}},180214:(e,t,n)=>{n.d(t,{A:()=>z,ZP:()=>QueryingRunDetails})
var a=n(769784),i=n(64558),r=n(692013),s=n(989526),o=n(468943),l=n(367780),c=n(232606),d=n(7060),u=n(41706),m=n(814099),p=n(323539),h=n(714529),E=n(348920),S=n(171471),T=n(17086),g=n(256605),f=n(751512),I=n(91092),A=n(965131),y=n(697134),_=n(673743),C=n(532438),R=n(528431),N=n(517967),O=n(974913),b=n(432128),v=n(162617),P=n(925469),L=n(311936),D=n(432252),M=n(172459),w=n(251808),F=n(62315),k=n(281100),U=n(309718),x=n(103593),B=n(59860),Z=n(868710),q=n(334148),G=n(778223),V=n(84666),H=n(73374),W=n(20859),Y=n(10584)
const $=S.D2.RUN_PAGE_TOOLBAR
function MetadataFieldsWrapper(e){return s.createElement(B.Z,{bufferRowReset:!0},s.Children.map(e.children,((e,t)=>s.createElement(s.Fragment,null,t%3==0&&s.createElement(x.Z,{className:"clearfix",key:`clearfix-${t}`}),s.createElement(x.Z,{key:t,sm:4},e)))))}class RunDetailsConnector extends P.L{}const K=RunDetailsConnector.connect((function RunDetails(e){var t,n,a,h
const f=e.run.origin.type,I=E.ZP.LAB_AUTOMATION_ALLOW_EDITING_API_RUNS||f===g.s4.ELN,y=I&&(0,p.cr)({feature:u.N7.EDIT_TAGS,item:{id:e.run.apiId,permissions:e.run.permissions}}),R=I&&(0,p.Oj)({feature:m.d$.LAB_AUTOMATION_EDIT})&&(0,p.cr)({feature:u.N7.EDIT,item:{id:e.run.apiId,permissions:e.run.permissions}})&&0===e.run.automationInputFiles.filter((e=>e.status===g.qb.succeeded)).length&&0===e.run.automationOutputFiles.filter((e=>e.status===g.qb.succeeded)).length,P=(0,p.cr)({feature:u.N7.EDIT,item:{id:e.run.apiId,permissions:e.run.permissions}})
return s.createElement("div",{className:"react-tab-container"},s.createElement("div",null,s.createElement(L.Z,{assayValidationToDisplay:e.assayRunValidation,location:N.rM.RUN}),s.createElement("div",null,s.createElement(B.Z,{bufferRowReset:!0},s.createElement(x.Z,{xs:6,className:(0,r.iv)(Q.title)},e.run.schema.name),s.createElement(x.Z,{xs:6},s.createElement("div",{className:"u-justify-content-end"},s.createElement(l.Z,{className:"metadata-header-button-spacing-left",item:{...e.run,id:e.run.apiId,name:e.run.schema.name},isArchivable:(0,p.cr)({feature:u.N7.ARCHIVE,item:{id:e.run.apiId,permissions:e.run.permissions}})&&(0,D.Z)(e.run.automationOutputFiles)&&!e.run.isInEntry,isUnarchivable:(0,p.cr)({feature:u.N7.UNARCHIVE,item:{id:e.run.apiId,permissions:e.run.permissions}}),onArchive:async(t,n)=>{(0,c.hu)(1===t.length&&t[0]===e.run.apiId,"expected run ID to match current run")
await(0,v.cZ)([e.run.id],n)
e.refetch()},getAnalyticsMetadata:()=>({actionOrigin:$,eventGroupId:(0,o.Vr)()}),onUnarchive:t=>{(0,c.hu)(1===t.length&&t[0]===e.run.apiId,"expected run ID to match current run")
T.gW({analyticsMetadata:{actionOrigin:$,eventGroupId:(0,o.Vr)()}},null,(async()=>{await(0,v.Ve)([e.run.id])
e.refetch()}))}}),s.createElement(d.Z,{className:"metadata-header-button-spacing-left",ids:[e.run.apiId]}),Boolean(b.Z.get("ENABLE_COPY_API_ID"))&&s.createElement(Z.ZP,{container:"body",placement:Z.TQ.TOP,title:"Copy API ID"},s.createElement(q.Co,{className:"metadata-header-button-spacing-left",onClick:()=>(0,W.Z)(e.run.id,{showToastOnSuccess:!0}),icon:"note-code",size:q.qE.SMALL,buttonStyle:q.ZJ.TERTIARY_BLUE}))))))),s.createElement("div",{className:"u-spacing-top"},s.createElement(MetadataFieldsWrapper,null,s.createElement(s.Fragment,null,s.createElement(H.Dx,null,"Creator"),s.createElement("div",null,s.createElement(k.Z,{className:"u-mini-spacing-right",size:U.D.XXSMALL,entity:e.run.creatorJson}),e.run.creatorJson.name)),s.createElement(s.Fragment,null,s.createElement(H.Dx,null,"Created"),s.createElement("div",null,(0,Y.UT)(e.run.createdAt))),s.createElement(s.Fragment,null,s.createElement(H.Dx,null,"Origin"),s.createElement("div",null,(null===(t=e.run.origin.elnOrigin.entry)||void 0===t?void 0:t.id)?s.createElement(V.Z,{id:e.run.origin.elnOrigin.entry.id,size:G.TK.SMALL}):f)),null!=(null===(n=e.run.schema)||void 0===n?void 0:n.connectionSchema)?s.createElement(s.Fragment,null,s.createElement(H.Dx,null,"Connection"),s.createElement("div",null,s.createElement(_.ZP,{autoFocus:!1,selectedItems:e.run.connection?[e.run.connection]:[],shouldAllowMultiple:!1,isReadOnly:!R,extraFilters:[{...(0,F.QW)(F.Vm.SCHEMA),value:[e.run.schema.connectionSchema.id]}],onChange:t=>{var n;(async t=>{const n=(0,w.UR)(e.run.tagsJson)
await T.S8({analyticsMetadata:{actionOrigin:S.D2.RUN_PAGE}},null,(async()=>{await(0,v.pt)(e.run.id,{tags:n,connectionId:t})}))
O.ZP.success("Run updated successfully.")
e.refetch()})(null===(n=t[0])||void 0===n?void 0:n.id)}}))):null),s.createElement("div",{className:"u-spacing-top"},s.createElement(M.Z,{className:"bufferRowReset u-small-spacing-top",itemLinkAllowed:!0,isWritable:y,onUpdateTags:async t=>{const n=(0,w.UR)(t)
await T.S8({analyticsMetadata:{actionOrigin:S.D2.RUN_PAGE}},null,(async()=>{var t,a
await(0,v.pt)(e.run.id,{tags:n,connectionId:null!==(a=null===(t=e.run.connection)||void 0===t?void 0:t.id)&&void 0!==a?a:null})}))
O.ZP.success("Run updated successfully.")
e.refetch()},tags:e.run.tagsJson}))),s.createElement(C.ZP,{runId:e.run.id,automationFiles:{automationInputFiles:(0,A.NA)("AutomationInputFile",e.run.automationInputFiles),automationOutputFiles:(0,A.NA)("AutomationOutputFile",e.run.automationOutputFiles),automationErrorFiles:(0,A.NA)("AutomationErrorFile",e.run.automationErrorFiles)},locked:!P,isInstrumentRun:null!=e.run.schema.connectionSchema,connectionId:null!==(h=null===(a=e.run.connection)||void 0===a?void 0:a.id)&&void 0!==h?h:null,handleRefreshVersionedData:i.C$,handleUpdateAutomationFiles:e.refetch,getIdFromCid:void 0,versionedStructuredTables:void 0,viewer:!1}))})),z=a.Ps`
  query RunQuery($runId: StrictString!) @skipAudit @engComponent(name: LAB_AUTOMATION) {
    run(id: $runId) {
      ... on RunNode {
        id
        apiId
        origin {
          id
          elnOrigin {
            entry {
              id
            }
            tableName
          }
          type
        }
        permissions {
          ...ListingPermissionsGraphQL
        }
        schema {
          id
          name
          automationInputFileConfigsJson
          automationOutputFileConfigsJson
          connectionSchema {
            id
            name
          }
        }
        connection {
          ...ConnectionListingGraphQL
        }
        creatorJson
        createdAt
        tagsJson
        automationInputFiles {
          ...AutomationInputFileGraphQL
        }
        automationOutputFiles {
          ...AutomationOutputFileGraphQL
        }
        automationErrorFiles {
          ...AutomationErrorFileGraphQL
        }
        isInEntry
      }
      ...HasArchiveRecordGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,I.f)("ListingPermissions").fragment}
  ${(0,I.f)("HasArchiveRecord").fragment}
  ${(0,I.f)("ConnectionListing").fragment}
  ${(0,I.f)("AutomationInputFile").fragment}
  ${(0,I.f)("AutomationOutputFile").fragment}
  ${(0,I.f)("AutomationErrorFile").fragment}
  ${(0,I.f)("InaccessibleInfo").fragment}
`
function QueryingRunDetails(e){const t=(0,f.IJ)(z,{variables:{runId:e.runId}})
return t.type!==f.NI.SUCCESS?s.createElement(R.d,null):(0,y.CZ)(t.data.run)?s.createElement(h.Z,{inaccessibleInfo:t.data.run,modelType:"run"}):s.createElement(K,{run:t.data.run,refetch:()=>t.refetch({runId:e.runId}),assayRunIdForValidationFetch:t.data.run.id})}const Q=r.mM.create({title:{fontSize:"17px"}})},58498:(e,t,n)=>{n.d(t,{F:()=>plateEditorURL,GS:()=>exportToCSV,Jt:()=>updateGrid,MN:()=>setGridWellRoles,PC:()=>boxEditorURL,U0:()=>uploadContainersFromSpreadsheet,e3:()=>validateUploadContainersFromSpreadsheet,he:()=>fetch,md:()=>validateWellSpreadsheet,uI:()=>createGrid,v$:()=>gridEditorURL})
var a=n(518352),i=n(379346),r=n(771398),s=n(8747)
function fetch(e){return r.UJ(`/1/api/grids/${e}`)}function createGrid(e,t,n={}){return r.ty({url:"/1/api/grids",data:{gridSchemaId:e,name:t,...n}})}function updateGrid(e,t,n){return r.Ry({url:`/1/api/grids/${e}`,data:n}).then((e=>{a.Z.invalidateFolder(t)
return e}))}function exportToCSV(e){return s.s0({url:"/1/api/grids:export-to-csv",data:{gridIds:e}})}function validateUploadContainersFromSpreadsheet(e,t,n,a,i,r){return s.ty({data:{containerSchemaId:t,containerSourceId:n,spreadsheetName:a,spreadsheetURL:i,spreadsheetFormat:r},url:`/1/api/grids/${e}:validate-upload-containers-from-spreadsheet`})}function uploadContainersFromSpreadsheet(e,t,n,a,i,s,o){return r.ty({url:`/1/api/grids/${e}:upload-containers-from-spreadsheet`,data:{containerSchemaId:t,containerSourceId:n,spreadsheetName:a,spreadsheetURL:i,spreadsheetFormat:s,orphanParentStorableDatas:o}})}function validateWellSpreadsheet(e,t,n,a,i){return r.ty({url:"/1/api/grids/actions/validate-well-spreadsheet",data:{gridId:e,gridSchemaId:t,containerSchemaId:n,spreadsheetName:a,spreadsheetURL:i}})}function gridEditorURL(e){return`/samples/grids/${i.ZP.unprefixApiId(e)}`}function boxEditorURL(e){return`/samples/boxes/${e}`}function plateEditorURL(e){return`/samples/plates/${e}`}function setGridWellRoles(e,t){return r.sA({url:`/1/api/grids/${e}/assay-roles`,data:t})}},938145:(e,t,n)=>{n.d(t,{QB:()=>setSelectedCells,Zr:()=>a,iG:()=>openGrid,ow:()=>closeGrid})
var a
!function(e){e.SET_SELECTED_CELLS="SET_SELECTED_CELLS"
e.OPEN_GRID="OPEN_GRID"
e.CLOSE_GRID="CLOSE_GRID"}(a||(a={}))
function openGrid(e){return{type:a.OPEN_GRID,gridId:e}}function closeGrid(e){return{type:a.CLOSE_GRID,gridId:e}}function setSelectedCells(e,t){return{type:a.SET_SELECTED_CELLS,gridId:e,cells:t}}},771839:(e,t,n)=>{n.d(t,{Z:()=>SampleCreatorInfo})
var a=n(989526),i=n(309718),r=n(396669)
function SampleCreatorInfo(e){return a.createElement(r.X,{avatarInfo:e.creator,size:i.D.XXSMALL,shape:i.o.CIRCLE,showTooltip:!1})}},276281:(e,t,n)=>{n.d(t,{B8:()=>createContainerSchema,Bj:()=>createGridSchema,YJ:()=>createLocationSchema,K3:()=>createOrRestoreBatchSchema,I1:()=>SampleSchemaActions_deleteContainerSchema,zn:()=>deleteGridSchema,xQ:()=>SampleSchemaActions_deleteLocationSchema,$r:()=>fetchAllBatchSchemas,tj:()=>fetchAllBoxSchemas,uz:()=>fetchAllContainerSchemas,gS:()=>fetchAllGridSchemas,Yd:()=>fetchAllLocationSchemas,zU:()=>fetchAllPlateSchemas,KG:()=>resetSavingState,JD:()=>updateContainerSchema,EE:()=>updateGridSchema,Le:()=>updateLocationSchema})
var a=n(675649),i=n(787004),r=n(459830),s=n(947730),o=n(974913),l=n(216101),c=n(87209),d=n(129291),u=n(771398),m=n(8747)
n(250965)
async function fetchAllBatchSchemas(){s.Z.dispatch({actionType:i.wW5})
try{const e=await d.Qd()
s.Z.dispatch({actionType:i.vhR,batchSchemas:null==e?void 0:e.data})}catch(e){s.Z.dispatch({actionType:i.Asn})
throw e}}function createOrRestoreBatchSchema(e){s.Z.dispatch({actionType:i.upF})
d.c_(e).done((({batchSchema:e,created:t})=>{s.Z.dispatch({actionType:i.ey5,batchSchema:e,created:t})
o.ZP.success((t?"Created":"Restored")+" batch schema successfully")})).fail((e=>{o.ZP.notifyError(e)
s.Z.dispatch({actionType:i.BoB})}))}function resetSavingState(){s.Z.dispatch({actionType:i.fKi})}function fetchAllBoxSchemas(){(function fetchAll(){return u.xA("/1/api/box-schemas")})().done((({data:e})=>{s.Z.dispatch({actionType:i.wK_,boxSchemas:e})})).fail((e=>{o.ZP.notifyError(e)}))}function createBoxSchema(e,t,n){c.$Z("Saving...");(function create(e){return u.ty({url:"/1/api/box-schemas",data:e})})({registryId:e,...t}).done((e=>{n&&n()
s.Z.dispatch({actionType:i.Fuo,boxSchema:e})
o.ZP.success("Created box schema successfully")})).fail((e=>{o.ZP.notifyError(e)})).always((()=>{c.Cp()}))}function SampleSchemaActions_deleteBoxSchema(e){(function deleteBoxSchema(e){return u.$v({url:`/1/api/box-schemas/${e}`})})(e).done((()=>{s.Z.dispatch({actionType:i.$x$,boxSchemaId:e})
o.ZP.success("Box schema deleted.")})).fail((e=>{o.ZP.notifyError(e)}))}function updateBoxSchema(e,t){s.Z.dispatch({actionType:i.iaF});(function update(e,t){return m.Yh({url:`/1/api/box-schemas/${e}`,data:t})})(e,t).done((e=>{s.Z.dispatch({actionType:i.p7Y,boxSchema:e})
o.ZP.success("Updated box schema successfully.")})).fail((e=>{o.ZP.notifyError(e)
s.Z.dispatch({actionType:i.kmp})}))}function fetchAllPlateSchemas(){(function PlateSchemaDAO_fetchAll(){return u.xA("/1/api/plate-schemas")})().done((({data:e})=>{s.Z.dispatch({actionType:i.K$E,plateSchemas:e})})).fail((e=>{o.ZP.notifyError(e)}))}function createPlateSchema(e,t,n){c.$Z("Saving...");(function PlateSchemaDAO_create(e){return u.ty({url:"/1/api/plate-schemas",data:e})})({registryId:e,...t}).done((e=>{n&&n()
s.Z.dispatch({actionType:i.Oln,plateSchema:e})
o.ZP.success("Created plate schema successfully")})).fail((e=>{o.ZP.notifyError(e)})).always((()=>{c.Cp()}))}function SampleSchemaActions_deletePlateSchema(e){(function deletePlateSchema(e){return u.$v({url:`/1/api/plate-schemas/${e}`})})(e).done((()=>{s.Z.dispatch({actionType:i.FDl,plateSchemaId:e})
o.ZP.success("Plate schema deleted.")})).fail((e=>{o.ZP.notifyError(e)}))}function updatePlateSchema(e,t){s.Z.dispatch({actionType:i.IA_});(function PlateSchemaDAO_update(e,t){return m.Yh({url:`/1/api/plate-schemas/${e}`,data:t})})(e,t).done((e=>{s.Z.dispatch({actionType:i.VIP,plateSchema:e})
o.ZP.success("Updated plate schema successfully.")})).fail((e=>{o.ZP.notifyError(e)
s.Z.dispatch({actionType:i.QHY})}))}function fetchAllGridSchemas(e){switch(e){case r.BOX_SCHEMA:fetchAllBoxSchemas()
break
case r.PLATE_SCHEMA:fetchAllPlateSchemas()}}function createGridSchema(e,t,n,a){switch(n){case r.BOX_SCHEMA:createBoxSchema(e,t,a)
break
case r.PLATE_SCHEMA:createPlateSchema(e,t,a)}}function deleteGridSchema(e,t){switch(t){case r.BOX_SCHEMA:SampleSchemaActions_deleteBoxSchema(e)
break
case r.PLATE_SCHEMA:SampleSchemaActions_deletePlateSchema(e)}}function updateGridSchema(e,t,n){switch(n){case r.BOX_SCHEMA:updateBoxSchema(e,t)
break
case r.PLATE_SCHEMA:updatePlateSchema(e,t)}}function fetchAllContainerSchemas(){(function ContainerSchemaDAO_fetchAll(){return u.xA("/1/api/container-schemas")})().done((({data:e})=>{s.Z.dispatch({actionType:i.hcQ,containerSchemas:e})})).fail((e=>{o.ZP.notifyError(e)}))}function createContainerSchema(e,t){(function ContainerSchemaDAO_create(e){return u.ty({url:"/1/api/container-schemas",data:e})})({registryId:e,...t}).done((e=>{s.Z.dispatch({actionType:i.h5v,containerSchema:e})
o.ZP.success("Created container schema successfully")})).fail((e=>{o.ZP.notifyError(e)}))}function updateContainerSchema(e,t){s.Z.dispatch({actionType:i.psy});(function ContainerSchemaDAO_update(e,t){return m.Yh({url:`/1/api/container-schemas/${e}`,data:t})})(e,t).done((e=>{s.Z.dispatch({actionType:i.DiD,containerSchema:e})
o.ZP.success("Updated container schema successfully.")})).fail((e=>{o.ZP.notifyError(e)
s.Z.dispatch({actionType:i.AFO})}))}function SampleSchemaActions_deleteContainerSchema(e){(function deleteContainerSchema(e){return u.$v({url:`/1/api/container-schemas/${e}`})})(e).done((()=>{s.Z.dispatch({actionType:i.kkm,containerSchemaId:e})
o.ZP.success("Container schema deleted.")})).fail((e=>{o.ZP.notifyError(e)}))}function fetchAllLocationSchemas(){(function LocationSchemaDAO_fetchAll(){return u.xA("/1/api/location-schemas")})().done((({data:e})=>{s.Z.dispatch({actionType:i.zeu,locationSchemas:e})})).fail((e=>{o.ZP.notifyError(e)}))}function createLocationSchema(e,t,n){c.$Z("Saving...");(function LocationSchemaDAO_create(e){return u.ty({url:"/1/api/location-schemas",data:e})})({registryId:e,...n}).done((n=>{s.Z.dispatch({actionType:i.Z0g,locationSchema:n})
a.c4(null,l.getRegistryLocationSchemasUrl(t,e))
o.ZP.success("Created location schema successfully")})).fail((e=>{o.ZP.notifyError(e)})).always((()=>{c.Cp()}))}function updateLocationSchema(e,t){s.Z.dispatch({actionType:i.YVM});(function LocationSchemaDAO_update(e,t){return m.Yh({url:`/1/api/location-schemas/${e}`,data:t})})(e,t).done((e=>{s.Z.dispatch({actionType:i.wgv,locationSchema:e})
o.ZP.success("Updated location schema successfully.")})).fail((e=>{o.ZP.notifyError(e)
s.Z.dispatch({actionType:i.$m8})}))}function SampleSchemaActions_deleteLocationSchema(e){(function deleteLocationSchema(e){return u.$v({url:`/1/api/location-schemas/${e}`})})(e).done((()=>{s.Z.dispatch({actionType:i.yKz,locationSchemaId:e})
o.ZP.success("Location schema deleted.")})).fail((e=>{o.ZP.notifyError(e)}))}},94222:(e,t,n)=>{n.d(t,{A0:()=>getCellsAsIndices,B5:()=>InvalidPositionFormatError,B8:()=>tagsToDict,Di:()=>canUserEditAnyPropertiesForStorable,GA:()=>InvalidPositionError,GD:()=>isPlateWell,Jl:()=>getSampleRoleIds,KH:()=>formatGridNumber,Np:()=>NoPositionError,S8:()=>isMatrixPlateOrBox,TK:()=>getAvailableCapacity,UP:()=>isFixedPlate,WM:()=>getStorableTypeNameForId,XF:()=>getAvailableSpaceDisplayString,ZY:()=>isGridSummary,bO:()=>getFixedPlateWellEditDisabledError,bw:()=>getPossibleEditNamesDisabledError,dV:()=>hasNewPlateAnnotationFillFeatures,fF:()=>isMatrixPlateSchema,fm:()=>getPossibleEditBarcodesDisabledError,h:()=>isGrid,lQ:()=>PositionOutOfBoundsError,mI:()=>formatGridRowCoordinate,mh:()=>formatGridColumnCoordinate,mk:()=>formatGridCoordinates,pc:()=>getParentPlateIds,rK:()=>parseGridPosition,uZ:()=>getNearestAncestralLocationId,vZ:()=>formatGridPosition,yQ:()=>getContainerLabelWithQuantity,yw:()=>getSampleFileTitle})
var a=n(64558),i=(n(989526),n(531041)),r=n(232606),s=n(348920),o=n(459830),l=n(6025),c=n(487761),d=n(319012),u=n(730981),m=(n(601790),n(379346)),p=n(525098)
n(771839)
class InvalidPositionError extends p.Z{}class NoPositionError extends InvalidPositionError{}class InvalidPositionFormatError extends InvalidPositionError{}class PositionOutOfBoundsError extends InvalidPositionError{}function getContainerLabelWithQuantity(e){const t=null==e.quantity.value?`unspecified ${(0,c.Z)(!1)}`:`${e.quantity.value} ${e.quantity.units}`
return`${function getStorableLabel(e){var t
return null!==(t=e.barcode)&&void 0!==t?t:e.name}(e)} (${t})`}function tagsToDict(e){const t={}
for(const n of e)t[n.tagSchemaField.id]=n
return t}function getSampleFileTitle(e){let t=""
isContainer(e)&&e.batch?t=`${e.batch.file.name} / ${e.batch.name}`:isBatch(e)&&(t=e.file.name)
return t?`${t} /`:t}function isMatrixPlateSchema(e){return null!=e&&e.plateSchemaType===u.Ch.MATRIX_PLATE}function isGrid(e){return m.ZP.isPlate(e)||m.ZP.isBox(e)}function getStorableTypeNameForId(e){(0,r.Gp)(m.ZP.isStorable(e),`Storable expected, got ${e}`)
const t={[o.BOX]:"Box",[o.PLATE]:"Plate",[o.LOCATION]:"Location"},n=m.ZP.apiIdToType(e)
return t.location.toUpperCase()===n.toUpperCase()?t.location:t.plate.toUpperCase()===n.toUpperCase()?t.plate:t.box.toUpperCase()===n.toUpperCase()?t.box:"Container"}function isFixedPlate(e){return!(!e||!isGrid(e.id))&&e.storableSchema.plateSchemaType===u.Ch.FIXED_PLATE}function isMatrixPlateOrBox(e){return null!=e&&isGrid(e.id)&&!isFixedPlate(e)}function isPlateWell(e){return null!=e.parentStorableId&&m.ZP.apiIdToType(e.parentStorableId)===o.PLATE}function getParentPlateIds(e){return i.default.uniq(i.default.compact(i.default.pluck(e,"parentStorableId"))).filter((e=>m.ZP.apiIdToType(e)===o.PLATE))}function formatGridCoordinates(e,t){return l.toSpreadsheetIndex({row:t,column:e})}function formatGridRowCoordinate(e){return l.colNumberToLetters(e)}function formatGridColumnCoordinate(e){return l.rowIndexToNumber(e)}function formatGridNumber(e,t,n){return n*e+t+1}function formatGridPosition({gridType:e,rowIndex:t,columnIndex:n,width:a,includeNoun:i=!1}){let r=e===o.BOX?`${formatGridNumber(t,n,a)} (${formatGridCoordinates(t,n)})`:formatGridCoordinates(t,n)
if(i){r=`${e===o.BOX?"Position":"Well"} ${r}`}return`${r}`}function parseGridPosition({position:e,gridHeight:t,gridWidth:n}){if(!e)throw new NoPositionError
let i,s
if("A"<=e[0].toUpperCase()&&e[0].toUpperCase()<="Z"){const t=e.match(/[a-zA-Z]+|[0-9]+/g)
if(!t||2!==t.length)throw new InvalidPositionFormatError
i=l.colLettersToNumbers(t[0])
const n=(0,a.Lk)(t[1])
if(!n)throw new InvalidPositionFormatError
s=n-1}else{if(!/^-?\d+$/.test(e))throw new InvalidPositionFormatError
let t=(0,a.Lk)(e);(0,r.hu)(null!=t,"Expected parseInteger result to not be null")
t--
i=Math.floor(t/n)
s=t%n}if(!(0<=i&&i<t&&0<=s&&s<n))throw new PositionOutOfBoundsError
return{rowIndex:i,columnIndex:s}}function getNearestAncestralLocationId(e){if(null==e)return null
if(m.ZP.isLocation(e.id))return e.id
if(e.parentStorableId){(0,r.hu)(m.ZP.isLocation(e.parentStorableId),"Unexpected parent type")
return e.parentStorableId}return null}function isContainer(e){return null!=e.contents}function isBatch(e){return null!=e.file}function getSampleRoleIds(e,t){return null!=e?e[t].map((e=>e.id)):[]}function getPossibleEditNamesDisabledError(e){return e?null:"You do not have permission to edit this item's name."}function getPossibleEditBarcodesDisabledError(e){return e?null:"You do not have permission to edit this item's barcode."}function getFixedPlateWellEditDisabledError(e,t){return e?`Fixed plate well ${t}s cannot be edited.`:null}function canUserEditAnyPropertiesForStorable(e){return Boolean(e.permissions.writable||e.permissions.canEditNamesAndBarcodes)}function hasNewPlateAnnotationFillFeatures(e){return s.ZP.INVENTORY_ENABLE_BULK_ANNOTATE_AND_FILL_ON_PLATES&&isFixedPlate(e)}function getCellsAsIndices(e,t){return e.map((e=>(0,d.yy)(e.rowIndex,e.columnIndex,{numRows:t.storableSchema.height,numColumns:t.storableSchema.width})))}function getAvailableCapacity(e,t){return Math.max(e-t,0)}function getAvailableSpaceDisplayString(e,t){return`${getAvailableCapacity(e,t)} / ${e}`}function isGridSummary(e){return isGrid(e.id)}},267203:(e,t,n)=>{n.d(t,{Z:()=>m})
var a=n(602652),i=n(989526),r=n(531041),s=n(392663),o=n(954240),l=n(865486),c=n(297020),d=n(472347)
function getDefaultMenuOptionDatas(e){const t=[]
if(!e)return t
if(0===e.length)t.push({name:"No schemas found"})
else for(const n of e)t.push({name:(0,s.Z)(n),value:n})
return t}const u={error:a.string,isDisabled:a.bool,onChange:a.func.isRequired,schemas:a.arrayOf(a.shape({id:a.string.isRequired,name:a.string.isRequired})),selectedSchemaId:a.string}
class SchemaSelector extends i.Component{constructor(){super(...arguments)
this.handleOnChange=e=>{if(!this.props.selectedSchemaId||this.props.selectedSchemaId!==e.id){this.props.onChange(e);(0,o.ME)(this.dropdown)}}}render(){const{error:e,isDisabled:t,menuRender:n,menuOptionDatas:a,schemas:c,selectedSchemaId:u}=this.props,m=c?r.default.findWhere(c,{id:u}):null
return i.createElement(o.ZP,{disabled:!c||t,className:t?"disabled--withBorder":"",displayName:m?(0,s.Z)(m):"Select a schema...",error:e,menu:i.createElement(d.Z,{className:"menu--short",scrollable:!0,width:l.ZP.WIDTHS.FULL,onSelect:this.handleOnChange,optionDatas:a||getDefaultMenuOptionDatas(c),renderOptionContent:n,selectedValue:m,itemContainerClassName:this.props.itemContainerClassName}),ref:e=>{this.dropdown=e},dataTestAttrs:{component:"SchemaSelector",element:"selectDropdown"}})}}SchemaSelector.propTypes={...u,itemContainerClassName:a.string,menuRender:a.func,menuOptionDatas:a.arrayOf(c.qB.isRequired)}
SchemaSelector.defaultProps={isDisabled:!1}
const m=SchemaSelector},351231:(e,t,n)=>{n.d(t,{U:()=>getSchemaSearchableMenuOptionDatas})
var a=n(392663),i=n(382857),r=n(348920),s=n(826423),o=n(710984),l=n(645387),c=n(335609)
function getSchemaSearchableMenuOptionDatas(e,t,n,d){const{allSchemasValue:u,shouldShowNoSchemaOption:m,unstarrable:p,sections:h,transformSchema:E,transformInterface:S,isSchemaDisabledFn:T,disabledMessage:g,includeArchivedSuffix:f}={shouldShowNoSchemaOption:!1,allSchemasValue:null,unstarrable:!1,includeArchivedSuffix:!0,sections:[{title:"Schemas",containsSchema:()=>!0}],transformSchema:e=>e,transformInterface:e=>e,...(0,c.Z)(d,"shouldShowNoSchemaOption","allSchemasValue","unstarrable","sections","transformSchema","transformInterface","disabledMessage","isSchemaDisabledFn","includeArchivedSuffix")},I=[]
if(!e||!t)return I
const A=(0,l.xm)(e,(e=>{var t
return null===(t=d.getSchemaOwner)||void 0===t?void 0:t.call(d,e)}))
if(0!==e.length||h.some((e=>e.hasOwnProperty("value")))){u&&I.push({name:"All",value:u,extra:{unstarrable:!0}})
m&&I.push({name:"No schema",value:{id:null}})
const l=new Set(t),c=e.filter((e=>l.has(e.id)))
if(c.length>0){I.push({name:"Starred",isHeader:!0,className:"schema-section"})
for(const e of c){const t=null!=T&&T(e)
I.push({...null!=g?{disabledMessage:g}:{},name:f?(0,a.Z)(e):e.name,metadata:A(e),value:E(e),disabled:t,isArchived:(0,i.ZP)(e)})}}r.ZP.SCHEMAS_ENABLE_INTERFACES&&n&&n.length>0&&(0,s.x)(n,S).forEach((e=>I.push(e)))
h.forEach((t=>{t.value?I.push({name:t.title,className:"schema-section",value:t.value,extra:{unstarrable:!0}}):I.push({name:t.title,isHeader:!0,className:"schema-section"})
const n=e.filter((e=>t.containsSchema(e)))
for(const e of n){if(l.has(e.id))continue
const t=null!=T&&T(e),n=(0,o.bx)(e)||p
I.push({...null!=g?{disabledMessage:g}:{},className:"schema-option",name:f?(0,a.Z)(e):e.name,value:E(e),metadata:A(e),extra:{unstarrable:n},disabled:t,isArchived:(0,i.ZP)(e)})}}))}else I.push({name:"No schemas found"})
return I}},938454:(e,t,n)=>{n.r(t)
n.d(t,{bulkFetchContainers:()=>bulkFetchContainers,bulkFetchStorables:()=>bulkFetchStorables,bulkFetchSummaries:()=>bulkFetchSummaries,bulkGetStorableSummaryExtras:()=>bulkGetStorableSummaryExtras,bulkGetStorablesWithAncestors:()=>bulkGetStorablesWithAncestors,bulkMoveStorables:()=>bulkMoveStorables,bulkMoveStorablesWithDataMods:()=>bulkMoveStorablesWithDataMods,bulkUpdateContainerContentConcentrations:()=>bulkUpdateContainerContentConcentrations,bulkUpdateContainerContentConcentrationsWithDataMods:()=>bulkUpdateContainerContentConcentrationsWithDataMods,bulkUpdateContainerProperties:()=>bulkUpdateContainerProperties,bulkUpdateContainerPropertiesWithDataMods:()=>bulkUpdateContainerPropertiesWithDataMods,bulkUpdateTags:()=>bulkUpdateTags,bulkUpdateTagsWithDataMods:()=>bulkUpdateTagsWithDataMods,clearContainerListing:()=>clearContainerListing,clearPlateListing:()=>clearPlateListing,closeGrid:()=>closeGrid,createBox:()=>createBox,createContainers:()=>createContainers,createGrid:()=>createGrid,createLocation:()=>createLocation,createPlate:()=>createPlate,deleteContainerContents:()=>deleteContainerContents,deleteContainerContentsWithDataMods:()=>deleteContainerContentsWithDataMods,dispatchStorableSummariesLoaded:()=>dispatchStorableSummariesLoaded,dispatchStorablesLoaded:()=>dispatchStorablesLoaded,exportContainersToCSV:()=>exportContainersToCSV,exportGridToCSV:()=>exportGridToCSV,fetchContainer:()=>fetchContainer,fetchContainerTransferInfo:()=>fetchContainerTransferInfo,fetchGrid:()=>fetchGrid,fetchLocation:()=>fetchLocation,fetchLocationSummaries:()=>fetchLocationSummaries,fetchStorableSummaries:()=>fetchStorableSummaries,invalidateGrid:()=>invalidateGrid,listContainableContainers:()=>listContainableContainers,listContainablePlates:()=>listContainablePlates,listStorableSummaries:()=>listStorableSummaries,open:()=>open,openLocationExpandedSearch:()=>openLocationExpandedSearch,resetSavingState:()=>resetSavingState,searchStorablesWithSummaries:()=>searchStorablesWithSummaries,starStorables:()=>starStorables,stubbableFunctions:()=>q,unstarStorables:()=>unstarStorables,updateContainer:()=>updateContainer,updateContainerContent:()=>updateContainerContent,updateContainerContentWithDataMods:()=>updateContainerContentWithDataMods,updateContainerTags:()=>updateContainerTags,updateContainerTagsWithDataMods:()=>updateContainerTagsWithDataMods,updateContainerWithDataMods:()=>updateContainerWithDataMods,updateGrid:()=>updateGrid,updateGridWithDataMods:()=>updateGridWithDataMods,updateLocation:()=>updateLocation,updateLocationWithDataMods:()=>updateLocationWithDataMods,validateWellSpreadsheet:()=>validateWellSpreadsheet})
var a=n(64558),i=n(531041),r=n(468943),s=n(764677),o=n(609630),l=n(814099),c=n(23062),d=n(323539),u=n(348920),m=n(675649),p=n(171471),h=n(787004),E=n(459830),S=n(133832),T=n(947730),g=n(974913),f=n(380490),I=n(166459),A=n(386382),y=n(539593),_=n(480353),C=n(62315),R=n(938722),N=n(150126),O=n(87209),b=n(379346),v=n(221743),P=n(808844),L=n(771398),D=n(843176),M=n(452148),w=n(58498),F=n(654996),k=n(480201),U=n(94222),x=n(532275),B=n(19329),Z=n(57214)
function getFriendlyOrGenericError(e){var t
return null!==(t=g.ZP.getFriendlyError(e))&&void 0!==t?t:N.q}async function bulkGetStorablesWithAncestors(e){const t=await x.S_(e)
T.Z.dispatch({actionType:h.lZT,storables:t})}function fetchStorableSummaries(e,t){const createErrorResponse=e=>({storables:[],limit:0,total:0,storableSummaryExtras:{},error:null!=e?e:"Unexpected error"}),n=(0,v.Z)(),a=x.aN(e,t).catch((e=>{g.ZP.notifyError(e)
return createErrorResponse(g.ZP.getFriendlyError(e))}))
return{responsePromise:Promise.race([a,n.then((e=>createErrorResponse(e)))]).then((e=>{e.error||T.Z.dispatch({actionType:h.w9H,storables:e.storables,storableSummaryExtras:e.storableSummaryExtras})
return e})),cancelPromise:n}}async function bulkGetStorableSummaryExtras(e){const t=await x.UG(e)
T.Z.dispatch({actionType:h.w9H,storables:[],storableSummaryExtras:t})}function listStorableSummaries(e,t,n,a=!0,i=0){let r
const o=[{key:C.Oq.TYPES.key,value:t},...a?[]:[{key:C.Oq.ARCHIVE_STATUS.key,value:s.nr.NOT_ARCHIVED}]]
r=null!=n?y.v([...o,{key:C.Oq.PARENT_STORABLE.key,value:n}]).queryFilter:y.v(o).queryFilter
return fetchStorableSummaries(e,{filter:r,sort:{offset:i}})}function openLocationExpandedSearch(e){const t=(0,d.XH)({feature:l.TD.INVENTORY_OPEN})
if(!t.enabled){(0,c.B)(e.id,t.userMessage)
return}const a=n(392113);(0,I.getStore)().dispatch(a.listLocation(e.id,e.storableSchema.registryId))}function fetchLocationSummaries(e,t=null){const{queryFilter:n}=y.v([{key:C.Oq.TYPES.key,value:[E.LOCATION]}]),a={filter:n}
null!=t&&(a.sort={limit:t})
return fetchStorableSummaries(e,a)}function fetchLocation(e){k.Kx(e).done((({location:e,ancestralLocations:t})=>{T.Z.dispatch({actionType:h.pv7,location:e,ancestralLocations:t})})).fail(g.ZP.notifyError)}function open(e){q.doOpen(e)}async function fetchGrid(e){try{const{grid:t,parentStorable:n}=await w.he(e)
T.Z.dispatch({actionType:h.Odv,grid:t,parentStorable:n})}catch(t){if(!L.d0(t))throw t
Z.Sd(t)&&Z.cG(e,t)
404===t.status?Z.XY(e,t):g.ZP.notifyError(t)}}function invalidateGrid(e){T.Z.dispatch({actionType:h.Arb,gridId:e})}function closeGrid(e){T.Z.dispatch({actionType:h.kC1,gridId:e})}async function fetchContainer(e,t=!1){try{const{batches:t,container:n,containedBioentities:a,parentStorable:r}=await M.he(e)
T.Z.dispatch({actionType:h.GHP,batches:t,container:n,parentStorable:r});(0,I.getStore)().dispatch(f.wb(i.default.indexBy(a,"id")))}catch(n){if(!L.d0(n))throw n
let a=!0
Z.Sd(n)?Z.cG(e,n):404===n.status?Z.XY(e,n):a=!1
!t&&a||g.ZP.notifyError(n)}}async function bulkFetchContainers(e,t=!1){const{containers:n,batchesById:a,fileSummariesById:r}=await M.dD(e,t)
T.Z.dispatch({actionType:h.bcI,containersById:i.default.indexBy(n,"id"),batchesById:a});(0,I.getStore)().dispatch(f.wb(r))
return{containers:n,batchesById:a,fileSummariesById:r}}function dispatchStorablesLoaded(e){T.Z.dispatch({actionType:h.lZT,storables:e})}async function bulkFetchStorables(e){const{storables:t}=await x.HF(e)
dispatchStorablesLoaded(t)}function dispatchStorableSummariesLoaded(e,t){T.Z.dispatch({actionType:h.w9H,storables:e,storableSummaryExtras:t})}async function bulkFetchSummaries(e){const{storableSummaries:t}=await x.K(e)
dispatchStorableSummariesLoaded(t)
return t}async function fetchContainerTransferInfo(e){const{inputTransfers:t,outputTransfers:n}=await M.xx(e),a=i.default.compact(i.default.pluck(t,"inputContainer")),r=i.default.pluck(n,"outputContainer"),s=a.concat(r)
T.Z.dispatch({actionType:h.w9H,storables:s})
const o=U.pc(s),containersToPlateOrContainerIdsFn=e=>i.default.uniq(e.map((({id:e,parentStorableId:t})=>t&&o.includes(t)?t:e)))
T.Z.dispatch({actionType:h.LAi,containerId:e,containerTransferInfo:{inputStorableIds:containersToPlateOrContainerIdsFn(a),outputStorableIds:containersToPlateOrContainerIdsFn(r)}})
o.length&&await bulkFetchSummaries(o)}function updateContainerWithDataMods(e,t,n){const a=t.parentStorableData?A.wV.MOVE:A.wV.MODIFY;(0,o.Kz)({changeSummary:(0,A.P_)({apiIds:[e],action:a}),onRequestClose:()=>{},onRequestSubmit:()=>{updateContainer(e,t,n)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:a,numModifiedTotalItems:1,entryId:null})}function updateContainer(e,t,n){M.eE(e,t).done((({container:e,parentStorable:t})=>{T.Z.dispatch({actionType:h.BrT,container:e,parentStorable:t})
const a=U.uZ(t)
a&&fetchLocation(a)
null==n||n()
g.ZP.success(`${e.name} successfully updated`)})).fail((e=>{if(null!=n){g.ZP.getFriendlyError(e)||g.ZP.notifyError(e)
n(getFriendlyOrGenericError(e))}else g.ZP.notifyError(e)}))}async function deleteContainerContentsWithDataMods(e){const t=(0,A.P_)({apiIds:e,action:A.wV.MODIFY})
await(0,o.GE)({changeSummary:t,onRequestClose:()=>{},onRequestSubmit:()=>{deleteContainerContents(e)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:A.wV.MODIFY,numModifiedTotalItems:e.length,entryId:null})}async function deleteContainerContents(e){O.$Z("Removing contents...")
try{const{invalidatableBatchIds:t,invalidatableContainedItemIds:n,invalidatableStorableIds:a}=await M.WY(e)
g.ZP.success("Removed contents from containers successfully.")
T.Z.dispatch({actionType:h.HmA,invalidatableBatchIds:t,invalidatableContainedItemIds:n,invalidatableStorableIds:a})}finally{O.Cp()}}function updateContainerContentWithDataMods(e,t,n){const a=(0,A.P_)({apiIds:[e],action:A.wV.MODIFY});(0,o.Kz)({changeSummary:a,onRequestClose:()=>{},onRequestSubmit:()=>{updateContainerContent(e,t,n)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:A.wV.MODIFY,numModifiedTotalItems:1,entryId:null})}function updateContainerContent(e,t,n){M.eA(e,t,n).done((({containerContent:e,gridId:t})=>{T.Z.dispatch({actionType:h.f2d,containerContents:[e],gridId:t})
g.ZP.success("Concentration successfully updated")})).fail(g.ZP.notifyError)}function exportContainersToCSV(e){const t=i.default.uniqueId("export-containers-to-csv-")
g.ZP.info("Exporting...",{id:t,duration:0})
M.GS(e).done((e=>{(0,m.gG)(e.url)
g.ZP.success("Export complete. Downloading...",{id:t})})).fail((e=>{g.ZP.notifyError(e,{id:t})}))}function exportGridToCSV(e){const t=i.default.uniqueId("export-grid-to-csv-")
g.ZP.info("Exporting...",{id:t,duration:0})
w.GS([e]).then((e=>{(0,m.gG)(e.url)
g.ZP.success("Export complete. Downloading...",{id:t})})).catch((e=>{g.ZP.notifyError(e,{id:t})}))}function createGrid(e,t=a.ZT,n){const r=(0,F.Z)(e)
w.uI(r.gridSchemaId,r.name,i.default.omit(r,"gridSchemaId","name")).done((e=>{(0,B.Z)(e)
n&&n(e)
t()
const a=b.ZP.apiIdToType(e.id)
g.ZP.success(`${(0,P.kC)((0,P.E2)(a))} successfully created`)})).fail((e=>{g.ZP.getFriendlyError(e)||g.ZP.notifyError(e)
t(getFriendlyOrGenericError(e))}))}function createPlate(e,t){createGrid(e,t,open)}function createBox(e,t){createGrid(e,t,open)}async function updateGridWithDataMods(e,t,n={},a){const i=n.name||n.newBarcode||n.sourceId||n.tags?A.wV.MODIFY:A.wV.MOVE,r=(0,A.P_)({apiIds:[e],action:i})
let s=null
await(0,o.GE)({changeSummary:r,onRequestClose:()=>{},onRequestSubmit:async()=>{s=await updateGrid(e,t,n,a)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:i,numModifiedTotalItems:1,entryId:null})
return s}async function updateGrid(e,t,{name:n,newBarcode:a,parentStorableData:i,sourceId:r,tags:s}={},o){T.Z.dispatch({actionType:h.dPq,gridId:e})
try{const l="update-grid-toast"
g.ZP.info("Updating grid...",{id:l,duration:0})
const c=await w.Jt(e,t,{name:n,newBarcode:a,parentStorableData:i,sourceId:r,tags:s}),{grid:d,parentStorable:u}=c,m=b.ZP.isBox(d.id)?"Box":b.ZP.isPlate(d.id)?"Plate":"Grid"
T.Z.dispatch({actionType:h.nWU,grid:{sourceId:r,...d},parentStorable:u})
g.ZP.success(`${m} successfully updated`,{id:l})
null==o||o()
return d}catch(t){T.Z.dispatch({actionType:h.HVi,gridId:e})
if(null!=o){g.ZP.getFriendlyError(t)||g.ZP.notifyError(t)
o(getFriendlyOrGenericError(t))}else g.ZP.notifyError(t)}return null}function validateWellSpreadsheet(e,t,n,i,r,s=a.ZT){w.md(e,t,n,i,r).done((()=>{s()})).fail((e=>{g.ZP.getFriendlyError(e)||g.ZP.notifyError(e)
s(getFriendlyOrGenericError(e))}))}function createLocation(e,t,n={},i=a.ZT){k.ob(e,t,n).done((e=>{(0,B.Z)(e)
i()
g.ZP.success("Location successfully created")})).fail((e=>{i(getFriendlyOrGenericError(e))}))}async function updateLocationWithDataMods(e,t,n,a){const i=t.name||t.tags?A.wV.MODIFY:A.wV.MOVE,r=(0,A.P_)({apiIds:[e],action:i})
let s=null
await(0,o.GE)({changeSummary:r,onRequestClose:()=>{},onRequestSubmit:async()=>{s=await updateLocation(e,t,n,a)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:i,numModifiedTotalItems:1,entryId:null})
return s}async function updateLocation(e,t,n,a){null==n||n()
try{const n=await k.YF(e,t)
null==a||a()
T.Z.dispatch({actionType:h.pv7,location:n})
g.ZP.success("Location successfully updated")
return n}catch(e){if(null==a)throw e
a(getFriendlyOrGenericError(e))}return null}function createContainers(e,{onCreate:t,onFinish:n=a.ZT}={}){M.r_(e).done((({containers:a})=>{a.forEach((e=>{(0,B.Z)(e)}))
t&&t(a)
1===a.length&&open(a[0])
i.default.chain(e).map((e=>e.parentStorableData.id)).filter((e=>{let t
if(e){t=b.ZP.apiIdToType(e)}return void 0!==t&&Boolean(e)&&S.tz.includes(t)})).uniq().value().forEach((e=>{invalidateGrid(e)}))
n()
T.Z.dispatch({actionType:h.bcI,containersById:i.default.indexBy(a,"id")})
g.ZP.success(`${(0,m._6)(e.length,"Container")} successfully created`)})).fail((e=>{n(getFriendlyOrGenericError(e))}))}function updateContainerTagsWithDataMods(e,t){(0,o.Kz)({changeSummary:(0,A.P_)({apiIds:[e],action:A.wV.MODIFY}),onRequestClose:()=>{},onRequestSubmit:()=>{updateContainerTags(e,t)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:A.wV.MODIFY,numModifiedTotalItems:1,entryId:null})}function updateContainerTags(e,t){M.PG(e,t).done((e=>{g.ZP.success(`Tags on ${e.name} successfully updated`)
T.Z.dispatch({actionType:h.t0s,container:e})})).fail(g.ZP.notifyError)}function resetSavingState(){T.Z.dispatch({actionType:h.na4})}function starStorables(e){x.Rw(e).done((()=>{T.Z.dispatch({actionType:h.xSj,storableIds:e,updates:{starred:!0}})})).fail(g.ZP.notifyError)}function unstarStorables(e){x.zj(e).done((()=>{T.Z.dispatch({actionType:h.xSj,storableIds:e,updates:{starred:!1}})})).fail(g.ZP.notifyError)}function bulkMoveStorablesWithDataMods(e,t,n){(0,o.Kz)({changeSummary:(0,A.P_)({apiIds:e.map((({id:e})=>e)),action:A.wV.MOVE}),onRequestClose:()=>{},onRequestSubmit:()=>{bulkMoveStorables(e,t,n)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:A.wV.MOVE,numModifiedTotalItems:e.length,entryId:null})}function bulkMoveStorables(e,t,n){x.GQ(e).done((({invalidatableStorableIds:e})=>{g.ZP.success("Inventory items successfully moved");(0,R.wd)(e)
t&&t()
null==n||n()
T.Z.dispatch({actionType:h.G7P,invalidatableStorableIds:e})})).fail((e=>{if(null!=n){g.ZP.getFriendlyError(e)||g.ZP.notifyError(e)
n(getFriendlyOrGenericError(e))}else g.ZP.notifyError(e)}))}function listContainableContainers(e,t,n,a,{includeStorableSummaryExtras:i,archivePurposes:r}={}){T.Z.dispatch({actionType:h.PbM,containableId:t,listingId:e})
D.o(t,{offset:n,limit:a,includeStorableSummaryExtras:i,archivePurposes:r}).done((({containers:t,total:i,totalWithHidden:r,storableSummaryExtras:s})=>{T.Z.dispatch({actionType:h.qm1,listingId:e,containers:t,pagination:{offset:n,limit:a,total:i,totalWithHidden:r},storableSummaryExtras:s})})).fail((t=>{g.ZP.notifyError(t)
T.Z.dispatch({actionType:h.tTx,listingId:e})}))}function listContainablePlates(e,t,n,a,{includeStorableSummaryExtras:i,archivePurposes:r}={}){T.Z.dispatch({actionType:h.s7T,containableId:t,listingId:e})
D.Y(t,{offset:n,limit:a,includeStorableSummaryExtras:i,archivePurposes:r}).done((({plates:t,total:i,totalWithHidden:r,storableSummaryExtras:s})=>{T.Z.dispatch({actionType:h.qu6,listingId:e,plates:t,pagination:{offset:n,limit:a,total:i,totalWithHidden:r},storableSummaryExtras:s})})).fail((t=>{g.ZP.notifyError(t)
T.Z.dispatch({actionType:h.rqS,listingId:e})}))}function clearContainerListing(e){T.Z.dispatch({actionType:h.BTo,listingId:e})}function clearPlateListing(e){T.Z.dispatch({actionType:h.Kkb,listingId:e})}function searchStorablesWithSummaries(e){const{responsePromise:t,cancelPromise:n}=function searchStorablesCompleteResponse(e){const t=(0,v.Z)(),n=(0,_.DO)(e,C.Sc.STORABLE),a=x.Sr(n)
return{responsePromise:Promise.race([a,t.then((e=>(e=>({ids:[],total:0,isExact:!1,timedOut:!1,correlationId:void 0,storableSummaries:[],storableSummaryExtras:{},error:e}))(e)))]).then((e=>{e.error||T.Z.dispatch({actionType:h.w9H,storables:e.storableSummaries,storableSummaryExtras:e.storableSummaryExtras})
return{ids:e.ids,total:e.total,isExact:e.isExact,timedOut:e.timedOut,correlationId:e.correlationId,storableSummaries:e.storableSummaries,storableSummaryExtras:e.storableSummaryExtras,error:e.error,groups:e.groups,nextToken:e.nextToken}})),cancelPromise:t}}(e)
return{responsePromise:t.then((e=>({ids:e.ids,total:e.total,isExact:e.isExact,timedOut:e.timedOut,storableSummaries:e.storableSummaries,storableSummaryExtras:e.storableSummaryExtras,error:e.error,groups:e.groups,nextToken:e.nextToken}))),cancelPromise:n}}async function bulkUpdateTagsWithDataMods(e,t){await(0,o.GE)({changeSummary:(0,A.P_)({apiIds:e,action:A.wV.MODIFY}),onRequestClose:()=>{},onRequestSubmit:()=>{bulkUpdateTags(e,t)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:A.wV.MODIFY,numModifiedTotalItems:e.length,entryId:null})}async function bulkUpdateTags(e,t){const{storables:n}=await x.Tw(e,t)
T.Z.dispatch({actionType:h.lZT,storables:n})
g.ZP.success(`Successfully updated ${e.length} storables.`)}async function bulkUpdateContainerPropertiesWithDataMods(e){await(0,o.GE)({changeSummary:(0,A.P_)({apiIds:e.map((e=>e.id)),action:A.wV.MODIFY,containersMayBeWells:!0}),onRequestClose:()=>{},onRequestSubmit:()=>{bulkUpdateContainerProperties(e)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:A.wV.MODIFY,numModifiedTotalItems:e.length,entryId:null})}async function bulkUpdateContainerProperties(e){const{containers:t}=await M.vL(e)
T.Z.dispatch({actionType:h.In_,containers:t});(0,R.wd)(e.map((({id:e})=>e)))
g.ZP.success(`Successfully updated ${t.length} ${(0,m._6)(t.length,"container")} or plate ${(0,m._6)(t.length,"well")}.`)}async function bulkUpdateContainerContentConcentrationsWithDataMods(e){await(0,o.GE)({changeSummary:(0,A.P_)({apiIds:e.map((e=>e.containerId)),action:A.wV.MODIFY,containersMayBeWells:!0,modifyContainedSamples:!0}),onRequestClose:()=>{},onRequestSubmit:()=>{bulkUpdateContainerContentConcentrations(e)}},u.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:A.wV.MODIFY,numModifiedTotalItems:e.length,entryId:null})}async function bulkUpdateContainerContentConcentrations(e){const{containerContents:t}=await M.U2(e)
T.Z.dispatch({actionType:h.f2d,containerContents:t})
g.ZP.success(`Successfully updated ${t.length} ${(0,m._6)(t.length,"concentration")}.`)}const q={doOpen(e){if(b.ZP.apiIdToType(e.id)===E.LOCATION)openLocationExpandedSearch(e)
else{n(776065).Z.openFile(e.id,{folderItem:e})}r.j(p.XC.SAMPLES,"opened_storable")
r.KK(p.yw.OPENED_STORABLE)}}},532275:(e,t,n)=>{n.d(t,{GQ:()=>bulkMove,HF:()=>bulkFetchStorables,K:()=>bulkFetchSummaries,R9:()=>o,Re:()=>bulkUnarchive,Rw:()=>starStorables,S_:()=>bulkGetStorablesWithAncestors,Sr:()=>searchStorables,Tw:()=>bulkUpdateTags,UG:()=>bulkGetStorableSummaryExtras,aN:()=>fetchStorables,kp:()=>inputSearchStorables,uc:()=>bulkArchive,zj:()=>unstarStorables})
var a=n(816032),i=n(771398),r=n(118577),s=n(8747)
function fetchStorables(e,t){const n=(0,r.Z)(t,"filter","sort")
return i.UJ("/1/api/storables",{registryId:e,...n})}function searchStorables(e){return(0,a.Q)({url:"/1/api/storables:search",data:e})}const o="/1/api/storables:input-search"
function inputSearchStorables(e){return i.s0({url:o,data:e})}function bulkGetStorableSummaryExtras(e){return i.s0({url:"/1/api/storables:summary-extras",data:{storableIds:e}})}function bulkGetStorablesWithAncestors(e){return i.s0({url:"/1/api/storables:with-ancestors",data:{storableIds:e}})}function bulkArchive(e,t,{shouldRemoveBarcodes:n,shouldArchiveContainedSamples:a}){return s.ty({url:"/1/api/storables:archive",data:{ids:e,purpose:t,shouldRemoveBarcodes:n,shouldArchiveContainedSamples:a}})}function bulkUnarchive(e){return s.ty({url:"/1/api/storables:unarchive",data:{ids:e}})}function bulkFetchStorables(e){return i.s0({url:"/1/api/storables:bulk-get",data:{storableIds:e}})}function bulkFetchSummaries(e){return i.s0({url:"/1/api/storables:bulk-get-summaries",data:{storableIds:e}})}function starStorables(e){return i.ty({url:"/1/api/storables:star",data:{storableIds:e}})}function unstarStorables(e){return i.ty({url:"/1/api/storables:unstar",data:{storableIds:e}})}function bulkMove(e){return s.ty({url:"/1/api/storables:bulk-move",data:{storableDatas:e}})}function bulkUpdateTags(e,t){return i.s0({url:"/1/api/storables:bulk-update-tags",data:{storableIds:e,tags:t}})}},416320:(e,t,n)=>{n.d(t,{B0:()=>getCreateBoxValidationErrors,BW:()=>p,D9:()=>isSourceComplete,Dv:()=>isSpreadsheetLoading,Je:()=>isConfirmSampleControlsPaneComplete,UC:()=>isChooseTransferOutputPaneComplete,Uz:()=>getCreateLocationValidationErrors,_6:()=>getCreateContainerValidationErrors,_b:()=>isChooseTransferInputPaneComplete,cU:()=>isExistingPlatePaneComplete,cu:()=>transferParamsFromCellsToNewPlate,hN:()=>getShouldCalculateConcentrations,hw:()=>isConfirmConcentrationsPaneComplete,ly:()=>isConfirmTransferQuantitiesPaneComplete,wR:()=>getCreatePlateValidationErrors,wV:()=>isBioentitySummary,zR:()=>getUpdatedConcentrationPaneState})
var a=n(531041),i=n(348920),r=n(459830),s=(n(133832),n(328867)),o=n(778095),l=n(776105),c=n(870822),d=n(453657),u=n(316887),m=n(94222)
const p={EXISTING:"EXISTING",CREATE:"CREATE",CHOOSE:"CHOOSE"}
function isSourceComplete(e){return!i.ZP.ENABLE_PROJECTS_REQUIRED_FOR_NON_LOCATION_STORABLES||null!=e&&o.Z.getProjects().map((e=>e.id)).includes(e)}function isBioentitySummary(e){return Boolean(null==e?void 0:e.hasOwnProperty("tagSchema"))}function _getCreateStorableValidationErrors(e,t={},n){n=n||e.numToCreate||1
const{customBarcode:a,selectedParent:r,selectedSchema:s,shouldAutogenerateBarcode:o}=e,l={}
s?t.parentStorable||!i.ZP.ENABLE_REQUIRED_PARENT_STORABLE||r.storable||(l.parentStorableError="Please specify a location."):l.schemaError="Please select a schema."
o||a&&a.split(/[\s,]+/).length===n||(l.barcodeError=n>1?`Please specify ${n} comma-separated barcodes.`:"Please specify a barcode.")
t.project||isSourceComplete(e.sourceId)||(l.projectError="Please select a project.")
return l}function isExistingPlatePaneComplete(e){return Boolean(e.selectedGrid)}function areSampleStatusWarningsBlocking(e,t){const n=null==(null==e?void 0:e.warningInputOutputType)||e.warningInputOutputType===t
return null!=e&&!(0,s.RO)(e.selectedSampleIds,e.shouldShowStatusWarnings,e.canProceedOnSampleStatus)&&n}function areTransferInputContentsValid(e,t=c.wD.EXISTING_CONTAINER){return t!==c.wD.EXISTING_CONTAINER||null==e||u.i6(e)}function isChooseTransferInputPaneComplete(e){return d.ew(e)&&areTransferInputContentsValid(e.inputContainer,e.inputType)&&!areSampleStatusWarningsBlocking(e.inputSampleStatusState,e.inputType)&&!areSampleStatusWarningsBlocking(e.outputSampleStatusState,null)}function isChooseTransferOutputPaneComplete(e){var t,n
return(Boolean(e.outputType===r.CONTAINER&&(null===(t=e.outputContainerSummaries)||void 0===t?void 0:t.length))||Boolean(e.outputType===r.PLATE&&e.outputPlate&&(null===(n=e.outputCells)||void 0===n?void 0:n.length)))&&areTransferInputContentsValid(e.selectedInputContainer)&&!areSampleStatusWarningsBlocking(e.outputSampleStatusState,e.outputType)&&!areSampleStatusWarningsBlocking(e.inputSampleStatusState,null)}function isConfirmTransferQuantitiesPaneComplete(e){if(!e.confirmTransferQuantitiesData||!e.confirmTransferQuantitiesData.length)return!1
if(e.inputContainable)return u.X9(e.inputContainableConcentration)&&a.default.every(e.confirmTransferQuantitiesData,(e=>e.outputContainer&&u.X9({value:u.dh(e.outputContainer.quantity.value,e.transferQuantityValue),units:e.outputContainer.quantity.units})))
{const{isValid:t,quantityErrorsAreBlocking:n}=e.selectedInputContainer?u.lV(e.selectedInputContainer,e.confirmTransferQuantitiesData):{isValid:!0,quantityErrorsAreBlocking:!1}
return(!n||t)&&e.confirmTransferQuantitiesData.every((e=>u.or(e)))}}function isConfirmConcentrationsPaneComplete(e){const{errorMessage:t,isTransferring:n,containerContents:a}=e
return!t&&!n&&null!=a&&a.every((({concentration:e})=>u.X9(e)))}function isConfirmSampleControlsPaneComplete(e){const{isTransferring:t}=e
return!t}function getCreateContainerValidationErrors(e){const{concentration:t,inputContainable:n,selectedParent:a,quantity:i}=e,{numToCreate:r=0}=e,s=_getCreateStorableValidationErrors(e,{},r);(!r||r<1)&&(s.numToCreateError="Please create at least one container.")
isBioentitySummary(n)&&null!=n.tagSchema&&("BATCH"===n.tagSchema.containableType&&(0,l.Z)()?s.contentsError="Only batches of this entity are permitted to be transferred into containers.":n.tagSchema.isContainable||(s.contentsError="Entity isn't permitted to be transferred into containers based on your organization's registry settings."))
const o=u.BI(t)
null!=o&&(s.concentrationError=o)
const c=u.BI(i)
null!=c&&(s.quantityError=c)
a.storable&&m.h(a.storable.id)&&(a.gridCells.length<r?s.parentStorableGridError="Please select a position for every container being created.":0===a.gridCells.length?s.parentStorableGridError="Please select at least one position.":a.gridCells.length>r&&(s.parentStorableGridError="Please update number of containers to match the number of positions selected."))
return s}function getCreateBoxValidationErrors(e){return _getCreateStorableValidationErrors(e)}function getCreatePlateValidationErrors(e){const t=_getCreateStorableValidationErrors(e),{selectedSchema:n,selectedContainerSchema:a}=e
m.fF(n)&&!a&&(t.containerSchemaError="Please select a schema.")
return t}function getCreateLocationValidationErrors(e){const t=_getCreateStorableValidationErrors(e,{parentStorable:!0,project:!0})
e.hasCapacityError&&(t.hasLocationCapacityError=!0)
return t}function isSpreadsheetLoading(e){return null!=e.spreadsheetFile&&!e.spreadsheetURL}function transferParamsFromCellsToNewPlate(e){const t=[],n=[]
e.forEach(((e,a)=>{const i=m.mk(e.rowIndex,e.columnIndex),r={id:a.toString(),name:`_not_yet_created_${i}`,gridCellCoordinates:i,quantity:{value:null,units:null}}
t.push({inputSampleId:e.container.id,outputContainer:r,quantity:e.container.quantity})
e.container.contents.forEach((e=>{n.push({concentration:e.concentration,containedItemId:e.containedItemId,containerId:r.id,container:r})}))}))
return{containerTransfers:t,containerContents:n}}function _containerLabel(e){return e.gridCellCoordinates||e.name}function getConfirmConcentrationsData(e,t){if(!e||!t)return null
const n={}
e.forEach((({outputContainer:e})=>{n[_containerLabel(e)]=[]}))
t.forEach((e=>{n[_containerLabel(e.container)].push(e)}))
const i=a.default.map(n,((e,t)=>({label:t,containerContents:a.default.sortBy(e,"containedItemId")})))
return a.default.sortBy(i,"label")}function getAreSolidUnitsInvolved(e,t){return Boolean(null==e?void 0:e.some((e=>u.zY(e,t))))}function getShouldCalculateConcentrations(e,t,n){return!getAreSolidUnitsInvolved(t,n)&&e}function getUpdatedConcentrationPaneState({containerTransfers:e,containerContents:t,shouldCalculateConcentrations:n,inputContainer:a,errorMessage:i}){return{confirmConcentrationsData:getConfirmConcentrationsData(e,t),errorMessage:i,areSolidUnitsInvolved:getAreSolidUnitsInvolved(e,a),shouldCalculateConcentrations:getShouldCalculateConcentrations(n,e,a)}}},508340:(e,t,n)=>{n.d(t,{Re:()=>bulkUnarchive,fn:()=>unstar,h_:()=>star,sm:()=>fetchStarred,uc:()=>bulkArchive})
var a=n(771398)
function bulkArchive(e,t){return a.ty({url:"/1/api/storable-schemas:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return a.ty({url:"/1/api/storable-schemas:bulk-unarchive",data:{ids:e}})}function star(e){return a.ty({url:"/1/api/storable-schemas:star",data:{storableSchemaIds:e}})}function unstar(e){return a.ty({url:"/1/api/storable-schemas:unstar",data:{storableSchemaIds:e}})}function fetchStarred(){return a.xA("/1/api/storable-schemas/starred")}},579430:(e,t,n)=>{n.d(t,{NL:()=>d,Xt:()=>c,YQ:()=>r,fX:()=>o,hk:()=>l,wJ:()=>s})
var a=n(256605),i=n(271359)
const r={[a.jM.BLANK]:i.Cj,[a.jM.CONTROL]:"#FFCB90",[a.jM.STANDARD]:"#D4E27E",[a.jM.SAMPLE]:"#8ACFCB"},s={[a.jM.BLANK]:{displayName:"Blank",abbreviation:null},[a.jM.CONTROL]:{displayName:"Control",abbreviation:"C"},[a.jM.STANDARD]:{displayName:"Standard",abbreviation:"St"},[a.jM.SAMPLE]:{displayName:"Sample",abbreviation:"S"}},o=[a.jM.SAMPLE,a.jM.CONTROL,a.jM.STANDARD,a.jM.BLANK]
var l
!function(e){e.MAXIMUM="MAXIMUM"
e.MINIMUM="MINIMUM"
e.POSITIVE="POSITIVE"
e.NEGATIVE="NEGATIVE"}(l||(l={}))
const c={[l.MAXIMUM]:">",[l.MINIMUM]:"<",[l.POSITIVE]:"+",[l.NEGATIVE]:""},d="NULL_SUBROLE_KEY"},108958:(e,t,n)=>{n.d(t,{Z:()=>AssayRoleTypeSymbol})
var a=n(692013),i=n(989526),r=n(256605),s=n(579430),o=n(271359)
const l={dominantBaseline:"central",textAnchor:"middle",cx:0,cy:0}
function AssayRoleTypeSymbol({radius:e,assayRole:t,label:n,cx:d,cy:u}){var m
const p=2*e,h=null!=d?d:e,E=null!=u?u:e,S=Math.min(10*(null!==(m=null==n?void 0:n.length)&&void 0!==m?m:0),p)
return i.createElement("svg",{className:(0,a.iv)(c.symbolSvg),width:p,height:p},i.createElement("g",{transform:`translate(${h},${E})`},t===r.jM.BLANK?i.createElement(i.Fragment,null,i.createElement("circle",{cx:0,cy:0,r:e,fill:o.Cj,stroke:o.Rl,strokeWidth:1}),i.createElement("line",{transform:"rotate(45)",x1:0,y1:-e,x2:0,y2:e,stroke:o.Rl,strokeWidth:1}),n&&i.createElement(i.Fragment,null,i.createElement("rect",{x:-S/2,y:-7,width:S,height:14,fill:o.Cj}),i.createElement("text",{className:(0,a.iv)(c.textLabel),fill:o.Rl,...l},n))):i.createElement(i.Fragment,null,i.createElement("circle",{cx:0,cy:0,r:e,fill:s.YQ[t]}),n&&i.createElement("text",{className:(0,a.iv)(c.textLabel),fill:o.Rl,...l},n))))}const c=a.mM.create({symbolSvg:{overflow:"visible"},textLabel:{cursor:"inherit"}})},869791:(e,t,n)=>{n.d(t,{Oy:()=>getAssayRoleGroupSymbol,UM:()=>getAssayRoleLabelText,uv:()=>getAssayRoleGroupsByAssayRoleType})
var a=n(64558),i=n(84587),r=n.n(i),s=n(531041),o=n(256605),l=n(579430),c=n(808844)
function getAssayRoleLabelText(e){var t
const n=(0,a.oA)([e.subAssayRole,e.assayRole,null===(t=e.group)||void 0===t?void 0:t.toString()])
return(0,c.kC)(n.join(" "))}function getAssayRoleGroupsByAssayRoleType(e){const t=(0,a.vM)(e,(e=>e.assayRole)),n=Object.keys(o.jM).map((e=>{var n
const i=null!==(n=t[e])&&void 0!==n?n:[]
if(0===i.length)return[e,null]
const o=(0,a.vM)(i,(e=>{var t
return null!==(t=e.subAssayRole)&&void 0!==t?t:l.NL})),c=Object.entries(o).map((([e,t])=>[e,s.default.unique(t,(e=>r()(e)))]))
return[e,(0,a.m8)(c)]}))
return(0,a.m8)(n)}function getAssayRoleGroupSymbol(e){let t=""
null!=e.subAssayRole&&l.Xt.hasOwnProperty(e.subAssayRole)&&(t+=l.Xt[e.subAssayRole])
null!=e.group&&(t+=e.group.toString())
return t.length>0?t:null}},488423:(e,t,n)=>{n.d(t,{Z:()=>BatchSearchInput})
var a=n(989526),i=n(396091),r=n(402763)
function BatchSearchInput(e){const t={context:e.context}
return a.createElement(i.Z,{autoFocus:e.autoFocus,fetchParams:t,doSearch:r.Kq,itemKey:"samples",onChange:e.onChange,onKeyDown:e.onKeyDown,placeholder:"Search for batch",isReadOnly:e.isReadOnly,searchURL:"/1/api/batches/search",selectedItems:e.selectedBatches,shouldAllowMultiple:e.shouldAllowMultiple,hideSelectedResults:e.hideSelectedResults})}BatchSearchInput.defaultProps={autoFocus:!1,isReadOnly:!1}},592383:(e,t,n)=>{n.d(t,{M:()=>entityIsContainable})
function entityIsContainable(e){return null!=e.tagSchema&&e.tagSchema.isContainable}},682122:(e,t,n)=>{n.d(t,{NA:()=>a,Zj:()=>r,bo:()=>i})
const a={COORDINATES_ORDER_BY_KEY:"coordinates_order_by_key",COORDINATES_SORT_DIRECTION:"coordinates_sort_direction"}
var i,r
!function(e){e.COORDINATES="coordinates"
e.VOLUME="volume"}(i||(i={}))
!function(e){e.ROW="row"
e.COLUMN="column"}(r||(r={}))},360680:(e,t,n)=>{n.d(t,{BR:()=>getTotalGridCapacity,Pt:()=>getSortedSelectedCells,Qc:()=>getNumAvailableGridCells,lx:()=>flattenAndFilterCells})
function flattenAndFilterCells(e){return e.flat().filter((e=>Boolean(e))).filter((e=>e.container))}function getSortedSelectedCells(e,t){if(!e)return[]
const n=t.map((({columnIndex:t,rowIndex:n})=>e.cells[n][t])).filter((e=>Boolean(e)))
n.sort(((e,t)=>e.rowIndex-t.rowIndex||e.columnIndex-t.columnIndex))
return n}function getNumAvailableGridCells(e){return e.cells.flatMap((e=>e)).filter((e=>!e)).length}function getTotalGridCapacity(e){return e.storableSchema.height*e.storableSchema.width}},49885:(e,t,n)=>{n.d(t,{Z9:()=>o,bN:()=>l,fj:()=>r,fm:()=>i})
var a=n(586874)
const i={MATRIX_INPUT:"MATRIX_INPUT",CHANGE_SUMMARY:"CHANGE_SUMMARY",SELECT_PARENT:"SELECT_PARENT"},r=[i.MATRIX_INPUT,i.CHANGE_SUMMARY,i.SELECT_PARENT]
var s
!function(e){e.CREATE="create"
e.MOVE_IN="moveIn"
e.MOVE_OUT="moveOut"
e.REPOSITION="reposition"
e.NO_CHANGE="noChange"}(s||(s={}))
const o={[s.CREATE]:{name:"Create",gridCellClassName:"gridCell-inner--createdContainer",dataTestAttrs:{key:a.Z.CREATE}},[s.MOVE_IN]:{name:"Move in",gridCellClassName:"gridCell-inner--moveInContainer",dataTestAttrs:{key:a.Z.MOVE_IN}},[s.MOVE_OUT]:{name:"Move out",gridCellClassName:"gridCell-inner--moveOutContainer",dataTestAttrs:{key:a.Z.CREATE_MOVE_OUT}},[s.REPOSITION]:{name:"Reposition",gridCellClassName:"gridCell-inner--repositionContainer",dataTestAttrs:{key:a.Z.REPOSITION}},[s.NO_CHANGE]:{name:"No change",gridCellClassName:"gridCell-inner--noChangeContainer",dataTestAttrs:{key:a.Z.NO_CHANGE}}},l=[s.CREATE,s.MOVE_IN,s.MOVE_OUT,s.REPOSITION,s.NO_CHANGE]},578766:(e,t,n)=>{n.d(t,{DZ:()=>removeParent,Hj:()=>changeContainerSource,Mx:()=>a,O_:()=>openUploadContainersFlow,Sl:()=>closeUploadContainersFlow,XW:()=>changeText,Yz:()=>goToPrev,Zm:()=>goToNext,bg:()=>validateUploadFromPlateMap,d_:()=>uploadFromPlateMap,xG:()=>selectParent,xP:()=>changeContainerSchema})
var a,i=n(989526),r=n(531041),s=n(609630),o=n(348920),l=n(372721),c=n(939092),d=n(133832),u=n(974913),m=n(386382),p=n(58498),h=n(938454),E=n(282892),S=n(953403),T=n(251658)
!function(e){e.OPEN_UPLOAD_CONTAINERS_FLOW="OPEN_UPLOAD_CONTAINERS_FLOW"
e.CLOSE_UPLOAD_CONTAINERS_FLOW="CLOSE_UPLOAD_CONTAINERS_FLOW"
e.UPLOAD_CONTAINERS_CHANGE_TEXT="UPLOAD_CONTAINERS_CHANGE_TEXT"
e.UPLOAD_CONTAINERS_CHANGE_CONTAINER_SCHEMA="UPLOAD_CONTAINERS_CHANGE_CONTAINER_SCHEMA"
e.UPLOAD_CONTAINERS_CHANGE_CONTAINER_SOURCE="UPLOAD_CONTAINERS_CHANGE_CONTAINER_SOURCE"
e.UPLOAD_CONTAINERS_FLOW_GO_TO_NEXT="UPLOAD_CONTAINERS_FLOW_GO_TO_NEXT"
e.UPLOAD_CONTAINERS_FLOW_GO_TO_PREV="UPLOAD_CONTAINERS_FLOW_GO_TO_PREV"
e.VALIDATE_UPLOAD_CONTAINERS_STARTED="VALIDATE_UPLOAD_CONTAINERS_STARTED"
e.VALIDATE_UPLOAD_CONTAINERS_COMPLETED="VALIDATE_UPLOAD_CONTAINERS_COMPLETED"
e.VALIDATE_UPLOAD_CONTAINERS_FAILED="VALIDATE_UPLOAD_CONTAINERS_FAILED"
e.UPLOAD_CONTAINERS_STARTED="UPLOAD_CONTAINERS_STARTED"
e.UPLOAD_CONTAINERS_COMPLETED="UPLOAD_CONTAINERS_COMPLETED"
e.UPLOAD_CONTAINERS_FAILED="UPLOAD_CONTAINERS_FAILED"
e.UPLOAD_CONTAINERS_SELECT_PARENT="UPLOAD_CONTAINERS_SELECT_PARENT"
e.UPLOAD_CONTAINERS_REMOVE_PARENT="UPLOAD_CONTAINERS_REMOVE_PARENT"}(a||(a={}))
function openUploadContainersFlow(){return{type:a.OPEN_UPLOAD_CONTAINERS_FLOW}}function closeUploadContainersFlow(){return{type:a.CLOSE_UPLOAD_CONTAINERS_FLOW}}function changeText(e){return{type:a.UPLOAD_CONTAINERS_CHANGE_TEXT,rawText:e}}function changeContainerSchema(e){return{type:a.UPLOAD_CONTAINERS_CHANGE_CONTAINER_SCHEMA,selectedContainerSchemaId:e}}function changeContainerSource(e){return{type:a.UPLOAD_CONTAINERS_CHANGE_CONTAINER_SOURCE,selectedContainerSourceId:e}}function goToNext(){return{type:a.UPLOAD_CONTAINERS_FLOW_GO_TO_NEXT}}function goToPrev(){return{type:a.UPLOAD_CONTAINERS_FLOW_GO_TO_PREV}}function validateUploadContainersFailed({inputTextError:e,schemaError:t,projectError:n}){return{type:a.VALIDATE_UPLOAD_CONTAINERS_FAILED,inputTextError:e,schemaError:t,projectError:n}}function validateUploadFromPlateMap(e,t){return async(n,s)=>{const{rawText:m,selectedContainerSchemaId:h,selectedContainerSourceId:E}=s().ui.samples.uploadContainersFlow,g=m?null:"Please enter text.",f=h?null:"Please select a container schema.",I=o.ZP.ENABLE_PROJECTS_REQUIRED_FOR_NON_LOCATION_STORABLES&&E===t?"Please select a project.":void 0
if(g||f||I)n(validateUploadContainersFailed({inputTextError:g,schemaError:f,projectError:I}))
else{const t=(0,T.Cb)(m)
t.name=l.AF
const s=new File([t],t.name,{type:t.type})
n(function validateUploadContainersStarted(){return{type:a.VALIDATE_UPLOAD_CONTAINERS_STARTED}}())
try{const t=await S.ws(s),{changes:o,errors:u,gridPreview:m}=await p.e3(e,h,E,d.bB,t,d.TP.PLATE_MAP),T=c.EB(u,{[l.JY.USE_EXISTING_CONTAINERS]:!0,[l.JY.USE_NON_EMPTY_CONTAINERS]:!0,[l.JY.USE_SAMPLES_WITH_STATUS_WARNINGS]:!0}),g=(0,r.default)([...T.values()]).flatten().filter((e=>"error"===e.icon)).filter((e=>!e.resolved)).map((e=>e.message))
if(g.length>0)n(validateUploadContainersFailed({inputTextError:g.map((e=>i.createElement("div",null,e)))}))
else{n(function validateUploadContainersCompleted(e,t,n){return{type:a.VALIDATE_UPLOAD_CONTAINERS_COMPLETED,changes:e,gridPreview:t,spreadsheetUrl:n}}(o,m,t))
n(goToNext())}}catch(e){const t=u.ZP.getFriendlyError(e)
if(!t){n(validateUploadContainersFailed({}))
throw e}n(validateUploadContainersFailed({inputTextError:t}))}}}}function uploadContainersFromSpreadsheetWithDataMods(e,t,n,i,r,l,c){const E=c.moveOut+c.moveIn+c.reposition;(0,s.Kz)({changeSummary:E>0?(0,m.P_)({apiIds:[],itemCounts:{container:E},action:m.wV.MOVE}):"",onRequestClose:()=>{},onRequestSubmit:()=>{!function uploadContainersFromSpreadsheet(e,t,n,i,r,s){e(function uploadContainersStarted(){return{type:a.UPLOAD_CONTAINERS_STARTED}}())
p.U0(t,n,i,d.bB,r,d.TP.PLATE_MAP,s).then((()=>{u.ZP.success("Successfully set containers");(0,h.invalidateGrid)(t)
e(function uploadContainersCompleted(){return{type:a.UPLOAD_CONTAINERS_COMPLETED}}())})).fail((t=>{u.ZP.notifyError(t)
e(function uploadContainersFailed(){return{type:a.UPLOAD_CONTAINERS_FAILED}}())}))}(e,t,n,i,r,l)}},o.ZP.INVENTORY_ENABLE_DATA_MOD_REASONS&&E>0,{module:"SAMPLES",actionOrigin:"inventory_registry_search_ui",modifiedAction:m.wV.MOVE,numModifiedTotalItems:E,entryId:null})}function uploadFromPlateMap(){return(e,t)=>{const{gridPreview:n,changeStats:a,selectedContainerSchemaId:i,selectedContainerSourceId:r,selectedParent:s,spreadsheetUrl:o}=t().ui.samples.uploadContainersFlow
uploadContainersFromSpreadsheetWithDataMods(e,n.id,i,r,o,(0,E.YY)(a.moveOut,s),a)}}function selectParent(e){return{type:a.UPLOAD_CONTAINERS_SELECT_PARENT,selectedParent:e}}function removeParent(){return{type:a.UPLOAD_CONTAINERS_REMOVE_PARENT}}},627287:(e,t,n)=>{n.d(t,{V7:()=>translateToLocationInfo,gn:()=>s,ur:()=>translateFromLocationInfo})
var a=n(769784),i=n(91092),r=n(697134)
const s=a.Ps`
  query LocationViewQuery($id: StrictString!) @skipAudit @engComponent(name: INVENTORY) {
    location(id: $id) {
      ... on LocationNode {
        id
        barcode {
          value
        }
        url # LocationFileState needs this
        name
        permissions {
          readable
          writable
          appendable
          admin
          archivable
          unarchivable
          canEditNamesAndBarcodes
        }
        tags: tagsJson
        creator: creatorJson
        createdAt
        archiveRecord {
          purpose
        }
        parentStorable {
          ... on StorableInterface {
            id
            name
            archiveRecord {
              purpose
            }
            parentStorable {
              ... on StorableInterface {
                id
              }
              ...InaccessibleInfoGraphQL
            }
            storableSchema {
              id
              registry {
                id
              }
            }
          }
          ...InaccessibleInfoGraphQL
        }
        storableSchema {
          id
          name
          registry {
            id
          }
          archiveRecord {
            purpose
          }
        }
        ancestry {
          ... on StorableInterface {
            id
            name
            storableSchema {
              id
              registry {
                id
              }
            }
          }
          ...InaccessibleInfoGraphQL
        }
        allowsNonLocationChildren
        allowedChildStorableSchemaApiIds
        capacity
        occupiedCapacity
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,i.f)("InaccessibleInfo").fragment}
`
function translateToLocationInfo(e){var t,n,a
return{...e,barcode:null!==(n=null===(t=e.barcode)||void 0===t?void 0:t.value)&&void 0!==n?n:null,storableSchema:{...e.storableSchema,registryId:e.storableSchema.registry.id},parentStorable:null==e.parentStorable||(0,r.CZ)(e.parentStorable)?e.parentStorable:{...e.parentStorable,storableSchema:{...e.parentStorable.storableSchema,registryId:e.parentStorable.storableSchema.registry.id}},permissions:{...e.permissions,canEditNamesAndBarcodes:null!==(a=e.permissions.canEditNamesAndBarcodes)&&void 0!==a?a:void 0}}}function translateFromLocationInfo(e){var t,n,a
return{...e,barcode:e.barcode?{__typename:"BarcodeNode",value:e.barcode}:null,permissions:{__typename:"PermissionsNode",...e.permissions,archivable:null!==(t=e.permissions.archivable)&&void 0!==t?t:null,unarchivable:null!==(n=e.permissions.unarchivable)&&void 0!==n?n:null,canEditNamesAndBarcodes:null!==(a=e.permissions.canEditNamesAndBarcodes)&&void 0!==a?a:null}}}},329889:(e,t,n)=>{n.d(t,{Z:()=>MulticolorStripedCircle})
var a=n(692013),i=n(989526),r=n(178570),s=n(129270),o=n(271359),l=n(36424)
function Label({label:e,cx:t,cy:n,fill:r}){return i.createElement("g",{transform:`translate(${t},${n})`},i.createElement("text",{className:(0,a.iv)(c.text),fill:r,dominantBaseline:"central",textAnchor:"middle",cx:0,cy:0},e))}function MulticolorStripedCircle({cx:e,cy:t,radius:n,colors:s,iconOverride:d,labelOverride:u,fillOpacity:m}){const p=2*n,h=p/s.length,E=e-n,S=t-n,T=(0,r.Z)()
return i.createElement("svg",{width:p,height:p,className:(0,a.iv)(c.svg)},s.length<=4&&i.createElement("g",null,i.createElement("defs",null,i.createElement("clipPath",{id:`clipping-circle-${T}`},i.createElement("circle",{cx:e,cy:t,r:n}))),s.map(((e,t)=>i.createElement("rect",{x:E,y:S+t*h,width:p,height:h,fill:e,key:t,clipPath:`url(#clipping-circle-${T})`,fillOpacity:null!=m?m:1}))),null!=u&&i.createElement(Label,{label:u,cx:e,cy:t,fill:null!=m&&m>.5?o.Cj:o.Rl})),s.length>4&&i.createElement("g",null,i.createElement("circle",{cx:e,cy:t,r:n,fill:o.tN,stroke:o.Rl,strokeWidth:1}),null==u?i.createElement("foreignObject",{height:p,width:p,x:E,y:S},i.createElement("div",{className:(0,a.iv)(c.stripeCountFlexWrapper)},i.createElement(l.Z,{icon:null!=d?d:"flask",className:(0,a.iv)(c.stripeCountIcon)}),i.createElement("span",{className:(0,a.iv)(c.stripeCountText)},s.length))):i.createElement(Label,{label:u,cx:e,cy:t,fill:o.Cj})))}const c=a.mM.create({svg:{overflow:"visible"},text:{cursor:"inherit"},stripeCountFlexWrapper:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",color:o.Rl},stripeCountIcon:{height:"9px",marginRight:"2px"},stripeCountText:{...s.RC,lineHeight:1,fontWeight:s.KB}})},166115:(e,t,n)=>{n.d(t,{$d:()=>c,MB:()=>l,W2:()=>a,_i:()=>i,c0:()=>m,fN:()=>d,hg:()=>p,iU:()=>u,m0:()=>s,nq:()=>o,vD:()=>h})
var a,i,r=n(271359)
!function(e){e.CONTAINER="CONTAINER"
e.BIOENTITY="BIOENTITY"}(a||(a={}))
!function(e){e.WELL_ROLE="WELL_ROLE"
e.REAGENT="REAGENT"
e.SCHEMA_FIELD_TEXT="SCHEMA_FIELD_TEXT"
e.SCHEMA_FIELD_NUMBER="SCHEMA_FIELD_NUMBER"
e.SCHEMA_FIELD_SELECTOR="SCHEMA_FIELD_SELECTOR"}(i||(i={}))
const s="WELL_ROLE_ATTRIBUTE_SENTINEL",o="CONTENTS_ATTRIBUTE_SENTINEL"
var l,c
!function(e){e.SPECIFY_GROUP="SPECIFY_GROUP"
e.PATTERN="PATTERN"}(l||(l={}))
!function(e){e.DOWN="DOWN"
e.RIGHT="RIGHT"}(c||(c={}))
const d={[c.DOWN]:{icon:"arrow-down",name:"Down"},[c.RIGHT]:{icon:"arrow-right",name:"Right"}},u={startingGroup:1,fillDirection:c.DOWN,replicates:1,replicateDirection:c.RIGHT},m=10,p=r.Ej,h=["#FC9F35","#FF475A","#ACDA11","#0BCAB5","#FF949F","#5293FF","#FBC2E4","#F8D795","#7387CF","#B5C5FF","#57AFC2","#F895D0","#90DED6","#E5BFEE","#4BADD7","#FF7280","#57C887","#0C9687","#FFCF52","#6BA1FF","#FBC2C2","#CD95F8","#F9B93C","#8DB800","#C2EAFB"]},319012:(e,t,n)=>{n.d(t,{BU:()=>applyEditToSelected,cT:()=>applySchemaTagEditToSelected,pK:()=>createAssignmentGroupsForAttribute,h$:()=>fetchDropdownOptionsForSelector,Lq:()=>getColor,BV:()=>getDisplayLayerAttributeKey,zG:()=>getDisplayLayerForAttribute,po:()=>getDisplayPlateMap,yy:()=>getFlattenedWellIndex,oP:()=>getGroupIdsForReagent,HL:()=>getGroupIdsForReagents,Cv:()=>getLegendItems,XG:()=>getPlateMapWithPatternPreview,Xn:()=>getTextSchemaValueGroupId,r9:()=>getWellIndicesBetweenPositions,X1:()=>getWellPositionFromIndex})
var a=n(64558),i=n(512902),r=n(989526),s=n(531041),o=n(681896),l=n(579430),c=n(108958),d=n(869791),u=n(329889),m=n(166115),p=n(769784),h=n(91092)
const E=p.Ps`
  query SchemaSelectorsQuery($includeArchived: StrictBoolean!) @skipAudit @engComponent(name: INVENTORY) {
    schemaFieldSelectors(includeArchived: $includeArchived) {
      ...SchemaFieldSelectorGraphQL
    }
  }
  ${(0,h.f)("SchemaFieldSelector").fragment}
`
var S=n(497790),T=n(26431),g=n(567e3)
function getFlattenedWellIndex(e,t,n){return n.numColumns*e+t}function getWellPositionFromIndex(e,t){return{row:Math.floor(e/t.numColumns),column:e%t.numColumns}}function getWellIndicesBetweenPositions(e,t,n){const a=[]
for(let i=Math.min(e.row,t.row);i<=Math.max(e.row,t.row);i++)for(let r=Math.min(e.column,t.column);r<=Math.max(e.column,t.column);r++)a.push(getFlattenedWellIndex(i,r,n))
return a}function*wellPositionSelectionIterator(e,t,n){if(n===m.$d.DOWN)for(let n=e.column;n<=t.column;n++)for(let a=e.row;a<=t.row;a++)yield{row:a,column:n}
else for(let n=e.row;n<=t.row;n++)for(let a=e.column;a<=t.column;a++)yield{row:n,column:a}}function*getColor(e){const t=Object.values(e).map((e=>e.color)),n=new Set(t)
let a
for(;;){if(0===n.size)a=0
else if(n.size<m.vD.length){a=null!=a?a:0
for(;n.has(m.vD[a]);)a=a===m.vD.length-1?0:a+1}else if(null==a){const e=t.reduce(((e,t)=>{Object.keys(e).includes(t)?e[t]++:e[t]=1
return e}),{})
let n="",i=Number.MAX_VALUE
for(const[t,a]of Object.entries(e))if(a<i){n=t
i=a}a=m.vD.findIndex((e=>e===n))}else a=a===m.vD.length-1?0:a+1
const e=m.vD[a]
n.add(e)
yield e}}function getTextSchemaValueGroupId(e,t){if(null==e)return null
let n=e
null!=t&&t.length>0&&(n+=`-${t}`)
return n}function getGroupIdsForReagent(e){return e.type===m.W2.BIOENTITY||0===e.contents.length?new Set([e.groupId]):new Set(e.contents.map((e=>e.groupId)))}function getGroupIdsForReagents(e){const t=new Set
for(const n of e){const e=getGroupIdsForReagent(n)
for(const n of e)t.add(n)}return t}function getMinMaxForNumberSchemaField(e,t,n){const a=t.fieldType===S.FieldType.INTEGER?"integerValue":"floatValue",i=e.wells.map((({schemaTags:e})=>{var t
return null===(t=e[n])||void 0===t?void 0:t[a]})).filter((e=>null!=e))
if(0===i.length)return null
let r=0,s=0
if(1===i.length){const e=i[0]
e>0?s=e:r=e}else{r=Math.min(...i)
s=Math.max(...i)}return{minValue:r,maxValue:s}}function getDisplayPlateMap(e,t,n,i){const r=getDisplayLayerAttributeKey(i)
switch(e){case m._i.REAGENT:{const e=function getReagentDisplayWells(e,t){return e.wells.map((e=>{if(0===e.reagents.length)return e
let n=null
const a=e.reagents.map((e=>e.label)).filter((e=>null!=e))
a.length>0&&a.every((e=>e===a[0]))&&(n=`${a[0]}`)
const i={colors:[],label:n},r=getGroupIdsForReagents(e.reagents)
i.colors=[...r].map((e=>t[e].color))
return{...e,displayInfo:i}}))}(t,n)
return{...t,wells:e}}case m._i.WELL_ROLE:{const e=function getWellRoleDisplayWells(e){const t=(0,d.uv)((0,a.oA)(e.wells.map((e=>e.role))))
return e.wells.map((e=>{var n,a,i
const{role:r}=e
let s={colors:[],label:null}
if(null==r)return{...e,displayInfo:null}
const o=null!==(n=r.subAssayRole)&&void 0!==n?n:l.NL
s=(null!==(i=null===(a=t[r.assayRole])||void 0===a?void 0:a[o])&&void 0!==i?i:[]).length<=1?{...s,label:(0,d.Oy)({...r,group:null})}:{...s,label:(0,d.Oy)(r)}
return{...e,displayInfo:s}}))}(t)
return{size:t.size,wells:e}}case m._i.SCHEMA_FIELD_TEXT:{const e=function getTextSchemaTagDisplayWells(e,t,n){return e.wells.map((e=>{var a,i,r
const s=getTextSchemaValueGroupId(null===(a=e.schemaTags[n])||void 0===a?void 0:a.value,null===(i=e.schemaTags[n])||void 0===i?void 0:i.url)
if(null==s||""===s)return e
const o=null===(r=t[s])||void 0===r?void 0:r.color,l={colors:o?[o]:[],label:null}
return{...e,displayInfo:l}}))}(t,n,r)
return{size:t.size,wells:e}}case m._i.SCHEMA_FIELD_SELECTOR:{const e=function getSelectorSchemaTagDisplayWells(e,t,n){return e.wells.map((e=>{var a,i
const r=null!==(i=null===(a=e.schemaTags[n])||void 0===a?void 0:a.schemaFieldSelectorOptionIds)&&void 0!==i?i:[]
if(0===r.length)return e
const s=r.map((e=>{var n
return null===(n=t[e])||void 0===n?void 0:n.color})),o={colors:(0,T.Z)(s),label:null}
return{...e,displayInfo:o}}))}(t,n,r)
return{size:t.size,wells:e}}case m._i.SCHEMA_FIELD_NUMBER:{const e=function getNumberSchemaTagDisplayWells(e,t,n){const a=getMinMaxForNumberSchemaField(e,t,n)
if(null==a)return e.wells
const{minValue:i,maxValue:r}=a,s=t.fieldType===S.FieldType.INTEGER?"integerValue":"floatValue",o=r-i
return e.wells.map((t=>{var a,r
const l=null!==(r=null===(a=t.schemaTags[n])||void 0===a?void 0:a[s])&&void 0!==r?r:null
if(null==l)return t
let c=1
0!==o&&(c=(l-i)/o*.9+.1)
const d=t.schemaTags[n].value,u=d.replace(".","").length>3||e.size.numRows>8?null:d,p={colors:[m.hg],label:u,opacity:c}
return{...t,displayInfo:p}}))}(t,i,r)
return{size:t.size,wells:e}}default:return t}}function getPlateMapWithWellEdits(e,t){return(0,i.ZP)(e,(n=>{Object.entries(t).forEach((([t,a])=>{const i=parseInt(t,10)
n.wells[i]={...e.wells[i],...a}}))}))}function applyEditToSelected(e,t,n){return getPlateMapWithWellEdits(e,(0,a.m8)([...n].map((e=>[e,t]))))}function applySchemaTagEditToSelected(e,t,n,a){return(0,i.ZP)(e,(e=>{[...a].forEach((a=>{const i=e.wells[a].schemaTags[t.systemName]
e.wells[a].schemaTags[t.systemName]={...i,...n}}))}))}function getPlateMapWithPatternPreview(e,t,n,a){const{start:i,end:r}=function getRectangularSelectionStartEnd(e,t){const n=[...e].map((e=>getWellPositionFromIndex(e,t))),a=(0,g.Z)(n,["row"]),i=(0,g.Z)(n,["column"]),r=e.size-1
return{start:{row:a[0].row,column:i[0].column},end:{row:a[r].row,column:i[r].column}}}(a,e.size),s=function*groupPatternIterator(e,t,n){const a=t.row-e.row+1,i=t.column-e.column+1
if(n.fillDirection===n.replicateDirection){let e=1,t=n.startingGroup
for(let r=0;r<a*i;r++){yield t
if(e===n.replicates){e=1
t++}else e++}}else{const e=n.fillDirection===m.$d.DOWN?a:i,t=n.replicateDirection===m.$d.DOWN?a:i
let r=1,s=n.startingGroup
for(let a=0;a<t;a++){for(let t=0;t<e;t++)yield s+t
if(r===n.replicates){s+=e
r=1}else r++}}}(i,r,n),o=[]
for(const{row:l,column:c}of wellPositionSelectionIterator(i,r,n.fillDirection)){const n=getFlattenedWellIndex(l,c,e.size),i=s.next().value
a.has(n)&&(o[n]=t(i,n))}return getPlateMapWithWellEdits(e,o)}function getLegendItems(e,t,n,i){const o=getDisplayLayerAttributeKey(i)
switch(t){case m._i.REAGENT:return function getLegendItemsForReagent(e,t){var n
const a={}
for(const t of e.wells){const e=getGroupIdsForReagents(t.reagents)
for(const t of e){null!==(n=a[t])&&void 0!==n||(a[t]=0)
a[t]++}}const i=[]
for(const e of Object.keys(a)){const n=t[e]
i.push({label:n.name,icon:r.createElement(u.Z,{cx:m.c0,cy:m.c0,radius:m.c0,colors:[n.color]}),count:a[e]})}return i}(e,n)
case m._i.WELL_ROLE:return function getLegendItemsForWellRole(e){const t=(0,d.uv)((0,a.oA)(e.wells.map((e=>e.role)))),n=[]
for(const e of l.fX){const a=t[e]
if(null!=a)for(const[t,i]of Object.entries(a)){const a=i.length
if(0===a)continue
const s={assayRole:e,subAssayRole:t===l.NL?null:t,group:null},o=(0,d.Oy)(s),u=(0,d.UM)(s)
n.push({label:u,icon:r.createElement(c.Z,{radius:m.c0,assayRole:e,label:o}),count:a})}}return n}(e)
case m._i.SCHEMA_FIELD_TEXT:return function getLegendItemsForTextSchemaFields(e,t,n){const a=s.default.countBy(e.wells,(({schemaTags:e})=>{var t,a
return getTextSchemaValueGroupId(null===(t=e[n])||void 0===t?void 0:t.value,null===(a=e[n])||void 0===a?void 0:a.url)}))
return Object.values(t).filter((e=>null!=a[e.id]&&a[e.id]>0)).map((e=>({label:e.name,icon:r.createElement(u.Z,{radius:m.c0,cx:m.c0,cy:m.c0,colors:[e.color]}),count:a[e.id]})))}(e,n,o)
case m._i.SCHEMA_FIELD_SELECTOR:return function getLegendItemsForSelectorSchemaFields(e,t,n){const a=e.wells.flatMap((e=>{var t,a
return null!==(a=null===(t=e.schemaTags[n])||void 0===t?void 0:t.schemaFieldSelectorOptionIds)&&void 0!==a?a:[]})),i=s.default.countBy(a,(e=>e))
return Object.values(t).map((e=>{var t
return{label:e.name,icon:r.createElement(u.Z,{radius:m.c0,cx:m.c0,cy:m.c0,colors:[e.color]}),count:null!==(t=i[e.id])&&void 0!==t?t:0}})).filter((({count:e})=>e>0))}(e,n,o)
case m._i.SCHEMA_FIELD_NUMBER:return function getLegendItemsForNumberSchemaFields(e,t,n){const a=getMinMaxForNumberSchemaField(e,t,n)
return null==a?[]:[{label:a.minValue.toString(),icon:null,count:0},{label:a.maxValue.toString(),icon:null,count:0}]}(e,i,o)
default:return[]}}function getDisplayLayerAttributeKey(e){return"string"==typeof e?e:e.systemName}const f={[S.FieldType.TEXT]:m._i.SCHEMA_FIELD_TEXT,[S.FieldType.INTEGER]:m._i.SCHEMA_FIELD_NUMBER,[S.FieldType.FLOAT]:m._i.SCHEMA_FIELD_NUMBER,[S.FieldType.SELECTOR]:m._i.SCHEMA_FIELD_SELECTOR}
function getDisplayLayerForAttribute(e){return e===m.m0?m._i.WELL_ROLE:e===m.nq?m._i.REAGENT:f[e.fieldType]}async function createAssignmentGroupsForAttribute(e,t){if("string"==typeof t)return{}
const n=getColor({})
if(t.fieldType===S.FieldType.TEXT){const a=getDisplayLayerAttributeKey(t),i=e.wells.filter((({schemaTags:e})=>{var t
return null!=(null===(t=e[a])||void 0===t?void 0:t.value)&&""!==e[a].value})).map((({schemaTags:e})=>{var t
return{text:e[a].value,url:null!==(t=e[a].url)&&void 0!==t?t:""}})),r={}
for(const e of i){const t=getTextSchemaValueGroupId(e.text,e.url)
null==r[t]&&(r[t]={id:t,color:n.next().value,name:e.text,value:e})}return r}if(t.fieldType===S.FieldType.SELECTOR){const e=(await fetchDropdownOptionsForSelector(t.schemaFieldSelectorId)).map((e=>[e.id,{id:e.id,color:n.next().value,name:e.name,value:e.id}]))
return(0,a.m8)(e)}return{}}async function fetchDropdownOptionsForSelector(e){const{schemaFieldSelectors:t}=await(0,o.doQuerySafe)({query:E},{variables:{includeArchived:!1}}),n=t.find((t=>t.id===e))
return(0,g.Z)(n.allSchemaFieldSelectorOptions,[({archiveRecord:e})=>null==e?0:1])}},824431:(e,t,n)=>{n.d(t,{L:()=>a,Z:()=>FillPlateTransferStructuredTableAdapter})
var a,i=n(647517),r=n(269062),s=n(1456),o=n(453580),l=n(783851),c=n(851422)
!function(e){e.PLATE="PLATE"
e.WELL="WELL"}(a||(a={}))
class FillPlateTransferStructuredTableAdapter extends r.Z{static getAdapter(){return(0,s.getStructuredTableAdapters)().FILL_PLATE_TRANSFER}getBlankRowMetadata(e){return{schemaGroupingId:""}}getDisplayName(e){return"Transfer"}injectFrontEndMetadata({column:e,tableMetadata:t}){if(e.columnType===c.TableColumnType.UNIT_SELECTOR){if(e.columnGroup===o.Og.FILL_PLATE_SOURCE_CONCENTRATION)return{...e,frontEndMetadata:{acceptedUnits:i.fO}}
if(e.columnGroup===o.Og.FILL_PLATE_TRANSFER_QUANTITY)return{...e,frontEndMetadata:{acceptedUnits:i.J3}}
if(e.columnGroup===o.Og.FILL_PLATE_TARGET_CONCENTRATION)return{...e,frontEndMetadata:{acceptedUnits:i.fO}}}return e}_getAllSupportedColumns(){return[(0,l.Ao)({name:"",columnType:c.TableColumnType.FILL_PLATE_TRANSFER_SOURCE_ICON,isReadOnly:!0,width:32}),(0,l.Ao)({name:"Source",columnType:c.TableColumnType.FILL_PLATE_TRANSFER_SOURCE_SCHEMA_CHIP,isReadOnly:!0}),(0,l.Ao)({name:"Source Concentration",columnType:c.TableColumnType.FILL_PLATE_MEASUREMENT_AMOUNT,columnGroup:o.Og.FILL_PLATE_SOURCE_CONCENTRATION,isReadOnly:!0}),(0,l.Ao)({name:"Source Concentration Units",columnType:c.TableColumnType.STRING,columnGroup:o.Og.FILL_PLATE_SOURCE_CONCENTRATION,isReadOnly:!0}),(0,l.Ao)({name:"Transfer Quantity",columnType:c.TableColumnType.FILL_PLATE_MEASUREMENT_AMOUNT,columnGroup:o.Og.FILL_PLATE_TRANSFER_QUANTITY}),(0,l.Ao)({name:"Quantity Units",columnType:c.TableColumnType.UNIT_SELECTOR,columnGroup:o.Og.FILL_PLATE_TRANSFER_QUANTITY}),(0,l.Ao)({name:"Final Concentration",columnType:c.TableColumnType.FILL_PLATE_MEASUREMENT_AMOUNT,columnGroup:o.Og.FILL_PLATE_TARGET_CONCENTRATION}),(0,l.Ao)({name:"Final Concentration Units",columnType:c.TableColumnType.UNIT_SELECTOR,columnGroup:o.Og.FILL_PLATE_TARGET_CONCENTRATION})]}toTable(e){return{...super.toTable(e),allowAddRows:!1,allowColumnEdits:!1,allowNoRows:!0,allowRowRemoval:!1,lockedDims:!0}}}},599685:(e,t,n)=>{n.d(t,{m:()=>a,w:()=>i})
const a="Multiple values"
var i
!function(e){e.SOURCE_ICON="SOURCE_ICON"
e.SOURCE="SOURCE"
e.SOURCE_CONCENTRATION="SOURCE_CONCENTRATION"
e.SOURCE_CONCENTRATION_UNIT="SOURCE_CONCENTRATION_UNIT"
e.TRANSFER_QUANTITY="TRANSFER_QUANTITY"
e.TRANSFER_QUANTITY_UNIT="TRANSFER_QUANTITY_UNIT"
e.FINAL_CONCENTRATION="FINAL_CONCENTRATION"
e.FINAL_CONCENTRATION_UNIT="FINAL_CONCENTRATION_UNIT"}(i||(i={}))},525999:(e,t,n)=>{n.d(t,{Cf:()=>AncestralStorables,ZP:()=>T})
var a=n(602652),i=n.n(a),r=n(989526),s=n(95537),o=n(318535),l=n(634489),c=n(133832),d=n(377249),u=n(726456),m=n(94222),p=n(795110),h=n(868710),E=n(36424),S=n(379346)
class AncestralStorablesConnector extends l.C{constructor(){super(...arguments)
this.stores=[p.Z]}enhanceProps(){u.Z.requestFetch(this.props.storableId)
const e=this.storableStore().getStorableSummaryExtras()
if(this.props.storableId&&e.ancestralStorableIdsByStorableId&&e.ancestralStorableIdsByStorableId[this.props.storableId]&&e.gridCellsByContainerId){const t=e.ancestralStorableIdsByStorableId[this.props.storableId]
return{ancestralStorableIds:t,storableOrInaccessibleInfoById:this.getOrFetchMultipleMaybeInaccessibleRequired(d.V.STORABLE_SUMMARY,t),gridCell:e.gridCellsByContainerId[this.props.storableId]}}return{ancestralStorableIds:null,storableOrInaccessibleInfoById:null,gridCell:null}}}function AncestralStorables({ancestralStorableIds:e,storableOrInaccessibleInfoById:t,className:n,gridCell:a,noLocationText:i,showGridCell:o,truncate:l}){if(null==e||null==t)return null
if(e.some((e=>(0,s.Eh)(t[e]))))return r.createElement("span",{className:"u-faded"},"No access")
const d=e.map((e=>t[e]))
if(i&&1===d.length)return r.createElement("span",{className:"u-faded"},i)
const u=d.slice(1).reverse().map((({name:e})=>e)),p=u.slice(u.length-2)
if(null!=a&&o){const e=d[1],t=S.ZP.isBox(e.id)?c.tQ.BOX:c.tQ.PLATE,n=(0,m.vZ)({gridType:t,...a,width:e.storableSchema.width})
u.push(n)
p.push(n)}const T=u.join(" / ")
return l&&u.length>p.length?r.createElement(h.ZP,{title:T,placement:h.TQ.LEFT},r.createElement("span",{className:"breadcrumbs-more",key:"breadcrumbs"},r.createElement(E.Z,{icon:"ellipsis"}))," / ",r.createElement("span",{className:n},p.join(" / "))):r.createElement(h.ZP,{title:T,placement:h.TQ.LEFT},r.createElement("span",{className:n},T))}AncestralStorables.propTypes={className:i().string,noLocationText:i().string.isRequired,storableId:i().string.isRequired,ancestralStorableIds:i().arrayOf(i().string.isRequired),storableOrInaccessibleInfoById:i().objectOf(i().oneOfType([c.df,o.G])),gridCell:c.JF,showGridCell:i().bool.isRequired,truncate:i().bool}
const T=AncestralStorablesConnector.connect(AncestralStorables)},57214:(e,t,n)=>{n.d(t,{H4:()=>ErrorBanner,Pm:()=>d,Sd:()=>isUnreadableSampleError,XY:()=>dispatchInaccessibleError,cG:()=>dispatchUnreadableSampleError})
var a=n(767807),i=n.n(a),r=n(602652),s=n(989526),o=n(787004),l=n(947730),c=n(974913)
function isUnreadableSampleError(e){const t=e.responseJSON||e
return Boolean(t.unreadableSampleId)}function dispatchUnreadableSampleError(e,t){l.Z.dispatch({actionType:o.GRk,errorMessage:c.ZP.getFriendlyError(t),storableId:e})}function dispatchInaccessibleError(e,t){l.Z.dispatch({actionType:o.opY,info:t.responseJSON,storableId:e})}const d={getInitialState:()=>({errorMessages:{},inaccessibleInfos:{}}),handleAction(e,t){switch(t.actionType){case o.GRk:return i()(e,{errorMessages:{$merge:{[t.storableId]:t.errorMessage}}})
case o.opY:return i()(e,{inaccessibleInfos:{$merge:{[t.storableId]:t.info}}})
default:return e}},getErrorMessage:(e,t)=>e.errorMessages[t],getInaccessibleInfo:(e,t)=>e.inaccessibleInfos[t]||null}
function ErrorBanner(e){return s.createElement("div",{className:"alert alert-danger u-spacing"},e.message)}ErrorBanner.propTypes={message:r.string.isRequired}},730981:(e,t,n)=>{n.d(t,{Ch:()=>c,Ju:()=>i.Ju,lV:()=>l,lZ:()=>d,nF:()=>h,qZ:()=>p,wv:()=>u,yA:()=>m,zx:()=>o})
var a=n(602652),i=(n(459830),n(256605)),r=n(497790)
n(379346)
const s={...{id:a.string.isRequired,name:a.string.isRequired,prefix:a.string.isRequired,registryId:a.string},fields:a.arrayOf(r.SCHEMA_FIELD_SHAPE),sqlIdentifier:a.string},o=a.shape(s),l=a.shape(s),c={FIXED_PLATE:i.Ju.FIXED_PLATE,MATRIX_PLATE:i.Ju.MATRIX_PLATE},d={FIXED_PLATE:"Fixed Plate",MATRIX_PLATE:"Matrix Plate"},u=a.shape({...s,containerSchemaId:a.string,height:a.number.isRequired,plateSchemaType:a.string,width:a.number.isRequired}),m=a.shape(s),p=(a.shape({containerSchemas:a.arrayOf(l),boxSchemas:a.arrayOf(u),plateSchemas:a.arrayOf(u),locationSchemas:a.arrayOf(m)}),[[16,24],[8,12],[6,8],[4,6],[3,4],[2,3]])
var h
!function(e){e.GRID="GRID"
e.LOCATION="LOCATION"
e.GRID_OR_LOCATION="GRID_OR_LOCATION"
e.PLATE="PLATE"
e.MATRIX_PLATE="MATRIX_PLATE"
e.BOX="BOX"}(h||(h={}))},826516:(e,t,n)=>{n.d(t,{Hn:()=>StorableSourceSelectorWithTitle,p9:()=>StorableSourceFormGroup})
var a=n(989526),i=n(348920),r=n(634489),s=n(776065),o=n(204026),l=n(125440),c=n(778095),d=n(102176),u=n(10708),m=n(920672),p=n(73374),h=n(801455)
class StorableSourceSelectorConnector extends r.C{constructor(){super(...arguments)
this.stores=[c.Z]}enhanceProps(){const e=this.navStore().getSources()
return{sources:e||[],areSourcesLoading:Boolean(null==e)}}}class StorableSourceSelector extends a.Component{constructor(){super(...arguments)
this._handleFolderChange=e=>{const t=function rootFolderIdToSourceId(e,t){const n=e.find((e=>e.rootFolder.api_identifier===t))
return n?n.id:null}(this.props.sources,e.target.value)
t?this.props.onChange(t):this.props.onChange(this.props.registryId)}}componentDidMount(){s.Z.fetchSources()}render(){const e=this.props.registryId!==this.props.selectedSourceId?function sourceIdToRootFolderId(e,t){const n=e.find((e=>e.id===t))
return n?n.rootFolder.api_identifier:null}(this.props.sources,this.props.selectedSourceId):null
return a.createElement(m.Z,{text:this.props.disableEditsWithTooltip,isDisabled:null==this.props.disableEditsWithTooltip},a.createElement("div",null,a.createElement(o.Z,{allowNone:!0,error:this.props.error,level:"append",noFolderText:"None",onChange:this._handleFolderChange,readOnly:!this.props.isWritable||this.props.areSourcesLoading||null!=this.props.disableEditsWithTooltip,showInventory:!1,showNotebook:!1,showRegistries:!1,value:e,unsetOnFetchFail:!1})))}}const _popoverContent=()=>a.createElement("div",null,a.createElement("p",null,"Project to associate with the inventory item. Only users with read access to the project will be able to view the inventory item."),a.createElement("p",null,"If the project is not specified, then the inventory item defaults to the same permissions as its registry."))
function ProjectHelpButton(){return a.createElement(l.Z,{renderContent:_popoverContent,iconClassName:"u-mini-spacing-left"})}function StorableSourceSelectorWithTitle(e){return a.createElement("div",null,a.createElement(p.Dx,null,"Project",a.createElement(ProjectHelpButton,null)),a.createElement(E,{...e}))}class StorableSourceFormGroup extends a.Component{constructor(){super(...arguments)
this._handleProjectChange=e=>{this.props.onStorableChange({sourceId:e})}}render(){return a.createElement(d.Z,null,a.createElement(h.Z,{isRequired:i.ZP.ENABLE_PROJECTS_REQUIRED_FOR_NON_LOCATION_STORABLES,label:"Project",labelStyle:h.Z.STYLES.LABEL}),a.createElement(ProjectHelpButton,null),a.createElement(E,{error:this.props.error,isWritable:!0,onChange:this._handleProjectChange,registryId:this.props.registryId,selectedSourceId:this.props.selectedSourceId}),this.props.error&&a.createElement(u.Z,{error:this.props.error}))}}const E=StorableSourceSelectorConnector.connect(StorableSourceSelector)},569231:(e,t,n)=>{n.d(t,{f:()=>MeasurementValue,g:()=>Measurement})
var a=n(764403),i=n.n(a),r=n(989526),s=n(316887)
function Measurement({measurement:e}){return r.createElement("span",{className:i()({"u-faded":null==(null==e?void 0:e.value)})},s.wD(e))}function MeasurementValue({value:e}){return null==e?r.createElement("span",{className:"u-faded"},"Not specified"):r.createElement("span",null,s.QV(e))}},316887:(e,t,n)=>{n.d(t,{BI:()=>getMeasurementError,Bb:()=>validateTransferInputContents,KG:()=>getTransferInputContentsErrorText,OE:()=>updateQuantityUnits,QV:()=>getMeasurementValueString,Un:()=>willTransferModifyOutputSampleRoles,X9:()=>isMeasurementValid,_6:()=>willTransferApplyContainerNameTemplate,bC:()=>validateAllTransferQuantities,dh:()=>addMeasurementValues,hN:()=>getMultipleTransferInputContentsErrorText,i6:()=>isSourceContainerValidForTransfer,lV:()=>validateQuantitiesFromConfirmTransferQuantitiesData,nG:()=>convertToStandard,or:()=>validateContainerTransfer,wD:()=>getMeasurementString,x8:()=>getTransferQuantityValidationText,zY:()=>isNonVolumeTransfer})
var a=n(162294),i=n(232606),r=n(348920),s=n(647517),o=n(133832),l=n(136765),c=n(477956),d=n(922805),u=n(563712),m=n(487761),p=n(94222)
function _convertToStandardFactor(e){if(s.DF.hasOwnProperty(e))return s.DF[e]
const t=e.split("/");(0,i.hu)(t.length<3,"Units must be singular (kg, L), or a single quotient (kg/L)")
if(2===t.length)return s.DF[t[0]]/s.DF[t[1]];(0,i.hu)(!1,`Unsupported unit ${e}`)}function convertToStandard(e){return null==e.value||null==e.units?null:new a.Decimal(e.value).times(_convertToStandardFactor(e.units))}function convertFromStandard(e,t){return null==e||null==t?{value:null,units:t}:{value:e.times(a.Decimal.div(1,_convertToStandardFactor(t))).toNumber(),units:t}}function convertToUnits(e,t){return convertFromStandard(convertToStandard(e),t)}function updateQuantityUnits(e,t){return{units:t===s.W1?null:t,value:null!=e.value&&t!==s.W1?convertToUnits(e,t).value:null}}function addMeasurementValues(e,t){return null==e&&null==t?null:(e||0)+(t||0)}function getMeasurementValueString(e){const t=parseFloat(e.toPrecision((0,o.sh)()))
return String(t).replace(".","").length>(0,o.sh)()?t.toExponential():String(t)}function getMeasurementString(e){return null==e||null==e.value?"Not specified":`${getMeasurementValueString(e.value)} ${e.units}`}function isMeasurementValid(e){return null!=e&&null==e.value==(null==e.units)&&(null==e.value||e.value>=0)}function getMeasurementError(e){return null!=e.units&&null==e.value||null!=e.value&&e.value<0?"Requires a non-negative numeric value.":null==e.units&&null!=e.value?"Requires a measuring unit.":null}function validateContainerTransfer({finalOutputQuantityValue:e,transferQuantityValue:t,outputContainer:n}){return!(!n||!n.quantity)&&(!!isMeasurementValid({value:e,units:n.quantity.units})&&(null==e?null==n.quantity.value&&null==n.quantity.units:e>=(t||0)+(n.quantity.value||0)))}function getTransferQuantityValidationText(e,t){return t?getBlockingTransferQuantityValidationErrorText(e):function getNonBlockingTransferQuantityValidationWarningText(e){const t=`The full ${(0,m.Z)(!1)} will be transferred, and the source container's ${(0,m.Z)(!1)} will be set to 0.`
return`${getBlockingTransferQuantityValidationErrorText(e)} ${t}`}(e)}function getBlockingTransferQuantityValidationErrorText(e){return`The total ${(0,m.Z)(!1,!1)} you are trying to transfer exceeds what is available in the source container (${e.name}: ${getMeasurementString(e.quantity)}).`}function validateQuantitiesFromConfirmTransferQuantitiesData(e,t){return{...getQuantitiesForTransferValidation(e,t.map((({transferQuantityValue:e,outputContainer:t})=>({value:e,units:t.quantity.units})))),quantityErrorsAreBlocking:!r.ZP.INVENTORY_DISABLE_ENFORCE_TRANSFER_QUANTITIES}}function validateAllTransferQuantities(e){const t=e.reduce(((e,t)=>{var n
e.set(t.source,[...null!==(n=e.get(t.source))&&void 0!==n?n:[],t.transferQuantity])
return e}),new Map),n=Array.from(t.entries()).filter((([e,t])=>!function isTotalTransferQuantityValidForSource(e,t){const{isValid:n}=getQuantitiesForTransferValidation(e,t)
return n}(e,t))).map((([e,t])=>e))
return{isValid:0===n.length,sourcesInViolation:n,quantityErrorsAreBlocking:!r.ZP.INVENTORY_DISABLE_ENFORCE_TRANSFER_QUANTITIES}}function getQuantitiesForTransferValidation(e,t){const n=t.filter((({value:e,units:t})=>null!=e&&null!=t))
if(null==e.quantity.value||!(0,s.V7)([e.quantity.units,...n.map((({units:e})=>e))]))return{remainingSourceQuantity:e.quantity,totalTransferQuantity:{value:null,units:null},isValid:!0}
const i=convertFromStandard(n.reduce(((e,t)=>a.Decimal.add(convertToStandard(t),e)),new a.Decimal(0)),e.quantity.units),r={value:e.quantity.value-i.value,units:e.quantity.units}
return{remainingSourceQuantity:r,totalTransferQuantity:i,isValid:null==r.value||r.value>=0}}function getTransferInputContentsErrorText(e){return`Source container ${e.name} does not have any contents to transfer.`}function getMultipleTransferInputContentsErrorText(e=!0){return`None of the ${e?"wells":"containers"} have any contents to transfer.`}function validateTransferInputContents(e,t=!1){const n=e.filter((e=>!isSourceContainerValidForTransfer(e))),a=n.length
return{contentsAreValid:t?0===a:a<e.length,sourcesInViolation:n}}function isSourceContainerValidForTransfer(e){return!r.ZP.INVENTORY_ENABLE_REQUIRE_CONTENTS_FOR_TRANSFERS||e.containedItemIds.length>0}function isNonVolumeTransfer(e,t=null){var n
const a=null!==(n=null==t?void 0:t.quantity.units)&&void 0!==n?n:null,i=e.quantity.units,r=e.outputContainer.quantity.units
return!(0,s.T1)(a)||!(0,s.T1)(i)||!(0,s.T1)(r)}function willTransferModifyOutputSampleRoles(e,t){if(null==e||!(0,d.Eq)(c.F.V1))return!1
const n=(0,p.Jl)(e.sampleRoles,"sampleOwners"),a=(0,p.Jl)(e.sampleRoles,"restrictedSampleUsers"),i=e.restrictionStatus
if(0===n.length&&0===a.length&&i!==l.nY.RESTRICTED)return!1
for(const e of t){const t=(0,p.Jl)(e.sampleRoles,"sampleOwners"),r=(0,p.Jl)(e.sampleRoles,"restrictedSampleUsers"),s=new Set(n.filter((e=>!t.includes(e)))),o=new Set(a.filter((e=>!r.includes(e)))),c=i===l.nY.RESTRICTED&&e.restrictionStatus!==l.nY.RESTRICTED
if(s.size>0||o.size>0||c)return!0}return!1}async function willTransferApplyContainerNameTemplate(e,t,n){return!!(await(0,u.lx)(n.filter((e=>!e.isFixedPlateWell)).map((e=>e.id)))).some((e=>0===e.contents.length))&&(null!=e&&await(0,u.GY)(e)||null!=t&&await(0,u.w7)(t))}},870822:(e,t,n)=>{n.d(t,{JQ:()=>c,_M:()=>o,a2:()=>u,iL:()=>i,p3:()=>r,qs:()=>l,tV:()=>d,wD:()=>a})
var a
!function(e){e.EXISTING_BIOENTITY="EXISTING_BIOENTITY"
e.NEW_BIOENTITY="NEW_BIOENTITY"
e.EXISTING_BATCH="EXISTING_BATCH"
e.NEW_BATCH_ON_EXISTING_BIOENTITY="NEW_BATCH_ON_EXISTING_BIOENTITY"
e.NEW_BATCH_ON_NEW_BIOENTITY="NEW_BATCH_ON_NEW_BIOENTITY"
e.EXISTING_CONTAINER="EXISTING_CONTAINER"}(a||(a={}))
const i=[a.EXISTING_BIOENTITY,a.EXISTING_BATCH,a.NEW_BATCH_ON_EXISTING_BIOENTITY],r=[a.NEW_BIOENTITY,a.NEW_BATCH_ON_NEW_BIOENTITY],s=[a.EXISTING_BATCH],o=[a.NEW_BATCH_ON_EXISTING_BIOENTITY,a.NEW_BATCH_ON_NEW_BIOENTITY],l=[a.EXISTING_BIOENTITY,a.NEW_BIOENTITY],c=[...s,...o],d=[a.EXISTING_CONTAINER],u=[...l,...c]},453657:(e,t,n)=>{n.d(t,{Fs:()=>getDefaultPaneState,Mu:()=>getCompleteButtonText,bA:()=>getInputContainable,ew:()=>isComplete,hF:()=>getInputSample,o9:()=>getValidInputType,rK:()=>completeAndGetModalState,xD:()=>getInitialRestrictionStatusState,y7:()=>DataModsModalCancelledException,z_:()=>getDefaultTransferPaneSampleStatusState})
var a=n(531041),i=n(232606),r=n(647517),s=n(459830),o=n(537076),l=n(133832),c=n(136765),d=n(627742),u=n(525098),m=n(870822)
function getInputContainable(e){return e}function getInputSample(e,t){return e||t}function getDefaultTransferPaneSampleStatusState(){return{canProceedOnSampleStatus:!1,selectedSampleIds:[],shouldShowStatusWarnings:!1,samples:null,warningInputOutputType:null}}function getDefaultPaneState(){return{pane:l.RJ.CHOOSE_TRANSFER_INPUT,inputType:m.wD.EXISTING_BATCH,inputBioentity:null,createAndRegisterBioentityArgs:d.pk(),inputContainer:null,inputContainable:null,initialOutputContainerStateById:{},selectedInputContainer:null,inputContainableConcentration:r.ci,outputType:s.CONTAINER,outputPlate:null,outputCells:[],outputContainerSummaries:[],outputContainers:[],selectedOutputContainers:[],containerContents:null,containerTransfers:null,confirmTransferQuantitiesData:null,confirmConcentrationsData:null,errorMessage:null,shouldCalculateConcentrations:!0,areSolidUnitsInvolved:!1,isTransferring:!1,transferCancelled:!1,confirmedOutputContainerIds:null,inputSampleStatusState:{canProceedOnSampleStatus:!1,selectedSampleIds:[],shouldShowStatusWarnings:!1,samples:null,warningInputOutputType:null},outputSampleStatusState:{canProceedOnSampleStatus:!1,selectedSampleIds:[],shouldShowStatusWarnings:!1,samples:null,warningInputOutputType:null},useInferredSampleControls:!0,restrictionStatus:c.nY.UNRESTRICTED,restrictedSampleUsers:[],sampleOwners:[],showNameTemplateBanner:!1}}function getCompleteButtonText(e){const{inputType:t}=e
return m.p3.includes(t)?"Register":m._M.includes(t)?"Create":"Next"}function isComplete(e){const{createAndRegisterBioentityArgs:t,inputBioentity:n,inputContainer:i,inputType:r}=e,s=[]
m.iL.includes(r)?s.push(n):m.p3.includes(r)&&s.push(d.ew(t))
m.tV.includes(r)&&s.push(i)
return a.default.all(s)}class DataModsModalCancelledException extends u.Z{}async function completeAndGetModalState(e){const{createAndRegisterBioentityArgs:t,inputBioentity:n,inputContainer:a,inputType:s,confirmTransferQuantitiesData:o}=e
let l,c=null,u=null
if(m.iL.includes(s))c=n
else if(m.p3.includes(s)){c=await d.jD(t)
if(null==c)throw new DataModsModalCancelledException}m.tV.includes(s)&&(u=a)
if(m.qs.includes(s))l=m.wD.EXISTING_BIOENTITY
else if(m.JQ.includes(s))l=m.wD.EXISTING_BATCH
else{(0,i.hu)(m.tV.includes(s),`Unexpected inputType: ${s}`)
l=m.wD.EXISTING_CONTAINER}const p=c
return{inputBioentity:c,inputContainer:u,...null==o?getInitialRestrictionStatusState(a):{},inputType:l,inputContainableConcentration:p?"concentration"in p&&p.concentration||r.ci:null}}function getValidInputType(e){const{inputType:t,inputBioentity:n,createAndRegisterBioentityArgs:a}=e,i=m.iL.includes(t),r=function getTagSchema(e,t,n){var a
return m.iL.includes(e)?t?t.tagSchema:null:m.p3.includes(e)&&null!==(a=n.tagSchema)&&void 0!==a?a:null}(t,n,a)
return(null==r?void 0:r.containableType)===o.TagSchemaContainableType.BATCH&&m.qs.includes(t)?i?m.wD.EXISTING_BATCH:m.wD.NEW_BATCH_ON_NEW_BIOENTITY:(null==r?void 0:r.containableType)===o.TagSchemaContainableType.ENTITY&&m.JQ.includes(t)?i?m.wD.EXISTING_BIOENTITY:m.wD.NEW_BIOENTITY:t}function getInitialRestrictionStatusState(e){const t=null==e?void 0:e.restrictionStatus
return null!=t&&t!==c.nY.NOT_APPLICABLE?{restrictionStatus:t}:{}}},85722:(e,t,n)=>{n.d(t,{PB:()=>r,Pn:()=>s,gO:()=>i})
var a=n(280034)
function isValidationState(e){return function isGivenValidationState(t){return null!=t&&t.status===e}}const i=isValidationState(a.TC.FAILED),r=isValidationState(a.TC.OVERRIDDEN),s=isValidationState(a.TC.VALIDATING)},280034:(e,t,n)=>{n.d(t,{Ob:()=>r,TC:()=>a,UF:()=>longDisplayTextForSchemaValidationErrorLabel,WX:()=>d,_B:()=>i,aT:()=>p,d8:()=>h,hg:()=>shortDisplayTextForSchemaValidationErrorLabel,kw:()=>c})
var a,i,r,s=n(602652),o=n(497790)
!function(e){e.OVERRIDDEN="OVERRIDDEN"
e.FAILED="FAILED"
e.VALIDATING="VALIDATING"
e.PASSED="PASSED"}(a||(a={}))
!function(e){e.FAILED="Failed"
e.VALIDATING="Validating"
e.PASSED="Passed"}(i||(i={}))
!function(e){e.FAILED="Failed validation checks"
e.OVERRIDDEN="Validation checks were overridden"
e.VALIDATING="Running validation checks..."}(r||(r={}))
const l=[a.PASSED,a.OVERRIDDEN,a.FAILED,a.VALIDATING],c=s.shape({status:s.oneOf(l).isRequired})
var d
!function(e){e.CONSTRAINT_VIOLATION="CONSTRAINT_VIOLATION"
e.INVALID_LINK="INVALID_LINK"
e.INVALID_MULTIPLE_LINK="INVALID_MULTIPLE_LINK"
e.INVALID_VALUE="INVALID_VALUE"
e.MISSING_REQUIRED="MISSING_REQUIRED"
e.OTHER="OTHER"}(d||(d={}))
const u={[d.CONSTRAINT_VIOLATION]:"Constraint violation",[d.INVALID_LINK]:"Invalid entity link",[d.INVALID_VALUE]:"Invalid field value",[d.INVALID_MULTIPLE_LINK]:"Invalid multi-link",[d.MISSING_REQUIRED]:"Missing required",[d.OTHER]:"Other"}
function shortDisplayTextForSchemaValidationErrorLabel(e){return u[e]}const m={[d.CONSTRAINT_VIOLATION]:"Constraint violation",[d.INVALID_LINK]:"Invalid entity link",[d.INVALID_VALUE]:"Invalid field value",[d.INVALID_MULTIPLE_LINK]:"Multiple links not allowed",[d.MISSING_REQUIRED]:"Missing required value",[d.OTHER]:"Other"}
function longDisplayTextForSchemaValidationErrorLabel(e){return m[e]}const p=s.shape({errorLabel:s.string.isRequired,field:o.SCHEMA_FIELD_SHAPE,message:s.string.isRequired}),h=s.shape({errorRecords:s.arrayOf(p)})},727493:(e,t,n)=>{n.d(t,{Z:()=>f})
var a=n(64558),i=n(692013),r=n(764403),s=n.n(r),o=n(989526),l=n(764677),c=n(759426),d=n(836291),u=n(996447),m=n(382857),p=n(721641),h=n(898808),E=n(173220),S=n(685370),T=n(257846)
class SchemasListing extends o.Component{constructor(){super(...arguments)
this.state={selectedArchivePurposeFilters:[l.BH],searchQuery:""}
this.getSchemaUrlForRow=e=>{if(null!=this.props.schemas){const t=this.props.schemas[e]
return this.props.urlForSchema(t.id)}return null}
this.createArchiveSchemaHandler=()=>this.props.schemas?e=>{u.bA({items:[this.getLoadedSchemas()[e]],onArchive:this.props.archiveSchemas})}:null
this.createUnarchiveSchemaHandler=()=>this.props.schemas?e=>{this.props.unarchiveSchemas([this.getLoadedSchemas()[e].id])}:null
this.createDeleteHandler=()=>this.props.schemas&&this.props.deleteSchema?e=>{const t=this.getLoadedSchemas()[e]
S.iG(`Delete "${t.name}"`,"Are you sure you want to delete this schema?","danger").done((()=>{this.props.deleteSchema(t.id)}))}:null
this.handleChangeArchivePurposeFilters=e=>{this.setState({selectedArchivePurposeFilters:e})}}getLoadedSchemas(){if(!this.props.schemas)throw new Error("Expected schemas to be loaded")
return this.props.schemas}filterForArchivePurpose(e){return c.F(e,this.state.selectedArchivePurposeFilters)}getFilteredSchemas(e){let t=this.filterForArchivePurpose(e||[])
this.props.customFilterCallback&&(t=this.props.customFilterCallback(t))
""!==this.state.searchQuery&&(t=t.filter((e=>T.Z.caseInsensitiveContains(e.name,this.state.searchQuery))))
return t}getEmptyMessage(){return this.props.errorMessage?this.props.errorMessage:this.props.schemaType===p.R.SCHEMA_INTERFACE?"No schema interfaces are present":"No schemas are present"}render(){const e=this.props.schemas?(0,a.m8)(this.props.schemas.map(((e,t)=>(0,a.LI)(e.id,t)))):{},t=this.getFilteredSchemas(this.props.schemas),n=t?t.map((t=>{const n={id:t.id,itemIndex:e[t.id],isArchived:(0,m.ZP)(t),values:this.props.mapSchemaToRowValue(t)}
if(this.props.mapSchemaToRowPermissions){const e=this.props.mapSchemaToRowPermissions(t)
n.isArchivable=e.isArchivable
n.isDeletable=e.isDeletable}return n})):null,r=null==this.props.schemas,l=this.props.schemaType===p.R.SCHEMA_INTERFACE?"s":" schemas"
return o.createElement("div",{className:"settingsPage"},o.createElement("div",{className:"settingsPage-contentWrapper"},o.createElement(h.ZP,{tableName:`${p.q[this.props.schemaType]}${l}`,columnHeaders:this.props.columnHeaders,emptyMessage:this.getEmptyMessage(),isLoading:r,rows:n,onCreate:this.props.navigateToCreate?()=>{this.props.navigateToCreate()}:void 0,getEditUrl:this.getSchemaUrlForRow,onArchive:this.createArchiveSchemaHandler(),onUnarchive:this.createUnarchiveSchemaHandler(),onDelete:this.createDeleteHandler(),writable:this.props.isWritable,leftSubheaderNode:o.createElement("div",{className:s()("u-flex-display",(0,i.iv)(g.searchControls))},o.createElement(E.ZP,{className:(0,i.iv)(g.searchInput),borderRadius:E.cM.LARGE,placeholder:"Search",value:this.state.searchQuery,onChange:e=>{this.setState({searchQuery:e.target.value})},onEscape:()=>{this.setState({searchQuery:""})}}),o.createElement(d.Z,{itemIds:r?[]:this.getLoadedSchemas().map((e=>e.id)),onChangePurposes:this.handleChangeArchivePurposeFilters,selectedPurposes:this.state.selectedArchivePurposeFilters}),this.props.customSearchControls)})))}}SchemasListing.defaultProps={columnHeaders:[{name:"Schemas",width:12}],isWritable:!0,mapSchemaToRowValue:e=>[o.createElement("span",null,e.name)]}
const g=i.mM.create({searchInput:{marginRight:10,width:200},searchControls:{gap:"10px",marginRight:"10px"}}),f=SchemasListing},605209:(e,t,n)=>{n.d(t,{MJ:()=>InterfaceFieldChangePropagationWarning,Mv:()=>FieldRelaxationWarning,PL:()=>shouldShowFieldChangeWarehouseWarning,ZP:()=>FieldChangeWarningModal,iE:()=>FieldChangeWarehouseWarning,ro:()=>h})
var a=n(769784),i=n(989526),r=n(751512),s=n(91092),o=n(697134),l=n(974913),c=n(497790),d=n(383628),u=n(334148),m=n(205986)
const p=new(n(210665).Z)([[{fromFieldDefinition:c.FieldType.DATETIME,toFieldDefinition:c.FieldType.DATE},'Changing a field\'s definition from "Datetime" to "Date" converts all datetime values in UTC time. E.g. a local datetime of 2020-01-01 9:00:00 PM, which corresponds to a datetime of 2020-01-02 6:00:00 AM in UTC time, becomes converted to a date of 2020-01-02.'],[{fromFieldDefinition:c.FieldType.DATE,toFieldDefinition:c.FieldType.DATETIME},'Changing a field\'s definition from "Date" to "Datetime" converts all date values in UTC time. E.g. a local date of 2020-01-02 becomes converted to a datetime of 2020-01-02 00:00:00 AM in UTC time, which translates to a local datetime of 2020-01-01 05:00:00 PM.'],[{fromFieldDefinition:c.FieldType.BLOB_LINK},'Changing a field\'s definition from "Attachment" may result in the loss of the linked files. If you need to retain these files, please download them before changing the field definition.'],[{fromFieldDefinition:c.FieldType.TEXT,toFieldDefinition:c.FieldType.FLOAT},'Changing a field\'s definition from "Text" to "Decimal" will result in the loss of data if the data contains non-numeric characters. E.g. "5 mL" will not be converted and the data will be lost.'],[{fromFieldDefinition:c.FieldType.TEXT,toFieldDefinition:c.FieldType.INTEGER},'Changing a field\'s definition from "Text" to "Integer" will result in the loss of data if the data contains non-numeric characters or any decimal values other than trailing zeros. E.g. "5 mL" or "1.23" will not be converted and the data will be lost.'],[{fromFieldDefinition:c.FieldType.FLOAT,toFieldDefinition:c.FieldType.INTEGER},'Changing a field\'s definition from "Decimal" to "Integer" will result in the loss of data if the data contains any decimal values other than trailing zeros. E.g. 1.00 will be converted to 1, but 1.23 will not be converted and the data will be lost.'],[{fromFieldDefinition:c.FieldType.TEXT,toFieldDefinition:c.FieldType.BIOENTITY_LINK},'Changing a field\'s definition from "Text" to "Entity" will result in loss of data in the warehouse for the values of this field. However, the original text values may still be displayed on the Benchling site.'],[{fromFieldDefinition:c.FieldType.BIOENTITY_LINK,toFieldDefinition:c.FieldType.TEXT},'Changing a field\'s definition from "Entity" to "Text" will use the names of the entity values for the new text value. This is an irreversible process that cannot be undone by changing the field definition back to the original "Entity".'],[{fromFieldDefinition:c.FieldType.SELECTOR,toFieldDefinition:c.FieldType.SELECTOR},'Changing a field\'s definition from "Dropdown A" to "Dropdown B" will result in loss of data in the warehouse for the values of this field. However, the original text values may still be displayed on the Benchling site.']])
function DataLossWarningBanner({message:e}){return i.createElement(i.Fragment,null,i.createElement(d.ZP,{bannerType:d.ct.WARNING,text:e}),i.createElement("br",null))}function FieldChangeWarningModal(e){return i.createElement(m.ZP,{title:"Confirm Changes",onRequestSubmit:e.onRequestSubmit,onRequestClose:e.onRequestClose,scrollable:!0,medium:!0,className:"modal-text-only",buttons:[{text:"Cancel",cancel:!0},{text:"Confirm",submit:!0,style:u.ZJ.NEGATIVE}]},e.content)}function FieldRelaxationWarning(e){var t,n
return i.createElement(d.ZP,{bannerType:d.ct.WARNING,text:`Expanding field from "${null!==(t=e.fromName)&&void 0!==t?t:"a specific schema"}" to "${null!==(n=e.toName)&&void 0!==n?n:"any entity"}" is an irreversible operation.`})}const h=a.Ps`
  query InterfaceFieldChangePropagationWarningQuery($interfaceId: StrictString!)
  @skipAudit
  @engComponent(name: SCHEMAS) {
    schemaInterface(id: $interfaceId) {
      ... on SchemaInterfaceNode {
        id
        schemas {
          id
          name
        }
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,s.f)("InaccessibleInfo").fragment}
`
function InterfaceFieldChangePropagationWarning(e){const t=(0,r.IJ)(h,{variables:{interfaceId:e.interfaceId},fetchPolicy:"network-only"})
let n
if(t.type===r.NI.ERROR){l.ZP.error("Could not load affected schemas.")
n=null}else if(t.type===r.NI.PENDING)n="Loading affected schemas..."
else if(t.type===r.NI.SUCCESS){const e=(0,o.i2)(t.data.schemaInterface)
n=0===e.schemas.length?null:`Schemas: ${e.schemas.map((e=>e.name)).join(", ")}.`}return i.createElement(d.ZP,{bannerType:d.ct.WARNING,text:"Changing this field will propagate changes to any schemas implementing this interface.",supportingInfo:n})}function shouldShowFieldChangeWarehouseWarning(e,t,n){return e||null!=n&&(t!==n||p.has({fromFieldDefinition:t,toFieldDefinition:n})||p.has({fromFieldDefinition:t}))}function FieldChangeWarehouseWarning(e){const t=function getFieldChangeWarningMessage(e){return p.get(e)||p.get({fromFieldDefinition:e.fromFieldDefinition})}({fromFieldDefinition:e.fromFieldDefinition,toFieldDefinition:e.toFieldDefinition}),n=null==t&&e.isMultiMoreStrict
return i.createElement(i.Fragment,null,t&&i.createElement(DataLossWarningBanner,{message:t}),n&&i.createElement(DataLossWarningBanner,{message:'Changing a field\'s definition by deselecting "Multi-select" will result in loss of data in the warehouse for entities that have multiple values for this field. However, the original list of values may still be displayed on the site with an invalid label.'}),i.createElement("div",null,i.createElement("p",null,t||n?"Additionally, changing ":"Changing ",'a field\'s "Definition" or "Multi-select" value'," ",i.createElement("b",null,"will cause all data recorded for this field to be temporarily missing from the warehouse")," ","while a backfill for these values is underway."),i.createElement("p",null,"We suggest triggering such changes in the evening or on a weekend to minimize disruption of warehouse usage.")))}},497790:(e,t,n)=>{n.r(t)
n.d(t,{ALL_BASE_FIELD_TYPES:()=>A,ANY_ENTITY:()=>E,BASE_FIELD_TYPES:()=>f,ComputedFieldPropertyType:()=>k,ComputedFieldType:()=>p,FIELD_OPTION:()=>M,FIELD_OPTION_HEADER:()=>F,FIELD_OPTION_SUBMENU:()=>w,FIELD_TYPES:()=>S,FIELD_TYPES_BY_TYPE_STRING:()=>g,FIELD_TYPE_TO_LEAF_TYPE:()=>m,FieldType:()=>a,LINKED_FIELD_ITEM_NAMES:()=>y,LINK_FIELD_TYPES:()=>I,REQUIRED_LINK:()=>P,REQUIRED_LINK_FOLDER_ITEM_TYPES:()=>R,REQUIRED_LINK_FOLDER_ITEM_TYPES_BY_TYPE_STRING:()=>N,SCHEMA_FIELD_RENDER_DATA_SHAPE:()=>D,SCHEMA_FIELD_SHAPE:()=>L,SUPPORTED_REQUIRED_LINK_FOLDER_ITEM_TYPES:()=>C,TAG_SCHEMA_EDGE:()=>O,TAG_SCHEMA_GRAPH:()=>v,TAG_SCHEMA_PATH:()=>b,TEXT_TYPE:()=>h,UNIT_AWARE_FIELD_TYPES:()=>_,getFieldOptionPureTextLabel:()=>getFieldOptionPureTextLabel,getFolderItemType:()=>getFolderItemType,getRequiredLinkAssaySchema:()=>getRequiredLinkAssaySchema,getRequiredLinkBatchSchema:()=>getRequiredLinkBatchSchema,getRequiredLinkFolderItemType:()=>getRequiredLinkFolderItemType,getRequiredLinkSchemaId:()=>getRequiredLinkSchemaId,getRequiredLinkStorableSchema:()=>getRequiredLinkStorableSchema,getRequiredLinkTagSchema:()=>getRequiredLinkTagSchema,getRequiredLinkTagSchemaOrSchemaInterface:()=>getRequiredLinkTagSchemaOrSchemaInterface,isBioentityLinkFieldWithTargetSchema:()=>isBioentityLinkFieldWithTargetSchema,isBioentityLinkSchemaField:()=>isBioentityLinkSchemaField,isFieldOptionHeader:()=>isFieldOptionHeader,isFieldOptionLeafField:()=>isFieldOptionLeafField,isFieldOptionSubmenu:()=>isFieldOptionSubmenu,isNumericField:()=>isNumericField,isRequiredLinkAssaySchema:()=>isRequiredLinkAssaySchema,isRequiredLinkBatchSchema:()=>isRequiredLinkBatchSchema,isRequiredLinkFolderItemType:()=>isRequiredLinkFolderItemType,isRequiredLinkSample:()=>isRequiredLinkSample,isRequiredLinkSchemaInterface:()=>isRequiredLinkSchemaInterface,isRequiredLinkStorableSchema:()=>isRequiredLinkStorableSchema,isRequiredLinkStorableSchemaOrAnyInventory:()=>isRequiredLinkStorableSchemaOrAnyInventory,isRequiredLinkTagSchema:()=>isRequiredLinkTagSchema,isSampleFieldForBioentity:()=>isSampleFieldForBioentity,isSnapshotField:()=>isSnapshotField,requiredLinkToSchemaId:()=>requiredLinkToSchemaId})
var a,i=n(602652),r=n(764677),s=n(232606),o=n(459830),l=n(861825),c=n(264867),d=n(208029),u=n(531041)
!function(e){e.ASSAY_REQUEST_LINK="ft_assay_request_link"
e.ASSAY_RESULT_LINK="ft_assay_result_link"
e.ASSAY_RUN_LINK="ft_assay_run_link"
e.BATCH_LINK="ft_batch_link"
e.BLOB_LINK="ft_blob_link"
e.BOOLEAN="ft_boolean"
e.DATE="ft_date"
e.DATETIME="ft_datetime"
e.ENTRY_LINK="ft_entry_link"
e.BIOENTITY_LINK="ft_file_link"
e.FLOAT="ft_float"
e.INTEGER="ft_integer"
e.JSON="ft_json"
e.LONG_TEXT="ft_long_text"
e.PART_LINK="ft_part_link"
e.SAMPLE_LINK="ft_sample_link"
e.SELECTOR="ft_selector"
e.STORABLE_LINK="ft_storable_link"
e.TEXT="ft_string"
e.TRANSLATION_LINK="ft_translation_link"
e.TRANSCRIPTION_LINK="ft_transcription_link"}(a||(a={}))
const m={[a.ASSAY_REQUEST_LINK]:c.i0.REQUEST,[a.ASSAY_RESULT_LINK]:c.i0.RESULT,[a.ASSAY_RUN_LINK]:c.i0.RUN,[a.BATCH_LINK]:c.i0.BATCH,[a.BLOB_LINK]:c.i0.BLOB,[a.BOOLEAN]:c.i0.BOOLEAN,[a.DATE]:c.i0.DATE,[a.DATETIME]:c.i0.DATETIME,[a.ENTRY_LINK]:c.i0.ENTRY,[a.BIOENTITY_LINK]:c.i0.BIOENTITY,[a.FLOAT]:c.i0.DECIMAL,[a.INTEGER]:c.i0.INTEGER,[a.JSON]:c.i0.JSON,[a.LONG_TEXT]:c.i0.TEXT,[a.PART_LINK]:c.i0.SEQUENCE,[a.SAMPLE_LINK]:c.i0.BIOENTITY,[a.SELECTOR]:c.i0.DROPDOWN_OPTION,[a.STORABLE_LINK]:c.i0.STORABLE,[a.TEXT]:c.i0.TEXT,[a.TRANSLATION_LINK]:c.i0.PROTEIN,[a.TRANSCRIPTION_LINK]:c.i0.SEQUENCE}
var p
!function(e){e.SNAPSHOT="SNAPSHOT"}(p||(p={}))
const h={type:a.TEXT,label:"Text"},E={id:"",name:"Any entity"},S={ASSAY_REQUEST_LINK:{type:a.ASSAY_REQUEST_LINK,label:"Request link"},ASSAY_RESULT_LINK:{type:a.ASSAY_RESULT_LINK,label:`${d.D6.Result} link`},ASSAY_RUN_LINK:{type:a.ASSAY_RUN_LINK,label:`${d.D6.Run} link`},BATCH_LINK:{type:a.BATCH_LINK,label:"Batch link"},BIOENTITY_LINK:{type:a.BIOENTITY_LINK,label:"Entity link"},BLOB_LINK:{type:a.BLOB_LINK,label:"Blob link"},BOOLEAN:{type:a.BOOLEAN,label:"Boolean"},DATE:{type:a.DATE,label:"Date"},DATETIME:{type:a.DATETIME,label:"Datetime"},ENTRY_LINK:{type:a.ENTRY_LINK,label:"Entry link"},FLOAT:{type:a.FLOAT,label:"Floating point"},INTEGER:{type:a.INTEGER,label:"Integer"},JSON:{type:a.JSON,label:"JSON"},LONG_TEXT:{type:a.LONG_TEXT,label:"Long text"},PART_LINK:{type:a.PART_LINK,label:"Part link"},SAMPLE_LINK:{type:a.SAMPLE_LINK,label:"Sample link"},SELECTOR:{type:a.SELECTOR,label:"Dropdown"},STORABLE_LINK:{type:a.STORABLE_LINK,label:"Inventory link"},TEXT:h,TRANSLATION_LINK:{type:a.TRANSLATION_LINK,label:"Translation link"},TRANSCRIPTION_LINK:{type:a.TRANSCRIPTION_LINK,label:"Transcription link"}},T=[S.FLOAT,S.INTEGER]
function isNumericField(e){return T.map((e=>e.type)).includes(e.fieldType)}const g=u.object(u.values(S).map((e=>[e.type,e]))),f=["TEXT","LONG_TEXT","INTEGER","FLOAT","DATE","DATETIME"],I=[S.ASSAY_RESULT_LINK.type,S.ASSAY_RUN_LINK.type,S.BATCH_LINK.type,S.BIOENTITY_LINK.type,S.BLOB_LINK.type,S.ENTRY_LINK.type,S.PART_LINK.type,S.SAMPLE_LINK.type,S.SELECTOR.type,S.STORABLE_LINK.type,S.TRANSLATION_LINK.type,S.TRANSCRIPTION_LINK.type],A=[...f,"JSON"],y={[a.ASSAY_REQUEST_LINK]:"Request",[a.ASSAY_RESULT_LINK]:"Result",[a.ASSAY_RUN_LINK]:"Run",[a.BATCH_LINK]:"Batch",[a.BIOENTITY_LINK]:"Entity",[a.BLOB_LINK]:"Blob",[a.ENTRY_LINK]:"Entry",[a.PART_LINK]:"Part",[a.TRANSLATION_LINK]:"Translation",[a.TRANSCRIPTION_LINK]:"Transcription"},_=[a.FLOAT,a.INTEGER],C=[o.BASIC_FOLDER_ITEM,o.PROTEIN,o.SEQUENCE,o.MIXTURE,o.MOLECULE],R={BASIC_FOLDER_ITEM:{type:o.BASIC_FOLDER_ITEM},PROTEIN:{type:o.PROTEIN},SEQUENCE:{type:o.SEQUENCE},MIXTURE:{type:o.MIXTURE},MOLECULE:{type:o.MOLECULE}},N=u.object(u.values(R).map((e=>[e.type,e]))),O=i.shape({name:i.string.isRequired,id:i.number.isRequired,apiId:i.string.isRequired,systemName:i.string.isRequired,from:i.shape({name:i.string.isRequired,id:i.string.isRequired}),to:i.shape({name:i.string.isRequired,id:i.string.isRequired})}),b=i.arrayOf(O),v=i.shape({edges:b})
function isRequiredLinkSchemaInterface(e){return null!=e&&e.hasOwnProperty("schemaInterface")&&null!=e.schemaInterface}function isRequiredLinkTagSchema(e){return null!=e&&e.hasOwnProperty("tagSchema")&&null!=e.tagSchema}function isRequiredLinkBatchSchema(e){return null!=e&&e.hasOwnProperty("batchSchema")&&null!=e.batchSchema}function isRequiredLinkFolderItemType(e){return null!=e&&e.hasOwnProperty("folderItemType")&&null!=e.folderItemType}function isRequiredLinkStorableSchemaOrAnyInventory(e){return null!=e&&e.hasOwnProperty("storableSchema")}function isRequiredLinkStorableSchema(e){return isRequiredLinkStorableSchemaOrAnyInventory(e)&&null!=e.storableSchema}function isRequiredLinkSample(e){return e.hasOwnProperty("sampleType")}function isRequiredLinkAssaySchema(e){return null!=e&&e.hasOwnProperty("assaySchema")&&null!=e.assaySchema}const P=i.shape({batchSchema:i.object,batchSchemaGraph:v,tagSchema:i.shape({id:i.string.isRequired,folderItemType:i.oneOf(C)}),folderItemType:i.oneOf(C),sampleType:i.oneOf(Object.values(l.ZP))})
function requiredLinkHasTagSchema(e){return null!=e.tagSchema}function getRequiredLinkTagSchema(e){return requiredLinkToTagSchema(e.requiredLink)}function requiredLinkToTagSchema(e){return e&&requiredLinkHasTagSchema(e)?e.tagSchema:null}function requiredLinkHasSchemaInterface(e){return null!=(null==e?void 0:e.schemaInterface)}function requiredLinkToSchemaInterface(e){return e&&requiredLinkHasSchemaInterface(e)?e.schemaInterface:null}function getRequiredLinkTagSchemaOrSchemaInterface(e){return getRequiredLinkTagSchema(e)||function getRequiredLinkSchemaInterface(e){return requiredLinkToSchemaInterface(e.requiredLink)}(e)}function getRequiredLinkFolderItemType(e){return e.requiredLink&&function requiredLinkHasFolderItemType(e){return void 0!==e.folderItemType}(e.requiredLink)?e.requiredLink.folderItemType:null}function getFolderItemType(e){const t=getRequiredLinkFolderItemType(e)
if(null!=t)return t
const n=getRequiredLinkTagSchema(e)
return null!=n?n.folderItemType:null}function getRequiredLinkBatchSchema(e){return requiredLinkToBatchSchema(e.requiredLink)}function requiredLinkToBatchSchema(e){return e&&function requiredLinkHasBatchSchema(e){return void 0!==e.batchSchema}(e)?e.batchSchema:null}function getRequiredLinkStorableSchema(e){return requiredLinkToStorableSchema(null==e?void 0:e.requiredLink)}function requiredLinkToStorableSchema(e){if(e){const t=e.storableSchema
if(void 0!==t)return t}return null}function getRequiredLinkAssaySchema(e){return requiredLinkToAssaySchema(e.requiredLink)}function requiredLinkToAssaySchema(e){if(e){const t=e.assaySchema
if(void 0!==t)return t}return null}function getRequiredLinkSchemaId(e){return requiredLinkToSchemaId(e.requiredLink)}function requiredLinkToSchemaId(e){const t=[requiredLinkToBatchSchema,requiredLinkToTagSchema,requiredLinkToStorableSchema,requiredLinkToAssaySchema,requiredLinkToSchemaInterface]
for(const n of t){const t=n(e)
if(t)return t.id}return null}const L=i.shape({id:i.number,apiId:i.string,name:i.string.isRequired,displayName:i.string.isRequired,systemName:i.string,fieldType:i.string,isParentLink:i.bool,isRequired:i.bool.isRequired,isComputed:i.bool.isRequired,isConvertedFromLink:i.bool.isRequired,isSnapshot:i.bool,isIntegration:i.bool.isRequired,isMulti:i.bool,requiredLink:P,schemaFieldSelectorId:i.string,legalTextSelectorId:i.string,archiveRecord:r.k0}),D=i.shape({name:i.string.isRequired,fieldType:i.string.isRequired})
function isBioentityLinkFieldWithTargetSchema(e){return isBioentityLinkSchemaField(e)&&(requiredLinkHasTagSchema(e.requiredLink)||requiredLinkHasSchemaInterface(e.requiredLink))}function isSampleFieldForBioentity(e){return e.requiredLink.sampleType===l.ZP.BIOENTITY}function isBioentityLinkSchemaField(e){return[a.BIOENTITY_LINK,a.PART_LINK,a.TRANSLATION_LINK,a.TRANSCRIPTION_LINK].includes(e.fieldType)}function isFieldOptionSubmenu(e){return e.hasOwnProperty("submenu")}function isFieldOptionHeader(e){return e.hasOwnProperty("isHeader")}function isFieldOptionLeafField(e){return e.hasOwnProperty("requiredLink")}function getFieldOptionPureTextLabel(e){if(e.pureTextLabel)return e.pureTextLabel;(0,s.hu)("string"==typeof e.label,"A FieldOption must either have a `label` of type string or define `pureTextLabel`")
return e.label}const M=i.shape({label:i.oneOfType([i.string,i.node]).isRequired,fieldDefinition:i.string.isRequired,schemaFieldSelectorId:i.string,requiredLink:P}),w=i.shape({label:i.oneOfType([i.string,i.node]).isRequired,submenu:i.arrayOf(M).isRequired,pureTextLabel:i.string}),F=i.shape({label:i.oneOfType([i.string,i.node]).isRequired,isHeader:i.bool})
var k
!function(e){e.FORMULA="FORMULA"
e.FIELD="FIELD"
e.LINKED_RESULT_FIELDS="LINKED_RESULT_FIELDS"
e.LITERAL="LITERAL"
e.API_IDENTIFIER="API_IDENTIFIER"
e.REGISTRATION_STATUS="REGISTRATION_STATUS"
e.AMINO_ACIDS="AMINO_ACIDS"
e.BASES="BASES"
e.BASES_WITH_MODS="BASES_WITH_MODS"
e.BASES_WITH_MODS_AND_MONOMER_MW="BASES_WITH_MODS_AND_MONOMER_MW"
e.PRIMER_OLIGOS="PRIMER_OLIGOS"
e.PARENT_SEQUENCE="PARENT_SEQUENCE"
e.DNA_ALIGNMENTS="DNA_ALIGNMENTS"
e.CHEMICAL_STRUCTURE="CHEMICAL_STRUCTURE"}(k||(k={}))
function isSnapshotField(e){return e.isSnapshot}},896986:(e,t,n)=>{n.d(t,{eI:()=>getFieldForColumn,f8:()=>getArchivedFields,zL:()=>getNonArchivedOrComputedFields})
var a=n(531041),i=n(382857),r=n(407307)
function getArchivedFields(e){return e.allFields.filter((e=>(0,r.Z)(e)))}function getFieldForColumn(e,t){return a.default.findWhere(e.allFields,{id:t.tagSchemaFieldId})}function getNonArchivedOrComputedFields(e){return a.default.reject(e,(e=>{var t
return e.isComputed||(0,i.ZP)({...e,id:null!==(t=e.apiId)&&void 0!==t?t:""})}))}},197229:(e,t,n)=>{n.d(t,{a:()=>nonComputedFields,k:()=>tagIsComputed})
var a=n(227887)
function nonComputedFields(e){return e.fields.filter((e=>!e.isComputed))}function tagIsComputed(e){return(0,a.Yx)(e)&&e.tagSchemaField.isComputed}},802021:(e,t,n)=>{n.d(t,{X:()=>sendReviewBlockingAnalytics,c:()=>isIntegrationField})
var a=n(468943),i=n(171471)
function isIntegrationField(e){return e.isIntegration}function sendReviewBlockingAnalytics(e){const t=e.filter((e=>e.field&&isIntegrationField(e.field)))
if(t.length){const n=e.length===t.length
a.KK(i.x4.INTEGRATION_FIELD_BLOCKED_REVIEW,{allErrorsIntegration:n})}}},996693:(e,t,n)=>{n.d(t,{Z:()=>getValidationErrorText,s:()=>fieldlessValidationErrorTexts})
var a=n(280034),i=n(85722)
function longErrorText(e){return`${a.Ob.FAILED}: ${e}`}function getValidationErrorText(e,t,n=!1){if(!(e&&(0,i.gO)(e)&&t&&t.errorRecords&&t.errorRecords.length))return null
const a=t.errorRecords[0].message,r=fieldlessValidationErrorTexts(t,n)[0]
return r||(n?a:longErrorText(a))}function fieldlessValidationErrorTexts(e,t=!1){const n=e&&e.errorRecords&&e.errorRecords.filter((({field:e})=>null==e))
return n?n.map((e=>t?e.message:longErrorText(e.message))):[]}},433888:(e,t,n)=>{n.d(t,{GT:()=>updateSchemaInterfaceField,Ky:()=>convertToSchemaConstraintUpdatePayload,L0:()=>updateInterfaceSchemaAssociations,Nl:()=>setSchemaInterfaceNameTemplate,Re:()=>bulkUnarchive,Tz:()=>schemaInterfaceURL,Yt:()=>createSchemaInterfaceURL,ZZ:()=>removeInterfaceSchemaAssociation,_C:()=>updateCollaborators,bx:()=>updateSchemaInterface,cV:()=>schemaInterfacesURL,e9:()=>createSchemaInterface,gL:()=>removeSchemaInterfaceField,le:()=>convertToSchemaConstraintCreatePayload,pb:()=>addSchemaInterfaceField,uc:()=>bulkArchive})
var a=n(232606),i=n(771398),r=n(8747)
function schemaInterfacesURL(){return"/schema-interfaces/"}function createSchemaInterfaceURL(){return"/schema-interfaces/create"}function schemaInterfaceURL(e){return`/schema-interfaces/${e}`}function createSchemaInterface(e){return i.s0({url:"/1/api/schema-interfaces",data:e})}function convertToSchemaConstraintCreatePayload(e){const t=e.fields.map((e=>({name:e.name})))
return{uniqueResidues:e.uniqueResidues,uniqueCanonicalSmiles:e.uniqueCanonicalSmiles,areUniqueResiduesCaseSensitive:e.areUniqueResiduesCaseSensitive,fields:t}}function convertToSchemaConstraintUpdatePayload(e){const t=e.fields.map((e=>{const t=e.apiId;(0,a.hu)(Boolean(t),"Expected field to have an apiId")
return{apiId:t,name:e.name}}))
return{uniqueResidues:e.uniqueResidues,uniqueCanonicalSmiles:e.uniqueCanonicalSmiles,areUniqueResiduesCaseSensitive:e.areUniqueResiduesCaseSensitive,fields:t}}function updateSchemaInterface(e,t){return i.Ry({url:`/1/api/schema-interfaces/${e}`,data:t})}function addSchemaInterfaceField({interfaceId:e,field:t}){return i.s0({url:`/1/api/schema-interfaces/${e}/fields`,data:{field:t}})}function updateSchemaInterfaceField({interfaceId:e,fieldId:t,field:n}){return r.by({url:`/1/api/schema-interfaces/${e}/fields/${t}`,data:JSON.stringify({field:n}),type:"PATCH",dataType:"json",contentType:"application/json"})}function removeSchemaInterfaceField(e){return i.WY({url:`/1/api/schema-interfaces/${e.interfaceId}/fields/${e.fieldId}`})}function updateCollaborators(e,t){return i.Ry({url:`/1/api/schema-interfaces/${e}/collaborators`,data:t})}function bulkArchive(e,t){return r.s0({url:"/1/api/schema-interfaces:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return i.s0({url:"/1/api/schema-interfaces:bulk-unarchive",data:{ids:e}})}function updateInterfaceSchemaAssociations(e,t){return i.s0({url:`/1/api/schemas/${e}/interfaces`,data:{interfaces:t.map((e=>({apiId:e})))}})}function removeInterfaceSchemaAssociation(e,t,n){return r.Mx({url:`/1/api/schemas/${e}/interfaces/${t}`,data:{schemaPrefixReplacement:n}})}function setSchemaInterfaceNameTemplate(e,t,n){return i.s0({url:`/1/api/schema-interfaces/${e}/name-template`,data:{nameTemplateParts:t,shouldOrderPartsBySequence:n}})}},153875:(e,t,n)=>{n.d(t,{T:()=>convertFromClientInterfaceFieldToSchemaField,Z:()=>d})
var a=n(989526),i=n(531041),r=n(578624),s=n(459830),o=n(537076),l=n(443375),c=n(714200)
function SchemaInterfaceFieldTableRow(e){var t,n,i,r
const d=e.fileType===s.SEQUENCE&&(e.sequenceType===o.SequenceSchemaType.DNA_SEQUENCE||e.sequenceType===o.SequenceSchemaType.RNA_SEQUENCE)
return a.createElement(c.Z,{availableFieldOptions:(0,l._K)({initialField:e.initialField,schemaFieldSelectors:e.schemaFieldSelectors,storableSchemas:null!==(t=e.storableSchemas)&&void 0!==t?t:[],tagSchemas:null!==(n=e.tagSchemas)&&void 0!==n?n:[],schemaInterfaces:null!==(i=e.schemaInterfaces)&&void 0!==i?i:[],batchSchemas:null!==(r=e.batchSchemas)&&void 0!==r?r:[],includeBatchLinks:!0,includeBooleanField:!1,includeGenericBioentityLinks:!1,includeSnapshotField:!1,includeJSONField:!1,includeArchivedSchemas:!0,includeSequenceLinks:d,includeDnaSequenceSpecificLinks:!1,sequenceSchemaType:e.sequenceType}),...e,isUneditable:!1,isRemoveOnly:!0,disableDrag:!0,shouldShowWarehouseWarning:!0})}const convertFromClientInterfaceFieldToSchemaField=e=>({...e,name:e.displayName,dbId:e.id,archiveRecord:null,cid:i.default.uniqueId(),isComputed:!1,isConvertedFromLink:!1,isSnapshot:!1,isIntegration:!1,isParentLink:!1})
const d=function SchemaInterfaceFieldTable(e){var t,n
return a.createElement(r.ZP,{...e,fields:e.fields.map((e=>convertFromClientInterfaceFieldToSchemaField(e))),onFieldsChange:t=>{e.onFieldsChange(t.map((e=>(e=>{var t
return{id:e.id,apiId:e.apiId,systemName:e.systemName,displayName:e.displayName,fieldType:e.fieldType,isRequired:e.isRequired,isMulti:e.isMulti,requiredLink:e.requiredLink||null,schemaFieldSelectorId:null!==(t=e.schemaFieldSelectorId)&&void 0!==t?t:null}})(e))))},shouldShowIsIntegration:!1,shouldShowIsParentLink:!1,shouldShowIsRequired:!0,itemClass:SchemaInterfaceFieldTableRow,schemaType:"Interface",fileType:null===(t=e.baseBioentityType)||void 0===t?void 0:t.folderItemType,sequenceType:null===(n=e.baseBioentityType)||void 0===n?void 0:n.sequenceType})}},480322:(e,t,n)=>{n.d(t,{Nq:()=>getInterfaceConstraintErrorsForInterface,X$:()=>s,rS:()=>r,uc:()=>getInterfaceConstraintErrorsForSchema})
var a,i=n(525098)
!function(e){e.MISSING_FIELD="missing_field"
e.INVALID_FIELD="invalid_field"
e.INVALID_ARCHIVE="invalid_archive"
e.INVALID_FORMULA_FIELDS="invalid_formula_fields"
e.OVERLAPPING_FIELDS="overlapping_field"
e.INVALID_BASE_BIOENTITY_TYPE="invalid_base_bioentity_type"}(a||(a={}))
const r=[a.MISSING_FIELD,a.INVALID_FIELD,a.INVALID_ARCHIVE,a.INVALID_FORMULA_FIELDS,a.OVERLAPPING_FIELDS],s=[a.INVALID_BASE_BIOENTITY_TYPE]
class InvalidInterfaceConstraintError extends i.Z{}function getInterfaceConstraintErrorsForSchema(e){if(e&&e.interfaceConstraintError){const t=[]
e.errors.forEach((e=>{switch(e.errorType){case a.MISSING_FIELD:t.push(function compileMissingFieldsErrorsForSchema(e){return{id:e.interface.id,error:`This schema has no field that matches "${e.field.displayName}" (${e.field.systemName}) of interface "${e.interface.name}"`,errorType:a.MISSING_FIELD}}(e))
break
case a.INVALID_FIELD:t.push(function compileInvalidFieldsErrorsForSchema(e){return{id:e.interface.id,error:`"${e.fieldName}" > "${e.invalidProperty}" property does not match values with "${e.fieldName}" on interface "${e.interface.name}."`,errorType:a.INVALID_FIELD}}(e))
break
case a.INVALID_BASE_BIOENTITY_TYPE:t.push(function compileInvalidBaseBioentityTypeErrorsForSchema(e){return{id:e.interface.id,error:`The entity type of this schema does not match the entity type of interface "${e.interface.name}": "${e.interfaceBaseBioentityType}"`,errorType:a.INVALID_BASE_BIOENTITY_TYPE}}(e))
break
case a.OVERLAPPING_FIELDS:t.push(function compileOverlappingFieldsErrorsForSchema(e){const t=e.interfaces.map((e=>e.name))
return{error:`Multiple interfaces have field "${e.fieldName}": "${t.join('", "')}"`,errorType:a.OVERLAPPING_FIELDS}}(e))
break
case a.INVALID_ARCHIVE:t.push(function compileInvalidArchiveErrorsForSchema(e){return{id:e.interface.id,error:`Cannot archive field "${e.fieldName}" because it is found on interface "${e.interface.name}"`,errorType:a.INVALID_ARCHIVE}}(e))
break
case a.INVALID_FORMULA_FIELDS:t.push(function compileInvalidFormulaFieldErrorsForSchema(e){return{id:e.interface.id,error:`Field "${e.fieldName}" cannot be constrained by interface "${e.interface.name}" because it is a snapshot or computed field.`,errorType:a.INVALID_FORMULA_FIELDS}}(e))
break
default:throw new InvalidInterfaceConstraintError("Invalid interface constraint error received")}}))
return t}return null}function getInterfaceConstraintErrorsForInterface(e){if(e&&e.interfaceConstraintError){const t=[]
e.errors.forEach((e=>{switch(e.errorType){case a.MISSING_FIELD:t.push(function compileMissingFieldsErrorsForInterface(e){return{id:e.schema.id,registryId:e.schema.registryId,ownerUrlId:e.schema.ownerUrlId,error:`Schema "${e.schema.name}" has no field that matches "${e.field.displayName}" (${e.field.systemName})`,errorType:a.MISSING_FIELD}}(e))
break
case a.INVALID_FIELD:t.push(function compileInvalidFieldsErrorsForInterface(e){return{id:e.schema.id,registryId:e.schema.registryId,ownerUrlId:e.schema.ownerUrlId,error:`Schema "${e.schema.name}" has conflicting value for property "${e.fieldName}" > "${e.invalidProperty}"`,errorType:a.INVALID_FIELD}}(e))
break
case a.INVALID_BASE_BIOENTITY_TYPE:t.push(function compileInvalidBaseBioentityTypeErrorsForInterface(e){return{id:e.schema.id,registryId:e.schema.registryId,ownerUrlId:e.schema.ownerUrlId,error:`Schema "${e.schema.name}" has conflicting entity type "${e.schemaBaseBioentityType}"`,errorType:a.INVALID_BASE_BIOENTITY_TYPE}}(e))
break
case a.OVERLAPPING_FIELDS:t.push(function compileOverlappingFieldsErrorsForInterface(e){const t=e.interfaces.map((e=>e.name))
return{id:e.schema.id,registryId:e.schema.registryId,ownerUrlId:e.schema.ownerUrlId,error:`Schema "${e.schema.name}" has field "${e.fieldName}" that exists on multiple interfaces: "${t.join(", ")}"`,errorType:a.OVERLAPPING_FIELDS}}(e))
break
case a.INVALID_ARCHIVE:t.push(function compileInvalidArchiveErrorsForInterface(e){return{id:e.schema.id,registryId:e.schema.registryId,ownerUrlId:e.schema.ownerUrlId,error:`Field "${e.fieldName}" cannot be implemented on schema "${e.schema.name}" because the schema's matching field is archived.`,errorType:a.INVALID_ARCHIVE}}(e))
break
case a.INVALID_FORMULA_FIELDS:t.push(function compileInvalidFormulaFieldErrorsForInterface(e){return{id:e.schema.id,registryId:e.schema.registryId,ownerUrlId:e.schema.ownerUrlId,error:`Schema "${e.schema.name}" cannot have a snapshot or computed field that matches "${e.fieldName}"`,errorType:a.INVALID_FORMULA_FIELDS}}(e))
break
default:throw new InvalidInterfaceConstraintError("Invalid interface constraint error received")}}))
return t}return null}},688594:(e,t,n)=>{n.d(t,{AY:()=>updateSnapshotField,c3:()=>createSnapshotField,kq:()=>convertSnapshotField})
var a=n(771398)
function createSnapshotField({schemaId:e,displayName:t,systemName:n,lookupConfigSpec:i}){return a.s0({url:"/1/api/snapshot-field",data:{schemaId:e,displayName:t,systemName:n,lookupConfigSpec:i}})}function updateSnapshotField({snapshotFieldId:e,displayName:t,systemName:n,lookupConfigSpec:i,archiveRecord:r}){return a.Ry({url:`/1/api/snapshot-field/${e}`,data:{displayName:t,systemName:n,lookupConfigSpec:i,archiveRecord:r}})}function convertSnapshotField({snapshotFieldId:e}){return a.Vz({url:`/1/api/snapshot-field/${e}:unsnapshot`})}},721641:(e,t,n)=>{n.d(t,{R:()=>r,q:()=>s})
var a,i=n(780188)
!function(e){e.REQUEST_TASK="REQUEST_TASK"
e.PROCESS="PROCESS"
e.ENTITY="ENTITY"
e.BOX="BOX"
e.PLATE="PLATE"
e.LOCATION="LOCATION"
e.CONNECTION="CONNECTION"
e.SCHEMA_INTERFACE="SCHEMA_INTERFACE"
e.STUDY="STUDY"}(a||(a={}))
const r={...i.aJ,...a},s={...i.XU,REQUEST_TASK:"Task",PROCESS:"Task",ENTITY:"Entity",BOX:"Box",PLATE:"Plate",LOCATION:"Location",CONNECTION:"Connection",SCHEMA_INTERFACE:"Schema Interface",STUDY:"Study"}},563009:(e,t,n)=>{n.d(t,{AZ:()=>setSchemaSpecSqlIdentifier,FB:()=>setSchemaInputFileConfig,HO:()=>setSchemaSpecError,I_:()=>setSchemaSpecOwner,Iq:()=>handleSchemaSpecError,JI:()=>schemaSpecFetched,OE:()=>schemaSpecResetToDraft,Qh:()=>setSchemaSpecName,RZ:()=>schemaSpecChanged,UW:()=>resetSchemaSpecUi,_r:()=>setConnectionSchemaId,hb:()=>setSchemaOutputFileConfig,oH:()=>setSchemaSpecAllowInsertRunFromInbox,rc:()=>setSchemaSpecFields,tB:()=>setSchemaSpecAllowCreateRunFromNLAD,uk:()=>a})
var a,i=n(826478),r=n(974913),s=n(54548),o=n(714700)
!function(e){e.SCHEMA_SPEC_ALLOW_CREATE_RUN_FROM_NLAD_CHANGED="SCHEMA_SPEC_ALLOW_CREATE_RUN_FROM_NLAD_CHANGED"
e.SCHEMA_SPEC_ALLOW_INSERT_RUN_FROM_INBOX_CHANGED="SCHEMA_SPEC_ALLOW_INSERT_RUN_FROM_INBOX_CHANGED"
e.SCHEMA_SPEC_CHANGED="SCHEMA_SPEC_CHANGED"
e.SCHEMA_SPEC_CONNECTION_SCHEMA_ID_CHANGED="SCHEMA_SPEC_CONNECTION_SCHEMA_ID_CHANGED"
e.SCHEMA_SPEC_FETCHED="SCHEMA_SPEC_FETCHED"
e.SCHEMA_SPEC_RESET_TO_DRAFT="SCHEMA_SPEC_RESET_TO_DRAFT"
e.SCHEMA_SPEC_UPDATE_FAILED="SCHEMA_SPEC_UPDATE_FAILED"
e.SCHEMA_SPEC_INPUT_FILE_CONFIG_CHANGED="SCHEMA_SPEC_INPUT_FILE_CONFIG_CHANGED"
e.SCHEMA_SPEC_OUTPUT_FILE_CONFIG_CHANGED="SCHEMA_SPEC_OUTPUT_FILE_CONFIG_CHANGED"
e.SCHEMA_SPEC_FIELD_CHANGED="SCHEMA_SPEC_FIELD_CHANGED"
e.SCHEMA_SPEC_CREATE_STATE_CHANGE="SCHEMA_SPEC_CREATE_STATE_CHANGE"
e.SCHEMA_SPEC_OWNER_CHANGED="SCHEMA_SPEC_OWNER_CHANGED"
e.SCHEMA_SPEC_NAME_CHANGED="SCHEMA_SPEC_NAME_CHANGED"
e.SCHEMA_SPEC_SQL_IDENTIFIER_CHANGED="SCHEMA_SPEC_SQL_IDENTIFIER_CHANGED"
e.SCHEMA_SPEC_UI_RESET="SCHEMA_SPEC_UI_RESET"}(a||(a={}))
function schemaSpecResetToDraft(e){return{type:a.SCHEMA_SPEC_RESET_TO_DRAFT,specString:e}}function schemaSpecChanged(e){return{type:a.SCHEMA_SPEC_CHANGED,specString:e}}function schemaSpecFetched(e,t){return{type:a.SCHEMA_SPEC_FETCHED,schemaId:e,spec:t}}function setSchemaSpecError(e){return{type:a.SCHEMA_SPEC_UPDATE_FAILED,errorState:e}}function setSchemaInputFileConfig(e){return{type:a.SCHEMA_SPEC_INPUT_FILE_CONFIG_CHANGED,inputFileConfigs:e}}function setSchemaOutputFileConfig(e){return{type:a.SCHEMA_SPEC_OUTPUT_FILE_CONFIG_CHANGED,outputFileConfigs:e}}function setSchemaSpecOwner(e){return{type:a.SCHEMA_SPEC_OWNER_CHANGED,ownerId:e}}function setSchemaSpecFields(e){return{type:a.SCHEMA_SPEC_FIELD_CHANGED,fields:e}}function setSchemaSpecName(e){return{type:a.SCHEMA_SPEC_NAME_CHANGED,name:e}}function setSchemaSpecSqlIdentifier(e){return{type:a.SCHEMA_SPEC_SQL_IDENTIFIER_CHANGED,sqlIdentifier:e}}function setSchemaSpecAllowCreateRunFromNLAD(e){return{type:a.SCHEMA_SPEC_ALLOW_CREATE_RUN_FROM_NLAD_CHANGED,allowCreateRunFromNotebook:e}}function setSchemaSpecAllowInsertRunFromInbox(e){return{type:a.SCHEMA_SPEC_ALLOW_INSERT_RUN_FROM_INBOX_CHANGED,allowInsertRunFromInbox:e}}function setConnectionSchemaId(e){return{type:a.SCHEMA_SPEC_CONNECTION_SCHEMA_ID_CHANGED,connectionSchemaId:e}}function resetSchemaSpecUi(){const e=(0,o.u)()
return{type:a.SCHEMA_SPEC_UI_RESET,ownerChoices:e,ownerId:e.length>0?e[0].id:null}}function handleSchemaSpecError(e){return t=>{const n=(0,s.Z)(e)
if(null!=n){t(setSchemaSpecError(n))
r.ZP.notifyError(e,{duration:i.NA})}else r.ZP.notifyError(e)}}},714700:(e,t,n)=>{n.d(t,{P:()=>stringify,u:()=>getSchemaOwnerChoices})
var a=n(99312),i=n(788836)
function stringify(e){return JSON.stringify(e,null,4)}function getSchemaOwnerChoices(){return a.isBrowser&&i.Z.currentUser()?i.Z.currentUser().organizations:[]}},31161:(e,t,n)=>{n.d(t,{Z:()=>m})
var a=n(767807),i=n.n(a),r=n(602652),s=n(989526),o=n(289474),l=n(104756),c=n(88941),d=n(778223),u=n(195300)
class BlobLinkInput extends s.Component{constructor(){super(...arguments)
this.state={isModalOpen:!1}}_getBlobs(){return this.props.defaultValue.targetBlobs||[]}_canAddMoreBlobs(){return this.props.defaultValue.tagSchemaField.isMulti||0===this._getBlobs().length}_handleChangeBlobs(e){this.props.onChange({targetBlobs:e,value:e.map((e=>e.name)).join(", ")})}_handleAddBlobs(e){this._handleChangeBlobs([...this._getBlobs(),...e])}_removeBlobAtIndex(e){const t=i()(this._getBlobs(),{$splice:[[e,1]]})
this._handleChangeBlobs(t)}render(){var e
const t=this._getBlobs()
return s.createElement("div",{className:"chipSelectInput chipLinkInput"},t.map(((e,t)=>s.createElement(d.ZP,{key:t,className:"chip-container",size:d.TK.SMALL,text:e.name,onRemove:e=>{this._removeBlobAtIndex(t)}}))),this._canAddMoreBlobs()&&s.createElement("div",null,this.state.isModalOpen&&s.createElement(u.Z,{open:!0},s.createElement(l.Z,{allowMultiple:this.props.defaultValue.tagSchemaField.isMulti,onRequestClose:()=>{this.setState({isModalOpen:!1})},onUploadFiles:e=>o.H(e,{shouldGeneratePreviewFile:!0,onBlobsCreated:e=>{this._handleAddBlobs(e)}})})),s.createElement(c.Z,{autoFocus:!1,className:"chipSelectInput-input u-flex-grow",onFocus:()=>{this.setState({isModalOpen:!0})},placeholder:null!==(e=this.props.placeholder)&&void 0!==e?e:"Upload File",type:"text",value:"",onChange:()=>{},readOnly:!1})))}}BlobLinkInput.propTypes={defaultValue:r.object.isRequired,onChange:r.func.isRequired,placeholder:r.string}
const m=BlobLinkInput},437931:(e,t,n)=>{n.d(t,{Z:()=>BooleanValueEditor})
var a=n(989526),i=n(284696),r=n(954240),s=n(865486),o=n(924982),l=n(549983)
function BooleanValueEditor(e){const[t,n]=(0,a.useState)(e.defaultValue),c=(0,a.useMemo)((()=>null!=t?a.createElement("div",null,(0,i.mB)(t)):a.createElement(l.Z,{value:e.placeholder})),[t,e.placeholder])
return a.createElement(r.ZP,{displayName:c,menu:a.createElement(s.ZP,{value:t,height:s.ZP.HEIGHTS.MEDIUM,width:s.ZP.WIDTHS.FIT_CONTENT},a.createElement(o.Z,{key:i.DE.TRUE,value:!0,onSelect:t=>{e.onUpdate({value:i.DE.TRUE,booleanValue:t})
n(t)},dataTestAttrs:{component:"BooleanValueEditor",element:"trueOption"}},i.DE.TRUE),a.createElement(o.Z,{key:i.DE.FALSE,value:!1,onSelect:t=>{e.onUpdate({value:i.DE.FALSE,booleanValue:t})
n(t)},dataTestAttrs:{component:"BooleanValueEditor",element:"falseOption"}},i.DE.FALSE))})}},263490:(e,t,n)=>{n.d(t,{Z:()=>ControlledFloatValueEditor})
var a=n(989526),i=n(182163)
function ControlledFloatValueEditor(e){var t
return a.createElement(i.Z,{...e,valueAccessorKey:"floatValue",useStringValue:!0,placeholder:null!==(t=e.placeholder)&&void 0!==t?t:"Floating Point Value"})}},535672:(e,t,n)=>{n.d(t,{Z:()=>ControlledIntegerValueEditor})
var a=n(989526),i=n(182163)
function ControlledIntegerValueEditor(e){var t
return a.createElement(i.Z,{...e,valueAccessorKey:"integerValue",useStringValue:!0,placeholder:null!==(t=e.placeholder)&&void 0!==t?t:"Integer Value"})}},182163:(e,t,n)=>{n.d(t,{Z:()=>ControlledNumericValueEditor})
var a=n(989526),i=n(137975)
function ControlledNumericValueEditor(e){const t=e.defaultValue?e.defaultValue.value:null
return a.createElement(i.Z,{focusOnMount:e.autoFocus,onKeyDown:e.onKeyDown,onChange:t=>{const n=e.useStringValue||null==t.target.numericValue?t.target.value:t.target.numericValue
e.onChange({[e.valueAccessorKey]:""===n?null:n,value:t.target.value})},placeholder:e.placeholder,value:t})}},252511:(e,t,n)=>{n.d(t,{FX:()=>getSchemaFieldIdFromColumnKey,Gv:()=>isTagSortKey,H$:()=>getTagIdFromSortKey,IX:()=>listSortedTagColumns,MN:()=>mapTagsToColumns,NE:()=>getRowHeight,Yz:()=>y,iD:()=>isContentsTagSortKey,jB:()=>isSchemaTagColumnKey,oH:()=>listFileTagColumns,qO:()=>listContainableSchemaFieldColumns,u4:()=>listStorableTagColumns,wS:()=>getTagNameFromSortKey,yF:()=>isCustomTagColumnKey})
var a=n(989526),i=n(531041),r=n(227887),s=n(497790),o=n(251808),l=n(62315),c=n(778223),d=n(158716),u=n(648068),m=n(63573),p=n(379346),h=n(556543),E=n(106727),S=n(897171)
const T=c.TK.SMALL
function _extraFieldAccessorKey(e,t,n){const a=`${m.Pi}${e}`
return void 0===t||n?a:`${a}:fromSchemaFieldId:${t}`}function mapTagsToColumns({tags:e,tagColumns:t,multipleTagsPerColumn:n=!1,mergeBySchemaFieldName:s=!0,maxChipsPerRow:o,collapsedMultiLinkOverflowElement:l}){const c=i.default.object(t.map((t=>{let n=[]
t.accessorKey.startsWith(m.Pi)&&(n=e.filter((e=>_extraFieldAccessorKey(e.name,(0,r.Yx)(e)?e.tagSchemaField.id:void 0,s)===t.accessorKey)))
return[t.accessorKey,n]})))
return{tagFields:i.default.mapObject(c,((e,t)=>n?function mapMultipleFieldValuesForColumn({fieldValues:e,maxChipsPerRow:t,collapsedMultiLinkOverflowElement:n}){return e.length>1&&e.every((e=>u.ZD(e)))?a.createElement(S.HM,{fieldValues:e,maxChipsPerRow:t,collapsedMultiLinkOverflowElement:n}):a.createElement("div",null,e.map(((e,n)=>a.createElement(S.ZP,{tag:e,key:n,maxChipsPerRow:t}))))}({fieldValues:e,maxChipsPerRow:o,collapsedMultiLinkOverflowElement:l}):a.createElement(S.ZP,{tag:e[0],maxChipsPerRow:o})))}}function _getSortedFileSchemaFieldTagColumnsData(e,t=!0){const n=i.default.pluck(e,"tagSchema"),a=new Set
return{fileSchemaFieldTagColumnsData:E.U(n,t),fileResultFieldNames:a}}const g=l.Oq.TAG.prefix,f=`contents_${g}`
function isTagSortKey(e){return e.startsWith(g)}function isContentsTagSortKey(e){return e.startsWith(f)}function getTagNameFromSortKey(e){return e.split(g).pop()}function getTagIdFromSortKey(e){return Number(e.split("fromSchemaFieldId:").pop())}const I="schema_tag:",A="custom_tag:"
function isSchemaTagColumnKey(e){return null!=e&&e.startsWith(I)}function isCustomTagColumnKey(e){return null!=e&&e.startsWith(A)}function getSchemaFieldIdFromColumnKey(e){var t
return null!==(t=null==e?void 0:e.split(I).pop())&&void 0!==t?t:""}function _getColumnsForTags(e,t,n=!0){return e.map((e=>{const a=t.has(e.name)?`${m.tv}${e.name}`:_extraFieldAccessorKey(e.name,e.tagSchemaFieldId,n),i=function getColumnKeyFromTag(e){return e.tagSchemaFieldId?`schema_tag:${e.tagSchemaFieldId}`:`custom_tag:${e.name}`}(e),r=function getSortKeyFromTagName(e){return`${g}${e}`}(e.name)
return{header:e.displayName||e.name,icon:"tag",accessorKey:a,columnKey:i,flexGrow:1,isCollapsible:!0,hidden:!1,isSortable:!(t.has(e.name)||(0,h.$5)(e.fieldType)&&e.fieldType!==s.FieldType.SELECTOR),sortKey:r}}))}function listFileTagColumns(e,{includeCustomTagColumns:t=!0,mergeBySchemaFieldName:n=!0}={}){const{fileSchemaFieldTagColumnsData:a,fileResultFieldNames:r}=_getSortedFileSchemaFieldTagColumnsData(e,n)
if(t){const t=function _getSortedTagColumnsData(e,t={}){const n=t.schemaFieldNames||[],a=i.default.chain(e).pluck("tags").flatten().reject((e=>i.default.contains(n,e.name))).value(),r=i.default.countBy(a,"name")
return i.default.chain(a).sortBy((e=>r[e.name])).reverse().uniq((({name:e})=>e)).value().map((e=>{const t={name:e.name}
e.tagSchemaField&&(t.tagSchemaFieldId=e.tagSchemaField.id)
return t}))}(e,{schemaFieldNames:a.map((({name:e})=>e))})
return _getColumnsForTags(a.concat(t),r,n)}return _getColumnsForTags(a,r,n)}function listStorableTagColumns(e){const t=i.default.countBy(e,(e=>p.ZP.apiIdToType(e.id))),n=Object.keys(t).sort(((e,n)=>t[e]-t[n])).reverse().reduce(((t,n)=>{const a=i.default.chain(e).filter((e=>n===p.ZP.apiIdToType(e.id))).map((e=>e.storableSchema)).value(),r=E.U(a)
return t.concat(r)}),[])
return _getColumnsForTags(i.default.uniq(n,(({name:e})=>e)),new Set)}function listContainableSchemaFieldColumns(e){return _getColumnsForTags(E.U(e),new Set)}function listSortedTagColumns(e){const t=i.default.pluck(e,"schema")
return _getColumnsForTags(E.U(t),new Set)}function getRowHeight(e,t){const n=i.default.max(e.map((e=>(0,r.Yx)(e)&&u.ZD(e)?e[(0,o.OU)(e.tagSchemaField.fieldType)].length:0)))
return(0,d.m2)(t?Math.min(n,t+1):n,T)}const y={header:"Validation Errors",accessorKey:"validationErrors",flexGrow:1,hidden:!0}},462839:(e,t,n)=>{n.d(t,{Z:()=>m})
var a=n(989526),i=n(232606),r=n(459830),s=n(838811),o=n(941845),l=n(730981),c=n(319455),d=n(778223),u=n(155079)
class LocationSelectorInput extends a.Component{constructor(){super(...arguments)
this.handleKeyDown=e=>{(0,s.Z)({event:e,value:this.props.typedValue,onSetValue:this.handleSetValue,onEscape:this.props.onEscape,onTabKey:this.props.onTabKey})}
this.handleSetValue=e=>{this.props.onSetData(this.props.query,e)}
this.canSelectAdditional=()=>0===this.getSummaries(this.props.typedValue).length
this.getLinksAreDisplayed=()=>this.getSummaries(this.props.typedValue).length>0
this.removeLink=()=>{this.props.onUpdateTypedValue(null)}
this.getSummaries=e=>{var t
return null!==(t=null==e?void 0:e.storableSummaries)&&void 0!==t?t:[]}
this.handleUpdateInputValue=e=>{this.props.onUpdateQuery(e)}
this.renderLinks=()=>{const e=this.getSummaries(this.props.typedValue)
if(e.length>0){const t=e[0]
return a.createElement(u.Z,{key:t.id,id:t.id,size:d.TK.TABLE_CELL,onRemove:e=>{this.removeLink()}})}return null}
this.getParentStorableTypes=e=>{switch(e){case l.nF.GRID:return[r.StorableItem.BOX,r.StorableItem.PLATE]
case l.nF.BOX:return[r.StorableItem.BOX]
case l.nF.PLATE:return[r.StorableItem.PLATE]
case l.nF.LOCATION:return[r.StorableItem.LOCATION]
case l.nF.GRID_OR_LOCATION:return[r.StorableItem.BOX,r.StorableItem.PLATE,r.StorableItem.LOCATION]
case l.nF.MATRIX_PLATE:return[r.StorableItem.MATRIX_PLATE]
default:(0,i.Gp)(!1,`Unexpected parent storable type ${e}`)
return[]}}
this.renderSearchDropdown=e=>a.createElement(o.Z,{ref:e,registryId:this.props.registryId,query:this.props.query,storableSchemaId:this.props.storableSchemaId,storableTypes:this.getParentStorableTypes(this.props.parentStorableType),onSetData:this.handleSetValue,includeArchived:this.props.includeArchived,storablesToBeMoved:this.props.storablesToBeMoved})}render(){var e
return a.createElement(c.Z,{shouldForwardKeydown:!0,canSelectAdditional:this.canSelectAdditional(),hasTypedValue:this.getLinksAreDisplayed(),onRemoveLastValue:()=>{this.removeLink()},autoFocus:null===(e=this.props.autoFocus)||void 0===e||e,inputValue:this.props.query,onUpdateInputValue:this.handleUpdateInputValue,onKeyDown:this.handleKeyDown,onBlur:this.props.onBlur,renderSelectedValues:this.renderLinks,renderSearchDropdown:this.renderSearchDropdown,shouldCloseOnInsideClick:!1,placeholder:this.canSelectAdditional()?"Type to search...":"",isOutsideTable:this.props.isOutsideTable})}}const m=LocationSelectorInput},106727:(e,t,n)=>{n.d(t,{U:()=>getSortedSchemaFieldTagColumnsData,j:()=>getStorableTagColumnsData})
var a=n(531041),i=n(379346)
function getSortedSchemaFieldTagColumnsData(e,t=!0){const n=a.default.countBy(e,"id")
return a.default.chain(e).compact().uniq("id").sortBy((e=>n[e.id])).reverse().map((e=>e.fields)).flatten().uniq((e=>t?e.name:e.id)).map((({name:e,displayName:t,id:n,fieldType:a})=>({name:e,displayName:t,tagSchemaFieldId:n,fieldType:a}))).value()}function getStorableTagColumnsData(e){const t=a.default.countBy(e,(e=>i.ZP.apiIdToType(e.id))),n=Object.keys(t)
return a.default.chain(n).sortBy((e=>t[e])).reverse().map((t=>getSortedSchemaFieldTagColumnsData(a.default.chain(e).filter((e=>t===i.ZP.apiIdToType(e.id))).map((e=>e.storableSchema)).value()))).flatten().uniq((({name:e})=>e)).value()}},251808:(e,t,n)=>{n.d(t,{$2:()=>areTagsValidAndNotify,Bh:()=>hasValueForAllRequiredFields,EF:()=>filterToSchemaTags,HI:()=>tagUpdateObjectToTagsDict,IT:()=>getTagTableFriendlyTags,JY:()=>getSortedSchemaAndCustomTags,MC:()=>findSchemaTagByApiId,OU:()=>getLinksKey,PB:()=>tagHasLink,UR:()=>getTagsToSet,bt:()=>getInitialTag,l3:()=>getFullFieldType,le:()=>maybeGetLinkedItemDisplayName,mN:()=>getInitialTags,pS:()=>findSchemaTag,qd:()=>tagHasValue,sd:()=>tagsAreEqual,xB:()=>getTagUpdateParams,x_:()=>getTagPlaceholder,y2:()=>relevantKeyFromFieldType,yS:()=>getLinksKeyFromFieldType})
var a=n(84587),i=n.n(a),r=n(531041),s=n(232606),o=n(977989),l=n(227887),c=n(974913),d=n(497790),u=n(411358),m=n(10584),p=n(317275)
function getLinksKeyFromFieldType(e){switch(e){case d.FIELD_TYPES.ASSAY_REQUEST_LINK.type:return"targetAssayRequests"
case d.FIELD_TYPES.ASSAY_RESULT_LINK.type:return"targetResults"
case d.FIELD_TYPES.ASSAY_RUN_LINK.type:return"targetAssayRuns"
case d.FIELD_TYPES.BATCH_LINK.type:return"targetBatches"
case d.FIELD_TYPES.BLOB_LINK.type:return"targetBlobs"
case d.FIELD_TYPES.ENTRY_LINK.type:return"targetEntries"
case d.FIELD_TYPES.BIOENTITY_LINK.type:case d.FIELD_TYPES.PART_LINK.type:case d.FIELD_TYPES.TRANSCRIPTION_LINK.type:case d.FIELD_TYPES.TRANSLATION_LINK.type:return"targetFiles"
case d.FIELD_TYPES.STORABLE_LINK.type:return"targetStorables"
case d.FIELD_TYPES.SAMPLE_LINK.type:return"targetSamples"
default:return null}}function getInitialTag(e){const t={tagSchemaField:e,name:e.name,value:"",url:"",booleanValue:null,datetimeValue:null,floatValue:null,integerValue:null,jsonValue:null,schemaFieldSelectorOptionIds:null,targetBatches:null,targetEntries:null,targetFiles:null,targetSamples:null,targetStorables:null,...e.isComputed&&{computedState:{status:o.q.SUCCEEDED,errorMessage:null}}}
e.fieldType===d.FIELD_TYPES.SELECTOR.type&&(t.schemaFieldSelectorOptionIds=[])
const n=getLinksKeyFromFieldType(e.fieldType)
n&&(t[n]=[])
return t}function getInitialTags(e){return e.map((e=>getInitialTag(e)))}function getFullFieldType(e){const t=r.default.findKey(d.FIELD_TYPES,(t=>t.type===e));(0,s.hu)(null!=t,`Full field type not found for ${e}`)
return d.FIELD_TYPES[t]}function getLinksKey(e){const t=getLinksKeyFromFieldType(getFullFieldType(e).type)
if(!t)throw new Error(`Unexpected fieldType: ${JSON.stringify(e)}`)
return t}function maybeGetLinkedItemDisplayName(e){return"name"in e&&e.name||""}function tagsAreEqual(e){return 1===new Set(e.map((e=>i()(getTagUpdateParams(e))))).size}function relevantKeyFromFieldType(e){const t=getLinksKeyFromFieldType(e)
switch(e){case d.FIELD_TYPES.TEXT.type:case d.FIELD_TYPES.DATE.type:case d.FIELD_TYPES.LONG_TEXT.type:return"value"
case d.FIELD_TYPES.INTEGER.type:return"integerValue"
case d.FIELD_TYPES.FLOAT.type:return"floatValue"
case d.FIELD_TYPES.BOOLEAN.type:return"booleanValue"
case d.FIELD_TYPES.DATETIME.type:return"datetimeValue"
case d.FIELD_TYPES.SELECTOR.type:return"schemaFieldSelectorOptionIds"
case d.FIELD_TYPES.JSON.type:return"jsonValue"
case d.FIELD_TYPES.ASSAY_REQUEST_LINK.type:case d.FIELD_TYPES.ASSAY_RESULT_LINK.type:case d.FIELD_TYPES.ASSAY_RUN_LINK.type:case d.FIELD_TYPES.BATCH_LINK.type:case d.FIELD_TYPES.BIOENTITY_LINK.type:case d.FIELD_TYPES.ENTRY_LINK.type:case d.FIELD_TYPES.PART_LINK.type:case d.FIELD_TYPES.TRANSLATION_LINK.type:case d.FIELD_TYPES.TRANSCRIPTION_LINK.type:case d.FIELD_TYPES.BLOB_LINK.type:case d.FIELD_TYPES.SAMPLE_LINK.type:case d.FIELD_TYPES.STORABLE_LINK.type:return t
default:return}}function getTagTableFriendlyTags(e){return e.map((e=>e.tagSchemaField.fieldType===d.FIELD_TYPES.DATETIME.type?{...e,value:e.value?(0,m.nI)(e.value):e.value}:e))}function getTagUpdateParams(e){if((0,l.Yx)(e)){const t=e.tagSchemaField.fieldType,n=relevantKeyFromFieldType(t),a=e.tagSchemaField.legalTextSelectorId?{schemaFieldSelectorOptionIds:e.schemaFieldSelectorOptionIds}:{}
switch(t){case d.FIELD_TYPES.LONG_TEXT.type:case d.FIELD_TYPES.INTEGER.type:case d.FIELD_TYPES.FLOAT.type:case d.FIELD_TYPES.BOOLEAN.type:case d.FIELD_TYPES.DATE.type:case d.FIELD_TYPES.DATETIME.type:case d.FIELD_TYPES.JSON.type:case d.FIELD_TYPES.BLOB_LINK.type:case d.FIELD_TYPES.SAMPLE_LINK.type:case d.FIELD_TYPES.STORABLE_LINK.type:return{...a,...(0,p.Z)(e,n)}
case d.FIELD_TYPES.SELECTOR.type:return(0,p.Z)(e,n)
case d.FIELD_TYPES.ASSAY_REQUEST_LINK.type:case d.FIELD_TYPES.ASSAY_RESULT_LINK.type:case d.FIELD_TYPES.ASSAY_RUN_LINK.type:case d.FIELD_TYPES.BATCH_LINK.type:case d.FIELD_TYPES.BIOENTITY_LINK.type:case d.FIELD_TYPES.ENTRY_LINK.type:case d.FIELD_TYPES.PART_LINK.type:case d.FIELD_TYPES.TRANSCRIPTION_LINK.type:case d.FIELD_TYPES.TRANSLATION_LINK.type:return!e.value||null!=n&&tagHasLink(e)?{...a,...(0,p.Z)(e,n)}:{...a,...(0,p.Z)(e,"value")}}}(0,s.Gp)(!(0,l.Yx)(e)||e.tagSchemaField.fieldType===d.FIELD_TYPES.TEXT.type,`Unexpected field type ${(0,l.Yx)(e)?e.tagSchemaField.fieldType:""}`)
return{value:e.value,url:e.url}}function areTagsValidAndNotify(e){const t=r.default.compact(e.map((e=>function getTagErrorMessage(e){const t=getTagUpdateParams(e)
return e.value&&Object.values(t).every((e=>isNullValue(e)))?`Field value for "${e.name}" is invalid`:null}(e))))
if(t.length){c.ZP.error(t[0],{duration:0})
return!1}return!0}function getTagsToSet(e){return r.default.chain(e).indexBy((e=>(0,l.Yx)(e)?e.tagSchemaField.name:e.name)).mapObject(getTagUpdateParams).value()}function getSortedSchemaAndCustomTags({tags:e,tagSchema:t}){if(!t)return{schemaTags:[],customTags:e}
const n=new Map
t.fields.forEach(((e,t)=>{n.set(e.name,t)}))
const[a,i]=r.default.partition(e,l.Yx)
return{schemaTags:r.default.sortBy(a,(e=>n.get(e.name))),customTags:i}}function isNullValue(e){return null==e||""===e||Array.isArray(e)&&0===e.length}function tagHasValue(e){if(null==e)return!1
const t=getTagUpdateParams(e)
return null!=t&&Object.values(t).some((e=>!isNullValue(e)))}function tagHasLink(e){if(!(0,l.Yx)(e))return!1
const t=getLinksKeyFromFieldType(e.tagSchemaField.fieldType)
if(null==t){(0,s.Gp)(!1,`Linked key not found for ${e.tagSchemaField.fieldType}`)
return!1}const n=e[t]
return null!=n&&n.length>0}function hasValueForAllRequiredFields(e,t){return t.every((t=>!t.isRequired||t.archiveRecord||e.some((e=>e.tagSchemaField.apiId===t.apiId&&tagHasValue(e)))))}function findSchemaTag(e,t){return e.find((e=>(0,l.Yx)(e)&&e.tagSchemaField.id===t))||null}function findSchemaTagByApiId(e,t){return e.find((e=>(0,l.Yx)(e)&&e.tagSchemaField.apiId===t))||null}function filterToSchemaTags(e){return e.filter((e=>(0,l.Yx)(e)))}function getTagPlaceholder(e){return e&&!tagHasValue(e)&&u.I(e)?"Acquiring from integration...":void 0}function tagUpdateObjectToTagsDict(e,t){const n={}
Object.entries(e).forEach((e=>{t?t[e[0]]=e[1]:n[e[0]]=e[1]}))
return t||n}},897171:(e,t,n)=>{n.d(t,{HM:()=>CollapsedChipsFieldValue,ZP:()=>TagValue,vj:()=>SimpleTagValue})
var a=n(602652),i=n.n(a),r=n(989526),s=n(232606),o=n(348920),l=n(227887),c=n(630089),d=n(529562),u=n(481677),m=n(251808),p=n(778223),h=n(976327),E=n(158716),S=n(648068),T=n(161641),g=n(214918),f=n(638951),I=n(467922),A=n(225821)
function SimpleTagValue(e){const t=`${e.tag.value||f.M}${e.tag.taggedItemName?` (${e.tag.taggedItemName})`:""}`
return r.createElement(f.Z,{className:e.className,tooltipTitle:t},e.tag.value&&e.tag.url?r.createElement(c.Z,{href:e.tag.url},e.tag.value):r.createElement(I.Z,{value:e.tag.value,isFaded:e.tag.isFiller}))}function CollapsedChipsFieldValue({fieldValues:e,maxChipsPerRow:t,collapsedMultiLinkOverflowElement:n}){(0,s.hu)(e.length>1,"CollapsedChipsFieldValue should only be passed multi-element list");(0,s.hu)(e.every((e=>S.ZD(e))),"Field value should be chip field values")
const a=e
if(a[0].targetBlobs){const i=a.flatMap((e=>e.targetBlobs.length?e.targetBlobs[0]:[])),s=a.flatMap((e=>e.targetBlobs.slice(1)))
return r.createElement(E.gK,{maxChips:Math.min(e.length,null!=t?t:h.MD),chips:[...i,...s].map((e=>r.createElement(p.ZP,{size:p.TK.SMALL,text:e.name,href:e.url}))),chipSize:p.TK.SMALL,viewAllOverflowLink:n&&n([...i,...s].length)})}{const i=(0,m.OU)(a[0].tagSchemaField.fieldType),s=a.flatMap((e=>{const t=e[i]
return t.length?t[0]:[]})),o=a.flatMap((e=>e[i].slice(1)))
return r.createElement(E.ZP,{maxChips:Math.min(e.length,null!=t?t:h.MD),itemIds:[...s,...o].map((e=>e.id)),chipSize:p.TK.SMALL,viewAllOverflowLink:n&&n([...s,...o].length)})}}function TagValue({tag:e,className:t,maxChipsPerRow:n}){if(!e)return null
if((0,l.Yx)(e)){if(u.shouldShowComputedState(e))return r.createElement(d.Z,{tag:e})
if(e.dateValue)return r.createElement(T.Z,{className:t,date:e.dateValue})
if(e.datetimeValue)return r.createElement(g.h,{className:t,datetime:e.datetimeValue,showTimeInCell:!0})
if(S.ZD(e)){if(e.targetBlobs)return r.createElement(E.gK,{maxChips:null!=n?n:h.MD,chips:e.targetBlobs.map((e=>r.createElement(p.ZP,{size:p.TK.SMALL,text:e.name,href:e.url}))),chipSize:p.TK.SMALL})
{const t=e[(0,m.OU)(e.tagSchemaField.fieldType)]
return r.createElement(E.ZP,{maxChips:null!=n?n:h.MD,itemIds:t.map((e=>e.id)),chipSize:p.TK.SMALL})}}if(o.ZP.UNITS_ENABLE_UNIT_DICTIONARY&&null!=e.tagSchemaField.unitSymbol)return r.createElement(A.Z,{className:t,tag:e})}return r.createElement(SimpleTagValue,{className:t,tag:e})}TagValue.propTypes={tag:i().object,className:i().string}},606903:(e,t,n)=>{n.d(t,{Z:()=>ClearSearchButton})
var a=n(692013),i=n(989526),r=n(129270),s=n(271359),o=n(36424)
function ClearSearchButton(e){return i.createElement("div",{onClick:e.onClear,className:(0,a.iv)(l.clear)},i.createElement(o.Z,{icon:"cross-thick",className:(0,a.iv)(l.clearIcon)}),"Clear")}const l=a.mM.create({clear:{cursor:"pointer",color:s.pp,flex:"none",fontWeight:r.KB},clearIcon:{marginRight:4,fontSize:9}})},303165:(e,t,n)=>{n.d(t,{eO:()=>getFilterKeysForModelType,nr:()=>isFilterValidForTypes})
var a=n(64558),i=n(531041),r=n(188663),s=n(581210),o=n(348920),l=n(459830),c=n(477956),d=n(922805),u=n(787116),m=n(62315)
const p=i.default.compact([m.Vm.ARCHIVE_PURPOSES,m.Vm.ANCESTOR_FOLDER,m.Vm.AUTHOR,m.Vm.BIOENTITY_LABELS,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.CUSTOM_TAG,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.NOTE_REFERENCE,m.Vm.PROJECT_FOLDER,m.Vm.REGISTRY_COLLECTION_OWNER,m.Vm.SCHEMA,m.Vm.SCHEMA_INTERFACE,m.Vm.SCHEMA_FIELD,m.Vm.SCHEMA_VALIDATION_ERROR_LABEL,m.Vm.SCHEMA_VALIDATION_STATUS,m.Vm.REGISTRATION_STATUS,o.ZP.WORKLISTS_ENABLE_WORKLISTS?m.Vm.ITEM_IN_WORKLIST:null,m.Vm.IN_STUDY]),h=[m.Vm.ARCHIVE_PURPOSES,m.Vm.ANCESTOR_FOLDER,m.Vm.ANCESTOR_STORABLE,m.Vm.BARCODES,m.Vm.CONTAINER_CONTENTS,m.Vm.CONTAINER_CONTENT_SCHEMA,m.Vm.CONTAINER_PARENT,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.PARENT_STORABLE,m.Vm.REGISTRY,m.Vm.SCHEMA,m.Vm.SCHEMA_FIELD,m.Vm.STARRED],E=[m.Vm.ARCHIVE_PURPOSES,m.Vm.ANCESTOR_FOLDER,m.Vm.AUTHOR,m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.NOTE_REFERENCE],S=[m.Vm.ARCHIVE_PURPOSES,m.Vm.SHARED_WITH,m.Vm.PROJECT_ATTRIBUTE,m.Vm.HIDDEN,m.Vm.OWNER,m.Vm.OWNER_OR_COLLABORATOR,m.Vm.REVIEW_LIFECYCLE,m.Vm.REVIEW_LIFECYCLE_TYPE,m.Vm.STARRED,m.Vm.TOP_LEVEL_PERMISSIONS],T=[m.Vm.CREATOR,m.Vm.REVIEW,m.Vm.SCHEMA,m.Vm.SCHEMA_FIELD,m.Vm.IN_STUDY],g=[m.Vm.ARCHIVE_PURPOSES,m.Vm.AUTHOR,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES],f={[l.ANALYSIS]:[m.Vm.ANCESTOR_FOLDER,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.ARCHIVE_PURPOSES],[l.ANALYTICS_DASHBOARD]:[m.Vm.ANCESTOR_FOLDER,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.STARRED],[l.BASIC_FOLDER_ITEM]:p,[l.BULK_ASSEMBLY]:i.default.compact([m.Vm.ARCHIVE_PURPOSES,m.Vm.ANCESTOR_FOLDER,m.Vm.AUTHOR,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.MODIFIED_AT,m.Vm.NAMES,o.ZP.WORKLISTS_ENABLE_WORKLISTS?m.Vm.ITEM_IN_WORKLIST:null]),[l.MIXTURE]:[...p,m.Vm.INGREDIENTS],[l.MOLECULE]:[...p,m.Vm.CHEMICAL_STRUCTURE],[l.PROTEIN]:i.default.compact([...p,m.Vm.PROTEIN_AMINO_ACIDS,o.ZP.SIGHTGLASS2_ENABLE_ANNOTATION_SEARCH?m.Vm.ANNOTATION:null,m.Vm.BLAST,m.Vm.ALPHAFOLD_STRUCTURE]),[l.SequenceSubtype.DNA_OLIGO]:i.default.compact([...p,m.Vm.BLAST,m.Vm.SEQUENCE_BASES,o.ZP.SIGHTGLASS2_ENABLE_ANNOTATION_SEARCH?m.Vm.ANNOTATION:null,o.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&m.Vm.OLIGO_HELM_DNA,o.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&m.Vm.MONOMER]),[l.SequenceSubtype.RNA_OLIGO]:i.default.compact([...p,m.Vm.SEQUENCE_BASES,o.ZP.SIGHTGLASS2_ENABLE_ANNOTATION_SEARCH?m.Vm.ANNOTATION:null,o.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&m.Vm.OLIGO_HELM_RNA,o.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&m.Vm.MONOMER,m.Vm.BLAST]),[l.SequenceSubtype.SEQUENCE]:i.default.compact([...p,m.Vm.BLAST,m.Vm.SEQUENCE_BASES,o.ZP.SIGHTGLASS2_ENABLE_ANNOTATION_SEARCH?m.Vm.ANNOTATION:null,m.Vm.PROTEIN_AMINO_ACIDS,m.Vm.PART_SEQUENCE]),[l.SequenceSubtype.RNA_SEQUENCE]:i.default.compact([...p,m.Vm.SEQUENCE_BASES,o.ZP.SIGHTGLASS2_ENABLE_ANNOTATION_SEARCH?m.Vm.ANNOTATION:null,m.Vm.PROTEIN_AMINO_ACIDS,o.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&m.Vm.MONOMER,m.Vm.BLAST]),[l.REQUEST]:[m.Vm.ARCHIVE_PURPOSES,m.Vm.ANCESTOR_FOLDER,m.Vm.ASSAY_SCHEMA,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.SCHEMA_FIELD,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.REQUEST_ASSIGNEE,m.Vm.REQUEST_IDS,m.Vm.REQUEST_REQUESTOR,m.Vm.REQUEST_STATUS,m.Vm.REQUEST_TASK_SCHEMA,m.Vm.SCHEMA],[l.ASSAY_RUN]:[m.Vm.ARCHIVE_PURPOSES,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.SCHEMA,m.Vm.SCHEMA_FIELD,m.Vm.MODIFIED_AT,m.Vm.RUN_AVAILABILITY],[l.FOLDER]:[m.Vm.ARCHIVE_PURPOSES,m.Vm.ANCESTOR_FOLDER,m.Vm.BIOENTITY_LABELS,m.Vm.CREATED_AT,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.HIDDEN,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.OWNER,m.Vm.OWNER_OR_COLLABORATOR,m.Vm.REVIEW_LIFECYCLE,m.Vm.REVIEW_LIFECYCLE_TYPE,m.Vm.TOP_LEVEL_PERMISSIONS],[l.ENTRY]:[...E,...T,m.Vm.CUSTOM_TAG,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.ENTRY_TEMPLATE],[l.SEQUENCE_ANALYSIS]:[m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.ANCESTOR_FOLDER,m.Vm.ARCHIVE_PURPOSES],[l.STAGE_ENTRY]:[...E,...T],[l.PROTEIN_ALIGNMENT]:[m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.ANCESTOR_FOLDER,m.Vm.ARCHIVE_PURPOSES],[l.PROCESS]:[m.Vm.ARCHIVE_PURPOSES,m.Vm.ANCESTOR_FOLDER,m.Vm.AUTHOR,m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.CREATOR,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.SCHEMA,m.Vm.PROCESS_WATCHER,m.Vm.PROCESS_RESPONSIBLE_TEAM,m.Vm.PROCESS_EXECUTION_TYPE,m.Vm.PROCESS_STATUS,m.Vm.ROOT_PROCESS,m.Vm.ROOT_PROCESS_TASK_SCHEMA,m.Vm.ROOT_PROCESS_CREATOR,m.Vm.ROOT_PROCESS_WATCHER,m.Vm.ARCHIVE_STATUS,m.Vm.ARCHIVE_PURPOSES,m.Vm.PROCESS_CLIENT_ORIGIN],[l.PROCESS_TASK]:i.default.compact([m.Vm.SCHEMA,m.Vm.SCHEMA_FIELD,m.Vm.ANY_LINK_SCHEMA_FIELD,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.PROCESS_TASK_ASSIGNEE,m.Vm.PROCESS_TASK_STATUS,o.ZP.WORKFLOWS_ENABLE_COLLABORATORS?m.Vm.PROCESS_TASK_RESPONSIBLE_PARTIES:null,m.Vm.PROCESS,m.Vm.PROCESS_WATCHER,m.Vm.PROCESS_RESPONSIBLE_TEAM,m.Vm.PROCESS_TASK_SCHEDULED_ON_DATE,m.Vm.PROCESS_TASK_EXECUTION_ORIGIN_ENTRY,m.Vm.PROCESS_TASK_HAS_FAILED_MAPPINGS,m.Vm.PROCESS_EXECUTION_TYPE,m.Vm.ROOT_PROCESS,m.Vm.ROOT_PROCESS_TASK_SCHEMA,m.Vm.ROOT_PROCESS_CREATOR,m.Vm.ROOT_PROCESS_WATCHER,m.Vm.ARCHIVE_STATUS,m.Vm.ARCHIVE_PURPOSES,m.Vm.IN_STUDY,m.Vm.PROCESS_CLIENT_ORIGIN]),[l.PROCESS_OUTPUT]:[m.Vm.SCHEMA,m.Vm.SCHEMA_FIELD,m.Vm.ANY_LINK_SCHEMA_FIELD,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.PROCESS,m.Vm.PROCESS_TASK,m.Vm.PROCESS_WATCHER,m.Vm.PROCESS_RESPONSIBLE_TEAM,m.Vm.ROOT_PROCESS,m.Vm.ROOT_PROCESS_TASK_SCHEMA,m.Vm.ROOT_PROCESS_CREATOR,m.Vm.ROOT_PROCESS_WATCHER,m.Vm.CREATION_ORIGIN_ENTRY,m.Vm.ARCHIVE_STATUS,m.Vm.ARCHIVE_PURPOSES,m.Vm.PROCESS_CLIENT_ORIGIN],[l.RECIPE_RUN_TASK]:(0,a.oA)([m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.PROCESS_TASK_ASSIGNEE,m.Vm.PROCESS_TASK_STATUS,o.ZP.WORKFLOWS_ENABLE_COLLABORATORS?m.Vm.PROCESS_TASK_RESPONSIBLE_PARTIES:null,m.Vm.PROCESS_TASK_SCHEDULED_ON_DATE,m.Vm.ARCHIVE_STATUS,m.Vm.ARCHIVE_PURPOSES,m.Vm.PROCESS_CLIENT_ORIGIN]),[l.RECIPE_UNIT_OPERATION_TASK]:(0,a.oA)([m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.PROCESS_TASK_ASSIGNEE,m.Vm.PROCESS_TASK_STATUS,o.ZP.WORKFLOWS_ENABLE_COLLABORATORS?m.Vm.PROCESS_TASK_RESPONSIBLE_PARTIES:null,m.Vm.PROCESS_WATCHER,m.Vm.PROCESS_RESPONSIBLE_TEAM,m.Vm.PROCESS_TASK_SCHEDULED_ON_DATE,m.Vm.ARCHIVE_STATUS,m.Vm.ARCHIVE_PURPOSES,m.Vm.PROCESS_CLIENT_ORIGIN,m.Vm.PROCEDURE_RUN_TASKS]),[l.RECIPE_STEP_TASK]:(0,a.oA)([m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.PROCESS_TASK_ASSIGNEE,m.Vm.PROCESS_TASK_STATUS,o.ZP.WORKFLOWS_ENABLE_COLLABORATORS?m.Vm.PROCESS_TASK_RESPONSIBLE_PARTIES:null,m.Vm.PROCESS_WATCHER,m.Vm.PROCESS_RESPONSIBLE_TEAM,m.Vm.PROCESS_TASK_SCHEDULED_ON_DATE,m.Vm.ARCHIVE_STATUS,m.Vm.ARCHIVE_PURPOSES,m.Vm.PROCESS_CLIENT_ORIGIN,m.Vm.PROCEDURE_RUN_TASKS]),[l.PROTOCOL]:[...E,m.Vm.CREATOR,m.Vm.CUSTOM_TAG,m.Vm.FOLDER,m.Vm.FOLDER_SECTION],[l.WORKFLOW]:[...E,m.Vm.WORKFLOW_TEMPLATE,m.Vm.WORKFLOW_STATUS].filter(((e,t)=>e!==m.Vm.NOTE_REFERENCE)),[l.CONTAINER]:i.default.compact([...h,m.Vm.CONTAINER_CONCENTRATION,m.Vm.CONTAINER_QUANTITY,o.ZP.INVENTORY_ENABLE_CHECK_IN_CHECK_OUT?m.Vm.CONTAINER_CHECK_OUT_ASSIGNEE:null,o.ZP.INVENTORY_ENABLE_CHECK_IN_CHECK_OUT?m.Vm.CONTAINER_CHECK_OUT_STATUS:null,o.ZP.WORKLISTS_ENABLE_WORKLISTS?m.Vm.ITEM_IN_WORKLIST:null,(0,d.Eq)(c.F.V1)?m.Vm.SAMPLE_AUTHORIZED_USERS:null,(0,d.Eq)(c.F.V1)?m.Vm.SAMPLE_OWNERS:null,(0,d.Eq)(c.F.V2)?m.Vm.SAMPLE_RESTRICTION_STATUS:null,(0,d.Eq)(c.F.V2)?m.Vm.SAMPLE_RESTRICTION_ACCESS:null]),[l.PLATE]:i.default.compact([...h,o.ZP.WORKLISTS_ENABLE_WORKLISTS?m.Vm.ITEM_IN_WORKLIST:null]),[l.BOX]:[...h,m.Vm.GRID_EMPTY_CONTAINERS,m.Vm.GRID_EMPTY_POSITIONS],[l.LOCATION]:i.default.compact([...h,o.ZP.INVENTORY_ENABLE_LOCATION_CAPACITY?m.Vm.INVENTORY_VALIDATION_STATUS:null,o.ZP.INVENTORY_ENABLE_LOCATION_CAPACITY?m.Vm.INVENTORY_VALIDATION_ERROR_LABEL:null]),[l.WORKLIST]:[m.Vm.NOTE_REFERENCE,m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.ARCHIVE_PURPOSES,m.Vm.CREATOR,m.Vm.WORKLIST_TYPE,m.Vm.OWNER],[l.SOURCE]:S,[l.PROJECT]:S,[l.INSTITUTION]:[m.Vm.INSTITUTION],[l.ORGANIZATION]:[m.Vm.ORGANIZATION],[l.TEAM]:[m.Vm.TEAM],[l.USER]:[m.Vm.ACCOUNT_STATUS],[l.CONNECTION]:[m.Vm.SCHEMA,m.Vm.SCHEMA_FIELD,m.Vm.ANY_LINK_SCHEMA_FIELD,m.Vm.CONNECTION_GATEWAY,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.ARCHIVE_STATUS,m.Vm.ARCHIVE_PURPOSES,m.Vm.NOTE_REFERENCE,m.Vm.OWNER],[l.JELLYFISH]:[m.Vm.ANCESTOR_FOLDER,m.Vm.CREATED_AT,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.MODIFIED_AT,m.Vm.NAMES],[l.DATASET]:[m.Vm.ANCESTOR_FOLDER,m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.MODIFIED_AT,m.Vm.NAMES],[l.FILE]:[m.Vm.CREATED_AT,m.Vm.CREATOR,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.ANCESTOR_FOLDER,m.Vm.FOLDER,m.Vm.FOLDER_SECTION],[l.WORKSHEET]:[m.Vm.ANCESTOR_FOLDER,m.Vm.CREATED_AT,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.MODIFIED_AT,m.Vm.NAMES],[l.BENCHLING_APP]:[m.Vm.MODIFIED_AT,m.Vm.SESSION_NAME,m.Vm.SESSION_STATUS],[l.STUDY]:[m.Vm.ANCESTOR_FOLDER,m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.ARCHIVE_PURPOSES,m.Vm.SCHEMA,m.Vm.AUTHOR,m.Vm.FOLDER,m.Vm.FOLDER_SECTION,m.Vm.STUDY_PHASE,m.Vm.SCHEMA_FIELD],[l.PROCEDURE_RUN]:[m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.NAMES,m.Vm.ANCESTOR_FOLDER,m.Vm.FOLDER,m.Vm.FOLDER_SECTION],[l.TEMPLATE]:g,[l.SUBTEMPLATE]:g,[l.FORM_DEFINITION]:g,[l.PROCEDURE]:g,[l.TEMPLATE_COLLECTION]:[m.Vm.ARCHIVE_PURPOSES,m.Vm.OWNER,m.Vm.CREATED_AT,m.Vm.MODIFIED_AT,m.Vm.NAMES]},I={[r.i.CORE_OBJECT_ARCHIVABLE]:[m.Vm.ARCHIVE_PURPOSES],[r.i.HAS_CUSTOM_FIELDS]:[m.Vm.CUSTOM_TAG],[r.i.STARRABLE]:[m.Vm.STARRED],[r.i.STUDYABLE]:[m.Vm.IN_STUDY]}
function getFilterKeysForModelTypeAndCapability(e,t){var n
const a=(0,s.Y2)(e)
return(t!==r.i.STUDYABLE||t===r.i.STUDYABLE&&a&&(0,u.IK)(a))&&null!==(n=I[t])&&void 0!==n?n:[]}function getFilterKeysForModelType(e){const t=f[e]||[]
let n=[]
const a=(0,s.mq)(e)
for(const t of a)n=n.concat(getFilterKeysForModelTypeAndCapability(e,t))
return[...t,...n]}function isFilterValidForTypes(e,t){const n=t.some((t=>(f[t]||[]).includes(e))),a=t.some((t=>(0,s.mq)(t).some((n=>getFilterKeysForModelTypeAndCapability(t,n).includes(e)))))
return n||a}},13951:(e,t,n)=>{n.d(t,{k:()=>GlobalSearchActions_doGlobalSearch,L:()=>listItems})
var a=n(681896),i=n(91092),r=n(965131),s=n(377249),o=n(709759),l=n(865914),c=n(380490),d=n(166459),u=n(687715),m=n(238504),p=n(938454),h=n(480353),E=n(62315),S=n(816032)
var T=n(825309)
async function listItems(e,t){const{ids:n,itemResults:h,total:E,isExact:S,timedOut:g,correlationId:f,attributes:I,groups:A,nextToken:y,analysesById:_,analyticsDashboardsById:C,batchesById:R,benchlingAppsById:N,bulkAssembliesById:O,collectiblesById:b,connectionsById:v,datasetsById:P,entrySummariesById:L,filesById:D,fileSummariesById:M,foldersById:w,jellyfishesById:F,permissionsByModelId:k,procedureRunsById:U,processOutputsById:x,processTasksById:B,projectsById:Z,proteinAlignmentSummariesById:q,processesById:G,protocolSummariesById:V,requestedTaskSchemaIdsByRequestId:H,requestsById:W,runsById:Y,sampleStatusCountsByRequestId:$,scoresById:K,sequenceAlignmentSummariesById:z,stageEntrySummariesById:Q,storableSummariesById:j,storableSummaryExtras:J,templateCollectionsById:X,workflowSummariesById:ee,worklistSummariesById:te,studiesById:ne,worksheetsById:ae}=await GlobalSearchActions_doGlobalSearch(e,t,`listing:${t}`);(0,d.getStore)().dispatch(c.lE(L));(0,d.getStore)().dispatch(o.IH(s.V.STAGE_ENTRY_SUMMARY,Q))
m.handleBatchesLoaded(Object.values(R));(0,d.getStore)().dispatch(c.wb(M));(0,d.getStore)().dispatch(o.IH(s.V.PROTOCOL_SUMMARY,V));(0,d.getStore)().dispatch(c.js(ee));(0,a.writeFragmentsToCache)((0,i.f)("ProjectSummary"),Object.values(Z));(0,d.getStore)().dispatch(o.IH(s.V.FOLDER_BY_ID,w));(0,p.dispatchStorableSummariesLoaded)(Object.values(j),J);(0,d.getStore)().dispatch(o.IH(s.V.PERMISSIONS_BY_ITEM_ID,k));(0,d.getStore)().dispatch((0,u.iY)({requests:Object.values(W),sampleStatusCountsByRequestId:$,requestedTaskSchemaIdsByRequestId:H}));(0,a.writeFragmentsToCache)((0,i.f)("AnalysisSearchAttributes"),Object.values(_));(0,a.writeFragmentsToCache)((0,i.f)("AnalyticsDashboardSearchAttributes"),Object.values(C));(0,a.writeFragmentsToCache)((0,i.f)("ProcessListing"),Object.values(G));(0,a.writeFragmentsToCache)((0,i.f)("ProcessOutputListing"),Object.values(x));(0,a.writeFragmentsToCache)((0,i.f)("ProcessTaskListing"),Object.values(B));(0,a.writeFragmentsToCache)((0,i.f)("ConnectionListing"),Object.values(v));(0,a.writeFragmentsToCache)((0,i.f)("BulkAssemblyListing"),Object.values(O));(0,a.declarativeWriteRESTObjsToApollo)("SequenceAnalysisSummary",Object.values(z));(0,a.declarativeWriteRESTObjsToApollo)("ProteinAlignmentSummary",Object.values(q));(0,a.writeFragmentsToCache)((0,i.f)("WorklistSummary"),Object.values(te))
const ie=Object.fromEntries(Object.entries(te).map((([e,t])=>[e,(0,l.aF)((0,r.tY)("WorklistSummary",t),k)])));(0,T.Dl)(ie);(0,a.writeFragmentsToCache)((0,i.f)("JellyfishListing"),Object.values(F));(0,a.writeFragmentsToCache)((0,i.f)("StudyListing"),Object.values(ne));(0,a.writeFragmentsToCache)((0,i.f)("BenchlingApp"),Object.values(N));(0,a.writeFragmentsToCache)((0,i.f)("WorksheetListing"),Object.values(ae));(0,a.writeFragmentsToCache)((0,i.f)("ProcedureRunListing"),Object.values(U));(0,a.writeFragmentsToCache)((0,i.f)("DatasetListing"),Object.values(P));(0,a.writeFragmentsToCache)((0,i.f)("TemplateCollectionListing"),Object.values(X));(0,a.writeFragmentsToCache)((0,i.f)("BaseCollectibleSummary"),Object.values(b));(0,a.writeFragmentsToCache)((0,i.f)("FileListing"),Object.values(D));(0,a.declarativeWriteRESTObjsToApollo)("Run",Object.values(Y))
return{ids:n,itemResults:h,total:E,isExact:S,timedOut:g,correlationId:f,scoresById:K,groups:A,nextToken:y,attributes:I}}async function GlobalSearchActions_doGlobalSearch(e,t,n){const a=(0,h.DO)(e,t)
return await function doGlobalSearch(e,t){return(0,S.Q)({url:E.RV,data:{...e,searchSource:t}})}(a,n)}},62315:(e,t,n)=>{n.d(t,{$j:()=>isNumericFieldType,C8:()=>isDateFilterKey,EF:()=>I,EN:()=>_,Ei:()=>G,Ex:()=>hasMatrixParam,FB:()=>S,I_:()=>W,Ip:()=>X,J4:()=>E,Jc:()=>oe,Jr:()=>isDatetimeFilterKey,LI:()=>isStringFieldFilter,Lb:()=>isNullableMultiValueFilter,M8:()=>isProcessTaskOrOutput,Mb:()=>isStudy,Md:()=>A,Nf:()=>isBLASTFilter,Oq:()=>Q,P6:()=>C,Pd:()=>ie,Pe:()=>isNumericFieldFilter,Q2:()=>j,QW:()=>keyToEmptyFilter,Qb:()=>ue,RL:()=>getNoResultsMessage,RQ:()=>Se,RV:()=>$,Rg:()=>isDatetimeFilter,SN:()=>se,Sc:()=>Y,Sr:()=>pe,Tv:()=>hasMatchScoreParam,Uh:()=>de,Vm:()=>f,Wl:()=>hasTaskParam,YW:()=>me,Y_:()=>g,Z4:()=>isFullTextFilterKey,_3:()=>ne,_5:()=>J,_e:()=>te,am:()=>isMultiValueFieldType,bo:()=>z,cK:()=>ee,cM:()=>isMultiLinkFieldFilter,cT:()=>hasTags,ci:()=>ce,dN:()=>isFieldFilter,e3:()=>isSingleValueFilterKey,eR:()=>isStorableSummary,f5:()=>B,fU:()=>isStringFieldType,gE:()=>isDateFilter,hf:()=>U,ii:()=>H,ju:()=>q,jx:()=>le,kP:()=>isChemicalStructureFilter,kc:()=>V,mE:()=>isMultiValueFilterKey,mP:()=>isContainerQuantityFilter,mg:()=>isSingleValueFilter,nz:()=>isNullableMultiValueFilterKey,ob:()=>isContainerConcentrationFilter,om:()=>isMultiValueFilter,oo:()=>Ee,pb:()=>R,pf:()=>he,qi:()=>h,rK:()=>isMonomerFilter,tR:()=>x,uj:()=>isTextFieldType,ut:()=>T,vr:()=>hasStrandParam,wG:()=>isCustomTagFilter,xL:()=>K,xu:()=>isFullTextFilter,xv:()=>re,yD:()=>F,yH:()=>Z,yY:()=>k})
var a=n(602652),i=n(764677),r=n(348920),s=n(459830),o=n(273155),l=n(256039),c=n(487761),d=n(497790),u=n(379346),m=n(808844),p=n(901113)
const h=[s.ANALYSIS,s.ANALYTICS_DASHBOARD,s.FOLDER,s.SequenceSubtype.SEQUENCE,s.SequenceSubtype.RNA_SEQUENCE,s.PROTEIN,s.BASIC_FOLDER_ITEM,s.SequenceSubtype.DNA_OLIGO,s.SequenceSubtype.RNA_OLIGO,s.MIXTURE,s.MOLECULE,s.ENTRY,s.PROTOCOL,s.CONTAINER,s.PLATE,s.BOX,s.LOCATION,s.PROCESS,s.PROCESS_TASK,s.WORKFLOW,s.STAGE_ENTRY,s.REQUEST,s.SEQUENCE_ANALYSIS,s.PROTEIN_ALIGNMENT,s.CONNECTION,s.ASSAY_RUN,s.BULK_ASSEMBLY,s.WORKLIST,...r.ZP.APP_CORE_ENABLE_FAKE_ITEM_TYPE?[s.JELLYFISH]:[],...r.ZP.DATA_FRAMES_ENABLE_DATASET?[s.DATASET]:[],...r.ZP.STUDIES_ENABLE?[s.STUDY]:[],...r.ZP.PROCEDURES_ENABLE_M1?[s.WORKSHEET]:[],...r.ZP.PROCEDURES_ENABLE?[s.PROCEDURE_RUN]:[],s.TEMPLATE,s.SUBTEMPLATE,s.FORM_DEFINITION,...r.ZP.PROCEDURES_ENABLE?[s.PROCEDURE]:[],s.TEMPLATE_COLLECTION,...r.ZP.FILES_ENABLE?[s.FILE]:[]]
function isProcessTaskOrOutput(e){return u.ZP.isProcessTask(e.id)||u.ZP.isProcessOutput(e.id)}function isStudy(e){return u.ZP.isStudy(e.id)}function isStorableSummary(e){return u.ZP.isStorable(e.id)}function hasTags(e){return Boolean(e.tags)}const E={SORTS_NAMESPACE:"SORTS_"},S="SEARCH_FILTER_",T="SAVED_SEARCH_"
var g,f,I
!function(e){e.NONE=""
e.CONTAINER_CONTENTS="container_contents"
e.BLAST_QUERY="blast_query"}(g||(g={}))
!function(e){e.ANY_LINK_SCHEMA_FIELD="ANY_LINK_SCHEMA_FIELD"
e.ACCOUNT_STATUS="ACCOUNT_STATUS"
e.ALPHAFOLD_STRUCTURE="ALPHAFOLD_STRUCTURE"
e.ANCESTOR_FOLDER="ANCESTOR_FOLDER"
e.ANCESTOR_STORABLE="ANCESTOR_STORABLE"
e.ANNOTATION="ANNOTATION"
e.ARCHIVE_PURPOSES="ARCHIVE_PURPOSES"
e.ARCHIVE_STATUS="ARCHIVE_STATUS"
e.ASSAY_SCHEMA="ASSAY_SCHEMA"
e.AUTHOR="AUTHOR"
e.BARCODES="BARCODES"
e.BATCH_TAG="BATCH_TAG"
e.BIOENTITY_LABELS="BIOENTITY_LABELS"
e.BLAST="BLAST"
e.CAPABILITIES="CAPABILITIES"
e.CHEMICAL_STRUCTURE="CHEMICAL_STRUCTURE"
e.CONNECTION="CONNECTION"
e.CONNECTION_GATEWAY="CONNECTION_GATEWAY"
e.CONTAINER_CHECK_OUT_ASSIGNEE="CONTAINER_CHECK_OUT_ASSIGNEE"
e.CONTAINER_CHECK_OUT_STATUS="CONTAINER_CHECK_OUT_STATUS"
e.CONTAINER_CONCENTRATION="CONTAINER_CONCENTRATION"
e.CONTAINER_CONTENTS="CONTAINER_CONTENTS"
e.CONTAINER_CONTENT_SCHEMA="CONTAINER_CONTENT_SCHEMA"
e.CONTAINER_PARENT="CONTAINER_PARENT"
e.CONTAINER_QUANTITY="CONTAINER_VOLUME"
e.CREATED_AT="CREATED_AT"
e.CREATION_ORIGIN_ENTRY="CREATION_ORIGIN_ENTRY"
e.CREATOR="CREATOR"
e.CUSTOM_TAG="CUSTOM_TAG"
e.ENTRY_TEMPLATE="ENTRY_TEMPLATE"
e.FOLDER="FOLDER"
e.FOLDER_SECTION="FOLDER_SECTION"
e.GRID_EMPTY_CONTAINERS="GRID_EMPTY_CONTAINERS"
e.GRID_EMPTY_POSITIONS="GRID_EMPTY_POSITIONS"
e.GROUP_BY_KEY="GROUP_BY_KEY"
e.HIDDEN="HIDDEN"
e.INGREDIENTS="INGREDIENTS"
e.INSTITUTION="INSTITUTION"
e.INVENTORY_VALIDATION_ERROR_LABEL="INVENTORY_VALIDATION_ERROR_LABEL"
e.INVENTORY_VALIDATION_STATUS="INVENTORY_VALIDATION_STATUS"
e.ITEM_IN_WORKLIST="ITEM_IN_WORKLIST"
e.IN_STUDY="IN_STUDY"
e.MODIFIED_AT="MODIFIED_AT"
e.MONOMER="MONOMER"
e.NAMES="NAMES"
e.NOTE_REFERENCE="NOTE_REFERENCE"
e.OLIGO_HELM_RNA="OLIGO_HELM_RNA"
e.OLIGO_HELM_DNA="OLIGO_HELM_DNA"
e.ORGANIZATION="ORGANIZATION"
e.OWNER="OWNER"
e.OWNER_OR_COLLABORATOR="OWNER_OR_COLLABORATOR"
e.PARENT_STORABLE="PARENT_STORABLE"
e.PART_SEQUENCE="PARTS"
e.PROCEDURE_RUN_TASKS="PROCEDURE_RUN_TASKS"
e.PROCESS="PROCESS"
e.PROCESS_CLIENT_ORIGIN="PROCESS_CLIENT_ORIGIN"
e.PROCESS_EXECUTION_TYPE="PROCESS_EXECUTION_TYPE"
e.PROCESS_RESPONSIBLE_TEAM="PROCESS_RESPONSIBLE_TEAM"
e.PROCESS_STATUS="PROCESS_STATUS"
e.PROCESS_TASK="PROCESS_TASK"
e.PROCESS_TASK_ASSIGNEE="PROCESS_TASK_ASSIGNEE"
e.PROCESS_TASK_EXECUTION_ORIGIN_ENTRY="PROCESS_TASK_EXECUTION_ORIGIN_ENTRY"
e.PROCESS_TASK_HAS_FAILED_MAPPINGS="PROCESS_TASK_HAS_FAILED_MAPPINGS"
e.PROCESS_TASK_STATUS="PROCESS_TASK_STATUS"
e.PROCESS_TASK_RESPONSIBLE_PARTIES="PROCESS_TASK_RESPONSIBLE_PARTIES"
e.PROCESS_TASK_SCHEDULED_ON_DATE="PROCESS_TASK_SCHEDULED_ON_DATE"
e.PROCESS_WATCHER="PROCESS_WATCHER"
e.PROJECT="PROJECT"
e.PROJECT_ATTRIBUTE="PROJECT_ATTRIBUTE"
e.PROJECT_FOLDER="PROJECT_FOLDER"
e.PROTEIN_AMINO_ACIDS="PROTEIN_AMINO_ACIDS"
e.PROTEIN_PROSITE="PROTEIN_PROSITE"
e.REGISTRY_COLLECTION_OWNER="REGISTRY_COLLECTION_OWNER"
e.REQUEST_ASSIGNEE="REQUEST_ASSIGNEE"
e.REQUEST_IDS="REQUEST_IDS"
e.REQUEST_REQUESTOR="REQUEST_REQUESTOR"
e.REQUEST_STATUS="REQUEST_STATUS"
e.REQUEST_TASK_SCHEMA="REQUEST_TASK_SCHEMA"
e.REVIEW="REVIEW"
e.REVIEW_LIFECYCLE="REVIEW_LIFECYCLE"
e.REVIEW_LIFECYCLE_TYPE="REVIEW_LIFECYCLE_TYPE"
e.RUN_AVAILABILITY="RUN_AVAILABILITY"
e.SCHEMA_FIELD="SCHEMA_FIELD"
e.SCHEMA="SCHEMA"
e.SCHEMA_INTERFACE="SCHEMA_INTERFACE"
e.SCHEMA_VALIDATION_ERROR_LABEL="SCHEMA_VALIDATION_ERROR_LABEL"
e.SCHEMA_VALIDATION_STATUS="SCHEMA_VALIDATION_STATUS"
e.REGISTRATION_STATUS="REGISTRATION_STATUS"
e.ROOT_PROCESS="ROOT_PROCESS"
e.ROOT_PROCESS_TASK_SCHEMA="ROOT_PROCESS_TASK_SCHEMA"
e.ROOT_PROCESS_CREATOR="ROOT_PROCESS_CREATOR"
e.ROOT_PROCESS_WATCHER="ROOT_PROCESS_WATCHER"
e.SAMPLE_AUTHORIZED_USERS="SAMPLE_AUTHORIZED_USERS"
e.SAMPLE_OWNERS="SAMPLE_OWNERS"
e.SAMPLE_RESTRICTION_ACCESS="SAMPLE_RESTRICTION_ACCESS"
e.SAMPLE_RESTRICTION_STATUS="SAMPLE_RESTRICTION_STATUS"
e.SEQUENCE_BASES="SEQUENCE_BASES"
e.SESSION_NAME="SESSION_NAME"
e.SESSION_STATUS="SESSION_STATUS"
e.SHARED_WITH="SHARED_WITH"
e.STARRED="STARRED"
e.STUDY_PHASE="STUDY_PHASE"
e.REGISTRY="REGISTRY"
e.TAG="TAG"
e.TEAM="TEAM"
e.TOP_LEVEL_PERMISSIONS="TOP_LEVEL_PERMISSIONS"
e.TYPE="TYPE"
e.TYPES="TYPES"
e.WORKFLOW_STATUS="WORKFLOW_STATUS"
e.WORKFLOW_TEMPLATE="WORKFLOW_TEMPLATE"
e.WORKLIST_TYPE="WORKLIST_TYPE"
e.QUERY_API_BIOENTITY_ID="QUERY_API_BIOENTITY_ID"
e.QUERY_API_ARCHIVE_REASON="QUERY_API_ARCHIVE_REASON"
e.QUERY_API_MODIFIED_AT="QUERY_API_MODIFIED_AT"
e.QUERY_API_CREATED_AT="QUERY_API_CREATED_AT"
e.QUERY_API_AUTHOR="QUERY_API_AUTHOR"
e.QUERY_API_CREATOR="QUERY_API_CREATOR"
e.QUERY_API_PROJECT="QUERY_API_PROJECT"
e.QUERY_API_REGISTRY="QUERY_API_REGISTRY"}(f||(f={}))
!function(e){e.BLASTN="BLASTN"
e.BLASTP="BLASTP"
e.BLASTX="BLASTX"
e.TBLASTN="TBLASTN"
e.TBLASTX="TBLASTX"
e.CONTAINS="CONTAINS"
e.EQ="EQ"
e.EXCLUDES_TEXT="EXCLUDES_TEXT"
e.GTE="GTE"
e.HAS_ALL_OF="HAS_ALL_OF"
e.HAS_NONE_OF="HAS_NONE_OF"
e.HAS_ONE_OF="HAS_ONE_OF"
e.HAS_ONLY="HAS_ONLY"
e.INCLUDES_TEXT="INCLUDES_TEXT"
e.IS="IS"
e.IS_EMPTY="IS_EMPTY"
e.IS_NONE_OF="IS_NONE_OF"
e.IS_NOT="IS_NOT"
e.IS_NOT_EMPTY="IS_NOT_EMPTY"
e.IS_ONE_OF="IS_ONE_OF"
e.IS_TRUE="IS_TRUE"
e.IS_FALSE="IS_FALSE"
e.LTE="LTE"
e.MATCHES="MATCHES"
e.SIMILARITY="SIMILARITY"
e.STARTSWITH_TEXT="STARTSWITH_TEXT"
e.SUBSTRUCTURE="SUBSTRUCTURE"}(I||(I={}))
const A={[I.BLASTN]:"Nucleotide BLAST (blastn)",[I.BLASTP]:"Protein BLAST (blastp)",[I.BLASTX]:"blastx",[I.TBLASTN]:"tblastn",[I.TBLASTX]:"tblastx",[I.CONTAINS]:"contains",[I.EQ]:"equals",[I.EXCLUDES_TEXT]:"excludes text",[I.GTE]:"is at least",[I.HAS_NONE_OF]:"has none of",[I.HAS_ONE_OF]:"has one of",[I.HAS_ALL_OF]:"has all of",[I.HAS_ONLY]:"has only",[I.INCLUDES_TEXT]:"includes text",[I.IS]:"is",[I.IS_EMPTY]:"is empty",[I.IS_NONE_OF]:"is none of",[I.IS_NOT]:"is not",[I.IS_NOT_EMPTY]:"is not empty",[I.IS_ONE_OF]:"is one of",[I.IS_TRUE]:"is true",[I.IS_FALSE]:"is false",[I.LTE]:"is at most",[I.MATCHES]:"matches",[I.SIMILARITY]:"is similar to",[I.STARTSWITH_TEXT]:"starts with",[I.SUBSTRUCTURE]:"has substructure"},y=[I.IS_ONE_OF,I.IS_NONE_OF,I.INCLUDES_TEXT,I.STARTSWITH_TEXT,I.EXCLUDES_TEXT],_=[I.IS_TRUE,I.IS_FALSE],C=[I.IS_EMPTY,I.IS_NOT_EMPTY,I.IS_TRUE,I.IS_FALSE],R={[f.ANY_LINK_SCHEMA_FIELD]:[I.HAS_ALL_OF,I.HAS_ONE_OF,I.HAS_NONE_OF],[f.ACCOUNT_STATUS]:[I.IS_ONE_OF],[f.ANCESTOR_FOLDER]:[I.IS],[f.ANCESTOR_STORABLE]:[I.IS],[f.ANNOTATION]:y,[f.ARCHIVE_PURPOSES]:[I.IS_ONE_OF],[f.ARCHIVE_STATUS]:[I.IS],[f.ASSAY_SCHEMA]:[I.IS],[f.AUTHOR]:[I.IS_ONE_OF],[f.BARCODES]:y,[f.BATCH_TAG]:[],[f.BIOENTITY_LABELS]:y,[f.BLAST]:[I.BLASTN,I.BLASTP],[f.CAPABILITIES]:[I.IS_ONE_OF],[f.CONNECTION]:[I.IS_ONE_OF],[f.CONNECTION_GATEWAY]:[I.IS_ONE_OF],[f.CONTAINER_CHECK_OUT_ASSIGNEE]:[I.IS_ONE_OF],[f.CONTAINER_CHECK_OUT_STATUS]:[I.IS_ONE_OF],[f.CONTAINER_CONCENTRATION]:[I.EQ,I.LTE,I.GTE],[f.CONTAINER_CONTENTS]:[I.HAS_ONE_OF,I.HAS_ALL_OF,I.HAS_NONE_OF],[f.CONTAINER_CONTENT_SCHEMA]:[],[f.CONTAINER_PARENT]:[],[f.CONTAINER_QUANTITY]:[I.EQ,I.LTE,I.GTE],[f.CREATED_AT]:[],[f.CREATION_ORIGIN_ENTRY]:[I.IS_ONE_OF],[f.CREATOR]:[I.IS_ONE_OF],[f.CUSTOM_TAG]:[I.IS,I.IS_EMPTY,I.IS_NOT_EMPTY],[f.ENTRY_TEMPLATE]:[I.IS_ONE_OF],[f.FOLDER]:[I.IS],[f.FOLDER_SECTION]:[I.IS],[f.GRID_EMPTY_CONTAINERS]:[I.EQ,I.LTE,I.GTE],[f.GRID_EMPTY_POSITIONS]:[I.EQ,I.LTE,I.GTE],[f.GROUP_BY_KEY]:[I.IS_ONE_OF],[f.HIDDEN]:[I.IS],[f.INGREDIENTS]:[I.HAS_ONE_OF,I.HAS_ALL_OF,I.HAS_NONE_OF],[f.INSTITUTION]:[I.IS],[f.INVENTORY_VALIDATION_ERROR_LABEL]:[I.IS_ONE_OF],[f.INVENTORY_VALIDATION_STATUS]:[I.IS_ONE_OF],[f.ITEM_IN_WORKLIST]:[I.IS],[f.IN_STUDY]:[I.IS],[f.MODIFIED_AT]:[],[f.CHEMICAL_STRUCTURE]:[I.SUBSTRUCTURE,I.SIMILARITY],[f.MONOMER]:[I.IS,I.IS_NOT],[f.NAMES]:y,[f.NOTE_REFERENCE]:[I.HAS_ONE_OF],[f.OLIGO_HELM_DNA]:[I.INCLUDES_TEXT,I.IS],[f.OLIGO_HELM_RNA]:[I.INCLUDES_TEXT,I.IS],[f.ORGANIZATION]:[I.IS],[f.OWNER]:[I.IS_ONE_OF,I.IS_NONE_OF],[f.OWNER_OR_COLLABORATOR]:[I.IS_ONE_OF],[f.PARENT_STORABLE]:[I.IS],[f.PART_SEQUENCE]:[I.HAS_ONE_OF],[f.PROCEDURE_RUN_TASKS]:[I.HAS_ONE_OF],[f.PROCESS]:[I.IS_ONE_OF],[f.PROCESS_CLIENT_ORIGIN]:[I.IS],[f.PROCESS_EXECUTION_TYPE]:[I.IS_ONE_OF],[f.PROCESS_RESPONSIBLE_TEAM]:[I.IS_ONE_OF],[f.PROCESS_STATUS]:[I.HAS_ONE_OF,I.HAS_ONLY,I.HAS_NONE_OF],[f.PROCESS_TASK_RESPONSIBLE_PARTIES]:[I.HAS_ONE_OF],[f.PROCESS_TASK]:[I.IS_ONE_OF],[f.PROCESS_TASK_ASSIGNEE]:[I.IS_ONE_OF],[f.PROCESS_TASK_SCHEDULED_ON_DATE]:[I.IS,I.IS_EMPTY],[f.PROCESS_TASK_EXECUTION_ORIGIN_ENTRY]:[I.IS_ONE_OF],[f.PROCESS_TASK_HAS_FAILED_MAPPINGS]:[I.IS],[f.PROCESS_TASK_STATUS]:[I.IS_ONE_OF],[f.PROCESS_WATCHER]:[I.IS_ONE_OF],[f.PROJECT]:[],[f.PROJECT_ATTRIBUTE]:[I.IS],[f.PROJECT_FOLDER]:[I.IS],[f.PROTEIN_AMINO_ACIDS]:[],[f.PROTEIN_PROSITE]:[],[f.ALPHAFOLD_STRUCTURE]:_,[f.REGISTRY]:[I.IS],[f.REGISTRY_COLLECTION_OWNER]:[I.IS],[f.SAMPLE_RESTRICTION_ACCESS]:[I.IS_ONE_OF],[f.SAMPLE_RESTRICTION_STATUS]:[I.IS_ONE_OF],[f.REVIEW]:[I.IS],[f.REVIEW_LIFECYCLE]:[I.IS],[f.REVIEW_LIFECYCLE_TYPE]:[I.IS_ONE_OF],[f.REQUEST_ASSIGNEE]:[I.IS_ONE_OF],[f.REQUEST_IDS]:y,[f.REQUEST_REQUESTOR]:[I.IS_ONE_OF],[f.REQUEST_STATUS]:[I.IS_ONE_OF],[f.REQUEST_TASK_SCHEMA]:[I.IS],[f.ROOT_PROCESS]:[I.IS_ONE_OF],[f.ROOT_PROCESS_TASK_SCHEMA]:[I.IS],[f.ROOT_PROCESS_WATCHER]:[I.IS_ONE_OF],[f.ROOT_PROCESS_CREATOR]:[I.IS_ONE_OF],[f.RUN_AVAILABILITY]:[I.IS],[f.SCHEMA]:[I.IS_ONE_OF],[f.SCHEMA_INTERFACE]:[I.IS_ONE_OF],[f.SCHEMA_FIELD]:[],[f.SCHEMA_VALIDATION_ERROR_LABEL]:[I.IS_ONE_OF],[f.SCHEMA_VALIDATION_STATUS]:[I.IS_ONE_OF],[f.REGISTRATION_STATUS]:[I.IS],[f.SAMPLE_AUTHORIZED_USERS]:[I.HAS_ONE_OF,I.HAS_ALL_OF,I.HAS_NONE_OF],[f.SAMPLE_OWNERS]:[I.HAS_ONE_OF,I.HAS_ALL_OF,I.HAS_NONE_OF],[f.SEQUENCE_BASES]:[I.INCLUDES_TEXT,I.IS,I.IS_EMPTY],[f.SESSION_NAME]:[I.CONTAINS],[f.SESSION_STATUS]:[I.IS_ONE_OF],[f.SHARED_WITH]:[I.IS],[f.STARRED]:[I.IS],[f.STUDY_PHASE]:[I.IS_ONE_OF],[f.TAG]:[],[f.TEAM]:[I.IS],[f.TOP_LEVEL_PERMISSIONS]:[I.IS],[f.TYPE]:[],[f.TYPES]:[I.IS_ONE_OF],[f.WORKFLOW_STATUS]:[I.IS],[f.WORKFLOW_TEMPLATE]:[I.IS],[f.WORKLIST_TYPE]:[I.IS_ONE_OF],[f.QUERY_API_BIOENTITY_ID]:[I.IS_ONE_OF],[f.QUERY_API_ARCHIVE_REASON]:[I.IS_ONE_OF],[f.QUERY_API_MODIFIED_AT]:[],[f.QUERY_API_CREATED_AT]:[],[f.QUERY_API_AUTHOR]:[I.IS_ONE_OF],[f.QUERY_API_CREATOR]:[I.IS_ONE_OF],[f.QUERY_API_PROJECT]:[I.IS],[f.QUERY_API_REGISTRY]:[I.IS]},N=[f.ACCOUNT_STATUS,f.ANCESTOR_FOLDER,f.ANCESTOR_STORABLE,f.ARCHIVE_STATUS,f.ASSAY_SCHEMA,f.CONTAINER_CONTENT_SCHEMA,f.CONTAINER_PARENT,f.FOLDER,f.FOLDER_SECTION,f.HIDDEN,f.INSTITUTION,f.IN_STUDY,f.ITEM_IN_WORKLIST,f.ORGANIZATION,f.PARENT_STORABLE,f.PROCESS_CLIENT_ORIGIN,f.PROCESS_TASK_HAS_FAILED_MAPPINGS,f.PROJECT,f.PROJECT_ATTRIBUTE,f.PROJECT_FOLDER,f.PROTEIN_AMINO_ACIDS,f.PROTEIN_PROSITE,f.REGISTRY,f.REGISTRY_COLLECTION_OWNER,f.REQUEST_TASK_SCHEMA,f.REVIEW_LIFECYCLE,f.ROOT_PROCESS_TASK_SCHEMA,f.RUN_AVAILABILITY,f.TEAM,f.TOP_LEVEL_PERMISSIONS,f.TYPE,f.SESSION_NAME,f.SHARED_WITH,f.STARRED,f.STUDY_PHASE,f.WORKFLOW_STATUS,f.WORKFLOW_TEMPLATE,f.REGISTRATION_STATUS,f.QUERY_API_PROJECT,f.QUERY_API_REGISTRY],O=[f.ANY_LINK_SCHEMA_FIELD,f.ANNOTATION,f.ARCHIVE_PURPOSES,f.AUTHOR,f.BARCODES,f.BIOENTITY_LABELS,f.CAPABILITIES,f.CONNECTION,f.CONNECTION_GATEWAY,f.CONTAINER_CHECK_OUT_ASSIGNEE,f.CONTAINER_CHECK_OUT_STATUS,f.CREATION_ORIGIN_ENTRY,f.CREATOR,f.ENTRY_TEMPLATE,f.INGREDIENTS,f.INVENTORY_VALIDATION_ERROR_LABEL,f.INVENTORY_VALIDATION_STATUS,f.NAMES,f.PART_SEQUENCE,f.PROCEDURE_RUN_TASKS,f.PROCESS,f.PROCESS_EXECUTION_TYPE,f.PROCESS_STATUS,f.PROCESS_TASK,f.PROCESS_TASK_EXECUTION_ORIGIN_ENTRY,f.PROCESS_TASK_STATUS,f.PROCESS_TASK_RESPONSIBLE_PARTIES,f.QUERY_API_BIOENTITY_ID,f.QUERY_API_ARCHIVE_REASON,f.QUERY_API_AUTHOR,f.QUERY_API_CREATOR,f.SAMPLE_RESTRICTION_ACCESS,f.SAMPLE_RESTRICTION_STATUS,f.REQUEST_ASSIGNEE,f.REQUEST_IDS,f.REQUEST_REQUESTOR,f.REQUEST_STATUS,f.REVIEW_LIFECYCLE_TYPE,f.ROOT_PROCESS,f.ROOT_PROCESS_CREATOR,f.SAMPLE_AUTHORIZED_USERS,f.SAMPLE_OWNERS,f.SCHEMA,f.SCHEMA_INTERFACE,f.SCHEMA_VALIDATION_ERROR_LABEL,f.SCHEMA_VALIDATION_STATUS,f.SESSION_STATUS,f.TYPES,f.WORKLIST_TYPE],b=[f.PROCESS_RESPONSIBLE_TEAM,f.PROCESS_TASK_ASSIGNEE,f.PROCESS_WATCHER,f.ROOT_PROCESS_WATCHER],v=[f.PROCESS_TASK_SCHEDULED_ON_DATE],P=[f.CREATED_AT,f.MODIFIED_AT,f.QUERY_API_MODIFIED_AT,f.QUERY_API_CREATED_AT],L=[f.SEQUENCE_BASES,f.OLIGO_HELM_DNA,f.OLIGO_HELM_RNA],D=[d.FieldType.TEXT,d.FieldType.LONG_TEXT,d.FieldType.DATE,d.FieldType.DATETIME]
function isStringFieldType(e){return D.includes(e)}const M=[d.FieldType.FLOAT,d.FieldType.INTEGER]
function isNumericFieldType(e){return M.includes(e)}const w=[d.FieldType.SELECTOR,d.FieldType.BIOENTITY_LINK,d.FieldType.BLOB_LINK,d.FieldType.PART_LINK,d.FieldType.BATCH_LINK,d.FieldType.ENTRY_LINK,d.FieldType.TRANSCRIPTION_LINK,d.FieldType.TRANSLATION_LINK,d.FieldType.STORABLE_LINK]
function isMultiValueFieldType(e){return w.includes(e)}var F,k,U,x,B,Z
!function(e){e.BATCH="Batch"
e.BIOENTITY="Entity"
e.ENTRY="Entry"
e.STORAGE="Inventory"
e.WORKLIST="Worklist"}(F||(F={}))
!function(e){e.AT_POS="AT_POS"
e.ANY_POS="ANY_POS"
e.MIN_COUNT="MIN_COUNT"
e.MAX_COUNT="MAX_COUNT"}(k||(k={}))
!function(e){e.MOL="MOL"
e.SMILES="SMILES"}(U||(U={}))
!function(e){e.BOTH="both"
e.PLUS="plus"
e.MINUS="minus"}(x||(x={}))
!function(e){e.PAM30="PAM30"
e.PAM70="PAM70"
e.PAM250="PAM250"
e.BLOSUM45="BLOSUM45"
e.BLOSUM50="BLOSUM50"
e.BLOSUM62="BLOSUM62"
e.BLOSUM80="BLOSUM80"
e.BLOSUM90="BLOSUM90"}(B||(B={}))
!function(e){e.NoAdjustment="0"
e.CompBasedStats="1"
e.ConditionalAdjustment="2"
e.UnconditionalAdjustment="3"}(Z||(Z={}))
const q={[Z.NoAdjustment]:"No adjustment",[Z.CompBasedStats]:"Composition-based statistics",[Z.ConditionalAdjustment]:"Conditional compositional score matrix adjustment",[Z.UnconditionalAdjustment]:"Unconditional compositional score matrix adjustment"}
var G,V,H,W
!function(e){e.MegaBLAST="megablast"
e.DCMegaBLAST="dc-megablast"
e.BLASTN="blastn"
e.BLASTNShort="blastn-short"}(G||(G={}))
!function(e){e.BLASTP="blastp"
e.BLASTPShort="blastp-short"
e.BLASTPFast="blastp-fast"}(V||(V={}))
!function(e){e.BLASTX="blastx"
e.BLASTXFast="blastx-fast"}(H||(H={}))
!function(e){e.TBLASTN="tblastn"
e.TBLASTNFast="tblastn-fast"}(W||(W={}))
const hasTaskParam=e=>null!=e.task,hasMatrixParam=e=>null!=e.matrix,hasStrandParam=e=>null!=e.strand,hasMatchScoreParam=e=>{const t=e
return null!=t.reward&&null!=t.penalty},isSingleValueFilterKey=e=>N.includes(e),isSingleValueFilter=e=>isSingleValueFilterKey(e.key),isMultiValueFilterKey=e=>O.includes(e),isNullableMultiValueFilterKey=e=>b.includes(e),isMultiValueFilter=e=>isMultiValueFilterKey(e.key),isNullableMultiValueFilter=e=>isNullableMultiValueFilterKey(e.key),isDateFilterKey=e=>v.includes(e),isDateFilter=e=>isDateFilterKey(e.key)
function isDatetimeFilterKey(e){return P.includes(e)}const isDatetimeFilter=e=>isDatetimeFilterKey(e.key),isFieldFilterKey=e=>[f.BATCH_TAG,f.SCHEMA_FIELD].includes(e),isCustomTagFilter=e=>e.key===f.CUSTOM_TAG,isFieldFilter=e=>isFieldFilterKey(e.key)
function isContainerQuantityFilter(e){return e.key===f.CONTAINER_QUANTITY}function isContainerConcentrationFilter(e){return e.key===f.CONTAINER_CONCENTRATION}function isFullTextFilterKey(e){return L.includes(e)}function isFullTextFilter(e){return isFullTextFilterKey(e.key)}function isMonomerFilter(e){return e.key===f.MONOMER}function isChemicalStructureFilter(e){return e.key===f.CHEMICAL_STRUCTURE}function isBLASTFilter(e){return e.key===f.BLAST}const isStringFieldFilter=e=>D.includes(e.fieldType),isMultiLinkFieldFilter=e=>w.includes(e.fieldType),isNumericFieldFilter=e=>M.includes(e.fieldType)
function keyToEmptyFilter(e){return function _keyToEmptyFilter(e){const t=R[e][0]
if(e===f.STARRED)return{key:e,operator:t,value:"starred"}
if(e===f.ARCHIVE_PURPOSES)return{key:e,operator:t,value:[i.BH]}
if(e===f.MONOMER)return{key:e,operator:t,value:l.q_.CHOOSING,qualifier:k.ANY_POS}
if(e===f.GROUP_BY_KEY)return{key:e,operator:I.IS_ONE_OF,groupByField:"",value:[]}
if(e===f.CHEMICAL_STRUCTURE)return{key:e,operator:t,format:U.SMILES,value:""}
if(e===f.BLAST)return{key:e,operator:t,value:{textSequences:[],apiIdentifiers:[]}}
if(e===f.ALPHAFOLD_STRUCTURE)return{key:e,operator:t,value:null}
if(isFullTextFilterKey(e))return{key:e,operator:t,value:""}
if(isSingleValueFilterKey(e))return{key:e,operator:t,value:null}
if(isMultiValueFilterKey(e))return{key:e,operator:t,value:[]}
if(isNullableMultiValueFilterKey(e))return{key:e,operator:t,value:[],includeNull:!1}
if(isDateFilterKey(e))return{key:e,operator:t,value:{fromDate:null,toDate:null}}
if(isDatetimeFilterKey(e))return{key:e,operator:t,value:{fromDatetime:null,toDatetime:null}}
if(e===f.CUSTOM_TAG)return{key:e,operator:t,name:null,value:null}
if(isFieldFilterKey(e))return{key:e,operator:t,value:"",fieldId:null,fieldType:d.FieldType.TEXT}
if(e===f.REVIEW)return{key:e,operator:t,value:{review_status:null,role:null}}
if(e===f.CONTAINER_QUANTITY)return{key:e,operator:t,value:{units:null,value:null}}
if(e===f.CONTAINER_CONCENTRATION)return{key:e,operator:t,value:{units:null,value:null}}
if(e===f.GRID_EMPTY_POSITIONS)return{key:e,operator:t,value:null}
if(e===f.GRID_EMPTY_CONTAINERS)return{key:e,operator:t,value:null}
if(e===f.CONTAINER_CONTENTS)return{key:e,operator:t,value:{contentIds:[]}}
if(e===f.NOTE_REFERENCE)return{key:e,operator:t,value:{referencedType:F.BIOENTITY,referencedIds:[]}}
if(e===f.OWNER)return{key:e,operator:t,value:{userIds:[],organizationIds:[]}}
if(e===f.OWNER_OR_COLLABORATOR)return{key:e,operator:t,value:{userIds:[],organizationIds:[],teamIds:[]}}
throw new Error(`Unexpected filter key ${(0,p.vE)(e)}`)}(e)}var Y
!function(e){e.ANALYSES_AND_ANALYTICS_DASHBOARDS="ANALYSES_AND_ANALYTICS_DASHBOARDS"
e.BENCHLING_APPS="BENCHLING_APPS"
e.BIOENTITIES_AND_BATCHES="BIOENTITIES_AND_BATCHES"
e.CONNECTIONS="CONNECTIONS"
e.FOLDERS_AND_ITEMS="FOLDERS_AND_ITEMS"
e.GLOBAL="GLOBAL"
e.JELLYFISH="JELLYFISH"
e.PROCESS_MANAGEMENT="PROCESS_MANAGEMENT"
e.PROJECTS="PROJECTS"
e.REQUEST="REQUEST"
e.RUN="RUN"
e.STORABLE="STORABLE"
e.STUDY_ITEMS="STUDY_ITEMS"
e.STUDIES="STUDIES"
e.WORKFLOW="WORKFLOW"
e.WORKLIST="WORKLIST"
e.WORKLIST_ITEMS="WORKLIST_ITEMS"
e.WORKSHEET="WORKSHEET"}(Y||(Y={}))
const $="/1/api/search"
var K,z
!function(e){e.AT_MENTION="AT_MENTION"
e.ENTITY_LINK="ENTITY_LINK"}(K||(K={}))
!function(e){e.SORT_BARCODE_KEY="barcode"
e.SORT_BLAST_E_VALUE="blast_e_value"
e.SORT_REGISTRY_IDENTIFIER_KEY="collection_alias"
e.SORT_CREATED_AT_KEY="created_at"
e.SORT_NAME_KEY="name"
e.SORT_IDENTIFIER_KEY="identifier"
e.SORT_MODIFIED_AT_KEY="modified_at"
e.SORT_WORKLIST_POSITION_KEY="worklist_position"
e.SORT_RELEVANCE_KEY="relevance"
e.SORT_SCHEDULED_ON_KEY="scheduled_on"
e.SORT_SCHEMA_NAME="schema_name"
e.SORT_CREATOR_NAME="creator_name"
e.SORT_RESPONSIBLE_TEAM_NAME="responsible_team_name"
e.SORT_EXECUTION_TYPE="execution_type"
e.SORT_PROCESS_ID="workflow_task_group_id"
e.SORT_ASSIGNEE_NAME="assignee_name"
e.SORT_STATUS="status"
e.SORT_PROCESS_TASK_ID="workflow_task_id"
e.SORT_CHEMICAL_SIMILARITY="chemical_similarity"
e.SORT_SAMPLE_RESTRICTION_STATUS="sample_restriction_status"
e.SORT_STARRED="starred"}(z||(z={}))
const Q={[f.ACCOUNT_STATUS]:{key:f.ACCOUNT_STATUS,prefix:"accountStatus:",name:"Account Status"},[f.ANY_LINK_SCHEMA_FIELD]:{key:f.ANY_LINK_SCHEMA_FIELD,prefix:"linkedItems:",name:"Linked items"},[f.ANCESTOR_FOLDER]:{key:f.ANCESTOR_FOLDER,prefix:"ancestorFolder:",name:"Folder"},[f.ANCESTOR_STORABLE]:{key:f.ANCESTOR_STORABLE,prefix:"ancestorStorable:",name:"Stored within"},[f.ANNOTATION]:{key:f.ANNOTATION,prefix:"annotations:",name:"Annotation Name"},[f.ARCHIVE_PURPOSES]:{key:f.ARCHIVE_PURPOSES,prefix:"archivePurposes:",name:"Archived"},[f.ARCHIVE_STATUS]:{key:f.ARCHIVE_STATUS,prefix:"archiveStatus:"},[f.ASSAY_SCHEMA]:{key:f.ASSAY_SCHEMA,prefix:"assaySchema:"},[f.AUTHOR]:{key:f.AUTHOR,prefix:"authors:",name:"Author"},[f.BARCODES]:{key:f.BARCODES,prefix:"barcodes:",name:"Barcode"},[f.BATCH_TAG]:{key:f.BATCH_TAG,name:"Batch Field"},[f.BIOENTITY_LABELS]:{key:f.BIOENTITY_LABELS,prefix:"bioentityLabels:",name:"Name, ID, or Alias"},[f.BLAST]:{key:f.BLAST,prefix:"blast:",name:"BLAST"},[f.CAPABILITIES]:{key:f.CAPABILITIES,prefix:"capabilities:",name:"Application Access"},[f.CHEMICAL_STRUCTURE]:{key:f.CHEMICAL_STRUCTURE,prefix:"chemicalStructure:",name:"Chemical Structure"},[f.CONNECTION]:{key:f.CONNECTION,prefix:"connection:",name:"Connection"},[f.CONNECTION_GATEWAY]:{key:f.CONNECTION_GATEWAY,prefix:"connectionGateway:",name:"Gateway"},[f.CONTAINER_CHECK_OUT_ASSIGNEE]:{key:f.CONTAINER_CHECK_OUT_ASSIGNEE,prefix:"containerCheckOutAssignee:",name:"Check-out assignee"},[f.CONTAINER_CHECK_OUT_STATUS]:{key:f.CONTAINER_CHECK_OUT_STATUS,prefix:"containerCheckOutStatus:",name:"Check-out status"},[f.CONTAINER_CONCENTRATION]:{key:f.CONTAINER_CONCENTRATION,prefix:"containerConcentration:",name:"Concentration"},[f.CONTAINER_CONTENTS]:{key:f.CONTAINER_CONTENTS,prefix:"containerContents:",name:"Contents"},[f.CONTAINER_CONTENT_SCHEMA]:{key:f.CONTAINER_CONTENT_SCHEMA,prefix:"containerContentSchema:",name:"Content type"},[f.CONTAINER_PARENT]:{key:f.CONTAINER_PARENT,prefix:"containerParent:",name:"Container contents"},[f.CONTAINER_QUANTITY]:{key:f.CONTAINER_QUANTITY,prefix:"containerVolume:",name:(0,c.Z)()},[f.CREATED_AT]:{key:f.CREATED_AT,prefix:"createdAt:",name:"Created"},[f.CREATION_ORIGIN_ENTRY]:{key:f.CREATION_ORIGIN_ENTRY,prefix:"originEntry:",name:"Origin entry"},[f.CREATOR]:{key:f.CREATOR,prefix:"creator:",name:"Creator"},[f.CUSTOM_TAG]:{key:f.CUSTOM_TAG,prefix:"customTag:",name:"Custom Field"},[f.ENTRY_TEMPLATE]:{key:f.ENTRY_TEMPLATE,prefix:"entryTemplate:",name:"Entry Template"},[f.FOLDER]:{key:f.FOLDER,prefix:"folder:",name:"Folder"},[f.FOLDER_SECTION]:{key:f.FOLDER_SECTION,prefix:"section:",name:"Section"},[f.GRID_EMPTY_CONTAINERS]:{key:f.GRID_EMPTY_CONTAINERS,prefix:"gridEmptyContainers:",name:"Empty containers"},[f.GRID_EMPTY_POSITIONS]:{key:f.GRID_EMPTY_POSITIONS,prefix:"gridEmptyPositions:",name:"Empty positions"},[f.GROUP_BY_KEY]:{key:f.GROUP_BY_KEY,prefix:"groupByKey:",name:"Group By Key"},[f.HIDDEN]:{key:f.HIDDEN,prefix:"hidden:",name:"Hidden"},[f.INGREDIENTS]:{key:f.INGREDIENTS,prefix:"ingredients:",name:"Ingredients"},[f.INSTITUTION]:{key:f.INSTITUTION,prefix:"institution:",name:"Institution"},[f.INVENTORY_VALIDATION_ERROR_LABEL]:{key:f.INVENTORY_VALIDATION_ERROR_LABEL,prefix:"inventoryValidationErrorLabels:",name:"Failure Reason"},[f.INVENTORY_VALIDATION_STATUS]:{key:f.INVENTORY_VALIDATION_STATUS,prefix:"inventoryValidationStatuses:",name:"Status"},[f.ITEM_IN_WORKLIST]:{key:f.ITEM_IN_WORKLIST,prefix:"inWorklist:",name:"In Worklist"},[f.IN_STUDY]:{key:f.IN_STUDY,prefix:"inStudy:",name:"In Study"},[f.MODIFIED_AT]:{key:f.MODIFIED_AT,prefix:"modifiedAt:",name:"Modified"},[f.MONOMER]:{key:f.MONOMER,prefix:"monomer:",name:"Monomer"},[f.NAMES]:{key:f.NAMES,prefix:"names:",name:"Name"},[f.NOTE_REFERENCE]:{key:f.NOTE_REFERENCE,prefix:"noteReference:",name:"Mentions"},[f.OLIGO_HELM_DNA]:{key:f.OLIGO_HELM_DNA,prefix:"dnaHelm:",name:"DNA HELM String"},[f.OLIGO_HELM_RNA]:{key:f.OLIGO_HELM_RNA,prefix:"rnaHelm:",name:"RNA HELM String"},[f.ORGANIZATION]:{key:f.ORGANIZATION,name:"Organization"},[f.OWNER]:{key:f.OWNER,name:"Owner",prefix:"owner:"},[f.OWNER_OR_COLLABORATOR]:{key:f.OWNER_OR_COLLABORATOR,name:"Owner or collaborator",prefix:"ownerOrCollaborator:"},[f.PARENT_STORABLE]:{key:f.PARENT_STORABLE,prefix:"parentStorable:"},[f.PART_SEQUENCE]:{key:f.PART_SEQUENCE,name:"Part Sequences",prefix:"partSequence:"},[f.PROCEDURE_RUN_TASKS]:{key:f.PROCEDURE_RUN_TASKS,name:"Experiment run",prefix:"procedureRunTasks:"},[f.PROCESS]:{key:f.PROCESS,prefix:"taskGroup:",name:"Task group"},[f.PROCESS_CLIENT_ORIGIN]:{key:f.PROCESS_CLIENT_ORIGIN,prefix:"view:",name:"View"},[f.PROCESS_EXECUTION_TYPE]:{key:f.PROCESS_EXECUTION_TYPE,prefix:"executionType:",name:"Execution type"},[f.PROCESS_RESPONSIBLE_TEAM]:{key:f.PROCESS_RESPONSIBLE_TEAM,prefix:"responsibleTeam:",name:"Responsible team"},[f.PROCESS_STATUS]:{key:f.PROCESS_STATUS,prefix:"status:",name:"Status"},[f.PROCESS_TASK]:{key:f.PROCESS_TASK,prefix:"workflowTask:",name:"Task"},[f.PROCESS_TASK_ASSIGNEE]:{key:f.PROCESS_TASK_ASSIGNEE,prefix:"assignee:",name:"Assignee"},[f.PROCESS_TASK_SCHEDULED_ON_DATE]:{key:f.PROCESS_TASK_SCHEDULED_ON_DATE,prefix:"scheduledOnDate:",name:"Scheduled on"},[f.PROCESS_TASK_EXECUTION_ORIGIN_ENTRY]:{key:f.PROCESS_TASK_EXECUTION_ORIGIN_ENTRY,prefix:"executionEntry:",name:"Entry"},[f.PROCESS_TASK_HAS_FAILED_MAPPINGS]:{key:f.PROCESS_TASK_HAS_FAILED_MAPPINGS,prefix:"hasFailedMappings:",name:"Failed mapping"},[f.PROCESS_TASK_STATUS]:{key:f.PROCESS_TASK_STATUS,prefix:"taskStatus:",name:"Status"},[f.PROCESS_TASK_RESPONSIBLE_PARTIES]:{key:f.PROCESS_TASK_RESPONSIBLE_PARTIES,prefix:"taskResponsibleParties:",name:"Responsible parties"},[f.PROCESS_WATCHER]:{key:f.PROCESS_WATCHER,prefix:"watcher:",name:"Watcher"},[f.PROJECT]:{key:f.PROJECT},[f.PROJECT_ATTRIBUTE]:{key:f.PROJECT_ATTRIBUTE,name:"Attribute"},[f.PROJECT_FOLDER]:{key:f.PROJECT_FOLDER,prefix:"projectFolder:",name:"Folder"},[f.PROTEIN_AMINO_ACIDS]:{key:f.PROTEIN_AMINO_ACIDS,prefix:"aminoAcids:",name:"AA String"},[f.PROTEIN_PROSITE]:{key:f.PROTEIN_PROSITE,prefix:"prosite:",name:"PROSITE pattern"},[f.ALPHAFOLD_STRUCTURE]:{key:f.ALPHAFOLD_STRUCTURE,prefix:"proteinStructure:",name:"Has AlphaFold structure"},[f.REGISTRY]:{key:f.REGISTRY,prefix:"registry:"},[f.REGISTRY_COLLECTION_OWNER]:{key:f.REGISTRY_COLLECTION_OWNER,prefix:"registryCollectionOwner:",name:"Collection"},[f.SAMPLE_RESTRICTION_ACCESS]:{key:f.SAMPLE_RESTRICTION_ACCESS,prefix:"sampleRestrictionAccess:",name:"Restriction access"},[f.SAMPLE_RESTRICTION_STATUS]:{key:f.SAMPLE_RESTRICTION_STATUS,prefix:"sampleRestrictionStatus:",name:"Restriction status"},[f.REVIEW]:{key:f.REVIEW,prefix:"rev:",name:"Review"},[f.REVIEW_LIFECYCLE]:{key:f.REVIEW_LIFECYCLE,prefix:"reviewLifecycle:",name:"Review Process"},[f.REVIEW_LIFECYCLE_TYPE]:{key:f.REVIEW_LIFECYCLE_TYPE,prefix:"reviewLifecycleType:",name:"Review Process Type"},[f.REQUEST_ASSIGNEE]:{key:f.REQUEST_ASSIGNEE,prefix:"requestAssignee:",name:"Assignee"},[f.REQUEST_IDS]:{key:f.REQUEST_IDS,prefix:"requestId:",name:"Request ID"},[f.REQUEST_REQUESTOR]:{key:f.REQUEST_REQUESTOR,prefix:"requestor:",name:"Requestor"},[f.REQUEST_STATUS]:{key:f.REQUEST_STATUS,prefix:"requestStatus:",name:"Status"},[f.REQUEST_TASK_SCHEMA]:{key:f.REQUEST_TASK_SCHEMA,prefix:"requestTaskSchema:",name:"Task"},[f.RUN_AVAILABILITY]:{key:f.RUN_AVAILABILITY,prefix:"runAvailability:"},[f.SCHEMA_FIELD]:{key:f.SCHEMA_FIELD,prefix:"field:",name:"Field"},[f.SCHEMA]:{key:f.SCHEMA,prefix:"schema:"},[f.SCHEMA_INTERFACE]:{key:f.SCHEMA_INTERFACE,prefix:"schemaInterface:"},[f.SCHEMA_VALIDATION_ERROR_LABEL]:{key:f.SCHEMA_VALIDATION_ERROR_LABEL,prefix:"schemaValidationErrorLabels:",name:"Failure Reason"},[f.SCHEMA_VALIDATION_STATUS]:{key:f.SCHEMA_VALIDATION_STATUS,prefix:"schemaValidationStatuses:",name:"Status"},[f.REGISTRATION_STATUS]:{key:f.REGISTRATION_STATUS,prefix:"registrationStatus:",name:"Registration Status"},[f.ROOT_PROCESS]:{key:f.ROOT_PROCESS,prefix:"rootProcess:",name:"Flowchart task group"},[f.ROOT_PROCESS_TASK_SCHEMA]:{key:f.ROOT_PROCESS_TASK_SCHEMA,prefix:"flowchartTaskSchema:",name:"Flowchart task schema"},[f.ROOT_PROCESS_CREATOR]:{key:f.ROOT_PROCESS_CREATOR,prefix:"flowchartCreator:",name:"Flowchart creator"},[f.ROOT_PROCESS_WATCHER]:{key:f.ROOT_PROCESS_WATCHER,prefix:"flowchartWatcher:",name:"Flowchart watcher"},[f.SAMPLE_AUTHORIZED_USERS]:{key:f.SAMPLE_AUTHORIZED_USERS,prefix:"sampleAuthorizedUsers:",name:(0,o.T3)()},[f.SAMPLE_OWNERS]:{key:f.SAMPLE_OWNERS,prefix:"sampleOwners:",name:"Sample owners"},[f.SEQUENCE_BASES]:{key:f.SEQUENCE_BASES,prefix:"bases:",name:"Nucleotide String"},[f.SESSION_NAME]:{key:f.SESSION_NAME,prefix:"sessionName:",name:"Session name"},[f.SESSION_STATUS]:{key:f.SESSION_STATUS,prefix:"sessionStatus:",name:"Session status"},[f.SHARED_WITH]:{key:f.SHARED_WITH,name:"Shared with"},[f.STARRED]:{key:f.STARRED,prefix:"starred:",name:"Starred"},[f.STUDY_PHASE]:{key:f.STUDY_PHASE,prefix:"studyPhase:",name:"Phase"},[f.TAG]:{key:f.TAG,prefix:"tag:",name:"Field"},[f.TEAM]:{key:f.TEAM,name:"Team"},[f.TOP_LEVEL_PERMISSIONS]:{key:f.TOP_LEVEL_PERMISSIONS,prefix:"topLevelPermissions:",name:"Top Level Permissions"},[f.TYPE]:{key:f.TYPE,name:"Entity Type"},[f.TYPES]:{key:f.TYPES,prefix:"types:",name:"Type"},[f.WORKFLOW_STATUS]:{key:f.WORKFLOW_STATUS,prefix:"workflowStatus:",name:"Status"},[f.WORKFLOW_TEMPLATE]:{key:f.WORKFLOW_TEMPLATE,prefix:"workflowTemplate:",name:"Template"},[f.WORKLIST_TYPE]:{key:f.WORKLIST_TYPE,prefix:"worklistType:",name:"Worklist Type"},[f.QUERY_API_BIOENTITY_ID]:{key:f.QUERY_API_BIOENTITY_ID,prefix:"id:",name:"Name"},[f.QUERY_API_ARCHIVE_REASON]:{key:f.QUERY_API_ARCHIVE_REASON,prefix:"archiveStatus:",name:"Archived"},[f.QUERY_API_MODIFIED_AT]:{key:f.QUERY_API_MODIFIED_AT,prefix:"modifiedAt:",name:"Modified"},[f.QUERY_API_CREATED_AT]:{key:f.QUERY_API_CREATED_AT,prefix:"createdAt:",name:"Created"},[f.QUERY_API_AUTHOR]:{key:f.QUERY_API_AUTHOR,prefix:"author:",name:"Author"},[f.QUERY_API_CREATOR]:{key:f.QUERY_API_CREATOR,prefix:"creator:",name:"Creator"},[f.QUERY_API_PROJECT]:{key:f.QUERY_API_PROJECT,prefix:"project:",name:"Project"},[f.QUERY_API_REGISTRY]:{key:f.QUERY_API_REGISTRY,prefix:"registry:",name:"Registry"}},j=new Set(["contentAttribute:"]),J=new Set(["CONTAINER_CONTENT_SCHEMA_FIELD"]),X=";",ee=":",te=",",ne=a.shape({key:a.string.isRequired,operator:a.string,value:a.any}),ae=(a.shape({filter:ne,id:a.string.isRequired}),[d.FieldType.TEXT,d.FieldType.LONG_TEXT])
function isTextFieldType(e){return ae.includes(e)}const ie=[...M,d.FieldType.DATE,d.FieldType.DATETIME],re=3,se=`Searches under ${re} characters return limited results`,oe="Sorry, we ran into an error returning your results. Please contact support if this continues.",le="Additional sort fields are not available"
function getNoResultsMessage(e){return 1!==(null==e?void 0:e.value.length)?"No items found":`No ${(0,m.B_)(e.value[0])} found`}var ce
!function(e){e.LISTING="LISTING"
e.FOR_WRITE_ACTION="FOR_WRITE_ACTION"}(ce||(ce={}))
const de=";",ue=":",me="1",pe="0",he="X-Search-Correlation-Id",Ee=[z.SORT_CHEMICAL_SIMILARITY],Se=[I.SUBSTRUCTURE,I.SIMILARITY]},374669:(e,t,n)=>{n.d(t,{WN:()=>rememberAppliedSortsToUserPreference,eP:()=>getSavedSearchPreferenceKey,hN:()=>getAppliedFiltersFromUserPreference,hg:()=>rememberAppliedFiltersToUserPreference,i_:()=>getAppliedSortsFromUserPreference})
var a=n(432128),i=n(89635),r=n(238037),s=n(62315)
function getAppliedSortsFromUserPreference(e){var t
const n=a.Z.get(getUserPreferenceSortsKey(e))
return null!==(t=null==n?void 0:n.filter((e=>e.key!==s.bo.SORT_CHEMICAL_SIMILARITY&&e.key!==s.bo.SORT_BLAST_E_VALUE)))&&void 0!==t?t:[]}function rememberAppliedSortsToUserPreference(e,t){(0,i.lO)(t)||(0,i.ch)(t)||(0,i._F)(t)||a.Z.set(getUserPreferenceSortsKey(e),t)}function getAppliedFiltersFromUserPreference(e){var t
return null!==(t=a.Z.get(getUserPreferenceFiltersKey(e)))&&void 0!==t?t:[]}function rememberAppliedFiltersToUserPreference(e,t,n){const i=new r.Z(n),s=t.filter((e=>null==n||i.has(e.key)))
a.Z.set(getUserPreferenceFiltersKey(e),s)}function getUserPreferenceSortsKey(e){return`${s.J4.SORTS_NAMESPACE}${e}`}function getUserPreferenceFiltersKey(e){return`${s.FB}${e}`}function getSavedSearchPreferenceKey(e){return`${s.ut}${e}`}},365699:(e,t,n)=>{n.d(t,{Cf:()=>i,SM:()=>r,UM:()=>o,Y6:()=>l,nG:()=>a,oL:()=>s,wL:()=>c})
const a="e_value",i="query_cover",r="hit_length",s="percent_identity",o="bit_score",l="Run Benchling BLAST",c="Submit to NCBI BLAST"},382580:(e,t,n)=>{n.d(t,{Z:()=>BLASTOperatorToggleGroup})
var a=n(64558),i=n(692013),r=n(989526),s=n(248445),o=n(62315),l=n(946948)
const c=[o.EF.BLASTN,o.EF.BLASTP,o.EF.BLASTX,o.EF.TBLASTN,o.EF.TBLASTX]
function BLASTOperatorToggleGroup({operator:e,onChangeType:t}){const n=(0,r.useMemo)((()=>c.map((e=>({id:e,label:r.createElement("span",{className:(0,i.iv)(s.W2.blastTypeLabel)},o.Md[e]),secondaryLabel:s.yH[e],value:e})))),[])
return r.createElement(l.Z,{selectedValue:e,options:n,onChange:t||a.ZT,isVertical:!0,title:"",hasBottomSpacing:!1})}},861259:(e,t,n)=>{n.d(t,{C7:()=>GeneralParametersBLASTParamsSection,BP:()=>ProgramTypeBLASTParamsSection,o3:()=>ScoringBLASTParamsSection})
var a,i=n(692013),r=n(764403),s=n.n(r),o=n(913930),l=n.n(o),c=n(989526),d=n(248445),u=n(855640),m=n(62315),p=n(808844)
!function(e){e.TASK="task"
e.EVALUE="evalue"
e.WORD_SIZE="word_size"
e.STRAND="strand"
e.GAP_COST="gap_cost"
e.MATCH_SCORE="match_score"
e.CULLING_LIMIT="culling_limit"
e.MATRIX="matrix"
e.COMP_BASED_STATS="comp_based_stats"}(a||(a={}))
const getTaskUIField=e=>{if(e===m.Ei.MegaBLAST)return"megablast (highly similar sequences)"
if(e===m.Ei.DCMegaBLAST)return"discontiguous megablast (more dissimilar sequences)"
if(e===m.Ei.BLASTN)return"blastn (somewhat similar sequences)"
if(e===m.Ei.BLASTNShort)return"blastn-short (optimized for < 30 nucleotides)"
if(e===m.kc.BLASTP)return"blastp (standard protein-protein comparisons)"
if(e===m.kc.BLASTPFast)return"blastp-fast (accelerated version with a larger word size)"
if(e===m.kc.BLASTPShort)return"blastp-short (optimized for < 30 residues)"
if(e===m.ii.BLASTX)return"blastx (standard translated nucleotide-protein comparison)"
if(e===m.ii.BLASTXFast)return"blastx-fast (accelerated version with a larger word size)"
if(e===m.I_.TBLASTN)return"tblastn (standard protein-translated nucleotide comparison)"
if(e===m.I_.TBLASTNFast)return"tblastn-fast (accelerated version with a larger word size)"
throw new Error(`Unsupported BLAST task: ${e}`)},getEvalueUIField=e=>({label:"Expect value (E-value)",description:"The number of expected hits of similar quality (score) that could be found just by chance.",value:e.defaultValue}),getCullingLimitUIField=e=>({label:"Max matches in a query range",description:"Remove any hits that are completely enveloped by at least that number of higher-scoring hits. This option is useful if many strong matches to one part of a query may prevent BLAST from presenting weaker matches to another part of the query.",value:e.defaultValue}),getWordSizeUIField=e=>({label:"Word size",description:"The length of the seed that initiates an alignment.",options:e.values.map((e=>({value:e}))),defaultValue:e.defaultValue}),getGapCostsUIField=e=>({label:"Gap costs",description:"Cost to create and extend a gap in an alignment.",options:e.values.map((({existence:e,extension:t})=>({value:{existence:e,extension:t},display:void 0===t?"Linear (determined by match score)":`Existence: ${e}, extension: ${t}`}))),defaultValue:e.defaultValue}),getMatchScoreUIField=e=>({label:"Match / mismatch scores",description:"Reward and penalty for matching and mismatching bases.",options:e.values.map((({reward:e,penalty:t})=>({value:{reward:e,penalty:t},display:`Match reward: ${e}, mismatch penalty: ${t}`}))),defaultValue:e.defaultValue}),getStrandUIField=e=>({label:"Strand",description:"Which strand(s) of the query sequence(s) to search against the database.",options:e.values.map((e=>({value:e,display:(0,p.kC)(e)}))),defaultValue:e.defaultValue}),getMatrixUIField=e=>({label:"Scoring matrix",options:e.values.map((e=>({value:e}))),defaultValue:e.defaultValue}),getCompBasedStatsUIField=e=>({label:"Composition-based statistics",options:e.values.map((e=>({value:e,display:m.ju[e]}))),defaultValue:e.defaultValue})
a.TASK,a.EVALUE,a.WORD_SIZE,a.STRAND,a.GAP_COST,a.MATCH_SCORE,a.CULLING_LIMIT,a.MATRIX,a.COMP_BASED_STATS
var h=n(400565),E=n(103593),S=n(102176),T=n(954240),g=n(36424),f=n(137975),I=n(801455),A=n(865486),y=n(924982)
function BLASTParamsSection({candidateParams:e,setCandidateParams:t,filter:n,setFilter:r,title:o,keys:l}){const[p,E]=(0,c.useState)(void 0===o),T=Object.keys(e).map((i=>{if(l.includes(i))switch(i){case a.TASK:if(n.operator===m.EF.TBLASTX)throw new Error("TBLASTX should not have program type.")
return c.createElement(ParamsInputField,{key:i,label:"Program",name:i,options:e.task.values.map((e=>({value:e,display:getTaskUIField(e)}))),currentValue:n.params.task,updateParams:e=>{const a={...n,params:(0,h.vG)(n,e)}
r(a)
t&&t((0,h.b1)(a))},wide:!0})
case a.EVALUE:return c.createElement(ParamsInputField,{key:i,label:getEvalueUIField(e.evalue).label,name:i,options:[],currentValue:n.params[i],updateParams:e=>{r((t=>({...t,params:{...t.params,[i]:e}})))}})
case a.WORD_SIZE:{const t=getWordSizeUIField(e.word_size)
return c.createElement(ParamsInputField,{key:i,label:t.label,name:i,options:t.options,currentValue:n.params.word_size,updateParams:e=>{r((t=>({...t,params:{...t.params,word_size:e}})))}})}case a.STRAND:{const t=getStrandUIField(e.strand)
return c.createElement(ParamsInputField,{key:i,label:t.label,name:i,options:t.options,currentValue:n.params&&(0,m.vr)(n.params)?n.params.strand:void 0,updateParams:e=>{r((t=>({...t,params:{...t.params,strand:e}})))}})}case a.GAP_COST:{const t=getGapCostsUIField(e.gap_cost),{gapopen:a,gapextend:s}=n.params
return c.createElement(ParamsInputField,{key:i,label:t.label,name:i,options:t.options,currentValue:{existence:a,extension:s},updateParams:e=>{r((t=>({...t,params:{...t.params,gapopen:e.existence,gapextend:e.extension}})))}})}case a.MATCH_SCORE:{const a=getMatchScoreUIField(e.match_score),{reward:s,penalty:o}=n.params
return c.createElement(ParamsInputField,{key:i,label:a.label,name:i,options:a.options,currentValue:{reward:s,penalty:o},updateParams:e=>{const a={...n.params,reward:e.reward,penalty:e.penalty},i={...n,params:a},s=(0,h.b1)(i)
if(void 0===s.gap_cost.values.find((e=>e.existence===a.gapopen&&e.extension===a.gapextend))){a.gapopen=s.gap_cost.defaultValue.existence
a.gapextend=s.gap_cost.defaultValue.extension}t&&t(s)
r(i)}})}case a.CULLING_LIMIT:return c.createElement(ParamsInputField,{key:i,label:getCullingLimitUIField(e.culling_limit).label,name:i,options:[],currentValue:n.params.culling_limit,updateParams:e=>{r((t=>({...t,params:{...t.params,culling_limit:e}})))}})
case a.MATRIX:{const a=getMatrixUIField(e.matrix)
return c.createElement(ParamsInputField,{key:i,label:a.label,name:i,options:a.options,currentValue:n.params[i],updateParams:e=>{if(n.operator===m.EF.TBLASTN){r((t=>({...t,params:{...t.params,matrix:e}})))
return}const a=u.EU[e].defaultValue,i={...n.params,matrix:e,gapopen:a.existence,gapextend:a.extension},s={...n,params:i},o=(0,h.b1)(s)
t&&t(o)
r(s)}})}case a.COMP_BASED_STATS:{const t=getCompBasedStatsUIField(e.comp_based_stats)
return c.createElement(ParamsInputField,{key:i,label:t.label,name:i,options:t.options,currentValue:n.params.comp_based_stats,updateParams:e=>{r((t=>({...t,params:{...t.params,comp_based_stats:e}})))}})}default:throw new Error(`Unsupported BLAST parameter: ${i}`)}}))
return c.createElement("div",null,o&&c.createElement("div",{className:(0,i.iv)(d.W2.paramsDropdownTitle)},c.createElement("div",{className:(0,i.iv)(d.W2.toggle),onClick:()=>{E(!p)}},c.createElement(g.Z,{className:(0,i.iv)(d.W2.icon),icon:p?"chevron-down":"chevron"}),o),c.createElement("div",{className:(0,i.iv)(d.W2.horizontal)})),c.createElement("div",{className:s()("u-flex-display",(0,i.iv)(d.W2.colPaddingOffset))},c.createElement(S.Z,{className:"u-flex-grow u-no-spacing-bottom"},p&&T)))}function ProgramTypeBLASTParamsSection({candidateParams:e,setCandidateParams:t,filter:n,setFilter:i}){return c.createElement(BLASTParamsSection,{candidateParams:e,setCandidateParams:t,filter:n,setFilter:i,keys:[a.TASK]})}function GeneralParametersBLASTParamsSection({candidateParams:e,filter:t,setFilter:n}){return c.createElement(BLASTParamsSection,{candidateParams:e,filter:t,setFilter:n,title:"General parameters",keys:[a.EVALUE,a.WORD_SIZE,a.STRAND,a.CULLING_LIMIT]})}function ScoringBLASTParamsSection({candidateParams:e,setCandidateParams:t,filter:n,setFilter:i}){return c.createElement(BLASTParamsSection,{candidateParams:e,setCandidateParams:t,filter:n,setFilter:i,title:"Scoring",keys:[a.MATRIX,a.GAP_COST,a.MATCH_SCORE,a.COMP_BASED_STATS]})}function ParamsInputField(e){const t=e.wide?7:6
return c.createElement(E.Z,{lg:t,md:t,sm:t,xs:t,className:(0,i.iv)(d.W2.param),key:e.name},c.createElement(I.Z,{label:e.label}),e.options.length>0&&c.createElement(ParamsDropdown,{...e}),e.name===a.EVALUE&&c.createElement(f.A,{value:e.currentValue,onChange:t=>{e.updateParams(t.target.numericValue)},required:!0,min:0,minIsInclusive:!1}),e.name===a.CULLING_LIMIT&&c.createElement(f.Z,{value:e.currentValue,onChange:t=>{e.updateParams(t.target.numericValue)},required:!0,min:0,validateInteger:!0}))}function ParamsDropdown(e){const t=e.options.find((t=>JSON.stringify(t.value)===JSON.stringify(e.currentValue)))
void 0===t&&l().captureException("BLAST parameter current option is undefined",{extra:{label:e.label,name:e.name,options:e.options,currentValue:e.currentValue}})
const n=e.options.map((t=>{var n
return c.createElement(y.Z,{onSelect:t=>{e.updateParams(t)},value:t.value,key:JSON.stringify(t)},null!==(n=t.display)&&void 0!==n?n:t.value)}))
return c.createElement(T.ZP,{displayName:(null==t?void 0:t.display)||(null==t?void 0:t.value)||"Error, please select a different option",menu:c.createElement(A.ZP,{value:e.currentValue,scrollable:!0},n)})}},268487:(e,t,n)=>{n.d(t,{Z:()=>BLASTQueryChips})
var a=n(692013),i=n(989526),r=n(555315),s=n(617886),o=n(129270),l=n(929123),c=n(453778),d=n(778223),u=n(271359),m=n(36424)
function BLASTQueryChips({filter:e,onRemoveSequence:t,title:n="Sequences",canRemoveLastSequence:o=!0}){const[u,h]=(0,i.useState)(!0),E=(0,r.pF)(e.operator)?"nucleotides":"amino acids",S=e.value.textSequences.length+e.value.apiIdentifiers.length,T=e.value.textSequences.map((n=>{const a=(0,s.H_)(n.sequence,e.operator)
let r=""
a.isNucleotideOnlyAA?r="Sequence only consists of nucleotides.\n":a.isValid||(r=`Invalid ${E} or sequence too long.\n`)
const l=n.sequence.substr(0,100)+(n.sequence.length>100?"...":"")
return i.createElement(d.ZP,{className:r?"chip--warningLighter":null,key:n.name,icon:"text",size:d.TK.MINI,text:n.name,onRemove:o||1!==S?()=>{t(n.name,"sequence")}:void 0,tooltipTitle:`${r}${l}`})})),g=e.value.apiIdentifiers.map((e=>i.createElement(c.Z,{key:e,id:e,size:d.TK.MINI,isLink:!1,onRemove:o||1!==S?()=>{t(e,"entity")}:void 0})))
return i.createElement("div",{className:(0,a.iv)(p.basicVerticalMargin)},i.createElement("div",{className:(0,a.iv)(p.toggle),onClick:()=>{h(!u)}},i.createElement(l.Z,null,i.createElement(m.Z,{className:(0,a.iv)(p.icon),icon:u?"chevron-down":"chevron"}),n," (",T.length+g.length,")")),u&&T,u&&g)}const p=a.mM.create({toggle:{cursor:"pointer",...o.cf,color:u.pp},icon:{marginRight:8},basicVerticalMargin:{marginBottom:"15px"}})},555315:(e,t,n)=>{n.d(t,{$k:()=>w,Ai:()=>F,$z:()=>getSelectBlastTypeStepTitle,ab:()=>getSelectSequencesStepTitle,pF:()=>hasNucleotideInput,H1:()=>isBLASTSearch,Ji:()=>makeSequenceLabel,Ok:()=>mergeBLASTFilter,ld:()=>runBLASTModalForSelection,f3:()=>shouldUseShortProgram,RG:()=>stripWhitespace,PH:()=>validateBLASTFilter})
var a=n(955836),i=n(459830),r=n(294120),s=n(681896),o=n(132814),l=n(392113),c=n(166459),d=n(275009),u=n(692013),m=n(989526),p=n(54503),h=n(333748),E=n(248445),S=n(400565),T=n(246125),g=n(788033),f=n(617886),I=n(62315),A=n(102176),y=n(929123),_=n(830893),C=n(453778),R=n(778223),N=n(759345),O=n(252658),b=n(97737)
const v={[a.sW.NUCLEOTIDE]:"Nucleotide",[a.sW.AA]:"Amino acid"}
function BLASTModalForSelection({initialFilter:e,residueSourceId:t,residueType:n,selectedResidues:a,displayStart:i,displayEnd:r,displayLength:s,onRequestSubmit:o,onRequestClose:l}){const[c,A]=(0,m.useState)(d.t.SelectBlastType),[y,_]=(0,m.useState)(e),C=v[n],R=[{label:"Start",value:i},{label:"End",value:r},{label:"Length",value:s}],N=function getStepModalButtons(e,t,n,a,i,r){var s,o
if(e===d.t.SelectBlastType)return[{text:"Cancel",cancel:!0,dataTestAttrs:{component:"SequenceMapBlastModal",element:"cancel"}},{text:"Next",submit:!0,onClick:()=>{t(d.t.SelectSequences)
i((e=>({...e,params:(0,S.qu)(a)})))},dataTestAttrs:{component:"SequenceMapBlastModal",element:"next"}}]
if(e===d.t.SelectSequences)return[{text:"Back",onClick:()=>{t(d.t.SelectBlastType)},dataTestAttrs:{component:"SequenceMapBlastModal",element:"back"}},{text:"Next",submit:!0,onClick:()=>{i({...a,value:{...a.value,textSequences:[{sequence:n,name:n.slice(0,5)}]}})
t(d.t.SetParameters)},dataTestAttrs:{component:"SequenceMapBlastModal",element:"next"}}]
{const e=!a.value.textSequences.length||a.value.textSequences.every((e=>!(0,f.H_)(stripWhitespace(e.sequence),a.operator).isValid))
return[{text:"Back",onClick:()=>{t(d.t.SelectSequences)},dataTestAttrs:{component:"SequenceMapBlastModal",element:"back"}},{text:"Run BLAST",submit:!0,onClick:()=>{const e={...(0,p.v)(),sorts:[{key:I.bo.SORT_BLAST_E_VALUE,reverse:!1}]}
r(mergeBLASTFilter(e,a));(0,h.Z)(new Set([h.T.Selection]))},dataTestAttrs:{component:"SequenceMapBlastModal",element:"submit"},disabled:null==(null===(s=a.params)||void 0===s?void 0:s.culling_limit)||null==(null===(o=a.params)||void 0===o?void 0:o.evalue)||e}]}}(c,A,a,y,_,o)
return m.createElement(O._,{enableRedesign:!0,title:E.WN,buttons:N,onRequestClose:l,mediumLarge:!0,expandHeight:!0,scrollable:!0},m.createElement("div",{className:(0,u.iv)(E.W2.stepNavMarginAdjustment)},m.createElement(b.ZP,{steps:[{key:d.t.SelectBlastType,title:"Select BLAST Type",metadata:getSelectBlastTypeStepTitle(c,y.operator)},{key:d.t.SelectSequences,title:"Select sequences",metadata:getSelectSequencesStepTitle(c,y)},{key:d.t.SetParameters,title:"Set parameters"}],currentStepKey:c,onUpdateCurrentStep:e=>{A(e)},statusByStep:{[d.t.SelectBlastType]:null,[d.t.SelectSequences]:c===d.t.SetParameters?null:b.cV.UNVISITED,[d.t.SetParameters]:b.cV.UNVISITED},size:b.WP.LARGE})),m.createElement(m.Fragment,null,c===d.t.SelectBlastType&&m.createElement(T.Z,{filter:y,setFilter:_,residueType:n}),c===d.t.SelectSequences&&m.createElement(SelectionPane,{sequenceType:C,selectedResidues:a,residueSourceId:t,selectionMetadata:R}),c===d.t.SetParameters&&m.createElement(g.Z,{filter:y,setFilter:_})))}function SelectionPane({sequenceType:e,selectedResidues:t,residueSourceId:n,selectionMetadata:a}){return m.createElement(m.Fragment,null,m.createElement(A.Z,null,m.createElement(y.Z,{className:(0,u.iv)(E.W2.sectionTitle)},`${e} sequence`),m.createElement("div",{className:(0,u.iv)(E.W2.sequenceInput)},m.createElement(_.Z,{value:t,disabled:!0,rows:3}))),m.createElement(A.Z,null,m.createElement("div",{className:(0,u.iv)(E.W2.metadataColumn)},m.createElement(y.Z,{className:(0,u.iv)(E.W2.sectionTitle)},"Source"),m.createElement("div",{className:(0,u.iv)(E.W2.sequenceInput)},m.createElement(C.Z,{key:n,id:n,size:R.TK.TABLE_CELL,isLink:!1}))),a.map((({label:e,value:t})=>m.createElement("div",{key:`metadata-${e}`,className:(0,u.iv)(E.W2.metadataColumn)},m.createElement(y.Z,{className:(0,u.iv)(E.W2.sectionTitle)},e),m.createElement("div",{className:(0,u.iv)(E.W2.sequenceInput)},m.createElement(N.Z,{value:t,disabled:!0,width:"7px"})))))))}var P=n(2391),L=n(539593),D=n(68526),M=n(502633)
const w=[i.SequenceSubtype.DNA_OLIGO,i.SequenceSubtype.SEQUENCE,i.SequenceSubtype.RNA_SEQUENCE,i.SequenceSubtype.RNA_OLIGO],F=[i.PROTEIN]
function hasNucleotideInput(e){return e===I.EF.BLASTN||e===I.EF.BLASTX||e===I.EF.TBLASTX}function hasNucleotideOutput(e){return e===I.EF.BLASTN||e===I.EF.TBLASTN||e===I.EF.TBLASTX}function mergeBLASTFilter(e,t){var n
const a=hasNucleotideOutput(t.operator)?w:F,i=L.xb(e.filters,I.Vm.TYPES),r=(null!==(n=null==i?void 0:i.value)&&void 0!==n?n:[]).filter((e=>a.includes(e))),s=r.length?r:a
return(0,D.WN)(e,[{key:I.Vm.TYPES,operator:I.EF.IS_ONE_OF,value:s},t])}function isBLASTSearch(e){return Boolean((0,L.xb)(e.filters,I.Vm.BLAST))}function validateBLASTFilter(e){const t=L.xb(e,I.Vm.TYPES)
return e.map((e=>{if(e.key===I.Vm.BLAST){const n=hasNucleotideOutput(e.operator)?w:F
return(null==t?void 0:t.value.every((e=>n.includes(e))))?null:"The BLAST algorithm chosen is not supported for some selected types."}return null}))}async function runBLASTModalForSelection(e){const t=e.polymer(),n=await(0,M.Z)(BLASTModalForSelection,{initialFilter:{key:I.Vm.BLAST,operator:e.residueType()===a.sW.NUCLEOTIDE?I.EF.BLASTN:I.EF.BLASTP,value:{textSequences:[],apiIdentifiers:[]}},residueSourceId:t.id,residueType:e.residueType(),selectedResidues:e.getSelectionResidues(),displayStart:o.modelStartToDisplay(e.start(),t.startIndex()),displayEnd:o.modelEndToDisplay(e.assertNotEmpty().end(),t.length(),t.startIndex()),displayLength:e.length()})
null!=n&&(0,c.getStore)().dispatch((0,l.openListing)(r.$0.SEARCH,n))}function makeSequenceLabel(e,t){const n=`${e.substr(0,5)}_`
let a=0
t.forEach((e=>{if(e.name.toLowerCase().startsWith(n.toLowerCase())){const t=e.name.split("_")
if(2!==t.length)return
const n=parseInt(t[1],10)
n&&n>a&&(a=n)}}))
return`${n}${a+1}`}function stripWhitespace(e){return e.replace(/\s/g,"")}function getSelectBlastTypeStepTitle(e,t){if(e!==d.t.SelectBlastType)return I.Md[t]}function getSelectSequencesStepTitle(e,t){if(e!==d.t.SetParameters)return
return`${t.value.textSequences.length+t.value.apiIdentifiers.length} selected`}async function shouldUseShortProgram(e,t,n){if(n===I.EF.BLASTX||n===I.EF.TBLASTN||n===I.EF.TBLASTX)return!1
for(const e of t)if(e.sequence.length>30)return!1
if(n===I.EF.BLASTN){const t=await async function sequenceLengthQuery(e){return await(0,s.doQueryWithoutCache)({query:P.h},{variables:{ids:e}})}(e)
return t.sequences.every((e=>"SequenceNode"===e.__typename&&e.length<30))}{const t=await async function proteinLengthQuery(e){return await(0,s.doQueryWithoutCache)({query:P.a},{variables:{ids:e}})}(e)
return t.proteins.every((e=>"ProteinNode"===e.__typename&&e.length<30))}}var k
!function(e){e.Addition="a"
e.Deletion="d"
e.Mismatch="m"}(k||(k={}))},966052:(e,t,n)=>{n.d(t,{Z:()=>SelectSequencesPane})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(268487),l=n(333748),c=n(555315),d=n(248445),u=n(974913),m=n(8747)
var p=n(953403)
async function extractBLASTQuerySequencesFromFiles(e,t){const n=(await Promise.all(t.map((e=>p.ws(e))))).filter((e=>e))
if((0,c.pF)(e)){const e=await async function extractSequences(e){const t=await m.s0({url:"/1/api/sequences/extract-from-files",data:{fileLocations:e}})
t.errors&&t.errors.length&&u.ZP.error(t.errors.join("\n"))
t.warnings&&t.warnings.length&&u.ZP.warn(t.warnings.join("\n"))
return t.extractedSequences.map((e=>({name:e.name,sequence:e.bases})))}(n)
return e.filter((e=>e.sequence.length>0))}{const e=await async function extractProteins(e){const t=await m.s0({url:"/1/api/proteins/extract-from-files",data:{fileLocations:e}})
t.errors&&t.errors.length&&u.ZP.error(t.errors.join("\n"))
t.warnings&&t.warnings.length&&u.ZP.warn(t.warnings.join("\n"))
return t.extractedProteins.map((e=>({name:e.name,sequence:e.aminoAcids})))}(n)
return e.filter((e=>e.sequence.length>0))}}var h=n(617886),E=n(62315),S=n(453778),T=n(778223),g=n(402763),f=n(970196),I=n(379346)
function SearchInput({additionalFilters:e,hideSelectedResults:t,onRemove:n,onSelect:a,preserveQueryOnSelect:i,schemaIds:r,schemaInterfaceIds:o,selected:l,types:c,...d}){if(0===c.length)throw new Error("At least one type must be specified.")
if((null==r?void 0:r.length)&&(null==o?void 0:o.length))throw new Error("Only one of schemaId or schemaInterfaceIds is supported.")
const u=[...null!=e?e:[]];(null==r?void 0:r.length)&&u.push({...(0,E.QW)(E.Vm.SCHEMA),value:r});(null==o?void 0:o.length)&&u.push({...(0,E.QW)(E.Vm.SCHEMA_INTERFACE),value:o})
const[m,p]=(0,s.useState)("")
return s.createElement(g.ZP,{...d,searchURL:E.RV,fetchParams:{offset:0,limit:25,sorts:[{key:E.bo.SORT_RELEVANCE_KEY,reverse:!1}],filters:[{...(0,E.QW)(E.Vm.TYPES),value:c},...u],context:E.ci.LISTING},doSearch:g.Bf,chipClass:S.Z,getChipProps:e=>({id:e.id,isLink:!1,size:T.TK.MINI}),getOptionDatasFromResponse:e=>function getOptionDatasFromResponse(e){const t={...e.entrySummariesById,...e.stageEntrySummariesById,...e.bulkAssembliesById,...e.fileSummariesById,...e.protocolSummariesById,...e.workflowSummariesById,...e.requestsById,...e.storableSummariesById,...e.analyticsDashboardsById,...e.sequenceAlignmentSummariesById,...e.proteinAlignmentSummariesById,...e.processesById,...e.processTasksById,...e.connectionsById}
return e.ids.filter((e=>Boolean(t[e]))).map((e=>{const n=t[e],a={item:n,id:n.id,name:n.name,type:I.ZP.apiIdToType(n.id)}
return{name:n.name,icon:(0,f.rP)(a),value:a}}))}(e).filter((e=>!t||!l.find((t=>t===e.value.id)))),onQueryChange:e=>{p(e.target.value)},onRemove:e=>{n(e.id)},onSelect:e=>{if(l.find((t=>t===e.id)))n(e.id)
else{i||p("")
a(e.id)}},query:m,renderOptionContent:e=>s.createElement(f.ZP,{optionData:e}),searchOnEmptyQuery:!1,value:l.map((e=>({id:e}))),isValueEqual:(e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id),scrollable:!0})}var A=n(383628),y=n(102176),_=n(929123),C=n(830893),R=n(334148),N=n(890711),O=n(575891)
const b="nucleotides",v="amino acids"
function sequenceValidationMessage(e,t){if(e.isValid)return""
if(e.isLongNucleotideOnlyAA)return`Amino acid sequences longer than ${h.f2} residues cannot consist entirely of nucleotides.`
let n,a
if((0,c.pF)(t)){n=b
a=`${(h.bj/1e3).toString()} kb`}else{n=v
a="1 million residues"}const i=`exceeds our max length of ${a}`,r=`contains invalid ${n}`
let s
s=e.isValidLength||e.hasValidResidues?e.isValidLength?r:i:`${r} and also ${i}`
return`Your query ${s}.`}function SelectSequencesPane({filter:e,setFilter:t,setInputSources:n,sequence:i,setSequence:u,fileExtractionsInProgress:m,setFileExtractionsInProgress:p}){const E=(0,c.RG)(i)
let S,T,g,f
if((0,c.pF)(e.operator)){S="Enter a nucleotide sequence."
T=b
g="Upload a sequence or trace file (.ab1, .ftv, .fasta, .gb, .geneious)."
f="DNA sequence or oligo"}else{S="Enter an amino acid sequence."
T=v
g="Upload a sequence file (.fasta, .faa)."
f="AA sequence"}const I=(0,h.H_)(E,e.operator)
return s.createElement(s.Fragment,null,s.createElement("div",null,s.createElement(y.Z,null,s.createElement(_.Z,{className:r()("u-moderate-spacing-bottom",(0,a.iv)(d.W2.sectionLabel))},S),s.createElement("div",{className:r()("u-flex-display","u-small-spacing-bottom",(0,a.iv)(d.W2.sequenceInput))},s.createElement(C.Z,{placeholder:`Type or paste in ${T}.`,value:i,onChange:e=>{const t=e.target.value
u(t)},rows:3,autoFocus:!0,className:(0,a.iv)(!I.isValid&&d.W2.errorInput)}),s.createElement(R.Co,{disabled:!E.length||!I.isValid,className:"u-mini-spacing-left",buttonStyle:R.ZJ.TERTIARY_GRAY,size:R.qE.SMALL,onClick:()=>{if(E){const a=(0,c.Ji)(E,e.value.textSequences)
t((e=>({...e,value:{...e.value,textSequences:[...e.value.textSequences,{name:a,sequence:E}]}})))
u("")
n((e=>({...e,[a]:l.T.TextInput})))}}},"Add")),!I.isValid&&s.createElement(A.ZP,{bannerType:A.ct.ERROR,text:sequenceValidationMessage(I,e.operator)}),I.isValid&&I.isNucleotideOnlyAA&&s.createElement(A.ZP,{bannerType:A.ct.WARNING,text:"This looks like a nucleotide sequence. Did you enter it by mistake?"})),s.createElement("hr",null),s.createElement(y.Z,null,s.createElement(_.Z,{className:r()("u-moderate-spacing-bottom",(0,a.iv)(d.W2.sectionLabel))},g,m>0&&s.createElement(O.Z,{classNames:(0,a.iv)(d.W2.fileSpinner)})),s.createElement(N.Z,{onSelectFiles:async(...a)=>{p((e=>e+1))
try{const i=await extractBLASTQuerySequencesFromFiles(e.operator,a),r=[...e.value.textSequences],s={}
for(const e of i){const t=(0,c.Ji)(e.sequence,r)
r.push({name:e.name||t,sequence:e.sequence})
s[t]=l.T.FileUpload}t((e=>({...e,value:{...e.value,textSequences:r}})))
n((e=>({...e,...s})))}finally{p((e=>e-1))}},multiple:!1})),s.createElement("hr",null),s.createElement(y.Z,null,s.createElement(_.Z,{className:r()("u-moderate-spacing-bottom",(0,a.iv)(d.W2.sectionLabel))},"BLAST a Benchling ",f,"."),s.createElement(SearchInput,{className:(0,a.iv)(d.W2.entitySearch),isMulti:!0,hideChips:!0,autoFocus:!1,preserveQueryOnSelect:!0,placeholder:"Search by name",selected:e.value.apiIdentifiers,onSelect:e=>{t((t=>({...t,value:{...t.value,apiIdentifiers:[...t.value.apiIdentifiers,e]}})))
n((t=>({...t,[e]:l.T.BenchlingEntity})))},onRemove:e=>{t((t=>({...t,value:{...t.value,apiIdentifiers:t.value.apiIdentifiers.filter((t=>t!==e))}})))
n((t=>{const n={...t}
delete n[e]
return n}))},types:(0,c.pF)(e.operator)?c.$k:c.Ai})),s.createElement("hr",null),s.createElement(o.Z,{filter:e,onRemoveSequence:(e,a)=>{t("sequence"===a?t=>({...t,value:{...t.value,textSequences:t.value.textSequences.filter((t=>t.name!==e))}}):t=>({...t,value:{...t.value,apiIdentifiers:t.value.apiIdentifiers.filter((t=>t!==e))}}))
n((t=>{const n={...t}
delete n[e]
return n}))}})))}},304634:(e,t,n)=>{n.d(t,{EC:()=>getCandidateBLASTNUiParams})
var a=n(855640),i=n(62315),r=n(335609)
class MatchScoreToGapCostMap extends Map{constructor(){super(...arguments)
this.store=new Map}set(e,t){this.store.set(this.getKey(e),t)
return this}has(e){return this.store.has(this.getKey(e))}get(e){return this.store.get(this.getKey(e))}getWithConfidence(e){const t=this.store.get(this.getKey(e))
if(void 0===t)throw new Error(`Match score does not exists: ${JSON.stringify(e||{})}`)
return t}getAllKeys(){return Array.from(this.store.keys()).map((e=>{const[t,n]=e.split(",")
return{reward:parseInt(t,10),penalty:parseInt(n,10)}}))}getKey(e){return`${e.reward},${e.penalty}`}}const s=(new MatchScoreToGapCostMap).set({reward:1,penalty:-2},{values:[{existence:0,extension:void 0},{existence:5,extension:2},{existence:2,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:3,extension:1},{existence:2,extension:1},{existence:1,extension:1}],defaultValue:{existence:0,extension:void 0}}).set({reward:1,penalty:-3},{values:[{existence:0,extension:void 0},{existence:5,extension:2},{existence:2,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:2,extension:1},{existence:1,extension:1}],defaultValue:{existence:0,extension:void 0}}).set({reward:1,penalty:-4},{values:[{existence:0,extension:void 0},{existence:5,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:2,extension:1},{existence:1,extension:1}],defaultValue:{existence:0,extension:void 0}}).set({reward:2,penalty:-3},{values:[{existence:0,extension:void 0},{existence:4,extension:4},{existence:2,extension:4},{existence:0,extension:4},{existence:3,extension:3},{existence:6,extension:2},{existence:5,extension:2},{existence:4,extension:2},{existence:2,extension:2}],defaultValue:{existence:0,extension:void 0}}).set({reward:4,penalty:-5},{values:[{existence:0,extension:void 0},{existence:12,extension:8},{existence:6,extension:5},{existence:5,extension:5},{existence:4,extension:5},{existence:3,extension:5}],defaultValue:{existence:0,extension:void 0}}).set({reward:1,penalty:-1},{values:[{existence:5,extension:2},{existence:3,extension:2},{existence:2,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:4,extension:1},{existence:3,extension:1},{existence:2,extension:1}],defaultValue:{existence:5,extension:2}}),o=(new MatchScoreToGapCostMap).set({reward:1,penalty:-2},{values:[{existence:5,extension:2},{existence:2,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:3,extension:1},{existence:2,extension:1},{existence:1,extension:1}],defaultValue:{existence:5,extension:2}}).set({reward:1,penalty:-3},{values:[{existence:5,extension:2},{existence:2,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:2,extension:1},{existence:1,extension:1}],defaultValue:{existence:5,extension:2}}).set({reward:1,penalty:-4},{values:[{existence:5,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:2,extension:1},{existence:1,extension:1}],defaultValue:{existence:5,extension:2}}).set({reward:2,penalty:-3},{values:[{existence:4,extension:4},{existence:2,extension:4},{existence:0,extension:4},{existence:3,extension:3},{existence:6,extension:2},{existence:5,extension:2},{existence:4,extension:2},{existence:2,extension:2}],defaultValue:{existence:5,extension:2}}).set({reward:4,penalty:-5},{values:[{existence:12,extension:8},{existence:6,extension:5},{existence:5,extension:5},{existence:4,extension:5},{existence:3,extension:5}],defaultValue:{existence:12,extension:8}}).set({reward:1,penalty:-1},{values:[{existence:5,extension:2},{existence:3,extension:2},{existence:2,extension:2},{existence:1,extension:2},{existence:0,extension:2},{existence:4,extension:1},{existence:3,extension:1},{existence:2,extension:1}],defaultValue:{existence:5,extension:2}}),l={...(0,r.Z)(a.CR,"culling_limit","strand")},c={...l,task:{defaultValue:i.Ei.MegaBLAST,values:Object.values(i.Ei)},evalue:{defaultValue:10},word_size:{values:[16,20,24,28,32,48,64,128,256],defaultValue:28},match_score:{values:s.getAllKeys(),defaultValue:{reward:1,penalty:-2}},gap_cost:s.getWithConfidence({reward:1,penalty:-2})},d={...l,task:{defaultValue:i.Ei.DCMegaBLAST,values:Object.values(i.Ei)},evalue:{defaultValue:10},word_size:{values:[11,12],defaultValue:11},match_score:{values:o.getAllKeys(),defaultValue:{reward:2,penalty:-3}},gap_cost:o.getWithConfidence({reward:2,penalty:-3})},u={...l,task:{defaultValue:i.Ei.BLASTN,values:Object.values(i.Ei)},evalue:{defaultValue:10},word_size:{values:[7,11,15],defaultValue:11},match_score:{values:o.getAllKeys(),defaultValue:{reward:2,penalty:-3}},gap_cost:o.getWithConfidence({reward:2,penalty:-3})},m={...l,task:{defaultValue:i.Ei.BLASTNShort,values:Object.values(i.Ei)},evalue:{defaultValue:1e3},word_size:{values:[7,11,15],defaultValue:7},match_score:{values:o.getAllKeys(),defaultValue:{reward:1,penalty:-3}},gap_cost:o.getWithConfidence({reward:1,penalty:-3})},getCandidateBLASTNUiParams=(e,t)=>{if(void 0===t)switch(e){case i.Ei.DCMegaBLAST:return d
case i.Ei.BLASTN:return u
case i.Ei.BLASTNShort:return m
default:return c}const n={...getCandidateBLASTNUiParams(e)}
switch(e){case i.Ei.DCMegaBLAST:case i.Ei.BLASTN:case i.Ei.BLASTNShort:{n.match_score={...n.match_score,defaultValue:{...t}}
const e=o.getWithConfidence(t)
n.gap_cost={...e}
return n}default:{n.match_score={...n.match_score,defaultValue:{...t}}
const e=s.getWithConfidence(t)
n.gap_cost={...e}
return n}}}},362329:(e,t,n)=>{n.d(t,{Bi:()=>getCandidateBLASTPUiParams})
var a=n(855640),i=n(62315)
const r={...(0,n(335609).Z)(a.CR,"matrix","evalue","culling_limit","gap_cost","comp_based_stats")},s={...r,task:{defaultValue:i.kc.BLASTP,values:Object.values(i.kc)},word_size:{values:[2,3,5,6],defaultValue:3}},o={...r,task:{defaultValue:i.kc.BLASTPShort,values:Object.values(i.kc)},word_size:{values:[2,3,5,6],defaultValue:2}},l={...r,task:{defaultValue:i.kc.BLASTPFast,values:Object.values(i.kc)},word_size:{values:[2,3,5,6],defaultValue:6}},getCandidateBLASTPUiParams=(e,t)=>{if(t){const n=getCandidateBLASTPUiParams(e)
return{...n,matrix:{...n.matrix,defaultValue:t},gap_cost:a.EU[t]}}switch(e){case i.kc.BLASTPShort:return o
case i.kc.BLASTPFast:return l
default:return s}}},537702:(e,t,n)=>{n.d(t,{Ey:()=>getCandidateBLASTXUiParams})
var a=n(855640),i=n(62315)
const r={...(0,n(335609).Z)(a.CR,"evalue","culling_limit","gap_cost","strand","matrix","comp_based_stats")},s={...r,task:{defaultValue:i.ii.BLASTX,values:Object.values(i.ii)},word_size:{values:[2,3,4,6],defaultValue:3}},o={...r,task:{defaultValue:i.ii.BLASTXFast,values:Object.values(i.ii)},word_size:{values:[2,3,4,6],defaultValue:6}},getCandidateBLASTXUiParams=(e,t)=>{if(t){const n=getCandidateBLASTXUiParams(e)
return{...n,matrix:{...n.matrix,defaultValue:t},gap_cost:a.EU[t]}}return e===i.ii.BLASTXFast?o:s}},855640:(e,t,n)=>{n.d(t,{CR:()=>r,EU:()=>i})
var a=n(62315)
const i={[a.f5.PAM30]:{values:[{existence:8,extension:1},{existence:9,extension:1},{existence:10,extension:1},{existence:14,extension:1},{existence:5,extension:2},{existence:6,extension:2},{existence:7,extension:2},{existence:14,extension:2},{existence:13,extension:3},{existence:15,extension:3}],defaultValue:{existence:9,extension:1}},[a.f5.PAM70]:{values:[{existence:9,extension:1},{existence:10,extension:1},{existence:11,extension:1},{existence:6,extension:2},{existence:7,extension:2},{existence:8,extension:2},{existence:11,extension:2},{existence:12,extension:3}],defaultValue:{existence:10,extension:1}},[a.f5.PAM250]:{values:[{existence:17,extension:1},{existence:18,extension:1},{existence:19,extension:1},{existence:20,extension:1},{existence:21,extension:1},{existence:13,extension:2},{existence:14,extension:2},{existence:15,extension:2},{existence:16,extension:2},{existence:17,extension:2},{existence:11,extension:3},{existence:12,extension:3},{existence:13,extension:3},{existence:14,extension:3},{existence:15,extension:3}],defaultValue:{existence:14,extension:2}},[a.f5.BLOSUM45]:{values:[{existence:16,extension:1},{existence:17,extension:1},{existence:18,extension:1},{existence:19,extension:1},{existence:12,extension:2},{existence:13,extension:2},{existence:14,extension:2},{existence:15,extension:2},{existence:10,extension:3},{existence:11,extension:3},{existence:12,extension:3},{existence:13,extension:3}],defaultValue:{existence:15,extension:2}},[a.f5.BLOSUM50]:{values:[{existence:15,extension:1},{existence:16,extension:1},{existence:17,extension:1},{existence:18,extension:1},{existence:19,extension:1},{existence:12,extension:2},{existence:13,extension:2},{existence:14,extension:2},{existence:15,extension:2},{existence:16,extension:2},{existence:9,extension:3},{existence:10,extension:3},{existence:11,extension:3},{existence:12,extension:3},{existence:13,extension:3}],defaultValue:{existence:13,extension:2}},[a.f5.BLOSUM62]:{values:[{existence:9,extension:1},{existence:10,extension:1},{existence:11,extension:1},{existence:12,extension:1},{existence:13,extension:1},{existence:6,extension:2},{existence:7,extension:2},{existence:8,extension:2},{existence:9,extension:2},{existence:10,extension:2},{existence:11,extension:2}],defaultValue:{existence:11,extension:1}},[a.f5.BLOSUM80]:{values:[{existence:9,extension:1},{existence:10,extension:1},{existence:11,extension:1},{existence:6,extension:2},{existence:7,extension:2},{existence:8,extension:2}],defaultValue:{existence:10,extension:1}},[a.f5.BLOSUM90]:{values:[{existence:9,extension:1},{existence:10,extension:1},{existence:11,extension:1},{existence:6,extension:2},{existence:7,extension:2},{existence:8,extension:2},{existence:9,extension:2}],defaultValue:{existence:10,extension:1}}},r={matrix:{defaultValue:a.f5.BLOSUM62,values:Object.values(a.f5)},evalue:{defaultValue:10},culling_limit:{defaultValue:0},gap_cost:i[a.f5.BLOSUM62],strand:{defaultValue:a.tR.BOTH,values:Object.values(a.tR)},comp_based_stats:{defaultValue:a.yH.ConditionalAdjustment,values:Object.values(a.yH)}}},174061:(e,t,n)=>{n.d(t,{m5:()=>getCandidateTBLASTNUiParams})
var a=n(855640),i=n(62315)
const r={...(0,n(335609).Z)(a.CR,"evalue","culling_limit","gap_cost","matrix","comp_based_stats")},s={...r,task:{defaultValue:i.I_.TBLASTN,values:Object.values(i.I_)},word_size:{values:[2,3,4,6],defaultValue:3}},o={...r,task:{defaultValue:i.I_.TBLASTNFast,values:Object.values(i.I_)},word_size:{values:[2,3,4,6],defaultValue:6}},getCandidateTBLASTNUiParams=(e,t)=>{if(t){const n=getCandidateTBLASTNUiParams(e)
return{...n,matrix:{...n.matrix,defaultValue:t},gap_cost:a.EU[t]}}return e===i.I_.TBLASTNFast?o:s}},927402:(e,t,n)=>{n.d(t,{m:()=>getCandidateTBLASTXUiParams})
var a=n(855640)
const i={...(0,n(335609).Z)(a.CR,"evalue","culling_limit","strand","matrix"),word_size:{values:[2,3],defaultValue:3}},getCandidateTBLASTXUiParams=()=>i},587159:(e,t,n)=>{n.d(t,{Fb:()=>u,ZP:()=>CapabilitiesFilterForm})
var a=n(769784),i=n(64558),r=n(989526),s=n(175703),o=n(988477),l=n(335609),c=n(567e3),d=n(562298)
const u={fragmentName:"CapabilitiesFilterFragment",fragment:a.Ps`
  fragment CapabilitiesFilterCapability on CapabilityNode {
    key
    displayName
    isEnabled
  }
`},m={name:"None",value:"NO_CAPABILITIES"}
function CapabilitiesFilterForm(e){const t=(0,l.Z)(e,...d.v),n=(0,c.Z)((0,o.Tp)(e.capabilities),[{accessor:"isEnabled",reversed:!0}]).map((e=>({name:e.displayName,value:e.key}))),a=(0,i.oA)([m,...n])
return r.createElement(s.ZP,{...t,dropdownToggleText:(0,s._T)("Application access",a,e.filter),filterStyle:e.filterStyle,isMulti:!0,isSearchable:!1,onChangeValue:t=>{e.onChangeFilter({...e.filter,value:t})},onRemove:e.onRemove,optionDatas:a,value:e.filter.value})}},365791:(e,t,n)=>{n.d(t,{Z:()=>y})
var a=n(64558),i=n(692013),r=n(989526),s=n(615439),o=n.n(s),l=n(531041),c=n(232606),d=n(567509),u=n(497790),m=n(263137),p=n(334148),h=n(539593),E=n(62315),S=n(865004),T=n(562298),g=n(844475),f=n(50234),I=n(91278)
const A=[[],null]
class FiltersContainer extends r.PureComponent{_getPrimaryFilterKeys(){return this.props.primaryFilterOptions.map((e=>e.filterKey))}_getSecondaryFilterKeys(e=this.props){return e.secondaryFilterGroups.flatMap((e=>e.filterOptions.map((e=>e.filterKey))))}_getActiveSecondaryFilters(e=this.props){return e.filters.filter((t=>this._getSecondaryFilterKeys(e).includes(t.key)))}_getHaveSecondaryFiltersChanged(){return!o()(this._getActiveSecondaryFilters(),this.state.temporarySecondaryFilters)}UNSAFE_componentWillReceiveProps(e){this.props.filters!==e.filters&&this.setState({temporarySecondaryFilters:this._getActiveSecondaryFilters(e)})}constructor(e){super(e)
this._handleChangeSecondaryFilters=e=>{this.setState({temporarySecondaryFilters:e})}
this._handleAddSecondaryFilter=()=>{this._handleChangeSecondaryFilters([...this.state.temporarySecondaryFilters,(0,E.QW)(this._getSecondaryFilterKeys()[0])])}
this._handleFinalizeSecondaryFilters=()=>{const e=this._getPrefinalizedFilters()
if(o()(this.props.filters,e))return
const t=e.map((e=>{var t
return(0,E.dN)(e)&&e.fieldType===u.FieldType.DATETIME?{...e,value:null!==(t=(0,d.OA)(e.value))&&void 0!==t?t:""}:(0,E.Rg)(e)?{...e,value:{fromDatetime:e.value.fromDatetime?(0,d.OA)(e.value.fromDatetime):null,toDatetime:e.value.toDatetime?(0,d.OA)(e.value.toDatetime):null}}:e}))
this.props.onChangeFilters(t)}
this._handleToggleSecondaryDropdown=e=>{this.setState({isSecondaryDropdownOpen:e})
e||this._handleFinalizeSecondaryFilters()}
this._handleSecondaryFilterEnter=()=>{this._handleToggleSecondaryDropdown(!1)}
e.filterErrors&&(0,c.hu)(e.filters.length===e.filterErrors.length,"Expected filters and filterErrors to have the same length");(0,c.hu)(0===l.default.intersection(this._getPrimaryFilterKeys(),this._getSecondaryFilterKeys()).length,"primaryFilterKeys and secondaryFilterKeys cannot intersect");(0,c.hu)(l.default.uniq(this._getPrimaryFilterKeys()).length===this._getPrimaryFilterKeys().length,"Each element of primaryFilterKeys must be unique")
this.state={temporarySecondaryFilters:this._getActiveSecondaryFilters(),isSecondaryDropdownOpen:!1}}filterSkeletonProps(e,t){return{buttonSize:p.qE.SMALL,dropdownToggleText:E.Oq[e.key].name,filter:e,filterStyle:t,isActive:!(n=e.value,A.some((e=>o()(e,n)))),operators:E.pb[e.key],selectedOperator:e.operator,filters:this.props.filters,onChangeFilters:this.props.onChangeFilters,isDisabled:this.props.disabled}
var n}primaryFilterKeyToComponent(e,t){const n=e.filterKey,a=this.props.filters.findIndex((e=>e.key===n)),i=this.props.filters[a]||(0,E.QW)(n),s=t[a],o=(0,S.S)(i.key)
if(!o)throw new Error(`Unexpected filter key ${i.key}`)
return r.createElement(o,{...this.filterSkeletonProps(i,T.r.PRIMARY),...e.extraProps,invalidMessage:s,onChangeFilter:e=>{this.props.onChangeFilters(h.sg(this.props.filters,e))},prefinalizedFilters:this._getPrefinalizedFilters()})}secondaryFilterToComponent(e,t,n){const a=(0,S.S)(e.key)
if(!a)throw new Error(`Unexpected filter key ${e.key}`)
const i=this.props.secondaryFilterGroups.flatMap((e=>e.filterOptions)).find((({filterKey:t})=>t===e.key))
if(!i)throw new Error(`Unexpected filter key ${e.key}`)
const s=this.props.filterAvailableKeys(this._getSecondaryFilterKeys()),o={filterGroups:l.default.compact(this.props.secondaryFilterGroups.map((e=>e.filterOptions.every((({filterKey:e})=>!s.includes(e)))?null:{...e,filterOptions:e.filterOptions.filter((({filterKey:e})=>s.includes(e)))}))),onChangeFilterKey:e=>{this._handleUpdateSecondaryFilter((0,E.QW)(e),n)},selectedFilterKey:e.key,onRemove:()=>{this._handleChangeSecondaryFilters([...this.state.temporarySecondaryFilters.slice(0,n),...this.state.temporarySecondaryFilters.slice(n+1)])}},c={...this.filterSkeletonProps(e,T.r.SECONDARY),...o}
return r.createElement(a,{...c,...i.extraProps,invalidMessage:t,onChangeFilter:e=>{this._handleUpdateSecondaryFilter(e,n)},onEnter:this._handleSecondaryFilterEnter,prefinalizedFilters:this._getPrefinalizedFilters()})}_handleUpdateSecondaryFilter(e,t){const n=this.state.temporarySecondaryFilters.slice()
n[t]={...n[t],...e}
this._handleChangeSecondaryFilters(n)}_getPrefinalizedFilters(){const e=this._getActiveSecondaryFilters()
return[...this.props.filters.filter((t=>!e.includes(t))),...this.state.temporarySecondaryFilters]}_getPrefinalizedSecondaryFilterErrors(){let e=this._getPrefinalizedFilters(),t=[]
if(this._getHaveSecondaryFiltersChanged()){const n=(0,I.lJ)(e,this.props.selectedSchema)
e=n.filters
t=n.typeErrors}const n=(0,I.Ye)(e,this.props.selectedSchema)
return this.state.temporarySecondaryFilters.length>0?(0,I.Cl)(t,n).slice(-this.state.temporarySecondaryFilters.length):[]}render(){var e,t,n
const s=this.props.filterErrors||(0,I.yO)(this.props.filters),o=this._getPrefinalizedSecondaryFilterErrors(),l=this.state.temporarySecondaryFilters.map(((e,t)=>this.secondaryFilterToComponent(e,o[t],t))),c=o.some((e=>null!=e))
return r.createElement("div",{className:(0,i.iv)(_.wrapper)},this.props.primaryFilterOptions.map((e=>r.createElement("div",{className:(0,i.iv)(_.form),key:e.filterKey,...(0,m.Z)({component:"FiltersContainer",element:"filterOption",key:e.filterKey})},this.primaryFilterKeyToComponent(e,s)))),this._getSecondaryFilterKeys().length>0&&r.createElement("div",{className:(0,i.iv)(_.form)},r.createElement(g.Z,{buttonSize:p.qE.SMALL,secondaryFilterNodes:l,hasFilterErrors:c,onAddFilter:this._handleAddSecondaryFilter,isOpen:this.state.isSecondaryDropdownOpen,onToggle:this._handleToggleSecondaryDropdown,disabled:this.props.disabled})),(null===(e=this.props.availableGroupByFields)||void 0===e?void 0:e.length)?r.createElement("div",{className:(0,i.iv)(_.form)},r.createElement(f.Z,{options:this.props.availableGroupByFields,value:null!==(t=this.props.selectedGroupByField)&&void 0!==t?t:E.Y_.NONE,onChange:null!==(n=this.props.onChangeGroupByField)&&void 0!==n?n:a.ZT,disabled:this.props.disabled})):null,this.props.sortDropdown?r.createElement("div",{className:(0,i.iv)(_.form)},this.props.sortDropdown):null,this.props.saveSearchButton?r.createElement("div",{className:(0,i.iv)(_.form)},this.props.saveSearchButton):null,this.props.clearButton&&r.createElement("div",{className:(0,i.iv)(_.clearButton)},this.props.clearButton))}}FiltersContainer.defaultProps={filterAvailableKeys:e=>e}
const y=FiltersContainer,_=i.mM.create({wrapper:{display:"flex",flexWrap:"wrap"},form:{marginRight:6,marginBottom:6},linkContainer:{alignItems:"center",display:"flex",marginLeft:12},clearButton:{marginBottom:6,marginLeft:12,display:"flex",alignItems:"center"}})},25374:(e,t,n)=>{n.d(t,{$m:()=>u,$p:()=>m,Px:()=>d,ZP:()=>OrganizationFilterForm})
var a=n(769784),i=n(64558),r=n(989526),s=n(531041),o=n(175703),l=n(335609),c=n(562298)
const d=a.Ps`
  fragment OrganizationFilterOrganization on OrganizationNode {
    id
    name
  }
`,u={fragmentName:"OrganizationFilterFormOrganization",fragment:d},m={name:"No organizations",value:"none"},p={name:"Any organization",value:null}
function getActiveFilterText(e,t){if(null==t.value)return"Organization"
let n=(0,o.nf)(e,t)
t.value===m.value&&(n="None")
return`Organization: ${n}`}function OrganizationFilterForm(e){const t=(0,l.Z)(e,...c.v),n=e.organizations.map((e=>({name:e.name,value:e.id,icon:"organization"}))),a=(0,i.oA)([p,e.shouldIncludeNone?m:void 0,...s.default.sortBy(n,(e=>e.name.toLowerCase()))])
return r.createElement(o.ZP,{...t,dropdownToggleText:getActiveFilterText(a,e.filter),filterStyle:e.filterStyle,isMulti:!1,isSearchable:!0,onChangeValue:t=>{e.onChangeFilter({...e.filter,value:t})},onRemove:e.onRemove,optionDatas:a,value:e.filter.value})}},738648:(e,t,n)=>{n.d(t,{TD:()=>getRequestTaskSchemasForRequestSchema,ZP:()=>E})
var a=n(64558),i=n(989526),r=n(382857),s=n(634489),o=n(377249),l=n(16756),c=n(500147),d=n(590441),u=n(335609),m=n(175703),p=n(562298),h=n(188052)
function getRequestTaskSchemasForRequestSchema(e,t){return t&&t.id!==c.CB?e.filter((e=>t.requestTaskSchemaIds.includes(e.id))):e}class AllRequestTaskSchemasDataConnector extends s.C{enhanceProps(){return{allTaskSchemas:this.getOrFetchRequired(o.V.ALL_REQUEST_TASK_SCHEMAS,l.E)}}renderLoading(){return i.createElement(RequestTaskSchemaFilterForm,{...this.props,allTaskSchemas:[],isLoading:!0,isDisabled:!0})}}function RequestTaskSchemaFilterForm(e){const{allTaskSchemas:t,selectedAssaySchema:n,filter:s,filterStyle:o,onChangeFilter:l,onRemove:c}=e,E=function _buildOptionDatas(e,t){return[{name:"Any",value:d.Nu,isArchived:!1},...(0,a.UY)(e.map((e=>({name:e.name,value:e.id,hidden:!t.includes(e),isArchived:(0,r.ZP)(e)}))),"name")]}(t,getRequestTaskSchemasForRequestSchema(t,n)),S=(0,h.Z)(E,"Show archived tasks",(e=>{l({...s,value:e})})),T=(0,u.Z)(e,...p.v)
return i.createElement(m.ZP,{...T,...S,dropdownToggleText:(0,m._T)("Task",E,s),filterStyle:o,isMulti:!1,isSearchable:!0,onRemove:c,value:s.value})}const E=AllRequestTaskSchemasDataConnector.connect(RequestTaskSchemaFilterForm)},679471:(e,t,n)=>{n.d(t,{$p:()=>m,Qp:()=>u,ZP:()=>TeamFilterForm,cp:()=>d})
var a=n(769784),i=n(64558),r=n(989526),s=n(531041),o=n(175703),l=n(335609),c=n(562298)
const d=a.Ps`
  fragment TeamFilterTeam on TeamNode {
    id
    name
  }
`,u={fragmentName:"TeamFilterTeamFragment",fragment:d},m={name:"No teams",value:"none"},p={name:"Any team",value:null}
function getActiveFilterText(e,t){if(null==t.value)return"Team"
let n=(0,o.nf)(e,t)
t.value===m.value&&(n="None")
return`Team: ${n}`}function TeamFilterForm(e){const t=(0,l.Z)(e,...c.v),n=e.teams.map((e=>({name:e.name,value:e.id,icon:"team"}))),a=(0,i.oA)([p,e.shouldIncludeNone?m:void 0,...s.default.sortBy(n,(e=>e.name.toLowerCase()))])
return r.createElement(o.ZP,{...t,dropdownToggleText:getActiveFilterText(a,e.filter),filterStyle:e.filterStyle,isDisabled:0===n.length,isMulti:!1,isSearchable:!0,onChangeValue:t=>{e.onChangeFilter({...e.filter,value:t})},onRemove:e.onRemove,optionDatas:a,value:e.filter.value})}},205315:(e,t,n)=>{n.d(t,{Z:()=>validateContainerConcentrationFilters})
var a=n(62315)
function validateContainerConcentrationFilters(e){return e.map((e=>{if((0,a.ob)(e)){const{value:t,units:n}=e.value
if(null==t&&null==n)return null
if(null==t)return"Concentration value must be specified."
if(null==n)return"Concentration units must be specified."}return null}))}},398179:(e,t,n)=>{n.d(t,{Z:()=>validateContainerQuantityFilters})
var a=n(487761),i=n(62315)
function validateContainerQuantityFilters(e){return e.map((e=>{if((0,i.mP)(e)){const{value:t,units:n}=e.value
if(null==t&&null==n)return null
if(null==t)return`${(0,a.Z)()} value must be specified.`
if(null==n)return`${(0,a.Z)()} units must be specified.`}return null}))}},128695:(e,t,n)=>{n.d(t,{Z:()=>validateFieldFilters})
var a=n(62315)
function validateFieldFilters(e,t){return e.map((e=>{if((0,a.dN)(e)){if(!t)return"Please select a schema from the Type filter."
if(e.fieldId&&!t.allFields.map((({apiId:e})=>e)).includes(e.fieldId))return"Please select a field present on the currently-selected schema."}return null}))}},947727:(e,t,n)=>{n.d(t,{ZP:()=>validateNumericFilters})
var a=n(64558),i=n(62315)
const r=[i.Vm.GRID_EMPTY_CONTAINERS,i.Vm.GRID_EMPTY_POSITIONS]
function validateNumericFilters(e){return e.map((e=>r.includes(e.key)&&e.value&&null==(0,a.Lk)(e.value)?"Value must be an integer.":null))}},19175:(e,t,n)=>{n.d(t,{Z:()=>validateRequestFilters})
var a=n(590441),i=n(217042),r=n(62315)
function validateRequestFilters(e,t){return e.map((e=>{if(e.key===r.Vm.REQUEST_TASK_SCHEMA){const n=e.value
if(t&&(0,i.iA)(t)&&n&&n!==a.Nu&&!t.requestTaskSchemaIds.includes(n))return"The task is not supported with the selected type."}return null}))}},971815:(e,t,n)=>{n.d(t,{F:()=>availableGroupKeysForFilters,i:()=>narrowTypesForGroupKey})
var a=n(531041),i=n(232606),r=n(459830),s=n(539593),o=n(62315)
const l={[r.CONTAINER]:[o.Y_.CONTAINER_CONTENTS],[r.PLATE]:[o.Y_.CONTAINER_CONTENTS],[r.BOX]:[o.Y_.CONTAINER_CONTENTS],[r.LOCATION]:[o.Y_.CONTAINER_CONTENTS]}
function narrowTypesForGroupKey(e,t){(0,i.hu)(e.key===o.Vm.TYPES,`narrowTypesForGroupKey expects a TYPES filter, received ${e.key}`)
if(!t||t===o.Y_.BLAST_QUERY)return e
const n=e.value.filter((e=>{var n
return null===(n=l[e])||void 0===n?void 0:n.includes(t)}));(0,i.hu)(n.length>0,`Expected to have at least one selected type remaining for group key ${t}, but none were. This likely means the Group By dropdown is showing a key that is invalid for the selected item type.`)
return{...e,value:n}}function availableGroupKeysForFilters(e){const t=s.xb(e,o.Vm.TYPES),n=s.xb(e,o.Vm.BLAST);(0,i.hu)(Boolean(t),"availableGroupKeysForFilters expects a TYPES filter, but none was present")
const r=a.default.unique(t.value.flatMap((e=>{var t
return null!==(t=l[e])&&void 0!==t?t:[]})))
n&&n.value.apiIdentifiers.length+n.value.textSequences.length>1&&r.push(o.Y_.BLAST_QUERY)
return r}},171002:(e,t,n)=>{n.d(t,{Z:()=>SavedSearchSharingPane})
var a=n(692013),i=n(989526),r=n(531041),s=n(232606),o=n(56063),l=n(468991),c=n(751512),d=n(697134),u=n(443626),m=n(31379),p=n(129270),h=n(309718),E=n(396669),S=n(868710),T=n(334148),g=n(271359),f=n(36424),I=n(198210)
function OwnerCollaboratorRow(e){const t=e.owner.type===o.El.ORGANIZATION&&e.memberPermissionLevel
return i.createElement("div",{className:(0,a.iv)(A.collaborator,!t&&A.soloOwner,!e.noBorder&&A.border)},i.createElement(Collaborator,{key:e.owner.id,collaborator:e.owner,permissionLevel:"OWNER",onChangePermissionLevel:null,permissions:e.permissions,onRemove:null,warning:!1}),t&&i.createElement(Collaborator,{key:`${e.owner.id}_members`,collaborator:e.owner,permissionLevel:e.memberPermissionLevel,onChangePermissionLevel:t=>{e.onChangeOwnerInfo({...e.ownerInfo,memberDataPolicyId:e.permissionLevelToDataPolicyId[t]})},permissions:e.permissions,onRemove:()=>{e.onChangeOwnerInfo({...e.ownerInfo,memberDataPolicyId:null})},warning:e.memberWarning,isMemberRow:!0}))}function CollaboratorRow(e){return i.createElement("div",{className:(0,a.iv)(A.collaborator,!e.noBorder&&A.border)},i.createElement(Collaborator,{key:e.collaborator.id,collaborator:e.collaborator,permissionLevel:e.permissionLevel,onChangePermissionLevel:t=>{e.onChangeCollaborators(e.collaborators.map((n=>n.id===e.collaborator.id?(0,m.CS)(n,{dataPolicyId:e.permissionLevelToDataPolicyId[t]}):n)))},permissions:e.permissions,onRemove:()=>{e.onChangeCollaborators(e.collaborators.filter((t=>t.id!==e.collaborator.id)))},warning:e.memberWarning}),!(0,o.Ne)(e.collaborator)&&i.createElement(Collaborator,{key:`${e.collaborator.id}_admin`,collaborator:e.collaborator,permissionLevel:e.adminPermissionLevel,onChangePermissionLevel:t=>{e.onChangeCollaborators(e.collaborators.map((n=>n.id===e.collaborator.id?(0,m.CS)(n,{adminDataPolicyId:e.permissionLevelToDataPolicyId[t]}):n)))},permissions:e.permissions,onRemove:()=>{e.onChangeCollaborators(e.collaborators.filter((t=>t.id!==e.collaborator.id)))},warning:e.adminWarning,isAdminRow:!0}))}function Collaborator({collaborator:e,permissionLevel:t,onChangePermissionLevel:n,permissions:r,onRemove:s,warning:o,isMemberRow:c,isAdminRow:d}){const p={[m.tk.VIEW]:r.canAddRemoveViewers,[m.tk.EDIT]:r.canAddRemoveEditors,[m.tk.ADMIN]:r.canAddRemoveAdmins,OWNER:!1}[t]
return i.createElement(i.Fragment,null,i.createElement("div",{className:(0,a.iv)(A.avatarAndWarning)},c||d?i.createElement("div",{className:(0,a.iv)(A.wrapper)},i.createElement(f.Z,{className:(0,a.iv)(A.subItem),icon:"sub-item"}),i.createElement("span",{className:(0,a.iv)(A.name)},function getCustomName(e,t,n){const a=(0,u.a)(n)
return e?`Members of ${a}`:t?`Admins of ${a}`:""}(c,d,e))):i.createElement(E.X,{avatarInfo:e,size:h.D.SMALL,shape:(0,l.NU)(e)?h.o.CIRCLE:h.o.SQUARE,showTooltip:!1,wrapName:!0}),o&&i.createElement(S.ZP,{title:(0,l.NU)(e)?"This user doesnt have permission to view a schema used in this search. They will be not be able to run it":"This group does not have permission to view a schema used in this search. Some users may be unable to run it.",placement:S.TQ.BOTTOM},i.createElement(f.Z,{className:(0,a.iv)(A.icon),icon:"warning"}))),"OWNER"===t?i.createElement("div",null,"Owner"):i.createElement(I.Z,{options:[{id:m.tk.VIEW,buttonProps:{text:"View",disabled:!(p&&r.canAddRemoveViewers)}},{id:m.tk.EDIT,buttonProps:{text:"Edit",disabled:!(p&&r.canAddRemoveEditors)}},{id:m.tk.ADMIN,buttonProps:{text:"Admin",disabled:!(p&&r.canAddRemoveAdmins)}}],selection:t,disabled:null==n,onChangeSelection:n,size:T.qE.MEDIUM}),d?i.createElement("div",null):i.createElement(T.Co,{className:(0,a.iv)(A.trashcan),buttonStyle:T.ZJ.CIRCLE_ICON,icon:"format-delete",size:T.qE.MEDIUM,disabled:null==s||!p,onClick:s}))}const A=a.mM.create({collaborator:{display:"grid",gap:"0.2em 1em",alignItems:"center",gridTemplateColumns:"1fr auto auto"},border:{borderBottom:`1px solid ${g.pF}`,paddingBottom:"0.5em"},soloOwner:{gridTemplateColumns:"1fr 0.95fr auto"},avatarAndWarning:{display:"flex",alignItems:"center"},trashcan:{marginLeft:"-10px"},icon:{flexShrink:0,fontSize:"16px",color:g.ud,marginLeft:"-8px"},name:{color:g.Rl,fontFamily:p.I3,fontSize:13,lineHeight:"20px",fontStyle:"italic",overflowWrap:"anywhere"},wrapper:{alignItems:"center",display:"flex",marginRight:14},subItem:{fontSize:"16px",rotate:"180deg",marginRight:"5px",marginLeft:"14px",paddingTop:"2px",color:g.pp}})
var y=n(15845),_=n(281100),C=n(383628),R=n(319675),N=n(220798)
function SavedSearchSharingPane({savedSearchId:e,collaborators:t,onChangeCollaborators:n,permissions:l,permissionLevelToDataPolicyId:u,owner:p,ownerInfo:h,onChangeOwnerInfo:E,autoFocus:S}){const[T,g]=(0,i.useState)(!1),f=(0,i.useMemo)((()=>new Set(t.map((e=>e.id)))),[t]),I=function useCollaboratorWarnings(e,t){const n=(0,c.IJ)(y.td,{variables:{id:e,collaboratorIds:t},renderCachedDataWhenRefetching:!0,fetchPolicy:"cache-and-network"})
let a=[]
if(n.type===c.NI.SUCCESS){let e
e=n.loading&&n.previousData?n.previousData.savedSearch:n.data.savedSearch
if(e&&(0,d.CZ)(e))throw new Error("Saved Search is inaccessible")
e&&"SavedSearchNode"===e.__typename&&null!=e.unauthorizedCollaborators&&(a=e.unauthorizedCollaborators)}return a}(e,p.type===o.El.ORGANIZATION&&h.memberDataPolicyId?Array.from(f).concat(p.id):Array.from(f)),A=(0,i.useMemo)((()=>(0,r.invert)(u)),[u]),_=T?t:t.slice(0,2)
if(p.type===o.El.ORGANIZATION){const e=h.memberDataPolicyId
if(e){const t=A[e];(0,s.hu)(null!=t,"Saved search owner info (org) has invalid data policy ID",{dataPolicyId:e,permissionLevelToDataPolicyId:u})}}return i.createElement(i.Fragment,null,i.createElement("h3",{className:(0,a.iv)(b.heading)},"Sharing"),i.createElement("p",null,"Users with access can share their access with others."),i.createElement(R.$,{placeholder:"Add people, teams, and orgs...",filterOptions:(e,t)=>t.filter((e=>!f.has(e.id)&&(e.id!==p.id||p.type===o.El.ORGANIZATION&&null==h.memberDataPolicyId))),onSubmit:({entity:e})=>{if(null==e)return
const a=u[m.tk.VIEW]
if(e.id===p.id){(0,s.hu)(p.type===o.El.ORGANIZATION,"Owner should not be able to be added, unless it is an organization")
E({...h,memberDataPolicyId:a})}else{const i=[(0,m.CS)(e,{dataPolicyId:a,adminDataPolicyId:a}),...t]
n(i)}},size:N.I.SMALL,autoFocus:S,enableNewEntityInput:!0}),i.createElement("h5",{style:{fontSize:"1.2em"},className:(0,a.iv)(b.heading)},"Shared with"),i.createElement("div",{className:(0,a.iv)(b.collaborators)},i.createElement(OwnerCollaboratorRow,{owner:p,ownerInfo:h,permissions:l,permissionLevelToDataPolicyId:u,onChangeOwnerInfo:E,memberPermissionLevel:h.memberDataPolicyId?A[h.memberDataPolicyId]:null,memberWarning:displayWarning(I,p.id,1),noBorder:0===_.length}),_.map(((e,a)=>{const r=(0,o.x7)(e)?e.dataPolicyId:e.memberDataPolicyId;(0,s.hu)(null!=r,"Saved search collaborator is missing data policy ID",{collaborator:e})
const c=A[r];(0,s.hu)(null!=c,"Saved search collaborator has invalid data policy ID",{dataPolicyId:r,permissionLevelToDataPolicyId:u})
const d=(0,o.Yb)(e)?e.adminDataPolicyId:r;(0,s.hu)(null!=d,"Saved search collaborator is missing data policy ID",{collaborator:e})
const m=A[d];(0,s.hu)(null!=m,"Saved search collaborator has invalid data policy ID",{dataPolicyId:r,permissionLevelToDataPolicyId:u})
return i.createElement(CollaboratorRow,{key:e.id,collaborator:e,permissionLevel:c,onChangeCollaborators:n,collaborators:t,permissionLevelToDataPolicyId:u,permissions:l,memberWarning:displayWarning(I,e.id,(0,o.Ne)(e)?null:1),adminWarning:displayWarning(I,e.id,0),adminPermissionLevel:m,noBorder:a===_.length-1&&(T||t.length<=2)})}))),!T&&t.length>2&&i.createElement(AdditionalCollaboratorsRow,{additionalCollaborators:t.slice(2),setShowAllUsers:g}),I.length>0&&i.createElement("div",{className:(0,a.iv)(b.warningBanner)},i.createElement(C.ZP,{bannerType:C.ct.WARNING,text:"Some collaborators may be unable to run this search."})))}function AdditionalCollaboratorsRow(e){const t=`+${e.additionalCollaborators.length} others`,n=e.additionalCollaborators.slice(0,5)
return i.createElement("div",{className:(0,a.iv)(O.wholeRow)},i.createElement("div",null,n.map((e=>i.createElement(_.Z,{key:e.id,className:(0,a.iv)(O.avatar),entity:e,size:h.D.SMALL,shape:(0,l.NU)(e)?h.o.CIRCLE:h.o.SQUARE,showTooltip:!1})))),i.createElement("div",{className:(0,a.iv)(O.numberOfAdditionalCollaborators)},t),i.createElement("div",{onClick:()=>{e.setShowAllUsers(!0)},className:(0,a.iv)(O.show)},"show"))}function displayWarning(e,t,n){(0,s.hu)(null==n||0===n||1===n,"Role in group permissions can only be null, 0, 1")
for(const a of e)if(a.apiId===t&&a.role===n)return!0
return!1}const O=a.mM.create({wholeRow:{display:"flex",alignItems:"center",marginTop:"10px"},avatar:{marginRight:"-0.6em"},numberOfAdditionalCollaborators:{marginLeft:"1em",...p.hv},show:{marginLeft:4,...p.hv,color:g.Ej,cursor:"pointer"}}),b=a.mM.create({heading:{margin:"1.75rem 0 0.5rem"},collaborators:{display:"grid",gridTemplateRows:"auto",alignItems:"center",gap:"0.5em",marginTop:"1em",maxHeight:"242px",overflow:"auto"},warningBanner:{marginTop:"1.5em"}})},31379:(e,t,n)=>{n.d(t,{CS:()=>setDataPolicyId,qz:()=>getOwnerInfo,tk:()=>a})
var a,i=n(232606),r=n(106664),s=n(459830),o=n(468991),l=n(319977)
!function(e){e.VIEW="VIEW"
e.EDIT="EDIT"
e.ADMIN="ADMIN"}(a||(a={}))
function setDataPolicyId(e,t){if((0,o.NU)(e))return{...e,dataPolicyId:t.dataPolicyId}
if((0,l.HU)(e.id)||(0,o.OS)(e))return{...e,...t.dataPolicyId&&{memberDataPolicyId:t.dataPolicyId},...t.adminDataPolicyId&&{adminDataPolicyId:t.adminDataPolicyId}};(0,i.hu)(!1,"Cannot set data policy ID on unsupported entity",{entity:e})}function getOwnerInfo(e,t){return{type:e.type,memberDataPolicyId:e.type===s.ORGANIZATION?getMemberDataPolicyId(e,t):null}}function getMemberDataPolicyId(e,t){const n=t.find((t=>t.id===e.id))
return n?(0,r.ME)(n):null}},464144:(e,t,n)=>{n.d(t,{E0:()=>triggerSearchFromInternalLink,Im:()=>A,QR:()=>convertFromGraphqlSavedSearchParams,_g:()=>getMetadataText,br:()=>y,uE:()=>_,wQ:()=>savedSearchParamsAreEqual})
var a=n(536105),i=n.n(a),r=n(615439),s=n.n(r),o=n(468943),l=n(211495),c=n(294120),d=n(256605),u=n(749334),m=n(872543),p=n(392113),h=n(166459),E=n(699489),S=n(373058),T=n(387622),g=n(62315),f=n(10584),I=n(567e3)
function convertFromGraphqlSavedSearchParams(e){const t=function convertSavedFiltersToCurrentFormat(e){return e.map((e=>{if((0,g.Rg)(e)&&(e.value.hasOwnProperty("fromDate")||e.value.hasOwnProperty("toDate"))){const t=e.value.toDate,n=null!=t?i()(t).add(1,"days").format(f.n$):null
e={...e,value:{fromDatetime:e.value.fromDate,toDatetime:n}}}return e}))}(e.filtersJson.filter((e=>!g._5.has(e.key))))
let n=[]
e.sorts&&e.sorts.length>=1&&(n=e.sorts.map((({reverse:e,key:t})=>({reverse:e,key:t}))))
const a=e.groupField?{childLimit:0,childOffset:0,groupField:e.groupField}:null
return{sorts:n,filters:t,query:e.query,groupBy:a}}function savedSearchParamsAreEqual(e,t){const n=(0,I.Z)(e.filters,[e=>(0,u.ug)([e])]),a=(0,I.Z)(t.filters,[e=>(0,u.ug)([e])])
return s()(e.sorts,t.sorts)&&e.query===t.query&&s()(n,a)&&s()(e.groupBy,t.groupBy)}function getMetadataText(e,t,n,a,i,r){if(a)return r?"You can not select this search. You can only select searches that are owned by the owner of the template.":"You lack permissions to run this search. Ask your administrator for help"
const s=(0,f.UT)(n,{showTime:!1})
return e?i?`Updated ${s} by ${t}\n${e}`:`Updated ${s} by ${t} | ${e}`:`Updated ${s} by ${t}`}function triggerSearchFromInternalLink(e){const t=convertFromGraphqlSavedSearchParams(e.searchParams)
e.section===d.yd.PROJECT_ITEMS?(0,E.I)(t):e.section===d.yd.REGISTRIES?(0,S.z)(t):e.section===d.yd.STORAGE?(0,T.I)(t):(0,h.getStore)().dispatch((0,p.openListing)(A[e.section],{offset:0,limit:(0,m.z3)(),...t}))
o.L9(l.P6.OPENED_SAVED_SEARCH,{section:e.section,api_id:e.id,entry_id:e.fileId})}const A={[d.yd.ANALYTICS]:c.$0.ANALYTICS,[d.yd.GLOBAL]:c.$0.SEARCH,[d.yd.CONNECTIONS]:c.$0.CONNECTIONS,[d.yd.JELLYFISH]:c.$0.JELLYFISH,[d.yd.PROCESSES]:c.$0.PROCESSES,[d.yd.PROJECT_ITEMS]:c.$0.PROJECT_ITEMS,[d.yd.REGISTRIES]:c.$0.REGISTRIES,[d.yd.REQUESTS]:c.$0.REQUESTS,[d.yd.STORAGE]:c.$0.STORAGE,[d.yd.STUDIES]:c.$0.STUDIES},y={[c.$0.ANALYTICS]:d.yd.ANALYTICS,[c.$0.SEARCH]:d.yd.GLOBAL,[c.$0.CONNECTIONS]:d.yd.CONNECTIONS,[c.$0.JELLYFISH]:d.yd.JELLYFISH,[c.$0.PROCESSES]:d.yd.PROCESSES,[c.$0.PROJECT_ITEMS]:d.yd.PROJECT_ITEMS,[c.$0.REGISTRIES]:d.yd.REGISTRIES,[c.$0.REQUESTS]:d.yd.REQUESTS,[c.$0.STORAGE]:d.yd.STORAGE,[c.$0.STUDIES]:d.yd.STUDIES},_={[d.yd.ANALYTICS]:g.Sc.ANALYSES_AND_ANALYTICS_DASHBOARDS,[d.yd.GLOBAL]:g.Sc.GLOBAL,[d.yd.CONNECTIONS]:g.Sc.CONNECTIONS,[d.yd.JELLYFISH]:g.Sc.JELLYFISH,[d.yd.PROCESSES]:g.Sc.PROCESS_MANAGEMENT,[d.yd.PROJECT_ITEMS]:g.Sc.FOLDERS_AND_ITEMS,[d.yd.REGISTRIES]:g.Sc.BIOENTITIES_AND_BATCHES,[d.yd.REQUESTS]:g.Sc.REQUEST,[d.yd.STORAGE]:g.Sc.STORABLE,[d.yd.STUDIES]:g.Sc.STUDIES}},15845:(e,t,n)=>{n.d(t,{AU:()=>o,j:()=>refetchSavedSearchSettings,td:()=>c,u2:()=>l,uy:()=>refetchSavedSearchesForSection})
var a=n(769784),i=n(681896),r=n(91092),s=n(143759)
const o=a.Ps`
  query OldSavedSearchesQuery($section: SearchSection!) @skipAudit @engComponent(name: SIGHTGLASS) {
    savedSearchesForSection(section: $section) {
      ...SavedSearchGraphQL
    }
  }
  ${(0,r.f)("SavedSearch").fragment}
`,l=a.Ps`
  query SavedSearchesQuery @skipAudit @engComponent(name: SIGHTGLASS) {
    savedSearches {
      ...SavedSearchGraphQL
    }
  }
  ${(0,r.f)("SavedSearch").fragment}
`,c=a.Ps`
  query SavedSearchSharingWarningsQuery($id: StrictString!, $collaboratorIds: [StrictString!]!)
  @skipAudit
  @engComponent(name: SIGHTGLASS) {
    savedSearch(id: $id) {
      ... on SavedSearchNode {
        id
        unauthorizedCollaborators(collaboratorIds: $collaboratorIds) {
          apiId
          role
        }
      }
    }
  }
`
a.Ps`
  query RecentSavedSearchesQuery @skipAudit @engComponent(name: SIGHTGLASS) {
    recentSavedSearches {
      ...SavedSearchGraphQL
    }
  }
  ${(0,r.f)("SavedSearch").fragment}
`
async function refetchSavedSearchesForSection(e){await(0,i.doQuerySafe)({query:o},{variables:{section:e},fetchPolicy:"network-only"})}async function refetchSavedSearchSettings(e){await(0,i.doQuerySafe)({query:s.Uw},{variables:{savedSearchId:e},fetchPolicy:"network-only"})}},567739:(e,t,n)=>{n.d(t,{NA:()=>P,ZP:()=>M})
var a=n(769784),i=n(692013),r=n(602652),s=n.n(r),o=n(989526),l=n(620080),c=n(402360),d=n(232606),u=n(348920),m=n(675649),p=n(459830),h=n(751512),E=n(91092),S=n(965131),T=n(697134),g=n(138966),f=n(216101),I=n(727493),A=n(721641),y=n(838549),_=n(610977),C=n(815949),R=n(271359),N=n(476604),O=n(36424),b=n(567e3),v=n(556543)
function hasAddedInfo(e){return e.hasOwnProperty("currentUserPermissionsJson")&&e.hasOwnProperty("fieldsJson")&&e.hasOwnProperty("validationStatusSummary")}const P=a.Ps`
  query RegistryTagSchemasSettingsPageQuery($registryId: StrictString!)
  @skipAudit
  @engComponent(name: REGISTRY) {
    registry(id: $registryId) {
      ... on RegistryNode {
        id
        tagSchemas {
          id
          folderItemType
          iconId
          name
          sequenceType
          ...HasArchiveRecordGraphQL
        }
        ...NavStoreRegistryGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,E.f)("HasArchiveRecord").fragment}
  ${(0,E.f)("NavStoreRegistry").fragment}
  ${(0,E.f)("InaccessibleInfo").fragment}
`,L=a.Ps`
  query RegistryTagSchemasSettingsPageWithAddedInfoQuery($registryId: StrictString!)
  @skipAudit
  @engComponent(name: REGISTRY) {
    registry(id: $registryId) {
      ... on RegistryNode {
        id
        tagSchemas {
          id
          currentUserPermissionsJson
          fieldsJson
          folderItemType
          iconId
          name
          sequenceType
          ...HasArchiveRecordGraphQL
          ...TagSchemaValidationStatusSummaryGraphQL
        }
        ...NavStoreRegistryGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,E.f)("HasArchiveRecord").fragment}
  ${(0,E.f)("TagSchemaValidationStatusSummary").fragment}
  ${(0,E.f)("NavStoreRegistry").fragment}
  ${(0,E.f)("InaccessibleInfo").fragment}
`
function getSchemaDescriptor(e){return[o.createElement("div",null,o.createElement(O.Z,{className:"typeIcon u-small-spacing-left",icon:e.iconId}),o.createElement("span",{className:"u-small-spacing-left"},e.name,o.createElement(c.Z,{item:e}))),(0,v.yw)({schema:e})]}class RegistryTagSchemasSettingsPage extends o.Component{constructor(){super(...arguments)
this.createHandler=()=>{m.c4(null,f.getCreateTagSchemaUrl(this.props.ownerUrlId,this.props.registryId))}
this.urlForSchema=e=>f.getTagSchemaSettingsUrl(this.props.ownerUrlId,this.props.registryId,e)}componentDidMount(){C.he()}renderValidationSummaryColumns(e){if(!(0,_.k)())return[]
if(!e.validationStatusSummary||0===e.validationStatusSummary.numFailed)return[o.createElement("span",null)]
const t=`${f.getTagSchemaSettingsUrl(this.props.ownerUrlId,this.props.registryId,e.id)}/validation`
return[o.createElement("div",{onClick:e=>{e.stopPropagation()
e.preventDefault();(0,g.ZP)(t)},className:(0,i.iv)(D.validationSummaryLink)},e.validationStatusSummary.numFailed)]}mapSchemaToRowValue(e){return hasAddedInfo(e)?[...getSchemaDescriptor(e),e.fieldsJson.map((({displayName:e})=>e)).join(", "),...(0,_.k)()?this.renderValidationSummaryColumns(e):[]]:function mapSchemaWithoutAddedInfoToRow(e){return[...getSchemaDescriptor(e),o.createElement(N.Z,null)]}(e)}mapSchemaToRowPermissions(e){return hasAddedInfo(e)?{isArchivable:Boolean(e.currentUserPermissionsJson.archivable),isDeletable:Boolean(e.currentUserPermissionsJson.definitionDeletable)}:{isArchivable:!1,isDeletable:!1}}render(){(0,m._w)(`${(0,y.Z)()} - Registry Settings`)
const e=[{name:"Schemas",width:4},{name:"Entity Type",width:2},{name:"Entity Fields",width:(0,_.k)()?4:6},...(0,_.k)()?[{name:"Validation Failures",width:2}]:[]]
return o.createElement(I.Z,{columnHeaders:e,schemas:this.props.listings,schemaType:A.R.ENTITY,navigateToCreate:this.createHandler,urlForSchema:this.urlForSchema,archiveSchemas:l.$K,unarchiveSchemas:l.RS,deleteSchema:e=>{C.$v(e)},isWritable:this.props.isWritable,mapSchemaToRowValue:this.mapSchemaToRowValue.bind(this),mapSchemaToRowPermissions:this.mapSchemaToRowPermissions.bind(this),...!u.ZP.CHEMISTRY_ENABLE_MOLECULE&&{customFilterCallback:e=>e.filter((e=>e.folderItemType!==p.MOLECULE))}})}}RegistryTagSchemasSettingsPage.propTypes={ownerUrlId:s().string.isRequired,registryId:s().string.isRequired}
const D=i.mM.create({validationSummaryLink:{display:"inline-block",height:"100%",width:"75%",float:"left",textAlign:"right",color:R.t0,padding:"17px 0 14px",margin:"-17px 0 -14px",":hover":{color:R.Ej,textDecoration:"underline"}}}),M=function QueryingRegistryTagSchemasSettingsPage(e){const t=(0,h.IJ)(P,{variables:{registryId:e.registryId}}),n=t.type===h.NI.SUCCESS,a=n?t.data.registry:null,i=(0,h.IJ)(L,{variables:{registryId:e.registryId},fetchPolicy:"cache-and-network",pollInterval:12e4,renderCachedDataWhenRefetching:!0}),r=i.type===h.NI.SUCCESS,s=r?i.data.registry:a
let l=!1,c=null
if(s){(0,d.hu)(!(0,T.CZ)(s),"Expected registry to be accessible")
l=f.hasSettingsAccess((0,S.tY)("NavStoreRegistry",s))
c=(0,b.Z)(s.tagSchemas,[{accessor:({name:e})=>e,naturalSort:!0}])}return o.createElement(RegistryTagSchemasSettingsPage,{...e,key:e.registryId,isLoading:!r&&!n,isWritable:l,listings:c})}},331471:(e,t,n)=>{n.d(t,{ZP:()=>T,wK:()=>TagSchemaPermissionSettings})
var a=n(769784),i=n(989526),r=n(232606),s=n(127415),o=n(563019),l=n(256605),c=n(751512),d=n(91092),u=n(965131),m=n(697134),p=n(815949),h=n(73374),E=n(476604)
const S=a.Ps`
  query TagSchemaPermissionSettingsQuery($tagSchemaId: StrictString!)
  @skipAudit
  @engComponent(name: REGISTRY) {
    tagSchema(id: $tagSchemaId) {
      ... on TagSchemaNode {
        id
        authParentOption
        currentUserPermissionsJson
        ...CollaboratorInfoGraphQL
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,d.f)("CollaboratorInfo").fragment}
  ${(0,d.f)("InaccessibleInfo").fragment}
`
function TagSchemaPermissionSettings({id:e,collaborators:t,isReadOnly:n,authParentOption:a,onUpdate:r,onSubmit:o}){return i.createElement("div",{className:"settingsPage-contentWrapper"},i.createElement(s.Z,{policeableId:e,collaborators:t,isReadOnly:n,onUpdate:r,onSubmit:o}),a&&i.createElement("div",{className:"u-large-spacing-top"},i.createElement(h.zV,null,"Registering Entities"),i.createElement("p",null,"Users with the Create or Admin Access Policy can register objects of this schema. The registered objects of this schema will have permissions that are"," ",i.createElement("strong",null,a===l.HH.FOLDER?"Registry":"Project"),"-based.")))}function ExistingTagSchemaPermissionSettings({tagSchema:e,refetch:t}){const n=(0,u.tY)("CollaboratorInfo",e),[{collaborators:a,minimalCollaborators:r},s]=(0,o.U9)(n.collaborators)
return i.createElement(TagSchemaPermissionSettings,{id:e.id,isReadOnly:!e.currentUserPermissionsJson.definitionEditable,authParentOption:e.authParentOption,collaborators:a,onUpdate:s,onSubmit:async()=>{await p.FM(e.id,{collaborators:r})
await t()}})}const T=function QueryingTagSchemaPermissionSettings({tagSchemaId:e}){const t=(0,c.IJ)(S,{variables:{tagSchemaId:e}})
if(t.type===c.NI.ERROR)return null
if(t.type===c.NI.PENDING)return i.createElement(E.b,null);(0,r.hu)(!(0,m.CZ)(t.data.tagSchema),"Expected tag schema to be accessible.")
return i.createElement(ExistingTagSchemaPermissionSettings,{tagSchema:t.data.tagSchema,refetch:async()=>{await t.refetch()}})}},838549:(e,t,n)=>{n.d(t,{Z:()=>getRegistrySchemasTitle})
var a=n(776105)
function getRegistrySchemasTitle(){return(0,a.Z)()?"Entity / batch schemas":"Entity schemas"}},610977:(e,t,n)=>{n.d(t,{g:()=>areLocationValidationErrorBadgesEnabled,k:()=>areRegistryErrorBadgesEnabled})
var a=n(348920)
function areRegistryErrorBadgesEnabled(){return a.ZP.REGISTRY_ENABLE_ASYNC_VALIDATION_ERROR_BADGES}function areLocationValidationErrorBadgesEnabled(){return a.ZP.INVENTORY_ENABLE_LOCATION_CAPACITY}},144904:(e,t,n)=>{n.d(t,{Z:()=>EmptySidebarIcon})
var a=n(989526)
function EmptySidebarIcon(){return a.createElement("div",{className:"result-icon"})}},559945:(e,t,n)=>{n.d(t,{Fh:()=>T,ZP:()=>QueryingRegistrySettings})
var a=n(769784),i=n(692013),r=n(989526),s=n(814099),o=n(323539),l=n(751512),c=n(216101),d=n(838549),u=n(610977),m=n(263137),p=n(219048),h=n(144904),E=n(621768),S=n(334089)
const T=a.Ps`
  query RegistrySettingsQuery @skipAudit @engComponent(name: REGISTRY) {
    registries {
      ... on RegistryNode {
        name
        id
        ownerJson
      }
    }
  }
`,g=a.Ps`
  query RegistrySettingsWithValidationFailuresQuery @skipAudit @engComponent(name: REGISTRY) {
    registries {
      ... on RegistryNode {
        name
        id
        ownerJson
        numBioentityValidationFailures
        numLocationValidationFailures
      }
    }
  }
`
class RegistrySettings extends r.Component{renderRegistrySection(e,t){return r.createElement("div",{className:"u-spacing-bottom",key:e.id},r.createElement("div",{className:"browser-nav-header"},`${"Registry"===e.name?`${e.ownerJson.name} `:""}${e.name} Settings`),(0,o.cr)({feature:s.ed.REGISTRY_ADMIN})&&r.createElement(S.Z,{active:this.props.section===E.Section.REGISTRY_SETTINGS_GENERAL&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:"General",link:c.getRegistryGeneralSettingsUrl(e.ownerJson.url_identifier,e.id)}),(0,o.cr)({feature:s.ed.REGISTRY_ADMIN})&&r.createElement(S.Z,{active:E.REGISTRY_SELECTORS_SECTIONS.includes(this.props.section)&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:"Dropdowns",link:c.getRegistrySelectorsSettingsUrl(e.ownerJson.url_identifier,e.id)}),(0,o.cr)({feature:s.ed.REGISTRY_ADMIN})&&r.createElement(S.Z,{active:E.REGISTRY_SCHEMAS_SECTIONS.includes(this.props.section)&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:(0,d.Z)(),badge:null!=t&&t.numBioentityFailures>0&&(0,u.k)()?r.createElement(p.Z,{content:t.numBioentityFailures,tooltipTitle:"Entities failed validation checks",className:(0,i.iv)(f.sidebarItemWarningBadge)}):null,link:c.getRegistrySchemasSettingsUrl(e.ownerJson.url_identifier,e.id),dataTestAttrsKey:"entitySchemas"}),(0,o.cr)({feature:s.TD.INVENTORY_ADMIN})&&r.createElement(S.Z,{active:this.props.section===E.Section.REGISTRY_SETTINGS_CONTAINER_SCHEMAS&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:"Container schemas",link:c.getRegistryContainerSchemasUrl(e.ownerJson.url_identifier,e.id),dataTestAttrsKey:"containerSchemas"}),(0,o.cr)({feature:s.TD.INVENTORY_ADMIN})&&r.createElement(S.Z,{active:this.props.section===E.Section.REGISTRY_SETTINGS_BOX_SCHEMAS&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:"Box schemas",link:c.getRegistryBoxSchemasUrl(e.ownerJson.url_identifier,e.id),dataTestAttrsKey:"boxSchemas"}),(0,o.cr)({feature:s.TD.INVENTORY_ADMIN})&&r.createElement(S.Z,{active:this.props.section===E.Section.REGISTRY_SETTINGS_PLATE_SCHEMAS&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:"Plate schemas",link:c.getRegistryPlateSchemasUrl(e.ownerJson.url_identifier,e.id),dataTestAttrsKey:"plateSchemas"}),(0,o.cr)({feature:s.TD.INVENTORY_ADMIN})&&r.createElement(S.Z,{active:this.props.section===E.Section.REGISTRY_SETTINGS_LOCATION_SCHEMAS&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:"Location schemas",badge:null!=t&&t.numLocationFailures>0&&(0,u.g)()?r.createElement(p.Z,{content:t.numLocationFailures,tooltipTitle:"Locations failed validation checks",className:(0,i.iv)(f.sidebarItemWarningBadge)}):null,link:c.getRegistryLocationSchemasUrl(e.ownerJson.url_identifier,e.id),dataTestAttrsKey:"locationSchemas"}),(0,o.cr)({feature:s.TD.INVENTORY_ADMIN})&&r.createElement(S.Z,{active:this.props.section===E.Section.REGISTRY_SETTINGS_LABEL_PRINTING&&e.id===this.props.activeRegistryId,icon:r.createElement(h.Z,null),name:"Label printing",link:c.getRegistryLabelTemplatesUrl(e.ownerJson.url_identifier,e.id)}))}render(){return r.createElement("div",{...(0,m.Z)({component:"RegistrySettings",element:"sidebar"})},this.props.registries.map((e=>this.renderRegistrySection(e,this.props.numErrorsByRegistryId?this.props.numErrorsByRegistryId.get(e.id):null))))}}const f=i.mM.create({sidebarItemWarningBadge:{margin:"-3px 0"}})
function QueryingRegistrySettings(e){const t=(0,l.IJ)(T),n=t.type===l.NI.SUCCESS?t.data.registries:[],a=(0,l.IJ)(g,{fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0,pollInterval:12e4}),i=a.type===l.NI.SUCCESS,s=i?a.data.registries:n,o=i?new Map(a.data.registries.map((e=>[e.id,{numBioentityFailures:e.numBioentityValidationFailures,numLocationFailures:e.numLocationValidationFailures}]))):null
return r.createElement(RegistrySettings,{...e,registries:s,numErrorsByRegistryId:o})}},621768:(e,t,n)=>{n.r(t)
n.d(t,{REGISTRY_SCHEMAS_SECTIONS:()=>s,REGISTRY_SELECTORS_SECTIONS:()=>o,SETTINGS_SECTIONS:()=>r,STANDARD_SECTIONS:()=>i,Section:()=>a})
var a
!function(e){e.BROWSER="BROWSER"
e.WORKSPACE="WORKSPACE"
e.REGISTRY_SETTINGS_BOX_SCHEMAS="REGISTRY_SETTINGS_BOX_SCHEMAS"
e.REGISTRY_SETTINGS_CONTAINER_SCHEMAS="REGISTRY_SETTINGS_CONTAINER_SCHEMAS"
e.REGISTRY_SETTINGS_GENERAL="REGISTRY_SETTINGS_GENERAL"
e.REGISTRY_SETTINGS_LABEL_PRINTING="REGISTRY_SETTINGS_LABEL_PRINTING"
e.REGISTRY_SETTINGS_LOCATION_SCHEMAS="REGISTRY_SETTINGS_LOCATION_SCHEMAS"
e.REGISTRY_SETTINGS_PLATE_SCHEMAS="REGISTRY_SETTINGS_PLATE_SCHEMAS"
e.REGISTRY_SETTINGS_SCHEMAS="REGISTRY_SETTINGS_SCHEMAS"
e.REGISTRY_SETTINGS_SELECTORS="REGISTRY_SETTINGS_SELECTORS"
e.SCHEMA_INTERFACE_SETTINGS="SCHEMA_INTERFACE_SETTINGS"
e.TAG_SCHEMA_SETTINGS="TAG_SCHEMA_SETTINGS"
e.SELECTOR_SETTINGS="SELECTOR_SETTINGS"
e.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTIONS="NOTEBOOK_SETTINGS_TEMPLATE_COLLECTIONS"
e.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION="NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION"
e.NOTEBOOK_SETTINGS_TEMPLATE="NOTEBOOK_SETTINGS_TEMPLATE"
e.REQUEST_SCHEMAS="REQUEST_SCHEMAS"
e.REQUEST_TASK_SCHEMAS="REQUEST_TASK_SCHEMAS"
e.ASSAY_RESULT_SCHEMAS="ASSAY_RESULT_SCHEMAS"
e.ASSAY_RUN_SCHEMAS="ASSAY_RUN_SCHEMAS"
e.CONNECTION_SCHEMAS="CONNECTION_SCHEMAS"
e.INSTRUMENT_GATEWAYS="INSTRUMENT_GATEWAYS"
e.PROCESS_SCHEMAS="PROCESS_SCHEMAS"
e.DATA_POLICIES="DATA_POLICIES"
e.SCHEMA_POLICIES="SCHEMA_POLICIES"
e.EVENT_SUBSCRIPTIONS="EVENT_SUBSCRIPTIONS"
e.BENCHLING_APPS_SETTINGS="BENCHLING_APPS_SETTINGS"
e.BENCHLING_APP_CANVAS_BUILDER="BENCHLING_APP_CANVAS_BUILDER"
e.CONFIG_MIGRATION="CONFIG_MIGRATION"
e.MONOMERS="MONOMERS"
e.TENANT_LEVEL_LABEL_PRINTING_SETTINGS="TENANT_LEVEL_LABEL_PRINTING_SETTINGS"
e.TENANT_LEVEL_INVENTORY_SETTINGS="TENANT_LEVEL_INVENTORY_SETTINGS"
e.REVIEW_LIFECYCLES="REVIEW_LIFECYCLES"
e.STUDY_SCHEMAS="STUDY_SCHEMAS"
e.UNIT_DICTIONARY="UNIT_DICTIONARY"}(a||(a={}))
const i=[a.BROWSER,a.WORKSPACE],r=[a.REGISTRY_SETTINGS_BOX_SCHEMAS,a.REGISTRY_SETTINGS_CONTAINER_SCHEMAS,a.REGISTRY_SETTINGS_GENERAL,a.REGISTRY_SETTINGS_LABEL_PRINTING,a.REGISTRY_SETTINGS_LOCATION_SCHEMAS,a.REGISTRY_SETTINGS_PLATE_SCHEMAS,a.REGISTRY_SETTINGS_SCHEMAS,a.REGISTRY_SETTINGS_SELECTORS,a.SCHEMA_INTERFACE_SETTINGS,a.TAG_SCHEMA_SETTINGS,a.NOTEBOOK_SETTINGS_TEMPLATE,a.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTION,a.NOTEBOOK_SETTINGS_TEMPLATE_COLLECTIONS,a.REQUEST_SCHEMAS,a.REQUEST_TASK_SCHEMAS,a.ASSAY_RESULT_SCHEMAS,a.ASSAY_RUN_SCHEMAS,a.CONNECTION_SCHEMAS,a.INSTRUMENT_GATEWAYS,a.PROCESS_SCHEMAS,a.DATA_POLICIES,a.SCHEMA_POLICIES,a.BENCHLING_APPS_SETTINGS,a.EVENT_SUBSCRIPTIONS,a.BENCHLING_APP_CANVAS_BUILDER,a.CONFIG_MIGRATION,a.MONOMERS,a.TENANT_LEVEL_LABEL_PRINTING_SETTINGS,a.TENANT_LEVEL_INVENTORY_SETTINGS,a.REVIEW_LIFECYCLES,a.STUDY_SCHEMAS,a.UNIT_DICTIONARY],s=[a.REGISTRY_SETTINGS_SCHEMAS,a.TAG_SCHEMA_SETTINGS],o=[a.REGISTRY_SETTINGS_SELECTORS,a.SELECTOR_SETTINGS]},334089:(e,t,n)=>{n.d(t,{Z:()=>u})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(232606),l=n(675649),c=n(263137)
class SidebarItem extends s.Component{render(){(0,o.hu)(!(this.props.clickHandler&&this.props.link),"Cannot pass both clickHandler and link props")
const e=this.props.link?l.c4:this.props.clickHandler
return s.createElement("a",{className:(0,a.iv)(d.anchor),href:this.props.link,onClick:e,onContextMenu:this.props.contextMenuHandler,...this.props.dataTestAttrsKey?{...(0,c.Z)({component:"SidebarItem",element:"nav",key:this.props.dataTestAttrsKey})}:{...(0,c.Z)({component:"SidebarItem",element:"nav"})}},s.createElement("div",{className:r()({sidebarItem:!0,active:this.props.active})},this.props.icon,s.createElement("span",{className:(0,a.iv)(d.content)},s.createElement("span",{className:r()("browser-file-name",(0,a.iv)(d.contentItem))},s.createElement("span",{className:"u-display-inline-block"},this.props.name)),s.createElement("span",{className:(0,a.iv)(d.contentItem)},this.props.badge))))}}SidebarItem.defaultSidebarItemProps={active:!1,faded:!1}
const d=a.mM.create({anchor:{color:"inherit",textDecoration:"inherit"},content:{display:"flex",justifyContent:"space-between"},contentItem:{display:"flex",fontSize:"13px"}}),u=SidebarItem},305487:(e,t,n)=>{n.d(t,{Z:()=>L})
var a=n(767807),i=n.n(a),r=n(250965),s=n.n(r),o=n(913930),l=n.n(o),c=n(615439),d=n.n(c),u=n(531041),m=n(178570),p=n(426178),h=n(232606),E=n(41706),S=n(323539),T=n(675649),g=n(787004),f=n(459830),I=n(699418),A=n(947730),y=n(138966),_=n(391028),C=n(387361),R=n(974913),N=n(788836),O=n(379346),b=n(556543),v=n(378973)
let P=!1
class WorkspaceStore extends _.Z{constructor(){super(...arguments)
this.autoSaver=null
this.workspaceItems=[]
this.workspaceLastServerItems=[]
this.activeId=null
this.activeFileType=null
this.workspaceOpenVersion=0
this.workspaceSavedVersion=0}listenToFileStates(e){this.fileStates=e
this.listenTo(this.fileStates,"add remove reset change:active",(()=>this._fileStatesActiveSync(!0)))
this.listenTo(this.fileStates,"add change:name change:tagSchema change:archiveRecord",this._syncWorkspaceItems)
this._fileStatesActiveSync(!1)}_syncWorkspaceItems(e){this.workspaceItems=(()=>{var t,n
const a=[]
for(const r of this.workspaceItems)if(r.fileId===e.id){const s={id:r.id,fileId:r.fileId,name:null!==(t=e.name())&&void 0!==t?t:r.name,archiveRecord:e.archiveRecord(),schemaValidationState:null!==(n=e.schemaValidationState())&&void 0!==n?n:r.schemaValidationState,tagSchema:e.get("tagSchema"),...null!=e.get("sequence")&&{type:e.get("sequence").type()}}
a.push(i()(r,{$merge:s}))}else a.push(r)
return a})()
this.emitChange()}_setWorkspaceItemState(e,t){const n=this.workspaceItems.findIndex((t=>t.fileId===e))
if(!(n<0)){this.workspaceItems=i()(this.workspaceItems,{[n]:{$merge:t}})
this.emitChange()}}_fileStatesActiveSync(e){null==e&&(e=!0)
const t=this.fileStates.find((e=>e.get("active")&&this.fileStates.isWorkspaceItem(e)))
this.activeId=null!=t?t.id:null
if(null!=t){t.fileType()===f.SEQUENCE&&"oligo"===t.model().type()?this.activeFileType="oligo":this.activeFileType=t.fileType()
this._revealTabIfHidden(t)}else this.activeFileType=null
e&&this.emitChange()}_workspaceServerItems(){return this.workspaceItems.filter((e=>!WorkspaceStore.SKIPPED_FILE_TYPES.includes(O.ZP.apiIdToType(e.fileId)))).map((e=>({id:e.id,fileId:e.fileId})))}_bumpWorkspaceVersion(){P&&(this.workspaceOpenVersion+=1)}_addToWorkspace(e,t,{workspaceItemId:n=null,index:a=0}={}){if(!(0,S.cr)({feature:E.N7.OPEN,item:{id:e}}))return
if(this._findInWorkspace(e))return
const r={id:null!=n?n:(0,m.Z)(),fileId:e,name:t.name,tagSchema:t.tagSchema,archiveRecord:t.archiveRecord,schemaValidationState:t.schemaValidationState}
this.workspaceItems=i()(this.workspaceItems,{$splice:[[a,0,r]]})
this._bumpWorkspaceVersion()}_getNextFileIdToOpen(e){if(!this.activeId)return null
const t=this._findIndexInWorkspace(this.activeId)
if(-1===t)return null
const isStillInWorkspace=t=>u.default.pluck(e,"fileId").includes(t.fileId),n=this.workspaceItems.slice(0,t).filter((e=>isStillInWorkspace(e)))
if(n.length>0)return u.default.last(n).fileId
const a=this.workspaceItems.slice(t+1).filter((e=>isStillInWorkspace(e)))
return a.length>0?a[0].fileId:null}_shouldCloseFileWithUnsavedChanges(e){const t=this.fileStates.get(e)
if(t&&t.hasUnsavedChanges()){l().captureBreadcrumb({category:"bnch.nav",message:"Prompted to close unsaved files",level:"info"})
return!window.confirm(`"${t.name()}" has unsaved changes. Do you want to close the tab and discard your changes?`)}return!1}_closeAllFilesExcept(e){const[t,a]=u.default.partition(this.workspaceItems,(({fileId:t})=>e(t)||this._shouldCloseFileWithUnsavedChanges(t))),i=u.default.compact(a.map((e=>this.fileStates.get(e.fileId)))),r=this._getNextFileIdToOpen(t),s=null!=this.activeId
if(s&&u.default.pluck(a,"fileId").includes(this.activeId)){this.fileStates.trigger("unmount")
this.activeId=null}this.fileStates.closeAll(i)
const o=i.map((e=>e.id))
i.forEach((e=>{if(e.fileType()===f.SEQUENCE){const e=p.Z.get()
e.remove(e.filter((e=>u.default.contains(o,e.get("sequence").id))))}}))
this.workspaceItems=t
this._bumpWorkspaceVersion()
if(s&&null==this.activeId)if(null!=r){n(776065).Z.openFile(r)}else(0,y.ZP)("/editor")}_moveWorkspaceTab(e,t){const n=u.default.findIndex(this.workspaceItems,(t=>t.fileId===e))
if(!(0,h.Gp)(n>=0,"Tried to move tab with invalid ID."))return
const a=this.workspaceItems[n]
this.workspaceItems=i()(this.workspaceItems,{$splice:[[n,1],[t,0,a]]})
this._bumpWorkspaceVersion()}_removeFromWorkspace(e){this._closeAllFilesExcept((t=>t!==e))}_clearWorkspace(e=[]){this._closeAllFilesExcept((t=>e.includes(t)))}_findInWorkspace(e){return u.default.findWhere(this.workspaceItems,{fileId:e})}_findIndexInWorkspace(e){return u.default.findIndex(this.workspaceItems,{fileId:e})}_syncTagSchema(e){this.workspaceItems=this.workspaceItems.map((t=>(null!=t.tagSchema?t.tagSchema.id:void 0)===e.id?i()(t,{tagSchema:{$set:e}}):t))}_syncTags(e){const t=u.default.indexBy(e,"id")
this.workspaceItems.forEach((e=>{const{fileId:n}=e,a=this.fileStates.get(n)
if(null==a)return
if(!b.DN(n)&&!f.FOLDER_ITEMS.includes(a.fileType()))return
const i=t[n]
null!=i&&u.default.defer((()=>{a.model().setTags(i.tags)}))}))}_syncAuthors(e,t){const n=this.fileStates.get(e)
null!=n&&u.default.defer((()=>{n.model().setAuthors(t)}))}_syncPermissions(e,t){const n=this.fileStates.get(e)
null!=n&&u.default.defer((()=>{n.setPermissions(t)}))}_syncFolder(e,t){const n=this.fileStates.get(e)
null==n||n instanceof I.T0||u.default.defer((()=>{n.model().setFolder(t)}))}_syncArchiveRecord(e,t){this._setWorkspaceItemState(e,{archiveRecord:t})
const n=this.fileStates.get(e)
null!=n&&u.default.defer((()=>{n.setArchiveRecord(t)
this._syncWorkspaceItems(n)}))}_syncValidationState(e,t){this._setWorkspaceItemState(e,{schemaValidationState:t})
const n=this.fileStates.get(e)
n&&u.default.defer((()=>{n.model().setSchemaValidationState(t)
this._syncWorkspaceItems(n)}))}saveWorkspace(){T.Gh("workspace",(()=>{let e
if(this.workspaceOpenVersion===this.workspaceSavedVersion)return s().Deferred().resolve().promise()
const t=this.workspaceOpenVersion,n=this._workspaceServerItems(),a=u.default.indexBy(this.workspaceLastServerItems,"id"),i=u.default.indexBy(n,"id"),r={itemsPresent:n.filter((e=>!d()(a[e.id],e))),deletedIds:(()=>{const t=[]
for(e in a)e in i||t.push(e)
return t})(),tabOrder:u.default.pluck(n,"id")}
return v.Z.update(r).done((e=>{this.workspaceSavedVersion=t
this.workspaceLastServerItems=n})).fail((e=>{var n
R.ZP.stickyNotifyForFriendlyError(e,"workspace-save-fail")
400<=e.status&&e.status<=500&&(null===(n=this.autoSaver)||void 0===n||n.pause({payload:r,workspaceSavedVersion:this.workspaceSavedVersion,currentVersion:t,status:e.status,error:e.responseJSON},{skipClientDump:!0}))}))}))}loadFromServerBootstrap(){if(P)return
const e=window.bootstrap&&window.bootstrap.workspaceItems?window.bootstrap.workspaceItems.slice().reverse():[]
for(const t of e)t.finder||this._addToWorkspace(t.fileId,{name:t.name,tagSchema:t.tagSchema,archiveRecord:t.archiveRecord,schemaValidationState:t.schemaValidationState},{workspaceItemId:t.id})
this.workspaceLastServerItems=this._workspaceServerItems()
P=!0
this.emitChange()}resetState(){P=!1
this.workspaceItems=[]
this.activeId=null
this.workspaceWidth=null
if(N.Z.currentUser()){null!=this.autoSaver&&this.autoSaver.stop()
this.autoSaver=new C.Z({id:"workspace-autosaver",friendlyName:"workspace",doSave:this.saveWorkspace.bind(this),getItemState:()=>({openVersion:this.workspaceOpenVersion,savedVersion:this.workspaceSavedVersion}),persistToLocalStorage:!1,checkItemLoaded:!1,showErrors:!1})}this.workspaceSavedVersion=0
this.workspaceOpenVersion=0}getState(){return{workspaceItems:this.workspaceItems,activeId:this.activeId,activeFileType:this.activeFileType}}_revealTabIfHidden(e){if(!this.activeId)return
this._findIndexInWorkspace(this.activeId)>=this.getMaxOverheadTabs()&&this._moveWorkspaceTab(e.id,0)}getMaxOverheadTabs(){return null!=this.workspaceWidth?Math.floor(this.workspaceWidth/150):1/0}payloadHandler(e){switch(e.actionType){case g.Xq8:{const{id:t}=e
this._removeFromWorkspace(t)
this.emitChange()
break}case g.ATH:{const{ids:t}=e
t.forEach((e=>{this._removeFromWorkspace(e)}))
this.emitChange()
break}case g.WQA:{let t=0
if(this.activeId){t=this._findIndexInWorkspace(this.activeId)+1}this._addToWorkspace(e.fileId,e.item,{index:t})
this.emitChange()
break}case g.g2:this._removeFromWorkspace(e.fileId)
this.emitChange()
break
case g.S8s:e.fileIds.forEach((e=>this._removeFromWorkspace(e)))
this.emitChange()
break
case g.gSo:{const{workspaceItemId:t,toIndex:n}=e
this._moveWorkspaceTab(t,n)
this.emitChange()
break}case g.K4E:{const{itemIdsToKeep:t}=e
this._clearWorkspace(t)
this.emitChange()
break}case g.JFe:{const{tagData:t}=e
this._syncTags(t)
break}case g.LfL:this._syncAuthors(e.fileId,e.authors)
this._syncPermissions(e.fileId,e.newPermissions)
break
case g.RXe:case g.Iyg:{const{itemIds:t,permissionsByItemId:n,archiveRecordsByItemId:a}=e
for(const e of Object.values(t)){this._syncArchiveRecord(e,a[e])
this._syncPermissions(e,n[e])}break}case g.GaI:case g.WKo:{const{itemIds:t,permissionsByItemId:n}=e
for(const e of Object.values(t)){this._syncArchiveRecord(e,null)
this._syncPermissions(e,n[e])}break}case g.wXQ:this.emitChange()
break
case g.V$H:{const{tagSchema:t}=e
this._syncTagSchema(t)
this.emitChange()
break}case g.n5Y:{const{workspaceWidth:t}=e
this.workspaceWidth=t
this.emitChange()
break}case g.Pgk:{const{schemaValidationStateByBioentityId:t}=e
for(const e of Object.keys(t))this._syncValidationState(e,t[e])
this.emitChange()
break}case g.vm6:for(const t of e.ids)this._syncValidationState(t,void 0)
this.emitChange()
break
case g.LNQ:{const{ids:t,permissionsById:n,folder:a}=e
for(const e of t){n&&this._syncPermissions(e,n[e])
this._syncFolder(e,a)}this.emitChange()
break}case g.bYo:{const{itemIds:t,archiveRecordsByItemId:n}=e
for(const e of t)this._syncArchiveRecord(e,n[e])
break}case g.P_e:{const{itemIds:t}=e
for(const e of t)this._syncArchiveRecord(e,null)
break}}return!0}}WorkspaceStore.SKIPPED_FILE_TYPES=[]
WorkspaceStore.initClass()
const L=new WorkspaceStore(A.Z)},243908:(e,t,n)=>{n.d(t,{$b:()=>o,F6:()=>i,Ry:()=>r,UF:()=>s})
var a=n(256605)
const i=255,r=2048,s="ANY",o=Object.values(a.Bf)},630442:(e,t,n)=>{n.d(t,{IS:()=>a,QJ:()=>createStudy,Ss:()=>updateNotificationSchedules,cp:()=>generateReportFromEntries,m9:()=>updateStudy,tB:()=>bulkUpdateStudies})
var a,i=n(188663),r=n(581210),s=n(232606),o=n(771398),l=n(8747)
!function(e){e.BLANK="blank"
e.FROM_TEMPLATE="fromTemplate"}(a||(a={}))
async function createStudy(e){const t=await(0,o.s0)({url:(0,r.Kq)(i.J.STUDY),data:{creates:[e]}});(0,s.hu)(1===t.createdIds.length,"Expected one study to be created")
return{studyId:t.createdIds[0]}}async function updateStudy(e,t){const n=await(0,o.Ry)({url:(0,r.Kq)(i.J.STUDY),data:{updates:[{id:e,...t}]}});(0,s.hu)(1===n.updatedIds.length,"Expected one study to be updated");(0,s.hu)(n.updatedIds[0]===e,"Expected updated study to have the same id as the input study")
return{studyId:e}}function bulkUpdateStudies(e){return(0,o.Ry)({url:(0,r.Kq)(i.J.STUDY),data:e})}function generateReportFromEntries(e,t,n,a,i){return l.s0({url:"/1/api/studies/report-generation:generate-report-from-entries",data:{reportTemplateId:e,entryIds:t,folderId:n,newEntryName:a,initialDay:i}})}function updateNotificationSchedules(e,t){return(0,o.s0)({url:`${(0,r.Kq)(i.J.STUDY)}/${e}:update_notification_schedules`,data:t})}},186905:(e,t,n)=>{n.d(t,{Gm:()=>useStudySearchControlledItemsProps,ZC:()=>getStudyIds,ZP:()=>StudySearchInput})
var a=n(989526),i=n(396091),r=n(402763)
function StudySearchInput(e){var t
const n={context:e.context}
return a.createElement(i.Z,{query:e.query,onUpdateQuery:e.onUpdateQuery,autoFocus:null!==(t=e.autoFocus)&&void 0!==t&&t,chipSize:e.chipSize,className:e.className,doSearch:r.Kq,fetchParams:n,initialQuery:e.initialQuery,itemKey:"data",onBlur:e.onBlur,onChange:e.onChange,onKeyDown:e.onKeyDown,placeholder:e.shouldAllowMultiple?"Search for studies":"Search for study",searchURL:"/1/api/all/search?filter=study",selectedItems:e.selectedItems,shouldAllowMultiple:e.shouldAllowMultiple,hideSelectedResults:!0,disabled:e.disabled,isReadOnly:e.isReadOnly})}function useStudySearchControlledItemsProps(e){const[t,n]=(0,a.useState)(e)
return{selectedItems:t,onChange:n}}function getStudyIds(e){var t
return e?null===(t=null==e?void 0:e.selectedItems)||void 0===t?void 0:t.map((e=>e.id)):[]}},678333:(e,t,n)=>{n.d(t,{E:()=>addStudyables,c:()=>updateStudyables})
var a=n(771398)
const i="/1/api/studyables"
function updateStudyables(e){return(0,a.Ry)({url:i,data:e})}function addStudyables(e){return(0,a.s0)({url:`${i}`,data:e})}},789917:(e,t,n)=>{n.d(t,{Sj:()=>useStudySchemasAsCreateDropdownOptions,AT:()=>useStudySchemasAsLegacyDropdownMenuItems})
var a=n(769784),i=n(468943),r=n(232606),s=n(348920),o=n(171471),l=n(751512),c=n(502633),d=n(901113),u=n(692013),m=n(989526),p=n(459830),h=n(17086),E=n(776065),S=n(518352),T=n(204026),g=n(402337),f=n(390462),I=n(91092),A=n(697134),y=n(115902),_=n(250417),C=n(883136),R=n(251808),N=n(243908),O=n(103593),b=n(102176),v=n(59860),P=n(334148),L=n(73374),D=n(16049),M=n(476604),w=n(801455),F=n(134749),k=n(665704),U=n(205986),x=n(198210),B=n(883026),Z=n(630442)
const q=a.Ps`
  query CreateModalStudyQuery($id: StrictString!) @skipAudit @engComponent(name: STUDIES) {
    studySchema(id: $id) {
      ... on StudySchemaNode {
        id
        name
        fieldsJson
      }
      ... on InaccessibleInfoNode {
        ...InaccessibleInfoGraphQL
      }
    }
  }
  ${(0,I.f)("InaccessibleInfo").fragment}
`
function CreateStudyModal(e){const t=(0,D.Z)(""),n=(0,D.Z)(""),[a,i]=(0,m.useState)(null!=e.initialFolderId?e.initialFolderId:f.Z.get(f.O.STUDIES)),[s,o]=(0,m.useState)([]),c=(0,l.IJ)(q,{fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0,variables:{id:e.studySchemaId}}),d=c.type!==l.NI.SUCCESS||(0,A.CZ)(c.data.studySchema)?null:{id:c.data.studySchema.id,name:c.data.studySchema.name,fields:c.data.studySchema.fieldsJson},[I,V]=(0,m.useState)("Untitled"),[H,W]=(0,m.useState)(f.Z.get(f.O.NOTEBOOK)),{schemaTags:Y,tagSchema:$,updateSchemaTag:K,updateTagSchema:z}=(0,y.RE)(),[Q,j]=(0,m.useState)(Z.IS.FROM_TEMPLATE),{templateId:J,changeTemplate:X,templateResult:ee,canChangeSchema:te}=(0,_.o$)(null,V,z),{initialDay:ne,setInitialDay:ae}=(0,_.FV)(),ie=$?(0,y.Dr)($,Y):{},re=function validateParams(e,t){if(null==e.folderId||null==e.studySchemaId||0===e.name.length)return null
if(null==t||!(0,R.Bh)(e.tags,t))return null
const n=e.entryInformation
if(!n.folder||!n.name||Object.entries(n.errorsByFieldId).length>0)return null
const a=(0,R.UR)(n.schemaTags)
let i
if(n.designEntryType===Z.IS.FROM_TEMPLATE){if((0,_.bV)(n.templateId,n.name,n.folder,n.templateQueryResultType,null!=n.tagSchemaId,n.errorsByFieldId))return null
i={type:Z.IS.FROM_TEMPLATE,name:n.name,folder:n.folder,tagSchemaId:n.tagSchemaId,schemaTags:a,template:n.templateId,initialDay:n.initialDay}}else{(0,r.hu)(n.designEntryType===Z.IS.BLANK,"Received unexpected designEntryType")
i={type:Z.IS.BLANK,name:n.name,folder:n.folder,tagSchemaId:n.tagSchemaId,schemaTags:a}}return{name:e.name,description:e.description,folderId:e.folderId,studySchemaId:e.studySchemaId,tags:(0,R.UR)(e.tags),entryInformation:i}}({name:t.value,description:n.value,folderId:a,studySchemaId:null==d?void 0:d.id,tags:s,entryInformation:{name:I,folder:H,tagSchemaId:null==$?void 0:$.id,schemaTags:Y,errorsByFieldId:ie,designEntryType:Q,templateId:J,templateQueryResultType:ee.type,initialDay:ne}},null==d?void 0:d.fields),se=re?async()=>{var t
await(0,B.jI)(async function onCreateStudy(e,t){await h.S8({analyticsMetadata:{actionOrigin:t}},null,(async()=>{const t=await(0,Z.QJ)(e)
E.Z.openFile(t.studyId)}))}(re,e.actionOrigin),"Creating study...")
f.Z.set(f.O.STUDIES,re.folderId)
S.Z.invalidateFolderContents(re.folderId)
null===(t=e.onRequestSubmit)||void 0===t||t.call(e)}:null
return m.createElement(U.ZP,{buttons:[{disabled:!se,submit:!0,text:"Create",style:P.ZJ.SECONDARY}],title:m.createElement("span",null,"Create study",d&&m.createElement("span",null,": ",d.name)),onRequestClose:e.onRequestClose,onRequestSubmit:se},m.createElement(v.Z,null,m.createElement(O.Z,{sm:7},m.createElement(b.Z,null,m.createElement(k.Z,{dataTestAttrs:{component:"CreateStudyModal",element:"nameInput"},label:"Study Name",placeholder:"New study name",isRequired:!0,autoFocus:!0,maxLength:N.F6,...t}))),m.createElement(O.Z,{sm:5},m.createElement(b.Z,null,m.createElement(w.Z,{label:"Folder",isRequired:!0}),m.createElement(T.Z,{dataTestAttrs:{component:"CreateStudyModal",element:"studyFolderSelector"},enableRedesign:!0,showInventory:!1,showNotebook:!0,value:a,unsetOnFetchFail:!1,onChange:e=>{i(e.target.value)}})))),m.createElement(v.Z,null,m.createElement(O.Z,{sm:12},m.createElement(b.Z,null,m.createElement(k.Z,{label:"Description",placeholder:"New study description",isRequired:!1,autoFocus:!1,maxLength:N.Ry,...n})))),m.createElement(v.Z,null,m.createElement(O.Z,{sm:12},d?m.createElement(C.Z,{labelStyle:F.gF.LABEL,onChange:o,schema:d,tags:s}):m.createElement(M.Z,null))),m.createElement(v.Z,{className:(0,u.iv)(G.header)},m.createElement(O.Z,{sm:12},m.createElement(L.zV,null,"Design Entry"))),m.createElement(v.Z,null,m.createElement(O.Z,{sm:12},m.createElement("p",null,"When creating a study, we'll also create a Notebook entry where you can put the study design."))),m.createElement(v.Z,null,m.createElement(O.Z,{sm:12},m.createElement(x.Z,{onChangeSelection:j,selection:Q,size:P.qE.MEDIUM,options:[{id:Z.IS.FROM_TEMPLATE,buttonProps:{text:"From template"}},{id:Z.IS.BLANK,buttonProps:{text:"Blank entry"}}]}))),Q===Z.IS.FROM_TEMPLATE?m.createElement(_.wX,{isTemplateSelectorDisabled:!1,templateId:J,changeTemplate:X,initialDay:ne,setInitialDay:ae,entryName:I,setEntryName:V,folderId:H,setFolderId:W,queryIsPending:c.type===l.NI.PENDING,canChangeSchema:te,schemaTags:Y,tagSchema:$,updateTagSchema:z,updateSchemaTag:K,errorsByFieldId:ie}):m.createElement(g.Y,{nameFieldLabel:"Entry Name",name:I,setName:V,modelType:p.ENTRY,templateCollection:void 0,setTemplateCollection:()=>{},showInventory:!1,folderId:H,setFolderId:e=>{W(e)},tagSchema:$,updateTagSchema:z,updateSchemaTag:K,schemaTags:Y,errorsByFieldId:ie,selectNameFieldInitially:!1,entryProvenance:"entry"}))}const G=u.mM.create({header:{paddingBottom:"10px",paddingTop:"10px"}}),V=a.Ps`
  query CreateStudyMenuQuery @skipAudit @engComponent(name: STUDIES) {
    studySchemas {
      id
      name
      archiveRecord {
        purpose
      }
    }
  }
`,H={name:"No study schemas",value:"study-schema-none",disabled:!0},W={name:"Loading...",value:"study-schema-loading",disabled:!0},Y={name:"Error loading study schemas",value:"study-schema-error",disabled:!0,icon:"error"}
function _useStudySchemaOptions(e,t){const n=(0,l.A4)(V,{fetchPolicy:"cache-and-network",skip:!s.ZP.STUDIES_ENABLE})
switch(n.type){case l.NI.PENDING:return[W]
case l.NI.SKIPPED:return[H]
case l.NI.ERROR:return[Y]
case l.NI.SUCCESS:{const a=n.data.studySchemas.filter((e=>null==e.archiveRecord))
return 0===a.length?[H]:a.map((n=>({name:n.name,onClick:()=>{(0,i.gx)(o.U9.OPENED_MODAL,o.XC.STUDIES,{modalType:"create_study_modal"});(0,c.Z)(CreateStudyModal,{studySchemaId:n.id,initialFolderId:e,actionOrigin:t})},value:n.id})))}default:(0,r.Gp)(!1,`Unexpected result type: ${(0,d.vE)(n).type}`)
return[]}}function useStudySchemasAsCreateDropdownOptions(e,t){return _useStudySchemaOptions(e,t).map((e=>({name:e.name,icon:e.icon,value:e.value,disabled:e.disabled,handleClick:e.onClick})))}function useStudySchemasAsLegacyDropdownMenuItems(e,t){return _useStudySchemaOptions(e,t).map((e=>({name:e.name,icon:e.icon,disabled:e.disabled,handleOnClick:e.onClick})))}},389595:(e,t,n)=>{n.d(t,{$_:()=>getStudySchemaListingURL,Gu:()=>getStudySchemaURL,Re:()=>bulkUnarchive,TK:()=>createStudySchema,_C:()=>updateCollaborators,af:()=>withSpecErrorHandling,pI:()=>updateStudySchema,so:()=>getCreateStudySchemaURL,uc:()=>bulkArchive})
var a=n(974913),i=n(54548),r=n(771398)
function getStudySchemaListingURL(){return"/study-schemas/listing"}function getCreateStudySchemaURL(){return"/study-schemas/create"}function getStudySchemaURL(e){return`/study-schemas/${e}`}function updateCollaborators(e,t){return r.Ry({url:`/1/api/study-schemas/${e}/collaborators`,data:t})}function createStudySchema(e){return r.s0({url:"/1/api/study-schemas",data:e})}function bulkArchive(e,t){return r.s0({url:"/1/api/study-schemas:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return r.s0({url:"/1/api/study-schemas:bulk-unarchive",data:{ids:e}})}function updateStudySchema({schemaId:e,name:t,spec:n}){return r.Ry({url:`/1/api/study-schemas/${e}`,data:{name:t,spec:n}})}async function withSpecErrorHandling(e){try{return await e}catch(e){const t=(0,i.Z)(e)
if(t){t.errors.forEach((e=>{a.ZP.error(e)}))
return null}throw e}}},787116:(e,t,n)=>{n.d(t,{FN:()=>getStudyableItems,Hw:()=>isItemStudyable,IK:()=>isStudyableObjectType,Ur:()=>getStudyableModelTypes})
var a=n(188663),i=n(581210),r=n(491355)
const s=new Set([])
function isStudyableObjectType(e){return(0,i.gy)(e,a.i.STUDYABLE)&&!s.has(e)}function getStudyableModelTypes(){return Array.from((0,i.$S)(a.i.STUDYABLE)).filter((e=>isStudyableObjectType(e))).map((e=>(0,i.Mx)(e)))}function isItemStudyable(e){return(0,i.Id)(e)&&isStudyableObjectType((0,i.tQ)(e))&&function getPlatformConfiguration(e){const t=(0,r.O$)(a.i.STUDYABLE,(0,i.tQ)(e))
return(0,r.ml)(t)?t:r.iN}(e).isPlatformCapabilityEnabledForItemInstance(e)}function getStudyableItems(e){return e.filter((e=>isItemStudyable(e)))}},129270:(e,t,n)=>{n.d(t,{E0:()=>S,H5:()=>m,HG:()=>s,HW:()=>I,I3:()=>r,If:()=>y,Iv:()=>N,KB:()=>a,MU:()=>C,Nk:()=>_,Oo:()=>l,RC:()=>g,VM:()=>u,XI:()=>E,c4:()=>O,cf:()=>h,dY:()=>c,gP:()=>A,gt:()=>p,hS:()=>i,hv:()=>R,nS:()=>o,nX:()=>d,sE:()=>f,z:()=>T})
const a=600,i=400,r="Proxima Nova, Helvetica, Arial, sans-serif",s="Inconsolata, Courier New",o={lineHeight:1.5},l={...o,fontSize:19},c={...o,fontSize:18},d={...o,fontSize:17},u={...o,fontSize:16},m={...o,fontSize:15},p={...o,fontSize:14},h={...o,fontSize:13},E={...o,fontSize:12},S={...o,fontSize:11},T={...o,fontSize:10},g={...o,fontSize:9},f={...h,fontWeight:a},I={fontSize:19,lineHeight:"28px"},A={fontSize:18,lineHeight:"24px"},y={fontSize:17,lineHeight:"24px"},_={fontSize:15,lineHeight:"24px"},C={fontSize:14,lineHeight:"20px"},R={fontSize:13,lineHeight:"16px"},N={fontSize:12,lineHeight:"16px"},O={...R,fontWeight:a}},736957:(e,t,n)=>{n.d(t,{$Y:()=>T,Ch:()=>m,Pg:()=>h,SL:()=>u,VB:()=>l,W1:()=>o,_u:()=>s,br:()=>r,cC:()=>c,fC:()=>S,kR:()=>i,pA:()=>p,yY:()=>d})
var a=n(271359)
const i=54,r=12,s=58,o=65,l=2,c=l+1,d=l+1,u=1050,m=1060
var p
!function(e){e[e.MODAL=1050]="MODAL"
e[e.DROPDOWN=1051]="DROPDOWN"
e[e.DATE_PICKER=1052]="DATE_PICKER"
e[e.TOOLTIP=1060]="TOOLTIP"
e[e.NOTIFICATION=1060]="NOTIFICATION"}(p||(p={}))
const h=a.Uq,E=Math.ceil(11.9),S={lineHeight:`${Math.floor(1.5*E)+10}px`,verticalAlign:"middle"},T=4},634168:(e,t,n)=>{n.d(t,{De:()=>m,HZ:()=>f,Hw:()=>c,JU:()=>S,O6:()=>h,Qc:()=>d,S1:()=>u,V6:()=>T,XW:()=>s,Yq:()=>I,_O:()=>A,aM:()=>l,bq:()=>r,g3:()=>p,iK:()=>retinaQueryWrapper,lC:()=>o,n6:()=>multiLineEllipsisText,pF:()=>E,wj:()=>i,xb:()=>g})
var a=n(271359)
const i={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},multiLineEllipsisText=e=>({overflow:"hidden",whiteSpace:"pre-wrap",overflowWrap:"break-word",textOverflow:"ellispis",WebkitLineClamp:e,WebkitBoxOrient:"vertical",display:"-webkit-box"}),r={alignItems:"center",display:"flex",justifyContent:"space-between"},s={marginBottom:"4px"},o={marginLeft:"4px"},l={marginRight:"4px"},c={marginBottom:"20px"},d={marginBottom:"15px"},u={marginTop:"10px"},m={marginBottom:"10px"},p={marginLeft:"10px"},h={marginRight:"10px"},E={marginBottom:"0"},S={color:a.TG,cursor:"default"},T={color:a.TG},g={borderWidth:"1px",borderStyle:"solid",borderColor:a.tN,borderRadius:"4px"},f={margin:0,padding:0,cursor:"unset"},I="only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)",retinaQueryWrapper=e=>({[`@media ${I}`]:e}),A={dangerColor:a.Zl,warningColor:a.$S,darkWarningColor:a.ud,successColor:a.ZA,primaryColor:a.t0}},815949:(e,t,n)=>{n.d(t,{$v:()=>delete_,AV:()=>setContainerNameTemplatePartsWithDataMods,FM:()=>updateTagSchemaCollaborators,GE:()=>updatedRequiredLinkEntitySchemaFieldPath,JY:()=>createWithBatchSchema,KG:()=>resetSavingState,Ue:()=>create,Vx:()=>update,YP:()=>setNameTemplateParts,ey:()=>fetchOrderedPathOptions,he:()=>fetch,lS:()=>exportSpreadsheetTemplate,wr:()=>setHoistedFields})
var a=n(64558),i=n(531041),r=n(609630),s=n(348920),o=n(171471),l=n(787004),c=n(343748),d=n(518352),u=n(699418),m=n(681896),p=n(91092),h=n(947730),E=n(974913),S=n(386382),T=n(276281),g=n(684503)
function fetch(){h.Z.dispatch({actionType:l.mIl})
return g.he().done((e=>{h.Z.dispatch({actionType:l.v74,tagSchemas:e.data})})).fail((e=>{h.Z.dispatch({actionType:l.VZD})
E.ZP.notifyError(e)}))}function delete_(e){g.$v(e).done((()=>{h.Z.dispatch({actionType:l.aoq,tagSchemaId:e})
E.ZP.success("Schema deleted.")})).fail((e=>{E.ZP.notifyError(e)}))}function create(e){return function _createWithXHR(e){h.Z.dispatch({actionType:l.tXe})
return g.Ue(e).done((e=>{h.Z.dispatch({actionType:l.ijz,newTagSchema:e})
E.ZP.success("Created schema successfully.")})).fail((e=>{h.Z.dispatch({actionType:l.eUX})
E.ZP.notifyError(e)}))}(e)}function createWithBatchSchema(e){return create(e).then((e=>{T.K3({tagSchemaId:e.id})
return e}))}function _updateWithXHR(e,t){h.Z.dispatch({actionType:l.tXe})
return g.Vx(e,t).done((t=>{h.Z.dispatch({actionType:l.V$H,tagSchema:t.tagSchema})
E.ZP.success("Updated schema successfully.")
const n=i.default.pluck(u.ZP.get().filter((t=>function __guard__(e,t){return null!=e?t(e):void 0}("function"==typeof t.model?t.model().tagSchema():void 0,(e=>e.id))===e)),"id")
c.bh(n).done((e=>{i.default.map(e.data,(({id:e,tags:n})=>{h.Z.dispatch({actionType:l.DQR,fileId:e,tags:n,tagSchema:t.tagSchema})}))}))
d.Z.invalidateAllFolders()})).fail((e=>{E.ZP.notifyError(e,{duration:8})
h.Z.dispatch({actionType:l.eUX})}))}function update(e,t){return _updateWithXHR(e,t)}function resetSavingState(){h.Z.dispatch({actionType:l.nxe})}function setNameTemplateParts(e,t,n){h.Z.dispatch({actionType:l.tXe})
g.YP(e,t,n).done((e=>{h.Z.dispatch({actionType:l.V$H,tagSchema:e.tagSchema})
E.ZP.success("Updated name template.")})).fail((e=>{E.ZP.notifyError(e)
h.Z.dispatch({actionType:l.eUX})}))}async function setContainerNameTemplatePartsWithDataMods(e,t,n){const i=(0,S.P_)({apiIds:[e],action:S.wV.MODIFY})
return await(0,r.GE)({changeSummary:i,onRequestClose:a.ZT,onRequestSubmit:()=>{(function setContainerNameTemplateParts(e,t){h.Z.dispatch({actionType:l.tXe})
return g.Lp(e,t).then((e=>{h.Z.dispatch({actionType:l.V$H,tagSchema:e.tagSchema})
E.ZP.success("Updated container name template.")
return e})).catch((e=>{E.ZP.notifyError(e)
h.Z.dispatch({actionType:l.eUX})
return{tagSchema:null,nameTemplate:null}}))})(e,t).then(n)}},s.ZP.REGISTRY_SETTINGS_ENABLE_DATA_MOD_REASONS,{module:"SAMPLES",actionOrigin:o.D2.SETTINGS_ENTITY_SCHEMA_PAGE,modifiedAction:S.wV.MODIFY,numModifiedTotalItems:1,entryId:null})}function fetchOrderedPathOptions(e){h.Z.dispatch({actionType:l.Ss9,tagSchemaId:e})
g.ey(e).done((t=>{h.Z.dispatch({actionType:l.a3x,tagSchemaId:e,targetSchemaToPaths:t.targetSchemaToPaths})})).fail((()=>{h.Z.dispatch({actionType:l.h_U,tagSchemaId:e})}))}function setHoistedFields(e,t){h.Z.dispatch({actionType:l.$hB,tagSchemaId:e})
g.wr(e,t).done((e=>{h.Z.dispatch({actionType:l.gkL,tagSchema:e.tagSchema})
E.ZP.success("Successfully modified hoisted fields.")})).fail((e=>{E.ZP.notifyError(e)
h.Z.dispatch({actionType:l.Ouf})}))}function exportSpreadsheetTemplate(e){const t=i.default.uniqueId("export-spreadsheet-template-")
E.ZP.info("Exporting...",{id:t,duration:0})
g.lS(e).then((e=>{window.location.href=e.url
E.ZP.success("Export complete. Downloading...",{id:t})})).catch((e=>{E.ZP.close(t)
E.ZP.notifyError(e,{id:t})}))}async function updatedRequiredLinkEntitySchemaFieldPath(e,t){const n=await g.GE(e,t)
h.Z.dispatch({actionType:l.V$H,tagSchema:n.tagSchema})
E.ZP.success("Updated parent lineage enforcement.")}async function updateTagSchemaCollaborators(e,t){const n=await g._C(e,t);(0,m.writeFragmentsToCache)((0,p.f)("CollaboratorInfo"),[n.tagSchema])}},684503:(e,t,n)=>{n.d(t,{$v:()=>delete_,GE:()=>updatedRequiredLinkEntitySchemaFieldPath,Lp:()=>setContainerNameTemplateParts,Re:()=>bulkUnarchive,Ue:()=>create,Vx:()=>update,YP:()=>setNameTemplateParts,_C:()=>updateCollaborators,ey:()=>fetchOrderedPathOptions,fn:()=>unstar,gB:()=>embedInsights,h_:()=>star,he:()=>fetch,lS:()=>exportSpreadsheetTemplate,sm:()=>fetchStarred,uc:()=>bulkArchive,wr:()=>setHoistedFields})
var a=n(771398),i=n(8747)
function fetch(){return a.xA("/1/api/tag-schemas/")}function delete_(e){return a.$v({url:`/1/api/tag-schemas/${e}`})}function bulkArchive(e,t){return a.ty({url:"/1/api/tag-schemas:bulk-archive",data:{ids:e,purpose:t}})}function bulkUnarchive(e){return a.ty({url:"/1/api/tag-schemas:bulk-unarchive",data:{ids:e}})}function star(e){return a.ty({url:"/1/api/tag-schemas:star",data:{tagSchemaIds:e}})}function unstar(e){return a.ty({url:"/1/api/tag-schemas:unstar",data:{tagSchemaIds:e}})}function fetchStarred(){return a.xA("/1/api/tag-schemas/starred")}function create(e){return a.ty({url:"/1/api/tag-schemas/",data:e})}function update(e,t){return i.by({contentType:"application/json",data:JSON.stringify(t),type:"POST",dataType:"json",url:`/1/api/tag-schemas/${e}/actions/update`})}function setNameTemplateParts(e,t,n){return a.ty({url:`/1/api/tag-schemas/${e}/actions/set-name-template`,data:{nameTemplateParts:t,shouldOrderNamePartsBySequence:n}})}function setContainerNameTemplateParts(e,t){return a.s0({url:`/1/api/tag-schemas/${e}/actions/set-container-name-template`,data:{nameTemplateParts:t}})}function fetchOrderedPathOptions(e){return a.xA(`/1/api/tag-schemas/${e}/ordered-path-options`)}function setHoistedFields(e,t){return a.ty({url:`/1/api/tag-schemas/${e}/actions/set-hoisted-fields`,data:{hoistedTagSchemaGraphs:t}})}function embedInsights(e,t){return a.s0({url:`/1/api/tag-schemas/${e}:embed-insights`,data:t})}function updateCollaborators(e,t){return a.Ry({url:`/1/api/tag-schemas/${e}/collaborators`,data:t})}function exportSpreadsheetTemplate(e){return i.s0({url:`/1/api/tag-schemas/${e}:export-spreadsheet-template`})}function updatedRequiredLinkEntitySchemaFieldPath(e,t){return a.s0({url:"/1/api/tag-schemas/fields:set-entity-schema-field-path",data:{entityLinkFieldId:e,schemaFieldEdges:t}})}},671509:(e,t,n)=>{n.d(t,{V:()=>createUsers,i:()=>openTenantAdminPage})
var a=n(924768),i=n(974913),r=n(505074),s=n(408244)
function openTenantAdminPage(){a.Nc(r.UA.TENANT_ADMIN_SCREEN)}async function createUsers(e,t,n,a,r){await s.V8(e,t,n,a,r)
i.ZP.success("Created users successfully.")}},408244:(e,t,n)=>{n.d(t,{V8:()=>createUsers,Vx:()=>update,XO:()=>updateTenantAdmins,wf:()=>updateConfigs})
var a=n(348920),i=n(545082),r=n(771398),s=n(8747)
function updateTenantAdmins(e,t){return r.Ry({url:`/1/api/tenants/${e}/admins`,data:t})}function createUsers(e,t,n,r,o){let l=null
t&&(l=t.map((e=>({[i.zA.EMAIL]:e.EMAIL,[i.zA.NAME]:e.NAME,[i.zA.HANDLE]:e.HANDLE}))))
return s.ty({url:`/1/api/tenants/${a.ZP.TENANT_NAME}:create-users`,data:{usersSpreadsheetURL:e,userInfos:l,organizationInfos:n,teamInfos:r,shouldSendEmails:o}})}function update(e,t){return r.Ry({url:`/1/api/tenants/${e}`,data:t})}function updateConfigs(e){return r.s0({url:"/1/api/tenant:update-configs",data:e})}},988477:(e,t,n)=>{n.d(t,{$6:()=>isAccessLevelHigher,KV:()=>filterCapabilitiesFromBeingProvisioned,Mr:()=>makeCapabilityKeyToDistinctAccessLevels,P1:()=>haveCapabilitiesChanged,Tp:()=>sortReleasedCapabilitiesByOnboardingOrder,vy:()=>makeEditableCapabilitiesForDisplay})
var a=n(531041),i=n(41706),r=n(814099),s=n(920287),o=n(348920),l=n(256605)
function getAccessLevelForDropdown(e,t){const n=t.get(e)
return n&&0!==n.size?n.size>1?i.dm:n.values().next().value:i.uv.NO_ACCESS}function makeEditableCapabilitiesForDisplay(e,t,n){return t.filter((e=>n||e.isEnabled)).map((t=>({...t,accessLevel:getAccessLevelForDropdown(t.key,e),edited:!1})))}function makeCapabilityKeyToDistinctAccessLevels(e,t,n){const a=function makeCapabilityKeyToAllAccessLevels(e,t){return e.reduce(((e,n)=>{const a=t.filter((e=>e.capability.key===n.key)).map((e=>e.accessLevel))
e.set(n.key,a)
return e}),new Map)}(e,t),i=new Map
a.forEach(((e,t)=>{e.length<n&&e.push(l.kI.NO_ACCESS)
i.set(t,new Set(e))}))
return i}function isAccessLevelHigher(e,t){return i.ji.indexOf(e)>i.ji.indexOf(t)}function filterCapabilitiesFromBeingProvisioned(e){return e.filter((e=>e.accessLevel!==i.dm&&!r.Bz.includes(e.key)))}function sortReleasedCapabilitiesByOnboardingOrder(e){const t=function filterToReleasedCapabilites(e){return e.filter((e=>o.ZP.IDENTITY_ENABLE_GATING_AND_PROVISIONING_IN_DEVELOPMENT_CAPABILITIES||!(0,s.io)().includes(e.key)))}(e),n=function sortCapabilitiesByOnboardingOrder(e){return e.slice().sort(((e,t)=>r.PM.indexOf(e.key)-r.PM.indexOf(t.key)))}(t)
return n}function haveCapabilitiesChanged(e,t){return a.default.any(e,(e=>{const n=t.find((t=>t.key===e.key))
return e.accessLevel!==n.accessLevel}))}},505074:(e,t,n)=>{n.d(t,{AY:()=>h,E1:()=>p,J7:()=>E,Jt:()=>r,Lm:()=>u,Sf:()=>d,UA:()=>a,UT:()=>m,V8:()=>c,WG:()=>s,oI:()=>S,pY:()=>l,vI:()=>o})
var a,i=n(348920)
!function(e){e.TENANT_ADMIN_SCREEN="TENANT_ADMIN_SCREEN"}(a||(a={}))
const r=[a.TENANT_ADMIN_SCREEN]
var s
!function(e){e.ORGANIZATIONS_TAB="ORGANIZATIONS_TAB"
e.TEAMS_TAB="TEAMS_TAB"
e.USERS_TAB="USERS_TAB"
e.LICENSES_TAB="LICENSES_TAB"
e.SETTINGS_TAB="SETTINGS_TAB"
e.BENCHLING_APPS_TAB="BENCHLING_APPS_TAB"}(s||(s={}))
const o={organizations:s.ORGANIZATIONS_TAB,teams:s.TEAMS_TAB,users:s.USERS_TAB,licenses:s.LICENSES_TAB,settings:s.SETTINGS_TAB,apps:s.BENCHLING_APPS_TAB},l={ORGANIZATIONS_TAB:"organizations",TEAMS_TAB:"teams",USERS_TAB:"users",LICENSES_TAB:"licenses",SETTINGS_TAB:"settings",BENCHLING_APPS_TAB:"apps"},c={ORGANIZATIONS_TAB:"Organizations",TEAMS_TAB:"Teams",USERS_TAB:"Users",LICENSES_TAB:"Licenses",SETTINGS_TAB:"Settings",BENCHLING_APPS_TAB:"Apps"},d=[s.ORGANIZATIONS_TAB,...i.ZP.ENABLE_TEAMS?[s.TEAMS_TAB]:[],s.USERS_TAB,...i.ZP.EXTERNAL_ADMIN_ENABLE_LICENSE_MANAGEMENT?[s.LICENSES_TAB]:[],...i.ZP.ENABLE_BENCHLING_APPS?[s.BENCHLING_APPS_TAB]:[],s.SETTINGS_TAB]
var u
!function(e){e.GENERAL_SETTINGS_TAB="GENERAL_SETTINGS_TAB"
e.IP_ALLOWLISTS_TAB="IP_ALLOWLISTS_TAB"
e.CONFIGURATIONS_TAB="CONFIGURATIONS_TAB"
e.APPLICATIONS_TAB="APPLICATIONS_TAB"
e.DATA_MODIFICATIONS_TAB="DATA_MODIFICATIONS_TAB"}(u||(u={}))
const m={GENERAL_SETTINGS_TAB:"General Settings",IP_ALLOWLISTS_TAB:"IP Allowlists",CONFIGURATIONS_TAB:"Configurations",APPLICATIONS_TAB:"Application Provisioning",DATA_MODIFICATIONS_TAB:"Data Modifications"},p=[u.GENERAL_SETTINGS_TAB,u.IP_ALLOWLISTS_TAB,u.CONFIGURATIONS_TAB,u.APPLICATIONS_TAB,u.DATA_MODIFICATIONS_TAB],h={SECURITY:"Security",DATA_MANAGEMENT:"Data Management",DATA_MODIFICATION:"Data Modification"}
var E
!function(e){e.CONFIG_OPTION="ConfigOption"
e.CONFIG_FLAG="ConfigFlag"
e.CONFIG_STRING="ConfigString"
e.CONFIG_INTEGER="ConfigInteger"
e.CONFIG_SINGLE_SELECT="ConfigSingleSelect"
e.CONFIG_IP_NETWORK_LIST="ConfigIPNetworkList"
e.CONFIG_AUTO_ADD_ORG="ConfigAutoAddOrg"
e.CONFIG_MULTI_SELECT="ConfigMultiSelect"}(E||(E={}))
const S="ENABLE_COPY_API_ID"},231496:(e,t,n)=>{n.d(t,{I:()=>a,X:()=>changeActiveTab})
var a
!function(e){e.TENANT_ADMIN_CHANGE_ACTIVE_TAB="TENANT_ADMIN_CHANGE_ACTIVE_TAB"}(a||(a={}))
function changeActiveTab(e){return{type:a.TENANT_ADMIN_CHANGE_ACTIVE_TAB,tab:e}}},39829:(e,t,n)=>{n.d(t,{Yv:()=>TenantAdminStateSelector,ZP:()=>reduceTenantAdminUI})
var a=n(505074),i=n(231496)
const r=a.WG.ORGANIZATIONS_TAB
class TenantAdminStateSelector{constructor(e){this.tenantState=e.ui.tenantAdmin}getActiveTab(){return this.tenantState.activeTab||r}}const s={activeTab:r}
function reduceTenantAdminUI(e=s,t){return t.type===i.I.TENANT_ADMIN_CHANGE_ACTIVE_TAB?{...e,activeTab:t.tab}:e}},389528:(e,t,n)=>{n.d(t,{C:()=>s,Z:()=>r})
var a=n(602652),i=n.n(a)
const r=i().shape({component:i().string,element:i().string,key:i().string,index:i().string}),s=r},285290:(e,t,n)=>{n.d(t,{D3:()=>s,G2:()=>o,NK:()=>m,Nn:()=>r,R:()=>l,Rj:()=>c,Vb:()=>u,_R:()=>i,bH:()=>h,n:()=>d,t:()=>p})
var a=n(459830)
const i="history",r="lineage",s="information",o="tags",l="primers",c="links",d="new-digest",u="my-digests",m="annotations",p="translations",h={[a.SEQUENCE]:["featurePanel","restrictionPanel","primerPanel","informationPanel","historyPanel","alignmentPanel","genomeEngineeringPanel"],[a.SequenceSubtype.RNA_SEQUENCE]:["featurePanel","restrictionPanel","primerPanel","informationPanel","historyPanel","alignmentPanel"],[a.SequenceSubtype.DNA_OLIGO]:["featurePanel","informationPanel","historyPanel"],[a.SequenceSubtype.RNA_OLIGO]:["featurePanel","informationPanel","historyPanel"],[a.ENTRY]:["entryInformationPanel","entryHistoryPanel"],[a.PROTOCOL]:["protocolInformationPanel","protocolHistoryPanel"],[a.PROTEIN]:["proteinAnnotationsPanel","proteinHistoryPanel","proteinInformationPanel","proteinAlignmentPanel"],[a.SUBTEMPLATE]:["subtemplateInformationPanel","subtemplateHistoryPanel"],[a.TEMPLATE]:["templateInformationPanel","templateHistoryPanel"],[a.BASIC_FOLDER_ITEM]:["basicFolderItemInformationPanel","complexPolymerHistoryPanel"],[a.STAGE_ENTRY]:["stageEntryInformationPanel","stageEntryHistoryPanel"],[a.MOLECULE]:["moleculeHistoryPanel","moleculeInformationPanel"]}},194119:(e,t,n)=>{n.d(t,{$d:()=>openCreateNewTranslation,BE:()=>updateAnnotationEditData,CB:()=>a,WJ:()=>cancelCreateNewAnnotation,XD:()=>selectAnnotation,Z9:()=>closeSequence,ml:()=>openCreateNewAnnotation,mw:()=>focusAnnotationFormComplete,u$:()=>changeSelectionRegion,xe:()=>cancelCreateNewTranslation})
var a
!function(e){e.CLOSE_SEQUENCE="CLOSE_SEQUENCE"
e.CHANGE_SELECTION_RANGE="CHANGE_SELECTION_RANGE"
e.SELECT_ANNOTATION="SELECT_ANNOTATION"
e.UPDATE_ANNOTATION_EDIT_DATA="UPDATE_ANNOTATION_EDIT_DATA"
e.OPEN_CREATE_NEW_ANNOTATION="OPEN_CREATE_NEW_ANNOTATION"
e.CANCEL_CREATE_NEW_ANNOTATION="CANCEL_CREATE_NEW_ANNOTATION"
e.FOCUS_ANNOTATION_FORM_COMPLETE="FOCUS_ANNOTATION_FORM_COMPLETE"
e.OPEN_CREATE_NEW_TRANSLATION="OPEN_CREATE_NEW_TRANSLATION"
e.CANCEL_CREATE_NEW_TRANSLATION="CANCEL_CREATE_NEW_TRANSLATION"}(a||(a={}))
function closeSequence(e){return{type:a.CLOSE_SEQUENCE,sequenceId:e}}function changeSelectionRegion(e,t,n){return{type:a.CHANGE_SELECTION_RANGE,sequenceId:e,start:t,end:n}}function selectAnnotation(e,t){return{type:a.SELECT_ANNOTATION,sequenceId:e,data:t}}function updateAnnotationEditData(e,t){return{type:a.UPDATE_ANNOTATION_EDIT_DATA,sequenceId:e,data:t}}function openCreateNewAnnotation(e){return{type:a.OPEN_CREATE_NEW_ANNOTATION,sequenceId:e}}function cancelCreateNewAnnotation(e){return{type:a.CANCEL_CREATE_NEW_ANNOTATION,sequenceId:e}}function focusAnnotationFormComplete(e){return{type:a.FOCUS_ANNOTATION_FORM_COMPLETE,sequenceId:e}}function openCreateNewTranslation(e,t){return{type:a.OPEN_CREATE_NEW_TRANSLATION,sequenceId:e,strand:null!=t?t:1}}function cancelCreateNewTranslation(e){return{type:a.CANCEL_CREATE_NEW_TRANSLATION,sequenceId:e}}},195309:(e,t,n)=>{n.d(t,{Jv:()=>useFeaturePanelStateBySequence,ZP:()=>reduceFeaturePanelUI,z4:()=>useAnnotationPanelUIBySequence})
var a=n(512902),i=n(212300),r=n(921554),s=n(38317),o=n(194119)
const l={isCreateActive:!1,name:"",annotationType:"",start:null,end:null,color:r.fT,strand:1,notes:"",customFields:[],shouldFocus:!1},c={isCreateActive:!1,initialStrand:1},d={},u={selectionStart:0,selectionEnd:null,annotationEditData:l,translationPanelState:c}
function reduceFeaturePanelUIByTab(e=u,t){switch(t.type){case o.CB.CHANGE_SELECTION_RANGE:return(0,a.ZP)(e,(n=>{n.selectionStart=t.start
n.selectionEnd=t.end
if(e.annotationEditData.isCreateActive){n.annotationEditData.start=t.start
n.annotationEditData.end=t.end}}))
case o.CB.SELECT_ANNOTATION:return(0,a.ZP)(e,(e=>{e.annotationEditData=t.data}))
case o.CB.UPDATE_ANNOTATION_EDIT_DATA:return(0,a.ZP)(e,(n=>{n.annotationEditData={...e.annotationEditData,...t.data}}))
case o.CB.OPEN_CREATE_NEW_ANNOTATION:return(0,a.ZP)(e,(t=>{t.annotationEditData={...l,isCreateActive:!0,start:e.selectionStart,end:e.selectionEnd,color:(0,r.wC)(),shouldFocus:!0}}))
case o.CB.CANCEL_CREATE_NEW_ANNOTATION:return(0,a.ZP)(e,(e=>{e.annotationEditData.isCreateActive=!1
e.annotationEditData.shouldFocus=!1}))
case o.CB.FOCUS_ANNOTATION_FORM_COMPLETE:return(0,a.ZP)(e,(e=>{e.annotationEditData.shouldFocus=!1}))
case o.CB.OPEN_CREATE_NEW_TRANSLATION:return(0,a.ZP)(e,(e=>{e.translationPanelState.isCreateActive=!0
e.translationPanelState.initialStrand=t.strand}))
case o.CB.CANCEL_CREATE_NEW_TRANSLATION:return(0,a.ZP)(e,(e=>{e.translationPanelState.isCreateActive=!1
e.translationPanelState.initialStrand=c.initialStrand}))
default:return e}}function reduceFeaturePanelUI(e=d,t){var n
switch(t.type){case o.CB.CLOSE_SEQUENCE:return(0,s.C)(e,t.sequenceId)
case o.CB.CHANGE_SELECTION_RANGE:case o.CB.SELECT_ANNOTATION:case o.CB.UPDATE_ANNOTATION_EDIT_DATA:case o.CB.OPEN_CREATE_NEW_ANNOTATION:case o.CB.CANCEL_CREATE_NEW_ANNOTATION:case o.CB.FOCUS_ANNOTATION_FORM_COMPLETE:case o.CB.OPEN_CREATE_NEW_TRANSLATION:case o.CB.CANCEL_CREATE_NEW_TRANSLATION:return{...e,[t.sequenceId]:reduceFeaturePanelUIByTab(null!==(n=e[t.sequenceId])&&void 0!==n?n:u,t)}
default:return e}}function useAnnotationPanelUIBySequence(e){return(0,i.v9)((t=>{var n,a
return null!==(a=null===(n=t.ui.molbio.featurePanelUI[e])||void 0===n?void 0:n.annotationEditData)&&void 0!==a?a:l}))}function useFeaturePanelStateBySequence(e){return(0,i.v9)((t=>{var n
return null!==(n=t.ui.molbio.featurePanelUI[e])&&void 0!==n?n:u}))}},532726:(e,t,n)=>{n.d(t,{Je:()=>updateTrayTask,QH:()=>removeTrayTask,WF:()=>onProgressFor,jY:()=>onMultiProgressFor,zy:()=>createTrayTask})
var a=n(64558),i=n(531041),r=n(178570),s=n(787004),o=n(947730),l=n(782649),c=n(826478),d=n(813757)
function getProgress(e){return i.default.isNumber(e)?e:e.lengthComputable?75*e.loaded/e.total:d.u9}function createTrayTask(e){var t
const n=(0,r.Z)()
e.hidden||l.M((0,a.cg)({id:n,type:c.pC.INFO,message:e.heading,progress:e.progress||0,isCloseable:!1,duration:e.duration||0,actions:null!==(t=e.actions)&&void 0!==t?t:[]}))
!function addTrayTask(e,t){o.Z.dispatch({actionType:s.Rz1,taskId:e,options:t})}(n,e)
return n}function onProgressFor(e){return t=>{updateTrayTask(e,{progress:getProgress(t)})}}function onMultiProgressFor(e,t){const n=Array(t).fill(0)
return(a,i,r)=>{n[a]=getProgress(r)
const s=n.reduce(((e,t)=>e+t))/t
updateTrayTask(e,{progress:s})}}function updateTrayTask(e,t){const n=(0,a.cg)({id:e,message:t.subheading||t.heading||void 0,duration:t.duration||0})
t.progress===d.MR?i.default.extend(n,{message:t.error,progress:null,isCloseable:!0,type:c.pC.DANGER}):t.progress===d.qJ?i.default.extend(n,{actionText:t.actions?void 0:"Open",onActionClick:t.actions?void 0:t.onHeadingClick||t.onSubheadingClick||void 0,progress:null,isCloseable:!0,type:c.pC.INFO,actions:t.actions}):"progress"in t&&i.default.extend(n,{progress:t.progress,isCloseable:!1,type:c.pC.INFO})
l.M(n)
o.Z.dispatch({actionType:s.Vxl,taskId:e,options:t})}function removeTrayTask(e){l.y(e)
o.Z.dispatch({actionType:s.qug,taskId:e})}},305466:(e,t,n)=>{n.d(t,{ZP:()=>E})
var a=n(764403),i=n.n(a),r=n(250965),s=n.n(r),o=n(602652),l=n(989526),c=n(573961),d=n(676276),u=n(263137),m=n(865486),p=n(348881),h=n(145007)
class _AbsoluteDropdownContainer extends l.Component{constructor(){super(...arguments)
this._isMounted=!1
this.mount=null
this._handleBackdroplessScroll=(0,h.Z)((()=>{this._isMounted&&this.props.noBackdrop&&this.props.open&&this.renderAndPositionMenu()}),10)
this._handleBackdroplessMouseDown=e=>{if(this.props.noBackdrop&&this.props.open){const t=c.findDOMNode(this)
t&&e.target&&t.contains(e.target)&&this.props.onRequestClose()}}
this.mouseDownHandler=e=>{s()(e.target).hasClass("backdrop")&&this.props.onRequestClose()}
this.clickHandler=e=>{this.props.shouldCloseOnInsideClick&&this.props.onRequestClose()}
this.resize=()=>{this._isMounted&&this.props.open&&this.renderAndPositionMenu()}
this.resizeHandler=(0,h.Z)(this.resize,10)}componentDidMount(){this._isMounted=!0
this.handleOpenChange(!1,this.props.open)
window.addEventListener("scroll",this._handleBackdroplessScroll,!0)
window.addEventListener("mousedown",this._handleBackdroplessMouseDown)}componentDidUpdate(e){this.handleOpenChange(e.open,this.props.open)
e.open===this.props.open&&!0===this.props.open&&this.renderAndPositionMenu()}componentWillUnmount(){this._isMounted=!1
window.removeEventListener("scroll",this._handleBackdroplessScroll,!0)
window.removeEventListener("mousedown",this._handleBackdroplessMouseDown)
this.handleOpenChange(this.props.open,!1)}handleOpenChange(e,t){if(e!==t)if(t){this.mount=document.createElement("div")
this.renderAndPositionMenu()
document.body.appendChild(this.mount)
window.addEventListener("resize",this.resizeHandler)}else{window.removeEventListener("resize",this.resizeHandler)
if(this.mount){document.body.removeChild(this.mount)
c.unmountComponentAtNode(this.mount)}}}shouldHideMenu(e){return!!this.props.noBackdrop&&!(0,p.U)(e)}renderAndPositionMenu(){const e=c.findDOMNode(this),t=this.shouldHideMenu(e),n=e.getBoundingClientRect(),a=!this.props.alwaysDropDown&&n.top>s()(window).height()/2||this.props.alwaysDropUp,r=!a&&this.props.canDropUnder,o=(a?n.top:s()(window).height()-n.bottom)-m.Yt,p=this.props.menu&&l.cloneElement(this.props.menu,{style:{...this.props.menu.props.style,maxHeight:o},dropup:a}),h=l.createElement("div",{className:i()("absoluteDropdownContainer",{"absoluteDropdownContainer--noBackdrop":this.props.noBackdrop}),style:{position:"fixed",left:n.left,top:r?n.bottom:n.top,display:t?"none":"block"},onMouseDown:this.mouseDownHandler,onClick:this.clickHandler,...(0,u.Z)({component:"AbsoluteDropdownContainer",element:"root"})},!this.props.noBackdrop&&l.createElement("div",{className:"backdrop",...(0,u.Z)({component:"AbsoluteDropdownContainer",element:"backdrop"})}),l.createElement("div",{style:{width:n.width,height:n.height},className:i()("dropdown open is-open",this.props.className,{"drop-up":a})},p));(0,d.A9)(h,this.mount)}render(){return this.props.children}}_AbsoluteDropdownContainer.propTypes={children:o.node.isRequired,className:o.string,open:o.bool.isRequired,onRequestClose:o.func.isRequired,menu:(e,...t)=>e.open?o.node.isRequired(e,...t):null,shouldCloseOnInsideClick:o.bool.isRequired,canDropUnder:o.bool.isRequired}
_AbsoluteDropdownContainer.defaultProps={shouldCloseOnInsideClick:!1,canDropUnder:!1}
let E=_AbsoluteDropdownContainer},317255:(e,t,n)=>{n.d(t,{Z:()=>Accordion,a:()=>preventAccordionToggleProps})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(531041),l=n(263137),c=n(271359),d=n(36424)
function preventAccordionToggleProps(){return{onClick:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation()}}}function Accordion({header:e,headerStyle:t="initial",children:n,isOpenByDefault:i=!1,dataTestAttrs:c={component:"Accordion",element:"root"},onToggle:m=o.noop,expandIconPosition:p="left",headerSpacing:h="default"}){const[E,S]=(0,s.useState)(i),T=E?"triangle-down":"triangle-right",g=s.createElement(d.Z,{icon:T,className:r()((0,a.iv)(u.accordionIcon,"gray"===t&&u.accordionHeaderGrayIcon),"notebook-export--accordion-icon",{"notebook-export--accordion-header-gray-icon":"gray"===t})})
return s.createElement("div",{className:r()((0,a.iv)(u.accordionWrapper,"gray"===t&&u.accordionWrapperGray),"notebook-export--accordion-wrapper",{"notebook-export--accordion-wrapper-gray":"gray"===t}),...(0,l.Z)(c)},s.createElement("div",{className:r()((0,a.iv)(u.accordionButton),"notebook-export--accordion-button"),role:"button",tabIndex:0,onClick:()=>{S(!E)
m(!E)},onKeyDown:e=>{if("Enter"===e.key||" "===e.key){S(!E)
m(!E)}},...(0,l.Z)({component:"Accordion",element:"toggleButton"})},s.createElement("div",{className:r()((0,a.iv)(u.accordionHeader,"gray"===t&&u.accordionHeaderGray,"default"===h&&u.accordionHeaderSpacing),"notebook-export--accordion-header",{"notebook-export--accordion-header-gray":"gray"===t},{"notebook-export--accordion-header-spacing":"default"===h})},"left"===p&&g,e,"right"===p&&g)),E&&s.createElement("div",{className:r()((0,a.iv)("default"===h&&u.accordionContents),{"notebook-export--accordion-contents":"default"===h}),...(0,l.Z)({component:"Accordion",element:"contents"})},n))}const u=a.mM.create({accordionWrapper:{borderBottom:`1px solid ${c.tN}`,":last-child":{borderBottom:"none"}},accordionWrapperGray:{borderBottom:"none",cursor:"default"},accordionButton:{width:"100%",boxShadow:"none"},accordionIcon:{color:c.TG,width:12},accordionHeaderGrayIcon:{color:c.pp,paddingLeft:10},accordionHeader:{display:"flex",flexDirection:"row",alignItems:"center"},accordionHeaderSpacing:{marginTop:16,marginBottom:16},accordionHeaderGray:{backgroundColor:c.bs,border:"transparent",boxShadow:`0px -2px 0px ${c.pF}`},accordionContents:{paddingBottom:16}})},586089:(e,t,n)=>{n.d(t,{Z:()=>Checkbox})
var a=n(692013),i=n(989526),r=n(634168)
function Checkbox({checked:e,disabled:t=!1,onChange:n}){return i.createElement("input",{type:"checkbox",checked:e,disabled:t,onChange:t?void 0:n,className:(0,a.iv)(s.wrapper),readOnly:!0})}const s=a.mM.create({wrapper:{...r.HZ,width:16,height:16,":disabled":{cursor:"not-allowed"}}})},262660:(e,t,n)=>{n.d(t,{Z:()=>u})
var a=n(250965),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(573961),c=n(232606),d=n(99312)
class ClickOutWrapper extends o.Component{constructor(){super(...arguments)
this.handleBodyClick=e=>{const t=l.findDOMNode(this)
if(!(0,c.Gp)(null!=t,"Expected component to be mounted"))return
const n=i()(t),a=i()(e.target).closest(n).length>0
!this.props.shouldCloseOnInsideClick&&a||this.props.onClickOut()}}componentDidMount(){d.isBrowser&&window.addEventListener("click",this.handleBodyClick,!0)}componentWillUnmount(){d.isBrowser&&window.removeEventListener("click",this.handleBodyClick,!0)}render(){return this.props.children}}ClickOutWrapper.defaultProps={shouldCloseOnInsideClick:!1}
ClickOutWrapper.propTypes={children:s().element.isRequired,shouldCloseOnInsideClick:s().bool.isRequired,onClickOut:s().func.isRequired}
const u=ClickOutWrapper},512262:(e,t,n)=>{n.d(t,{Z:()=>ClipboardText})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(191537),c=n(974913),d=n(263137),u=n(868710),m=n(709691)
function ClipboardText({message:e="Successfully copied to the clipboard",children:t,className:n,clipboardData:a,onClick:r,tooltipPlacement:s=u.TQ.TOP,copyIconAlwaysVisible:p,disableTooltip:h}){return o.createElement("div",{className:i()("clipboardIcon-container",p&&"clipboardIcon--force-visibility",n),...(0,d.Z)({component:"ClipboardText",element:"root"})},t,o.createElement(u.ZP,{title:"Copy to clipboard",placement:s,disabled:h},o.createElement(m.Z,{value:a,notifyCopied:function notifyCopied(){c.ZP.success(e)},onClick:r},o.createElement(l.Z,{className:"clipboardIcon",icon:"copy"}))))}ClipboardText.propTypes={children:s().node.isRequired,clipboardData:s().string.isRequired,message:s().string,onClick:s().func}
ClipboardText.defaultProps={copyIconAlwaysVisible:!1,disableTooltip:!1}},271359:(e,t,n)=>{n.d(t,{$S:()=>L,CK:()=>Z,Cj:()=>m,Cl:()=>y,DM:()=>E,DO:()=>b,EL:()=>K,Ej:()=>f,Ft:()=>w,G$:()=>I,JF:()=>N,L3:()=>A,Nl:()=>P,Rl:()=>r,Ro:()=>p,TG:()=>l,Ug:()=>O,Uq:()=>Y,WA:()=>G,WR:()=>F,Wd:()=>H,Y:()=>M,Yb:()=>U,ZA:()=>x,Zl:()=>C,_p:()=>V,a7:()=>hexToRgba,aw:()=>_,bs:()=>u,dw:()=>q,hM:()=>R,hc:()=>o,iS:()=>g,ip:()=>h,mu:()=>S,nB:()=>k,nQ:()=>$,pF:()=>c,pp:()=>s,sB:()=>v,t0:()=>T,t4:()=>W,tN:()=>d,ud:()=>D,xO:()=>B})
var a=n(153686),i=n(232606)
const r=a.Il.GRAY_900,s=a.Il.GRAY_700,o=a.Il.GRAY_600,l=a.Il.GRAY_400,c=a.Il.GRAY_300,d=a.Il.GRAY_200,u=a.Il.GRAY_50,m="#FFFFFF",p=a.Il.BLUE_100,h=a.Il.BLUE_100,E=a.Il.BLUE_200,S=a.Il.BLUE_300,T=a.Il.BLUE_400,g=a.Il.BLUE_200,f=a.Il.BLUE_500,I=a.Il.BLUE_600,A=a.Il.RED_100,y=a.Il.RED_150,_=a.Il.RED_200,C=a.Il.RED_400,R=a.Il.RED_500,N=a.Il.RED_600,O="#600000",b=a.Il.ORANGE_100,v=a.Il.ORANGE_200,P=a.Il.ORANGE_300,L=a.Il.ORANGE_350,D=a.Il.ORANGE_400,M=a.Il.ORANGE_500,w=a.Il.ORANGE_600,F=a.Il.GREEN_100,k=a.Il.GREEN_200,U=a.Il.GREEN_300,x=a.Il.GREEN_400,B=a.Il.GREEN_500,Z=a.Il.GREEN_600,q=a.Il.PURPLE_100,G=a.Il.PURPLE_200,V=a.Il.PURPLE_300,H=a.Il.PURPLE_400,W=a.Il.PURPLE_500,Y=(a.Il.BRAND_ICE,a.Il.TEAL_400,a.Il.GRAY_500),$=(a.Il.FUCHSIA_500,a.Il.LIME_300),K=a.Il.GREEN_600
a.Il.PURPLE_400,a.Il.PURPLE_300
function hexToRgba(e,t=1){(0,i.Gp)(t>=0&&t<=1,"Alpha must be between 0 and 1")||(t=1);(0,i.Gp)(null!=e.match(/^#?[a-fA-F\d]{6}$/),"Invalid hex string provided")||(e="#FFFFFF")
const[n,a,r]=e.match(/[a-fA-F\d]{2}/g).map((e=>parseInt(e,16)))
return`${n}, ${a}, ${r}, ${t}`}},688319:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(989526),i=n(253075),r=n(876542),s=n(467922),o=n(10584)
class EditableDateField extends a.Component{constructor(){super(...arguments)
this.state={editingValue:this.props.value,isBeingEdited:!1}
this._handleChangeValue=e=>{this.setState({editingValue:e})}
this._handleCancel=()=>{this.setState({editingValue:this.props.value,isBeingEdited:!1})}
this._handleComplete=()=>{this.props.onChange(this.state.editingValue)
this.setState({editingValue:this.props.value,isBeingEdited:!1})}
this._handleEdit=()=>{this.setState({isBeingEdited:!0})}}UNSAFE_componentWillReceiveProps(e){this.state.isBeingEdited||this.setState({editingValue:e.value})}render(){return a.createElement(i.Z,{editor:a.createElement(r.Z,{autoFocus:!1,labelStyle:r.Z.LABEL_STYLES.HIDDEN,placeholder:"Date",onChange:this._handleChangeValue,value:this.state.editingValue}),isBeingEdited:this.state.isBeingEdited,isCompleteEnabled:!0,isWritable:!this.props.isDisabled,viewer:a.createElement(s.Z,{value:this.props.value?(0,o.UT)(this.props.value,{showTime:!1}):"",placeholder:this.props.placeholder}),onCancel:this._handleCancel,onComplete:this._handleComplete,onEdit:this._handleEdit})}}EditableDateField.defaultProps={isDisabled:!1}
const l=EditableDateField},898808:(e,t,n)=>{n.d(t,{ZP:()=>EditableItemTable})
var a=n(692013),i=n(764403),r=n.n(i),s=n(602652),o=n.n(s),l=n(989526),c=n(348920),d=n(675649),u=n(432128),m=n(263137),p=n(103593),h=n(59860),E=n(868710),S=n(334148),T=n(73374),g=n(476604),f=n(214984),I=n(20859)
const A=o().shape({})
function EditableItemTable(e){const renderNonItemRow=(e,t=0)=>e.values.map(((e,n)=>l.createElement("div",{key:`row ${t}, col ${n}`,className:"editableItemTable-content"},e))),t=e.columnHeaders.map(((e,t)=>l.createElement(p.Z,{key:`col ${t}`,sm:e.width,className:r()({"editableItemTable-primaryHeader":0===t})},e.name))),n=[l.createElement(p.Z,{key:"col content",sm:10},l.createElement(h.Z,null,t)),l.createElement(p.Z,{key:"col button",sm:2})],i=e.writable&&(e.onCreate||e.customCreateButton),s=e.tableName||i||e.rightSubheaderNode||e.leftSubheaderNode
return l.createElement("div",{...(0,m.Z)({component:"EditableItemTable",element:"root"})},s&&l.createElement("div",{className:"u-spacing-bottom"},l.createElement("div",{className:"u-small-spacing-bottom"},e.tableName&&l.createElement(T.R6,null,e.tableName)),l.createElement("div",{className:(0,a.iv)(y.subheader)},l.createElement("div",null,e.leftSubheaderNode),i&&(e.customCreateButton?e.customCreateButton:l.createElement(S.Co,{buttonStyle:S.ZJ.PRIMARY,onClick:e.onCreate,size:S.qE.SMALL,text:"Create",dataTestAttrs:{component:"EditableItemTable",element:"createButton"}})),null!=e.rightSubheaderNode&&l.createElement("div",null,e.rightSubheaderNode))),l.createElement(h.Z,{className:"editableItemTable-headerRow"},n),e.isLoading?renderNonItemRow({values:[l.createElement(g.b,null)]}):e.rows&&e.rows.length?e.rows.map(((t,n)=>null!=t.itemIndex?(t=>{const n=t.values.map(((n,a)=>l.createElement(p.Z,{key:`row ${t.itemIndex}, col ${a}`,sm:e.columnHeaders[a].width,className:"editableItemTable-content",dataTestAttrs:{component:"EditableItemRow",element:"contentCol"}},l.createElement(l.Fragment,null,t.values[a])))),a=[l.createElement(p.Z,{key:`content, row ${t.itemIndex}`,sm:10},l.createElement(h.Z,null,n)),l.createElement(p.Z,{key:`buttons, row ${t.itemIndex}`,sm:2,className:"editableItemTable-content"},e.writable&&l.createElement(ActionButtonGroup,{row:t,onArchive:e.onArchive,onDelete:e.onDelete,onUnarchive:e.onUnarchive,allowDeleteAfterArchive:e.allowDeleteAfterArchive}),void 0!==t.id&&Boolean(u.Z.get("ENABLE_COPY_API_ID"))&&l.createElement(ActionButton,{key:`copy-${t.itemIndex}`,icon:"note-code",itemIndex:t.itemIndex,onClick:()=>(0,I.Z)(t.id,{showToastOnSuccess:!0}),tooltipTitle:"Copy API ID",pointerClassName:"u-primary-pointer"}))]
return l.createElement(EditableItemRow,{key:`row ${t.itemIndex}`,className:t.isArchived?"u-faded":null,columns:a,itemIndex:t.itemIndex,getEditUrl:e.getEditUrl})})(t):renderNonItemRow(t,n))):renderNonItemRow({values:[l.createElement(l.Fragment,null,e.emptyMessage)]}))}function EditableItemRow({className:e,columns:t,itemIndex:n,getEditUrl:i}){const s=i(n)
return l.createElement("a",{href:null!=s?s:void 0,className:(0,a.iv)(y.rowLink),onClick:d.c4},l.createElement(h.Z,{dataTestAttrs:{component:"EditableItemRow",element:"row"},className:r()(e,f.DT,"editableItemTable-row u-pointer")},t))}function ActionButton({icon:e,itemIndex:t,onClick:n,tooltipTitle:a,pointerClassName:i}){return l.createElement(E.ZP,{title:a,container:"body"},l.createElement(f.ZP,{icon:e,className:r()("faded u-small-padding-left u-small-padding-right pull-right",i),onClick:e=>{e.stopPropagation()
e.preventDefault()
n(t)}}))}function ActionButtonGroup({row:e,onArchive:t,onDelete:n,onUnarchive:a,allowDeleteAfterArchive:i}){let r=null,s=null,o=null
c.ZP.ENABLE_ARCHIVING_V2&&a&&e.isArchived?r=l.createElement(ActionButton,{key:`unarchive-${e.itemIndex}`,icon:"unarchive",itemIndex:e.itemIndex,onClick:a,tooltipTitle:"Unarchive",pointerClassName:"u-danger-pointer"}):c.ZP.ENABLE_ARCHIVING_V2&&t&&!1!==e.isArchivable&&(s=l.createElement(ActionButton,{key:`archive-${e.itemIndex}`,icon:"archive",itemIndex:e.itemIndex,onClick:t,tooltipTitle:"Archive",pointerClassName:"u-danger-pointer"}))
!n||void 0!==e.isDeletable&&!0!==e.isDeletable||(o=l.createElement(ActionButton,{key:`delete-${e.itemIndex}`,icon:"format-delete",itemIndex:e.itemIndex,onClick:n,tooltipTitle:"Delete",pointerClassName:"u-danger-pointer"}))
return i?s||l.createElement(l.Fragment,null,r,o):s||r||o}ActionButton.propTypes={icon:o().string.isRequired,itemIndex:o().number.isRequired,onClick:o().func.isRequired,tooltipTitle:o().string.isRequired,pointerClassName:o().string.isRequired}
ActionButtonGroup.propTypes={onArchive:o().func,onDelete:o().func,onUnarchive:o().func,deleteAfterArchive:o().bool,row:A.isRequired}
const y=a.mM.create({rowLink:{display:"block",color:"inherit",textDecoration:"inherit"},subheader:{display:"flex",justifyContent:"space-between"}})},864480:(e,t,n)=>{n.d(t,{Q:()=>FeatureBannerItem,Z:()=>m})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(432128),c=n(73374),d=n(36424),u=n(194786)
function FeatureBanner(e){const[t,n]=(0,o.useState)(Boolean(null==e.seenBannerPreference||!l.Z.get(e.seenBannerPreference)))
return t?o.createElement(u.X2,null,o.createElement("div",{className:i()("featureBanner",e.className)},e.children,e.seenBannerPreference&&o.createElement(d.Z,{className:"featureBanner-remove",icon:"close",onClick:function handleDismiss(){e.seenBannerPreference&&l.Z.set(e.seenBannerPreference,!0)
n(!1)}}))):null}FeatureBanner.propTypes={children:s().node.isRequired,className:s().string,seenBannerPreference:s().string}
function FeatureBannerItem({imageSource:e,stepNumber:t,title:n,subtitle:a,oversized:r}){return o.createElement("div",{className:i()("featureBanner-item",{"featureBanner-title":r})},e&&o.createElement("img",{src:e,className:i()("featureBanner-icon",{"featureBanner-icon--large":r})}),t&&o.createElement("div",{className:"featureBanner-stepNumber featureBanner-stepNumber--large"},t),o.createElement("div",null,r?o.createElement(c.R6,null,n):o.createElement(c.Dx,null,n),o.createElement("div",{className:"featureBanner-subtitle"},a)))}FeatureBannerItem.propTypes={imageSource:s().string,oversized:s().bool.isRequired,stepNumber:(e,...t)=>{const n=s().number(e,...t)
return n||(e.stepNumber&&e.imageSource?new Error("Both stepNumber and imageSource specified"):null)},subtitle:s().string.isRequired,title:s().string.isRequired}
const m=FeatureBanner},678150:(e,t,n)=>{n.d(t,{Z:()=>FieldError})
var a=n(692013),i=n(989526),r=n(271359)
function FieldError({compact:e=!1,message:t=null}){return null==t?null:i.createElement("div",{className:(0,a.iv)(s.wrapper,e&&s.compact)},t)}const s=a.mM.create({wrapper:{color:r.JF,marginTop:2,marginBottom:8},compact:{marginBottom:0}})},890711:(e,t,n)=>{n.d(t,{Z:()=>T})
var a=n(692013),i=n(764403),r=n.n(i),s=n(250965),o=n.n(s),l=n(989526),c=n(573961),d=n(974913),u=n(634168),m=n(334148),p=n(36424),h=n(263137),E=n(359366)
class FileChooser extends l.Component{constructor(){super(...arguments)
this.fileInputRef=l.createRef()
this.handleDrop=(e,t)=>{this._addFiles(t)}
this.addFromChooser=e=>{this._addFiles(e.target.files)}
this.clickFile=()=>{o()(c.findDOMNode(this.fileInputRef.current)).click()}
this._addFiles=e=>{!this.props.multiple&&e.length>1?d.ZP.error("Please upload only one file. Multiple file upload is not supported for this input."):this.props.onSelectFiles(...Array.from(e||[]))}}componentDidMount(){E.Z.push(c.findDOMNode(this))
o()(c.findDOMNode(this)).on("filedrop.filechooser",this.handleDrop)}componentWillUnmount(){o()(c.findDOMNode(this)).off(".filechooser")
E.Z.pop(c.findDOMNode(this))}render(){return l.createElement("div",{className:r()("drop-help",this.props.className)},l.createElement("input",{type:"file",multiple:this.props.multiple,className:"hidden",ref:this.fileInputRef,onChange:this.addFromChooser,accept:this.props.accept,...(0,h.Z)({component:"FileChooser",element:"fileInput"})}),l.createElement(p.Z,{icon:"cloud-arrow-up",className:(0,a.iv)(S.cloudUploadIcon)}),l.createElement("span",{className:"instructions"},"Drag and drop to upload or "),l.createElement(m.Co,{buttonStyle:m.ZJ.TERTIARY_GRAY,className:(0,a.iv)(S.chooseFileButton),onClick:this.clickFile,size:m.qE.SMALL,text:this.props.multiple?"Choose files":"Choose a file"}))}}FileChooser.defaultProps={multiple:!1}
const S=a.mM.create({cloudUploadIcon:u.aM,chooseFileButton:u.lC}),T=FileChooser},50585:(e,t,n)=>{n.d(t,{Z:()=>E})
var a=n(764403),i=n.n(a),r=n(250965),s=n.n(r),o=n(602652),l=n.n(o),c=n(989526),d=n(573961),u=n(615439),m=n.n(u),p=(n(127687),n(263137))
const h="select2-removed"
class LegacySelect2 extends c.Component{constructor(){super(...arguments)
this.inputRef=c.createRef()
this.ghostDivRef=c.createRef()
this.handleChange=e=>{e.preventDefault()
"function"==typeof this.props.onChange&&this.props.onChange(e)
this.props.multiple||s()(d.findDOMNode(this.inputRef.current)).select2("close")}
this.dataFunc=()=>({results:this.props.options})
this.syncValue=e=>{s()(d.findDOMNode(this.inputRef.current)).select2("val",this.props.value,e)}}componentDidMount(){s()(d.findDOMNode(this.inputRef.current)).select2({containerCssClass:i()(this.props.className,{"select2-container--large":this.props.large,"select2-container--normalCase":this.props.normalCase}),allowClear:this.props.allowClear,createSearchChoice:this.props.createSearchChoice,createSearchChoicePosition:this.props.createSearchChoicePosition,formatSelection:this.props.formatSelection,width:this.props.width,placeholder:this.props.placeholder,data:this.props.options?this.dataFunc:void 0,multiple:this.props.multiple,matcher:this.props.matcher,ajax:this.props.ajax,initSelection:this.props.initSelection,formatResult:this.props.formatResult,minimumInputLength:this.props.minimumInputLength,formatInputTooShort:this.props.formatInputTooShort,disabled:this.props.disabled||this.props.disableInput})
s()(d.findDOMNode(this.ghostDivRef.current)).remove()
if("value"in this.props){this.syncValue(!1)
s()(d.findDOMNode(this.inputRef.current)).on("select2-selecting.select2",this.handleChange)
s()(d.findDOMNode(this.inputRef.current)).on("select2-loaded.select2",(()=>{this.syncValue(!1)}))
s()(d.findDOMNode(this.inputRef.current)).on("select2-removedselect2 removed.select2",this.handleChange)}else s()(d.findDOMNode(this.inputRef.current)).select2("val",this.props.defaultValue)}shouldComponentUpdate(e){return e.value!==this.props.value||!m()(e.data,this.props.data||e.disabled!==this.props.disabled||e.disableInput!==this.props.disableInput||e.placeholder!==this.props.placeholder)}componentDidUpdate(e){void 0!==this.props.value&&this.syncValue(e.value!==this.props.value)
e.placeholder!==this.props.placeholder&&s()(d.findDOMNode(this.inputRef.current)).data("placeholder",this.props.placeholder).data("select2").setPlaceholder()}componentWillUnmount(){s()(d.findDOMNode(this.inputRef.current)).off(".select2").select2("destroy")}getValue(){return s()(d.findDOMNode(this.inputRef.current)).select2("val")}render(){return c.createElement("div",{...(0,p.Z)(this.props.dataTestAttrs?this.props.dataTestAttrs:{component:"LegacySelect2",element:"root"})},c.createElement("div",{ref:this.ghostDivRef}),c.createElement("input",{ref:this.inputRef,type:"hidden",disabled:this.props.disabled,readOnly:this.props.disableInput,name:this.props.name}))}}LegacySelect2.propTypes={name:l().string,large:l().bool,allowClear:l().bool.isRequired,className:l().string,createSearchChoice:l().func,createSearchChoicePosition:l().oneOf(["top","bottom"]),disabled:l().bool.isRequired,disableInput:l().bool,formatSelection:l().func,normalCase:l().bool.isRequired,placeholder:l().string.isRequired,multiple:l().bool,value:l().oneOfType([l().string,l().number]),defaultValue:l().string,onChange:l().func,width:l().string.isRequired,matcher:l().func,initSelection:l().func,formatResult:l().func,minimumInputLength:l().number,formatInputTooShort:l().func,options:(e,...t)=>null==e.ajax?l().array.isRequired(e,...t):null!=e.options?new Error('Did not expect "options" prop if "ajax" passed.'):null,ajax:(e,...t)=>null==e.options?l().object.isRequired(e,...t):null!=e.ajax?new Error('Did not expect "ajax" prop if "options" passed.'):null}
LegacySelect2.SELECT2_EVENT_KEYS={SELECT2_REMOVED:h}
LegacySelect2.defaultProps={large:!1,allowClear:!1,disabled:!1,normalCase:!1,width:"100%",placeholder:""}
const E=LegacySelect2},334953:(e,t,n)=>{n.d(t,{i:()=>a,t:()=>i})
const a=578
var i
!function(e){e.TRANSFER_MODAL_INPUT_TYPE="transferModal.inputType"}(i||(i={}))},194786:(e,t,n)=>{n.d(t,{JX:()=>Col,W2:()=>Container,X2:()=>Row})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(263137)
function Row(e){return o.createElement("div",{className:i()("nyc-row",e.className,{"nyc-row--fluid":e.fluid}),style:e.style,...(0,l.Z)(e.dataTestAttrs)},e.children)}Row.propTypes={children:s().node,className:s().string,fluid:s().bool,style:s().object}
function Col(e){const t=[]
e.sm&&t.push(`nyc-col-sm-${e.sm}`)
e.md&&t.push(`nyc-col-md-${e.md}`)
e.lg&&t.push(`nyc-col-lg-${e.lg}`)
0===t.length&&t.push("nyc-col-sm-1")
return o.createElement("div",{className:i()(t,e.className)},e.children)}Col.propTypes={children:s().node,className:s().string,sm:s().number,md:s().number,lg:s().number}
function Container(e){const t={"nyc-container":!0,"nyc-container-sidepanel":"sidepanel"===e.size,"nyc-container-sm":"sm"===e.size,"nyc-container-md":"md"===e.size,"nyc-container-lg":"lg"===e.size}
return o.createElement("div",{className:i()(e.className,t),...e.dataTestAttrs?(0,l.Z)(e.dataTestAttrs):{}},e.children)}Container.propTypes={children:s().node,className:s().string,size:s().oneOf(["sidepanel","sm","md","lg"]).isRequired}},119389:(e,t,n)=>{n.d(t,{ZP:()=>PartyAvatarList})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(443626),l=n(281100),c=n(677476),d=n(868710),u=n(271359)
function SinglePartyAvatar({tooltipPlacement:e,party:t,className:n,size:a,frame:i}){return s.createElement(d.ZP,{container:"body",placement:e,title:(0,o.a)(t),disabled:null==e},s.createElement(l.Z,{className:n,entity:t,size:a,frame:i}))}function OverflowAvatar({tooltipPlacement:e,parties:t,className:n,size:a}){return s.createElement(d.ZP,{container:"body",placement:e,title:t.map((e=>(0,o.a)(e))).join(", "),disabled:null==e},s.createElement(c.Z,{className:n,backgroundColor:u.pp,size:a,text:`+${t.length}`}))}function PartyAvatarList({parties:e,maxAvatars:t,size:n,className:i,avatarClassName:o,tooltipPlacement:l,framesByPartyId:c}){return s.createElement("div",{className:r()((0,a.iv)(c?m.framedAvatarList:m.avatarList),i)},function getAvatarList(e,t,n,a,i,r={}){if(e.length>t){const o=e.slice(0,t-1),l=e.slice(t-1),c=o.map((e=>s.createElement(SinglePartyAvatar,{key:e.id,className:a,party:e,size:n,tooltipPlacement:i,frame:r[e.id]}))),d=s.createElement(OverflowAvatar,{key:"overflow-avatar",className:a,parties:l,size:n,tooltipPlacement:i})
return c.concat([d])}return e.map((e=>s.createElement(SinglePartyAvatar,{key:e.id,className:a,party:e,size:n,tooltipPlacement:i,frame:r[e.id]})))}(e,t,n,o,l,c))}const m=a.mM.create({avatarList:{display:"inline-flex",gap:"4px"},framedAvatarList:{display:"inline-flex",gap:"8px"}})},862059:(e,t,n)=>{n.d(t,{HS:()=>AddButton,He:()=>UserCell,Q0:()=>T,X2:()=>Row,bL:()=>Cell,iA:()=>Table,k:()=>IndeterminateCheckboxCell,qN:()=>HeaderCell,rW:()=>CheckboxCol,wK:()=>SpinningCell,wn:()=>CheckboxCell})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(468991),c=n(263137),d=n(281100),u=n(309718),m=n(868710),p=n(36424),h=n(356873),E=n(38317),S=n(385171)
const T=180
class Table extends o.Component{constructor(){super(...arguments)
this.state={isCollapsed:!1,isHovered:!1}
this._handleToggleIsCollapsed=()=>{null!=this.props.onToggleCollapsed?this.props.onToggleCollapsed():this.setState({isCollapsed:!this.state.isCollapsed})}
this._handleMouseEnter=()=>{this.setState({isHovered:!0})}
this._handleMouseLeave=()=>{this.setState({isHovered:!1})}}_isTableCollapsed(){return null!=this.props.isCollapsed?this.props.isCollapsed:this.state.isCollapsed}_getColumns(){return this.props.columns||this.props.headerCells.map(((e,t)=>o.createElement("col",{key:t,width:this.props.minColumnWidth||T})))}_getApproxTableWidth(){return this.props.headerCells.length*(this.props.minColumnWidth||T)}_shouldRenderCollapserChevron(){return!!this._isTableCollapsed()||this.props.isCollapsible&&this.state.isHovered}render(){const{className:e,collapsedHeaderText:t,leftHeader:n,rightHeader:a,headerCells:r,largerHeader:s,children:l,useMinimalMargin:d}=this.props
return o.createElement("div",{className:i()("richObjectTable-hoverArea",{"richObjectTable-minimalMargin":d}),onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},o.createElement("div",{className:i()(e,"richObjectTable-container-wrapper",{"richObjectTable-minimalMargin":d}),"data-mediocre-item-whitespace":"1"},o.createElement("div",{className:i()("richObjectTable-container printable-container-scaleForPrint",{"is-collapsed":this._isTableCollapsed()}),"data-printable-layout-width":this._getApproxTableWidth(),...(0,c.Z)(this.props.dataTestAttrs)},o.createElement("div",{className:"u-vertical-center-items"},o.createElement("div",{className:i()("richObjectTable-header",{"is-expanded":!this._isTableCollapsed(),"is-collapsed":this._isTableCollapsed(),"u-pointer":this.props.isCollapsible}),"data-mediocre-item-select":"1",onDoubleClick:this.props.isCollapsible?this._handleToggleIsCollapsed:void 0,...(0,c.Z)({component:"RichObjectTable",element:"header"})},o.createElement("div",{className:"u-flex-grow"},n),o.createElement("div",{className:"u-flex-none"},this._isTableCollapsed()?o.createElement("span",{className:"richObjectTable-collapsedHeaderText"},t):a)),this._shouldRenderCollapserChevron()&&o.createElement("div",{className:"u-flex-none u-tiny-spacing-left u-vertical-center-items"},o.createElement(S.Z,{isTableExpanded:!this._isTableCollapsed(),onToggleCollapsed:this._handleToggleIsCollapsed}))),!this._isTableCollapsed()&&o.createElement("div",{className:"richObjectTable-scrollContainer"},o.createElement("table",{className:"richObjectTable table selectable"},o.createElement("colgroup",null,this._getColumns()),o.createElement("thead",null,o.createElement(Row,null,r.map(((e,t)=>o.createElement(HeaderCell,{larger:s,key:t},e))))),o.createElement("tbody",null,l))))))}}Table.propTypes={children:s().node,className:s().string,collapsedHeaderText:s().string,columns:s().node,minColumnWidth:s().number,headerCells:s().arrayOf(s().node).isRequired,largerHeader:s().bool,isCollapsible:s().bool.isRequired,leftHeader:s().node,rightHeader:s().node,isCollapsed:s().bool,onToggleCollapsed:s().func,useMinimalMargin:s().bool}
Table.defaultProps={isCollapsible:!1}
function CheckboxCol(e){return o.createElement("col",{className:"richObjectTable-checkboxColumn",...e})}function Row(e){return o.createElement("tr",{...e,className:i()("richObjectTable-row",e.className),...(0,c.Z)({component:"RichObjectTable",element:"row"})})}Row.propTypes={className:s().string}
function Cell(e){const t=(0,E.C)(e,"className","primary","placeholder")
return o.createElement("td",{...t,className:i()(e.className,e.primary?"richObjectTable-cell--primary":"richObjectTable-cell",{"richObjectTable-placeholderText":e.placeholder})})}Cell.propTypes={className:s().string,placeholder:s().bool.isRequired,primary:s().bool.isRequired}
Cell.defaultProps={placeholder:!1,primary:!1}
function HeaderCell(e){return o.createElement("th",{...(0,E.C)(e,"className","larger"),className:i()({"richObjectTable-cell--header":!e.larger,"richObjectTable-cell--header-larger":e.larger},e.className)})}HeaderCell.propTypes={className:s().string,larger:s().bool}
class AddButton extends o.Component{constructor(){super(...arguments)
this._handleClick=e=>{this.props.disabled?e.stopPropagation():this.props.onClick(e)}}render(){return o.createElement(m.ZP,{disabled:!this.props.disabled||!this.props.disabledTooltip,title:this.props.disabledTooltip||"",...this.props.tooltipProps},o.createElement("span",{className:i()(this.props.className,"richObjectTable-addButton-wrapper"),onClick:this._handleClick,...(0,c.Z)({component:"AddButton",element:"wrapper"})},o.createElement(p.Z,{className:i()("richObjectTable-addButton",{"richObjectTable-addButton--disabled":this.props.disabled}),icon:"compose",altText:this.props.altText})))}}AddButton.propTypes={className:s().string,altText:s().string,disabled:s().bool.isRequired,disabledTooltip:s().string,onClick:s().func,tooltipProps:s().object}
AddButton.defaultProps={disabled:!1}
function CheckboxCell(e){return o.createElement("div",{className:"richObjectTable-checkboxCell"},o.createElement("input",{type:"checkbox",...e}))}function IndeterminateCheckboxCell(e){return o.createElement("div",{className:"richObjectTable-checkboxCell"},o.createElement(h.Z,{...e}))}function SpinningCell({children:e}){return o.createElement("div",{className:"u-vertical-center-items"},o.createElement("span",{className:"u-flex-grow"},e),o.createElement("span",{className:"richObjectTable-spinnerIcon u-flex-none"}))}SpinningCell.propTypes={children:s().node.isRequired}
function UserCell({user:e}){return o.createElement("div",{className:"u-vertical-center-items"},o.createElement("div",{className:"u-mini-spacing-right"},o.createElement(d.Z,{size:u.D.XXSMALL,entity:e})),o.createElement("div",null,e.name))}UserCell.propTypes={user:l.OP.isRequired}},989652:(e,t,n)=>{n.d(t,{Z:()=>SectionTabs})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(263137)
function SectionTabs(e){return o.createElement("div",{className:i()("sectionTabs",e.className)},o.createElement("ul",{className:"sectionTabs-nav"},e.tabs.map(((e,t)=>o.createElement("li",{className:i()("sectionTabs-navItem",{active:e.isActive}),key:t,onClick:e.isActive?()=>{}:e.handleClick,...(0,l.Z)({component:"SectionTab",element:"navItem"})},o.createElement("div",{className:"sectionTabs-navItem-title"},o.createElement("span",{className:"sectionTabs-navItem-title-inner"},e.text)))))))}SectionTabs.propTypes={className:s().string,tabs:s().arrayOf(s().shape({handleClick:s().func.isRequired,isActive:s().bool.isRequired,text:s().string.isRequired}).isRequired).isRequired}},405945:(e,t,n)=>{n.d(t,{Z:()=>u})
var a=n(764403),i=n.n(a),r=n(989526),s=n(675649),o=n(263137),l=n(868710),c=n(36424),d=n(808844)
function ShowSettingsButton({toggleShowSettingsButton:e,isSettingsShown:t,type:n}){return r.createElement(l.ZP,{title:`Manage ${(0,d.co)(n)}`},r.createElement("a",{className:i()("settingsPage-btn pull-right",{"is-active":t}),onClick:e},r.createElement(c.Z,{icon:"gear"})))}class SettingsPage extends r.Component{constructor(){super(...arguments)
this.settingsBtnClickHandler=()=>{this.props.onChangeIsSettingsShown(!0)}
this.breadcrumbClickHandler=e=>{s.c4(e)}}render(){return r.createElement("div",{className:"settingsPage",...(0,o.Z)(this.props.dataTestAttrs)},r.createElement("div",{className:"settingsPage-contentWrapper"},null!=this.props.isSettingsShown&&r.createElement(ShowSettingsButton,{type:this.props.type,toggleShowSettingsButton:this.settingsBtnClickHandler,isSettingsShown:this.props.isSettingsShown}),this.props.onExport&&r.createElement(l.ZP,{title:"Export"},r.createElement("a",{className:"settingsPage-btn pull-right",onClick:this.props.onExport},r.createElement(c.Z,{icon:"export"}))),r.createElement("h2",{className:"settingsPage-header"},this.props.breadcrumbs.map((({name:e,url:t})=>[r.createElement("a",{className:"settingsPage-header-crumb",key:"name",href:t,onClick:this.breadcrumbClickHandler},e),r.createElement(c.Z,{className:"settingsPage-header-chevron",key:"chevron",icon:"chevron-right"})])),r.createElement("span",{className:i()("settingsPage-header-title",{faded:!this.props.title})},null!=this.props.title?this.props.title:"...")),r.createElement("div",{className:"settingsPage-content"},this.props.children)))}}SettingsPage.defaultProps={breadcrumbs:[]}
const u=SettingsPage},575891:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(764403),i=n.n(a),r=n(989526),s=n(616972)
const o=r.memo((e=>r.createElement("div",{className:i()("spinner",e.classNames,{"spinner-light":e.light}),...(0,s.ey)()})))
o.displayName="Spinner"
const l=o},745826:(e,t,n)=>{n.d(t,{I:()=>TabContainerHeaderDivider,OK:()=>Tab,Xl:()=>TabContainer})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(263137)
function TabContainerHeaderDivider(e){return o.createElement("hr",{className:i()("tabContainer-headerDivider",e.className)})}function NavItem(e){return o.createElement("div",{className:i()("tabContainer-navItem",{"tabContainer-navItem--active":e.active}),onClick:function handleClick(){e.onClick(e.tabKey)},...(0,l.Z)({component:"NavItem",key:`${e.tabKey}`})},e.title)}NavItem.propTypes={active:s().bool.isRequired,tabKey:s().string.isRequired,title:s().node.isRequired,onClick:s().func.isRequired}
function TabContainer(e){function isActiveTab(t){return t.props.tabKey===e.activeTab}function handleSwitchTab(t){e.onRequestTabChange(t)}const t=o.Children.toArray(e.children).filter((e=>e)),[n]=t.filter(((e,t)=>isActiveTab(e)))
return o.createElement("div",{className:e.className,...(0,l.Z)({component:"TabContainer",element:"root"})},o.createElement("div",{className:i()("tabContainer-nav",e.navClassName)},t.map(((e,t)=>o.createElement(NavItem,{key:e.props.tabKey,active:isActiveTab(e),tabKey:e.props.tabKey,title:e.props.title,onClick:handleSwitchTab})))),o.createElement(TabContainerHeaderDivider,{className:e.headerDividerClassName}),o.createElement("div",{className:i()("tabContainer-pane",e.paneClassName,{"u-flex-full-height":e.isFullHeight}),...(0,l.Z)({component:"TabContainer",element:"pane"})},n.props.children))}TabContainer.defaultProps={isFullHeight:!1}
TabContainer.propTypes={activeTab:s().string.isRequired,children:s().node.isRequired,className:s().string,isFullHeight:s().bool.isRequired,onRequestTabChange:s().func.isRequired}
function Tab(e){throw new Error("Tab should not be actually rendered and is only used for external API")}Tab.propTypes={tabKey:s().string.isRequired,title:s().node.isRequired}},990031:(e,t,n)=>{n.d(t,{Z:()=>TabLayout,v:()=>a})
var a,i=n(692013),r=n(764403),s=n.n(r),o=n(989526),l=n(736957),c=n(263137),d=n(271359)
!function(e){e.WHITE="WHITE"
e.GRAY_LIGHTER="GRAY_LIGHTER"}(a||(a={}))
const u={[a.WHITE]:d.Cj,[a.GRAY_LIGHTER]:d.bs}
function TabLayout({backgroundColor:e,children:t,className:n,dataTestAttrs:a,header:r,isHeaderFrozen:l=!0}){const[d,p]=(0,o.useState)(0)
return o.createElement("div",{className:s()((0,i.iv)(m.wrapper),!l&&(0,i.iv)(m.scrollableWrapper),"scrollbar-override",n),...(0,c.Z)(null!=a?a:{component:"TabLayout",element:"root"})},o.createElement("div",{className:(0,i.iv)(m.header,l&&m.frozenHeader),style:l?{boxShadow:`0 ${d}px ${d}px 0 rgba(200, 200, 200, 0.5)`}:{},...(0,c.Z)({component:"TabLayout",element:"header"})},r),o.createElement("div",{onScroll:l?function handleScroll(e){p(Math.min(e.currentTarget.scrollTop,5))}:void 0,className:s()((0,i.iv)(m.body,l&&m.scrollableBody),"scrollbar-override"),style:{backgroundColor:e&&u[e]},...(0,c.Z)({component:"TabLayout",element:"body"})},t))}const m=i.mM.create({wrapper:{display:"flex",flexDirection:"column",height:"100%",overflowX:"hidden"},scrollableWrapper:{overflowY:"auto"},header:{padding:"12px 12px 12px 14px",borderBottom:`1px solid ${d.tN}`},frozenHeader:{zIndex:l.cC},body:{flex:1},scrollableBody:{overflowY:"auto",flex:1}})},514674:(e,t,n)=>{n.d(t,{Dx:()=>f,ZP:()=>A})
var a=n(769784),i=n(602652),r=n.n(i),s=n(989526),o=n(212300),l=n(232606),c=n(459830),d=n(537076),u=n(751512),m=n(91092),p=n(965131),h=n(753970),E=n(645387),S=n(217042),T=n(332753),g=n(84948)
const GET_OWNER_NOOP=()=>{}
class TagSchemaSelector extends s.Component{constructor(){super(...arguments)
this.tagSchemaChangeHandler=e=>{if(null==e){(0,l.hu)(Boolean(this.props.allowNone),"Selected null for schema but allowNone not set")
this.props.onChange(null)}else(0,S.pT)(e)?this.props.onChange(e):(0,l.hu)(!1,"Value is not a tag schema or null")}}render(){return s.createElement(h.Z,{isDisabled:this.props.isDisabled,isSchemaDisabledFn:this.props.isTagSchemaDisabledFn,disabledMessage:this.props.disabledMessage,onChange:this.tagSchemaChangeHandler,schemas:this.props.tagSchemas,selectedSchemaId:this.props.selectedTagSchemaId,shouldShowNoSchemaOption:this.props.allowNone,starredSchemaIds:this.props.starredSchemaIds,onToggleStar:this.props.toggleTagSchemaStar,getSchemaOwner:this.props.getSchemaOwner})}}TagSchemaSelector.propTypes={allowNone:r().bool.isRequired,oligoAwareFolderItemTypes:r().arrayOf(r().oneOf([...d.TAG_SCHEMA_SUPPORTED_FOLDER_ITEM_TYPES,c.SequenceSubtype.RNA_SEQUENCE,c.SequenceSubtype.DNA_OLIGO,c.SequenceSubtype.RNA_OLIGO])),registryId:r().string,requireTranslationLink:r().bool,requiredPermissions:r().arrayOf(r().string),isDisabled:r().bool.isRequired,starredSchemaIds:r().arrayOf(r().string),toggleTagSchemaStar:r().func.isRequired,selectedTagSchemaId:r().string,forceVisibleSelectedTagSchema:d.TAG_SCHEMA_SHAPE,onChange:r().func}
TagSchemaSelector.defaultProps={allowNone:!1,isDisabled:!1,isTagSchemaDisabledFn:()=>!1,disabledMessage:""}
const f=a.Ps`
  query TagSchemaSelectorQuery @skipAudit @engComponent(name: SCHEMAS) {
    ...AllTagSchemasGraphQL
    ...StarredTagSchemaIdsGraphQL
  }
  ${(0,m.f)("AllTagSchemas").fragment}
  ${(0,m.f)("StarredTagSchemaIds").fragment}
`,I=a.Ps`
  query TagSchemaSelectorOwnerQuery @skipAudit @engComponent(name: SCHEMAS) {
    tagSchemas {
      id
      registry {
        id
        organization {
          id
          name
        }
      }
    }
  }
`
const A=(0,o.$j)(null,(e=>({toggleTagSchemaStar:t=>{e((0,T.Xb)(t))}})))((function QueryingTagSchemaSelector(e){e.forceVisibleSelectedTagSchema&&e.selectedTagSchemaId&&(0,l.Gp)(e.forceVisibleSelectedTagSchema.id===e.selectedTagSchemaId,`selectectedTagSchemaId (${e.selectedTagSchemaId}) and the ID of forceVisibleSelectedTagSchema (${e.forceVisibleSelectedTagSchema.id}) must match`)
return s.createElement(u.ZP,{query:f,renderLoading:()=>s.createElement(TagSchemaSelector,{...e,tagSchemas:null,starredSchemaIds:null,getSchemaOwner:GET_OWNER_NOOP})},(t=>s.createElement(E.v5,{query:I,getIdOwnerTuples:e=>e.tagSchemas.map((e=>({id:e.id,owner:e.registry.organization.name})))},(({getSchemaOwner:n})=>{return s.createElement(TagSchemaSelector,{...e,getSchemaOwner:n,tagSchemas:(a=e.forceVisibleSelectedTagSchema,i=(0,g.Z)((0,p.NA)("TagSchema",t.tagSchemas),{registryId:e.registryId,oligoAwareFolderItemTypes:e.oligoAwareFolderItemTypes,requireTranslationLink:e.requireTranslationLink,requiredPermissions:e.requiredPermissions,customFilter:e.tagSchemaFilterFn,...e.selectedTagSchemaId?{alwaysIncludeId:e.selectedTagSchemaId}:{}}),a&&i.every((e=>e.id!==a.id))?[...i,a]:i),starredSchemaIds:t.starredTagSchemas.map((e=>e.id))})
var a,i}))))}))},480207:(e,t,n)=>{n.d(t,{P:()=>LocalTime,i:()=>RelativeTime})
var a=n(989526),i=n(99312),r=n(10584),s=n(191193)
function makeDelayedStringFormatter(e=0){return class extends a.Component{constructor(e){super(e)
this.shouldComponentUpdate=(e,t)=>this.props.format!==e.format||this.props.iso8601String!==e.iso8601String||this.state.formattedString!==t.formattedString
this._getFormattedStringAndTitleState=()=>({formattedString:this.props.format(this.props.iso8601String),formattedTitle:this.props.titleFormatFn(this.props.iso8601String)})
this._setFormattedStringAndTitle=()=>{this.setState(this._getFormattedStringAndTitleState())}
this.state=i.isBrowser?{formattedString:"",formattedTitle:""}:this._getFormattedStringAndTitleState()}componentDidMount(){setTimeout(this._setFormattedStringAndTitle,0)
0!==e&&(this._intervalId=setInterval(this._setFormattedStringAndTitle,1e3*e))}componentWillUnmount(){this._intervalId&&clearInterval(this._intervalId)}render(){return a.createElement("time",{title:this.state.formattedTitle,dateTime:this.props.iso8601String,"data-test-original-value":this.props.iso8601String},this.state.formattedString)}}}function fuzzyFormat(e){return(0,s.Z)(e,{days:7})}const o=makeDelayedStringFormatter(30)
function RelativeTime(e){return a.createElement(o,{format:fuzzyFormat,titleFormatFn:r.UT,iso8601String:e.datetime})}const l=makeDelayedStringFormatter()
function LocalTime(e){return a.createElement(l,{format:r.UT,titleFormatFn:r.UT,iso8601String:e.datetime})}},767077:(e,t,n)=>{n.d(t,{EU:()=>r,EX:()=>a,bQ:()=>s,j2:()=>i})
const a=100,i=800,r=1e3,s=250},574796:(e,t,n)=>{n.d(t,{ZP:()=>UrlAwareText,an:()=>l})
var a=n(83071),i=n(989526),r=n(104801),s=n(630089),o=n(549983)
const l=1e4,c=`[\\w.]*[.](${["com","net","org","edu","gov","de","icu","uk","ru","info","top","xyz","tk","cn","ga","cf","nl"].join("|")})\\b`,d=new RegExp(c)
function isURLAcceptable(e,t){if("url"!==t)return!0
const n=/^((http|ftp)s?:\/\/|www)/.test(e.toLowerCase()),a=d.test(e.toLowerCase())
return n||a}function renderAsBenchLink(e){return i.createElement(s.Z,{href:e.attributes.href},e.content)}function LinkifyWithCustomURLProtocolSupport(e){const{textValue:t}=e,n=(0,r.Z)("CUSTOM_URL_PROTOCOL_ALLOW_LIST"),s={defaultProtocol:"https",validate:isURLAcceptable,nl2br:e.breakNewLines,render:renderAsBenchLink}
if(!n.length)return i.createElement(a.Z,{options:s},t)
const o=new RegExp(`((?:${n.join("|")})://\\S+)`),l=t.split(o).filter((e=>Boolean(e)))
return i.createElement(i.Fragment,null,l.map(((e,t)=>o.test(e)?i.createElement("a",{key:t,href:e},e):i.createElement(a.Z,{key:t,options:s},e))))}function UrlAwareText(e){return e.textValue&&e.textValue.length>l?i.createElement("span",{className:e.className},e.textValue):e.textValue?i.createElement("span",{className:e.className},i.createElement(LinkifyWithCustomURLProtocolSupport,{textValue:e.textValue,breakNewLines:e.breakNewLines})):e.placeholder?i.createElement(o.Z,{value:e.placeholder}):i.createElement("span",{className:e.className})}},219048:(e,t,n)=>{n.d(t,{Y:()=>PopoverWarningBadge,Z:()=>TooltipWarningBadge})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(868710),l=n(271359),c=n(686836),d=n(36424)
function BaseWarningBadge({content:e,className:t}){return s.createElement("span",{className:r()((0,a.iv)(u.warningBadge),t)},s.createElement("span",{className:r()((0,a.iv)(u.warningBadgeIcon),null!=e&&""!==e&&"u-tiny-padding-right")},s.createElement(d.Z,{icon:"warning"})),e)}function TooltipWarningBadge({content:e,className:t,tooltipTitle:n}){return s.createElement(o.ZP,{container:"body",placement:o.TQ.TOP,title:n},s.createElement(BaseWarningBadge,{content:e,className:t}))}function PopoverWarningBadge({content:e,className:t,popoverProps:n}){return s.createElement(c.Z,{...n},s.createElement(BaseWarningBadge,{content:e,className:t}))}const u=a.mM.create({warningBadge:{borderRadius:2,background:l.sB,color:l.ud,padding:"3px 7px"},warningBadgeIcon:{color:l.ud}})},396091:(e,t,n)=>{n.d(t,{Z:()=>m})
var a=n(989526),i=n(232606),r=n(675649),s=n(795424),o=n(453778),l=n(778223),c=n(402763),d=n(970196),u=n(379346)
class ItemSearchInput extends a.Component{constructor(){super(...arguments)
this.state={query:this.props.initialQuery,isControlled:Boolean(null!=this.props.query&&this.props.onUpdateQuery)}
this.handleInputChange=e=>{this.canSelectAdditional()&&this.setQuery(e.target.value)}
this.handleRemove=e=>{(0,i.Gp)(!this.props.isReadOnly,"Unexpectedly removed item from read-only ItemSearchInput.")
this.setQuery("")
this.props.onChange(this.props.selectedItems.filter((t=>t!==e)))}
this.getOptionDatasFromResponse=e=>{const t=this.props.hideSelectedResults?this.props.selectedItems.map((e=>e.id)):[]
return e[this.props.itemKey].filter((e=>!t.includes(e.id))).map((t=>{let n
this.props.getExtraFromResponse&&(n=this.props.getExtraFromResponse(e,t.id))
const a={extra:n,item:t,item_id:t.id,name:t.name,type:u.ZP.apiIdToType(t.id)}
return{name:t.name,icon:(0,d.rP)(a),value:a}}))}
this.renderOptionContent=e=>a.createElement(d.ZP,{optionData:e})}static getDerivedStateFromProps(e,t){return t.isControlled&&null!=e.query?{query:e.query}:null}canSelectAdditional(){return!this.props.isReadOnly&&(0===this.props.selectedItems.length||this.props.shouldAllowMultiple)}handleSelectAttachment(e,t,n,a){this.setQuery("")
this.props.onChange([...this.props.selectedItems,a])}setQuery(e){this.state.isControlled&&this.props.onUpdateQuery?this.props.onUpdateQuery(e):this.setState({query:e})}render(){var e
return a.createElement(c.ZP,{autoFocus:this.props.autoFocus,className:this.props.className,disabled:this.props.disabled,emptyQueryMessage:this.props.emptyQueryMessage,chipClass:o.Z,getChipProps:e=>({id:e.id,isLink:Boolean(this.props.areChipsClickable),size:this.props.chipSize}),key:this.props.chipSearchInputKey,getOptionDatasFromResponse:this.props.getOptionDatasFromResponse||this.getOptionDatasFromResponse,isMulti:this.props.shouldAllowMultiple,isReadOnly:this.props.isReadOnly,onBlur:this.props.onBlur,onKeyDown:this.props.onKeyDown,onQueryChange:this.handleInputChange,onRemove:this.handleRemove,noResultsOptions:this.props.noResultsOptions,onSelect:e=>{if(null!=e){(0,s.zC)(e.item_id,e._searchPosition,e._searchCorrelationId)
this.handleSelectAttachment(e.item_id,e.name,r.jp(e.item.editURL),e.item)}},placeholder:this.props.placeholder,query:this.state.query,renderOptionContent:null!==(e=this.props.renderOptionContent)&&void 0!==e?e:this.renderOptionContent,searchOnEmptyQuery:this.props.searchOnEmptyQuery,searchURL:this.props.searchURL,fetchParams:{limit:10,...this.props.fetchParams},doSearch:this.props.doSearch,value:this.props.selectedItems,renderChips:this.props.renderChips,onSearchStart:this.props.onSearchStart,onSearchSuccess:this.props.onSearchSuccess})}}ItemSearchInput.defaultProps={autoFocus:!0,chipSize:l.TK.SMALL,disabled:!1,doSearch:c.Bf,initialQuery:"",isReadOnly:!1,placeholder:"Search",searchOnEmptyQuery:!1,shouldAllowMultiple:!1,hideSelectedResults:!1,summarize:!1,renderChips:null}
const m=ItemSearchInput},542716:(e,t,n)=>{n.d(t,{Z:()=>AvatarFrame,l:()=>a})
var a,i=n(692013),r=n(764403),s=n.n(r),o=n(989526),l=n(271359),c=n(36424),d=n(309718)
!function(e){e[e.EDITOR=0]="EDITOR"}(a||(a={}))
const u={[a.EDITOR]:"pen"},m={[a.EDITOR]:l.t4}
function AvatarFrame(e){const t=m[e.type],n=u[e.type],a={[d.o.SQUARE]:p.squareFrame,[d.o.CIRCLE]:p.circleFrame},r={[d.D.XXSMALL]:p.xxsFrame,[d.D.XSMALL]:p.xsFrame,[d.D.SMALL]:p.smallFrame,[d.D.NEWSMALL]:p.smallFrame,[d.D.LARGE]:p.largeFrame,[d.D.XLARGE]:p.xlFrame},l={[d.D.XXSMALL]:p.iconSmall,[d.D.XSMALL]:p.iconSmall,[d.D.SMALL]:p.iconMedium,[d.D.NEWSMALL]:p.iconMedium,[d.D.LARGE]:p.iconMedium,[d.D.XLARGE]:p.iconMedium}
return o.createElement("div",{className:s()((0,i.iv)(p.avatarFrame,a[e.shape],r[e.size]),e.className),style:{border:"solid 2px",borderColor:t}},n&&o.createElement("span",{className:s()((0,i.iv)(p.frameIconSpan,l[e.size])),style:{backgroundColor:t}},o.createElement(c.Z,{icon:n,className:(0,i.iv)(p.frameIcon),style:{backgroundColor:t}})))}const p=i.mM.create({avatarFrame:{display:"inline-block",position:"absolute"},squareFrame:{borderRadius:"2px"},circleFrame:{borderRadius:"50%"},xxsFrame:{height:"22px",width:"22px"},xsFrame:{height:"26px",width:"26px"},smallFrame:{height:"34px",width:"34px"},largeFrame:{height:"70px",width:"70px"},xlFrame:{width:"90px",height:"90px"},frameIconSpan:{display:"inline-flex",position:"absolute",alignItems:"center",justifyContent:"center",borderRadius:"50%",right:"0",bottom:"0",color:l.Cj,padding:"3px"},frameIcon:{width:"10px",height:"10px"},iconSmall:{width:"12px",height:"12px",right:"-5px",bottom:"-2px"},iconMedium:{width:"16px",height:"16px",right:"-5px",bottom:"-2px"}})},105916:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(692013),i=n(989526),r=n(263137),s=n(334148),o=n(271359)
const l=a.mM.create({banner:{backgroundColor:o.t0,color:o.Cj,alignItems:"center",display:"flex",justifyContent:"space-between",padding:"13px 16px",marginBottom:"8px",fontSize:13,lineHeight:"16px",borderRadius:8}})
const c=function SaveBanner(e){return i.createElement("div",{className:(0,a.iv)(l.banner),...(0,r.Z)({component:"SaveBanner",element:"root"})},i.createElement("div",{className:"_test-bannerText",...(0,r.Z)({component:"SaveBanner",element:"text"})},e.text),i.createElement("div",null,i.createElement(s.Co,{size:s.qE.MINI,text:"Discard",onClick:e.onDiscard,buttonStyle:s.ZJ.SECONDARY}),i.createElement(s.Co,{className:"u-mini-spacing-left",size:s.qE.MINI,text:"Save",onClick:e.onSave,buttonStyle:s.ZJ.SECONDARY_WHITE,dataTestAttrs:{component:"SaveBanner",element:"saveButton"},disabled:e.disableSave})))}},88941:(e,t,n)=>{n.d(t,{Z:()=>p})
var a=n(692013),i=n(764403),r=n.n(i),s=n(602652),o=n.n(s),l=n(989526),c=n(531041),d=n(736957),u=n(389528),m=n(263137)
class FormInput extends l.Component{constructor(){super(...arguments)
this.inputRef=l.createRef()}componentDidMount(){var e
this.props.focusOnMount&&(null===(e=this.inputRef.current)||void 0===e||e.focus())}focus(){this.inputRef.current.select()}_handleClick(e){this.props.selectAllOnClick&&this.inputRef.current.select()
this.props.onClick&&this.props.onClick(e)}getInputGroupStyle(){switch(this.props.inputGroupPosition){case"left":return h.inputGroupLeft
case"right":return h.inputGroupRight
case"middle":return h.inputGroupMiddle
default:return null}}render(){const e={...c.default.omit(this.props,"error","focusOnMount","selectAllOnClick","dataTestAttrs","rows","type","inputGroupPosition"),ref:this.inputRef,className:r()(this.props.className,"form-control",(0,a.iv)(h.input,this.getInputGroupStyle()),{"fieldInput-input--error":Boolean(this.props.error)}),onClick:e=>{this._handleClick(e)},...(0,m.Z)(this.props.dataTestAttrs)}
return"textarea"===this.props.type?l.createElement("textarea",{...e,rows:this.props.rows}):l.createElement("input",{...e,type:this.props.type})}}FormInput.propTypes={className:o().string,error:o().string,type:o().string,focusOnMount:o().bool.isRequired,name:o().string,onClick:o().func,placeholder:o().string,selectAllOnClick:o().bool.isRequired,dataTestAttrs:u.C,rows:o().number,maxLength:o().number}
FormInput.defaultProps={type:"text",focusOnMount:!1,selectAllOnClick:!1}
const p=FormInput,h=a.mM.create({input:{borderRadius:d.$Y},inputGroupLeft:{borderTopRightRadius:0,borderBottomRightRadius:0},inputGroupRight:{borderTopLeftRadius:0,borderBottomLeftRadius:0},inputGroupMiddle:{borderRadius:0}})},850709:(e,t,n)=>{n.d(t,{OZ:()=>a,T:()=>s,XN:()=>areLabeledDatasets,Xp:()=>isContinuousAxisConfig,jW:()=>isLabeledDataset,sk:()=>datasetHasRegression,xK:()=>r})
var a,i=n(573133)
function isLabeledDataset(e){return"label"in e}function areLabeledDatasets(e){return e.every((e=>isLabeledDataset(e)))}function datasetHasRegression(e){return"regressionAnalysis"in e}!function(e){e.LINEAR="LINEAR"
e.LOG="LOG"}(a||(a={}))
const r=[i.g.DATE_OR_TIMESTAMP,i.g.NUMBER,i.g.STRING],s={[i.g.DATE_OR_TIMESTAMP]:[a.LINEAR],[i.g.NUMBER]:[a.LINEAR,a.LOG],[i.g.STRING]:[a.LINEAR]}
function isContinuousAxisConfig(e){return e.hasOwnProperty("includeZero")&&e.hasOwnProperty("scale")}},554578:(e,t,n)=>{n.d(t,{L:()=>i,z:()=>a})
var a,i
!function(e){e.COLUMN="column"
e.ROW="row"}(a||(a={}))
!function(e){e.LEFT="LEFT"
e.RIGHT="RIGHT"
e.TOP="TOP"}(i||(i={}))},358348:(e,t,n)=>{n.d(t,{IN:()=>standardDeviation,J6:()=>mean,fU:()=>standardError})
var a=n(232606),i=n(675649)
function mean(e){(0,a.hu)(e.length>0,"Can't calculate mean on empty data")
return(0,i.Sm)(e)/e.length}function standardDeviation(e){(0,a.hu)(e.length>1,`Can't calculate sample standard deviation on ${e.length} values`)
return Math.sqrt(function variance(e){(0,a.hu)(e.length>1,`Can't calculate sample variance on ${e.length} values`)
const t=mean(e)
return(0,i.Sm)(e.map((e=>(e-t)**2)))/(e.length-1)}(e))}function standardError(e){(0,a.hu)(e.length>1,`Can't calculate standard error of the sample mean on ${e.length} values`)
return standardDeviation(e)/Math.sqrt(e.length)}},438633:(e,t,n)=>{n.d(t,{_:()=>a})
var a
!function(e){e.ERROR="ERROR"
e.LOADING="LOADING"
e.SUCCESS="SUCCESS"}(a||(a={}))},181412:(e,t,n)=>{n.d(t,{N2:()=>o,X7:()=>i,ew:()=>r})
var a=n(339312)
const i="R",r={[a.ZZ.LINEAR]:"Linear",[a.ZZ.LOGISTIC]:"4-parameter logistic"},s={[a.ZZ.LINEAR]:[],[a.ZZ.LOGISTIC]:[a.JV.MIN,a.JV.MAX,a.JV.IC50,a.JV.HILL_SLOPE]}
function buildDefaultRegressionConfig(e){return{regressionType:e,version:1,parameterCustomizations:s[e].map((e=>({name:e,initialValue:null,constraint:{type:a.Ew.NONE}})))}}const o={[a.ZZ.LINEAR]:buildDefaultRegressionConfig(a.ZZ.LINEAR),[a.ZZ.LOGISTIC]:buildDefaultRegressionConfig(a.ZZ.LOGISTIC)}},967687:(e,t,n)=>{n.d(t,{AT:()=>performLinearRegressionAnalysis,PR:()=>validateData,U6:()=>fitIntercept,eg:()=>fitSlope})
var a=n(64558),i=n(427624),r=n(146636),s=n(531041),o=n(232606),l=n(675649),c=n(573133),d=n(358348),u=n(438633),m=n(598738),p=n(901113),h=n(181412),E=n(731772)
function performLinearRegressionAnalysis(e){const[t,n]=function getDataAndDataToEstimateInput(e){let t,n
const o=e.points.map((({x:e})=>e))
if(e.axisTypes.x===c.g.NUMBER){t=e.points
n=e=>e}else if(e.axisTypes.x===c.g.STRING){const r=(0,a.SL)(s.default.uniq(o)),l=(0,i.x)().domain(r).range([0,r.length-1])
t=e.points.map((({x:e,y:t})=>({x:l(e),y:t})))
n=e=>l(e)}else{if(e.axisTypes.x!==c.g.DATE_OR_TIMESTAMP)throw e.axisTypes.x===c.g.BOOLEAN||e.axisTypes.x===c.g.JSON?new Error(`Unsupported axis type ${e.axisTypes.x}`):new Error(`Unsupported axis type ${(0,p.vE)(e.axisTypes.x)}`)
{const a=(0,r.Z)().domain((0,m.Z)(o))
t=e.points.map((({x:e,y:t})=>({x:a(new Date(e)),y:t})))
n=e=>a(e)}}return[t,n]}(e),o=validateData(t)
if(null!=o)return{message:o,status:u._.ERROR}
const E=(0,d.J6)(t.map((e=>e.x))),S=(0,d.J6)(t.map((e=>e.y))),T=function fitLinearRegressionModel(e,t,n){const a=fitSlope(e,t,n)
return{B0:fitIntercept(t,n,a),B1:a}}(t,E,S),g=function calculateR2(e,t,n){const a=function calculateResiduals(e,t){return e.map((e=>({...e,residual:e.y-estimatePointY(e.x,t)})))}(e,n),i=(0,l.Sm)(a.map((e=>(e.y-t)**2))),r=1-(0,l.Sm)(a.map((e=>e.residual**2)))/i
return Number.isNaN(r)?1:r}(t,S,T)
return{result:{getEstimatedY:e=>estimatePointY(n(e),T),fitEquation:getFitEquation(T.B0,T.B1),fitOutput:{...T,R2:g},outputValues:[{fieldName:"m",showInPlotHeader:!1,value:T.B1},{fieldName:"b",showInPlotHeader:!1,value:T.B0},{fieldName:"R2",fieldNameDisplayOverride:h.X7,showInPlotHeader:!0,value:g}],tooltipDisclaimer:null},status:u._.SUCCESS}}function validateData(e){return e.length<=1?"Data must have at least 2 points to compute linear regression":s.default.uniq(e.map((e=>e.x))).length<=1?"Data must have at least 2 different x values to compute linear regression":null}function fitSlope(e,t,n){const a=e.length*t*n,i=e.length*t**2,r=(0,l.Sm)(e.map((e=>e.x*e.y)))-a,s=(0,l.Sm)(e.map((e=>e.x**2)))-i
return(0,o.Gp)(0!==s,"ssXX should never be 0 if we checked that Xs aren't all the same value")?r/s:0}function fitIntercept(e,t,n){return t-n*e}function estimatePointY(e,t){return e*t.B1+t.B0}function getFitEquation(e,t){const n=0===e,a=0===t,i=n?"":(0,E.Z)(Math.abs(e),null),r=a?"":(0,E.Z)(t,"x")
return`y = ${n&&a?"0":`${r}${n||a?"":e<0?" - ":" + "}${i}`}`}},339312:(e,t,n)=>{n.d(t,{Ew:()=>r,JV:()=>i,ZZ:()=>a,k5:()=>assertRegressionDatasetIsNumerical})
var a,i,r,s=n(232606),o=(n(399658),n(573133))
!function(e){e.LINEAR="LINEAR"
e.LOGISTIC="LOGISTIC"}(a||(a={}))
!function(e){e.MIN="MIN"
e.MAX="MAX"
e.IC50="IC50"
e.HILL_SLOPE="HILL_SLOPE"}(i||(i={}))
!function(e){e.NONE="NONE"
e.EQUAL="EQUAL"
e.LESS_THAN="LESS_THAN"
e.GREATER_THAN="GREATER_THAN"
e.BETWEEN="BETWEEN"}(r||(r={}))
function assertRegressionDatasetIsNumerical(e){(0,s.hu)(e.axisTypes.x===o.g.NUMBER,"Expected dataset to have a numerical x-axis")}},731772:(e,t,n)=>{n.d(t,{Z:()=>prettyExpression})
var a=n(201261)
function prettyExpression(e,t){const n=(0,a.Z)(e)
return 0===e?"0":null==t?`${n}`:1===e?t:-1===e?`-${t}`:`${n}${t}`}},598738:(e,t,n)=>{n.d(t,{Z:()=>getDateDomain})
function getDateDomain(e){const t=e.map((e=>new Date(e).getTime()))
return[new Date(Math.min(...t)),new Date(Math.max(...t))]}},201261:(e,t,n)=>{n.d(t,{Z:()=>prettyChartNumber})
function prettyChartNumber(e,t=!1){return t?e.toLocaleString(void 0,{maximumFractionDigits:20}):Math.abs(e)>=1e9||Math.abs(e)<.001&&Math.abs(e)>0?e.toLocaleString(void 0,{notation:"scientific",maximumFractionDigits:2}):e.toLocaleString(void 0,{maximumFractionDigits:3})}},648068:(e,t,n)=>{n.d(t,{DF:()=>getTooltipTitle,ZD:()=>tagShouldRenderChips,no:()=>getTooltipTitleFromInternalLink,sN:()=>getPopoverContent,uC:()=>getSharedSmartChipProps,x9:()=>T})
var a=n(64558),i=n(602652),r=n.n(i),s=n(989526),o=n(459830),l=n(227887),c=n(216101),d=n(497790),u=n(996693),m=n(251808),p=n(778223),h=n(379346),E=n(556543),S=n(591427)
const T={className:r().string,id:r().string,isInaccessible:r().bool,isLink:r().bool,negative:r().bool,onClick:r().func,onBlur:r().func,onFocus:r().func,onKeyDown:r().func,onRemove:r().func,size:r().oneOf(Object.values(p.TK)).isRequired,tooltipTitleOverride:r().string,displayNameOverride:r().string,getSecondaryText:r().func}
function getSharedSmartChipProps(e){return(0,a.m8)(Object.entries(e).filter((([e,t])=>T.hasOwnProperty(e))))}function getTooltipTitle(e){return h.ZP.isBiologicalEntity(e.id)?function getBioentityTooltipTitle(e){const t=(0,c.getPrimaryRegistryIdentifierGraphQL)(e)
return getBioentityTooltipTitleFromParts({name:e.name,primaryRegistryIdentifier:t})}(e):h.ZP.isStorable(e.id)?getStorableTooltipTitle(e):h.ZP.isBatch(e.id)?function getBatchTooltipTitle(e){return`Batch of ${e.bioentity.name}`}(e):h.ZP.isParty(e.id)?e.name:""}function getPopoverContent(e){let t
if(h.ZP.isBiologicalEntity(e.id))t=function getBioentityPopoverInfo(e){var t
return{fields:[{key:"Name",value:e.name},{key:"Schema",value:null===(t=e.tagSchema)||void 0===t?void 0:t.name},{key:"Registry ID",value:(0,c.getPrimaryRegistryIdentifierGraphQL)(e)}]}}(e)
else if(h.ZP.isStorable(e.id))t=function getStorablePopoverInfo(e){var t
return{fields:[{key:"Barcode",value:null===(t=e.barcode)||void 0===t?void 0:t.value},{key:"Name",value:e.name}]}}(e)
else{if(!h.ZP.isBatch(e.id))return null
t=function getBatchPopoverInfo(e){return{fields:[{key:"Name",value:`Batch of ${e.bioentity.name}`}]}}(e)}return s.createElement(S.Z,{info:t})}function getBioentityTooltipTitleFromParts({name:e,primaryRegistryIdentifier:t}){let n=""
t&&(n+=`Registry ID: ${t}\n`)
n+=`Name: ${e}`
return n}function getStorableTooltipTitle(e){let t=""
e.barcode&&(t+=`Barcode: ${e.barcode.value}\n`)
t+=`Name: ${e.name}`
return t}function getTooltipTitleFromInternalLink(e){const{id:t,name:n,displayLabel:a,barcode:i,humanId:r,primaryRegistryIdentifier:s,schemaValidationState:l,validationExtras:c}=e
if(!t)return
const d=a||n,m=(0,u.Z)(l,c)
if(m)return m
if(h.ZP.isBiologicalEntity(t))return getBioentityTooltipTitleFromParts({name:d,primaryRegistryIdentifier:s})
if(h.ZP.isStorable(t))return getStorableTooltipTitle({barcode:null!=i?{__typename:"BarcodeNode",value:i}:null,name:d})
if([o.ENTRY,o.STAGE_ENTRY,o.WORKFLOW].includes(h.ZP.apiIdToType(t))){let t=""
r&&(t+=`ID: ${e.humanId}\n`)
t+=`Name: ${d}`
return t}}function tagShouldRenderChips(e){return function chipsSupportedForTagType(e){return Boolean((0,l.Yx)(e)&&(E.Iv(e.tagSchemaField.fieldType)||e.tagSchemaField.fieldType===d.FIELD_TYPES.BLOB_LINK.type))}(e)&&m.PB(e)}},465534:(e,t,n)=>{n.d(t,{Z:()=>LoadingChip})
var a=n(989526),i=n(778223)
function LoadingChip(e){return a.createElement(i.ZP,{...e,text:"Loading..."})}},956435:(e,t,n)=>{n.d(t,{N:()=>o,Z:()=>NoAccessChip})
var a=n(602652),i=n.n(a),r=n(989526),s=n(778223)
const o="(No access)"
function NoAccessChip(e){return r.createElement(s.ZP,{...e,text:o})}NoAccessChip.propTypes={className:i().string,onKeyDown:i().func,onRemove:i().func,size:i().oneOf(Object.values(s.TK)).isRequired}},198964:(e,t,n)=>{n.d(t,{Xh:()=>closeDropdown,ZP:()=>c})
var a=n(764403),i=n.n(a),r=n(602652),s=n.n(r),o=n(989526),l=n(305466)
function closeDropdown(e){e.setState({isOpen:!1})}class Dropdown extends o.Component{constructor(){super(...arguments)
this.state={isOpen:!1}
this._handleToggle=e=>{e.stopPropagation()
this._doToggle(!this._isOpen())}
this._handleOutsideClick=()=>{this.props.closeOnOutsideClick&&this._doToggle(!1)}}_isOpen(){return null!=this.props.isOpen?this.props.isOpen:this.state.isOpen}_doToggle(e){this.props.onToggle?this.props.onToggle(e):this.setState({isOpen:e})}render(){return o.createElement(l.ZP,{className:i()("dropdownComponent",this.props.className),menu:this.props.menu,onRequestClose:this._handleOutsideClick,open:this._isOpen(),shouldCloseOnInsideClick:this.props.closeOnInsideClick,canDropUnder:this.props.canDropUnder,alwaysDropDown:this.props.alwaysDropDown,alwaysDropUp:this.props.alwaysDropUp},o.createElement(DropdownToggle,{onClick:this._handleToggle},this.props.children))}}Dropdown.propTypes={children:s().node.isRequired,className:s().string,closeOnInsideClick:s().bool,closeOnOutsideClick:s().bool,menu:s().node.isRequired,isOpen:s().bool,onToggle:s().func}
Dropdown.defaultProps={closeOnInsideClick:!0,closeOnOutsideClick:!0,canDropUnder:!1,alwaysDropDown:!1,alwaysDropUp:!1}
const c=Dropdown
class DropdownToggle extends o.Component{render(){const e=o.Children.only(this.props.children),t=e.props.disabled?null:e.props.onClick||this.props.onClick
return o.cloneElement(e,{onClick:t})}}DropdownToggle.propTypes={children:s().element.isRequired,onClick:s().func.isRequired}},198438:(e,t,n)=>{n.d(t,{D:()=>EntityInputWithSearch,t:()=>f})
var a=n(989526),i=n(926025),r=n(232606),s=n(348920),o=n(206305),l=n(897100),c=n(377249),d=n(709759),u=n(974913),m=n(166459),p=n(951241),h=n(808844),E=n(335609),S=n(257846),T=n(610088),g=n(492092)
var f
!function(e){e[e.All=0]="All"
e[e.None=1]="None"
e[e.NotSuspended=2]="NotSuspended"}(f||(f={}))
class EntityInputWithSearch extends a.Component{constructor(){var e
super(...arguments)
this._search=e=>{var t,n
const a=Boolean(null==e?void 0:e.searchForAllResults)&&this._allowAllResultsQuery(),i=a?" ":this.state.text
let r=null===(n=(t=this.props).search)||void 0===n?void 0:n.call(t,i)
if(null==r){const e={q:i}
this.props.organizationIds&&(e.organizationIds=this.props.organizationIds.join(","))
const t={...e,includeTeams:this.props.allowTeams,includeOrgs:this.props.allowOrganizations,includeBenchlingApps:this.props.allowBenchlingApps,userSearchType:this.props.userSearchType}
r=Promise.resolve(o.yC(t))}this.fetchSuggestionsPromise=(0,l.Z)(r)
this.fetchSuggestionsPromise.promise.then((e=>{if(i===this.state.text||a){this.setState({suggestions:e.entitySummaries,suspendedUserIds:new Set(e.suspendedUserIds),isLoading:!1,allPossibleSuggestions:" "===i?e.entitySummaries:this.state.allPossibleSuggestions})
!function cacheSearchResults(e){const t={}
for(const n of null!=e?e:[])"user"===n.type&&(t[n.handle]=(0,E.Z)(n,"id","avatar_url","handle","institution","joinedOn","name","type","url_identifier"))
Object.keys(t).length>0&&(0,m.getStore)().dispatch((0,d.IH)(c.V.ENTITY_SUMMARY_BY_HANDLE,t))}(e.entitySummaries)}})).catch((e=>{u.ZP.notifyError(e,{id:"entityInput"})
this.setState({isLoading:!1})}))}
this.fetchSuggestionsPromise=null
this._debouncedSearch=(0,i.D)((e=>{this._search(e)}),250)
this.state={suggestions:[],suspendedUserIds:new Set,text:null!==(e=this.props.initialQuery)&&void 0!==e?e:"",isLoading:!1}
this._filterSuggestions=(e,t)=>this.props.filterOptions?this.props.filterOptions(e,t):t
this._handleChangeInput=e=>{this.props.onChangeInput&&this.props.onChangeInput(e)
this.setState({text:e,isLoading:!0})
this._debouncedSearch()}
this._handleFocus=e=>{if(this._allowAllResultsQuery()){this.setState({isLoading:!0})
this._debouncedSearch({searchForAllResults:!0})}}
this._handleChange=e=>{const t=e.filter((e=>(0,p.aO)(e)?Boolean(this.props.customPartyOptions):!!e.handle||(!(!this.props.allowEmails||!e.email)||this.props.allowUnvalidatedEntities&&Boolean(e.text))))
this.props.customPartyOptions,this.props.onChange(t)}}_allowAllResultsQuery(){return""===this.state.text&&Boolean(this.props.searchAllResultsOnFocus)}componentWillUnmount(){this.fetchSuggestionsPromise&&this.fetchSuggestionsPromise.cancel()}_getPlaceholder(){if(this.props.placeholder)return this.props.placeholder
const e=[]
this.props.userSearchType!==f.None&&e.push("user")
this.props.allowEmails&&e.push("email")
s.ZP.ENABLE_TEAMS&&this.props.allowTeams&&e.push("team")
this.props.allowOrganizations&&e.push("organization")
this.props.allowBenchlingApps&&e.push("app");(0,r.hu)(e.length>0,"Expected at least one allowed party type")
return`Search for a ${(0,h.Dw)(e,"or")}`}_isSuspended(e){return this.state.suspendedUserIds.has(e.id)}_getSuggestions(){var e,t,n
if(this._allowAllResultsQuery()&&(null!==(t=null===(e=this.state.allPossibleSuggestions)||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0)return this.state.allPossibleSuggestions
const a=[...null!==(n=(0,p.c6)(this.props.customPartyOptions))&&void 0!==n?n:[]]
if(null==this.state.suggestions)return a
this.props.allowEmails&&0===this.state.suggestions.length&&S.Z.isValidEmail(this.state.text)?a.push({id:this.state.text,handle:"",email:this.state.text}):a.push(...this.state.suggestions.map((e=>({...e,text:e.handle,suspended:this._isSuspended(e)}))))
return a}getEmptyText(){var e,t
return this.props.loadingText&&this.state.isLoading?this.props.loadingText:this.props.searchAllResultsOnFocus&&this.props.emptyTextForAllResultsSearch&&0===(null===(e=this.state.allPossibleSuggestions)||void 0===e?void 0:e.length)?this.props.emptyTextForAllResultsSearch:null!==(t=this.props.emptyText)&&void 0!==t?t:""}render(){const e=this._getSuggestions()
if(this.props.enableNewEntityInput){const t=this.getEmptyText()
let n=this._allowAllResultsQuery()||""!==this.state.text?e:null
this.state.isLoading&&(n=this.props.loadingText?[]:null)
return a.createElement(T.Z,{allOptions:n,forceDisplayOptionsOnFocus:this.props.searchAllResultsOnFocus,autoFocus:this.props.autoFocus,value:this.props.value,placeholder:this._getPlaceholder(),buttonProps:this.props.buttonProps,emptyText:t,onChange:this._handleChange,onChangeInput:this._handleChangeInput,onEnter:this.props.onEnter,onFocus:this._handleFocus,onKeyDown:this.props.onKeyDown,filterOptions:this._filterSuggestions,shouldAllowMultiple:this.props.shouldAllowMultiple,query:this.state.text,className:this.props.className,disabled:this.props.disabled,isReadOnly:this.props.isReadOnly,chipSize:this.props.entityInputChipSize})}return a.createElement(g.b,{allOptions:this._getSuggestions(),value:this.props.value,allowAdjustInputWidth:this.props.allowAdjustInputWidth,placeholder:this._getPlaceholder(),buttonProps:this.props.buttonProps,addKeys:this.props.addKeys,allowUnvalidatedEntities:this.props.allowUnvalidatedEntities,emptyText:this.props.emptyText,onChange:this._handleChange,onChangeInput:this._handleChangeInput,onHoverOption:this.props.onHoverOption,onEnter:this.props.onEnter,onKeyDown:this.props.onKeyDown,filterOptions:this._filterSuggestions,shouldAllowMultiple:this.props.shouldAllowMultiple,size:this.props.size,dataTestAttrs:{component:"EntityInputWithSearch",element:"entityInput"},disabled:this.props.disabled})}}EntityInputWithSearch.defaultProps={allowEmails:!1,allowUnvalidatedEntities:!1,userSearchType:f.NotSuspended,initialQuery:"",allowTeams:!0,allowOrganizations:!0,allowBenchlingApps:!1,enableNewEntityInput:!1}},319675:(e,t,n)=>{n.d(t,{$:()=>SingleEntityInput})
var a=n(602652),i=n.n(a),r=n(989526),s=n(232606),o=n(974913),l=n(334148),c=n(198438),d=n(257846)
class SingleEntityInput extends r.Component{constructor(){super(...arguments)
this.state={hoveredOption:{text:""}}
this._handleClickButton=e=>{e.preventDefault()
this._handleSelectOption([this.state.hoveredOption])
this.props.buttonProps.onClick&&this.props.buttonProps.onClick(e)}
this._handleSelectOption=e=>{(0,s.Gp)(e.length<=1,"SingleEntityInput._handleSelectOption must be passed at most one option")
const t=e[0]
t&&(t.handle?this.props.onSubmit({entity:t}):this.props.allowEmails&&(t.text&&d.Z.isValidEmail(t.text)||t.email&&d.Z.isValidEmail(t.email))?this.props.onSubmit({email:t.email||t.text}):t.text&&t.text.trim()&&o.ZP.error(`Sorry, no one named ${t.text} found.`))}
this._handleHoverOption=e=>{this.setState({hoveredOption:e})}}render(){const{buttonProps:e,onSubmit:t,...n}=this.props
return r.createElement(c.D,{value:[],allowUnvalidatedEntities:!0,buttonProps:e&&{...e,onClick:this._handleClickButton},onChange:this._handleSelectOption,onHoverOption:this._handleHoverOption,...n})}}SingleEntityInput.propTypes={allowEmails:i().bool,allowTeams:i().bool,allowOrganizations:i().bool,allowBenchlingApps:i().bool,organizationIds:i().array,enableNewEntityInput:i().bool,addKeys:i().arrayOf(i().number),buttonProps:i().shape({buttonStyle:i().oneOf(Object.values(l.ZJ)).isRequired,size:i().string.isRequired,onClick:i().func}),emptyText:i().string,autoFocus:i().bool,filterOptions:i().func,onChangeInput:i().func,onSubmit:i().func.isRequired,placeholder:i().string,size:i().string}},6193:(e,t,n)=>{n.d(t,{Lr:()=>a,Tp:()=>c,ZP:()=>useAsyncState,cC:()=>makeAsyncCall,dw:()=>useAsyncStateOnMount,yf:()=>getMostRecentData})
var a,i=n(974913),r=n(150126),s=n(771398),o=n(389760),l=n(308783)
!function(e){e.NOT_FETCHED="NOT_FETCHED"
e.LOADING="LOADING"
e.SUCCESS="SUCCESS"
e.ERROR="ERROR"}(a||(a={}))
const c={status:a.NOT_FETCHED}
async function makeAsyncCall({makeCall:e,args:t,asyncState:n,setAsyncState:o}){o({status:a.LOADING,previousData:getMostRecentData(n)})
try{const n=await e(...t)
o({status:a.SUCCESS,data:n})}catch(e){if(!s.d0(e))throw e
o({status:a.ERROR,message:i.ZP.getFriendlyError(e)||r.F,responseJSON:e})}}function useAsyncState(e){const[t,n]=(0,l.Z)(c)
return{currentState:t,makeCall:(...a)=>makeAsyncCall({makeCall:e,args:a,asyncState:t,setAsyncState:n})}}function getMostRecentData(e){switch(e.status){case a.LOADING:return e.previousData
case a.SUCCESS:return e.data
default:return null}}function useAsyncStateOnMount(e){const{currentState:t,makeCall:n}=useAsyncState(e);(0,o.Z)((()=>{n()}))
return t}},540332:(e,t,n)=>{n.d(t,{Z:()=>useDraftState})
var a=n(989526)
function useDraftState(e){const[t,n]=(0,a.useState)(e),[i,r]=(0,a.useState)(!1)
return{data:i?t:e,updateDraftData:e=>{n({...t,...e})},isEditing:i,startEditing:()=>{n(e)
r(!0)},stopEditing:()=>{r(!1)}}}},505881:(e,t,n)=>{n.d(t,{Z:()=>useFunctionIfMounted})
var a=n(272853)
function useFunctionIfMounted(e){const t=(0,a.Z)()
return n=>{t.current&&e(n)}}},272853:(e,t,n)=>{n.d(t,{Z:()=>useIsNotUnmounted})
var a=n(989526)
function useIsNotUnmounted(){const e=(0,a.useRef)(!0);(0,a.useEffect)((()=>{e.current=!0
return()=>{e.current=!1}}),[])
return e}},854185:(e,t,n)=>{n.d(t,{Z:()=>usePreference})
var a=n(989526),i=n(950635),r=n(432128)
function usePreference(e){const t=(0,a.useCallback)((t=>{const n=`change:${e}`
r.Z.on(n,t)
return()=>{r.Z.off(n,t)}}),[e]),n=(0,a.useCallback)((t=>{r.Z.set(e,t)}),[e])
return[(0,i.useSyncExternalStore)(t,(()=>r.Z.get(e))),n]}},906621:(e,t,n)=>{n.d(t,{Z:()=>usePrevious})
var a=n(989526)
function usePrevious(e){const t=(0,a.useRef)();(0,a.useEffect)((()=>{t.current=e}))
return t.current}},127081:(e,t,n)=>{n.d(t,{Z:()=>useWarnOnNavigate})
var a=n(989526),i=n(138966)
function useWarnOnNavigate(e,t){(0,a.useEffect)((()=>{if(!e)return
const n=(0,i.rJ)(t)
function beforeunloadHandler(e){e.preventDefault()
return t}window.addEventListener("beforeunload",beforeunloadHandler)
return()=>{n()
window.removeEventListener("beforeunload",beforeunloadHandler)}}),[e,t])}},761974:(e,t,n)=>{n.d(t,{Z:()=>AddIcon})
var a=n(989526),i=n(224993)
function AddIcon({onClick:e,disabled:t=!1,altText:n,className:r="u-small-spacing-left",dataTestAttrs:s}){return a.createElement(i.Z,{icon:"compose",onClick:e,disabled:t,iconStyle:i.L.POSITIVE,altText:n,className:r,dataTestAttrs:s})}},994495:(e,t,n)=>{n.d(t,{Z:()=>SettingsIcon})
var a=n(692013),i=n(764403),r=n.n(i),s=n(989526),o=n(531041),l=n(271359),c=n(36424)
function SettingsIcon(e){const t=r()((0,a.iv)(d.icon),(0,a.iv)(e.disabled?d.disabled:d.enabled),(0,a.iv)(e.highlighted&&d.highlighted),"settingsIcon",e.className),n=o.default.omit(e,"className","highlighted","onClick")
return s.createElement(c.Z,{className:t,icon:"settings",onClick:e.disabled?void 0:e.onClick,...n})}const d=a.mM.create({icon:{fontSize:"14px"},enabled:{color:l.TG,":hover":{color:l.t0},cursor:"pointer"},disabled:{color:l.pF},highlighted:{color:l.t0,":hover":{color:l.mu}}})},402763:(e,t,n)=>{n.d(t,{Bf:()=>T,Kq:()=>g,ZP:()=>ChipSearchInput})
var a=n(84587),i=n.n(a),r=n(989526),s=n(926025),o=n(178570),l=n(974913),c=n(62315),d=n(476604),u=n(435191),m=n(771398),p=n(687201)
const h={name:c.SN,value:{},disabled:!0},E={},S=c.ci.FOR_WRITE_ACTION,T=(0,s.D)(((e,t,n,a)=>{m.ty({url:e,data:{query:t,...n}}).done(a.done).fail(a.fail).always(a.always)}),250),g=(0,s.D)(((e,t,n,a)=>{m.xA(e,{q:t,...n}).done(a.done).fail(a.fail).always(a.always)}),250)
function ChipSearchInput(e){const[t,n]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),[m,T]=(0,r.useState)([]),g=(0,r.useRef)(null),{query:f,fetchParams:I,searchURL:A,getOptionDatasFromResponse:y,doSearch:_,searchOnEmptyQuery:C,renderOptionContent:R,onSearchStart:N,onSearchSuccess:O}=e;(0,r.useEffect)((()=>{let e=!1
const isStaleSearch=t=>e||g.current!==t
T([])
if(f||C){s(!0)
n(null);(()=>{if(!f&&!C)return
const e=(0,o.Z)()
g.current=e
const t={...I,context:I.context||S}
null==N||N()
_(A,f,t,{done:(t,a,i)=>{null==O||O(t)
if(isStaleSearch(e))return
let r=y(t)
f&&f.length>0&&f.length<c.xv&&(r=[h,...r])
const s=null==i?void 0:i.getResponseHeader(c.pf)
r.forEach(((e,t)=>{if("object"==typeof e.value){e.value._searchCorrelationId=s
e.value._searchPosition=t+1}}))
T(r)
n(null)},fail:t=>{if(isStaleSearch(e))return
const a=l.ZP.getFriendlyError(t)||"An error occurred."
T([])
n(a)},always:()=>{if(!isStaleSearch(e)){s(!1)
g.current=null}}})})()}else{s(!1)
n(null)
g.current=null}return()=>{e=!0}}),[f,i()(I),A,C])
const renderSearchOptionContent=e=>{if(e===h){const{value:t,...n}=e
return(0,u.xG)(n)}return(R||u.xG)(e)}
if(m.length)return r.createElement(p.Z,{...e,optionDatas:m,renderOptionContent:renderSearchOptionContent})
const b=function getNoResultsOptionDatas(e,t,n,a){let i,s=!1
if(null!=e)i=e
else if(t)i=r.createElement(d.Z,null)
else if(n)i=n.length>0&&n.length<c.xv?c.SN:"No results found."
else{i="Search for an item."
s=null!=a&&a.length>0}const o=[{name:i,className:s?"":"u-text-align-center",skipIconOverride:!0}]
return s?[...o,...a.map((({option:e,onClick:t})=>({...e,value:{_sentinel:E,onClick:t}})))]:o}(t,a,f,e.noResultsOptions),v=b.length>1
return r.createElement(p.Z,{...e,onSelect:v?function onSelect(t){null==t||t._sentinel!==E?null!=e.onSelect&&e.onSelect(t):t.onClick()}:null,renderOptionContent:null,optionDatas:b})}},286221:(e,t,n)=>{n.d(t,{ZP:()=>DatetimePicker,dM:()=>C})
var a=n(692013),i=n(764403),r=n.n(i),s=n(536105),o=n.n(s),l=n(989526),c=n(862783),d=n.n(c),u=n(573961),m=n(615439),p=n.n(m),h=n(531041),E=n(232606),S=n(494327),T=n(129270),g=n(271359),f=n(906621),I=n(759345),A=n(10584),y=n(134749)
const _="body",C=(0,S.x)((()=>({containerNodeSelector:_})),"DatetimePickerContext"),R="H:m",N=new Set(["a","p","A","P"])
function getDateObjFromTextValue(e,t){const n=e.trim()
return(0,A.Fz)({textValue:n,validFormats:t})&&n?o()(n,t,!0).toDate():null}function getTimeTextValueFromDatetime(e,t,n){const a=getDateObjFromTextValue(e,t)
return a&&n?(0,A.TM)(`${a.getHours()}:${a.getMinutes()}`,[R],n):""}class DatePickerTimeInput extends l.Component{constructor(){super(...arguments)
this.onChange=e=>{this.props.onTimeChange(e.target.value)}
this.handleBlur=e=>{const t=e.target.value||(0,A.TM)("12:00 AM",[A.$y],this.props.timePresentationalFormat);(0,A.sC)({textValue:t,validTimeFormats:this.props.timeInformalInputFormats})&&this.props.onTimeChange((0,A.TM)(t,this.props.timeInformalInputFormats,this.props.timePresentationalFormat))}}render(){return l.createElement(I.Z,{disabled:this.props.disabled,onBlur:this.handleBlur,autoFocus:this.props.autoFocus,className:r()(this.props.className,(0,a.iv)(O.pickerTimeInput)),hasButton:this.props.hasButton,hasError:!(0,A.sC)({textValue:this.props.timeValue.trim(),validTimeFormats:this.props.timeInformalInputFormats}),value:this.props.timeValue,onChange:this.onChange,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,placeholder:this.props.placeholder,size:this.props.size,type:y.Lq.TEXT})}}DatePickerTimeInput.defaultProps={autoFocus:!1,hasButton:!1,hasError:!1,type:y.Lq.TEXT}
class DatePickerDatetimeInput extends l.Component{constructor(){super(...arguments)
this.onChange=e=>{(0,A.rt)({textValue:e.target.value.trim(),min:this.props.min,max:this.props.max,validDatetimeFormats:this.props.validDatetimeInputFormats})&&this.props.onChange(e)
this.props.onDirectChange&&this.props.onDirectChange(e.target.value)}
this.handleBlur=e=>{const t=e.target.value.trim();(0,A.rt)({textValue:t,validDatetimeFormats:this.props.validDatetimeInputFormats})&&this.props.onDirectChange&&this.props.onDirectChange(this.formatDatetime(t))}}shouldComponentUpdate(e){return!p()(h.default.omit(this.props,["value"]),h.default.omit(e,["value"]))}formatDatetime(e){return(0,A.rt)({textValue:e.trim(),validDatetimeFormats:this.props.validDatetimeInputFormats})?(0,A.TM)(e.trim(),this.props.validDatetimeInputFormats,this.props.datetimePresentationalFormat):e}render(){return l.createElement(I.Z,{onBlur:this.handleBlur,autoFocus:this.props.autoFocus,className:r()(this.props.className,this.props.datetimeInputClassName),ref:"input",hasButton:this.props.hasButton,hasError:!(0,A.rt)({textValue:this.props.datetimeValue.trim(),min:this.props.min,max:this.props.max,validDatetimeFormats:this.props.validDatetimeInputFormats}),value:this.props.datetimeValue,onChange:this.onChange,onFocus:this.props.onFocus,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,placeholder:this.props.placeholder,size:this.props.size,type:y.Lq.TEXT,disabled:this.props.disabled})}}DatePickerDatetimeInput.defaultProps={autoFocus:!1,hasButton:!1,hasError:!1,type:y.Lq.TEXT}
function DatetimePicker(e){var t,n
const[i,s]=function useTimeState(e,t,n){const a=getTimeTextValueFromDatetime(e,t,n),i=getTimeTextValueFromDatetime(e,t,R),[r,s]=(0,l.useState)(a)
if((0,f.Z)(e)===e||a===r||"0:0"===i&&""===r)return[r,s]
s(a)
return[a,s]}(e.value,e.validDatetimeInputFormats,e.timePresentationalFormat),setValue=(t,n)=>{if(e.onChange&&(!n||"change"!==n.type)){const n=t?o()(t.toISOString()).format(e.datetimePresentationalFormat):""
e.onChange(n)}},c=(0,l.useCallback)((({children:t})=>{const n=document.querySelector(e.datePickerPopperContainerSelector);(0,E.Gp)(null!=n,"provided node not found")
return u.createPortal(t,null!=n?n:document.querySelector(_))}),[e.datePickerPopperContainerSelector])
return l.createElement(d(),{...h.default.omit(e,"onChange","value","size","min","max","wrapperClassName","popperClassName","calendarClassName","validDatetimeInputFormats","datetimePresentationalFormat","timeInformalInputFormats","timeFormalInputFormats","timePresentationalFormat","datePickerPopperContainerSelector","placeholder","timeInputPlaceholder","datetimeInputClassName"),wrapperClassName:r()((0,a.iv)(O.pickerWrapper),e.wrapperClassName),popperClassName:r()((0,a.iv)(O.pickerPopper),e.popperClassName),calendarClassName:r()((0,a.iv)(O.pickerCalendar),e.calendarClassName),onCalendarOpen:()=>{!e.value&&e.onChange&&e.onChange(o()().format(e.datetimePresentationalFormat))},onCalendarClose:()=>{s(getTimeTextValueFromDatetime(e.value,e.validDatetimeInputFormats,e.timePresentationalFormat))},onChange:setValue,popperContainer:e.datePickerPopperContainerSelector?c:void 0,selected:getDateObjFromTextValue(e.value,e.validDatetimeInputFormats),minDate:getDateObjFromTextValue(null!==(t=e.min)&&void 0!==t?t:"",e.validDatetimeInputFormats),maxDate:getDateObjFromTextValue(null!==(n=e.max)&&void 0!==n?n:"",e.validDatetimeInputFormats),placeholderText:e.placeholder,customInput:l.createElement(DatePickerDatetimeInput,{datetimeInputClassName:e.datetimeInputClassName,size:e.size,onDirectChange:e.onChange,datetimeValue:e.value,min:e.min,max:e.max,validDatetimeInputFormats:e.validDatetimeInputFormats,datetimePresentationalFormat:e.datetimePresentationalFormat,disabled:e.disabled}),customTimeInput:e.showTimeInput?l.createElement(DatePickerTimeInput,{disabled:e.disabled||!(0,A.rt)({textValue:e.value.trim(),validDatetimeFormats:e.validDatetimeInputFormats}),size:e.size,onKeyDown:e.onKeyDown,onTimeChange:t=>{if(function isValidFormalTime(e,t){return(0,A.sC)({textValue:e,validTimeFormats:t})&&!N.has(e[e.length-1])}(t.trim(),e.timeFormalInputFormats)){const n=e.timeFormalInputFormats?(0,A.TM)(t.trim(),e.timeFormalInputFormats,R):"",a=getDateObjFromTextValue(e.value,e.validDatetimeInputFormats)||new Date
if(n){const e=n.split(":")
a.setHours(parseInt(e[0],10))
a.setMinutes(parseInt(e[1],10))}else{a.setHours(0)
a.setMinutes(0)
a.setSeconds(0)}setValue(a)}s(t)},timeValue:i,timeInformalInputFormats:e.timeInformalInputFormats,timeFormalInputFormats:e.timeFormalInputFormats,timePresentationalFormat:e.timePresentationalFormat,placeholder:e.timeInputPlaceholder}):void 0,ref:e.datetimePickerRef})}DatetimePicker.defaultProps={shouldCloseOnSelect:!1,showPopperArrow:!1,timeInputPlaceholder:"hh:mm AM/PM",size:y.$u.SMALL}
const O=a.mM.create({pickerWrapper:{width:"100%"},pickerTimeInput:{width:"105px"},pickerPopper:{width:"222.39px",height:"200px",marginTop:"0",zIndex:3},pickerCalendar:{width:"100%",height:"100%",fontFamily:T.I3,fontStyle:"normal",borderColor:g.TG,color:g.pp,...T.Iv}})},801455:(e,t,n)=>{n.d(t,{S:()=>FieldRequiredIndicator,Z:()=>u})
var a=n(692013),i=n(764403),r=n.n(i),s=n(602652),o=n(989526),l=n(263137),c=n(271359),d=n(134749)
function FieldRequiredIndicator(){return o.createElement("span",{className:"u-danger-color"},"*")}class FieldLabel extends o.Component{render(){return o.createElement("label",{className:r()(this.props.grayOutForeground&&(0,a.iv)(m.grayForeground),this.props.className,{"fieldLabel-label":this.props.labelStyle===d.WS.LABEL,"fieldLabel-sublabel":this.props.labelStyle===d.WS.SUBLABEL,"sr-only":this.props.labelStyle===d.WS.HIDDEN}),htmlFor:this.props.htmlFor,...(0,l.Z)(this.props.dataTestAttrs)},this.props.label,this.props.isRequired&&o.createElement(FieldRequiredIndicator,null))}}FieldLabel.propTypes={...d.jk,className:s.string,htmlFor:s.string,grayOutForeground:s.bool}
FieldLabel.defaultProps={isRequired:!1,labelStyle:d.gF.LABEL}
FieldLabel.STYLES=d.WS
const u=FieldLabel,m=a.mM.create({grayForeground:{color:c.TG}})},554475:(e,t,n)=>{n.d(t,{Z:()=>Section})
var a=n(865486)
function Section(e){return null}Section.defaultProps={_role:a.K$.SECTION}},831144:(e,t,n)=>{n.d(t,{Y:()=>E,Z:()=>h})
var a=n(692013),i=n(764403),r=n.n(i),s=n(602652),o=n(989526),l=n(531041),c=n(389528),d=n(263137),u=n(666743),m=n(644784),p=n(583960)
class ReorderableSimpleTable extends o.Component{constructor(){super(...arguments)
this.state={currentlyOrderedRows:this.props.rows}
this._handleMoveItem=e=>{const t=l.default.indexBy(this.state.currentlyOrderedRows,"id")
this.setState({currentlyOrderedRows:e.map((e=>t[e]))})}
this._handleMoveItemEnd=e=>{const t=l.default.findIndex(this.state.currentlyOrderedRows,(t=>t.id===e))
this.props.onReorderRow&&this.props.onReorderRow(e,t)}}UNSAFE_componentWillReceiveProps(e){e.rows!==this.props.rows&&this.setState({currentlyOrderedRows:e.rows})}_getRowDatas(){return this.state.currentlyOrderedRows.map((e=>({id:e.id,itemProps:{row:e,rowClassName:e.rowClassName,isDraggingDisabled:this.props.isDraggingDisabled},itemClass:p.Z})))}render(){return o.createElement("div",{className:"metadata-table simpleDivTable",...(0,d.Z)(this.props.dataTestAttrs)},o.createElement("div",{className:"simpleDivTable-header"},this.props.headerCells.map((e=>o.createElement("div",{key:e.key,className:r()("simpleDivTable-headerCell",e.cellClassName)},o.createElement("div",{className:r()("u-small-spacing-bottom",e.contentsClassName)},e.contents))))),this.props.rows.length?o.createElement(u.Z,{itemDatas:this._getRowDatas(),onMoveItem:this._handleMoveItem,onMoveItemEnd:this._handleMoveItemEnd}):o.createElement("div",{className:"simpleDivTable-row"},o.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--emptyMessage"},o.createElement("span",{className:"u-faded"},this.props.noRowsText))),this.props.footerCells&&o.createElement("div",{className:"simpleDivTable-footer"},this.props.footerCells.map((e=>o.createElement("div",{key:e.key,className:r()("simpleDivTable-cell",e.cellClassName)},o.createElement("div",{className:e.contentsClassName},e.contents))))))}}ReorderableSimpleTable.propTypes={headerCells:s.arrayOf(m.Y.isRequired).isRequired,footerCells:s.arrayOf(m.Y.isRequired),isDraggingDisabled:s.bool.isRequired,noRowsText:s.string.isRequired,onReorderRow:s.func,rows:s.arrayOf(m.f.isRequired).isRequired,dataTestAttrs:c.C}
const h=ReorderableSimpleTable,E=a.mM.create({wideColumn:{flex:6},wrapText:{lineHeight:"normal",whiteSpace:"normal"}})},489678:(e,t,n)=>{n.d(t,{FU:()=>v,TT:()=>ScrollableTable,ZP:()=>D})
var a=n(64558),i=n(764403),r=n.n(i),s=n(734100),o=n(767807),l=n.n(o),c=n(602652),d=n.n(c),u=n(989526),m=n(531041),p=n(232606),h=n(545135),E=n(634489),S=n(59967),T=n(432128),g=n(263137),f=n(356873),I=n(389752),A=n(972221),y=n(497690),_=n(338978),C=n(986401),R=n(63573),N=n(894278),O=n(243348),b=n(126324)
const v=165,P={hiddenColumnKeys:[],onUpdateHiddenColumns:void 0},L={allowOverflow:!0,canFilterColumns:!1,canResizeColumns:!1,emptyTableText:"No rows",getRowContentHeight:()=>R._5,hasLineBelowHeader:!0,isCompact:!1,matchParentHeight:!1}
class ScrollableTableConnector extends E.C{constructor(e){super(e)
this.handleUpdateHiddenColumns=e=>{var t
this.dispatch(b.li(null!==(t=this.props.tableKey)&&void 0!==t?t:"",e))}
this.uncachedEnhanceProps=()=>{var e
if(!this.props.canFilterColumns)return P;(0,p.Gp)(null!=this.props.tableKey,"Expected tableKey if canFilterColumns")
return{hiddenColumnKeys:new _.W(this.reduxState()).getHiddenColumnKeysForTable(null!==(e=this.props.tableKey)&&void 0!==e?e:"",this.props.defaultHiddenColumnKeys),onUpdateHiddenColumns:this.handleUpdateHiddenColumns}}
this.enhanceProps=(0,I.Z)(this.uncachedEnhanceProps)}}class ScrollableTable extends u.PureComponent{constructor(e){super(e)
this.getInitialState=()=>{const e={}
this.props.canResizeColumns&&this.props.columns.forEach((t=>{(0,p.hu)(null!=this.props.tableKey,"tableKey is required if canResizeColumns")
const n=t.columnKey||t.accessorKey,a=T.Z.get(this.getColumnWidthPreferenceKey(this.props.tableKey,n))
void 0!==a&&(e[n]=a)}))
return{anchorRowId:null,collapsedColumns:this.props.columns.filter((e=>T.Z.get(`${R.VV.COLLAPSED_NAMESPACE}${e.accessorKey}`))).map((e=>e.accessorKey)),colWidthPreferences:e}}
this.getColumnWidthPreferenceKey=(e,t)=>`${e}.column_width.${t}`
this.isRowSelected=e=>{var t
return null!==(t=e.isSelected)&&void 0!==t&&t}
this.handleShiftSelect=e=>{const t=m.default.pluck(this.props.rows,"id"),n=this.state.anchorRowId?t.indexOf(this.state.anchorRowId):0,a=t.indexOf(e),i=this.props.rows.slice(Math.min(n,a),Math.max(n,a)+1);(0,p.hu)(null!=this.props.onRowsSelect,"Expected non-null onRowsSelect prop")
this.props.onRowsSelect(i,!this.props.rows[a].isSelected)}
this.handleRowSelect=(e,t,n)=>{(0,p.hu)(null!=this.props.onRowsSelect,"Expected non-null onRowsSelect prop")
if(this.props.rowSelectionMode===R.rT.SINGLE&&t){this.props.onRowsSelect(this.props.rows.filter((t=>t.id!==e.id)),!1)
this.props.onRowsSelect([e],!0)}else n&&this.props.rowSelectionMode!==R.rT.SINGLE?this.handleShiftSelect(e.id):this.props.onRowsSelect([e],t)
this.setState({anchorRowId:e.id})}
this.handleGlobalSelect=e=>{const t=e.target.checked;(0,p.hu)(null!=this.props.onRowsSelect,"Expected non-null onRowsSelect prop")
const n=this.props.rows.filter((e=>{var t
return null===(t=e.isSelectorPresent)||void 0===t||t}))
this.props.onRowsSelect(n,t)}
this.handleToggleCollapse=e=>{const t=this.state.collapsedColumns.indexOf(e.accessorKey),n=-1!==t
let a
a=n?l()(this.state.collapsedColumns,{$splice:[[t,1]]}):l()(this.state.collapsedColumns,{$push:[e.accessorKey]})
this.setState({collapsedColumns:a})
T.Z.set(`${R.VV.COLLAPSED_NAMESPACE}${e.accessorKey}`,!n)}
this.getRowClassName=e=>{if((0,y.Z)(this.props.rows,e))return"scrollableTable-row"
const t=this.props.rows[e]
return r()("scrollableTable-row",t.className,t.rowOnlyClassName,{"scrollableTable-row--isSelected":t.isSelected,"scrollableTable-row--selectable":Boolean(this.props.onRowClick),"scrollableTable-row--faded":t.isFaded})}
this.getRowHeight=e=>{(0,y.Z)(this.props.rows,e)&&(e=0)
const t=2*(this.props.isCompact?6:12)+1
return this.props.getRowContentHeight(e)+t}
this.getColWidth=(e,t)=>{const n=this.props.isCompact?120:320,a=this.props.isCompact?.15:.3125
return this.isCollapsed(e)?66:e.width?e.width:e.isFixed?Math.max(a*t,n):v}
this.handleRowClick=(e,t)=>{this.props.rows[t].isExpandable?this.props.onRowToggleExpanded(this.props.rows[t],!this.props.rows[t].isExpanded):this.props.onRowClick&&this.props.onRowClick(this.props.rows[t])}
this.handleRowMouseEnter=(e,t)=>{this.props.onRowMouseEnter&&this.props.onRowMouseEnter(this.props.rows[t])}
this.handleRowMouseLeave=(e,t)=>{this.props.onRowMouseLeave&&this.props.onRowMouseLeave(this.props.rows[t])}
this.handleColumnResizeEndCallback=(e,t)=>{(0,p.hu)(null!=this.props.tableKey,"tableKey is required if canResizeColumns")
this.setState({colWidthPreferences:{...this.state.colWidthPreferences,[t]:e}})
T.Z.set(this.getColumnWidthPreferenceKey(this.props.tableKey,t),e)}
this.isCollapsed=e=>-1!==this.state.collapsedColumns.indexOf(e.accessorKey)
this.renderGlobalCheckbox=()=>u.createElement("label",{className:"scrollableTable-cell-iconWrapper"},u.createElement(f.Z,{className:"scrollableTable-cell-checkbox",items:this.props.rows,selectedMap:this.isRowSelected,onChange:this.handleGlobalSelect,disabled:this.props.disableSelection}))
this.renderColumn=(e,t,n,i)=>{var r,o
const l=e.columnKey||e.accessorKey,c=this.state.colWidthPreferences[l],d=e.isFixed||c&&i<this.props.columns.length-1?0:e.flexGrow
return u.createElement(s.Column,{key:e.accessorKey,allowCellsRecycling:!0,cell:({rowIndex:n})=>{var a,i,r
return u.createElement(C.Z,{accessorKey:e.accessorKey,collapsedColumns:this.state.collapsedColumns,isSelectorPresent:null!=this.props.rowSelectionMode&&(null===(a=this.props.rows[n].isSelectorPresent)||void 0===a||a),isSelectorDisabled:null!==(i=this.props.disableSelection||this.props.rows[n].isSelectorDisabled)&&void 0!==i&&i,alwaysShowSelector:this.props.alwaysShowSelector,isFixed:null!==(r=e.isFixed)&&void 0!==r&&r,isPrimary:t,onContextMenu:this.props.onRowContextMenu,onSelect:this.handleRowSelect,rows:this.props.rows,dataTestAttrs:{component:"ScrollableTable",element:"cell",key:e.accessorKey},rowIndex:n,numLinesToWrapText:e.wrapText?Math.floor(this.props.getRowContentHeight(0)/R._5):void 0,rowSelectionMode:this.props.rowSelectionMode})},columnKey:l,fixed:e.isFixed,flexGrow:d,header:u.createElement(N.Z,{checkbox:this.props.rowSelectionMode===R.rT.MULTIPLE&&t?this.renderGlobalCheckbox():null,className:this.props.headerClassName,column:e,hasLineBelowHeader:this.props.hasLineBelowHeader,handleSort:this.props.onChangeSort,createCustomSortElement:null===(r=this.props.createCustomSortElementByColumn)||void 0===r?void 0:r[e.accessorKey],handleToggleCollapse:this.handleToggleCollapse,headerCellNode:t&&this.props.firstHeaderCellNode||t&&this.props.canFilterColumns&&u.createElement(S.ZP,{columns:this.props.columns.slice(1).filter((e=>!e.disableFiltering)),hiddenColumnKeys:this.props.hiddenColumnKeys,onUpdateHiddenColumns:null!==(o=this.props.onUpdateHiddenColumns)&&void 0!==o?o:a.ZT}),isCollapsed:this.isCollapsed(e),isPrimary:t}),isResizable:this.props.canResizeColumns,minWidth:100,width:c||n})}
this.render=()=>{const e=this.getRowHeight(0),t=this.props.columns.some((e=>e.isFixed))
return u.createElement("div",{className:r()("scrollableTable",this.props.className,{"scrollableTable--compact":this.props.isCompact,"scrollableTable--overflow":this.props.allowOverflow,"scrollableTable--resizableColumns":this.props.canResizeColumns}),...(0,g.Z)({component:"ScrollableTable",element:"root"})},u.createElement(h.ZP,{disableHeight:!this.props.matchParentHeight},(({height:n,width:a})=>{const i=this.props.matchParentHeight?n:e*(this.props.rows.length||1)+37+2+15,o=this.props.calcLeftPadding?this.props.calcLeftPadding(a):10
return 0===this.props.rows.length?u.createElement(A.Z,{height:i,leftPadding:o,rowHeight:e,text:this.props.emptyTableText,width:a}):u.createElement(s.Table,{headerHeight:37,height:i,isColumnResizing:!1,onColumnResizeEndCallback:this.handleColumnResizeEndCallback,onRowClick:this.handleRowClick,onRowMouseEnter:this.handleRowMouseEnter,onRowMouseLeave:this.handleRowMouseLeave,rowClassNameGetter:this.getRowClassName,rowsCount:this.props.rows.length,rowHeight:e,rowHeightGetter:this.getRowHeight,scrollToRow:this.props.scrollToRow,width:a,scrollLeft:this.props.scrollLeft},u.createElement(s.Column,{cell:e=>u.createElement(O.Z,{...e,onContextMenu:this.props.onRowContextMenu,rowWidth:a,rows:this.props.rows}),fixed:t,header:()=>u.createElement("div",{className:r()("scrollableTable-headerCell scrollableTable-headerCell--noContents",{"scrollableTable-headerCell--border":this.props.hasLineBelowHeader})}),width:o}),(0,S.ES)(this.props.columns,this.props.hiddenColumnKeys).map(((e,t)=>{const n=0===t,i=this.getColWidth(e,a)
return this.renderColumn(e,n,i,t)})))})))}
this.state=this.getInitialState()}}ScrollableTable.defaultProps=L
ScrollableTable.propTypes={allowOverflow:d().bool.isRequired,calcLeftPadding:d().func,canFilterColumns:d().bool.isRequired,canResizeColumns:d().bool.isRequired,rowSelectionMode:d().oneOf(Object.values(R.rT)),disableSelection:d().bool,className:d().string,columns:d().arrayOf(R.I_).isRequired,emptyTableText:d().string.isRequired,getRowContentHeight:d().func.isRequired,matchParentHeight:d().bool.isRequired,firstHeaderCellNode:d().node,hasLineBelowHeader:d().bool.isRequired,headerClassName:d().string,isCompact:d().bool.isRequired,onChangeSort:d().func,createCustomSortElementByColumn:d().object,onRowClick:d().func,onRowContextMenu:d().func,onRowMouseEnter:d().func,onRowMouseLeave:d().func,onRowsSelect:d().func,rows:d().arrayOf(R.fo).isRequired,scrollToRow:d().number,scrollLeft:d().number,tableKey:(e,...t)=>{const n=d().string(e,...t)
return n||(e.canResizeColumns&&!e.tableKey?new Error("tableKey is required if canResizeColumns"):e.canFilterColumns&&!e.tableKey?new Error("tableKey is required if canFilterColumns"):null)},hiddenColumnKeys:d().arrayOf(d().string),onUpdateHiddenColumns:d().func}
const D=ScrollableTableConnector.connect(ScrollableTable)},61279:(e,t,n)=>{n.d(t,{Af:()=>computeStateForToggledRows,Op:()=>getColumnHeaderSortDirection,Y3:()=>makeFirstColumnFixed,dt:()=>cycleColumnHeaderSort,sv:()=>computeSelectedIdsForToggledRows})
var a=n(531041),i=n(232606),r=n(62315),s=n(63573)
function computeStateForToggledRows({state:e,toggledIds:t,isSelected:n,rowSelectionMode:a}){return{selectedItemIds:computeSelectedIdsForToggledRows(e.selectedItemIds,t,n,a)}}function computeSelectedIdsForToggledRows(e,t,n,r){if(n){if(r===s.rT.SINGLE){(0,i.hu)(1===t.length,"Can only select one item when single select")
return t}const n=t.filter((t=>!a.default.contains(e,t)))
return[...e,...n]}return e.filter((e=>!a.default.contains(t,e)))}function cycleColumnHeaderSort(e,t){const n=[r.bo.SORT_CREATED_AT_KEY,r.bo.SORT_MODIFIED_AT_KEY].includes(t),a=e.find((e=>e.key===t))
return a?{key:a.key,reverse:!a.reverse}:{key:t,reverse:n}}function getColumnHeaderSortDirection(e,t){const n=e.find((e=>e.key===t))
if(!n)return null
const a=r.oo.includes(n.key)
return n.reverse&&!a||!n.reverse&&a?s.B3:s.Ii}function makeFirstColumnFixed(e){e.length>0&&(e[0]={...e[0],isFixed:!0})
return e}},98997:(e,t,n)=>{n.d(t,{Z:()=>S})
var a=n(64558),i=n(250965),r=n.n(i),s=n(989526),o=n(573961),l=n(615439),c=n.n(l),d=n(232606),u=n(897100),m=n(974913),p=n(42111),h=n(136834),E=n(799258)
function getDefaultItemState(e){return{childItems:[],isExpanded:!1,leafItems:[],loading:!1,more:e,offset:0}}class SelectTree extends s.Component{constructor(){super(...arguments)
this.state={...this.processPropsForState(this.props),clickedItems:[]}
this.fetchPromises=[]
this.toggleExpanded=e=>{const t={...this.state.itemStateMap,[e]:{...this.state.itemStateMap[e],isExpanded:!this.state.itemStateMap[e].isExpanded}}
this.setState({itemStateMap:t},(()=>{const t=this.state.itemStateMap[e]
this.canLoadMore()&&0===t.leafItems.length&&this.loadMoreFromIds([e])}))}
this.loadMoreFromIds=e=>{if(!(e=e.filter((e=>{const t=this.state.itemStateMap[e]
return t&&t.isExpanded&&t.more}))).length)return
if(!(0,d.Gp)(this.canLoadMore(),"loadMoreFromIds unexpectedly called"))return
const t={...this.state.itemStateMap}
for(const n of e)t[n]={...t[n],loading:!0}
this.setState({itemStateMap:t})
e.forEach((e=>{const t=(0,u.Z)(this.props.loadMore(e,this.state.itemStateMap[e].offset))
this.fetchPromises.push(t)
t.promise.then((t=>{const{items:n,offset:a,more:i}=t
this.state.itemStateMap.hasOwnProperty(e)&&a===this.state.itemStateMap[e].offset&&this.setState(this.getStateWithNewLoadedItems(n,a+n.length,i,e))})).catch((t=>{if(!t.isCanceled){m.ZP.notifyError(t)
this.setState({itemStateMap:{...this.state.itemStateMap,[e]:{...this.state.itemStateMap[e],loading:!1}}})}}))}))}
this.handleClickedItemsChange=e=>{this.setState({clickedItems:[...this.state.clickedItems,e]})}}static getTargetScrollTop(e,t){const n=r()(e),a=r()(t),i=n.scrollTop(),s=i+n.height(),o=a.height(),l=i+(a.position().top-n.position().top),c=l+o
let d
if(l<i)d=l-15
else{if(!(c>s))return null
d=i+(c-s)+15}return d}componentDidMount(){this.fetchPromises=[]
this.props.shouldNotLoadMoreOnMount||this.loadMoreFromIds(this.props.items.map((e=>e.id)))}UNSAFE_componentWillReceiveProps(e){c()(this.props.items,e.items)&&c()(this.props.selectedIds,e.selectedIds)&&c()(this.props.baseLeafItems,e.baseLeafItems)&&c()(this.props.query,e.query)||this.setState(this.processPropsForState(e,this.state.itemStateMap,this.props.selectedIds,this.state.queryIdsToExpand))}componentDidUpdate(e,t){if(this.props.selectedIds.length-e.selectedIds.length!=1)return
const n=o.findDOMNode(this),[a]=this.props.selectedIds.slice(-1),i=r()(n).find(`[data-node-id='${a}']`)[0]
if(!i)return
const s=SelectTree.getTargetScrollTop(n,i)
null!=s&&r()(n).stop().animate({scrollTop:s},200)}componentWillUnmount(){this.fetchPromises.forEach((e=>{e.cancel()}))}canLoadMore(){return Boolean(this.props.loadMore)}isLoadedItemExpandable(e){return!!this.props.isLoadedItemExpandable&&this.props.isLoadedItemExpandable(e)}getStateWithNewLoadedItems(e,t,n,i){const r=e.filter((e=>!this.state.itemStateMap.hasOwnProperty(e.id))),[s,o]=(0,a.uK)(r,(e=>this.isLoadedItemExpandable(e))),l={...this.state.itemStateMap}
for(const e of s)l[e.id]={baseLeafItems:[],...getDefaultItemState(this.canLoadMore())}
const c=[...l[i].childItems,...s],d=[...l[i].leafItems,...o],u=this.props.itemSortFn(c),m=this.props.itemSortFn(d)
return{itemStateMap:{...l,[i]:{...l[i],childItems:u,leafItems:m,offset:t,more:n,loading:!1}}}}getStateWithNewItemsFromProps(e,t,n){var i,r
const s="_",o=(0,a.vM)(e,(e=>{var t
return null!==(t=e.parentId)&&void 0!==t?t:s})),l=(0,a.vM)(t,(e=>{var t
return null!==(t=e.parentId)&&void 0!==t?t:s})),c={}
for(const t of e){const e=n&&n.hasOwnProperty(t.id)?n[t.id]:getDefaultItemState(this.canLoadMore()),a=this.props.itemSortFn(o[t.id]||[]),i=this.props.itemSortFn(l[t.id]||[])
c[t.id]={...e,childItems:a,baseLeafItems:i}}return{itemStateMap:c,rootItems:[...this.props.rootItemSortFn(null!==(i=o._)&&void 0!==i?i:[]),...this.props.rootItemSortFn(null!==(r=l._)&&void 0!==r?r:[])]}}getItemIdsToExpand(e,t,n,i){const r=e.shouldExpandOnSelect?e.baseLeafItems.map((e=>e.parentId)):[]
if(null==t){const t=e.items.filter((e=>e.isInitiallyExpanded)).map((e=>e.id))
return[...r,...e.selectedIds,...t,...i]}const s=e.shouldExpandNewItems?e.items.map((e=>e.id)).filter((e=>!t.hasOwnProperty(e))):[]
if(null==n)return[...r,...s,...i]
const o=e.shouldExpandOnSelect?[...(0,a.TV)(new Set(e.selectedIds),new Set(n))]:[]
return[...s,...o,...r,...i]}setExpandedForItemsInStateMap(e,t,n,i){const r=(0,a.m8)(t.map((e=>[e.id,e])))
for(const t of n){let n=t
for(;null!=n;){const t=e[n]
if(null==t)break
e[n]={...t,isExpanded:i}
n=r[n].parentId}}}processPropsForState(e,t=null,n=null,a=null){const{items:i,baseLeafItems:r,query:s}=e,{filteredItems:o,idsToExpand:l}=(0,E.r)(i,s),c=this.getStateWithNewItemsFromProps(o,r,t),d=(a||[]).filter((e=>!l.includes(e)))
this.setExpandedForItemsInStateMap(c.itemStateMap,o,d,!1)
const u=this.getItemIdsToExpand(e,t,n,l)
this.setExpandedForItemsInStateMap(c.itemStateMap,o,u,!0)
return{queryIdsToExpand:l,...c}}render(){return s.createElement(h.Z,{...this.props,...this.state,canLoadMore:()=>this.canLoadMore(),handleClickedItemsChange:e=>{this.props.shouldToggleExpandedOnClick(e)&&this.toggleExpanded(e)
this.handleClickedItemsChange(e)},hasQuery:Boolean(this.props.query),loadMoreFromIds:e=>{this.loadMoreFromIds(e)},onChangeSelectedIds:this.props.onChangeSelectedIds,toggleExpanded:e=>{this.toggleExpanded(e)},isLoadingRootItems:Boolean(this.props.isLoadingRootItems),moreRootItems:Boolean(this.props.moreRootItems),onLoadMoreRootItems:this.props.onLoadMoreRootItems})}}SelectTree.defaultProps={allowNone:!1,includeSelectAllItem:!0,baseLeafItems:[],shouldExpandNewItems:!0,shouldExpandOnSelect:!1,itemTypeName:"files",selectAllText:"All Projects",rootItemSortFn:p.H9,shouldToggleExpandedOnClick:e=>!1,itemSortFn:e=>e}
const S=SelectTree},601790:(e,t,n)=>{n.d(t,{bL:()=>Cell,iA:()=>Table,lT:()=>y,sg:()=>Column,z6:()=>C})
var a=n(692013),i=n(764403),r=n.n(i),s=n(602652),o=n.n(s),l=n(989526),c=n(531041),d=n(232606),u=n(133240),m=n(494327),p=n(736957),h=n(263137),E=n(271359),S=n(428171),T=n(723635),g=n(75359),f=n(901113)
const I=E.bs,A=(0,m.x)((()=>({isCompact:!1,showBorder:!0})),"TableContext")
var y
!function(e){e.BODY="BODY"
e.HEADER="HEADER"
e.INLINE_HEADER="INLINE_HEADER"
e.FROZEN_HEADER="FROZEN_HEADER"}(y||(y={}))
const _=(0,m.x)((()=>({cellType:y.BODY})),"CellTypeContext")
function _getCellNode(e){return e&&"string"!=typeof e&&"number"!=typeof e?e:l.createElement(Cell,null,e)}function HeaderCell(e){return l.createElement(A.Consumer,null,(({isCompact:t})=>l.createElement("th",{className:r()(getClassNameForCellType(e.cellType),e.className,(0,a.iv)(t&&C.compactHeaderCell)),onClick:e.onClick,onMouseDown:e.onMouseDown,...e.hoverProps,...(0,h.Z)({component:"SimpleTable",element:"headerCell"})},e.children)))}HeaderCell.propTypes={children:o().node,className:o().string,onClick:o().func,onMouseDown:o().func}
function getClassNameForCellType(e){switch(e){case y.BODY:return["simpleTable-cell"]
case y.HEADER:return["simpleTable-header-cell"]
case y.FROZEN_HEADER:return["simpleTable-header-cell",(0,a.iv)(C.frozenHeader)]
case y.INLINE_HEADER:return["simpleTable-inline-header-cell"]
default:throw new Error(`Invalid cellType: ${(0,f.vE)(e)}`)}}function BodyCell(e){return l.createElement(A.Consumer,null,(({isCompact:t})=>l.createElement("td",{className:r()(getClassNameForCellType(e.cellType),e.className,(0,a.iv)(t&&C.compactCell)),onClick:e.onClick,onMouseDown:e.onMouseDown,...e.hoverProps,...(0,h.Z)({component:"SimpleTable",element:"dataCell"})},e.children)))}function Cell(e){return l.createElement(_.Consumer,null,(({cellType:t})=>{const n=e.cellTypeOverride||t
return n===y.HEADER||n===y.FROZEN_HEADER?l.createElement(HeaderCell,{...e,cellType:n}):l.createElement(BodyCell,{...e,cellType:n})}))}Cell.propTypes={children:o().node,className:o().string,onClick:o().func,onMouseDown:o().func}
function Column(e){return null}Column.propTypes={header:o().node,renderCell:o().func.isRequired}
function EmptyTableRow(e){return l.createElement(A.Consumer,null,(({isCompact:t})=>l.createElement("tr",{className:r()("simpleTable-row","simpleTable-row--empty",(0,a.iv)(t&&C.compactRow))},l.createElement("td",{colSpan:e.columns.length,className:"simpleTable-cell u-faded"},e.emptyTableText))))}function DataRow(e){const{hasBeenInView:t,ref:n}=(0,S.Z)(e.calculateInView),[i,s]=(0,T.Z)()
return l.createElement(A.Consumer,null,(({isCompact:o})=>l.createElement("tr",{ref:n,className:r()("simpleTable-row",0===e.rowIndex&&"simpleTable-row--noShadow",e.className,(0,a.iv)(o&&C.compactRow)),onClick:t=>{e.onClick&&e.onClick(e.rowIndex,t)},...s,...(0,h.Z)({component:"SimpleTable",element:"dataRow",index:`${e.rowIndex}`})},e.columns.map(((n,a)=>{const r=_getCellNode(n.props.renderCell(e.rowIndex,{hasRowBeenInView:t,isRowHovered:i}))
return l.cloneElement(r,{key:a})})))))}function Header(e){return l.createElement(A.Consumer,null,(({isCompact:t})=>l.createElement("thead",null,l.createElement("tr",{className:r()("simpleTable-header",(0,a.iv)(t&&C.compactHeader)),...(0,h.Z)({component:"SimpleTable",element:"headerRow"})},e.columns.map(((e,t)=>{const n=_getCellNode(e.props.header)
return l.cloneElement(n,{key:t})}))))))}function Table(e){var t;(0,d.hu)(e.fitContent&&e.overflowVisible||!e.fitContent,"Expected to also have overflowVisible prop set to true when fitContent prop is true");(0,d.Gp)(e.frozenHeader&&e.overflowVisible||!e.frozenHeader,"Expected to also have overflowVisible prop set to true when frozenHeader prop is true")
const n=l.Children.toArray(e.children),i=r()("simpleTable",e.className,{"simpleTable--negativeMargins":e.includeNegativeMargins,"simpleTable--overflowVisible":e.overflowVisible,"simpleTable--bordered":e.showBorder}),s=l.createElement("div",{className:r()(i,{"u-flex-grow":e.fitContent}),...(0,h.Z)({component:"SimpleTable",element:"root"})},l.createElement("table",{className:r()("simpleTable-table",(0,a.iv)("auto"===e.tableLayout&&C.tableLayoutAuto),(0,a.iv)("fixed"===e.tableLayout&&C.tableLayoutFixed))},n.some((e=>e.props.header))&&l.createElement(_.Provider,{value:{cellType:e.frozenHeader?y.FROZEN_HEADER:y.HEADER}},l.createElement(Header,{columns:n})),l.createElement("tbody",null,l.createElement(_.Provider,{value:{cellType:y.BODY}},0===e.numRows?l.createElement(EmptyTableRow,{columns:n,emptyTableText:e.emptyTableText}):c.default.range(e.numRows).map((t=>l.createElement(DataRow,{calculateInView:e.calculateInView,className:e.getRowClassName&&e.getRowClassName(t),columns:n,onClick:e.onRowClick,key:e.getRowKey(t),rowIndex:t}))))))),o=(0,l.useMemo)((()=>({isCompact:e.isCompact})),[e.isCompact])
return l.createElement(A.Provider,{value:o},l.createElement("div",{className:r()({"u-flex-display":e.fitContent})},e.pagination&&l.createElement(g.Z,{isLoading:e.isLoading,setOffset:null!==(t=e.setOffset)&&void 0!==t?t:()=>{},pagination:e.pagination}),e.message&&l.createElement("span",{className:"faded pull-right"},e.message),s))}Table.propTypes={calculateInView:o().bool.isRequired,children:o().node.isRequired,className:o().string,emptyTableText:o().string,fitContent:o().bool.isRequired,frozenHeader:o().bool.isRequired,getRowKey:o().func,includeNegativeMargins:o().bool.isRequired,isCompact:o().bool.isRequired,numRows:o().number.isRequired,getRowClassName:o().func,overflowVisible:o().bool.isRequired,isLoading:o().bool.isRequired,onRowClick:o().func,pagination:u.Lm,message:o().node,setOffset:o().func,showBorder:o().bool.isRequired,tableLayout:o().string.isRequired}
Table.defaultProps={calculateInView:!1,fitContent:!1,frozenHeader:!1,getRowKey:e=>e,includeNegativeMargins:!1,isCompact:!1,isLoading:!1,overflowVisible:!1,showBorder:!0,tableLayout:"auto"}
const C=a.mM.create({compactHeader:{height:"36px"},compactHeaderCell:{padding:"10px 8px"},compactRow:{height:"28px"},compactCell:{padding:"6px 8px"},frozenHeader:{position:"sticky",top:0,backgroundColor:I,zIndex:p.VB,boxShadow:`inset 0px -1px 0px 0px ${E.tN}`},grayHoverHeaderCell:{transition:"background-color 0.1s",backgroundColor:I,":hover":{backgroundColor:E.tN}},tableLayoutAuto:{tableLayout:"auto"},tableLayoutFixed:{tableLayout:"fixed",width:"100%"}})},231602:(e,t,n)=>{n.d(t,{Z:()=>Arc})
var a=n(989526),i=n(418955)
function Arc({circleCenter:e,radius:t,startAngle:n,endAngle:r,pathProps:s}){n===r&&(r-=.001)
const o=(0,i.op)(e,t,r),l=(0,i.op)(e,t,n),c=(r>n?r-n>=Math.PI:2*Math.PI-(n-r)>=Math.PI)?"1":"0",d=["M",o.x,o.y,"A",t,t,0,c,0,l.x,l.y].join(" ")
return a.createElement("path",{...s,d,fill:"none"})}},966579:(e,t,n)=>{n.d(t,{Z:()=>Line})
var a=n(989526)
function Line({startPoint:e,endPoint:t,stroke:n,strokeWidth:i,strokeDasharray:r,strokeLinecap:s}){return a.createElement("path",{d:["M",e.x,e.y,"L",t.x,t.y].join(" "),stroke:n,strokeWidth:i,strokeDasharray:r,strokeLinecap:s})}},924541:(e,t,n)=>{n.d(t,{ZP:()=>SearchableUnitDropdown})
var a=n(692013),i=n(162294),r=n.n(i),s=n(989526),o=n(751512),l=n(868710),c=n(271359),d=n(954240),u=n(476604),m=n(472347),p=n(68803)
const OptionName=({unitName:e,unitSymbol:t,quantityName:n})=>s.createElement("span",null,s.createElement("div",{className:(0,a.iv)(h.ellipsizedText)},e," (",t,")"),n&&s.createElement("div",{className:(0,a.iv)(h.ellipsizedText,h.optionMetadata)},n))
function gqlUnitToOptionValue(e,t){return{...e,quantity:t,conversionFactor:new(r())(e.conversionFactor)}}function getDisplayName(e,t){return e?t?e.quantity.name:e.name:"Select..."}function SearchableUnitDropdown(e){return s.createElement(o.ZP,{query:p.I,renderLoading:()=>s.createElement(u.b,null)},(({quantities:t},{refetch:n})=>{var a
const i=function getOptions(e,t,n=!1,a=!1,i){const r=e.filter((e=>(!t||e.id===t)&&(!i||i(e)))),o=1===r.length&&(t||i),l=[]
a&&l.push({name:"None",value:null})
for(const e of r)if(n)l.push({name:s.createElement(OptionName,{unitName:e.baseUnit.name,unitSymbol:e.baseUnit.symbol,quantityName:e.name}),value:gqlUnitToOptionValue(e.baseUnit,e),pureTextName:`${e.name} ${e.baseUnit.name} ${e.baseUnit.symbol}`})
else{o||l.push({name:e.name,isHeader:!0})
const t=e.units.filter((e=>!e.archiveData.archived))
for(const n of t)l.push({name:s.createElement(OptionName,{unitName:n.name,unitSymbol:n.symbol}),value:gqlUnitToOptionValue(n,e),pureTextName:`${n.name} ${n.symbol}`})}return l}(t,e.quantityId,e.baseUnitsOnly,e.includeNone,e.quantityFilter),r=null===(a=i.find((t=>t.value&&t.value.id===e.selectedId)))||void 0===a?void 0:a.value
return s.createElement(l.ZP,{disabled:!r,title:getDisplayName(r,e.baseUnitsOnly)},s.createElement(d.ZP,{className:e.className,buttonClassName:e.buttonClassName,displayName:getDisplayName(r,e.baseUnitsOnly),disabled:e.disabled,shouldEllipsize:!0,menu:s.createElement(m.Z,{selectedValue:r,onSelect:t=>{e.onSelect(t)},optionDatas:i})}))}))}const h=a.mM.create({optionMetadata:{color:c.pF},ellipsizedText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})},361154:(e,t,n)=>{n.d(t,{$R:()=>updateQuantity,EV:()=>createQuantity,Ih:()=>fetchUnitsOnboardingData,JP:()=>createUnit,OF:()=>s,db:()=>createOnboardingQuantitiesAndUnits,t1:()=>updateUnit})
var a=n(188663),i=n(581210),r=n(771398)
const s="/units/listing"
function createUnit(e){const t=[e]
return(0,r.s0)({url:`${(0,i.Kq)(a.J.UNIT)}`,data:{creates:t}})}function updateUnit(e){const t=[e]
return(0,r.Ry)({url:`${(0,i.Kq)(a.J.UNIT)}`,data:{updates:t}})}function createQuantity(e){const t=[e]
return(0,r.s0)({url:`${(0,i.Kq)(a.J.QUANTITY)}`,data:{creates:t}})}function updateQuantity(e){const t=[e]
return(0,r.Ry)({url:`${(0,i.Kq)(a.J.QUANTITY)}`,data:{updates:t}})}function fetchUnitsOnboardingData(){return(0,r.UJ)("/1/api/onboarding-units")}function createOnboardingQuantitiesAndUnits(e){return(0,r.s0)({url:"/1/api/onboarding-units",data:{creates:e}})}},68803:(e,t,n)=>{n.d(t,{I:()=>se,Z:()=>UnitDictionaryListing})
var a=n(769784),i=n(64558),r=n(692013),s=n(989526),o=n(108696),l=n(805937),c=n(675649),d=n(751512),u=n(868710),m=n(334148),p=n(73374),h=n(476604),E=n(629656),S=n(531041),T=n(974913),g=n(87209),f=n(205986),I=n(361154),A=n(808844)
function convertSetsToArrays(e){const t={}
for(const n of Object.keys(e))t[n]=Array.from(e[n])
return t}function getNewSelectedQuantitiesAndUnits(e,t,n,a,i){const{quantityToDependencyQuantities:r,quantityToDependencyUnits:s}=e,o=new Set(t)
if(i){o.add(a)
if(r.hasOwnProperty(a))for(const e of r[a])o.add(e)}else o.delete(a)
const l=new Set(n)
if(i&&s.hasOwnProperty(a))for(const e of s[a])l.add(e)
return{newSelectedQuantityNames:Array.from(o),newSelectedUnitSymbols:Array.from(l)}}function getQuantityForceSelectedText(e,t,n){const{quantityToDependentQuantities:a}=n,{quantity:i,required:r}=e,s=a.hasOwnProperty(i.name)?a[i.name].filter((e=>t.includes(e))):[]
return r?"This unit type is required":s.length>0?`This unit type is required by ${(0,A.Dw)(s)}`:null}function isUnitRequiredByOtherSelectedQuantities(e,t,n){const{unitToDependentQuantities:a}=n
return a.hasOwnProperty(e)&&a[e].some((e=>t.includes(e)))}var y=n(129270),_=n(989652),C=n(271359),R=n(36424),N=n(920672)
function AddToUnitDictionaryButton({added:e,onSetAdded:t,forceSelectedText:n}){const a=s.createElement(m.Co,{size:m.qE.MINI,buttonStyle:m.ZJ.TERTIARY_BLUE,text:"Add to dictionary",onClick:e=>{t(!0)
e.stopPropagation()}}),i=null!=n?s.createElement(N.Z,{text:n},s.createElement(m.Co,{size:m.qE.MINI,buttonStyle:m.ZJ.PRIMARY,text:"Added",onClick:e=>{t(!1)
e.stopPropagation()},disabled:!0,icon:"check"})):s.createElement(m.Co,{size:m.qE.MINI,buttonStyle:m.ZJ.PRIMARY,text:"Added",onClick:e=>{t(!1)
e.stopPropagation()},icon:"check"})
return e?i:a}function UnitsOnboardingWizardQuantityRow({quantity:e,added:t,quantityUnits:n,onSetAdded:a,forceSelectedText:i,onSetCurrentQuantityName:o,selectedUnitSymbols:l}){const d=new Set(l),u=`${n.filter((e=>d.has(e.symbol))).length} of ${n.length} ${(0,c._6)(n.length,"unit")} selected`
return s.createElement("div",{className:(0,r.iv)(O.rowContainer),onClick:()=>{o(e.name)}},s.createElement("div",{className:(0,r.iv)(O.leftPortion)},s.createElement("div",{className:(0,r.iv)(O.iconContainer)},s.createElement(R.Z,{icon:"ruler",className:(0,r.iv)(O.icon)})),s.createElement("div",{className:(0,r.iv)(O.textContainer)},s.createElement("span",{className:(0,r.iv)(O.quantityName)},e.name),s.createElement("span",{className:(0,r.iv)(O.numUnitsDetailText)},u))),s.createElement("div",{className:(0,r.iv)(O.rightPortion)},s.createElement(AddToUnitDictionaryButton,{added:t,onSetAdded:a,forceSelectedText:i}),s.createElement(R.Z,{icon:"chevron-right",className:(0,r.iv)(O.chevron)})))}const O=r.mM.create({rowContainer:{display:"flex",flexDirection:"row",height:65,borderTop:`1px solid ${C.tN}`,alignItems:"center",justifyContent:"space-between",cursor:"pointer"},textContainer:{display:"flex",flexDirection:"column",marginLeft:12},quantityName:{...y.gt,fontWeight:y.KB},numUnitsDetailText:{...y.XI,color:C.hc},iconContainer:{width:64,height:48,borderRadius:4,padding:"8px 16px",backgroundColor:C.bs},icon:{width:32,height:32},chevron:{width:16,height:16,marginLeft:12,marginRight:12},leftPortion:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:7},rightPortion:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:7}})
function UnitsOnboardingWizardQuantitiesScreen({defaultUnitsData:e,selectedQuantityNames:t,selectedUnitSymbols:n,onSetSelectedQuantityNames:a,onSetSelectedUnitSymbols:i,onSetCurrentQuantityName:o,unitsDependencyDataStructures:l}){const c=e.map((e=>{const r=getQuantityForceSelectedText(e,t,l)
return s.createElement(UnitsOnboardingWizardQuantityRow,{key:e.quantity.name,quantity:e.quantity,quantityUnits:e.units,added:t.includes(e.quantity.name),onSetAdded:r=>{const{newSelectedQuantityNames:s,newSelectedUnitSymbols:o}=getNewSelectedQuantitiesAndUnits(l,t,n,e.quantity.name,r)
a(s)
i(o)},forceSelectedText:r,onSetCurrentQuantityName:o,selectedUnitSymbols:n})})),d=s.createElement(_.Z,{tabs:[{text:"SI Units",isActive:!0,handleClick:()=>{}}]})
return s.createElement("div",null,s.createElement("div",{className:(0,r.iv)(b.textContainer)},s.createElement("span",{className:(0,r.iv)(b.text)},"Get started by selecting unit types and relevant units to be added to your dictionary. If you dont find the units you want, you can add them later.")),d,s.createElement("div",null,c))}const b=r.mM.create({text:{...y.XI},textContainer:{marginLeft:16,marginRight:16,marginTop:12}})
var v=n(489678),P=n(63573)
const L=[{header:"Unit",accessorKey:"name",flexGrow:1},{header:"Symbol",accessorKey:"symbol"},{header:"Conversion factor",accessorKey:"conversionFactor"}]
function UnitsOnboardingWizardUnitsScreen({quantityData:e,selectedQuantityNames:t,selectedUnitSymbols:n,onSetSelectedQuantityNames:a,onSetSelectedUnitSymbols:i,onSetCurrentQuantityName:o,unitsDependencyDataStructures:l}){const{quantity:d,units:u,baseUnitSymbol:m}=e,p=u.find((e=>e.symbol===m)),h=u.map((e=>{const a=isUnitRequiredByOtherSelectedQuantities(e.symbol,t,l),i=e.symbol===p.symbol||a
return{id:e.symbol,data:{name:e.name,symbol:e.symbol,conversionFactor:e.symbol===p.symbol?"Base unit":`${e.conversionFactor} x ${p.symbol}`},displayAsSelected:i,isSelected:n.includes(e.symbol)&&!i,isSelectorDisabled:i}})),E=new Set(n),S=`${u.filter((e=>E.has(e.symbol))).length} of ${u.length} ${(0,c._6)(u.length,"unit")} selected`,T=getQuantityForceSelectedText(e,t,l),handleRowsSelect=(e,r)=>{const s=e.map((e=>e.data.symbol)).filter((e=>{const n=isUnitRequiredByOtherSelectedQuantities(e,t,l)
return!(e===p.symbol||n)})),{newSelectedQuantityNames:o,newSelectedUnitSymbols:c}=getNewSelectedQuantitiesAndUnits(l,t,n,d.name,!0)
i(r?c.concat(s):c.filter((e=>!s.includes(e))))
a(o)}
return s.createElement("div",null,s.createElement("div",{className:(0,r.iv)(D.header)},s.createElement("div",{className:(0,r.iv)(D.leftHeaderPortion)},s.createElement(R.Z,{icon:"chevron-left",onClick:()=>{o(null)},className:(0,r.iv)(D.chevron)}),s.createElement("div",{className:(0,r.iv)(D.textContainer)},s.createElement("span",{className:(0,r.iv)(D.quantityName)},d.name),s.createElement("span",{className:(0,r.iv)(D.numUnitsDetailText)},S))),s.createElement("div",{className:(0,r.iv)(D.rightHeaderPortion)},s.createElement(AddToUnitDictionaryButton,{added:t.includes(d.name),onSetAdded:e=>{const{newSelectedQuantityNames:r,newSelectedUnitSymbols:s}=getNewSelectedQuantitiesAndUnits(l,t,n,d.name,e)
a(r)
i(s)},forceSelectedText:T}))),s.createElement(v.ZP,{className:(0,r.iv)(D.table),columns:L,rows:h,onRowsSelect:handleRowsSelect,onRowClick:e=>{const t=!n.includes(e.data.symbol)
handleRowsSelect([e],t)},rowSelectionMode:P.rT.MULTIPLE,canResizeColumns:!0,tableKey:P.Uw.UNITS_ONBOARDING_WIZARD_TABLE}))}const D=r.mM.create({table:{height:"100%"},chevron:{width:16,height:16,marginLeft:12,marginRight:12,cursor:"pointer"},textContainer:{display:"flex",flexDirection:"column",marginLeft:12},quantityName:{...y.gt,fontWeight:y.KB},numUnitsDetailText:{...y.XI,color:C.hc},header:{display:"flex",flexDirection:"row",height:65,alignItems:"center",justifyContent:"space-between"},leftHeaderPortion:{display:"flex",flexDirection:"row",alignItems:"center"},rightHeaderPortion:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:16}}),M="units-onboarding-wizard"
function UnitsOnboardingWizardModal({onRequestClose:e,refetch:t,defaultUnitsData:n}){const a=n.filter((e=>e.required)).map((e=>e.quantity.name)),[i,o]=(0,s.useState)(a),[l,c]=(0,s.useState)(null),d=(0,S.flatten)(n.map((e=>e.units.filter((e=>e.defaultSelected)).map((e=>e.symbol))))),[u,m]=(0,s.useState)(d),p=function getUnitsDependencyDataStructures(e){const t=e.sort(((e,t)=>e.rank-t.rank)),n={}
for(const e of t){const{quantity:t,units:a}=e,i=t.name
for(const e of a)n[e.symbol]=i}const a={},i={},r={},s={}
for(const e of t){const{quantity:t,originalFormula:o}=e,l=t.name
if(null!=o)for(const{value:e}of o){const t=n[e]
a.hasOwnProperty(e)?a[e].add(l):a[e]=new Set([l])
i.hasOwnProperty(t)?i[t].add(l):i[t]=new Set([l])
r.hasOwnProperty(l)?r[l].add(t):r[l]=new Set([t])
s.hasOwnProperty(l)?s[l].add(e):s[l]=new Set([e])
if(r.hasOwnProperty(t))for(const e of r[t])r[l].add(e)
if(s.hasOwnProperty(t))for(const e of s[t])s[l].add(e)}}return{unitToDependentQuantities:convertSetsToArrays(a),quantityToDependentQuantities:convertSetsToArrays(i),quantityToDependencyQuantities:convertSetsToArrays(r),quantityToDependencyUnits:convertSetsToArrays(s)}}(n),h=[{text:"Done",disabled:null!=l,onClick:()=>{(async()=>{const a=[]
for(const e of n){const{quantity:t,units:n}=e,r=t.name
if(!i.includes(r))continue
const s=n.find((t=>t.symbol===e.baseUnitSymbol)),o=n.filter((e=>u.includes(e.symbol))).filter((e=>e.symbol!==s.symbol)).map((e=>({name:e.name,symbol:e.symbol,aliases:e.aliases,conversionFactor:e.conversionFactor}))),l={quantity:{...t,name:r,baseUnit:{name:s.name,symbol:s.symbol,aliases:s.aliases},originalFormula:e.originalFormula},units:o,rank:e.rank}
a.push(l)}g.$Z()
await(0,I.db)(a)
await t()
e()
g.Cp()
T.ZP.success("Successfully added units to dictionary")})()},submit:!0}]
return s.createElement(f.ZP,{title:"Welcome to your unit dictionary",buttons:h,onRequestClose:e,scrollable:!1,bodyPadded:!1,closeable:!1},s.createElement("div",{className:(0,r.iv)(w.bodyContainer)},null==l?s.createElement(UnitsOnboardingWizardQuantitiesScreen,{defaultUnitsData:n,selectedQuantityNames:i,selectedUnitSymbols:u,onSetSelectedQuantityNames:o,onSetSelectedUnitSymbols:m,onSetCurrentQuantityName:c,unitsDependencyDataStructures:p}):s.createElement(UnitsOnboardingWizardUnitsScreen,{quantityData:n.find((e=>e.quantity.name===l)),selectedQuantityNames:i,selectedUnitSymbols:u,onSetSelectedQuantityNames:o,onSetSelectedUnitSymbols:m,onSetCurrentQuantityName:c,unitsDependencyDataStructures:p})))}const w=r.mM.create({pageContainer:{display:"flex",flexDirection:"column",height:"100%",overflowY:"scroll"},bodyContainer:{display:"flex",flexDirection:"column",height:"100%"}})
var F=n(5175),k=n(764403),U=n.n(k),x=n(383628),B=n(150126),Z=n(665704),q=n(771398),G=n(924541)
function ActionButtons(e){const{showAddTerm:t,showDelete:n,showDivide:a,onAddTerm:i,onDelete:o,onDivide:l}=e
return t||n||a?s.createElement("div",{className:(0,r.iv)(V.actionButtons)},t&&s.createElement("span",{className:(0,r.iv)(V.actionButton)},s.createElement(R.Z,{onClick:i,icon:"xmark"})),a&&s.createElement("span",{className:(0,r.iv)(V.actionButton)},s.createElement(R.Z,{onClick:l,icon:"divide"})),n&&s.createElement("span",{className:(0,r.iv)(V.actionButton)},s.createElement(R.Z,{onClick:o,icon:"trash-can"}))):null}function FormulaCanvas(e){const{numeratorUnits:t,denominatorUnits:n,setNumeratorUnits:a,setDenominatorUnits:i}=e,[o,l]=(0,s.useState)(!0),[c,d]=(0,s.useState)(!1),u=c||n.length>0
return s.createElement("div",{className:(0,r.iv)(V.canvas)},s.createElement("div",{className:(0,r.iv)(V.fraction)},s.createElement("div",{className:"u-vertical-center-items formulaCanvas-numerator"},t.map(((e,t)=>s.createElement(G.ZP,{baseUnitsOnly:!0,key:t,className:(0,r.iv)(V.unitDropdown),selectedId:e.id,onSelect:e=>{a((n=>[...n.slice(0,t),e,...n.slice(t+1)]))}}))),o&&s.createElement(G.ZP,{baseUnitsOnly:!0,className:(0,r.iv)(V.unitDropdown),selectedId:null,onSelect:e=>{l(!1)
a((t=>[...t,e]))}}),s.createElement(ActionButtons,{showAddTerm:!o,showDelete:t.length>0,showDivide:!u,onAddTerm:()=>{l(!0)},onDelete:()=>{if(o)l(!1)
else{a((e=>e.slice(0,-1)))
1===t.length&&l(!0)}},onDivide:()=>{d(!0)}})),s.createElement("div",{className:U()("u-vertical-center-items","formulaCanvas-denominator",{[(0,r.iv)(V.fractionLine)]:u})},n.map(((e,t)=>s.createElement(G.ZP,{baseUnitsOnly:!0,className:(0,r.iv)(V.unitDropdown),key:t,selectedId:e.id,onSelect:e=>{i((n=>[...n.slice(0,t),e,...n.slice(t+1)]))}}))),c&&s.createElement(G.ZP,{baseUnitsOnly:!0,className:(0,r.iv)(V.unitDropdown),selectedId:null,onSelect:e=>{d(!1)
i((t=>[...t,e]))}}),u&&s.createElement(ActionButtons,{showAddTerm:!c,showDelete:!0,onAddTerm:()=>{d(!0)},onDelete:()=>{c?d(!1):i((e=>e.slice(0,-1)))}}))))}const V=r.mM.create({canvas:{backgroundColor:C.tN,minHeight:"120px",padding:"8px",overflow:"scroll"},actionButtons:{display:"flex",alignItems:"center",backgroundColor:"white",marginLeft:"8px",border:`1px solid ${C.pF}`,height:"28px",borderRadius:"4px",paddingTop:"2px"},actionButton:{margin:"6px",cursor:"pointer"},fraction:{display:"inline-block"},fractionLine:{borderTop:1,borderTopColor:C.Rl,marginTop:3.5,marginBottom:3.5,borderTopStyle:"solid"},unitDropdown:{margin:"8px",width:"100px"}}),QuantityCreationModal_close=()=>{E.xv(QuantityCreationModal)}
function formatOriginalFormula(e){const t=e.map((e=>({exponent:e.exponent,value:e.value.id}))),n=(0,i.vM)(t,(e=>e.value)),a=(0,i.Xc)(n,(e=>e.map((e=>e.exponent)).reduce(((e,t)=>e+t))))
return(0,i.qh)(a).filter((([,e])=>0!==e)).map((([e,t])=>({value:e,exponent:t})))}function QuantityCreationModal({refetch:e}){const[t,n]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),E=o.trim().length>0&&c.trim().length>0&&u.trim().length>0
return s.createElement(f.ZP,{title:"Add unit type",large:!0,onRequestClose:()=>{QuantityCreationModal_close()},onRequestSubmit:async()=>{var n
const i=[...t.map((e=>({value:e,exponent:1}))),...a.map((e=>({value:e,exponent:-1})))],r={name:o.trim(),terms:(0,F.Tm)("","",i).quantity.terms,baseUnit:{name:c.trim(),symbol:u.trim()},originalFormula:formatOriginalFormula(i)}
try{h("")
await I.EV(r)
T.ZP.success(`Unit type ${o} successfully created`)
QuantityCreationModal_close()
e()}catch(e){if((0,q.d0)(e)){h(null!==(n=T.ZP.getFriendlyError(e))&&void 0!==n?n:B.q)
return}throw e}},buttons:[{text:"Cancel",cancel:!0},{text:"Save",disabled:!E,submit:!0}]},s.createElement(Z.Z,{label:"Unit type name",isRequired:!0,className:U()("u-spacing-bottom",(0,r.iv)(H.nameInput)),value:o,onChange:e=>{l(e.target.value)}}),s.createElement("label",{className:"fieldLabel--label"},"Formula"),s.createElement(FormulaCanvas,{numeratorUnits:t,denominatorUnits:a,setNumeratorUnits:n,setDenominatorUnits:i}),s.createElement("div",{className:"u-flex-display"},s.createElement(Z.Z,{label:"Base unit name",isRequired:!0,className:U()("u-spacing-top","u-spacing-right",(0,r.iv)(H.nameInput)),value:c,onChange:e=>{d(e.target.value)}}),s.createElement(Z.Z,{label:"Base unit symbol",isRequired:!0,className:U()("u-spacing-top",(0,r.iv)(H.symbolInput)),value:u,onChange:e=>{m(e.target.value)}})),p.length>0&&s.createElement("div",{className:"u-spacing-top"},s.createElement(x.ZP,{bannerType:x.ct.ERROR,text:p})))}const H=r.mM.create({nameInput:{width:"200px"},symbolInput:{width:"120px"}})
var W=n(162294),Y=n.n(W),$=n(369706)
function formatTermAsTextElement(e,t){return s.createElement("span",{key:t},(0,A.kC)(e.value),(e.exponent>1||e.exponent<-1)&&s.createElement("sup",null,Math.abs(e.exponent)))}function joinTerms(e){const t=[]
for(let n=0;n<e.length;n++){const a=e[n]
t.push(formatTermAsTextElement(a,2*n))
n<e.length-1&&t.push(s.createElement("span",{key:2*n+1},"  "))}return t}function QuantityTermsDisplay({terms:e}){const t=e.filter((e=>e.exponent>0)),n=e.filter((e=>e.exponent<0)),a=joinTerms(t),i=joinTerms(n),o=s.createElement("span",null,t.length>0?a:1),l=n.length>0?s.createElement("span",null,i):null
return s.createElement("div",{className:(0,r.iv)(K.container)},s.createElement("div",{className:(0,r.iv)(K.center)},o,l&&s.createElement("hr",{className:(0,r.iv)(K.fractionLine)}),l))}const K=r.mM.create({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginTop:8},center:{display:"flex",flexDirection:"column",alignItems:"center"},fractionLine:{borderTop:1,borderColor:C.Rl,marginTop:3.5,marginBottom:3.5,borderStyle:"solid",width:"100%"}})
var z=n(804589),Q=n(996447),j=n(684321),J=n(88941),X=n(778223),ee=n(927517)
function UnitTableRowForEditingOrCreation({unit:e,baseUnit:t,onSave:n,onCancel:a,quantityId:o}){var l,c,d
const u=null==e,m=(null==e?void 0:e.id)===t.id,p=t.symbol,[h,E]=(0,s.useState)(null!==(l=null==e?void 0:e.name)&&void 0!==l?l:""),[S,T]=(0,s.useState)(null!==(c=null==e?void 0:e.conversionFactor)&&void 0!==c?c:""),[g,f]=(0,s.useState)(null!==(d=null==e?void 0:e.symbol)&&void 0!==d?d:""),I=S&&(0,i.p3)(S,{scientificNotationAllowed:!0}),A=h.trim().length>0&&g.trim().length>0&&I&&I>0&&(u||h.trim()!==(null==e?void 0:e.name)||g.trim()!==(null==e?void 0:e.symbol)),submit=()=>{A&&n(u?{name:h.trim(),symbol:g.trim(),conversionFactor:S,quantityId:o}:{id:e.id,name:h.trim(),symbol:g.trim()})},handleKeyDown=e=>{if(ee.isEnterKey(e)){e.preventDefault()
submit()}else if(ee.isEscapeKey(e)){e.preventDefault()
a()}}
return s.createElement("div",{className:(0,r.iv)(te.rowContainer)},s.createElement("div",{className:(0,r.iv)(te.horizontalSpacing)}),s.createElement("div",{className:U()("simpleDivTable-row","is-beingEdited")},s.createElement("div",{className:"simpleDivTable-cell--narrow"},s.createElement("div",{className:"simpleDivTable-cell-contents"},s.createElement(J.Z,{type:"text",name:"Name",value:h,onChange:e=>{E(e.target.value)},placeholder:"Unit name",onKeyDown:handleKeyDown,maxLength:255}))),s.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--narrow"},s.createElement("div",{className:"simpleDivTable-cell-contents"},s.createElement(J.Z,{type:"text",name:"Symbol",value:g,onChange:e=>{f(e.target.value)},placeholder:"Symbol",onKeyDown:handleKeyDown,maxLength:255}))),s.createElement("div",{className:"simpleDivTable-cell"},u?s.createElement("div",{className:(0,r.iv)(te.conversionFactorInput)},s.createElement(J.Z,{className:(0,r.iv)(te.conversionFactorInputField),type:"text",name:"Conversion factor",value:S,onChange:e=>{T(e.target.value)},placeholder:"value",onKeyDown:handleKeyDown}),s.createElement("span",{className:(0,r.iv)(te.conversionFactorInputFlex1)},"x"),s.createElement("span",{className:(0,r.iv)(te.conversionFactorInputFlex1)},p),s.createElement("span",{className:(0,r.iv)(te.conversionFactorInputFlex1)},"="),s.createElement("span",{className:(0,r.iv)(te.conversionFactorInputFlex1)},"1"),s.createElement(X.ZP,{className:(0,r.iv)(te.conversionFactorInputFlex1),size:X.TK.MINI,text:g||"Symbol"})):s.createElement("div",{className:"simpleDivTable-cell-contents--last"},m?s.createElement("span",{className:(0,r.iv)(te.baseUnitText)},"Base unit"):s.createElement("span",null,`${new(Y())(e.conversionFactor).toString()} x ${p}`))),s.createElement("div",{className:"simpleDivTable-actionGroupContainer"},s.createElement(j.Z,{isEditing:!0,cancel:a,complete:submit,isCompleteEnabled:Boolean(A)}))))}const te=r.mM.create({archivedField:{opacity:.6},baseUnitText:{color:C.pp,fontStyle:"italic"},iconStyle:{color:C.pp,marginRight:"10px",height:"12px",width:"12px"},horizontalSpacing:{width:25},rowContainer:{display:"flex",marginLeft:-25,width:"100%",position:"relative"},tableRow:{alignItems:"center",borderTop:1,borderColor:C.tN,display:"flex",marginRight:-25,padding:"10px 14px",width:"100%"},conversionFactorInput:{paddingRight:82,display:"flex",alignItems:"center"},conversionFactorInputField:{flex:3},conversionFactorInputFlex1:{flex:1,display:"flex",justifyContent:"center"}})
var ne=n(348920),ae=n(788836)
function isUnitDictionaryManagementEnabledForUser(){const e=ae.Z.currentUser()
return(null==e?void 0:e.isTenantAdmin)&&ne.ZP.UNITS_ENABLE_UNIT_DICTIONARY}function UnitTableRow({unit:e,baseUnit:t,quantityId:n,onSave:a,onCancel:i,refetch:o}){const l=null==e,[c,d]=(0,s.useState)(!1),handleCancel=()=>{null!=i&&i()
d(!1)},handleSave=e=>{a(e)
d(!1)}
if(c||l)return s.createElement(UnitTableRowForEditingOrCreation,{unit:e,baseUnit:t,onSave:handleSave,onCancel:handleCancel,quantityId:n})
const u=t.symbol,m=e.id===t.id,p=new W.Decimal(e.conversionFactor)
return s.createElement("div",{className:(0,r.iv)(ie.rowContainer)},s.createElement("div",{className:(0,r.iv)(ie.horizontalSpacing)}),s.createElement("div",{className:U()("simpleDivTable-row",{[(0,r.iv)(ie.archivedField)]:e.archiveData.archived})},s.createElement("div",{className:"simpleDivTable-cell--narrow"},s.createElement("div",{className:"simpleDivTable-cell-contents"},s.createElement("span",null,e.name," ",e.archiveData.archived&&`(${e.archiveData.purpose})`))),s.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--narrow"},s.createElement("div",{className:"simpleDivTable-cell-contents"},s.createElement("span",null,e.symbol))),s.createElement("div",{className:"simpleDivTable-cell"},s.createElement("div",{className:"simpleDivTable-cell-contents--last"},m?s.createElement("span",{className:(0,r.iv)(ie.baseUnitText)},"Base unit"):s.createElement("span",null,`${p.toString()} x ${u}`))),isUnitDictionaryManagementEnabledForUser()&&s.createElement("div",{className:"simpleDivTable-actionGroupContainer"},s.createElement(j.Z,{isEditing:c,cancel:handleCancel,edit:m||e.archiveData.archived?void 0:()=>{d(!0)},archive:m||e.archiveData.archived?void 0:()=>{Q.bA({items:[e],onArchive:()=>{T.ZP.success("Unit successfully archived.")
o()}})},unarchive:e.archiveData.archived?async()=>{const t=(0,z.cI)([e.id])
await t([e.id])
T.ZP.success("Unit successfully unarchived.")
o()}:void 0}))))}const ie=r.mM.create({archivedField:{opacity:.6},baseUnitText:{color:C.pp,fontStyle:"italic"},iconStyle:{color:C.pp,marginRight:"10px",height:"12px",width:"12px"},horizontalSpacing:{width:25},rowContainer:{display:"flex",marginLeft:-25,width:"100%",position:"relative"},tableRow:{alignItems:"center",borderTop:1,borderColor:C.tN,display:"flex",marginRight:-25,padding:"10px 14px",width:"100%"},conversionFactorInput:{paddingRight:82,display:"flex",alignItems:"center"},conversionFactorInputField:{flex:3},conversionFactorInputFlex1:{flex:1,display:"flex",justifyContent:"center"}})
function QuantitySettingsTable({quantity:e,refetch:t}){const n=isUnitDictionaryManagementEnabledForUser(),[a,i]=(0,s.useState)(!1),o=s.createElement("div",{className:"simpleDivTable-header"},s.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-header--title simpleDivTable-cell--narrow"},"Units",n&&s.createElement(u.ZP,{container:"body",placement:u.TQ.TOP,title:a?"Only one unit may be added at a time":"Add unit to class"},s.createElement(R.Z,{className:U()("simpleDivTable-addButton",{"simpleDivTable-addButton--disabled":a}),icon:"compose",onClick:a?void 0:()=>{i(!0)}}))),s.createElement("div",{className:"simpleDivTable-headerCell simpleDivTable-cell--narrow"},"Symbol"),s.createElement("div",{className:"simpleDivTable-headerCell"},"Conversion factor")),l=e.units.slice()
l.sort(((t,n)=>{var a,i
return t.archiveData.archived!==n.archiveData.archived?t.archiveData.archived?1:-1:t.id===(null===(a=e.baseUnit)||void 0===a?void 0:a.id)?-1:n.id===(null===(i=e.baseUnit)||void 0===i?void 0:i.id)?1:new W.Decimal(t.conversionFactor).comparedTo(new W.Decimal(n.conversionFactor))}))
const createUnit=async e=>{try{await(0,I.JP)(e)
T.ZP.success(`Successfully created unit ${e.symbol}`)
t()
i(!1)}catch(e){if(!e.message||!e.message.startsWith("Unit symbol"))throw e
T.ZP.warn(e.message)}},updateUnit=async e=>{try{await(0,I.t1)(e)
T.ZP.success(`Successfully updated unit ${e.symbol}`)
t()}catch(e){if(!e.message||!e.message.startsWith("Unit symbol"))throw e
T.ZP.warn(e.message)}},c=l.map((n=>s.createElement(UnitTableRow,{unit:n,baseUnit:e.baseUnit,key:n.id,quantityId:e.id,refetch:t,onSave:updateUnit})))
a&&c.push(s.createElement(UnitTableRow,{key:"addUnit",baseUnit:e.baseUnit,onCancel:()=>{i(!1)},onSave:createUnit,quantityId:e.id,refetch:t}))
return s.createElement("div",{className:(0,r.iv)(re.tableContainer),key:e.id},s.createElement("div",{className:"sampleSchemaSettings-containerTable-name"},s.createElement("div",{className:"sampleSchemaSettings-containerTable-nameContainer"},s.createElement("div",{className:"sampleSchemaSettings-containerTable-nameHeader"},"Unit type"),n?s.createElement($.Z,{requestChange:n=>{if(n.trim()){if(n.trim()!==e.name){(0,I.$R)({id:e.id,name:n.trim()})
T.ZP.success(`Successfully updated unit type ${n}`)
t()}}else T.ZP.error("Cannot set unit type name to be empty")},value:e.name,dataTestAttrs:{component:"ContainerSchemaSettings",element:"nameField"},emptyValueAllowed:!1}):s.createElement("span",null,e.name)),e.terms.length>0&&s.createElement("div",{className:"sampleSchemaSettings-containerTable-nameContainer"},s.createElement("div",{className:"sampleSchemaSettings-containerTable-nameHeader"},"Formula"),s.createElement(QuantityTermsDisplay,{terms:e.terms}))),s.createElement("div",{className:(0,r.iv)(re.divTableWide)},o,0===e.units.length?s.createElement("div",{className:"simpleDivTable-row"},s.createElement("div",{className:"simpleDivTable-cell simpleDivTable-cell--emptyMessage"},"This unit type does not have any units")):c))}const re=r.mM.create({tableContainer:{marginBottom:26,width:"100%",border:1,borderStyle:"solid",borderColor:C.tN,borderRadius:4,display:"flex"},divTableWide:{width:"100%",minWidth:500,order:1,borderStyle:"solid",borderColor:C.tN,borderRadius:4}}),se=a.Ps`
  query UnitQuantitiesQuery @skipAudit @engComponent(name: UNITS) {
    quantities {
      ... on QuantityNode {
        id
        name
        terms {
          value
          exponent
        }
        baseUnit {
          id
          name
          symbol
          aliases
          conversionFactor
          currentVersionNumber
        }
        units {
          id
          name
          symbol
          aliases
          conversionFactor
          currentVersionNumber
          archiveData {
            archived
            purpose
          }
        }
      }
    }
  }
`
function UnitDictionaryListingContents({refetch:e,quantities:t}){const n=(0,s.useCallback)((async()=>{const{data:t}=await(0,I.Ih)()
E.bA(M,s.createElement(UnitsOnboardingWizardModal,{refetch:e,defaultUnitsData:t,onRequestClose:()=>{E.xv(M)}}))}),[e]);(0,s.useEffect)((()=>{0===t.length&&isUnitDictionaryManagementEnabledForUser()&&n()}),[t,n])
const a=(0,i.UY)(t,"name"),c=a.map((t=>s.createElement(QuantitySettingsTable,{key:t.name,quantity:t,refetch:e}))),d=a.map((e=>e.units)).flat()
return s.createElement("div",null,s.createElement("div",{className:"u-lr-split"},s.createElement(p.R6,null,"Unit Dictionary"),s.createElement("div",{className:(0,r.iv)(oe.topButtons)},s.createElement(u.ZP,{title:l.QU},s.createElement(m.Co,{icon:"audit-trail",onClick:()=>{(0,o.dV)([...d.map((e=>e.id)),...a.map((e=>e.id))])},size:m.qE.SMALL,buttonStyle:m.ZJ.TERTIARY_GRAY})),isUnitDictionaryManagementEnabledForUser()&&s.createElement(m.Co,{buttonStyle:m.ZJ.PRIMARY,size:m.qE.SMALL,text:"Add new unit type",onClick:()=>E.bA(QuantityCreationModal,s.createElement(QuantityCreationModal,{refetch:e}))}))),s.createElement("div",{className:(0,r.iv)(oe.tables)},c.length>0?c:s.createElement("span",null,"Your unit dictionary is empty. Reach out to your tenant admin to add units.")))}function UnitDictionaryListing(){(0,s.useEffect)((()=>{(0,c._w)("Unit Dictionary")}),[])
return s.createElement("div",{className:(0,r.iv)(oe.unitDictionaryPage)},s.createElement("div",{className:(0,r.iv)(oe.unitDictionaryListing)},s.createElement(d.ZP,{query:se,renderLoading:()=>s.createElement(h.b,null),fetchPolicy:"cache-and-network",renderCachedDataWhenRefetching:!0},(({quantities:e},{refetch:t})=>s.createElement(UnitDictionaryListingContents,{refetch:t,quantities:e})))))}const oe=r.mM.create({unitDictionaryListing:{margin:"40px"},unitDictionaryPage:{overflowY:"auto",height:"100%"},tables:{marginTop:20},topButtons:{display:"flex",justifyContent:"space-between",gap:4}})},102385:(e,t,n)=>{n.d(t,{Z:()=>r})
var a=n(348920)
let i={}
const r={reload:function reload(){null!=window.user?({licenses:i}=window.user):i={}},hasLicense:e=>(null!=i[e]?i[e].granted:void 0)||!1,hasEnterprisePlan(){return this.hasLicense("LICENSE_REVIEWS")},hasCommercialLicense:()=>a.ZP.PRIVATE_DEPLOY}},747346:(e,t,n)=>{n.d(t,{OD:()=>a,Od:()=>adminStateInitialized,ol:()=>userAdminStateUpdated})
var a
!function(e){e.USER_ADMIN_STATE_INITIALIZED="USER_ADMIN_STATE_INITIALIZED"
e.USER_ADMIN_STATE_UPDATED="USER_ADMIN_STATE_UPDATED"}(a||(a={}))
function adminStateInitialized({organizationId:e,usersById:t}){return{type:a.USER_ADMIN_STATE_INITIALIZED,organizationId:e,usersById:t}}function userAdminStateUpdated(e){return{type:a.USER_ADMIN_STATE_UPDATED,updatedUsersById:e}}},67715:(e,t,n)=>{n.d(t,{BX:()=>matchCase,Hh:()=>getLetterCase,R7:()=>withCase})
function getLetterCase(e){return e.toUpperCase()===e?"UPPER":"LOWER"}function withCase(e,t){return"UPPER"===t?e.toUpperCase():e.toLowerCase()}function matchCase(e,t){return e.toUpperCase()!==e?t.toLowerCase():t.toUpperCase()}},10584:(e,t,n)=>{n.d(t,{$y:()=>E,Cf:()=>tryParseAndFormatDateWithUserLanguageTag,DR:()=>I,Ep:()=>getLocaleInputFormats,Fz:()=>isValidDateOrDatetimeOrTime,JF:()=>g,TM:()=>formatDatetimeValue,UJ:()=>formalTimeUTC,UT:()=>readableTime,YH:()=>convertUTCDatetimeToLocal,_y:()=>b,fG:()=>expectsMonthBeforeDay,m:()=>h,mY:()=>A,mx:()=>T,n$:()=>m,nI:()=>formalTime,qL:()=>S,qM:()=>f,qb:()=>isValidDate,rt:()=>isValidDatetime,sC:()=>isValidTime,xj:()=>tryParseAndFormatDatetimeWithUserLanguageTag})
var a=n(536105),i=n.n(a),r=(n(647812),n(232606)),s=n(348920),o=n(468991),l=n(613118),c=n(432128),d=n(822314)
const{LANGUAGE_PREFERENCE_KEY:u}=o.ZP,m="YYYY-MM-DD",p="YYYY-M-D h:m:s a",h="YYYY-MM-DD HH:mm:ss",E="h:m a",S="YYYY-MM-DD hh:mm:ss A",T="hh:mm A",g="YYYY-MM-DDTHH:mm:ssZZ",f=["YYYY-M-D","YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm ZZ","YYYY-MM-DD HH:mm:ss","YYYY-M-D H:m:s","YYYY-MM-DD HH:mm:ss ZZ",g,"YYYY-MM-DDTHH:mm:ss.SSSZZ",h,p,m],I="UTC",A=[I,"US/Alaska","US/Arizona","US/Central","US/Eastern","US/Hawaii","US/Mountain","US/Pacific","Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Costa_Rica","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fortaleza","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Inuvik","America/Iqaluit","America/Jamaica","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Shiprock","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Choibalsan","Asia/Chongqing","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Gaza","Asia/Harbin","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kashgar","Asia/Kathmandu","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Canada/Atlantic","Canada/Central","Canada/Eastern","Canada/Mountain","Canada/Newfoundland","Canada/Pacific","Europe/Amsterdam","Europe/Andorra","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","GMT","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Johnston","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Wake","Pacific/Wallis"],y="2-digit",_="short",C="numeric",R="long"
const N=(0,d.Z)((function toLocaleDateString(e,t,n){return l.x$.hasOwnProperty(t)?function formatBenchlingCustomDateString(e,t,n){(0,r.hu)(s.ZP.NAV_ENABLE_CUSTOM_LOCALES&&l.x$.hasOwnProperty(t),`${t} is not a supported language tag`)
return`${(null==n?void 0:n.hasOwnProperty("weekday"))?e.toLocaleString("en",{weekday:R}):""} ${(null==n?void 0:n.hasOwnProperty("day"))?e.toLocaleString("en",{day:y}):""}${(null==n?void 0:n.hasOwnProperty("month"))?e.toLocaleString("en",{month:_}).toUpperCase():""}${(null==n?void 0:n.hasOwnProperty("year"))?e.toLocaleString("en",{year:C}):""}`.trim()}(e,t,n):e.toLocaleDateString(t,n)}),{max:2e3},((e,t,n)=>`${e};${t};${JSON.stringify(n)}`))
const O=(0,d.Z)((function toLocaleTimeString(e,t,n){return l.x$.hasOwnProperty(t)?function formatBenchlingCustomTimeString(e,t,n){(0,r.hu)(s.ZP.NAV_ENABLE_CUSTOM_LOCALES&&l.x$.hasOwnProperty(t),`${t} is not a supported language tag`)
return e.toLocaleTimeString("en",{hour12:"bnch-12hr"===t,hour:"2-digit",minute:"2-digit",second:n?"2-digit":void 0})}(e,t,n):e.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit",second:n?"2-digit":void 0})}),{max:2e3},((e,t,n)=>`${e};${t};${n}`))
function expectsMonthBeforeDay(e){return/en-US/i.test(e||c.Z.get(u))}function getDefaultDate(e,{showYear:t,showDate:n,showTime:a,showWeekday:r,showSeconds:s,showTimezoneOffset:o,languageTag:l}){const c=expectsMonthBeforeDay(l)?"M/D":"D/M"
let d=`${n&&r?"dddd,":""} ${n?c:""}${n&&t?"/YYYY":""} ${a?`h:mm${s?":ss":""}a`:""}`
o&&(d+=" ZZ")
d=d.trim()
return i()(e).format(d)}function readableTime(e,{showYear:t=!0,showDate:n=!0,showTime:a=!0,showWeekday:r=!1,showSeconds:s=!1,showTimezoneOffset:o=!1,languageTag:l=c.Z.get(u)}={}){const d=i()(e),m=d.year()
if(m>9999||m<1e3||!d.isValid())return"Invalid date"
const p=d.toDate()
let h={}
if(n){h={...h,month:"numeric",day:"numeric"}
t&&(h={...h,year:"numeric"})
r&&(h={...h,weekday:"long"})}if(!function isLocaleSupported(){try{N(new Date,"i")}catch(e){if("RangeError"===e.name)return!0}return!1}())return getDefaultDate(e,{languageTag:l,showYear:t,showDate:n,showTime:a,showWeekday:r,showSeconds:s,showTimezoneOffset:o})
let E=""
try{n&&(E+=N(p,l,h))
if(a){n&&(E+=" ")
E+=O(p,l,s)
o&&(E+=` ${d.format("ZZ")}`)}}catch(i){return getDefaultDate(e,{languageTag:l,showYear:t,showDate:n,showTime:a,showWeekday:r,showSeconds:s,showTimezoneOffset:o})}return E}function formalTime(e,t=!1){return i()(e).format("YYYY-MM-DD hh:mm:ss A"+(t?" ZZ":""))}function formalTimeUTC(e){return`${i()(e).utc().format("DD MMM YYYY HH:mm:ss")} UTC`}function convertUTCDatetimeToLocal(e){return e&&i()(e,[g],!0).isValid()?formalTime(e):e}function getLocaleInputFormats(e,t,n=!1){const a=["D MMM YYYY","D-MMM-YYYY","D-MMMM-YYYY","D.MMM.YYYY","DMMMYYYY","YYYY/M/D","YYYY.M.D","YYYYMMMDD"],[i,r]=expectsMonthBeforeDay(t)?["M","D"]:["D","M"]
for(const e of["YYYY","YY"]){a.push(`${i}/${r}/${e}`)
a.push(`${i}-${r}-${e}`)
a.push(`${i}.${r}.${e}`)}if(e){a.push("D MMM YYYY h:mm:ss a")
a.push("D-MMM-YYYY h:mm:ss a")
a.push("D-MMMM-YYYY h:mm:ss a")
a.push("D.MMM.YYYY h:mm:ss a")
a.push("DMMMYYYY h:mm:ss a")
a.push(p)
n&&a.push("YYYY-MM-DD hh:mm:ss A ZZ")
for(const e of[":ss",""])for(const t of[" a",""]){for(const n of["YYYY","YY"]){a.push(`${i}/${r}/${n} H:mm${e}${t}`)
a.push(`${i}-${r}-${n} H:mm${e}${t}`)
a.push(`${i}.${r}.${n} H:mm${e}${t}`)}a.push(`YYYY/M/D H:mm${e}${t}`)
a.push(`YYYY-M-D H:mm${e}${t}`)
a.push(`YYYY.M.D H:mm${e}${t}`)}}return a}function isValidDateOrDatetimeOrTime({textValue:e,min:t,max:n,validFormats:a}){return!e||!(!i()(e,a,!0).isValid()||t&&!i()(t,a,!0).isValid()||n&&!i()(n,a,!0).isValid())&&((!t||!i()(e,a,!0).isBefore(i()(t,a,!0)))&&(!n||!i()(e,a,!0).isAfter(i()(n,a,!0))))}function isValidDate({textValue:e,min:t,max:n,validDateFormats:a=[m]}){return isValidDateOrDatetimeOrTime({textValue:e,min:t,max:n,validFormats:a})}function isValidDatetime({textValue:e,min:t,max:n,validDatetimeFormats:a=[p]}){return isValidDateOrDatetimeOrTime({textValue:e,min:t,max:n,validFormats:a})}function isValidTime({textValue:e,min:t,max:n,validTimeFormats:a=[E]}){return isValidDateOrDatetimeOrTime({textValue:e,min:t,max:n,validFormats:a})}function formatDatetimeValue(e,t,n,a){return e?i()(e,t).format(n):null!=a?a:e}const b=(0,d.Z)((function _tryParseDate(e,t,n=!1,a=m,r=!1){const s=i()(e,[m,g,...getLocaleInputFormats(n,t,r)],!0)
return s.isValid()?s.format(a):null}),{max:2e3},((e,t,n=!1,a=m,i=!1)=>`${e};${t};${n};${a};${i}}`))
function tryParseAndFormatDateWithUserLanguageTag(e,t){const n=c.Z.get(u)
return function tryFormatDate(e,t){if(t)return e?readableTime(e,{showTime:!1}):null
return e}(b(e,n),t)}function tryParseAndFormatDatetimeWithUserLanguageTag(e,t){const n=c.Z.get(u)
return function tryFormatDatetime(e,t){if(t)return e?readableTime(e,{showSeconds:!0}):null
return e}(b(e,n,!0,h,!0),t)}},717235:(e,t,n)=>{n.d(t,{FC:()=>getOligoFilename,UK:()=>i,VB:()=>formatRows,mT:()=>formatOligos,ov:()=>downloadOligos})
var a=n(871214)
function _escapeTags(e){return e.replace(/("|:)/g,"\\$1")}function formatRows(e,t){let n=e.map((e=>function _formatRow(e,t){return e.map((e=>function _escapeDelimiters(e,t){switch(t){case"\t":return e.replace(/\t/g," ")
case",":return/[",\n\r]/.test(e)?`"${e=e.replace(/"/g,'""')}"`:e
default:return e}}(e,t))).join(t)}(e,t))).join("\n")
n+="\n"
return n}function formatOligos(e,t){const n=(()=>{switch(t){case"tsv":return"\t"
case"csv":return","
default:throw new Error("Invalid format")}})()
return formatRows(e.map((e=>{const t=[e.name,e.bases,e.nucleotideType]
e.description&&t.push(function _formatDesc(e){if((e=e.replace(/\n/g," ")).length>100){e=e.substring(0,97)
e+="..."}return e}(e.description))
e.tags&&e.tags.length>0&&t.push(function _tagsToString(e){let t=""
for(const n of Array.from(e)){n.value?t+=`${_escapeTags(n.name)}:${_escapeTags(n.value)}`:t+=`${_escapeTags(n.name)}`
t+=" "}return t.trim()}(e.tags))
return t})),n)}function downloadOligos({oligos:e,filename:t,format:n}){null==n&&(n="csv")
a.yP(t,formatOligos(e,n))}function getOligoFilename(e,t){null==t&&(t="csv")
return`oligos ${e}.${t}`}const i='Primers have been copied in tab-delimited format, which can be pasted into Excel or used in the "Paste" option on [IDT\'s order form](http://www.idtdna.com/order/OrderEntry.aspx).'},255161:(e,t,n)=>{n.d(t,{E:()=>splitExtension,Z:()=>toFilename})
function toFilename(e,t){return`${e=e.replace(/[\/\s]+/g,"-").replace(/[^\w-]/g,"")}.${t}`}function splitExtension(e){const t=e.lastIndexOf(".")
return 0===t||-1===t?{root:e,extension:""}:{root:e.slice(0,t),extension:e.slice(t)}}},375171:(e,t,n)=>{n.d(t,{WJ:()=>immutableReplace,bX:()=>immutableRemoveAt,e6:()=>immutableMove})
var a=n(232606)
function immutableMove(e,t,n){const i=e.filter((e=>e===t)).length;(0,a.Gp)(1===i,`expected item to appear in the list exactly once, but it appears ${i} times`)
return function immutableInsert(e,t,n){return[...e.slice(0,t),n,...e.slice(t)]}(function immutableRemove(e,t){return e.filter((e=>e!==t))}(e,t),n,t)}function immutableReplace(e,t,n){return[...e.slice(0,t),n,...e.slice(t+1)]}function immutableRemoveAt(e,t){return[...e.slice(0,t),...e.slice(t+1)]}},927517:(e,t,n)=>{n.d(t,{BACKSPACE:()=>u,callOnEnter:()=>callOnEnter,ctrl:()=>o,getArrowKeyDirection:()=>getArrowKeyDirection,getNormalizedShortcut:()=>getNormalizedShortcut,getShortcutText:()=>getShortcutText,isADeleteKey:()=>isADeleteKey,isAnArrowKey:()=>isAnArrowKey,isControlKey:()=>isControlKey,isCtrlA:()=>isCtrlA,isCtrlC:()=>isCtrlC,isCtrlF:()=>isCtrlF,isCtrlG:()=>isCtrlG,isCtrlI:()=>isCtrlI,isCtrlP:()=>isCtrlP,isCtrlS:()=>isCtrlS,isCtrlShiftC:()=>isCtrlShiftC,isCtrlShiftF:()=>isCtrlShiftF,isCtrlShiftG:()=>isCtrlShiftG,isCtrlX:()=>isCtrlX,isCtrlZ:()=>isCtrlZ,isDownKey:()=>isDownKey,isEnterKey:()=>isEnterKey,isEscapeKey:()=>isEscapeKey,isLeftKey:()=>isLeftKey,isNonTypingKey:()=>isNonTypingKey,isOSCtrlKey:()=>isOSCtrlKey,isRedo:()=>isRedo,isRightKey:()=>isRightKey,isShiftClick:()=>isShiftClick,isTabKey:()=>isTabKey,isUndo:()=>isUndo,isUndoRedo:()=>isUndoRedo,isUpKey:()=>isUpKey,onlyEscapeKey:()=>onlyEscapeKey})
var a=n(250965),i=n.n(a),r=n(531041),s=n(675649)
const o=s.V5()?"":"Ctrl",l=s.V5()?"":"",c=["Alt","Control","Meta","OS","Shift"],d=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Control","End","Enter","Fn","Home","Meta","OS","PageDown","Pageup","Tab"]
function getShortcutText(e){return`${r.default.compact([e.metaKey&&l,e.ctrlKey&&"Ctrl",e.altKey&&"Alt",e.shiftKey&&"Shift",!c.includes(e.key)&&e.key]).join(" + ")} (${e.which})`}function getNormalizedShortcut(e){return[isOSCtrlKey(e)&&"Ctrl",e.altKey&&"Alt",e.shiftKey&&"Shift",e.key&&!c.includes(e.key)&&e.key.toUpperCase()].filter((e=>e)).join(" + ")}function isNonTypingKey(e){return e.target&&!i()(e.target).closest("input, [contentEditable]:not(.hiddenFocusEditable), textarea")||e.metaKey||e.ctrlKey||d.includes(e.key)}function isOSCtrlKey(e){return s.V5()?e.metaKey:e.ctrlKey}function isCtrlC(e){return"Ctrl + C"===getNormalizedShortcut(e)&&e.target===e.currentTarget}function isCtrlShiftC(e){return"Ctrl + Shift + C"===getNormalizedShortcut(e)&&e.target===e.currentTarget}function isCtrlA(e){return"Ctrl + A"===getNormalizedShortcut(e)&&e.target===e.currentTarget}function isCtrlI(e){return"Ctrl + I"===getNormalizedShortcut(e)&&e.target===e.currentTarget}function isCtrlX(e){return"Ctrl + X"===getNormalizedShortcut(e)&&e.target===e.currentTarget}function isCtrlZ(e){return"Ctrl + Z"===getNormalizedShortcut(e)&&e.target===e.currentTarget}function isCtrlF(e){return"Ctrl + F"===getNormalizedShortcut(e)}function isCtrlShiftF(e){return"Ctrl + Shift + F"===getNormalizedShortcut(e)}function isCtrlG(e){return"Ctrl + G"===getNormalizedShortcut(e)}function isCtrlShiftG(e){return"Ctrl + Shift + G"===getNormalizedShortcut(e)}function isCtrlS(e){return"Ctrl + S"===getNormalizedShortcut(e)}function isCtrlP(e){return"Ctrl + P"===getNormalizedShortcut(e)}function isUndo(e){return"Ctrl + Z"===getNormalizedShortcut(e)}function isRedo(e){const t=getNormalizedShortcut(e)
return"Ctrl + Shift + Z"===t||"Ctrl + Y"===t}function isUndoRedo(e){return isUndo(e)||isRedo(e)}function isControlKey(e){return 17===e.which||91===e.which||93===e.which||224===e.which}function isLeftKey(e){return 37===e.which}function isUpKey(e){return 38===e.which}function isRightKey(e){return 39===e.which}function isDownKey(e){return 40===e.which}function isAnArrowKey(e){return[37,38,39,40].includes(e.which)}function getArrowKeyDirection(e){if(!isAnArrowKey(e))throw new Error("Must use with an arrow key event")
return isUpKey(e)?"up":isDownKey(e)?"down":isLeftKey(e)?"left":"right"}function isEnterKey(e){return 13===e.which}function isTabKey(e){return 9===e.which}function isADeleteKey(e){return function isBackspaceKey(e){return 8===e.which}(e)||46===e.which}function isEscapeKey(e){return 27===e.which}function onlyEscapeKey(e,t){return function(n){return isEscapeKey(n)?e.call(t):void 0}}function callOnEnter(e){return t=>{isEnterKey(t)&&e&&e()}}function isShiftClick(e){return e.nativeEvent instanceof MouseEvent&&e.nativeEvent.shiftKey}const u=8},68150:(e,t,n)=>{n.d(t,{C$:()=>a,Dt:()=>isMiddleClick,dO:()=>isRightClick})
function isRightClick(e){return 3===e.which||e.ctrlKey}function isMiddleClick(e){return 1===e.button}const a=n(675649).Ud?"DOMMouseScroll":"mousewheel"},808844:(e,t,n)=>{n.d(t,{B_:()=>typeToPluralized,Dw:()=>listToReadable,E2:()=>typeToName,JZ:()=>formatThousands,U5:()=>a,UC:()=>phraseToCamelCase,Vx:()=>constantCaseToWords,co:()=>capwords,fk:()=>ellipsize,gf:()=>listToTruncatedReadable,hx:()=>typeCountToReadable,i3:()=>snakeToCamelCase,if:()=>camelCaseToCapital,kC:()=>capitalize,ko:()=>replaceAll,lv:()=>snakeToCapital,mu:()=>camelCaseToSnake,td:()=>formatBytes})
var a,i=n(531041),r=n(232606),s=n(675649),o=n(459830),l=n(2634)
function typeToName(e){switch(e){case o.ANALYSIS:return"analysis"
case o.ANALYTICS_DASHBOARD:return"dashboard"
case o.ASSAY_RESULT:return"result"
case o.ASSAY_RUN:return"run"
case o.BIOENTITY_MIXIN:return"entity"
case o.BLOB:return"blob"
case o.BASIC_FOLDER_ITEM:return"custom entity"
case o.BULK_ASSEMBLY:return"assembly"
case o.PROTEIN:return"AA sequence"
case o.SequenceSubtype.SEQUENCE:return"DNA sequence"
case o.SequenceSubtype.RNA_SEQUENCE:return"RNA sequence"
case o.SequenceSubtype.DNA_OLIGO:return"DNA oligo"
case o.SequenceSubtype.RNA_OLIGO:return"RNA oligo"
case o.TAG_SCHEMA:return"entity schema"
case o.SCHEMA_FIELD_SELECTOR:return"dropdown"
case o.SCHEMA_FIELD_SELECTOR_OPTION:return"dropdown option"
case o.STAGE_ENTRY:return(0,l.U8)("legacy workflow entry","workflow entry")
case o.REQUEST:return"request"
case o.SAVED_SEARCH:return"saved search"
case o.SEQUENCE_ANALYSIS:return"DNA / RNA alignment"
case o.STORABLE:return"inventory item"
case o.PROTEIN_ALIGNMENT:return"AA alignment"
case o.PROCESS:return"workflow task group"
case o.PROCESS_TASK:return"workflow task"
case o.PROCESS_OUTPUT:return"workflow output"
case o.RECIPE_RUN_TASK:return"experiment run"
case o.RECIPE_UNIT_OPERATION_TASK:return"unit operation"
case o.RECIPE_STEP_TASK:return"step"
case o.WORKFLOW:return(0,l.U8)("legacy workflow","workflow")
case o.TEMPLATE:return"entry template"
case o.SUBTEMPLATE:return"sub-template"
case o.FORM_DEFINITION:return"form template"
case o.FILE:return"file"
default:return e.replace(/_/g," ")}}function typeToPluralized(e){return(0,s._6)(2,typeToName(e))}function typeCountToReadable(e){return i.default.map(e,((e,t)=>`${e} ${1===e?typeToName(t):typeToPluralized(t)}`)).join(", ")}function formatBytes(e,t){null==t&&(t={})
let{precision:n}=t
null==n&&(n=2)
if(e<1024)return`${e}B`
if(e<1048576)return`${Math.ceil(e/1024)}KB`
if(e<1073741824)return`${Math.ceil(e/1048576)}MB`
const a=e/1073741824
return a%1==0?`${a}GB`:`${a.toFixed(n)}GB`}function formatThousands(e){const t=null!=e?e.toLocaleString(void 0,{useGrouping:!0}):void 0
return null!=t?t:`${e}`}function listToReadable(e,t="and"){return 0===e.length?"":1===e.length?e[0]:2===e.length?`${e[0]} ${t} ${e[1]}`:`${i.default.initial(e).join(", ")}, ${t} ${i.default.last(e)}`}function listToTruncatedReadable(e,t=1,n="and"){(0,r.hu)(t>=1,"Truncate length must be greater or equal to 1")
if(e.length<=t)return listToReadable(e,n)
const a=1===t?"":","
return`${e.slice(0,t).join(", ")}${a} and ${e.length-t} more`}!function(e){e.FRONT="FRONT"
e.BACK="BACK"
e.MIDDLE="MIDDLE"}(a||(a={}))
function ellipsize(e,t,n=a.BACK){if(e.length>t)switch(n){case a.FRONT:return`...${e.slice(e.length-(t-3),e.length)}`
case a.MIDDLE:return`${e.slice(0,Math.ceil((t-3)/2))}...${e.slice(-(t-3)/2)}`
case a.BACK:default:return`${e.slice(0,t-3)}...`}return e}function capitalize(e){return e?(e=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).replace(/(^|\s)(aa|dna|rna)($|\s)/i,(e=>e.toUpperCase())):""}function capwords(e){return e?e.replace(/\w\S*/g,capitalize):""}function camelCaseToCapital(e){return e?capitalize(e.replace(/([A-Z])/g," $1")):""}function constantCaseToWords(e){return e?e.split(/_/).map((e=>e.toLowerCase())).join(" "):""}function snakeToCamelCase(e){return e?e.split("_").map(((e,t)=>0===t?e:capitalize(e))).join(""):""}function camelCaseToSnake(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function snakeToCapital(e){return capitalize(camelCaseToCapital(snakeToCamelCase(e)).trim())}function cleanPhrase(e){return e.replace(/[,.'_-]/g," ").trim()}function phraseToCamelCase(e){if(!e)return""
return cleanPhrase(e).split(/\s+/).map(((e,t)=>{const n=e.toLowerCase().split("")
return 0===t?`${n[0]+n.slice(1).join("")}`:`${n[0].toUpperCase()+n.slice(1).join("")}`})).join("")}function replaceAll(e,t,n){const a=new RegExp(t,"g")
return e.replace(a,n)}},771398:(e,t,n)=>{n.d(t,{$v:()=>delete_,BS:()=>putJSON,D_:()=>isAbortError,Hn:()=>getResponseWarnings,Ry:()=>patchJSONPromise,U2:()=>get,U3:()=>u,UJ:()=>getJSONPromise,Vz:()=>postPromise,WY:()=>deletePromise,Yh:()=>patchJSON,bE:()=>isJqXHR,cd:()=>postFile,d0:()=>isServerRequestError,dE:()=>registerHeaderGenerator,e7:()=>submitCSRFForm,nZ:()=>getXHRHeaders,s0:()=>postJSONPromise,sA:()=>putJSONPromise,sM:()=>getPromise,ty:()=>postJSON,uB:()=>postFileAsFormData,v_:()=>post,wt:()=>T,xA:()=>getJSON,z$:()=>getJSONTracked})
var a=n(440281),i=n.n(a),r=n(250965),s=n.n(r),o=n(232606),l=n(705905)
const c="X-Bnch-Warnings"
let d=null
const u={...i().Events}
let m=[]
function getXHRHeaders(){const e={}
for(const t of m)Object.assign(e,t())
return e}function registerHeaderGenerator(e){m.push(e)}const p=getXHRHeaders,h=getXHRHeaders,E=getXHRHeaders,S=getXHRHeaders
function submitCSRFForm(e,t,{target:n,datas:a=[]}={}){const i=s()("<form>").attr({method:e,action:t})
null!=n&&i.prop("target",n)
for(const e of[{csrf_token:l.r},...a])for(const t of Object.keys(e)){const n=e[t]
i.append(s()("<input>").attr({type:"hidden",name:t,value:n}))}i.hide().appendTo("body")
i.submit().remove()}function getJSONTracked(e,t){const n=s().getJSON(e,t)
if(null!=d)d=d.then((()=>n))
else{d=n
d.always((()=>{u.trigger("ajaxStop")
d=null}))
u.trigger("ajaxStart")}return n}function get(e,t){return s().get(e,t)}function getPromise(e,t){return Promise.resolve(get(e,t))}function getJSON(e,t){return s().getJSON(e,t)}function getJSONPromise(e,t){return Promise.resolve(getJSON(e,t))}function post({url:e,data:t}){return s().ajax({type:"POST",url:e,data:t,dataType:"json",headers:p()})}function postPromise({url:e,data:t}){return Promise.resolve(post({url:e,data:t}))}function postJSON({url:e,data:t,untracked:n}){null==n&&(n=!1)
return s().ajax({contentType:"application/json",data:JSON.stringify(t),type:"POST",dataType:"json",url:e,untracked:n,headers:p()})}function postJSONPromise({url:e,data:t,untracked:n}){return Promise.resolve(postJSON({url:e,data:t,untracked:n}))}function patchJSON({url:e,data:t}){return s().ajax({contentType:"application/json",data:JSON.stringify(t),type:"PATCH",dataType:"json",url:e,headers:h()})}function patchJSONPromise({url:e,data:t}){return Promise.resolve(patchJSON({url:e,data:t}))}function putJSON({url:e,data:t}){return s().ajax({contentType:"application/json",data:JSON.stringify(t),type:"PUT",dataType:"json",url:e,headers:E()})}function putJSONPromise({url:e,data:t}){return Promise.resolve(putJSON({url:e,data:t}))}function delete_({url:e,data:t}){return s().ajax({contentType:"application/json",data:JSON.stringify(t),type:"DELETE",dataType:"json",url:e,headers:S()})}function deletePromise({url:e,data:t}){return Promise.resolve(delete_({url:e,data:t}))}function postFile({url:e,file:t,progress:n}){return s().ajax({url:e,type:"POST",dataType:"json",headers:p()}).then((e=>{const a=new FormData
for(const t of Array.from(e.fields))a.append(t.name,t.value)
a.append("file",t)
return s().ajax({url:e.action,data:a,processData:!1,contentType:!1,type:"POST",progress:n})})).then(((e,t,n)=>n.getResponseHeader("Location")))}function postFileAsFormData({url:e,key:t,file:n}){const a=new FormData
a.append(t,n)
return s().ajax({url:e,data:a,processData:!1,contentType:!1,type:"POST",headers:p()})}function isJqXHR(e){return null!=e&&null!=e.getAllResponseHeaders}function isServerRequestError(e){const t=null!=e&&e.isBenchlingTaskError
return isJqXHR(e)||t}function isAbortError(e){return e instanceof window.DOMException&&e.code===window.DOMException.ABORT_ERR}function getResponseWarnings(e){const t=[],n=e.getResponseHeader(c)
if(n)try{const e=JSON.parse(n);(function assertWarningHeaderIsArray(e){return(0,o.Gp)(Array.isArray(e),"X-Bnch-Warnings in API response was not an array",{[c]:e})})(e)&&e.forEach((e=>{(0,o.Gp)("string"==typeof e,"X-Bnch-Warnings element was not a string",{warning:e})&&t.push(e)}))}catch(e){(0,o.Gp)(!1,"Malformed X-Bnch-Warnings header in API response",{[c]:n})}return t}const T=new class XHRCounter{constructor(){this.count=0}start(){const xhrFilter=e=>"GET"!==e.type.toUpperCase()&&!e.untracked
s()(document).ajaxSend(((e,t,n)=>{xhrFilter(n)&&this.count++})).ajaxComplete(((e,t,n)=>{xhrFilter(n)&&this.count--}))}getCount(){return this.count}}},556543:(e,t,n)=>{n.d(t,{$5:()=>isLinkFieldType,DN:()=>hasFileSchemaSupport,E1:()=>entityTypeSupportsResidues,E5:()=>getTagSchemaOligoAwareFolderItemType,Fc:()=>isLinkField,Gx:()=>isRNAOligoSchema,Iv:()=>isItemLinkFieldType,Kc:()=>oligoAwareFolderItemTypeMatchesTagSchema,MR:()=>isDNAOligoSchema,Om:()=>canRemoveTagSchema,PJ:()=>isTagSchemaSet,Qg:()=>tagSchemaToAllOligoAwareFolderItemTypes,T5:()=>entityTypeSupportsChemicalStructure,WL:()=>hasCustomTagSupport,Xq:()=>oligoAwareFolderItemTypeForFileType,ZE:()=>isLinkFieldOption,Zy:()=>isDNASequenceSchema,gq:()=>schemaTagFolderTypeForFileId,mR:()=>getTagSchemaOptions,oE:()=>bulkSetTagSchema,p:()=>isRNASequenceSchema,ql:()=>isStorableLinkFieldType,rS:()=>canEditTags,rV:()=>getFieldEligibleOligoNucleotideTypes,x3:()=>isBioentityLinkFieldType,yB:()=>getFieldTypeName,yw:()=>getTagSchemaTypeName})
var a=n(531041),i=n(232606),r=n(348920),s=n(955836),o=n(459830),l=n(537076),c=n(227887),d=n(256605),u=n(731412),m=n(497790),p=n(251808),h=n(295499),E=n(75804),S=n(379346),T=n(808844),g=n(901113)
const{RESIDUES_SUPPORTED_OLIGO_AWARE_TYPES:f}=l
function getFieldTypeName(e){return m.FIELD_TYPES_BY_TYPE_STRING[e].label.toLowerCase()}function getTagSchemaOptions(e,t){let n=null;(0,i.Gp)(e.length>0,"Expected at least one file in getTagSchemaOptions.")
for(const t of e){const e=(0,S.it)(t)
if(n){if(e!==n)return{error:"Select files of a single type"}}else n=e}const a=E.Z.getTagSchemas({oligoAwareFolderItemTypes:[n],requiredPermissions:t})
return a&&0!==a.length?{data:a}:{error:`No schemas exist for ${(0,T.E2)(n)}`}}function isTagSchemaSet(e){return e.every((e=>Boolean(e.tagSchema)))}function isLinkFieldType(e){return m.LINK_FIELD_TYPES.includes(e)}function isLinkField(e){return isLinkFieldType(e.fieldType)}function isLinkFieldOption(e){return e.fieldDefinition!==m.ComputedFieldType.SNAPSHOT&&isLinkFieldType(e.fieldDefinition)}function isBioentityLinkFieldType(e){return[m.FIELD_TYPES.BIOENTITY_LINK.type,m.FIELD_TYPES.PART_LINK.type,m.FIELD_TYPES.TRANSLATION_LINK.type,m.FIELD_TYPES.TRANSCRIPTION_LINK.type].includes(e)}function isItemLinkFieldType(e){return isBioentityLinkFieldType(e)||e===m.FIELD_TYPES.BATCH_LINK.type||e===m.FIELD_TYPES.STORABLE_LINK.type||e===m.FIELD_TYPES.ENTRY_LINK.type}function isStorableLinkFieldType(e){return e===m.FIELD_TYPES.STORABLE_LINK.type}function entityTypeSupportsResidues(e){return null!=e&&f.includes(e)}function entityTypeSupportsChemicalStructure(e){return e===o.MOLECULE}function schemaTagFolderTypeForFileId(e){const t=S.ZP.apiIdToType(e)
switch(t){case o.TEMPLATE:case o.STAGE_CONFIGURATION:case o.STAGE_ENTRY:return o.ENTRY
default:return t}}function hasCustomTagSupport(e){const t=schemaTagFolderTypeForFileId(e)
return o.CUSTOM_TAGGABLE_FOLDER_ITEMS.includes(t)}function oligoAwareFolderItemTypeForFileType(e,t){const n=e
return n===o.SEQUENCE&&t?t:n}function hasFileSchemaSupport(e){return(0,l.isTagSchemaSupportedFolderItemType)(schemaTagFolderTypeForFileId(e))}function canRemoveTagSchema(e,t){return!(t||[o.BASIC_FOLDER_ITEM,o.MIXTURE].includes(e)||r.ZP.ELN_ENABLE_SCHEMA_REQUIRED_FOR_REVIEW&&o.ENTRY===e)}function bulkSetTagSchema(e,t){function onSubmit({deleteOldSchemaTags:n}){const i=t?t.id:null
u.mZ(a.default.pluck(e,"id"),i,n)}const n=t?t.fields.map((e=>e.name)):[],i=e.map((e=>e.tags.filter((e=>(0,c.Yx)(e)&&p.qd(e)&&!n.includes(e.name))))).flat(),r=i.some((e=>e.tagSchemaField.isConvertedFromLink)),s=i.map((e=>e.name)),l=e.some((({id:e})=>S.ZP.apiIdToType(e)===o.MIXTURE))
s.length||l?h.Z.open({convertableFieldNames:s,onSubmit,forMixtures:l,mayDropConvertedFromLinks:r}):onSubmit({deleteOldSchemaTags:!1})}function canEditTags(e,t){return S.ZP.isEntry(e)||S.ZP.isStageEntry(e)?Boolean(t.tagsEditable):t.writable}function getTagSchemaOligoAwareFolderItemType(e){return e.folderItemType===o.SEQUENCE?isRNASequenceSchema(e)?o.SequenceSubtype.RNA_SEQUENCE:isDNAOligoSchema(e)?o.SequenceSubtype.DNA_OLIGO:isRNAOligoSchema(e)?o.SequenceSubtype.RNA_OLIGO:o.SequenceSubtype.SEQUENCE:e.folderItemType}function tagSchemaToAllOligoAwareFolderItemTypes(e){return e.folderItemType===o.ENTRY?[o.ENTRY,o.STAGE_ENTRY]:e.sequenceType===d.Ts.MIXED?[o.SequenceSubtype.DNA_OLIGO,o.SequenceSubtype.SEQUENCE]:[getTagSchemaOligoAwareFolderItemType(e)]}function isDNAOligoSchema(e){return e.folderItemType===o.SEQUENCE&&(e.sequenceType===l.SequenceSchemaType.OLIGO||![l.SequenceSchemaType.DNA_SEQUENCE,l.SequenceSchemaType.RNA_SEQUENCE,l.SequenceSchemaType.RNA_OLIGO].includes(e.sequenceType)&&e.shouldCreateAsOligo)}function isRNAOligoSchema(e){return e.folderItemType===o.SEQUENCE&&e.sequenceType===l.SequenceSchemaType.RNA_OLIGO}function getFieldEligibleOligoNucleotideTypes(e){var t,n,a
if(e.isComputed||null!=e.archiveRecord||e.fieldType!==m.FieldType.BIOENTITY_LINK)return new Set([])
const i=null===(n=null===(t=e.requiredLink)||void 0===t?void 0:t.tagSchema)||void 0===n?void 0:n.sequenceType,r=null===(a=e.requiredLink)||void 0===a?void 0:a.folderItemType
switch(i){case d.Ts.OLIGO:case d.Ts.MIXED:return new Set([s.Wy.DNA])
case d.Ts.RNA_OLIGO:return new Set([s.Wy.RNA])
default:return"sequence"===r?new Set([s.Wy.DNA,s.Wy.RNA]):new Set([])}}function isDNASequenceSchema(e){return!(e.folderItemType!==o.SEQUENCE||e.sequenceType!==l.SequenceSchemaType.DNA_SEQUENCE&&e.sequenceType!==l.SequenceSchemaType.MIXED||isDNAOligoSchema(e)||isRNAOligoSchema(e))}function isRNASequenceSchema(e){return e.folderItemType===o.SEQUENCE&&e.sequenceType===l.SequenceSchemaType.RNA_SEQUENCE&&!isDNAOligoSchema(e)&&!isRNAOligoSchema(e)}function oligoAwareFolderItemTypeMatchesTagSchema(e,t){return e===o.SequenceSubtype.SEQUENCE?t.folderItemType===o.SEQUENCE&&[l.SequenceSchemaType.DNA_SEQUENCE,l.SequenceSchemaType.MIXED].includes(t.sequenceType):e===o.SequenceSubtype.RNA_SEQUENCE?t.folderItemType===o.SEQUENCE&&t.sequenceType===l.SequenceSchemaType.RNA_SEQUENCE:e===o.SequenceSubtype.DNA_OLIGO?t.folderItemType===o.SEQUENCE&&[l.SequenceSchemaType.OLIGO,l.SequenceSchemaType.MIXED].includes(t.sequenceType):e===o.SequenceSubtype.RNA_OLIGO?t.folderItemType===o.SEQUENCE&&t.sequenceType===l.SequenceSchemaType.RNA_OLIGO:t.folderItemType===e}function getTagSchemaTypeName({schema:e,folderItemType:t}){var n;(0,i.hu)(!(void 0===e&&void 0===t||void 0!==e&&void 0!==t),"One of schema or folderItemType must be provided")
const a=null!==(n=null==e?void 0:e.folderItemType)&&void 0!==n?n:t
switch(a){case o.SEQUENCE:{if(!e)return"DNA Sequence"
const t=e.sequenceType
switch(t){case l.SequenceSchemaType.DNA_SEQUENCE:return"DNA Sequence"
case l.SequenceSchemaType.RNA_SEQUENCE:return"RNA Sequence"
case l.SequenceSchemaType.OLIGO:return"DNA Oligo"
case l.SequenceSchemaType.RNA_OLIGO:return"RNA Oligo"
case l.SequenceSchemaType.MIXED:return"Sequence (DNA or Oligo)"
default:(0,i.Gp)(!1,`Unknown sequence schema type: ${(0,g.vE)(t)}`,{sequenceType:t,schema:e})
return"(unknown)"}}case o.BASIC_FOLDER_ITEM:return"Custom Entity"
case o.PROTEIN:return"AA Sequence"
case o.MOLECULE:return"Molecule"
case o.MIXTURE:return"Mixture"
case o.ENTRY:return"Entry"
default:(0,i.Gp)(!1,`Unknown schema type: ${a}`,{itemType:a,schema:e})
return"(unknown)"}}},8747:(e,t,n)=>{n.d(t,{K$:()=>deleteJSON,Mx:()=>deleteJSONPromise,Q5:()=>resumeTask,Ry:()=>patchJSONPromise,Y4:()=>l,Yh:()=>patchJSON,by:()=>runTask,s0:()=>postJSONPromise,ty:()=>postJSON})
var a=n(250965),i=n.n(a),r=n(232606),s=n(111770),o=n(771398)
const l="Your request took too long to complete."
function poll(e,t,n={},a=500,r=676500,o=0,c=0){function retry(i){const c=a+300
if(o>r){t.reject(flagTaskError({userMessage:l}));(0,s.QX)("task_runner.poll_timeout",1,{task_url:n.taskURL,component:n.engComponent})}else setTimeout((()=>{poll(e,t,n,c,r,c+o,i)}),a)}i().ajax({url:e,type:"GET",data:n}).done((e=>{if("SUCCESS"===e.status)t.resolve(e.result)
else if("FAILURE"===e.status)t.reject(flagTaskError(e.error,n))
else{if(null!=e.progress){const n=25+75*e.progress/100
t.notify(n)}retry(c)}})).fail((e=>{c>=6?t.reject(flagTaskError(e.error,n)):retry(c+1)}))}const c={}
function runTask(e,t=676500){const n=i().Deferred(),a=n.promise()
function requestProgress(e){e.lengthComputable&&n.notify(25*e.loaded/e.total)}e.headers={...e.headers,...(0,o.nZ)()}
let s=null
i().ajax({dataType:"json",xhr(){s=new window.XMLHttpRequest
s.addEventListener("progress",requestProgress,!1)
return s},...e}).done(((i,o,l)=>{(0,r.hu)(null!=i.status_url,"TaskRunner expected response to contain a status_url",{requestURL:e.url,responseURL:null==s?void 0:s.responseURL,status:l.status})
n.notify(25)
c[i.status_url]=a
a.always((()=>delete c[i.status_url]))
poll(i.status_url,n,{taskURL:e.url,initialReqCorrelationId:l.getResponseHeader("X-Debug-Req-Correlation-ID"),engComponent:l.getResponseHeader("X-Eng-Component")},500,t)})).fail((e=>{n.reject(flagTaskError(e))}))
return a}function postJSON({url:e,data:t},n=676500){return runTask({contentType:"application/json",data:JSON.stringify(t),dataType:"json",type:"POST",url:e},n)}async function postJSONPromise({url:e,data:t},n=676500){return await Promise.resolve(postJSON({url:e,data:t},n))}function patchJSON({url:e,data:t}){return runTask({contentType:"application/json",data:JSON.stringify(t),dataType:"json",type:"PATCH",url:e})}function patchJSONPromise({url:e,data:t}){return Promise.resolve(patchJSON({url:e,data:t}))}function deleteJSON({url:e,data:t}){return runTask({contentType:"application/json",data:JSON.stringify(t),dataType:"json",type:"DELETE",url:e})}function deleteJSONPromise({url:e,data:t}){return Promise.resolve(deleteJSON({url:e,data:t}))}function resumeTask(e,t=676500){const n=i().Deferred()
if(null!=c[e])return c[e]
poll(e,n,{},500,t)
return n.promise()}function flagTaskError(e,t={}){return{...e,isBenchlingTaskError:!0,taskURL:t.taskURL,initialReqCorrelationId:t.initialReqCorrelationId,engComponent:t.engComponent}}},251658:(e,t,n)=>{n.d(t,{$y:()=>textToDataURI,Cb:()=>textToBlob,FA:()=>initiateFileDownload,Px:()=>initiateTextDownload})
function textToBlob(e){return new Blob([e],{type:"text/plain"})}function textToDataURI(e){if(/Safari/i.test(navigator.userAgent))return`data:text/plain,${encodeURIComponent(e)}`
{const t=textToBlob(e)
return(window.webkitURL&&window.webkitURL.createObjectURL||(e=>window.URL.createObjectURL(e)))(t)}}function initiateFileDownload(e,t){const n=document.createElement("a")
n.download=e
n.href=t
n.style.display="none"
document.body.appendChild(n)
n.click()
document.body.removeChild(n)}function initiateTextDownload(e,t){const n=textToDataURI(function _textWithBOM(e,t){return/\.csv$/i.test(t)&&/[^\u0000-\u007f]/.test(e)?`\ufeff${e}`:e}(e,t))
initiateFileDownload(t,n)}},901113:(e,t,n)=>{n.d(t,{br:()=>i,gF:()=>assertJSONObject,lp:()=>a,mf:()=>isFunction,vE:()=>assertNever})
function assertNever(e){return e}function isFunction(e){return"function"==typeof e}const a="INACCESSIBLE",i="LOADING"
function isJSONArray(e){return Array.isArray(e)}function assertJSONObject(e){if(!function isJSONObject(e){return"object"==typeof e&&null!=e&&!isJSONArray(e)}(e))throw new Error("Expected JSONObject, got "+(null==e?"null":isJSONArray(e)?"array":typeof e))}},778476:(e,t,n)=>{n.d(t,{AI:()=>r,Mg:()=>o,fw:()=>i,ig:()=>s,ud:()=>a})
const a="",i={K:"",L:"",A:"",B:"",G:"",D:""},r="",s="",o="T"},970211:(e,t,n)=>{n.d(t,{Hj:()=>processVersions,YO:()=>isRevert,nv:()=>getVersionIdToResetTo,yW:()=>hasReverts})
function processVersions(e){let t
const n={},a=e[e.length-1]
t=null!=a?a.id:null
for(let a=e.length-1;a>=0;a--){const i=e[a],r=t!==i.id
r||(t=i.parentId)
n[i.id]=r}return n}function getVersionIdToResetTo(e,t){const n=t.filter((t=>t.id===e.parentId))[0]
if(null===e.parentId||null===n)return null
const a=t.map((e=>e.id)).sort(),i=a[a.indexOf(e.id)-1]
return e.parentId===i?e.parentId:n.parentId}function hasReverts(e){const t=e.sort(((e,t)=>e.id-t.id))
for(let e=1;e<t.length;e++)if(t[e].parentId!==t[e-1].id)return!0
return!1}function isRevert(e,t){const n=e.map((e=>e.id)).sort(),a=n.indexOf(t.id)
return 0!==a&&t.parentId!==n[a-1]}},418955:(e,t,n)=>{n.d(t,{AW:()=>toStandardAngle,MV:()=>getAngles,Z9:()=>isRangeOverlap,_O:()=>getAngle,op:()=>polarToCartesian})
var a=n(232606)
function polarToCartesian(e,t,n){n-=Math.PI/2
return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}function getAngle(e,t){(0,a.Gp)(e<=t,`Expected baseIndex=${e} <= sequenceLength=${t}`)
return e/t*2*Math.PI%(2*Math.PI)}function isInRange(e,{start:t,end:n}){return t<n?t<=e&&e<n:t<=e||e<n}function isRangeOverlap(e,t){return isInRange(t.start,e)||isInRange(e.start,t)}function toStandardAngle(e){return(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI)}function getAngles(e,t,n,a){const i=toStandardAngle(a(e))
if(null==t)return{startAngle:i,endAngle:i}
let r=toStandardAngle(a(t));(e===t||0===e&&t===n||i>r)&&(r+=2*Math.PI)
return{startAngle:i,endAngle:r}}},645773:(e,t,n)=>{n.d(t,{Z:()=>isModelTypeEnabledForListing})
var a=n(814099),i=n(210970),r=n(348920),s=n(459830)
function isModelTypeEnabledForListing(e){switch(e){case s.BASIC_FOLDER_ITEM:return(0,i.e8)(a.e2.REGISTRY)
case s.SCHEMA_INTERFACE:return r.ZP.SCHEMAS_ENABLE_INTERFACES
case s.PROTEIN:case s.PROTEIN_ALIGNMENT:return(0,i.e8)(a.e2.MOLBIO)||(0,i.e8)(a.e2.REGISTRY)
case s.MIXTURE:return(0,i.e8)(a.e2.REGISTRY)
case s.MOLECULE:return r.ZP.CHEMISTRY_ENABLE_MOLECULE
case s.SEQUENCE_ANALYSIS:case s.SequenceSubtype.SEQUENCE:case s.SequenceSubtype.RNA_SEQUENCE:case s.SequenceSubtype.DNA_OLIGO:case s.SequenceSubtype.RNA_OLIGO:return(0,i.e8)(a.e2.MOLBIO)||(0,i.e8)(a.e2.REGISTRY)
case s.BULK_ASSEMBLY:return(0,i.e8)(a.e2.MOLBIO)
case s.BATCH:return r.ZP.ENABLE_BATCHES&&(0,i.e8)(a.e2.REGISTRY)
case s.CONTAINER:case s.PLATE:case s.BOX:case s.LOCATION:return(0,i.e8)(a.e2.INVENTORY)
case s.PROCEDURE_RUN:return r.ZP.PROCEDURES_ENABLE
case s.PROCESS:case s.PROCESS_OUTPUT:case s.PROCESS_TASK:return(0,i.e8)(a.e2.PROCESSES)
case s.PROTOCOL:return r.ZP.ENABLE_PROTOCOLS
case s.ENTRY:return!0
case s.STAGE_ENTRY:case s.WORKFLOW:return(0,i.e8)(a.e2.WORKFLOWS)
case s.REQUEST:return(0,i.e8)(a.e2.REQUESTS)
case s.ASSAY_RUN:return(0,i.e8)(a.e2.LAB_AUTOMATION)
case s.ANALYTICS_DASHBOARD:return(0,i.e8)(a.e2.INSIGHTS)
case s.ANALYSIS:return r.ZP.ENABLE_ANALYSIS_TOOL
case s.CONNECTION:return(0,i.e8)(a.e2.LAB_AUTOMATION)&&r.ZP.INSTRUMENTS_ENABLE
case s.JELLYFISH:return r.ZP.APP_CORE_ENABLE_FAKE_ITEM_TYPE
case s.STUDY:return r.ZP.STUDIES_ENABLE
case s.WORKSHEET:return r.ZP.PROCEDURES_ENABLE_M1
case s.DATASET:return r.ZP.DATA_FRAMES_ENABLE_DATASET
case s.FILE:return r.ZP.FILES_ENABLE
default:return!0}}},154891:(e,t,n)=>{n.d(t,{eh:()=>a,lt:()=>closeCreateLoginModal,QK:()=>WarehouseActions_createLogin,D3:()=>WarehouseActions_fetchLogins,EO:()=>openCreateLoginModal,BI:()=>WarehouseActions_revokeLogin,Kr:()=>updateCreateLoginLabel})
var a,i=n(974913),r=n(614392),s=n(771398)
!function(e){e.WAREHOUSE_LOGIN_LIST_COMPLETE="WAREHOUSE_LOGIN_LIST_COMPLETE"
e.WAREHOUSE_LOGIN_REVOKE_START="WAREHOUSE_LOGIN_REVOKE_START"
e.WAREHOUSE_LOGIN_REVOKE_FAIL="WAREHOUSE_LOGIN_REVOKE_FAIL"
e.WAREHOUSE_CREATE_LOGIN_MODAL_OPEN="WAREHOUSE_CREATE_LOGIN_MODAL_OPEN"
e.WAREHOUSE_CREATE_LOGIN_MODAL_CLOSE="WAREHOUSE_CREATE_LOGIN_MODAL_CLOSE"
e.WAREHOUSE_CREATE_LOGIN_LABEL_UPDATE="WAREHOUSE_CREATE_LOGIN_LABEL_UPDATE"
e.WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_START="WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_START"
e.WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_COMPLETE="WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_COMPLETE"
e.WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_FAIL="WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_FAIL"}(a||(a={}))
function WarehouseActions_fetchLogins(){return e=>function fetchLogins(){return Promise.resolve(s.xA("/1/api/warehouse/logins"))}().then((({logins:t})=>{e(function listComplete(e){return{type:a.WAREHOUSE_LOGIN_LIST_COMPLETE,logins:e}}(t))}),(e=>{i.ZP.notifyError(e)}))}function doRevoke(e,t){e(function revokeStart(e){return{type:a.WAREHOUSE_LOGIN_REVOKE_START,login:e}}(t));(function revokeLogin(e){return Promise.resolve(s.$v({url:`/1/api/warehouse/logins/${e.id}`}))})(t).then((()=>{i.ZP.success("Credentials have been revoked.")}),(n=>{i.ZP.notifyError(n)
e(function revokeFail(e){return{type:a.WAREHOUSE_LOGIN_REVOKE_FAIL,login:e}}(t))}))}function WarehouseActions_revokeLogin(e){return t=>{new r.I4({title:"Confirm Revoking Credential",msg:"Are you sure you want to revoke these credentials? They cannot be restored."}).choice("Confirm","btn-af-danger",(()=>{doRevoke(t,e)})).choice("Cancel","btn-af-default").show()}}function openCreateLoginModal(){return{type:a.WAREHOUSE_CREATE_LOGIN_MODAL_OPEN}}function closeCreateLoginModal(){return{type:a.WAREHOUSE_CREATE_LOGIN_MODAL_CLOSE}}function updateCreateLoginLabel(e){return{type:a.WAREHOUSE_CREATE_LOGIN_LABEL_UPDATE,label:e}}function WarehouseActions_createLogin(e){return t=>{t(function createLoginStart(){return{type:a.WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_START}}())
return function createLogin(e){return Promise.resolve(s.ty({url:"/1/api/warehouse/logins",data:{label:e}}))}(e).then((e=>{t(function createLoginComplete(e){return{type:a.WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_COMPLETE,login:e}}(e))}),(e=>{i.ZP.notifyError(e)
t(function createLoginFail(){return{type:a.WAREHOUSE_CREATE_LOGIN_MODAL_CREATE_FAIL}}())}))}}},38209:(e,t,n)=>{n.d(t,{dX:()=>StageRunActions_addOutputSamples,jA:()=>StageRunActions_autoselectInputSampleContainers,Lv:()=>StageRunActions_bulkAddInputSamples,vg:()=>StageRunActions_bulkConfigureStageRuns,O0:()=>StageRunActions_bulkRemoveInputSamples,sS:()=>StageRunActions_bulkRemoveOutputSamples,On:()=>bulkUpdateStageRunStatus,vM:()=>StageRunActions_deleteStageRun,RC:()=>dispatchStageRunSamplesFetched,SD:()=>dispatchStageRunsFetchedAndFetchMissingSamples,gn:()=>fetchMissingRegisteredSamples,QF:()=>fetchMissingTransferredSamples,sh:()=>StageRunActions_fetchStageRunSamples,cI:()=>StageRunActions_replaceInputSample,MP:()=>StageRunActions_rerunStageRun,wc:()=>StageRunActions_splitByInputs,Td:()=>updateComputedTags})
var a,i=n(64558),r=n(531041),s=n(468943),o=n(171471),l=n(787004),c=n(977989),d=n(343748),u=n(947730),m=n(697679),p=n(974913),h=n(380490),E=n(166459),S=n(795110),T=n(87209),g=n(260929),f=n(883026),I=n(584651),A=n(593113),y=n(966248),_=n(771398),C=n(8747)
!function(e){e.WORKFLOW_STAGE_RUN_SAMPLES_FETCH_STARTED="WORKFLOW_STAGE_RUN_SAMPLES_FETCH_STARTED"
e.WORKFLOW_GRAPH_CHANGED="WORKFLOW_GRAPH_CHANGED"
e.WORKFLOW_STAGE_ENTRIES_FETCH_COMPLETED="WORKFLOW_STAGE_ENTRIES_FETCH_COMPLETED"
e.WORKFLOW_STAGE_RUNS_OUTPUT_SAMPLES_FETCHED="WORKFLOW_STAGE_RUNS_OUTPUT_SAMPLES_FETCHED"}(a||(a={}))
function dispatchStageRunSamplesFetched({stageRunSamples:e,batchesById:t,containersById:n,fileSummariesById:a,storableSummaryExtras:i}={}){e&&y.t$(e)
t&&u.Z.dispatch({actionType:l.z0Y,batchesById:t})
n&&u.Z.dispatch({actionType:l.bcI,containersById:n})
a&&(0,E.getStore)().dispatch(h.wb(a))
i&&u.Z.dispatch({actionType:l.w9H,storables:[],storableSummaryExtras:i})}async function updateComputedTags(e){if(!e.length)return{}
for(let t=0;;t++){const n=await d.C6(e),a=null==n?void 0:n.fileSummariesById
dispatchStageRunSamplesFetched({fileSummariesById:a})
if(Object.values(a).every((({tags:e})=>e.every((({computedState:e})=>!e||e.status!==c.Q.PENDING)))))return a||null
if(t>=12){g.ZK("Computed tags in registration table took more than 1 minute to update",{extra:e})
return null}await(0,i._v)(5e3)}}async function StageRunActions_fetchStageRunSamples(e,{includeBatches:t,includeStorableSummaryExtras:n}){let i=e
if(!t){const t=new I.xT((0,E.getStore)().getState().models.workflows)
i=e.filter((e=>!t.isStageRunSampleIdLoading(e)))}if(i.length){(0,E.getStore)().dispatch({type:a.WORKFLOW_STAGE_RUN_SAMPLES_FETCH_STARTED,stageRunSampleIds:i})
await function fetchStageRunSamples(e,{includeBatches:t,includeStorableSummaryExtras:n}){return _.ty({url:"/1/api/workflows/stage-run-samples:bulk-get",data:{stageRunSampleIds:e,includeBatches:t,includeStorableSummaryExtras:n}})}(i,{includeBatches:t,includeStorableSummaryExtras:n}).done((({stageRunSamples:e,batchesById:t,containersById:n,fileSummariesById:a,storableSummaryExtras:i})=>{dispatchStageRunSamplesFetched({stageRunSamples:e,batchesById:t,containersById:n,fileSummariesById:a,storableSummaryExtras:i})
updateComputedTags(Object.keys(a))})).fail(p.ZP.notifyError)}}function fetchMissingStageRunSamples(e){let t=[]
for(const n of e)t=[...t,...n.inputSampleIds,...n.outputSampleIds]
const n=new I.xT((0,E.getStore)().getState().models.workflows)
t=r.default.filter(t,(e=>null==n.getStageRunSample(e)))
StageRunActions_fetchStageRunSamples(t,{includeBatches:!1,includeStorableSummaryExtras:!0})}function dispatchStageRunsFetchedAndFetchMissingSamples({stageRuns:e,entryIdToStructuredData:t}){y.$V(e,t)
fetchMissingStageRunSamples(e)}function fetchMissingRegisteredSamples(e){let t=[]
for(const n of e)t=[...t,...n.registrationRecords.map((e=>e.stageRunSampleId))]
const n=new I.xT((0,E.getStore)().getState().models.workflows)
t=r.default.filter(t,(e=>{const t=n.getStageRunSample(e)
if(null==t)return!0
if(t.fileId){if(!(0,E.getStore)().getState().models.fileSummariesById[t.fileId])return!0}else if(t.batch){const e=S.Z.getBatch(t.batch.id)
if(!e)return!0
if(!(0,E.getStore)().getState().models.fileSummariesById[e.file.id])return!0}return!1}))
StageRunActions_fetchStageRunSamples(t,{includeBatches:!0,includeStorableSummaryExtras:!1})}function fetchMissingTransferredSamples(e){let t=m.getOutputSampleIdsForTable(e)
const n=new I.xT((0,E.getStore)().getState().models.workflows)
t=t.filter((e=>{const t=n.getStageRunSample(e)
return null==t||!(!t.containerId||S.Z.getStorableSummaryExtras().ancestralStorablesById[t.containerId])}))
StageRunActions_fetchStageRunSamples(t,{includeBatches:!1,includeStorableSummaryExtras:!0})}function StageRunActions_deleteStageRun(e,{shouldDeleteDownstreamRuns:t}){T.$Z()
const n=e.stageEntry.id;(function deleteStageRun(e,{shouldDeleteDownstreamRuns:t}){return _.$v({url:`/1/api/workflows/stage-runs/${e}`,data:{shouldDeleteDownstreamRuns:t}})})(e.id,{shouldDeleteDownstreamRuns:t}).done((e=>{(0,E.getStore)().dispatch({type:y.m9.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED,...e})
A.refresh([n])})).fail(p.ZP.notifyError).always((()=>{T.Cp()}))}async function StageRunActions_splitByInputs(e){let t=0
const n=new I.xT((0,E.getStore)().getState().models.workflows)
for(const a of e.stageEntries)t+=n.getStageRunsForEntry(a.id).length
s.KK(o.G$.SPLIT_BY_INPUTS,{numChangedRuns:t})
const{affectedStageRuns:i,affectedStageFlowNodes:r,affectedStageEntries:l,affectedStageConfigurations:c}=await(0,f.jI)(function splitByInputs(e){return _.s0({url:"/1/api/workflows/stage-runs:split-by-inputs",data:{workflowStageId:e.id}})}(e),"Saving...")
fetchMissingStageRunSamples(i);(0,E.getStore)().dispatch({type:a.WORKFLOW_GRAPH_CHANGED,affectedStageFlowNodes:r,affectedStageEntries:l,affectedStageConfigurations:c,affectedStageRuns:i})
A.refresh(l.map((e=>e.id)))}async function bulkUpdateStageRunStatus({updateStatusSpecifiers:e}){T.$Z()
try{const{affectedStageEntries:t,affectedStageRuns:n}=await function bulkUpdateStatusStageRuns({updateStatusSpecifiers:e}){return Promise.resolve(C.ty({url:"/1/api/workflows/stage-runs:bulk-update-status",data:{updateStatusSpecifiers:e}}))}({updateStatusSpecifiers:e})
fetchMissingStageRunSamples(n);(0,E.getStore)().dispatch({type:y.m9.WORKFLOW_STAGE_RUNS_FETCH_COMPLETED,stageRuns:n});(0,E.getStore)().dispatch({type:a.WORKFLOW_STAGE_ENTRIES_FETCH_COMPLETED,stageEntries:t})
A.refresh(t.map((e=>e.id)))}finally{T.Cp()}}async function StageRunActions_bulkConfigureStageRuns({createSpecifiers:e,editSpecifiers:t,workflowId:n}){T.$Z()
try{const{workflowDetails:a,affectedStageEntryIds:i}=await function bulkConfigureStageRuns({createSpecifiers:e,editSpecifiers:t,workflowId:n}){return _.s0({url:"/1/api/workflows/stage-runs:bulk-configure",data:{createSpecifiers:e,editSpecifiers:t,workflowId:n}})}({createSpecifiers:e,editSpecifiers:t,workflowId:n});(0,E.getStore)().dispatch({type:y.m9.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED,...a})
fetchMissingStageRunSamples(Object.values(a.stageRuns))
A.refresh(i)}finally{T.Cp()}}function StageRunActions_addOutputSamples(e){T.$Z();(function addOutputSamples(e){return _.ty({url:"/1/api/workflows/stage-runs:bulk-add-output-samples",data:{sampleKeys:e}})})(e).done((({stageRuns:e,entryIdToOrderedOutputSampleKeys:t})=>{dispatchStageRunsFetchedAndFetchMissingSamples({stageRuns:e});(0,E.getStore)().dispatch({type:a.WORKFLOW_STAGE_RUNS_OUTPUT_SAMPLES_FETCHED,stageRuns:e,entryIdToOrderedOutputSampleKeys:t})})).fail(p.ZP.notifyError).always((()=>{T.Cp()}))}function StageRunActions_bulkRemoveOutputSamples(e,{onSuccess:t}){T.$Z();(function bulkRemoveOutputSamples(e){return _.ty({url:"/1/api/workflows/stage-runs:bulk-remove-output-samples",data:{samplesToRemove:e}})})(e).done((({stageRuns:e,entryIdToOrderedOutputSampleKeys:n})=>{dispatchStageRunsFetchedAndFetchMissingSamples({stageRuns:e});(0,E.getStore)().dispatch({type:a.WORKFLOW_STAGE_RUNS_OUTPUT_SAMPLES_FETCHED,stageRuns:e,entryIdToOrderedOutputSampleKeys:n})
t&&t()})).fail(p.ZP.notifyError).always((()=>{T.Cp()}))}function StageRunActions_rerunStageRun(e){T.$Z();(function rerunStageRun(e){return _.ty({url:`/1/api/workflows/stage-runs/${e}:rerun`})})(e).done((({affectedStageRuns:e,affectedStageFlowNodes:t,affectedStageEntries:n,affectedStageConfigurations:i,entryIdToStructuredData:r})=>{fetchMissingStageRunSamples(e);(0,E.getStore)().dispatch({type:a.WORKFLOW_GRAPH_CHANGED,affectedStageFlowNodes:t,affectedStageEntries:n,affectedStageConfigurations:i,affectedStageRuns:e,entryIdToStructuredData:r})
A.refresh(n.map((e=>e.id)))})).fail(p.ZP.notifyError).always((()=>{T.Cp()}))}function _dispatchInputSamplesChanged({stageRuns:e,stageEntryDetails:t,entryVersion:n}){dispatchStageRunsFetchedAndFetchMissingSamples({stageRuns:e})
A.dispatchStageEntryDetailsChange(t)
A.dispatchStageEntryVersionChange(n,t.stageEntry)}async function StageRunActions_replaceInputSample(e,t){const{stageRun:n,stageEntryDetails:a,entryVersion:i}=await(0,f.jI)(function replaceInputSample(e,t){const n=t.sampleIdToRemove,a=t.containerIdToAdd,i="sampleIdToAdd"in t?t.sampleIdToAdd:void 0,r="batchIdToAdd"in t?t.batchIdToAdd:void 0,s="bioentityIdToAdd"in t?t.bioentityIdToAdd:void 0
return _.s0({url:`/1/api/workflows/stage-runs/${e}:replace-input-sample`,data:{sampleIdToRemove:n,sampleIdToAdd:i,batchIdToAdd:r,bioentityIdToAdd:s,containerIdToAdd:a}})}(e,t))
_dispatchInputSamplesChanged({stageRuns:[n],stageEntryDetails:a,entryVersion:i})}async function StageRunActions_bulkAddInputSamples(e,{samplesToAdd:t}){const{stageRun:n,stageRunSamples:a,stageEntryDetails:i,entryVersion:r,storableSummaryExtras:s}=await function bulkAddInputSamples(e,{samplesToAdd:t}){return _.s0({url:`/1/api/workflows/stage-runs/${e}:bulk-add-input-samples`,data:{samplesToAdd:t}})}(e,{samplesToAdd:t})
dispatchStageRunSamplesFetched({stageRunSamples:a,storableSummaryExtras:s})
_dispatchInputSamplesChanged({stageRuns:[n],stageEntryDetails:i,entryVersion:r})}function StageRunActions_bulkRemoveInputSamples(e,t,{onSuccess:n}){T.$Z();(function bulkRemoveInputSamples(e,t){return _.ty({url:"/1/api/workflows/stage-runs:bulk-remove-input-samples",data:{stageEntryId:e,samplesToRemove:t}})})(e,t).done((({stageRuns:e,stageEntryDetails:t,entryVersion:a})=>{_dispatchInputSamplesChanged({stageRuns:e,stageEntryDetails:t,entryVersion:a})
n&&n()})).fail(p.ZP.notifyError).always((()=>{T.Cp()}))}async function StageRunActions_autoselectInputSampleContainers(e,t){const{numContainersAutoselected:n,stageRuns:a,stageEntryDetails:i,entryVersion:r}=await(0,f.jI)(function autoselectInputSampleContainers(e,t){return _.s0({url:"/1/api/workflows/stage-runs:autoselect-input-sample-containers",data:{stageEntryId:e,selectedStageRunsAndSamples:t}})}(e,t),"Finding available containers...")
0===n?p.ZP.warn("No available containers found."):n<t.length&&p.ZP.warn("Some samples had no available containers.")
_dispatchInputSamplesChanged({stageRuns:a,stageEntryDetails:i,entryVersion:r})}},966248:(e,t,n)=>{n.d(t,{$B:()=>createWorkflow,$V:()=>stageRunsFetched,Ds:()=>openWorkflowDashboardTemplatesScreen,KI:()=>openWorkflowDashboardScreen,Su:()=>openWorkflowDetailsScreen,T9:()=>fetchWorkflowDetails,X$:()=>editWorkflowMetadata,_I:()=>deleteWorkflow,g:()=>routeToWorkflow,gg:()=>initializeWorkflow,m9:()=>a,t$:()=>stageRunSamplesFetched})
var a,i=n(294120),r=n(138966),s=n(408783),o=n(974913),l=n(166459),c=n(627259),d=n(87209),u=n(38209),m=n(251647),p=n(2634),h=n(626334)
!function(e){e.WORKFLOW_WORKFLOW_DASHBOARD_SCREEN_OPEN="WORKFLOW_WORKFLOW_DASHBOARD_SCREEN_OPEN"
e.WORKFLOW_WORKFLOW_DASHBOARD_TEMPLATES_SCREEN_OPEN="WORKFLOW_WORKFLOW_DASHBOARD_TEMPLATES_SCREEN_OPEN"
e.WORKFLOW_WORKFLOW_DETAILS_SCREEN_OPEN="WORKFLOW_WORKFLOW_DETAILS_SCREEN_OPEN"
e.WORKFLOW_STAGE_RUNS_FETCH_COMPLETED="WORKFLOW_STAGE_RUNS_FETCH_COMPLETED"
e.WORKFLOW_STAGE_RUN_SAMPLES_FETCH_COMPLETED="WORKFLOW_STAGE_RUN_SAMPLES_FETCH_COMPLETED"
e.WORKFLOW_STAGE_ENTRY_DETAILS_FETCH_COMPLETED="WORKFLOW_STAGE_ENTRY_DETAILS_FETCH_COMPLETED"
e.WORKFLOW_WORKFLOW_FETCH_COMPLETED="WORKFLOW_WORKFLOW_FETCH_COMPLETED"
e.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED="WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED"}(a||(a={}))
function routeToWorkflow(e){(0,r.ZP)((0,p.pm)(e))}function openWorkflowDashboardScreen(){(0,l.getStore)().dispatch({type:a.WORKFLOW_WORKFLOW_DASHBOARD_SCREEN_OPEN})}function openWorkflowDashboardTemplatesScreen(){(0,l.getStore)().dispatch({type:a.WORKFLOW_WORKFLOW_DASHBOARD_TEMPLATES_SCREEN_OPEN})}function openWorkflowDetailsScreen(e){(0,l.getStore)().dispatch({type:a.WORKFLOW_WORKFLOW_DETAILS_SCREEN_OPEN,workflowId:e});(0,l.getStore)().dispatch(h.mc())}function stageRunsFetched(e,t){(0,l.getStore)().dispatch({type:a.WORKFLOW_STAGE_RUNS_FETCH_COMPLETED,stageRuns:e,entryIdToStructuredData:t})}function stageRunSamplesFetched(e){(0,l.getStore)().dispatch({type:a.WORKFLOW_STAGE_RUN_SAMPLES_FETCH_COMPLETED,stageRunSamples:e})}function invalidateWorkflowSearchCache(){(0,l.getStore)().dispatch(c.f(i.SA.WORKFLOWS))}function createWorkflow({workflowTemplateVersionId:e,rootFolderId:t,name:n,prefix:a,fulfillments:r},{onSuccess:l}={}){d.$Z()
m.$B({workflowTemplateVersionId:e,rootFolderId:t,name:n,prefix:a,fulfillments:r}).done((({workflow:e})=>{invalidateWorkflowSearchCache()
l&&l()
s.GS(i.SA.WORKFLOWS)
openWorkflowDetailsScreen(e.id)})).fail((e=>{o.ZP.notifyError(e)})).always((()=>{d.Cp()}))}function deleteWorkflow(e){d.$Z()
m._I(e).done((()=>{invalidateWorkflowSearchCache()
openWorkflowDashboardScreen()})).fail((e=>{o.ZP.notifyError(e)})).always((()=>{d.Cp()}))}function editWorkflowMetadata(e,{name:t,description:n,rootFolderId:i,authorIds:r,onSuccess:s}){d.$Z()
m.X$(e,{name:t,description:n,rootFolderId:i,authorIds:r}).done((({workflow:e})=>{(0,l.getStore)().dispatch({type:a.WORKFLOW_WORKFLOW_FETCH_COMPLETED,workflow:e})
s&&s()})).fail((e=>{o.ZP.notifyError(e)})).always((()=>{d.Cp()}))}async function fetchWorkflowDetails(e){const t=await m.T9(e),{stageRuns:n,entryIdToStructuredData:i}=t
u.SD({stageRuns:Object.values(n),entryIdToStructuredData:i});(0,l.getStore)().dispatch({type:a.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED,...t})}function initializeWorkflow({workflowId:e,initialStageRunParams:t}){d.$Z()
m.gg({workflowId:e,initialStageRunParams:t}).done((e=>{invalidateWorkflowSearchCache();(0,l.getStore)().dispatch(h.mc())
const{stageRuns:t,entryIdToStructuredData:n}=e
u.SD({stageRuns:Object.values(t),entryIdToStructuredData:n});(0,l.getStore)().dispatch({type:a.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED,...e})})).fail((e=>{o.ZP.notifyError(e)})).always((()=>{d.Cp()}))}},544192:(e,t,n)=>{n.d(t,{AD:()=>d,CJ:()=>Z,Cn:()=>N,FB:()=>L,H1:()=>ie,JY:()=>E,KS:()=>A,Ks:()=>O,Lv:()=>C,N9:()=>w,P5:()=>_,PC:()=>S,Rw:()=>f,SE:()=>ee,Sd:()=>Y,Tw:()=>G,UJ:()=>re,UP:()=>W,UV:()=>x,Yc:()=>g,Zp:()=>q,_I:()=>m,_f:()=>U,aB:()=>P,ab:()=>ae,bn:()=>z,kK:()=>te,kv:()=>H,mZ:()=>X,m_:()=>D,nK:()=>p,of:()=>T,pd:()=>$,po:()=>F,rd:()=>se,sr:()=>ne,tl:()=>h,wI:()=>I,x8:()=>j,yr:()=>V,zH:()=>oe})
var a=n(602652),i=n(56063),r=n(459830),s=n(468991),o=n(227887),l=n(497790),c=n(118559)
const d=[r.STAGE_CONFIGURATION],u="DRAFT",m="Container",p="Sample ID",h="Stage Run"
var E
!function(e){e.WORKFLOW_DASHBOARD="WORKFLOW_DASHBOARD"
e.WORKFLOW_DASHBOARD_TEMPLATES="WORKFLOW_DASHBOARD_TEMPLATES"
e.WORKFLOW_DETAILS="WORKFLOW_DETAILS"
e.WORKFLOW_TEMPLATE_VIEW="WORKFLOW_TEMPLATE_VIEW"}(E||(E={}))
const S={WORKFLOW_DASHBOARD:"WORKFLOW_DASHBOARD",WORKFLOW_DASHBOARD_TEMPLATES:"WORKFLOW_DASHBOARD_TEMPLATES",WORKFLOW_DETAILS:"WORKFLOW_DETAILS",WORKFLOW_TEMPLATE_VIEW:"WORKFLOW_TEMPLATE_VIEW"},T="ANY",g=[u,c.Ov.INITIALIZED,c.Ov.COMPLETED],f={[c.Ov.INITIALIZED]:"In progress",[c.Ov.COMPLETED]:"Completed",[u]:"Draft"}
var I
!function(e){e.DEFAULT="DEFAULT"
e.SAMPLE="SAMPLE"
e.CONTAINER="CONTAINER"
e.STAGE_RUN="STAGE_RUN"
e.EXPERIMENTAL_CONDITION_VALUE="EXPERIMENTAL_CONDITION_VALUE"}(I||(I={}))
const A=[S.WORKFLOW_DETAILS],y=a.shape({id:a.string.isRequired,name:a.string.isRequired}),_=a.shape({id:a.string,name:a.string.isRequired,batch:y,fileId:a.string,containerId:a.string,url:a.string}),C=_,R=a.oneOf(Object.values(c.Ov)),N=a.shape({createdAt:a.string.isRequired,id:a.string.isRequired,name:a.string.isRequired}),O=a.shape({id:a.string.isRequired,editURL:a.string.isRequired,name:a.string.isRequired}),b=a.shape({id:a.string.isRequired,name:a.string.isRequired}),v=a.shape({id:a.string.isRequired,name:a.string.isRequired}),P=a.shape({id:a.string,name:a.string.isRequired,textValue:a.string.isRequired,experimentalCondition:v}),L=a.shape({id:a.string,name:a.string.isRequired,values:a.arrayOf(P.isRequired).isRequired}),D=a.shape({id:a.string.isRequired,entryTemplateName:a.string.isRequired,stageName:a.string.isRequired,index:a.number.isRequired}),M=a.shape({id:a.string.isRequired}),w=a.shape({id:a.string.isRequired,description:a.string,version:a.number,workflowTemplate:b}),F=a.shape({id:a.string.isRequired,entryTemplateName:a.string.isRequired,stageName:a.string.isRequired,index:a.number.isRequired,experimentalConditions:a.arrayOf(L).isRequired,stageFlowNodes:a.arrayOf(M.isRequired).isRequired,workflowTemplateVersion:w.isRequired}),k=a.shape({id:a.string.isRequired,name:a.string.isRequired}),U=a.shape({id:a.string.isRequired,rootFolder:a.shape({api_identifier:a.string.isRequired}).isRequired}),x=a.shape({id:a.string.isRequired,name:a.string.isRequired,humanId:a.string.isRequired,source:U.isRequired,description:a.string,createdAt:a.string.isRequired,modifiedAt:a.string.isRequired,authors:a.arrayOf(a.shape(s.fb).isRequired).isRequired}),B=a.shape({id:a.string.isRequired,stageRunId:a.string.isRequired,stageRunSampleId:a.string.isRequired}),Z=a.shape({id:a.string.isRequired,registrationRecords:a.arrayOf(B).isRequired}),q=(a.shape({stageRunId:a.string.isRequired,stageRunSampleId:a.string.isRequired}),a.shape({sortByType:a.oneOf(Object.values(I)).isRequired,sortByExperimentalConditionId:a.string,isSortReversed:a.bool})),G=a.shape({id:a.string.isRequired,name:a.string.isRequired,stageRuns:a.arrayOf(N).isRequired,workflowId:a.string.isRequired,workflowStageId:a.string.isRequired,inputTableConfig:q.isRequired,permissions:i.OD.isRequired}),V=a.shape({id:a.string.isRequired,name:a.string.isRequired,workflowTemplateVersions:a.arrayOf(w).isRequired,permissions:i.OD.isRequired,prefix:a.string.isRequired}),H=a.shape({id:a.string.isRequired,name:a.string.isRequired,stageConfiguration:D.isRequired,stageEntries:a.arrayOf(O.isRequired).isRequired,permissions:i.OD.isRequired}),W=a.shape({id:a.string.isRequired,parentIds:a.arrayOf(a.string.isRequired).isRequired,experimentalConditionValues:a.arrayOf(P)}),Y=a.shape({createdAt:a.string.isRequired,id:a.string.isRequired,name:a.string.isRequired,status:R.isRequired,inputSampleIds:a.arrayOf(a.string).isRequired,outputSampleIds:a.arrayOf(a.string).isRequired,stageEntry:O.isRequired,parent:N,stageFlowNode:W.isRequired}),$=a.shape({id:a.string.isRequired,version:a.number,workflowTemplate:b,stageConfigurations:a.arrayOf(D).isRequired,permissions:i.OD.isRequired}),K=a.shape({id:a.string.isRequired,requestFulfillmentId:a.string}),z=a.shape({id:a.string.isRequired,humanId:a.string.isRequired,name:a.string.isRequired,description:a.string,baseWorkflowTemplateVersionId:a.string,initializationDatas:a.arrayOf(K.isRequired).isRequired,workflowTemplateVersion:w.isRequired,workflowStages:a.arrayOf(k).isRequired,permissions:i.OD.isRequired}),Q=a.shape({stageRunId:a.string.isRequired,stageRunSampleId:a.string.isRequired,fields:a.arrayOf(a.shape({tableName:a.string.isRequired,name:a.string.isRequired,value:a.string,important:a.bool.isRequired}).isRequired).isRequired})
var j
!function(e){e.INITIALIZED="INITIALIZED"
e.COMPLETED="COMPLETED"
e.DRAFT="DRAFT"}(j||(j={}))
const J=a.oneOf([c.Ov.INITIALIZED,c.Ov.COMPLETED,u]),X=a.shape({status:J.isRequired,lastStageCompletionChange:a.shape({stageName:a.string.isRequired,lastStageCompletedAt:a.string})}),ee=a.arrayOf(Q),te=(a.shape({stageRun:Y.isRequired,stageRunSample:C.isRequired}),a.shape({id:a.string.isRequired,entryTemplateName:a.string.isRequired,permissions:i.OD.isRequired})),ne=a.shape({hasImportant:a.bool.isRequired}),ae="INPUT_SAMPLES_SOURCE_UUID",ie="Input samples",re=a.shape({id:a.string.isRequired,allFields:a.arrayOf(l.SCHEMA_FIELD_SHAPE.isRequired).isRequired,fields:a.arrayOf(l.SCHEMA_FIELD_SHAPE.isRequired).isRequired}),se=a.shape({id:a.string,tags:a.arrayOf(o.kY.isRequired).isRequired}),oe={EXTERNAL_INPUT_PICKER_INPUT_TYPE:"workflows.externalInputPicker.inputType",REGISTRATION_TABLE_SAMPLE_TYPE:"workflows.registrationTable.sampleType",SELECT_PARENT_GRID_MODAL_SELECTED_CREATE_TYPE:"workflows.selectParentGridModal.selectedCreateType",SELECT_PARENT_GRID_MODAL_SELECTED_DESTINATION:"workflows.selectParentGridModal.selectedDestination"}},210554:(e,t,n)=>{n.d(t,{mG:()=>WorkflowTemplateActions_createStageConfiguration,B0:()=>WorkflowTemplateActions_createWorkflowTemplate,xt:()=>WorkflowTemplateActions_deleteStageConfiguration,wS:()=>WorkflowTemplateActions_deleteWorkflowTemplate,v0:()=>WorkflowTemplateActions_editStageConfiguration,e6:()=>WorkflowTemplateActions_editWorkflowTemplateMetadata,w2:()=>editWorkflowTemplateVersion,sv:()=>WorkflowTemplateActions_editWorkflowTemplateVersionMetadata,ll:()=>WorkflowTemplateActions_fetchAllWorkflowTemplates,U5:()=>WorkflowTemplateActions_fetchCollaborators,x1:()=>fetchWorkflowTemplateAndLatestVersion,lL:()=>WorkflowTemplateActions_fetchWorkflowTemplateVersionDetails,kf:()=>openWorkflowTemplateViewScreen,oi:()=>WorkflowTemplateActions_publishDraft,ny:()=>WorkflowTemplateActions_reorderStageConfiguration,Ul:()=>selectWorkflowTemplateVersion})
var a=n(232606),i=n(776065),r=n(974913),s=n(380490),o=n(166459),l=n(87209),c=n(38209),d=n(771398)
var u,m=n(2634),p=n(966248)
!function(e){e.WORKFLOW_WORKFLOW_TEMPLATE_VIEW_SCREEN_OPEN="WORKFLOW_WORKFLOW_TEMPLATE_VIEW_SCREEN_OPEN"
e.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED="WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED"
e.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_SUMMARY_FETCH_COMPLETED="WORKFLOW_WORKFLOW_TEMPLATE_VERSION_SUMMARY_FETCH_COMPLETED"
e.WORKFLOW_SELECT_WORKFLOW_TEMPLATE_VERSION="WORKFLOW_SELECT_WORKFLOW_TEMPLATE_VERSION"
e.WORKFLOW_WORKFLOW_TEMPLATE_FULL_FETCH_COMPLETED="WORKFLOW_WORKFLOW_TEMPLATE_FULL_FETCH_COMPLETED"
e.WORKFLOW_ALL_WORKFLOW_TEMPLATES_FETCH_COMPLETED="WORKFLOW_ALL_WORKFLOW_TEMPLATES_FETCH_COMPLETED"
e.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED="WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED"
e.WORKFLOW_STAGE_CONFIGURATION_FETCH_COMPLETED="WORKFLOW_STAGE_CONFIGURATION_FETCH_COMPLETED"}(u||(u={}))
function openWorkflowTemplateViewScreen(e){(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VIEW_SCREEN_OPEN,workflowTemplateId:e})}async function WorkflowTemplateActions_fetchWorkflowTemplateVersionDetails(e){const{workflowTemplateVersion:t,stageConfigurations:n,stageFlowNodes:a}=await function fetchWorkflowTemplateVersionDetails(e){return d.UJ(`/1/api/workflows/workflow-template-versions/${e}/details`)}(e);(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED,workflowTemplateVersion:t,stageConfigurations:n,stageFlowNodes:a})}function WorkflowTemplateActions_editWorkflowTemplateVersionMetadata(e,{description:t}){l.$Z();(function editWorkflowTemplateVersionMetadata(e,{description:t}){return d.Yh({url:`/1/api/workflows/workflow-template-versions/${e}`,data:{description:t}})})(e,{description:t}).done((({workflowTemplateVersionSummary:e})=>{(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_SUMMARY_FETCH_COMPLETED,workflowTemplateVersionSummary:e})})).fail(r.ZP.notifyError).always((()=>{l.Cp()}))}function selectWorkflowTemplateVersion(e){(0,o.getStore)().dispatch({type:u.WORKFLOW_SELECT_WORKFLOW_TEMPLATE_VERSION,workflowTemplateVersionId:e})
WorkflowTemplateActions_fetchWorkflowTemplateVersionDetails(e)}function fetchWorkflowTemplateAndLatestVersion(e){(function fetchWorkflowTemplate(e){return d.xA(`/1/api/workflows/workflow-templates/${e}`)})(e).done((({workflowTemplate:e})=>{(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_FULL_FETCH_COMPLETED,workflowTemplate:e})
selectWorkflowTemplateVersion(m.Ty(e).id)})).fail(r.ZP.notifyError)}function WorkflowTemplateActions_fetchAllWorkflowTemplates(){return function fetchAllWorkflowTemplates(){return d.xA("/1/api/workflows/workflow-templates")}().done((({workflowTemplates:e})=>{(0,o.getStore)().dispatch({type:u.WORKFLOW_ALL_WORKFLOW_TEMPLATES_FETCH_COMPLETED,workflowTemplates:e})})).fail(r.ZP.notifyError)}function WorkflowTemplateActions_createStageConfiguration({workflowTemplateVersionId:e,stageName:t,entryTemplateName:n,stageConfigurationIdForEntryTemplate:a,experimentalConditions:i,index:s}){l.$Z();(function createStageConfiguration({workflowTemplateVersionId:e,stageName:t,entryTemplateName:n,stageConfigurationIdForEntryTemplate:a,experimentalConditions:i,index:r}){return d.ty({url:"/1/api/workflows/stage-configurations",data:{workflowTemplateVersionId:e,stageName:t,entryTemplateName:n,stageConfigurationIdForEntryTemplate:a,experimentalConditions:i,index:r}})})({workflowTemplateVersionId:e,stageName:t,entryTemplateName:n,stageConfigurationIdForEntryTemplate:a,experimentalConditions:i,index:s}).done((({workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n,workflowDetails:a})=>{if(a){const{stageRuns:e,entryIdToStructuredData:t}=a
c.SD({stageRuns:Object.values(e),entryIdToStructuredData:t});(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED,...a})}(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED,workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n})})).fail(r.ZP.notifyError).always((()=>{l.Cp()}))}function WorkflowTemplateActions_deleteStageConfiguration(e){l.$Z();(function deleteStageConfiguration(e){return d.$v({url:`/1/api/workflows/stage-configurations/${e}`})})(e).done((({workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n,workflowDetails:a,deletedEntryIds:r})=>{if(a){const{stageRuns:e,entryIdToStructuredData:t}=a
c.SD({stageRuns:Object.values(e),entryIdToStructuredData:t});(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED,...a})}(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED,workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n})
i.Z.bulkRemoveFromWorkspace(r)})).fail(r.ZP.notifyError).always((()=>{l.Cp()}))}function WorkflowTemplateActions_editStageConfiguration(e,{stageName:t,experimentalConditions:n,stageConfigurationIdForEntryTemplate:a}){l.$Z();(function editStageConfiguration(e,{stageName:t,experimentalConditions:n,stageConfigurationIdForEntryTemplate:a}){return d.Yh({url:`/1/api/workflows/stage-configurations/${e}`,data:{stageName:t,experimentalConditions:n,stageConfigurationIdForEntryTemplate:a}})})(e,{stageName:t,experimentalConditions:n,stageConfigurationIdForEntryTemplate:a}).done((e=>{const{workflowTemplateVersion:t,stageConfigurations:n,stageConfiguration:a,stageFlowNodes:r,workflowDetails:s,deletedEntryIds:l}=e
if(s){const{stageRuns:e,entryIdToStructuredData:t}=s;(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_DETAILS_FETCH_COMPLETED,...s})
c.SD({stageRuns:Object.values(e),entryIdToStructuredData:t})}(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED,workflowTemplateVersion:t,stageConfigurations:n,stageFlowNodes:r});(0,o.getStore)().dispatch({type:u.WORKFLOW_STAGE_CONFIGURATION_FETCH_COMPLETED,stageConfiguration:a})
i.Z.bulkRemoveFromWorkspace(l)})).fail(r.ZP.notifyError).always((()=>{l.Cp()}))}function WorkflowTemplateActions_reorderStageConfiguration(e,t){l.$Z();(function reorderStageConfiguration(e,t){return d.ty({url:`/1/api/workflows/stage-configurations/${e}:reorder`,data:{newIndex:t}})})(e,t).done((({workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n})=>{(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED,workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n})})).fail(r.ZP.notifyError).always((()=>{l.Cp()}))}function WorkflowTemplateActions_createWorkflowTemplate({name:e,owner:t,ownerInfo:n,prefix:i,collaborators:r,workflowTemplateVersionId:s}){return function createWorkflowTemplate({name:e,owner:t,memberDataPolicyId:n,prefix:a,collaborators:i,workflowTemplateVersionId:r}){return d.ty({url:"/1/api/workflows/workflow-templates",data:{name:e,owner:t,ownerInfo:{memberDataPolicyId:n},prefix:a,collaborators:i,workflowTemplateVersionId:r}})}({name:e,owner:t.handle,prefix:i,memberDataPolicyId:n.memberDataPolicyId,collaborators:r,workflowTemplateVersionId:s}).done((({workflowTemplate:e})=>{const t=e.workflowTemplateVersions;(0,a.Gp)(1===t.length,"Expected exactly one version in a new workflow template.");(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_FULL_FETCH_COMPLETED,workflowTemplate:e})
openWorkflowTemplateViewScreen(e.id)}))}function WorkflowTemplateActions_deleteWorkflowTemplate(e){return function deleteWorkflowTemplate(e){return d.$v({url:`/1/api/workflows/workflow-templates/${e}`})}(e).done((()=>{p.Ds()}))}function WorkflowTemplateActions_editWorkflowTemplateMetadata(e,{name:t,owner:n,ownerInfo:a,prefix:i,collaborators:r}){return function editWorkflowTemplateMetadata(e,{name:t,owner:n,ownerInfo:a,prefix:i,collaborators:r}){return d.Yh({url:`/1/api/workflows/workflow-templates/${e}`,data:{name:t,owner:n,ownerInfo:a,prefix:i,collaborators:r}})}(e,{name:t,owner:n.handle,prefix:i,ownerInfo:a,collaborators:r}).done((t=>{(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_FULL_FETCH_COMPLETED,workflowTemplate:t.workflowTemplate})
const n={}
n[e]=t.collaborators;(0,o.getStore)().dispatch(s.Y_(n))}))}function editWorkflowTemplateVersion(e){l.$Z();(function createWorkflowTemplateVersion(e,t){return d.ty({url:"/1/api/workflows/workflow-template-versions",data:{workflowTemplateId:e,workflowTemplateVersionId:t}})})(e.workflowTemplate.id,e.id).done((({workflowTemplate:e,workflowTemplateVersion:t,stageConfigurations:n,stageFlowNodes:a})=>{(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_FULL_FETCH_COMPLETED,workflowTemplate:e});(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED,workflowTemplateVersion:t,stageConfigurations:n,stageFlowNodes:a});(0,o.getStore)().dispatch({type:u.WORKFLOW_SELECT_WORKFLOW_TEMPLATE_VERSION,workflowTemplateVersionId:t.id})})).fail(r.ZP.notifyError).always((()=>{l.Cp()}))}function WorkflowTemplateActions_publishDraft(e){l.$Z();(function publishDraft(e){return d.ty({url:`/1/api/workflows/workflow-template-versions/${e}/publish`,data:{}})})(e).done((({workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n})=>{(0,o.getStore)().dispatch({type:u.WORKFLOW_WORKFLOW_TEMPLATE_VERSION_DETAILS_FETCH_COMPLETED,workflowTemplateVersion:e,stageConfigurations:t,stageFlowNodes:n})
r.ZP.success(`Published version ${e.version} of\n                             ${e.workflowTemplate.name}`)})).fail(r.ZP.notifyError).always((()=>{l.Cp()}))}function WorkflowTemplateActions_fetchCollaborators(e,{onFailure:t}){l.$Z();(function fetchCollaborators(e){return d.xA(`/1/api/workflow-templates/${e}/collaborators/`)})(e).done((t=>{const n={}
n[e]=t;(0,o.getStore)().dispatch(s.Y_(n))})).fail((e=>{r.ZP.notifyError(e)
t&&t()})).always((()=>{l.Cp()}))}},542506:(e,t,n)=>{n.d(t,{r:()=>getDefaultWorkflowsSearchParams})
var a=n(459830),i=n(294120),r=n(872543),s=n(62315),o=n(374669)
function getDefaultWorkflowsSearchParams(){return{filters:[{...(0,s.QW)(s.Vm.TYPES),value:[a.WORKFLOW]}],limit:(0,r.z3)(),offset:0,query:"",sorts:o.i_(i.$0.WORKFLOWS)}}},793326:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(989526),i=n(675649),r=n(630089),s=n(544192)
function StageRunSampleLink({sample:e}){var t,n,s,o
return null==e?a.createElement("span",{className:"u-faded u-italic"},"Loading"):e.url?a.createElement(r.Z,{href:i.jp(e.url)},null!==(n=null===(t=e.bioentity)||void 0===t?void 0:t.displayLabel)&&void 0!==n?n:e.name):a.createElement("span",null,null!==(o=null===(s=e.bioentity)||void 0===s?void 0:s.displayLabel)&&void 0!==o?o:e.name)}StageRunSampleLink.propTypes={sample:s.Lv}
const o=StageRunSampleLink},779954:(e,t,n)=>{n.d(t,{Kc:()=>a,e1:()=>expandStages,k_:()=>collapseStages,qI:()=>toggleStage})
var a
!function(e){e.WORKFLOW_DETAILS_TABLE_EXPAND_STAGES="WORKFLOW_DETAILS_TABLE_EXPAND_STAGES"
e.WORKFLOW_DETAILS_TABLE_COLLAPSE_STAGES="WORKFLOW_DETAILS_TABLE_COLLAPSE_STAGES"
e.WORKFLOW_DETAILS_TABLE_TOGGLE_STAGE="WORKFLOW_DETAILS_TABLE_TOGGLE_STAGE"}(a||(a={}))
function expandStages(e){return{type:a.WORKFLOW_DETAILS_TABLE_EXPAND_STAGES,stageIds:e}}function collapseStages(e){return{type:a.WORKFLOW_DETAILS_TABLE_COLLAPSE_STAGES,stageIds:e}}function toggleStage(e){return{type:a.WORKFLOW_DETAILS_TABLE_TOGGLE_STAGE,stageId:e}}},118559:(e,t,n)=>{n.d(t,{Ov:()=>s,_A:()=>r,a0:()=>o,oT:()=>a,sY:()=>i})
const a="COMPLETED",i="DISCARDED",r="VIRTUAL"
var s
!function(e){e.INITIALIZED="INITIALIZED"
e.COMPLETED="COMPLETED"
e.DISCARDED="DISCARDED"}(s||(s={}))
const o={INITIALIZED:"Initialized",[a]:"Completed",[i]:"Discarded"}},251647:(e,t,n)=>{n.d(t,{$B:()=>createWorkflow,T9:()=>fetchWorkflowDetails,X$:()=>editWorkflowMetadata,_I:()=>deleteWorkflow,gg:()=>initializeWorkflow,y4:()=>bulkFetchWorkflowDashboardDetails,zV:()=>parseWorkflowInputSpreadsheet})
var a=n(771398)
function createWorkflow({workflowTemplateVersionId:e,rootFolderId:t,name:n,prefix:i,fulfillments:r}){return a.ty({url:"/1/api/workflows",data:{workflowTemplateVersionId:e,rootFolderId:t,name:n,prefix:i,fulfillments:r}})}function deleteWorkflow(e){return a.$v({url:`/1/api/workflows/${e}`})}function editWorkflowMetadata(e,{name:t,description:n,rootFolderId:i,authorIds:r}){return a.Yh({url:`/1/api/workflows/${e}`,data:{name:t,description:n,rootFolderId:i,authorIds:r}})}function fetchWorkflowDetails(e){return a.UJ(`/1/api/workflows/${e}/details`)}function initializeWorkflow({workflowId:e,initialStageRunParams:t}){return a.ty({url:`/1/api/workflows/${e}:initialize`,data:{initialStageRunParams:t}})}function bulkFetchWorkflowDashboardDetails(e){return a.s0({url:"/1/api/workflows/details:bulk-get",data:{workflowIds:e}})}function parseWorkflowInputSpreadsheet(e,t){return a.s0({url:"/1/api/workflows:get-samples-from-spreadsheet",data:{spreadsheetUrl:e,spreadsheetName:t}})}},364612:(e,t,n)=>{n.d(t,{C2:()=>discardEntryTemplate,jX:()=>fetchTemplateVersion,Ws:()=>registerObjects,di:()=>updateAndSaveEntryTemplate,Qk:()=>updateNote})
var a,i=n(531041),r=n(232606),s=n(787004),o=n(459830),l=n(947730),c=n(379346),d=n(974913),u=n(166459),m=n(87209),p=n(771398)
function StageEntryTemplateActions_fetch(e,{onSuccess:t,onFailure:n}){(function fetch(e){return p.xA(`/1/api/workflows/stage-configurations/${e}/stage-entry-template`)})(e).done((({stageConfiguration:e,latestVersionId:n,templateVersion:a})=>{t({...e,latestVersionId:n,templateVersion:a})})).fail((e=>{d.ZP.notifyError(e)
n(e)}))}function StageEntryTemplateActions_save(e,t,{onSuccess:n,onFailure:i}){m.$Z("Saving");(function save(e,{entryTemplateName:t,templateVersion:n,metadata:a}){return p.Yh({url:`/1/api/workflows/stage-configurations/${e}/stage-entry-template`,data:{entryTemplateName:t,templateVersion:n,metadata:a}})})(e,t).done((({cidIdMap:e,workflowStage:t,stageConfiguration:i})=>{n(e)
t&&(0,u.getStore)().dispatch({type:a.WORKFLOW_STAGE_FETCH_COMPLETED,workflowStage:t})
i&&(0,u.getStore)().dispatch({type:a.WORKFLOW_STAGE_CONFIGURATION_FETCH_COMPLETED,stageConfiguration:i})})).fail((e=>{d.ZP.notifyError(e)
i(e)})).always((()=>{m.Cp()}))}!function(e){e.WORKFLOW_STAGE_FETCH_COMPLETED="WORKFLOW_STAGE_FETCH_COMPLETED"
e.WORKFLOW_STAGE_CONFIGURATION_FETCH_COMPLETED="WORKFLOW_STAGE_CONFIGURATION_FETCH_COMPLETED"}(a||(a={}))
var h=n(816456),E=n(66584)
function fetchTemplateVersion(e){l.Z.dispatch({actionType:s.oh$,entryTemplateId:e});(0,r.hu)(c.ZP.apiIdToType(e)===o.STAGE_CONFIGURATION,"Tried to fetch template version for something that is not a stage configuration.")
StageEntryTemplateActions_fetch(e,{onSuccess:t=>{l.Z.dispatch({actionType:s.GCV,entryTemplateId:e,entryTemplate:t})},onFailure:t=>{l.Z.dispatch({actionType:s.aLc,entryTemplateId:e,error:t})}})}function discardEntryTemplate(e){null!=e&&h.Z.inStore(e)&&l.Z.dispatch({actionType:s.liX,entryTemplateId:e})}function registerObjects(e,t){l.Z.dispatch({actionType:s.NJ7,entryTemplateId:e,cidIdMap:t})}function updateNote(e,t,n,{bumpVersion:a=!0}={}){const i={name:{$set:n},...E.f2({$merge:{note:t}})}
l.Z.dispatch({actionType:s.Idj,entryTemplateId:e,op:i,bumpVersion:a})}function updateAndSaveEntryTemplate(e,t,n,{onSuccess:a}){updateNote(e,t,n)
!function WorkflowEntryTemplateActions_save(e,{onSuccess:t}){l.Z.dispatch({actionType:s.yWL,entryTemplateId:e})
const{entryTemplate:n,openVersion:a,metadata:d}=h.Z.getEditorState(e),u=i.default.extend(h.Z.prepareForSave(e,n),{metadata:d});(0,r.hu)(c.ZP.apiIdToType(e)===o.STAGE_CONFIGURATION,"Tried to save workflow entry template but found a different model type.")
StageEntryTemplateActions_save(e,u,{onSuccess:n=>{l.Z.dispatch({actionType:s.gq$,entryTemplateId:e,savedVersion:a,versionId:n[u.cid],cidIdMap:n})
t()},onFailure:t=>{l.Z.dispatch({actionType:s.C1K,entryTemplateId:e,error:t})}})}(e,{onSuccess:a})}},66584:(e,t,n)=>{n.d(t,{CA:()=>prepareForStore,CC:()=>getServerNameField,UM:()=>sanitizeTemplate,W2:()=>prepareForSave,ck:()=>pickRevertableFields,f2:()=>entryVersionUpdate})
var a=n(767807),i=n.n(a),r=n(531041),s=n(459830),o=n(379346),l=n(649981),c=n(317275)
function getServerNameField(e){return o.ZP.apiIdToType(e)===s.STAGE_CONFIGURATION?"entryTemplateName":"name"}function _prepareTPForStore(e,t){const n=r.default.uniqueId("setv")
t[n]=e.id
return{cid:n,entryVersion:l.Z.prepareForStore(e.entryVersion,t)}}function prepareForStore(e,t){return{...e,name:e[getServerNameField(e.id)],templateVersion:_prepareTPForStore(e.templateVersion,t)}}function entryVersionUpdate(e){return{templateVersion:{entryVersion:e}}}function sanitizeTemplate(e,t=null){const n=t?t.templateVersion.entryVersion:null
return i()(e,entryVersionUpdate({$apply:t=>l.Z.sanitizeEntryVersion(t,n,e.id)}))}function pickRevertableFields(e){return(0,c.Z)(e,"name","templateVersion")}function _prepareTVForSave(e,t,n){return{id:t[e.cid],cid:e.cid,entryVersion:l.Z.prepareForSave(e.entryVersion,t,n)}}function prepareForSave(e,t){return{templateVersion:_prepareTVForSave(e.templateVersion,t,e.id),[getServerNameField(e.id)]:e.name}}},772058:(e,t,n)=>{n.d(t,{Z:()=>prepareSampleGroupsForTable,u:()=>prepareSampleGroups})
var a=n(531041),i=n(232606),r=n(584651),s=n(944969)
function prepareTargetSamples(e,t){return t.map((({id:t})=>{const n=e.stageRunSamplesById[t]||{name:""},{containerId:a,fileId:r}=n,{name:o,url:l}=function getDisplayInfo(e,t){const n={name:t.name,url:t.url},a=function _getSampleBatchId(e){return e.batch?e.batch.id:null}(t)
if(t.fileId){const a=e.fileSummariesById[t.fileId];(0,i.Gp)(null!=a,"Expected file to exist in lookup map",{fileId:t.fileId,fileSummariesById:e.fileSummariesById})
return null!=a?{name:a.name,url:a.editURL}:n}if(a){const t=e.batchesById[a];(0,i.Gp)(null!=t,"Expected batch to exist in lookup map",{batchId:a,batchesById:e.batchesById})
return null!=t?{name:t.name,url:t.url}:n}return n}(e,n)
return(0,s.Z)({batch:n.batch,containerId:a,fileId:r},t,o,l)}))}function prepareTags(e,t){return t.map((t=>({...t,targetSamples:prepareTargetSamples(e,t.targetSamples)})))}function prepareSampleGroups(e,t,{batchesById:n}){const i=new r.xT(e.models.workflows).getStageRunSampleById(),s=Object.values(e.models.sampleGroups.sampleGroupsById).filter((e=>t.includes(e.id))),{fileSummariesById:o}=e.models,l=prepareSampleGroupsForTable({stageRunSamplesById:i,batchesById:n,fileSummariesById:o},s)
return a.default.indexBy(l,"id")}function prepareSampleGroupsForTable(e,t){return t.map((t=>({...t,tags:prepareTags(e,t.tags)})))}},390189:(e,t,n)=>{n.d(t,{Gg:()=>d,LQ:()=>getInputRowDatas,XZ:()=>m,eE:()=>getSortStateFromInputTableConfig,i1:()=>u,ye:()=>sortInputRowDatas})
var a=n(531041),i=n(232606),r=n(795110),s=n(63573),o=n(567e3),l=n(886150),c=n(544192)
const d="SAMPLE",u="CONTAINER",m="STAGE_RUN"
function getInputRowDatas(e,t,n,a){if(null==e){(0,i.Gp)(!1,"orderedInputSamples argument is expected.")
return[]}const r=function getRowsForExistingSamples(e,t,n){const a=[]
for(const{stageRunId:r,stageRunSampleId:s}of e){const e=t[r]
if(null==e){(0,i.Gp)(!1,"No stage run with the id was found",{stageRunId:r})
continue}const o=n[r].map((e=>t[e])).filter((e=>e.outputSampleIds.some((e=>e===s))))
a.push({stageRun:e,sampleId:s,parent:o.length>0?o[0]:null,unfulfilledParents:null})}return a}(e,n,t),s=function getInputSampleIdsByStageRunId(e){const t={}
for(const{stageRunId:n,stageRunSampleId:a}of e)t[n]=n in t?[...t[n],a]:[a]
return t}(e)
for(const e of a){const a=t[e.id].map((e=>n[e])),i=s[e.id]||[],o=a.filter((e=>e.outputSampleIds.every((e=>!i.includes(e)))))
0!==o.length&&r.push({stageRun:e,sampleId:null,parent:null,unfulfilledParents:o})
0===i.length&&0===o.length&&r.push({stageRun:e,sampleId:null,parent:null,unfulfilledParents:o})}return r}function getSortValue(e,t,n){if(t===d)return null!=e.sampleId?function getSampleName(e,t){const n=t[e]
return null!=n?n.name:""}(e.sampleId,n):""
if(t===u)return null!=e.sampleId?function getContainerName(e,t){var n
const a=t[e]
if(null==a||null==a.containerId)return""
const i=r.Z.getContainer(a.containerId)
return null!==(n=null==i?void 0:i.name)&&void 0!==n?n:""}(e.sampleId,n):""
if(t===m)return e.stageRun.name
const a=e.stageRun.stageFlowNode.experimentalConditionValues.filter((e=>e.experimentalCondition&&e.experimentalCondition.id===t))
return a.length>0?(0,l.yZ)(a):""}function sortInputRowDatas(e,t,{sortColumnId:n,sortDirection:a}){return null==n||null==a?e:(0,o.Z)(e,[{accessor:e=>getSortValue(e,n,t),reversed:a===s.Sr.DESCENDING_SORT,naturalSort:!0}])}function getSortStateFromInputTableConfig(e,t){let n=null,r=null
if(null==t)return{sortColumnId:n,sortDirection:r}
switch(t.sortByType){case c.wI.SAMPLE:n=d
break
case c.wI.CONTAINER:n=u
break
case c.wI.STAGE_RUN:n=m
break
case c.wI.EXPERIMENTAL_CONDITION_VALUE:{const r=(0,l.Rn)(e),s=t.sortByExperimentalConditionId;(0,i.Gp)(null!=s,"Experimental condition id is expected when sort type is EC")
const o=a.default.findWhere(r,{id:s})
null!=o&&(n=o.id)
break}case c.wI.DEFAULT:break
default:(0,i.hu)(!1,`Unexpected sortByType ${t.sortByType}`)}null!=n&&(r=t.isSortReversed?s.B3:s.Ii)
return{sortColumnId:n,sortDirection:r}}},593113:(e,t,n)=>{n.r(t)
n.d(t,{StageEntryActionType:()=>a,addProtocol:()=>addProtocol,close:()=>close,dispatchStageEntryDetailsChange:()=>dispatchStageEntryDetailsChange,dispatchStageEntryFetchStarted:()=>dispatchStageEntryFetchStarted,dispatchStageEntryVersionChange:()=>dispatchStageEntryVersionChange,fetchEntryDetails:()=>fetchEntryDetails,fetchInputDataForChildrenRuns:()=>fetchInputDataForChildrenRuns,fetchVersions:()=>fetchVersions,invalidate:()=>invalidate,loadVersion:()=>loadVersion,print:()=>print,refresh:()=>refresh,registerObjects:()=>registerObjects,removeProtocol:()=>removeProtocol,reorderProtocols:()=>reorderProtocols,revalidate:()=>revalidate,revert:()=>revert,revertProtocol:()=>revertProtocol,save:()=>save,saveFileData:()=>saveFileData,setAuthors:()=>setAuthors,setName:()=>setName,setPermissions:()=>setPermissions,setTagSchema:()=>setTagSchema,setTags:()=>setTags,update:()=>update,updateInputTableConfig:()=>updateInputTableConfig,updateNote:()=>updateNote,updateProtocol:()=>updateProtocol,updateReview:()=>updateReview})
var a,i=n(250965),r=n.n(i),s=n(989526),o=n(782279),l=n(531041),c=n(675649),d=n(787004),u=n(947730),m=n(373787),p=n(687959),h=n(974913),E=n(614392),S=n(380490),T=n(166459),g=n(87209),f=n(649981),I=n(317275),A=n(38209),y=n(966248),_=n(639510),C=n(866648),R=n(41936)
!function(e){e.WORKFLOW_STAGE_ENTRIES_FETCH_COMPLETED="WORKFLOW_STAGE_ENTRIES_FETCH_COMPLETED"
e.WORKFLOW_STAGE_ENTRY_SAVE_COMPLETED="WORKFLOW_STAGE_ENTRY_SAVE_COMPLETED"}(a||(a={}))
function update(e,t,{bumpVersion:n=!0,cidIdMap:a={}}={}){u.Z.dispatch({actionType:d.Npw,stageEntryId:e,op:t,cidIdMap:a,bumpVersion:n})}function revert(e,t,n){u.Z.dispatch({actionType:d.AQ1,stageEntryId:e,op:t,restoreData:n})}function updateProtocol(e,t,n,a){update(e,R.f2({$apply:e=>f.Z.withEntryProtocolUpdated(e,n,a)}))}function addProtocol(e,t,n){const a={}
update(e,R.f2({$apply:e=>f.Z.withProtocolAdded(e,n,a)}))}function removeProtocol(e,t,n){update(e,R.f2({$apply:e=>f.Z.withEntryProtocolRemoved(e,n)}))}function revertProtocol(e,t,n,a){revert(e,{$apply:e=>f.Z.withEntryProtocolReverted(e,n)},a)}function reorderProtocols(e,t,n){update(e,R.f2({$apply:e=>f.Z.withEntryProtocolsReordered(e,n)}))}function registerObjects(e,t){u.Z.dispatch({actionType:d.C9s,stageEntryId:e,cidIdMap:t})}function updateNote(e,t){update(e,R.f2({$merge:{note:t}}))}function setName(e,t){update(e,{$merge:{name:t}})}function save(e){function getStoreSnapshotForSave(){const{stageEntryDocument:t,openVersion:n,metadata:a,isLatest:i}=C.Z.getEditorState(e),r={...C.Z.prepareForSave(e,t),metadata:a}
return{openVersion:n,hasUnsavedChanges:C.Z.hasUnsavedChanges(e),serverStageEntry:r,clientStageEntry:t,isLatest:i}}const t=getStoreSnapshotForSave()
c.Gh(`template-save-${e}`,(()=>{let n
n=C.Z.inStore(e)?getStoreSnapshotForSave():t
const{openVersion:i,hasUnsavedChanges:s,serverStageEntry:o,clientStageEntry:l,isLatest:c}=n
if(!s||!c)return r().Deferred().resolve().promise()
u.Z.dispatch({actionType:d.Q_v,stageEntryId:e})
return _.Vx(e,o).done((({cidIdMap:t,structuredData:n,summaryData:r})=>{(0,T.getStore)().dispatch({type:a.WORKFLOW_STAGE_ENTRY_SAVE_COMPLETED,stageEntryId:e,savedVersion:i,versionId:t[o.entryVersion.cid],cidIdMap:t,structuredData:n,summaryData:r})
u.Z.dispatch({actionType:d.dfD,stageEntryId:e,savedVersion:i,versionId:t[o.entryVersion.cid],cidIdMap:t,structuredData:n,summaryData:r})
m.fetchDataTablesValidationStatus(e,l.entryVersion.note)})).fail((t=>{const n=h.ZP.getFriendlyError(t)
null!=n&&h.ZP.error(n,{id:"template-save-fail",duration:0})
u.Z.dispatch({actionType:d.QqJ,stageEntryId:e,error:t})}))}))}function dispatchStageEntryDetailsChange(e){const{stageEntry:t,stageRuns:n,stageFlowNodes:a,registrationRecordListsById:i,transferOperationListsById:r,transferOperationsById:s,inputSamplesOrder:o,outputSamplesOrder:l,workflowStageOrderedStageRunIds:c}=e
A.SD({stageRuns:Object.values(n)});(0,T.getStore)().dispatch({type:y.m9.WORKFLOW_STAGE_ENTRY_DETAILS_FETCH_COMPLETED,stageEntry:t,stageFlowNodes:a,stageRuns:n,inputSamplesOrder:o,outputSamplesOrder:l,workflowStageOrderedStageRunIds:c})
if(i){(0,T.getStore)().dispatch(S.WN(i))
A.gn(Object.values(i))}(0,T.getStore)().dispatch(p.fy({transferOperationListsById:r,transferOperationsById:s}))
A.QF(Object.values(s))}function dispatchStageEntryVersionChange(e,t){const n=R.hT(t,e)
u.Z.dispatch({actionType:d.LAo,stageEntryId:t.id,stageEntryDocument:n})
const{stageEntryDocument:a}=C.Z.getEditorState(t.id)
m.fetchDataTablesValidationStatus(t.id,a.entryVersion.note)}function dispatchStageEntryFetchStarted(e){u.Z.dispatch({actionType:d.xIb,stageEntryId:e})}function loadVersion(e,t){u.Z.dispatch({actionType:d.KAi,stageEntryId:e,versionId:t})
_.bo(e,t).done((n=>{const{stageEntryDocument:a,metadata:i}=C.Z.getEditorState(e)
u.Z.dispatch({actionType:d.rjJ,stageEntryId:e,versionId:t,version:R.IG({...a,latestVersionId:i.latestVersionId},n)})})).fail((n=>{u.Z.dispatch({actionType:d.Gjh,stageEntryId:e,versionId:t})}))}function fetchVersions(e){if(!C.Z.inStore(e))return
const{openVersionId:t}=C.Z.getEditorState(e)
u.Z.dispatch({actionType:d.WOp,stageEntryId:e})
_.yQ(e,{openVersionId:t}).done((t=>{u.Z.dispatch(l.default.extend({actionType:d.hFc,stageEntryId:e,versions:t.data},(0,I.Z)(t,"parent")))})).fail((()=>{u.Z.dispatch({actionType:d.Z28,stageEntryId:e})}))}function fetchEntryDetails(e,{deferred:t}={}){dispatchStageEntryFetchStarted(e)
return _.E2(e).done((({stageEntryDetails:e,entryVersion:n})=>{dispatchStageEntryDetailsChange(e)
dispatchStageEntryVersionChange(n,e.stageEntry)
null!=t&&t.resolve()})).fail((n=>{u.Z.dispatch({actionType:d.Vch,stageEntryId:e,error:n})
null!=t&&t.reject(n)}))}function close(e){u.Z.dispatch({actionType:d.p_W,stageEntryId:e})}function invalidate(e){u.Z.dispatch({actionType:d.F9o,stageEntryId:e})}function revalidate(e){u.Z.dispatch({actionType:d.Vch,stageEntryId:e})}function refresh(e){for(const t of e)if(C.Z.inStore(t)){u.Z.dispatch({actionType:d.F9o,stageEntryId:t})
fetchEntryDetails(t)}}function updateReview(e,t,n){u.Z.dispatch({actionType:d.Npw,stageEntryId:e,op:{$merge:{review:t,permissions:n}},bumpVersion:!1})}function setTagSchema(e,t){update(e,{$merge:{tagSchema:t}},{bumpVersion:!1})}function setAuthors(e,t){update(e,{$merge:{authors:t}},{bumpVersion:!1})}function setPermissions(e,t){update(e,{$merge:{permissions:t}},{bumpVersion:!1})}function setTags(e,t){update(e,{$merge:{tags:t}},{bumpVersion:!1})}async function saveFileData(e,t,{success:n}={}){try{await _.Vx(e,{name:t})
update(e,{$merge:{name:t}},{bumpVersion:!1})
n&&n()}catch(e){h.ZP.notifyError(e)}}function fetchInputDataForChildrenRuns(e){g.$Z()
_.LF(e).done((({affectedStageRuns:e})=>{A.SD({stageRuns:e})})).always((()=>{g.Cp()}))}function print(e,{indexSlice:t,protocolCids:n}){let a
const i=C.Z.getEditorState(e),{entryProtocols:r}=i.stageEntryDocument.entryVersion
null==n&&(n=(()=>{const e=[]
for(a of Array.from(r))e.push(a.cid)
return e})())
function handlePrint(){let a=`versionId=${i.openVersionId}`
a+=`&protocols=${Array.from(n).map((e=>i.cidIdMap[e])).join(",")}`
null!=t&&(a+=`&startIndex=${t.start}&endIndex=${t.end}`)
window.open(`${R.AL(e)}?${a}#print`,"_blank")}const c=l.default.filter(r,(e=>null!=e.externalFile&&Array.from(n).includes(e.cid)))
if(c.length>0){const e=s.createElement("div",null,s.createElement("p",null,"This entry contains imported protocols which cannot be printed:"),s.createElement("ul",null,Array.from(c).map((e=>s.createElement("li",null,e.name)))),s.createElement("p",null,"Download and open these protocols directly to print them."))
new E.I4({title:"Print Entry",msg:o.renderToStaticMarkup(e)}).choice("Print Entry","btn-af-primary",handlePrint).choice("Cancel","btn-af-default").show()}else handlePrint()}async function updateInputTableConfig(e,{sortByType:t,sortByExperimentalConditionId:n,isSortReversed:i}){const r=(await _.kQ(e,{sortByType:t,sortByExperimentalConditionId:n,isSortReversed:i})).stageEntry;(0,T.getStore)().dispatch({type:a.WORKFLOW_STAGE_ENTRIES_FETCH_COMPLETED,stageEntries:[r]})
h.ZP.success("Sorting order of the input samples table saved")}},41936:(e,t,n)=>{n.d(t,{AL:()=>getPrintURL,CA:()=>prepareForStore,Hy:()=>isFirstTrackedVersion,IG:()=>replaceEntryVersion,Lq:()=>sanitizeStageEntry,Rk:()=>isStageEntryLocked,W2:()=>prepareForSave,ck:()=>pickRevertableFields,f2:()=>entryVersionUpdate,hT:()=>getEntryDocument})
var a=n(126781),i=n(649981),r=n(317275),s=n(2634)
function isStageEntryLocked(e){const t=e.review
return Boolean(t&&a.ZP.LOCKED_STATUSES.includes(t.status))}function _evUpdate(e,t){return{...e,entryVersion:t(e.entryVersion)}}function entryVersionUpdate(e){return{entryVersion:e}}function prepareForStore(e,t){return _evUpdate(e,(e=>i.Z.prepareForStore(e,t)))}function pickRevertableFields(e){return(0,r.Z)(e,"entryVersion")}function sanitizeStageEntry(e,t=null){return _evUpdate(e,(n=>i.Z.sanitizeEntryVersion(n,t&&t.entryVersion,e.id)))}function prepareForSave(e,t){return{name:e.name,entryVersion:i.Z.prepareForSave(e.entryVersion,t,e.id)}}function getEntryDocument(e,t){return{...e,entryVersion:t,latestVersionId:t.id}}function getPrintURL(e){return`${(0,s.oN)()}/stage-entries/${e}/view`}function replaceEntryVersion(e,t){return{...e,entryVersion:t}}function isFirstTrackedVersion(e){return!e.parentId&&e.created_at!==e.modified_at}},14498:(e,t,n)=>{n.d(t,{ZP:()=>g})
var a=n(602652),i=n.n(a),r=n(989526),s=n(212300),o=n(232606),l=n(459830),c=n(537076),d=n(133832),u=n(938454),m=n(795110),p=n(476604),h=n(36424),E=n(356873),S=n(334953),T=n(379346)
class PickContentsFromContainerTable extends r.Component{constructor(){super(...arguments)
this._handleClickHeaderCheckbox=()=>{(0,o.hu)(this.props.shouldAllowMultiple,"Unexpected header checkbox click")
this.props.selectedContainedItemIds.length<this.props.containedItems.length?this.props.onSelectContainedItems(this.props.containedItems):this.props.onSelectContainedItems([])}}componentDidMount(){this.props.container&&this.props.containedItems||u.fetchContainer(this.props.containerId,!0)
this._initializeSelectedContainedItemsIfNecessary()}componentDidUpdate(){this._initializeSelectedContainedItemsIfNecessary()}_initializeSelectedContainedItemsIfNecessary(){this.props.containedItems&&null==this.props.selectedContainedItemIds&&(this.props.shouldAllowMultiple?this.props.onSelectContainedItems(this.props.containedItems):this.props.containedItems.length>0?this.props.onSelectContainedItems([this.props.containedItems[0]]):this.props.onSelectContainedItems([]))}_renderSelectionRowsTable(){const e=this.props.containedItems.map((e=>r.createElement("tr",{className:"pickContainerContentsModal-bodyRow",key:e.id,onClick:()=>{this._handleClickCheckbox(e.id)}},r.createElement("td",{className:"pickContainerContentsModal-checkboxCell"},r.createElement("input",{checked:this.props.selectedContainedItemIds.includes(e.id),onChange:()=>{this._handleClickCheckbox(e.id)},type:this.props.shouldAllowMultiple?"checkbox":"radio"})),r.createElement("td",null,e.name),r.createElement("td",null,this.props.container.name))))
return r.createElement("div",{className:"pickContainerContentsModal-bodyContainer"},r.createElement("table",null,this._renderColgroup(),r.createElement("tbody",null,e)))}_handleClickCheckbox(e){if(!this.props.shouldAllowMultiple){this.props.onSelectContainedItems(this.props.containedItems.filter((({id:t})=>t===e)))
return}let t
t=this.props.selectedContainedItemIds.includes(e)?this.props.selectedContainedItemIds.filter((t=>t!==e)):[...this.props.selectedContainedItemIds,e]
t=this.props.containedItems.map((e=>e.id)).filter((e=>t.includes(e)))
this.props.onSelectContainedItems(this.props.containedItems.filter((({id:e})=>t.includes(e))))}_renderHeaderCheckbox(){return this.props.shouldAllowMultiple?r.createElement(E.Z,{items:this.props.containedItems.map((e=>e.id)),selectedMap:e=>this.props.selectedContainedItemIds.includes(e),onChange:this._handleClickHeaderCheckbox}):null}_renderColgroup(){return r.createElement("colgroup",null,r.createElement("col",{style:{width:40}}),r.createElement("col",{style:{width:180}}),r.createElement("col",{style:{width:S.i-180-40}}))}_isDataLoaded(){return null!=this.props.container&&null!=this.props.containedItems&&null!=this.props.selectedContainedItemIds}render(){return this._isDataLoaded()?0===this.props.containedItems.length?r.createElement("div",{className:"u-padding legacy-font-proxima-14 u-vertical-center-items u-justify-content-center"},r.createElement(h.Z,{icon:"exclamation",className:"u-small-padding-right pickContainerContentsModal-errorIcon"}),r.createElement("span",null,"No items were found in this container.")):r.createElement("span",null,r.createElement("table",null,this._renderColgroup(),r.createElement("tbody",null,r.createElement("tr",{className:"pickContainerContentsModal-headerRow"},r.createElement("td",{className:"pickContainerContentsModal-checkboxCell"},this._renderHeaderCheckbox()),r.createElement("td",null,"Item"),r.createElement("td",null,"Container")))),this._renderSelectionRowsTable()):r.createElement("div",{className:"u-padding text-center"},r.createElement(p.Z,null))}}PickContentsFromContainerTable.propTypes={containerId:i().string.isRequired,shouldAllowMultiple:i().bool.isRequired,sampleTypes:i().arrayOf(i().oneOf([l.BATCH,...(0,c.getRegistrySupportedTypes)()])),sampleSchema:i().object,selectedContainedItemIds:i().arrayOf(i().string.isRequired),onSelectContainedItems:i().func.isRequired,containedItems:i().arrayOf(d.jj),container:d._L}
PickContentsFromContainerTable.defaultProps={sampleTypes:[l.BATCH,...(0,c.getRegistrySupportedTypes)()],shouldAllowMultiple:!0}
const g=m.Z.connect((function mapStorableStoreToProps(e,{containerId:t}){return{batchesById:e.getBatches(),container:e.getContainer(t)}}))((0,s.$j)((function mapStateToProps(e,{container:t,sampleSchema:n,batchesById:a,sampleTypes:i}){if(!t)return{containedItems:null,container:null}
const{fileSummariesById:r}=e.models
let s=[]
for(const{containedItemId:e}of t.contents){const t=r[e],n=a[e]
s.push(t||n)}if(s.some((e=>!e)))return{containedItems:null,container:null}
null!=i&&(s=s.filter((e=>i.includes(T.ZP.apiIdToType(e.id)))))
n&&(s=s.filter((e=>"tagSchema"in e&&e.tagSchema&&e.tagSchema.id===n.id||"batchSchemaId"in e&&e.batchSchemaId===n.id)))
return{containedItems:s,container:t}}))(PickContentsFromContainerTable))},249101:(e,t,n)=>{n.d(t,{ZP:()=>inputTableToTable})
var a=n(64558),i=n(531041),r=n(348920),s=n(459830),o=n(150005),l=n(494355),c=n(783851),d=n(851422),u=n(591256),m=n(886150),p=n(544192),h=n(390189)
const E={text:""},S={text:"Loading..."}
function makeContainerCell(e){if(null==e.containerId)return E
{const t=(0,o.e)(e.containerId)
return t?(0,l.FB)(t):S}}function inputRowToRow(e,t,n){const{sampleId:a,stageRun:i}=e,{stageRunSampleById:r}=t,s=a?r[a]:null
if(null==s)return null
const c=function makeSampleCell(e){if(null!=e.batch)return{text:"",typedValue:{type:d.BaseTypedValueType.BATCH,batchInfo:{id:e.batch.id,name:e.batch.name,fileId:"",iconId:""}}}
if(null!=e.fileId){const t=(0,o.d)(e.fileId)
return t?(0,l.Sh)(t):S}return null}(s)
return null==c?null:[c,makeContainerCell(s),{text:i.name},...n.map((e=>({text:(0,m.yZ)(i.stageFlowNode.experimentalConditionValues.filter((t=>t.name===e)))||"None"})))]}function makeColumnConstraint(e,t){return{columnDefinition:e,structuredTableColumn:(0,c.Ao)({columnType:e.type,name:t})}}function inputTableToTable(e){const t=(0,m.Rn)(e.stageRuns),n=[p.nK,"Container","Stage Run",...t.map((e=>e.name))],o=[makeColumnConstraint({type:d.TableColumnType.SAMPLE,isRequired:!1},n[0]),makeColumnConstraint({type:d.TableColumnType.CONTAINERS,isRequired:!1,containersColumnMode:u.EY.LEGACY},n[1]),makeColumnConstraint({type:d.TableColumnType.STRING,name:n[2],isRequired:!1},n[2]),...t.map((e=>makeColumnConstraint({type:d.TableColumnType.STRING,name:e.name,isRequired:!1},e.name)))],l=i.default.pluck(t,"name"),c=function getSortedRows(e){const t=(0,h.LQ)(e.orderedInputSamples,e.parentIdsByStageRunId,e.stageRunsById,e.stageRuns),{sortColumnId:n,sortDirection:a}=(0,h.eE)(e.stageRuns,e.inputTableConfig)
return(0,h.ye)(t,e.stageRunSampleById,{sortColumnId:n,sortDirection:a})}(e),E=(0,a.oA)(c.map((t=>inputRowToRow(t,e,l))))
return{columnConstraints:o,columnLabels:n,name:"Inputs",rowData:E.map((()=>({isFinalized:!0}))),table:E,_tableType:s.WORKFLOW,widths:n.map((()=>120)),affixedColumnCount:0,allowAddRows:!1,allowNoRows:!1,allowRowRemoval:!1,maxRows:r.ZP.ELN_MAX_STRUCTURED_TABLE_PERSISTED_ROWS,allowColumnEdits:!1,disallowCustomColumns:!0,headerCol:!1,headerRow:!1,lockedDims:!0}}},886150:(e,t,n)=>{n.d(t,{Rn:()=>getUniqueExperimentalConditionSummaries,Z:()=>getExperimentalConditionValueNames,bR:()=>ExperimentalConditionPopoverContent,mY:()=>stageConfigurationHasExperimentalConditionValues,yZ:()=>experimentalConditionValuesToString})
var a=n(989526),i=n(531041)
function experimentalConditionValuesToString(e){return e.length>0?e.map((e=>e.textValue)).join(", "):""}function ExperimentalConditionPopoverContent({experimentalConditions:e}){return a.createElement("div",null,e.map(((e,t)=>a.createElement("div",{key:e.id||t},a.createElement("div",null,a.createElement("strong",null,e.name)),e.values.length>0&&a.createElement("p",null,e.values.map((e=>e.textValue)).join(", "))))))}function stageConfigurationHasExperimentalConditionValues(e){return e.experimentalConditions.some((e=>e.values.length>0))}function getUniqueExperimentalConditionSummaries(e){return i.default.chain(e).map((e=>e.stageFlowNode.experimentalConditionValues)).flatten().pluck("experimentalCondition").uniq("id").value()}function getExperimentalConditionValueNames(e){return i.default.pluck(getUniqueExperimentalConditionSummaries(e),"name")}},865636:(e,t,n)=>{n.d(t,{P:()=>isContainable,X:()=>areSimilar})
var a=n(592383)
function areSimilar(e,t){return e.id===t.id||e.name===t.name&&(null!=e.batch?null!=t.batch&&e.batch.id===t.batch.id:null!=e.fileId?e.fileId===t.fileId:null==t.batch&&null==t.fileId)}function isContainable(e,t){return null==e.fileId&&null!=e.batch||(null==e.fileId&&null==e.batch||Boolean(t&&(0,a.M)(t)))}},997461:(e,t,n)=>{n.d(t,{Ap:()=>stageRunTypedValue,Gf:()=>getFieldDefinitions,Kk:()=>getOutputSampleKeys,WS:()=>getTableIconsByTableName,_Z:()=>resolveStageRunValue,aZ:()=>resolveSampleKeysByTableName,bi:()=>getParentStageRuns,cP:()=>StageRunSampleRowLabel,cz:()=>getFieldValueCells,dl:()=>subtractSampleKeyLists,tl:()=>getInputSampleKeys,up:()=>getOtherParentOutputSamples,xy:()=>getAvailableSampleKeysByTableName})
var a=n(989526),i=n(531041),r=n(232606),s=n(6025),o=n(851422),l=n(194170),c=n(542683),d=n(280539),u=n(778223),m=n(317275),p=n(865636),h=n(57483),E=n(544192)
function sampleKeyStr(e){return`${e.stageRunId},${e.stageRunSampleId}`}function subtractSampleKeyLists(e,t){const n=new Set(t.map((e=>sampleKeyStr(e))))
return e.filter((e=>!n.has(sampleKeyStr(e))))}function getInputSampleKeys(e){const t=[]
for(const n of e)for(const e of n.inputSampleIds)t.push({stageRunId:n.id,stageRunSampleId:e})
return t}function getOutputSampleKeys(e){const t=[]
for(const n of e)for(const e of n.outputSampleIds)t.push({stageRunId:n.id,stageRunSampleId:e})
return t}function getRegisteredSampleKeysFromListId(e,t){const n=[],a=t[e]
if(!a)return n
for(const e of a.registrationRecords)n.push({stageRunId:e.stageRunId,stageRunSampleId:e.stageRunSampleId})
return n}function getTransferredSampleKeysFromListId(e,t,n){const a=[],i=t[e]
if(!i)return a
for(const e of i.transferOperationIds){const t=n[e]
if(t)for(const e of t.transferRecords)a.push({stageRunId:t.stageRunId,stageRunSampleId:e.outputStageRunSampleId})}return a}function getTableIconsByTableName({registrationTables:e,transferTables:t}){const n={Input:"input"}
if(e)for(const t of e)n[t.name]="register"
if(t)for(const e of t)n[e.name]="transfer"
return n}function getRegisteredSampleKeysByTableName(e,t,n){const a={}
for(const i of e){if(n[i.tagSchemaId]){const e=i.name,n=getRegisteredSampleKeysFromListId(i.registrationRecordListId,t)
a[e]||(a[e]=[])
a[e]=[...a[e],...n]}}return a}function getTransferredSampleKeysByTableName(e,t,n){const a={}
for(const i of e){const e=i.name,r=getTransferredSampleKeysFromListId(i.transferOperationListId,t,n)
a[e]||(a[e]=[])
a[e]=[...a[e],...r]}return a}function getAvailableSampleKeysByTableName({stageRuns:e,registrationTables:t,registrationRecordListsById:n,tagSchemasById:a,transferTables:i,transferOperationListsById:r,transferOperationsById:s}){let o={Input:getInputSampleKeys(e)}
t&&(o={...o,...getRegisteredSampleKeysByTableName(t,n,a)})
i&&(o={...o,...getTransferredSampleKeysByTableName(i,r,s)})
return o}function resolveSampleKeyList(e,t,n){const a=i.default.groupBy(e,"stageRunId"),r=[]
for(const e of t)for(const t of a[e.id]||[]){const a=n[t.stageRunSampleId]
a&&r.push({stageRun:e,stageRunSample:a})}return r}function resolveSampleKeysByTableName(e,t,n){const a={}
for(const i of Object.keys(e))a[i]=resolveSampleKeyList(e[i],t,n)
return a}const StageRunSampleChip=({sample:e})=>null!=e.fileId?a.createElement(d.default,{id:e.fileId,size:u.TK.TABLE_CELL}):null!=e.batch?a.createElement(c.Z,{id:e.batch.id,size:u.TK.TABLE_CELL}):null!=e.name?a.createElement("span",null,e.name):a.createElement("span",null,"Loading")
StageRunSampleChip.propTypes={sample:E.P5.isRequired}
function StageRunSampleRowLabel({stageRun:e,stageRunSample:t}){return null==t?a.createElement("span",null,"Loading"):a.createElement("span",null,a.createElement(StageRunSampleChip,{sample:t})," ",e?`(${e.name})`:null)}StageRunSampleRowLabel.propTypes={stageRun:E.Cn,stageRunSample:E.P5}
function getFieldDefinitions(e){return e?i.default.chain(e).pluck("fields").flatten().uniq(!1,h._).map((e=>(0,m.Z)(e,"tableName","name"))).value():[]}function getFieldValueCells(e,t,{stageRunSampleId:n}={}){return e?i.default.chain(e).filter((e=>e.stageRunId===t&&(null==n||e.stageRunSampleId===n))).pluck("fields").flatten().value():[]}function getParentStageRuns(e,t){return e.stageFlowNode.parentIds.map((e=>{const n=t.filter((t=>t.stageFlowNode.id===e));(0,r.Gp)(n.length<=1,`Found multiple stage runs matching stage flow node ${e}.`)
return 1!==n.length?null:n[0]}))}function getOtherParentOutputSamples(e,{parentStageRun:t,stageRunSampleById:n}){const a=i.default.compact(e.inputSampleIds.map((e=>n[e])))
return i.default.compact(t.outputSampleIds.map((e=>n[e]))).filter((e=>!a.some((t=>(0,p.X)(t,e)))))}function resolveStageRunValue(e,t){const n=(0,l.Gh)(e),a=t.find((e=>normalizeName(e.name)===normalizeName(n)))
if(a)return{resolvedValue:stageRunTypedValue(a),error:null}
{const t=""===n?"Stage Run is required.":`Invalid stage run name: ${n}`
return{resolvedValue:e,error:new s.ValueError(t)}}}function normalizeName(e){return e.toLowerCase().trim()}function stageRunTypedValue(e){return{type:o.BaseTypedValueType.STAGE_RUN,stageRunId:e.id,stageRunName:e.name}}},57483:(e,t,n)=>{n.d(t,{_:()=>stringifyStructuredFieldDefinition})
function stringifyStructuredFieldDefinition(e){return JSON.stringify([e.tableName,e.name])}},2634:(e,t,n)=>{n.d(t,{DQ:()=>getShouldExpandFirstStageOnly,F1:()=>getLatestPublishedWorkflowTemplateVersion,P7:()=>getShouldAggregateVisualization,Ty:()=>getLatestWorkflowTemplateVersion,U8:()=>getWorkflowDisplayString,X9:()=>isWorkflowInitialized,hu:()=>getShouldDisableDetailsTableHovering,oN:()=>getWorkflowsBaseUrl,pm:()=>getWorkflowURL})
var a=n(814099),i=n(323539),r=n(348920)
function getWorkflowDisplayString(e,t){return r.ZP.WORKFLOWS_ENABLE||(0,i.cr)({feature:a.gx.PROCESSES_DISCOVER})?e:t}function getLatestWorkflowTemplateVersion(e){return e.workflowTemplateVersions[0]}function getLatestPublishedWorkflowTemplateVersion(e){for(const t of e.workflowTemplateVersions)if(t.version)return t
return null}function isWorkflowInitialized(e){return e.workflowStages.length>0}function getWorkflowsBaseUrl(){return r.ZP.WORKFLOWS_ENABLE?"/legacy-workflows":"/workflows"}function getWorkflowURL(e){return`${getWorkflowsBaseUrl()}/view/${e}`}function getShouldExpandFirstStageOnly(e){return Object.values(e).some((e=>e.length>10))}function getShouldDisableDetailsTableHovering(e){return Object.values(e).some((e=>e.length>30))}function getShouldAggregateVisualization(e){return Object.values(e).some((e=>e.length>120))}},626334:(e,t,n)=>{n.d(t,{DZ:()=>a,UH:()=>rightClickNode,Vl:()=>hoverNode,iw:()=>clickLink,mP:()=>clickNode,mc:()=>reset,oC:()=>unhoverNode})
var a
!function(e){e.WORKFLOW_VISUALIZATION_RESET="WORKFLOW_VISUALIZATION_RESET"
e.WORKFLOW_VISUALIZATION_CLICK_NODE="WORKFLOW_VISUALIZATION_CLICK_NODE"
e.WORKFLOW_VISUALIZATION_CLICK_LINK="WORKFLOW_VISUALIZATION_CLICK_LINK"
e.WORKFLOW_VISUALIZATION_RIGHT_CLICK_NODE="WORKFLOW_VISUALIZATION_RIGHT_CLICK_NODE"
e.WORKFLOW_VISUALIZATION_HOVER_NODE="WORKFLOW_VISUALIZATION_HOVER_NODE"
e.WORKFLOW_VISUALIZATION_UNHOVER_NODE="WORKFLOW_VISUALIZATION_UNHOVER_NODE"}(a||(a={}))
function reset(){return{type:a.WORKFLOW_VISUALIZATION_RESET}}function clickNode(e){return{type:a.WORKFLOW_VISUALIZATION_CLICK_NODE,nodeId:e}}function clickLink(e,t){return{type:a.WORKFLOW_VISUALIZATION_CLICK_LINK,parentNodeId:e,childNodeId:t}}function rightClickNode(e){return{type:a.WORKFLOW_VISUALIZATION_RIGHT_CLICK_NODE,nodeId:e}}function hoverNode(e){return{type:a.WORKFLOW_VISUALIZATION_HOVER_NODE,nodeId:e}}function unhoverNode(e){return{type:a.WORKFLOW_VISUALIZATION_UNHOVER_NODE,nodeId:e}}},825309:(e,t,n)=>{n.d(t,{Dl:()=>updateWorklists,Ov:()=>dispatchCreateWorklist,YM:()=>createWorklistAsync,aK:()=>dispatchAddWorklistItems,bt:()=>updateWorklistAsync,fq:()=>dispatchRemoveWorklistItems,gs:()=>dispatchUpdateWorklist,tx:()=>dispatchBulkDeleteWorklists})
var a=n(675649),i=n(681896),r=n(91092),s=n(965131),o=n(377249),l=n(709759),c=n(974913),d=n(166459),u=n(87209),m=n(883777),p=n(140474),h=n(507149),E=n(329396)
const S={refreshWorklistItemsSearch:!1,refreshWorklistsSearch:!1,refreshRecentWorklists:!1}
function _doRefreshes(e){e.refreshWorklistsSearch&&(0,p.FX)()
e.refreshWorklistItemsSearch&&(0,p.c9)()
e.refreshRecentWorklists&&(0,m.FF)()}function updateWorklists(e){(0,d.getStore)().dispatch((0,l.IH)(o.V.WORKLIST_SUMMARIES_BY_ID,e))}function dispatchCreateWorklist(e,t,n,i=S){(0,d.getStore)().dispatch(function createWorklist(e,t,n,i=S){return async r=>{await createWorklistAsync(e,t,n,i,null,r)
c.ZP.success(`Worklist '${e}' was created${n.length>0?` with ${n.length} ${(0,a._6)(n.length,"item")}`:""}`)}}(e,t,n,i))}async function createWorklistAsync(e,t,n,a=S,c,d){const u=await E.Vg(e,t,n,c)
_doRefreshes(a)
d((0,l.IH)(o.V.WORKLIST_SUMMARIES_BY_ID,u.worklistSummaries));(0,m.k6)((0,h.z8)(u.worklistSummaries));(0,i.writeFragmentsToCache)((0,r.f)("OwnerAndCollaboratorInfo"),[(0,s.s2)("OwnerAndCollaboratorInfo",u.newWorklist)])}function dispatchUpdateWorklist(e,t,n=S){(0,d.getStore)().dispatch(function updateWorklist(e,t,n=S){return async a=>{await updateWorklistAsync(e,t,n,a)
c.ZP.success("Worklist was updated")}}(e,t,n))}async function updateWorklistAsync(e,t,n=S,a){const c=await E.n$(e,t)
_doRefreshes(n)
a((0,l.IH)(o.V.WORKLIST_SUMMARIES_BY_ID,{[e]:c}));(0,m.k6)((0,h.z8)({[e]:c}))
a((0,l.IH)(o.V.WORKLIST_ITEMS_BY_WORKLIST_ID,{[e]:c.itemIds}));(0,i.writeFragmentsToCache)((0,r.f)("OwnerAndCollaboratorInfo"),[(0,s.s2)("OwnerAndCollaboratorInfo",c)])}function dispatchBulkDeleteWorklists(e,t=S){(0,d.getStore)().dispatch(function bulkDeleteWorklists(e,t){return async n=>{u.$Z("Deleting worklists...")
try{const i=await E.xI(e)
c.ZP.success(`Deleted ${e.length} ${(0,a._6)(e.length,"worklist")}`)
n((0,l.IH)(o.V.WORKLIST_SUMMARIES_BY_ID,i));(0,m.k6)((0,h.z8)(i))
_doRefreshes(t)}finally{u.Cp()}}}(e,t))}function dispatchAddWorklistItems(e,t,n=S){(0,d.getStore)().dispatch(function addWorklistItems(e,t,n){return async i=>{const r=await E.EN(e,t),s=t.length
c.ZP.success(`${s} ${(0,a._6)(s,"item")} ${(0,a._6)(s,"was","were")} added to worklist '${r.name}'.`)
i((0,l.IH)(o.V.WORKLIST_ITEMS_BY_WORKLIST_ID,{[e]:r.itemIds}))
_doRefreshes(n)}}(e,t,n))}function dispatchRemoveWorklistItems(e,t,n=S){(0,d.getStore)().dispatch(function removeWorklistItems(e,t,n){return async i=>{u.$Z("Removing items...")
try{const r=await E.pv(e,t),s=t.length
c.ZP.success(`${s} ${(0,a._6)(s,"item")} ${(0,a._6)(s,"was","were")} removed from worklist '${r.name}'.`)
i((0,l.IH)(o.V.WORKLIST_ITEMS_BY_WORKLIST_ID,{[r.id]:r.itemIds}))
_doRefreshes(n)}finally{u.Cp()}}}(e,t,n))}},329396:(e,t,n)=>{n.d(t,{EN:()=>addItemsToWorklist,RN:()=>fetchWorklist,Vg:()=>createWorklist,hI:()=>bulkFetchWorklistItemIds,n$:()=>updateWorklist,nh:()=>bulkFetchWorklistSummaries,pv:()=>removeItemsFromWorklist,xI:()=>bulkDeleteWorklists})
var a=n(771398)
function bulkFetchWorklistSummaries(e){return a.s0({url:"/1/api/worklists:bulk-get",data:{worklistIds:e}})}function createWorklist(e,t,n,i){return a.s0({url:"/1/api/worklists",data:{worklistName:e,worklistItemType:t,itemIds:n,collaborators:i}})}function bulkDeleteWorklists(e){return a.WY({url:"/1/api/worklists:bulk-delete",data:{worklistIds:e}})}function fetchWorklist(e){return a.UJ(`/1/api/worklists/${e}`)}function updateWorklist(e,t){return a.Ry({url:`/1/api/worklists/${e}`,data:t})}function bulkFetchWorklistItemIds(e){return Promise.all(e.map((e=>fetchWorklist(e))))}function addItemsToWorklist(e,t){return a.Ry({url:`/1/api/worklists/${e}:add-items`,data:{itemIds:t}})}function removeItemsFromWorklist(e,t){return a.Ry({url:`/1/api/worklists/${e}:remove-items`,data:{itemIds:t}})}},443240:(e,t,n)=>{n.d(t,{K:()=>getDefaultWorklistSearchParams,_:()=>getDefaultWorklistItemsSearchParams})
var a=n(459830),i=n(294120),r=n(872543),s=n(62315),o=n(374669),l=n(117170)
function getDefaultWorklistSearchParams(){return{filters:[{...(0,s.QW)(s.Vm.TYPES),value:[a.WORKLIST]}],offset:0,limit:(0,r.z3)(),query:"",sorts:o.i_(i.$0.WORKLISTS)}}function getDefaultWorklistItemsSearchParams(){return{filters:[{...(0,s.QW)(s.Vm.TYPES),value:[].concat(...Object.values(l.$k))}],offset:0,limit:(0,r.z3)(),query:"",sorts:[]}}},140474:(e,t,n)=>{n.d(t,{FX:()=>forceRefreshWorklistsListing,Sl:()=>returnToWorklistsSidepanel,c9:()=>forceRefreshWorklistItemsListing,nM:()=>a,vS:()=>openWorklistListing,zM:()=>updateSidepanelSelectedWorklist})
var a,i=n(294120),r=n(408783),s=n(392113),o=n(166459),l=n(627259),c=n(507149)
!function(e){e.UPDATE_SIDEPANEL_SELECTED_WORKLIST="UPDATE_SIDEPANEL_SELECTED_WORKLIST"}(a||(a={}))
function updateSidepanelSelectedWorklist(e){return{type:a.UPDATE_SIDEPANEL_SELECTED_WORKLIST,worklistId:e}}function openWorklistListing(e,t){const n=(0,c.SS)(e.id,e.itemType,t);(0,o.getStore)().dispatch(updateSidepanelSelectedWorklist(e.id));(0,o.getStore)().dispatch(s.openListing(i.$0.WORKLIST_ITEMS,n))}function returnToWorklistsSidepanel(){(0,o.getStore)().dispatch(updateSidepanelSelectedWorklist(null))
r.GS(i.$0.WORKLISTS);(0,o.getStore)().dispatch(l.f(i.$0.WORKLISTS))}function forceRefreshWorklistsListing(){(0,o.getStore)().dispatch(l.f(i.$0.WORKLISTS))}function forceRefreshWorklistItemsListing(){(0,o.getStore)().dispatch(l.f(i.$0.WORKLIST_ITEMS))}},335685:(e,t,n)=>{n.d(t,{T:()=>WorklistSidepanelSelector,Z:()=>reduceWorklistSidepanelState})
var a=n(140474)
class WorklistSidepanelSelector{constructor(e){this.state=e
this.state=e}getSidepanelState(){return this.state.ui.worklistSidepanelState}}function reduceWorklistSidepanelState(e={selectedWorklistId:null},t){if(t.type===a.nM.UPDATE_SIDEPANEL_SELECTED_WORKLIST){const{worklistId:n}=t
return{...e,selectedWorklistId:n}}return e}},23127:(e,t,n)=>{n.d(t,{ZP:()=>N,hB:()=>maybeAddWorklistPositionColumn})
var a=n(989526),i=n(232606),r=n(634489),s=n(171471),o=n(294120),l=n(377249),c=n(484827),d=n(318311),u=n(619174),m=n(749334),p=n(408783),h=n(974913),E=n(13951),S=n(62315),T=n(89635),g=n(343106),f=n(476604),I=n(883026),A=n(467097),y=n(825309),_=n(117170),C=n(164377),R=n(507149)
function maybeAddWorklistPositionColumn(e,t){t.length&&(0,d.L7)(t[0])&&e.splice(1,0,{column:{header:(0,T.o7)(S.bo.SORT_WORKLIST_POSITION_KEY),accessorKey:d.dC.POSITION,isCollapsible:!1,isSortable:!0,sortKey:S.bo.SORT_WORKLIST_POSITION_KEY,width:120},render:e=>a.createElement("span",{className:"u-ellipsis-text"},e.worklistItemPosition)})}class WorklistItemsSidepanelConnector extends r.C{enhanceProps(){return{worklistSummary:this.getOrFetchOptional(l.V.WORKLIST_SUMMARIES_BY_ID,this.props.selectedWorklistId),itemIds:this.getOrFetchOptional(l.V.WORKLIST_ITEMS_BY_WORKLIST_ID,this.props.selectedWorklistId)}}}const N=(0,g.ZP)(WorklistItemsSidepanelConnector.connect((function WorklistItemsSidepanel(e){const t=a.createElement(c.bJ,{crumbs:[a.createElement(c.Ak,{key:"breadcrumbs-home",text:"Home",onClick:e=>{e.preventDefault()
p.GS(o.$0.HOME)}}),a.createElement(c.Ak,{key:"breadcrumbs-worklists",text:"Worklists",onClick:t=>{t.preventDefault()
e.clearSelectedWorklist()}}),e.worklistSummary?a.createElement(c.Ak,{key:"root",text:e.worklistSummary.name}):a.createElement(f.Z,{key:"root"})],settingsIcon:a.createElement(C.Z,{worklist:e.worklistSummary,itemIds:e.itemIds})})
return a.createElement("div",{className:"sidepanel"},a.createElement(u.ZP,{...e,actionSource:s.D2.SIDEPANEL_HOME_WORKLISTS,onSearch:e.worklistSummary?function handleSearch(t){const n=(0,R.SS)(e.worklistSummary.id,e.worklistSummary.itemType,t)
e.onSearch(n)}:()=>{},onUpdateFilters:e.worklistSummary?function handleUpdateFilters(t){const n=(0,R.SS)(e.worklistSummary.id,e.worklistSummary.itemType,{...e.searchParams,filters:t})
e.onUpdateFilters(n.filters)}:()=>{},onUpdateQueryString:e.worklistSummary?e.onUpdateQueryString:()=>{},onUpdatePageSize:e.worklistSummary?e.onUpdatePageSize:()=>{},onUpdateOffset:e.worklistSummary?e.onUpdateOffset:()=>{},onUpdateSortOrder:e.worklistSummary?e.onUpdateSortOrder:()=>{},onUpdateGroupBy:e.worklistSummary?e.onUpdateGroupBy:()=>{},availableTypes:e.worklistSummary?_.$k[e.worklistSummary.itemType]:[],makeCrumbs:()=>t,extraPrimaryFilterOptions:[],massageItems:function decorateWithWorklistInfo(t){if(!e.itemIds)return t
const n={}
for(let t=0;t<e.itemIds.length;t++)n[e.itemIds[t]]=t+1
for(const e of t)e.worklistItemPosition=n[e.id]
if(e.worklistSummary)for(const n of t)n.worklistId=e.worklistSummary.id
return t},availableSortKeys:[S.bo.SORT_NAME_KEY,S.bo.SORT_IDENTIFIER_KEY,S.bo.SORT_MODIFIED_AT_KEY,S.bo.SORT_CREATED_AT_KEY],preservedFilterKeys:[S.Vm.ITEM_IN_WORKLIST],section:o.$0.WORKLIST_ITEMS,additionalHeaderButtons:e.worklistSummary&&a.createElement(A.Z,{worklistSummary:e.worklistSummary,className:"u-mini-spacing-left"}),onSaveOrder:async function onSaveOrder(t){if(!e.worklistSummary||!e.searchResults)return;(0,i.hu)(Boolean(e.itemIds),"Save Order option should not appear when there are no items");(0,i.hu)(!e.searchParams.query,"Save Order option should not appear when there is a search query")
if(e.searchResults.total!==e.itemIds.length){h.ZP.error("You cannot change the order of this worklist because it contains items that are inaccessible to you.")
return}const n=await async function getAllItemIdsInSortOrder(t){if(e.itemIds.length>e.searchParams.limit){const{ids:t}=await(0,I.jI)(E.k({...e.searchParams,limit:_.ne},S.Sc.WORKLIST_ITEMS))
return t}return t}(t);(0,y.gs)(e.worklistSummary.id,{itemIds:n},{refreshWorklistItemsSearch:!0})},showMultiKeySortMenu:!0}))})),S.Sc.WORKLIST_ITEMS,o.$0.WORKLIST_ITEMS,{getNavigationUpdate:function getWorklistItemsURL(e,t){return t.isExpanded?{url:m.q7("/worklist-items",t.searchParams,t.filterErrors)}:null}})},883777:(e,t,n)=>{n.d(t,{FF:()=>fetchRecentWorklistsQuery,ZP:()=>useRecentWorklistsQuery,k6:()=>updateRecentWorklistIdsCache})
var a=n(769784),i=n(18526),r=n(681896),s=n(751512),o=n(91092),l=n(117170)
const c=a.Ps`
  query RecentWorklistIdsQuery($limitOffsetInput: LimitOffsetInput!)
  @skipAudit
  @engComponent(name: WORKLISTS) {
    recentWorklists(limitOffsetInput: $limitOffsetInput) {
      worklists {
        ... on WorklistNode {
          id
        }
      }
    }
  }
`,d=a.Ps`
  query RecentWorklistsQuery($limitOffsetInput: LimitOffsetInput!) @skipAudit @engComponent(name: WORKLISTS) {
    recentWorklists(limitOffsetInput: $limitOffsetInput) {
      worklists {
        ... on WorklistNode {
          ...WorklistSummaryGraphQL
        }
      }
    }
  }
  ${(0,o.f)("WorklistSummary").fragment}
`,u={limitOffsetInput:{limit:l.L_,offset:0}}
function updateRecentWorklistIdsCache(e){const t={recentWorklists:{worklists:e.slice(0,l.L_).map((e=>({id:e,__typename:"WorklistNode"}))),__typename:"RecentWorklistListingNode"}};(0,i.W)().writeQuery({query:c,variables:u,data:t})}async function fetchRecentWorklistsQuery(){await(0,r.doQuerySafe)({query:d},{variables:u})}function useRecentWorklistsQuery(){const e=(0,s.IJ)(d,{variables:u}),t=e.type===s.NI.SUCCESS?e.data.recentWorklists.worklists:null
return{queryResultType:e.type,recentWorklists:t}}},673448:e=>{e.exports=JSON.parse('{"itemTypeOptions":[{"description":null,"itemType":"FOLDER_OR_PROJECT","name":"Projects and folders","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Create folders","description":"Create folders or sub-folders inside the associated project","action":"CREATE_SUBFOLDER","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Create or move any non-folder item within the associated project","name":"Add other items","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit folder properties","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Archive and unarchive folders","name":"Archive folders","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit project settings & manage collaborators","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"NOTEBOOK","description":null,"name":"Notebook entries","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Append","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true},{"name":"Edit","actionOptions":[{"description":null,"name":"Edit entry schema and fields","action":"EDIT_SCHEMA_AND_FIELDS","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":"Edit any data not covered by another action. This covers the following:\\n\\n- Edit name\\n- Edit contents\\n- Submit entry for review\\n- Edit studies","name":"Edit other data","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]}]},{"description":"Archive and unarchive entries","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":null,"name":"Admin","action":"ADMIN","hidden":true,"conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Retract accepted entry from review","action":"RETRACT_REVIEW","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]}]},{"itemType":"PROTOCOL","description":null,"name":"Protocols","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":"Archive and unarchive protocols","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":null,"name":"Admin","action":"ADMIN","hidden":true,"conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"BIOENTITY","description":"DNA sequences, AA sequences, and custom entities","name":"Entities","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit","actionOptions":[{"description":null,"name":"Edit chemical structure","action":"EDIT_CHEMICAL_STRUCTURE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":null,"name":"Edit sequence bases and protein amino acids","action":"EDIT_RESIDUES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":"Add, remove, and edit the following:\\n- Annotations, translations, and primers\\n- Virtual digests\\n- Alignments\\n- CRISPR analyses\\n\\nOnly applicable for DNA and AA sequences.","name":"Perform annotation & analysis","action":"EDIT_POLYMER_FEATURES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"name":"Edit registry ID","description":null,"action":"CHANGE_REGISTRY_IDENTIFIER","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"name":"Edit names and aliases","description":null,"action":"EDIT_NAMES_AND_ALIASES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":"Edit any data not covered by another action. This covers the following:\\n\\n- Description tab\\n- Schema fields\\n- Custom Fields\\n- Mixture attributes (amount, units, ingredients)\\n- Registering the entity\\n- Moving the entity\\n- Studies","name":"Edit other data","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]}]},{"description":"Archive and unarchive entities","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":null,"name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true},{"description":null,"name":"Unregister","action":"UNREGISTER","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]}]},{"itemType":"BATCH","description":null,"name":"Batches","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Append","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Create","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to entity author"}],"itemTypeOverride":"BIOENTITY"},{"description":"Archive and unarchive batches","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true}]},{"itemType":"ASSEMBLY","description":null,"name":"Bulk Assemblies","actionOptions":[{"description":null,"name":"View","action":"READ","disabled":true,"conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit and finalize assembly","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Archive and unarchive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"PLATE","description":null,"name":"Plates","actionOptions":[{"description":null,"name":"View","action":"READ","disabled":true,"conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"The user will still need permission to edit the container itself.","name":"Move containers into and out of plates","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit","actionOptions":[{"name":"Edit names","description":null,"action":"EDIT_NAMES_AND_BARCODES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit properties, move and stamp plates, edit studies","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"description":null,"name":"Archive and unarchive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true}]},{"itemType":"BOX","description":null,"name":"Boxes","actionOptions":[{"description":null,"name":"View","action":"READ","disabled":true,"conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"The user will still need permission to edit the container itself.","name":"Move containers into and out of boxes","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit","actionOptions":[{"name":"Edit names","description":null,"action":"EDIT_NAMES_AND_BARCODES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit properties, move boxes, edit studies","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"description":null,"name":"Archive and unarchive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true}]},{"itemType":"CONTAINER","description":null,"name":"Containers and wells","actionOptions":[{"description":null,"name":"View","action":"READ","disabled":true,"conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit","actionOptions":[{"name":"Edit names","description":null,"action":"EDIT_NAMES_AND_BARCODES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit properties, transfer contents, move containers","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"description":"Change unrestricted samples to be restricted, and set up an initial set of restricted sample users. \\nWhen trying to use a restricted sample, Benchling will warn you if you are not a restricted sample user.","name":"Restrict sample (container)","action":"RESTRICT_SAMPLES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Change restricted samples to be unrestricted. \\nUnrestricting samples also clears any existing restricted sample users, which requires permissions for \\"Edit restricted sample users\\".","name":"Unrestrict sample (container)","action":"UNRESTRICT_SAMPLES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Change restricted sample users on a restricted sample. Only restricted sample users can use the sample","name":"Edit restricted sample users (container)","action":"EDIT_RESTRICTED_SAMPLE_USERS","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Archive and unarchive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true}]},{"itemType":"LOCATION","description":null,"name":"Locations","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Move inventory into locations","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit","actionOptions":[{"name":"Edit names","description":null,"action":"EDIT_NAMES_AND_BARCODES","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit location properties","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"description":null,"name":"Create","action":"CREATE_LOCATION","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"itemTypeOverride":"REGISTRY"},{"description":"Archive and unarchive locations","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Admin","action":"ADMIN","hidden":true,"conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"REGISTRY","description":"Registries, and configuration objects associated with them.\\n\\nThis covers:\\n- Registry collaborators\\n- Entity & batch schemas\\n- Entry schemas\\n- Inventory schemas (Containers, Plates, Boxes, and Locations)\\n- Dropdowns\\n- Printers\\n- Label templates\\n\\nThis does not cover any other schemas.","name":"Registries and associated settings","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Register entities into the associated registry. The user must also be granted access to register on the entity itself (currently granted by \\"Entities > Edit other data\\").","name":"Register Entities","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Write","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"hidden":true},{"description":null,"name":"Edit","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Archive","hidden":true,"action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"REQUEST","name":"Requests","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Create","description":null,"action":"CREATE_REQUEST","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}],"itemTypeOverride":"FOLDER_OR_PROJECT"},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Execute","action":"EXECUTE_REQUEST","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"WORKFLOW","name":"Workflows","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"PROCESS_TASK_GROUP","name":"Workflow task groups","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","disabled":false,"action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":null,"name":"Create tasks","disabled":false,"action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":"Archive and unarchive task group, as well as their contained tasks and outputs. ","name":"Archive","disabled":false,"action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]}]},{"itemType":"PROCESS_TASK","name":"Workflow tasks","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit","actionOptions":[{"description":"Modify scheduled on, assignee, status, and studies.","name":"Edit system fields","disabled":false,"action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to task group author"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]},{"description":null,"name":"Edit schema fields for pending/planned/invalid tasks","disabled":false,"action":"EDIT_FIELDS_IF_PENDING_INVALID","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to task group author"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]},{"description":null,"name":"Edit schema fields for in-progress tasks","disabled":false,"action":"EDIT_FIELDS_IF_IN_PROGRESS","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to task group author"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]},{"description":null,"name":"Edit schema fields for completed/failed/cancelled tasks","disabled":false,"action":"EDIT_FIELDS_IF_TERMINAL","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to task group author"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]}]},{"description":null,"name":"Create outputs","disabled":false,"action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]},{"description":"Archive and unarchive tasks (including their contained outputs)","name":"Archive","disabled":false,"action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to task group author"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]}]},{"itemType":"PROCESS_OUTPUT","name":"Workflow outputs","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","disabled":false,"action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]},{"description":null,"name":"Edit fields when corresponding task is completed/failed/cancelled","action":"EDIT_FIELDS_IF_TERMINAL","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Archive and unarchive outputs","name":"Archive","disabled":false,"action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to task group author"},{"condition":"IS_ASSIGNEE","name":"Granted to task assignee"}]}]},{"itemType":"TEMPLATE_COLLECTION","name":"Template collections and templates","description":"Template collections, templates, workflow execution templates, and sub-templates","actionOptions":[{"description":"Allows users to view templates and utilize them.","name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Create","action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Allows users to archive both collections and the templates that belong to them.","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Allows user to edit settings, and update collaborators for template collections.","name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"ANALYTICS_DASHBOARD","name":"Insights dashboards","actionOptions":[{"description":"Allows a user to change parameter values and run the query, but not save any changes.","name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"WORKLIST","name":"Worklists","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Rename or delete worklists, and update their collaborators.","name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"ANALYSIS","name":"Analyses","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Archive","hidden":true,"action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"CONNECTION","name":"Connections","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Archive and unarchive connections","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Update connection owners and collaborators","name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"STUDY","name":"Studies","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"name":"Edit","actionOptions":[{"description":"Edit name, phase, authors, and schema fields.","name":"Edit study metadata","disabled":false,"action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"},{"condition":"IS_AUTHOR","name":"Granted to author"}]},{"description":null,"name":"Change assignment of objects to studies","disabled":false,"action":"CHANGE_ASSIGNMENT_OF_OBJECTS","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"description":"Archive and unarchive studies.","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"FILE","name":"File","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Archive","hidden":true,"action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]},{"itemType":"OTHER","description":"This covers any items not covered above. Currently these are:\\n- Enzyme lists\\n- Feature libraries\\n- Ladders","name":"Other item types","actionOptions":[{"description":null,"name":"View","disabled":true,"action":"READ","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Append","hidden":true,"action":"APPEND","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Edit","action":"WRITE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":"Archive and unarchive items if archiving is supported","name":"Archive","action":"ARCHIVE","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]},{"description":null,"name":"Admin","action":"ADMIN","conditionOptions":[{"condition":"ALWAYS","name":"Granted"}]}]}]}')}},s={}
function __webpack_require__(e){var t=s[e]
if(void 0!==t)return t.exports
var n=s[e]={id:e,loaded:!1,exports:{}}
r[e].call(n.exports,n,n.exports,__webpack_require__)
n.loaded=!0
return n.exports}__webpack_require__.m=r
__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")}
__webpack_require__.amdO={}
e=[],__webpack_require__.O=(t,n,a,i)=>{if(!n){var r=1/0
for(c=0;c<e.length;c++){for(var[n,a,i]=e[c],s=!0,o=0;o<n.length;o++)if((!1&i||r>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[o]))))n.splice(o--,1)
else{s=!1
i<r&&(r=i)}if(s){e.splice(c--,1)
var l=a()
void 0!==l&&(t=l)}}return t}i=i||0
for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1]
e[c]=[n,a,i]};(()=>{__webpack_require__.F={}
__webpack_require__.E=e=>{Object.keys(__webpack_require__.F).map((t=>{__webpack_require__.F[t](e)}))}})()
__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e
__webpack_require__.d(t,{a:t})
return t}
n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,a){1&a&&(e=this(e))
if(8&a)return e
if("object"==typeof e&&e){if(4&a&&e.__esModule)return e
if(16&a&&"function"==typeof e.then)return e}var i=Object.create(null)
__webpack_require__.r(i)
var r={}
t=t||[null,n({}),n([]),n(n)]
for(var s=2&a&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]))
r.default=()=>e
__webpack_require__.d(i,r)
return i}
__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})};(()=>{__webpack_require__.f={}
__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>{__webpack_require__.f[n](e,t)
return t}),[]))})()
__webpack_require__.u=e=>568===e?"molstar-568.e544270830dcc261bce35ada64ef746b.js":({172:"printer-friendly",189:"editor",207:"pdfkit",247:"image-editor",350:"swagger-ui",547:"config-migration",724:"protocols",752:"libphonenumber",793:"katex",804:"molstar-viewer"}[e]||e)+"."+{81:"6f2426bc33cc1b7a5637a50ddf0fceb3",105:"758d2f66bd1ab027ee708305b6a5a334",172:"f6d59e347717473af1051f1c34f3de80",189:"cbe8d02d09da1af1e1ff261257786e03",207:"cdf185d7100fbebb9d629eab7c84ce74",247:"c6e0108a5a56db6a7cc144da5e4175c6",337:"99d8d8b3c8eda3b2a03c11a3f0a5e656",350:"9cc8d2353ffd36420823df2697032290",396:"f1d27e308c48ec52c773c495df317f59",427:"029e922520eaf7de06c477f579ec61c5",505:"7996e351d9e323e1273666e8859654f7",547:"d46869f2e4ff94a73f7391f6a645b9ca",724:"f49935b28ebcf9691302de13b7d05703",752:"4db3547995332ea7af134f9b6ebc08ae",770:"3d9c1ee394f53ce4abc5f300c1e2a16e",793:"64971cb73f7a21d9d1e46dddf9ebeb0a",804:"7d1853a21972fac93cde50336c22b57f",827:"bedfd1b9b92e344d211b8b6ea4aa3a17",846:"03ad90563ea4f05f8d52623d14e924c8",877:"f6b6a4505f17c18dfcb26f0974e323c4",894:"faabe1605cf2d10edc0610ddc6667682",898:"a550ccad7c2bad26f3d5d052ecef9297",972:"127fb300ec2e089eb5f70bb975d78e83",975:"9d3a3a8ddb26b4924a1e09a68fba6001"}[e]+".js"
__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis
try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}()
__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)
a={},i="aurelia:",__webpack_require__.l=(e,t,n,r)=>{if(a[e])a[e].push(t)
else{var s,o
if(void 0!==n)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c]
if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+n){s=d
break}}if(!s){o=!0;(s=document.createElement("script")).charset="utf-8"
s.timeout=120
__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc)
s.setAttribute("data-webpack",i+n)
s.src=e}a[e]=[t]
var onScriptComplete=(t,n)=>{s.onerror=s.onload=null
clearTimeout(u)
var i=a[e]
delete a[e]
s.parentNode&&s.parentNode.removeChild(s)
i&&i.forEach((e=>e(n)))
if(t)return t(n)},u=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:s}),12e4)
s.onerror=onScriptComplete.bind(null,s.onerror)
s.onload=onScriptComplete.bind(null,s.onload)
o&&document.head.appendChild(s)}}
__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})
Object.defineProperty(e,"__esModule",{value:!0})}
__webpack_require__.nmd=e=>{e.paths=[]
e.children||(e.children=[])
return e}
__webpack_require__.j=143
__webpack_require__.p="/static/build/";(()=>{__webpack_require__.b=document.baseURI||self.location.href
var e={143:0}
__webpack_require__.f.j=(t,n)=>{var a=__webpack_require__.o(e,t)?e[t]:void 0
if(0!==a)if(a)n.push(a[2])
else{var i=new Promise(((n,i)=>a=e[t]=[n,i]))
n.push(a[2]=i)
var r=__webpack_require__.p+__webpack_require__.u(t),s=new Error
__webpack_require__.l(r,(n=>{if(__webpack_require__.o(e,t)){0!==(a=e[t])&&(e[t]=void 0)
if(a){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src
s.message="Loading chunk "+t+" failed.\n("+i+": "+r+")"
s.name="ChunkLoadError"
s.type=i
s.request=r
a[1](s)}}}),"chunk-"+t,t)}}
__webpack_require__.F.j=t=>{if(!__webpack_require__.o(e,t)||void 0===e[t]){e[t]=null
var n=document.createElement("link")
__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc)
n.rel="prefetch"
n.as="script"
n.href=__webpack_require__.p+__webpack_require__.u(t)
document.head.appendChild(n)}}
__webpack_require__.O.j=t=>0===e[t]
var webpackJsonpCallback=(t,n)=>{var a,i,[r,s,o]=n,l=0
if(r.some((t=>0!==e[t]))){for(a in s)__webpack_require__.o(s,a)&&(__webpack_require__.m[a]=s[a])
if(o)var c=o(__webpack_require__)}t&&t(n)
for(;l<r.length;l++){i=r[l]
__webpack_require__.o(e,i)&&e[i]&&e[i][0]()
e[i]=0}return __webpack_require__.O(c)},t=self.webpackChunkaurelia=self.webpackChunkaurelia||[]
t.forEach(webpackJsonpCallback.bind(null,0))
t.push=webpackJsonpCallback.bind(null,t.push.bind(t))})()
__webpack_require__.nc=void 0
__webpack_require__.O(0,[143],(()=>{[877,770,337,81,898,505,189].map(__webpack_require__.E)}),5)
var o=__webpack_require__.O(void 0,[706,845,604,590,527,511,4,467,926,74],(()=>__webpack_require__(3132)))
o=__webpack_require__.O(o)})()

//# sourceMappingURL=app.a52e0bbb3fe52f5f94875d9f153bdebc.js.map